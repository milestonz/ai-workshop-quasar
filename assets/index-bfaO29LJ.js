const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE-BaJy3rXd-CMtI8LWQ.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn-Ct8CcPim-C14yZ5bv.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2-XBnHkNao-C4tEq5Mn.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs-W54BP04g-B7ga8-1f.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8-BbVbuoQW-COWVB1Hm.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz-H1cNXnvb-isr4ghTG.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF-D0D5g8uB-BURwwSFM.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC-BcTnplim-amqq9nkv.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw-Cc0JXHbt-OFDxhl0U.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M-BcPAhq85-BnAtjUhT.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS-cN7vJrVL-BjnZ2Mn0.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB-BbWEG7lg-CMpNtlPl.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi-Dav2vSnU-CfpLyWfF.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY-Dn1durxV-DWHOfzTo.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm-Dz7aj0ta-DJp4I3dk.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd-BJUyk6is-DzDmumAF.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf-CR01ab35-2dIT34PE.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p-Cww5eWtn-Bf5C8IrZ.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh-Bhu1IBHp-YdyFVrae.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO-Cl7Zdf_z-Ce_I2uVo.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O-C_q9m6Eq-CC3p36g1.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7-BANrqH3G-CCsHXFuo.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A-BqhNFaGb-C1FXY7I5.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn-ctNmsRdv-C7dEt991.js","assets/QChip-DM6F31S0-CjJFSHfx-htvUgpWw-B6C49kGl.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv-K94wZDnO-DtgneFYW.js","assets/QLayout-BQ9g_6yu-Chj62EVq-BBQIb_HL-w8ZT01gj.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3-DTtME0RC-C6HguhVt.js","assets/QSeparator-BcYH26Md-D4-nJUmN-HaXOYAi2-D2QFjN5p.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT-h21m0_Zw-BClRmXLr.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc-Bi0EpWEu-D74WuHXn.js","assets/pinia-CUn_f_AT-BAm4BR34-CFOg6xp9-Bxf8Vsb9.js","assets/QBanner-DKpXtl0l-CoEeIaNs-q0N_FVYe-CDOnFhp0.js","assets/marked.esm-CTrcEICt-BUcm6MtN-CbCcALHQ-G3ym3Jcq.js","assets/IndexPage-CFs49cf4-DCFzd5a3-BgfGDant-BQyu4c8A.js","assets/QPage-CLbIAi8L-DDHzNr23-Cd5VgrA8-CUh4PsUm.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js","assets/SurveyResults-DvN0U2_L-LlonMCsx-BnTA3nZB-sQ_LP71B.js","assets/survey-DsL-eoSy-BaL70OSo-i6SJNP2j-DFglVz1r.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh-BkCeYv0t-Bok4-Zd3.js","assets/LogoutPage-CtCownZv-BTcpQEl3-n4ns1Z9p-ZobQPw5w.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx-BVDVEe2h-DYtMi2mC.js","assets/StudentView-EHbgIK-q-CI38o4Vo-NXpdNqUJ-Bi3XwWbb.js","assets/pinia-F5TpqEXP-CcuIgscM-CCJFe5VR-Cn00B-AD.js","assets/MainLayout-DWpWAzPm-DxBUie-I-BlRMqTDm.js","assets/QDialog-DCVptsUO-BjjrB4_Q-Bzy6NcaF.js","assets/QChip-nX3S8ibB-BQad_HXT-CUGi5zIv.js","assets/_plugin-vue_export-helper-CJfoBXcF-BV1JEARH-CItnoow2.js","assets/QLayout-DYpYNAz--CGJ4bGzo-BHuo-3Ga.js","assets/use-checkbox-CbTZvoI2-DT4-uIEu-BB1Trx-f.js","assets/QSeparator-BO07bsuT-lRT0fv-d-XE5pdLJo.js","assets/GuestLoginDialog-CSLLp_FG-BJ7s_Fzi-MugVHVa4.js","assets/useGuestAuth-B3dUk0QH-BQz37ZyD-CIKQNZtV.js","assets/pinia-CwhW7gbT-DgIwZFmV-DsNMh-02.js","assets/QBanner-DSaL6E1A-Cv2hl2L_-3K-zgrg4.js","assets/marked.esm-ChVohG0P-BAM_JNgt-Ccw4I5jU.js","assets/IndexPage-DdKp2QWP-D1s0LB9j-CI6bShkb.js","assets/QPage-CATcdJAM-BLG2WZ4G-CPjpClKi.js","assets/QSpinnerDots-CW_TS37f-DHTnbCLH-QXLK7h-f.js","assets/SurveyResults-Dr3yr6i_-DyDTVqvG-CTHBJa1h.js","assets/survey-C5GwGR2o-CqgkgVv6-4FOZJDs1.js","assets/PollResultBar-CcboJKVZ-DXx2v2RY-Cp7aUUWD.js","assets/LogoutPage-4UfyfpuW-DSspP6jT-BCrATKCZ.js","assets/PollResultPage-C5no3dXq-D30XDp5c-4DUkKc-y.js","assets/StudentView-Yd_YbX30-DTQa4fZ0-DyVb8kZP.js","assets/pinia-BFGcd6GC-l0KS0nH_-rCuYGOhx.js","assets/MainLayout-CDS1Q2ag-EoSf4LPx.js","assets/QDialog-B8pEesiq-BeyHQlTP.js","assets/QChip-5D8RM28h-CCot4X64.js","assets/_plugin-vue_export-helper-BIy862K0-Cvk7klib.js","assets/QLayout-Ch1tPNld-DqFhw1NL.js","assets/use-checkbox-v9zadS43-CJbR18q1.js","assets/QSeparator-BvYjkyh3-DkEPxTDb.js","assets/GuestLoginDialog-C8shKX0C-BV790tvM.js","assets/useGuestAuth-DCU4zYbt-BkzXZq5s.js","assets/pinia-Bs2obeVG-Cxe1i29N.js","assets/QBanner-Dj1wXmJN-DtFv62tq.js","assets/marked.esm-Bd18tbQr-hWC9_paR.js","assets/IndexPage-BBOp0ox0-CfFvH8gD.js","assets/QPage-ByY5YaQR-DpnvW4Lw.js","assets/QSpinnerDots-CtV_sSP1-C4uhZ7_-.js","assets/SurveyResults-CG0MlidS-DDVuI0Ks.js","assets/survey-BsPVZuTD-8S8Vv80W.js","assets/PollResultBar-CZnSW1dy-DhXjZ05i.js","assets/LogoutPage-Ds-LyEnk-1tM6zPDQ.js","assets/PollResultPage-D9Rdlzlq-Co8gmnv_.js","assets/StudentView-BxnDG6Z3-BEmyfOuL.js","assets/pinia-Cp8Yfd-4-C3eM6ioE.js","assets/MainLayout-DSP0ZXom.js","assets/QDialog-DKMvpy4J.js","assets/QChip-CTdTy5BO.js","assets/_plugin-vue_export-helper-D2YY3z9m.js","assets/QLayout-DlG8AzSl.js","assets/use-checkbox-hwqncav8.js","assets/QSeparator-DSqvf1MA.js","assets/GuestLoginDialog-BzDUPnSd.js","assets/useGuestAuth-ZR2tHDci.js","assets/pinia-DbmXsomq.js","assets/QBanner-dEnb48N5.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-CwGPu85X.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-m1sjmIpW.js","assets/QPage-KjP7jc3I.js","assets/QSpinnerDots-CSswX2p6.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-lTkqFsbI.js","assets/survey-Dj50dUER.js","assets/PollResultBar-CFykpJz-.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-BWGCZ8tj.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-ckw46gsk.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-BJb13pMi.js","assets/StudentView-B_NZFY6r.css","assets/pinia-DM263rYy.js"])))=>i.map(i=>d[i]);
const XQe=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),JQe=function(t){return"/"+t},$he={},an=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=o(n.map(u=>{if(u=JQe(u),u in $he)return;$he[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":XQe,h||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Fs=(t,e=Fs,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE-BaJy3rXd.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn-Ct8CcPim.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2-XBnHkNao.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs-W54BP04g.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8-BbVbuoQW.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz-H1cNXnvb.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF-D0D5g8uB.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC-BcTnplim.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw-Cc0JXHbt.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M-BcPAhq85.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS-cN7vJrVL.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB-BbWEG7lg.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi-Dav2vSnU.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY-Dn1durxV.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm-Dz7aj0ta.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd-BJUyk6is.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf-CR01ab35.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p-Cww5eWtn.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh-Bhu1IBHp.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO-Cl7Zdf_z.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O-C_q9m6Eq.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7-BANrqH3G.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A-BqhNFaGb.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn-ctNmsRdv.js","assets/QChip-DM6F31S0-CjJFSHfx-htvUgpWw.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv-K94wZDnO.js","assets/QLayout-BQ9g_6yu-Chj62EVq-BBQIb_HL.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3-DTtME0RC.js","assets/QSeparator-BcYH26Md-D4-nJUmN-HaXOYAi2.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT-h21m0_Zw.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc-Bi0EpWEu.js","assets/pinia-CUn_f_AT-BAm4BR34-CFOg6xp9.js","assets/QBanner-DKpXtl0l-CoEeIaNs-q0N_FVYe.js","assets/marked.esm-CTrcEICt-BUcm6MtN-CbCcALHQ.js","assets/IndexPage-CFs49cf4-DCFzd5a3-BgfGDant.js","assets/QPage-CLbIAi8L-DDHzNr23-Cd5VgrA8.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT.js","assets/SurveyResults-DvN0U2_L-LlonMCsx-BnTA3nZB.js","assets/survey-DsL-eoSy-BaL70OSo-i6SJNP2j.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh-BkCeYv0t.js","assets/LogoutPage-CtCownZv-BTcpQEl3-n4ns1Z9p.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx-BVDVEe2h.js","assets/StudentView-EHbgIK-q-CI38o4Vo-NXpdNqUJ.js","assets/pinia-F5TpqEXP-CcuIgscM-CCJFe5VR.js","assets/MainLayout-DWpWAzPm-DxBUie-I.js","assets/QDialog-DCVptsUO-BjjrB4_Q.js","assets/QChip-nX3S8ibB-BQad_HXT.js","assets/_plugin-vue_export-helper-CJfoBXcF-BV1JEARH.js","assets/QLayout-DYpYNAz--CGJ4bGzo.js","assets/use-checkbox-CbTZvoI2-DT4-uIEu.js","assets/QSeparator-BO07bsuT-lRT0fv-d.js","assets/GuestLoginDialog-CSLLp_FG-BJ7s_Fzi.js","assets/useGuestAuth-B3dUk0QH-BQz37ZyD.js","assets/pinia-CwhW7gbT-DgIwZFmV.js","assets/QBanner-DSaL6E1A-Cv2hl2L_.js","assets/marked.esm-ChVohG0P-BAM_JNgt.js","assets/IndexPage-DdKp2QWP-D1s0LB9j.js","assets/QPage-CATcdJAM-BLG2WZ4G.js","assets/QSpinnerDots-CW_TS37f-DHTnbCLH.js","assets/SurveyResults-Dr3yr6i_-DyDTVqvG.js","assets/survey-C5GwGR2o-CqgkgVv6.js","assets/PollResultBar-CcboJKVZ-DXx2v2RY.js","assets/LogoutPage-4UfyfpuW-DSspP6jT.js","assets/PollResultPage-C5no3dXq-D30XDp5c.js","assets/StudentView-Yd_YbX30-DTQa4fZ0.js","assets/pinia-BFGcd6GC-l0KS0nH_.js","assets/MainLayout-CDS1Q2ag.js","assets/QDialog-B8pEesiq.js","assets/QChip-5D8RM28h.js","assets/_plugin-vue_export-helper-BIy862K0.js","assets/QLayout-Ch1tPNld.js","assets/use-checkbox-v9zadS43.js","assets/QSeparator-BvYjkyh3.js","assets/GuestLoginDialog-C8shKX0C.js","assets/useGuestAuth-DCU4zYbt.js","assets/pinia-Bs2obeVG.js","assets/QBanner-Dj1wXmJN.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-Bd18tbQr.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-BBOp0ox0.js","assets/QPage-ByY5YaQR.js","assets/QSpinnerDots-CtV_sSP1.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-CG0MlidS.js","assets/survey-BsPVZuTD.js","assets/PollResultBar-CZnSW1dy.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-Ds-LyEnk.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-D9Rdlzlq.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-BxnDG6Z3.js","assets/StudentView-B_NZFY6r.css","assets/pinia-Cp8Yfd-4.js"]))=>t.map(s=>n[s]),ZQe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),eYe=function(t){return"/"+t},zhe={},ns=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=eYe(l),l in zhe)return;zhe[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ZQe,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},ri=(t,e=ri,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn.js","assets/QChip-DM6F31S0-CjJFSHfx.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv.js","assets/QLayout-BQ9g_6yu-Chj62EVq.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3.js","assets/QSeparator-BcYH26Md-D4-nJUmN.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc.js","assets/pinia-CUn_f_AT-BAm4BR34.js","assets/QBanner-DKpXtl0l-CoEeIaNs.js","assets/marked.esm-CTrcEICt-BUcm6MtN.js","assets/IndexPage-CFs49cf4-DCFzd5a3.js","assets/QPage-CLbIAi8L-DDHzNr23.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M.js","assets/SurveyResults-DvN0U2_L-LlonMCsx.js","assets/survey-DsL-eoSy-BaL70OSo.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh.js","assets/LogoutPage-CtCownZv-BTcpQEl3.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx.js","assets/StudentView-EHbgIK-q-CI38o4Vo.js","assets/pinia-F5TpqEXP-CcuIgscM.js","assets/MainLayout-DWpWAzPm.js","assets/QDialog-DCVptsUO.js","assets/QChip-nX3S8ibB.js","assets/_plugin-vue_export-helper-CJfoBXcF.js","assets/QLayout-DYpYNAz-.js","assets/use-checkbox-CbTZvoI2.js","assets/QSeparator-BO07bsuT.js","assets/GuestLoginDialog-CSLLp_FG.js","assets/useGuestAuth-B3dUk0QH.js","assets/pinia-CwhW7gbT.js","assets/QBanner-DSaL6E1A.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-ChVohG0P.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-DdKp2QWP.js","assets/QPage-CATcdJAM.js","assets/QSpinnerDots-CW_TS37f.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-Dr3yr6i_.js","assets/survey-C5GwGR2o.js","assets/PollResultBar-CcboJKVZ.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-4UfyfpuW.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-C5no3dXq.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-Yd_YbX30.js","assets/StudentView-B_NZFY6r.css","assets/pinia-BFGcd6GC.js"]))=>t.map(s=>n[s]),tYe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),nYe=function(t){return"/"+t},Hhe={},ur=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=nYe(l),l in Hhe)return;Hhe[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":tYe,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},Vc=(t,e=Vc,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV.js","assets/QDialog-CXn2kBax-C53UdG9D.js","assets/QChip-BJIOjoIv-Djywe0kj.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50.js","assets/QLayout-s6SDzMwt-C7GQ1361.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL.js","assets/QSeparator-Chi7pIZw-Dfi-b9On.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu.js","assets/pinia-DRC1X92K-CVhvq81r.js","assets/QBanner-BY0ggvyL-C3yUuPRa.js","assets/marked.esm-mI6KSz_d-CXpNVb3h.js","assets/IndexPage-BLAmILuN-HA-OPItk.js","assets/QPage-B1iJaq8H-BMxUDXKn.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd.js","assets/SurveyResults-DhayuQfj-D0iteWpb.js","assets/survey-DXHWirsQ-BJaxGuvV.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ.js","assets/pinia-CU9SUkzn-Dk66cb7x.js","assets/MainLayout-Bwj2wsFm.js","assets/QDialog-Dn9VjDcM.js","assets/QChip-DM6F31S0.js","assets/_plugin-vue_export-helper-DdgHTl4p.js","assets/QLayout-BQ9g_6yu.js","assets/use-checkbox-ClSmRWjY.js","assets/QSeparator-BcYH26Md.js","assets/GuestLoginDialog-6vHhwSmg.js","assets/useGuestAuth-BRpWhMZD.js","assets/pinia-CUn_f_AT.js","assets/QBanner-DKpXtl0l.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-CTrcEICt.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-CFs49cf4.js","assets/QPage-CLbIAi8L.js","assets/QSpinnerDots-55T99jjC.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DvN0U2_L.js","assets/survey-DsL-eoSy.js","assets/PollResultBar-CeuqJwy4.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-CtCownZv.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-BsZ27FdJ.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-EHbgIK-q.js","assets/StudentView-B_NZFY6r.css","assets/pinia-F5TpqEXP.js"]))=>t.map(s=>n[s]),sYe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),rYe=function(t){return"/"+t},Whe={},ho=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=rYe(l),l in Whe)return;Whe[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":sYe,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},gy=(t,e=gy,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9.js","assets/QDialog-CXn2kBax.js","assets/QChip-BJIOjoIv.js","assets/_plugin-vue_export-helper-DXafCR7g.js","assets/QLayout-s6SDzMwt.js","assets/use-checkbox-Hdp5Jlzs.js","assets/QSeparator-Chi7pIZw.js","assets/GuestLoginDialog-C7xr6EXW.js","assets/useGuestAuth-Mxd3jo-z.js","assets/pinia-DRC1X92K.js","assets/QBanner-BY0ggvyL.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-mI6KSz_d.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-BLAmILuN.js","assets/QPage-B1iJaq8H.js","assets/QSpinnerDots-DmD6LJEW.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DhayuQfj.js","assets/survey-DXHWirsQ.js","assets/PollResultBar-Bydgm1gR.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-D1GfaPnm.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-B3rDVM-7.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-ZIAbzNqK.js","assets/StudentView-B_NZFY6r.css","assets/pinia-CU9SUkzn.js"]))=>t.map(s=>n[s]),iYe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),oYe=function(t){return"/"+t},Ghe={},ah=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=oYe(l),l in Ghe)return;Ghe[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":iYe,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ZZ(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const $s={},TI=[],Kf=()=>{},aYe=()=>!1,vj=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),eee=t=>t.startsWith("onUpdate:"),jo=Object.assign,tee=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},cYe=Object.prototype.hasOwnProperty,gs=(t,e)=>cYe.call(t,e),St=Array.isArray,CI=t=>wj(t)==="[object Map]",p1e=t=>wj(t)==="[object Set]",zt=t=>typeof t=="function",ui=t=>typeof t=="string",hb=t=>typeof t=="symbol",Ir=t=>t!==null&&typeof t=="object",g1e=t=>(Ir(t)||zt(t))&&zt(t.then)&&zt(t.catch),m1e=Object.prototype.toString,wj=t=>m1e.call(t),lYe=t=>wj(t).slice(8,-1),_1e=t=>wj(t)==="[object Object]",nee=t=>ui(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,HA=ZZ(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bj=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},uYe=/-(\w)/g,Ph=bj(t=>t.replace(uYe,(e,n)=>n?n.toUpperCase():"")),hYe=/\B([A-Z])/g,kC=bj(t=>t.replace(hYe,"-$1").toLowerCase()),Ej=bj(t=>t.charAt(0).toUpperCase()+t.slice(1)),S7=bj(t=>t?`on${Ej(t)}`:""),sv=(t,e)=>!Object.is(t,e),k7=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},_K=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},dYe=t=>{const e=parseFloat(t);return isNaN(e)?t:e},fYe=t=>{const e=ui(t)?Number(t):NaN;return isNaN(e)?t:e};let Khe;const Tj=()=>Khe||(Khe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function RC(t){if(St(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ui(s)?_Ye(s):RC(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ui(t)||Ir(t))return t}const pYe=/;(?![^(]*\))/g,gYe=/:([^]+)/,mYe=/\/\*[^]*?\*\//g;function _Ye(t){const e={};return t.replace(mYe,"").split(pYe).forEach(n=>{if(n){const s=n.split(gYe);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function AC(t){let e="";if(ui(t))e=t;else if(St(t))for(let n=0;n<t.length;n++){const s=AC(t[n]);s&&(e+=s+" ")}else if(Ir(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const yYe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vYe=ZZ(yYe);function y1e(t){return!!t||t===""}const v1e=t=>!!(t&&t.__v_isRef===!0),LO=t=>ui(t)?t:t==null?"":St(t)||Ir(t)&&(t.toString===m1e||!zt(t.toString))?v1e(t)?LO(t.value):JSON.stringify(t,w1e,2):String(t),w1e=(t,e)=>v1e(e)?w1e(t,e.value):CI(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[R7(s,i)+" =>"]=r,n),{})}:p1e(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>R7(n))}:hb(e)?R7(e):Ir(e)&&!St(e)&&!_1e(e)?String(e):e,R7=(t,e="")=>{var n;return hb(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ua;class b1e{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ua,!e&&Ua&&(this.index=(Ua.scopes||(Ua.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ua;try{return Ua=this,e()}finally{Ua=n}}}on(){++this._on===1&&(this.prevScope=Ua,Ua=this)}off(){this._on>0&&--this._on===0&&(Ua=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Cj(t){return new b1e(t)}function MO(){return Ua}function Ij(t,e=!1){Ua&&Ua.cleanups.push(t)}let er;const A7=new WeakSet;class E1e{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ua&&Ua.active&&Ua.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,A7.has(this)&&(A7.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||C1e(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Qhe(this),I1e(this);const e=er,n=wd;er=this,wd=!0;try{return this.fn()}finally{S1e(this),er=e,wd=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)iee(e);this.deps=this.depsTail=void 0,Qhe(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?A7.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yK(this)&&this.run()}get dirty(){return yK(this)}}let T1e=0,WA,GA;function C1e(t,e=!1){if(t.flags|=8,e){t.next=GA,GA=t;return}t.next=WA,WA=t}function see(){T1e++}function ree(){if(--T1e>0)return;if(GA){let e=GA;for(GA=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;WA;){let e=WA;for(WA=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function I1e(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function S1e(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),iee(s),wYe(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function yK(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(k1e(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function k1e(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===XN)||(t.globalVersion=XN,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!yK(t))))return;t.flags|=2;const e=t.dep,n=er,s=wd;er=t,wd=!0;try{I1e(t);const r=t.fn(t._value);(e.version===0||sv(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{er=n,wd=s,S1e(t),t.flags&=-3}}function iee(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)iee(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wYe(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let wd=!0;const R1e=[];function Vm(){R1e.push(wd),wd=!1}function Um(){const t=R1e.pop();wd=t===void 0?!0:t}function Qhe(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=er;er=void 0;try{e()}finally{er=n}}}let XN=0;class bYe{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class oee{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!er||!wd||er===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==er)n=this.activeLink=new bYe(er,this),er.deps?(n.prevDep=er.depsTail,er.depsTail.nextDep=n,er.depsTail=n):er.deps=er.depsTail=n,A1e(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=er.depsTail,n.nextDep=void 0,er.depsTail.nextDep=n,er.depsTail=n,er.deps===n&&(er.deps=s)}return n}trigger(e){this.version++,XN++,this.notify(e)}notify(e){see();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ree()}}}function A1e(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)A1e(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const YV=new WeakMap,JE=Symbol(""),vK=Symbol(""),JN=Symbol("");function Qa(t,e,n){if(wd&&er){let s=YV.get(t);s||YV.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new oee),r.map=s,r.key=n),r.track()}}function Zg(t,e,n,s,r,i){const o=YV.get(t);if(!o){XN++;return}const a=l=>{l&&l.trigger()};if(see(),e==="clear")o.forEach(a);else{const l=St(t),u=l&&nee(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===JN||!hb(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(JN)),e){case"add":l?u&&a(o.get("length")):(a(o.get(JE)),CI(t)&&a(o.get(vK)));break;case"delete":l||(a(o.get(JE)),CI(t)&&a(o.get(vK)));break;case"set":CI(t)&&a(o.get(JE));break}}ree()}function EYe(t,e){const n=YV.get(t);return n&&n.get(e)}function o0(t){const e=yn(t);return e===t?e:(Qa(e,"iterate",JN),yh(t)?e:e.map(fa))}function Sj(t){return Qa(t=yn(t),"iterate",JN),t}const TYe={__proto__:null,[Symbol.iterator](){return P7(this,Symbol.iterator,fa)},concat(...t){return o0(this).concat(...t.map(e=>St(e)?o0(e):e))},entries(){return P7(this,"entries",t=>(t[1]=fa(t[1]),t))},every(t,e){return xg(this,"every",t,e,void 0,arguments)},filter(t,e){return xg(this,"filter",t,e,n=>n.map(fa),arguments)},find(t,e){return xg(this,"find",t,e,fa,arguments)},findIndex(t,e){return xg(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xg(this,"findLast",t,e,fa,arguments)},findLastIndex(t,e){return xg(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xg(this,"forEach",t,e,void 0,arguments)},includes(...t){return N7(this,"includes",t)},indexOf(...t){return N7(this,"indexOf",t)},join(t){return o0(this).join(t)},lastIndexOf(...t){return N7(this,"lastIndexOf",t)},map(t,e){return xg(this,"map",t,e,void 0,arguments)},pop(){return gR(this,"pop")},push(...t){return gR(this,"push",t)},reduce(t,...e){return Yhe(this,"reduce",t,e)},reduceRight(t,...e){return Yhe(this,"reduceRight",t,e)},shift(){return gR(this,"shift")},some(t,e){return xg(this,"some",t,e,void 0,arguments)},splice(...t){return gR(this,"splice",t)},toReversed(){return o0(this).toReversed()},toSorted(t){return o0(this).toSorted(t)},toSpliced(...t){return o0(this).toSpliced(...t)},unshift(...t){return gR(this,"unshift",t)},values(){return P7(this,"values",fa)}};function P7(t,e,n){const s=Sj(t),r=s[e]();return s!==t&&!yh(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const CYe=Array.prototype;function xg(t,e,n,s,r,i){const o=Sj(t),a=o!==t&&!yh(t),l=o[e];if(l!==CYe[e]){const d=l.apply(t,i);return a?fa(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,fa(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function Yhe(t,e,n,s){const r=Sj(t);let i=n;return r!==t&&(yh(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,fa(a),l,t)}),r[e](i,...s)}function N7(t,e,n){const s=yn(t);Qa(s,"iterate",JN);const r=s[e](...n);return(r===-1||r===!1)&&lee(n[0])?(n[0]=yn(n[0]),s[e](...n)):r}function gR(t,e,n=[]){Vm(),see();const s=yn(t)[e].apply(t,n);return ree(),Um(),s}const IYe=ZZ("__proto__,__v_isRef,__isVue"),P1e=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(hb));function SYe(t){hb(t)||(t=String(t));const e=yn(this);return Qa(e,"has",t),e.hasOwnProperty(t)}class N1e{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?MYe:L1e:i?O1e:D1e).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=St(e);if(!r){let l;if(o&&(l=TYe[n]))return l;if(n==="hasOwnProperty")return SYe}const a=Reflect.get(e,n,Ri(e)?e:s);return(hb(n)?P1e.has(n):IYe(n))||(r||Qa(e,"get",n),i)?a:Ri(a)?o&&nee(n)?a:a.value:Ir(a)?r?M1e(a):Xp(a):a}}class x1e extends N1e{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Gv(i);if(!yh(s)&&!Gv(s)&&(i=yn(i),s=yn(s)),!St(e)&&Ri(i)&&!Ri(s))return l?!1:(i.value=s,!0)}const o=St(e)&&nee(n)?Number(n)<e.length:gs(e,n),a=Reflect.set(e,n,s,Ri(e)?e:r);return e===yn(r)&&(o?sv(s,i)&&Zg(e,"set",n,s):Zg(e,"add",n,s)),a}deleteProperty(e,n){const s=gs(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Zg(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!hb(n)||!P1e.has(n))&&Qa(e,"has",n),s}ownKeys(e){return Qa(e,"iterate",St(e)?"length":JE),Reflect.ownKeys(e)}}class kYe extends N1e{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const RYe=new x1e,AYe=new kYe,PYe=new x1e(!0),wK=t=>t,j2=t=>Reflect.getPrototypeOf(t);function NYe(t,e,n){return function(...s){const r=this.__v_raw,i=yn(r),o=CI(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?wK:e?XV:fa;return!e&&Qa(i,"iterate",l?vK:JE),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function B2(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xYe(t,e){const n={get(s){const r=this.__v_raw,i=yn(r),o=yn(s);t||(sv(s,o)&&Qa(i,"get",s),Qa(i,"get",o));const{has:a}=j2(i),l=e?wK:t?XV:fa;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&Qa(yn(s),"iterate",JE),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=yn(r),o=yn(s);return t||(sv(s,o)&&Qa(i,"has",s),Qa(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=yn(o),l=e?wK:t?XV:fa;return!t&&Qa(a,"iterate",JE),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return jo(n,t?{add:B2("add"),set:B2("set"),delete:B2("delete"),clear:B2("clear")}:{add(s){!e&&!yh(s)&&!Gv(s)&&(s=yn(s));const r=yn(this);return j2(r).has.call(r,s)||(r.add(s),Zg(r,"add",s,s)),this},set(s,r){!e&&!yh(r)&&!Gv(r)&&(r=yn(r));const i=yn(this),{has:o,get:a}=j2(i);let l=o.call(i,s);l||(s=yn(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?sv(r,u)&&Zg(i,"set",s,r):Zg(i,"add",s,r),this},delete(s){const r=yn(this),{has:i,get:o}=j2(r);let a=i.call(r,s);a||(s=yn(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&Zg(r,"delete",s,void 0),l},clear(){const s=yn(this),r=s.size!==0,i=s.clear();return r&&Zg(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=NYe(s,t,e)}),n}function aee(t,e){const n=xYe(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(gs(n,r)&&r in s?n:s,r,i)}const DYe={get:aee(!1,!1)},OYe={get:aee(!1,!0)},LYe={get:aee(!0,!1)},D1e=new WeakMap,O1e=new WeakMap,L1e=new WeakMap,MYe=new WeakMap;function FYe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VYe(t){return t.__v_skip||!Object.isExtensible(t)?0:FYe(lYe(t))}function Xp(t){return Gv(t)?t:cee(t,!1,RYe,DYe,D1e)}function Xk(t){return cee(t,!1,PYe,OYe,O1e)}function M1e(t){return cee(t,!0,AYe,LYe,L1e)}function cee(t,e,n,s,r){if(!Ir(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=VYe(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Qf(t){return Gv(t)?Qf(t.__v_raw):!!(t&&t.__v_isReactive)}function Gv(t){return!!(t&&t.__v_isReadonly)}function yh(t){return!!(t&&t.__v_isShallow)}function lee(t){return t?!!t.__v_raw:!1}function yn(t){const e=t&&t.__v_raw;return e?yn(e):t}function P_(t){return!gs(t,"__v_skip")&&Object.isExtensible(t)&&_K(t,"__v_skip",!0),t}const fa=t=>Ir(t)?Xp(t):t,XV=t=>Ir(t)?M1e(t):t;function Ri(t){return t?t.__v_isRef===!0:!1}function Nh(t){return F1e(t,!1)}function UYe(t){return F1e(t,!0)}function F1e(t,e){return Ri(t)?t:new qYe(t,e)}class qYe{constructor(e,n){this.dep=new oee,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:yn(e),this._value=n?e:fa(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||yh(e)||Gv(e);e=s?e:yn(e),sv(e,n)&&(this._rawValue=e,this._value=s?e:fa(e),this.dep.trigger())}}function bd(t){return Ri(t)?t.value:t}const jYe={get:(t,e,n)=>e==="__v_raw"?t:bd(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ri(r)&&!Ri(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function V1e(t){return Qf(t)?t:new Proxy(t,jYe)}function kj(t){const e=St(t)?new Array(t.length):{};for(const n in t)e[n]=$Ye(t,n);return e}class BYe{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return EYe(yn(this._object),this._key)}}function $Ye(t,e,n){const s=t[e];return Ri(s)?s:new BYe(t,e,n)}class zYe{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new oee(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=XN-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&er!==this)return C1e(this,!0),!0}get value(){const e=this.dep.track();return k1e(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function HYe(t,e,n=!1){let s,r;return zt(t)?s=t:(s=t.get,r=t.set),new zYe(s,r,n)}const $2={},JV=new WeakMap;let sE;function WYe(t,e=!1,n=sE){if(n){let s=JV.get(n);s||JV.set(n,s=[]),s.push(t)}}function GYe(t,e,n=$s){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:yh(q)||r===!1||r===0?em(q,1):em(q);let h,d,p,m,w=!1,R=!1;if(Ri(t)?(d=()=>t.value,w=yh(t)):Qf(t)?(d=()=>u(t),w=!0):St(t)?(R=!0,w=t.some(q=>Qf(q)||yh(q)),d=()=>t.map(q=>{if(Ri(q))return q.value;if(Qf(q))return u(q);if(zt(q))return l?l(q,2):q()})):zt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Vm();try{p()}finally{Um()}}const q=sE;sE=h;try{return l?l(t,3,[m]):t(m)}finally{sE=q}}:d=Kf,e&&r){const q=d,W=r===!0?1/0:r;d=()=>em(q(),W)}const P=MO(),O=()=>{h.stop(),P&&P.active&&tee(P.effects,h)};if(i&&e){const q=e;e=(...W)=>{q(...W),O()}}let M=R?new Array(t.length).fill($2):$2;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const W=h.run();if(r||w||(R?W.some((J,I)=>sv(J,M[I])):sv(W,M))){p&&p();const J=sE;sE=h;try{const I=[W,M===$2?void 0:R&&M[0]===$2?[]:M,m];M=W,l?l(e,3,I):e(...I)}finally{sE=J}}}else h.run()};return a&&a(V),h=new E1e(d),h.scheduler=o?()=>o(V,!1):V,m=q=>WYe(q,!1,h),p=h.onStop=()=>{const q=JV.get(h);if(q){if(l)l(q,4);else for(const W of q)W();JV.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function em(t,e=1/0,n){if(e<=0||!Ir(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ri(t))em(t.value,e,n);else if(St(t))for(let s=0;s<t.length;s++)em(t[s],e,n);else if(p1e(t)||CI(t))t.forEach(s=>{em(s,e,n)});else if(_1e(t)){for(const s in t)em(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&em(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function FO(t,e,n,s){try{return s?t(...s):t()}catch(r){Rj(r,e,n)}}function Kd(t,e,n,s){if(zt(t)){const r=FO(t,e,n,s);return r&&g1e(r)&&r.catch(i=>{Rj(i,e,n)}),r}if(St(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Kd(t[i],e,n,s));return r}}function Rj(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||$s;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){Vm(),FO(i,null,10,[t,l,u]),Um();return}}KYe(t,n,r,s,o)}function KYe(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Uc=[];let If=-1;const II=[];let my=null,F0=0;const U1e=Promise.resolve();let ZV=null;function Jk(t){const e=ZV||U1e;return t?e.then(this?t.bind(this):t):e}function QYe(t){let e=If+1,n=Uc.length;for(;e<n;){const s=e+n>>>1,r=Uc[s],i=ZN(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function uee(t){if(!(t.flags&1)){const e=ZN(t),n=Uc[Uc.length-1];!n||!(t.flags&2)&&e>=ZN(n)?Uc.push(t):Uc.splice(QYe(e),0,t),t.flags|=1,q1e()}}function q1e(){ZV||(ZV=U1e.then(B1e))}function YYe(t){St(t)?II.push(...t):my&&t.id===-1?my.splice(F0+1,0,t):t.flags&1||(II.push(t),t.flags|=1),q1e()}function Xhe(t,e,n=If+1){for(;n<Uc.length;n++){const s=Uc[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Uc.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function j1e(t){if(II.length){const e=[...new Set(II)].sort((n,s)=>ZN(n)-ZN(s));if(II.length=0,my){my.push(...e);return}for(my=e,F0=0;F0<my.length;F0++){const n=my[F0];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}my=null,F0=0}}const ZN=t=>t.id==null?t.flags&2?-1:1/0:t.id;function B1e(t){try{for(If=0;If<Uc.length;If++){const e=Uc[If];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),FO(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;If<Uc.length;If++){const e=Uc[If];e&&(e.flags&=-2)}If=-1,Uc.length=0,j1e(),ZV=null,(Uc.length||II.length)&&B1e()}}let Lu=null,$1e=null;function eU(t){const e=Lu;return Lu=t,$1e=t&&t.type.__scopeId||null,e}function VO(t,e=Lu,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&hde(-1);const i=eU(e);let o;try{o=t(...r)}finally{eU(i),s._d&&hde(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Zk(t,e){if(Lu===null)return t;const n=Fj(Lu),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=$s]=e[r];i&&(zt(i)&&(i={mounted:i,updated:i}),i.deep&&em(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Fb(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Vm(),Kd(l,n,8,[t.el,a,t,e]),Um())}}const z1e=Symbol("_vte"),H1e=t=>t.__isTeleport,KA=t=>t&&(t.disabled||t.disabled===""),Jhe=t=>t&&(t.defer||t.defer===""),Zhe=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ede=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,bK=(t,e)=>{const n=t&&t.to;return ui(n)?e?e(n):null:n},W1e={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:R,createComment:P}}=u,O=KA(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const W=e.el=R(""),J=e.anchor=R("");m(W,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,l))},v=()=>{const y=e.target=bK(e.props,w),T=G1e(y,e,R,m);y&&(o!=="svg"&&Zhe(y)?o="svg":o!=="mathml"&&ede(y)&&(o="mathml"),O||(I(y,T),f4(e,!1)))};O&&(I(n,J),f4(e,!0)),Jhe(e.props)?(e.el.__isMounted=!1,Dc(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Jhe(e.props)&&t.el.__isMounted===!1){Dc(()=>{W1e.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=KA(t.props),y=v?n:J,T=v?W:I;if(o==="svg"||Zhe(J)?o="svg":(o==="mathml"||ede(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),pee(t,e,!0)):l||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):z2(e,n,W,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=bK(e.props,w);S&&z2(e,S,null,u,0)}else v&&z2(e,J,I,u,1);f4(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!KA(p);for(let w=0;w<a.length;w++){const R=a[w];s(R,e,n,m,!!R.dynamicChildren)}}},move:z2,hydrate:XYe};function z2(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||KA(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function XYe(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=bK(e.props,l);if(p){const m=KA(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let R=w;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")e.targetStart=R;else if(R.data==="teleport anchor"){e.targetAnchor=R,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}R=o(R)}e.targetAnchor||G1e(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}f4(e,m)}return e.anchor&&o(e.anchor)}const Aj=W1e;function f4(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function G1e(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[z1e]=i,t&&(s(r,t),s(i,t)),i}const _y=Symbol("_leaveCb"),H2=Symbol("_enterCb");function K1e(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return PC(()=>{t.isMounted=!0}),NC(()=>{t.isUnmounting=!0}),t}const Xu=[Function,Array],Q1e={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xu,onEnter:Xu,onAfterEnter:Xu,onEnterCancelled:Xu,onBeforeLeave:Xu,onLeave:Xu,onAfterLeave:Xu,onLeaveCancelled:Xu,onBeforeAppear:Xu,onAppear:Xu,onAfterAppear:Xu,onAppearCancelled:Xu},Y1e=t=>{const e=t.subTree;return e.component?Y1e(e.component):e},JYe={name:"BaseTransition",props:Q1e,setup(t,{slots:e}){const n=lf(),s=K1e();return()=>{const r=e.default&&hee(e.default(),!0);if(!r||!r.length)return;const i=X1e(r),o=yn(t),{mode:a}=o;if(s.isLeaving)return x7(i);const l=tde(i);if(!l)return x7(i);let u=ex(l,o,s,n,d=>u=d);l.type!==Hc&&AT(l,u);let h=n.subTree&&tde(n.subTree);if(h&&h.type!==Hc&&!wE(l,h)&&Y1e(n).type!==Hc){let d=ex(h,o,s,n);if(AT(h,d),a==="out-in"&&l.type!==Hc)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},x7(i);a==="in-out"&&l.type!==Hc?d.delayLeave=(p,m,w)=>{const R=J1e(s,h);R[String(h.key)]=h,p[_y]=()=>{m(),p[_y]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function X1e(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Hc){e=n;break}}return e}const ZYe=JYe;function J1e(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function ex(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),W=J1e(n,t),J=(y,T)=>{y&&Kd(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),St(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[_y]&&y[_y](!0);const S=W[q];S&&wE(t,S)&&S.el[_y]&&S.el[_y](),J(T,[y])},enter(y){let T=u,S=h,E=d;if(!n.isMounted)if(i)T=O||u,S=M||h,E=V||d;else return;let b=!1;const G=y[H2]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[H2]=void 0)};T?I(T,[y,G]):G()},leave(y,T){const S=String(t.key);if(y[H2]&&y[H2](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[_y]=G=>{E||(E=!0,T(),G?J(R,[y]):J(w,[y]),y[_y]=void 0,W[S]===t&&delete W[S])};W[S]=t,m?I(m,[y,b]):b()},clone(y){const T=ex(y,e,n,s,r);return r&&r(T),T}};return v}function x7(t){if(Pj(t))return t=Kv(t),t.children=null,t}function tde(t){if(!Pj(t))return H1e(t.type)&&t.children?X1e(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&zt(n.default))return n.default()}}function AT(t,e){t.shapeFlag&6&&t.component?(t.transition=e,AT(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function hee(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===qc?(o.patchFlag&128&&r++,s=s.concat(hee(o.children,e,a))):(e||o.type!==Hc)&&s.push(a!=null?Kv(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function db(t,e){return zt(t)?jo({name:t.name},e,{setup:t}):t}function Z1e(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function QA(t,e,n,s,r=!1){if(St(t)){t.forEach((w,R)=>QA(w,e&&(St(e)?e[R]:e),n,s,r));return}if(YA(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&QA(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Fj(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===$s?a.refs={}:a.refs,d=a.setupState,p=yn(d),m=d===$s?()=>!1:w=>gs(p,w);if(u!=null&&u!==l&&(ui(u)?(h[u]=null,m(u)&&(d[u]=null)):Ri(u)&&(u.value=null)),zt(l))FO(l,a,12,[o,h]);else{const w=ui(l),R=Ri(l);if(w||R){const P=()=>{if(t.f){const O=w?m(l)?d[l]:h[l]:l.value;r?St(O)&&tee(O,i):St(O)?O.includes(i)||O.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):R&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Dc(P,n)):P()}}}Tj().requestIdleCallback;Tj().cancelIdleCallback;const YA=t=>!!t.type.__asyncLoader,Pj=t=>t.type.__isKeepAlive;function UO(t,e){eRe(t,"a",e)}function qO(t,e){eRe(t,"da",e)}function eRe(t,e,n=uc){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Nj(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Pj(r.parent.vnode)&&eXe(s,e,n,r),r=r.parent}}function eXe(t,e,n,s){const r=Nj(e,t,s,!0);xC(()=>{tee(s[e],r)},n)}function Nj(t,e,n=uc,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Vm();const a=GO(n),l=Kd(e,n,t,o);return a(),Um(),l});return s?r.unshift(i):r.push(i),i}}const N_=t=>(e,n=uc)=>{(!nx||t==="sp")&&Nj(t,(...s)=>e(...s),n)},jO=N_("bm"),PC=N_("m"),BO=N_("bu"),e1=N_("u"),NC=N_("bum"),xC=N_("um"),tXe=N_("sp"),nXe=N_("rtg"),sXe=N_("rtc");function rXe(t,e=uc){Nj("ec",t,e)}const iXe="components";function $O(t,e){return aXe(iXe,t,!0,e)||t}const oXe=Symbol.for("v-ndc");function aXe(t,e,n=!0,s=!1){const r=Lu||uc;if(r){const i=r.type;{const a=GXe(i,!1);if(a&&(a===e||a===Ph(e)||a===Ej(Ph(e))))return i}const o=nde(r[t]||i[t],e)||nde(r.appContext[t],e);return!o&&s?i:o}}function nde(t,e){return t&&(t[e]||t[Ph(e)]||t[Ej(Ph(e))])}function xj(t,e,n,s){let r;const i=n,o=St(t);if(o||ui(t)){const a=o&&Qf(t);let l=!1,u=!1;a&&(l=!yh(t),u=Gv(t),t=Sj(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?XV(fa(t[h])):fa(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ir(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const EK=t=>t?vRe(t)?Fj(t):EK(t.parent):null,XA=jo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>EK(t.parent),$root:t=>EK(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>nRe(t),$forceUpdate:t=>t.f||(t.f=()=>{uee(t.update)}),$nextTick:t=>t.n||(t.n=Jk.bind(t.proxy)),$watch:t=>RXe.bind(t)}),D7=(t,e)=>t!==$s&&!t.__isScriptSetup&&gs(t,e),cXe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(D7(s,e))return o[e]=1,s[e];if(r!==$s&&gs(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&gs(u,e))return o[e]=3,i[e];if(n!==$s&&gs(n,e))return o[e]=4,n[e];TK&&(o[e]=0)}}const h=XA[e];let d,p;if(h)return e==="$attrs"&&Qa(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==$s&&gs(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,gs(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return D7(r,e)?(r[e]=n,!0):s!==$s&&gs(s,e)?(s[e]=n,!0):gs(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==$s&&gs(t,o)||D7(e,o)||(a=i[0])&&gs(a,o)||gs(s,o)||gs(XA,o)||gs(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:gs(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function sde(t){return St(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let TK=!0;function lXe(t){const e=nRe(t),n=t.proxy,s=t.ctx;TK=!1,e.beforeCreate&&rde(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:R,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:W,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:G}=e;if(u&&uXe(u,s,null),o)for(const ae in o){const oe=o[ae];zt(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);Ir(ae)&&(t.data=Xp(ae))}if(TK=!0,i)for(const ae in i){const oe=i[ae],de=zt(oe)?oe.bind(n,n):zt(oe.get)?oe.get.bind(n,n):Kf,ct=!zt(oe)&&zt(oe.set)?oe.set.bind(n):Kf,Ke=nt({get:de,set:ct});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Qe=>Ke.value=Qe})}if(a)for(const ae in a)tRe(a[ae],s,n,ae);if(l){const ae=zt(l)?l.call(n):l;Reflect.ownKeys(ae).forEach(oe=>{rv(oe,ae[oe])})}h&&rde(h,t,"c");function ne(ae,oe){St(oe)?oe.forEach(de=>ae(de.bind(n))):oe&&ae(oe.bind(n))}if(ne(jO,d),ne(PC,p),ne(BO,m),ne(e1,w),ne(UO,R),ne(qO,P),ne(rXe,v),ne(sXe,J),ne(nXe,I),ne(NC,M),ne(xC,q),ne(tXe,y),St(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:de=>n[oe]=de,enumerable:!0})})}else t.exposed||(t.exposed={});W&&t.render===Kf&&(t.render=W),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&Z1e(t)}function uXe(t,e,n=Kf){St(t)&&(t=CK(t));for(const s in t){const r=t[s];let i;Ir(r)?"default"in r?i=mc(r.from||s,r.default,!0):i=mc(r.from||s):i=mc(r),Ri(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function rde(t,e,n){Kd(St(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function tRe(t,e,n,s){let r=s.includes(".")?pRe(n,s):()=>n[s];if(ui(t)){const i=e[t];zt(i)&&Pm(r,i)}else if(zt(t))Pm(r,t.bind(n));else if(Ir(t))if(St(t))t.forEach(i=>tRe(i,e,n,s));else{const i=zt(t.handler)?t.handler.bind(n):e[t.handler];zt(i)&&Pm(r,i,t)}}function nRe(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>tU(l,u,o,!0)),tU(l,e,o)),Ir(e)&&i.set(e,l),l}function tU(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&tU(t,i,n,!0),r&&r.forEach(o=>tU(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=hXe[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hXe={data:ide,props:ode,emits:ode,methods:dA,computed:dA,beforeCreate:Rc,created:Rc,beforeMount:Rc,mounted:Rc,beforeUpdate:Rc,updated:Rc,beforeDestroy:Rc,beforeUnmount:Rc,destroyed:Rc,unmounted:Rc,activated:Rc,deactivated:Rc,errorCaptured:Rc,serverPrefetch:Rc,components:dA,directives:dA,watch:fXe,provide:ide,inject:dXe};function ide(t,e){return e?t?function(){return jo(zt(t)?t.call(this,this):t,zt(e)?e.call(this,this):e)}:e:t}function dXe(t,e){return dA(CK(t),CK(e))}function CK(t){if(St(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Rc(t,e){return t?[...new Set([].concat(t,e))]:e}function dA(t,e){return t?jo(Object.create(null),t,e):e}function ode(t,e){return t?St(t)&&St(e)?[...new Set([...t,...e])]:jo(Object.create(null),sde(t),sde(e??{})):e}function fXe(t,e){if(!t)return e;if(!e)return t;const n=jo(Object.create(null),t);for(const s in e)n[s]=Rc(t[s],e[s]);return n}function sRe(){return{app:null,config:{isNativeTag:aYe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pXe=0;function gXe(t,e){return function(n,s=null){zt(n)||(n=jo({},n)),s!=null&&!Ir(s)&&(s=null);const r=sRe(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:pXe++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:QXe,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&zt(u.install)?(i.add(u),u.install(l,...h)):zt(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||Lo(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,Fj(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(Kd(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=ZE;ZE=l;try{return u()}finally{ZE=h}}};return l}}let ZE=null;function rv(t,e){if(uc){let n=uc.provides;const s=uc.parent&&uc.parent.provides;s===n&&(n=uc.provides=Object.create(s)),n[t]=e}}function mc(t,e,n=!1){const s=lf();if(s||ZE){let r=ZE?ZE._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&zt(e)?e.call(s&&s.proxy):e}}function Dj(){return!!(lf()||ZE)}const rRe={},iRe=()=>Object.create(rRe),oRe=t=>Object.getPrototypeOf(t)===rRe;function mXe(t,e,n,s=!1){const r={},i=iRe();t.propsDefaults=Object.create(null),aRe(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Xk(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function _Xe(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=yn(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(Oj(t.emitsOptions,p))continue;const m=e[p];if(l)if(gs(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Ph(p);r[w]=IK(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{aRe(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!gs(e,d)&&((h=kC(d))===d||!gs(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=IK(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!gs(e,d))&&(delete i[d],u=!0)}u&&Zg(t.attrs,"set","")}function aRe(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(HA(l))continue;const u=e[l];let h;r&&gs(r,h=Ph(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Oj(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=yn(n),u=a||$s;for(let h=0;h<i.length;h++){const d=i[h];n[d]=IK(r,l,d,u[d],t,!gs(u,d))}}return o}function IK(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=gs(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&zt(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=GO(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===kC(n))&&(s=!0))}return s}const yXe=new WeakMap;function cRe(t,e,n=!1){const s=n?yXe:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!zt(t)){const h=d=>{l=!0;const[p,m]=cRe(d,e,!0);jo(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ir(t)&&s.set(t,TI),TI;if(St(i))for(let h=0;h<i.length;h++){const d=Ph(i[h]);ade(d)&&(o[d]=$s)}else if(i)for(const h in i){const d=Ph(h);if(ade(d)){const p=i[h],m=o[d]=St(p)||zt(p)?{type:p}:jo({},p),w=m.type;let R=!1,P=!0;if(St(w))for(let O=0;O<w.length;++O){const M=w[O],V=zt(M)&&M.name;if(V==="Boolean"){R=!0;break}else V==="String"&&(P=!1)}else R=zt(w)&&w.name==="Boolean";m[0]=R,m[1]=P,(R||gs(m,"default"))&&a.push(d)}}const u=[o,a];return Ir(t)&&s.set(t,u),u}function ade(t){return t[0]!=="$"&&!HA(t)}const dee=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",fee=t=>St(t)?t.map(Mf):[Mf(t)],vXe=(t,e,n)=>{if(e._n)return e;const s=VO((...r)=>fee(e(...r)),n);return s._c=!1,s},lRe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(dee(r))continue;const i=t[r];if(zt(i))e[r]=vXe(r,i,s);else if(i!=null){const o=fee(i);e[r]=()=>o}}},uRe=(t,e)=>{const n=fee(e);t.slots.default=()=>n},hRe=(t,e,n)=>{for(const s in e)(n||!dee(s))&&(t[s]=e[s])},wXe=(t,e,n)=>{const s=t.slots=iRe();if(t.vnode.shapeFlag&32){const r=e.__;r&&_K(s,"__",r,!0);const i=e._;i?(hRe(s,e,n),n&&_K(s,"_",i,!0)):lRe(e,s)}else e&&uRe(t,e)},bXe=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=$s;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:hRe(r,e,n):(i=!e.$stable,lRe(e,r)),o=e}else e&&(uRe(t,e),o={default:1});if(i)for(const a in r)!dee(a)&&o[a]==null&&delete r[a]},Dc=LXe;function EXe(t){return TXe(t)}function TXe(t,e){const n=Tj();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Kf,insertStaticContent:w}=t,R=(k,C,A,x=null,L=null,U=null,j=void 0,H=null,$=!!C.dynamicChildren)=>{if(k===C)return;k&&!wE(k,C)&&(x=F(k),ge(k,L,U,!0),k=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Y,shapeFlag:X}=C;switch(B){case Lj:P(k,C,A,x);break;case Hc:O(k,C,A,x);break;case L7:k==null&&M(C,A,x,j);break;case qc:E(k,C,A,x,L,U,j,H,$);break;default:X&1?W(k,C,A,x,L,U,j,H,$):X&6?b(k,C,A,x,L,U,j,H,$):(X&64||X&128)&&B.process(k,C,A,x,L,U,j,H,$,ee)}Y!=null&&L?QA(Y,k&&k.ref,U,C||k,!C):Y==null&&k&&k.ref!=null&&QA(k.ref,null,U,k,!0)},P=(k,C,A,x)=>{if(k==null)s(C.el=a(C.children),A,x);else{const L=C.el=k.el;C.children!==k.children&&u(L,C.children)}},O=(k,C,A,x)=>{k==null?s(C.el=l(C.children||""),A,x):C.el=k.el},M=(k,C,A,x)=>{[k.el,k.anchor]=w(k.children,C,A,x,k.el,k.anchor)},V=({el:k,anchor:C},A,x)=>{let L;for(;k&&k!==C;)L=p(k),s(k,A,x),k=L;s(C,A,x)},q=({el:k,anchor:C})=>{let A;for(;k&&k!==C;)A=p(k),r(k),k=A;r(C)},W=(k,C,A,x,L,U,j,H,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),k==null?J(C,A,x,L,U,j,H,$):y(k,C,L,U,j,H,$)},J=(k,C,A,x,L,U,j,H)=>{let $,B;const{props:Y,shapeFlag:X,transition:Z,dirs:te}=k;if($=k.el=o(k.type,U,Y&&Y.is,Y),X&8?h($,k.children):X&16&&v(k.children,$,null,x,L,O7(k,U),j,H),te&&Fb(k,null,x,"created"),I($,k,k.scopeId,j,x),Y){for(const re in Y)re!=="value"&&!HA(re)&&i($,re,null,Y[re],U,x);"value"in Y&&i($,"value",null,Y.value,U),(B=Y.onVnodeBeforeMount)&&uf(B,x,k)}te&&Fb(k,null,x,"beforeMount");const ie=CXe(L,Z);ie&&Z.beforeEnter($),s($,C,A),((B=Y&&Y.onVnodeMounted)||ie||te)&&Dc(()=>{B&&uf(B,x,k),ie&&Z.enter($),te&&Fb(k,null,x,"mounted")},L)},I=(k,C,A,x,L)=>{if(A&&m(k,A),x)for(let U=0;U<x.length;U++)m(k,x[U]);if(L){let U=L.subTree;if(C===U||mRe(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(k,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(k,C,A,x,L,U,j,H,$=0)=>{for(let B=$;B<k.length;B++){const Y=k[B]=H?yy(k[B]):Mf(k[B]);R(null,Y,C,A,x,L,U,j,H)}},y=(k,C,A,x,L,U,j)=>{const H=C.el=k.el;let{patchFlag:$,dynamicChildren:B,dirs:Y}=C;$|=k.patchFlag&16;const X=k.props||$s,Z=C.props||$s;let te;if(A&&Vb(A,!1),(te=Z.onVnodeBeforeUpdate)&&uf(te,A,C,k),Y&&Fb(C,k,A,"beforeUpdate"),A&&Vb(A,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(H,""),B?T(k.dynamicChildren,B,H,A,x,O7(C,L),U):j||de(k,C,H,null,A,x,O7(C,L),U,!1),$>0){if($&16)S(H,X,Z,A,L);else if($&2&&X.class!==Z.class&&i(H,"class",null,Z.class,L),$&4&&i(H,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],fe=X[se],Se=Z[se];(Se!==fe||se==="value")&&i(H,se,fe,Se,L,A)}}$&1&&k.children!==C.children&&h(H,C.children)}else!j&&B==null&&S(H,X,Z,A,L);((te=Z.onVnodeUpdated)||Y)&&Dc(()=>{te&&uf(te,A,C,k),Y&&Fb(C,k,A,"updated")},x)},T=(k,C,A,x,L,U,j)=>{for(let H=0;H<C.length;H++){const $=k[H],B=C[H],Y=$.el&&($.type===qc||!wE($,B)||$.shapeFlag&198)?d($.el):A;R($,B,Y,null,x,L,U,j,!0)}},S=(k,C,A,x,L)=>{if(C!==A){if(C!==$s)for(const U in C)!HA(U)&&!(U in A)&&i(k,U,C[U],null,L,x);for(const U in A){if(HA(U))continue;const j=A[U],H=C[U];j!==H&&U!=="value"&&i(k,U,H,j,L,x)}"value"in A&&i(k,"value",C.value,A.value,L)}},E=(k,C,A,x,L,U,j,H,$)=>{const B=C.el=k?k.el:a(""),Y=C.anchor=k?k.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(H=H?H.concat(te):te),k==null?(s(B,A,x),s(Y,A,x),v(C.children||[],A,Y,L,U,j,H,$)):X>0&&X&64&&Z&&k.dynamicChildren?(T(k.dynamicChildren,Z,A,L,U,j,H),(C.key!=null||L&&C===L.subTree)&&pee(k,C,!0)):de(k,C,A,Y,L,U,j,H,$)},b=(k,C,A,x,L,U,j,H,$)=>{C.slotScopeIds=H,k==null?C.shapeFlag&512?L.ctx.activate(C,A,x,j,$):G(C,A,x,L,U,j,$):ne(k,C,$)},G=(k,C,A,x,L,U,j)=>{const H=k.component=BXe(k,x,L);if(Pj(k)&&(H.ctx.renderer=ee),$Xe(H,!1,j),H.asyncDep){if(L&&L.registerDep(H,ae,j),!k.el){const $=H.subTree=Lo(Hc);O(null,$,C,A),k.placeholder=$.el}}else ae(H,k,C,A,L,U,j)},ne=(k,C,A)=>{const x=C.component=k.component;if(DXe(k,C,A))if(x.asyncDep&&!x.asyncResolved){oe(x,C,A);return}else x.next=C,x.update();else C.el=k.el,x.vnode=C},ae=(k,C,A,x,L,U,j)=>{const H=()=>{if(k.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=k;{const We=dRe(k);if(We){X&&(X.el=re.el,oe(k,X,j)),We.asyncDep.then(()=>{k.isUnmounted||H()});return}}let se=X,fe;Vb(k,!1),X?(X.el=re.el,oe(k,X,j)):X=re,Z&&k7(Z),(fe=X.props&&X.props.onVnodeBeforeUpdate)&&uf(fe,ie,X,re),Vb(k,!0);const Se=lde(k),Ve=k.subTree;k.subTree=Se,R(Ve,Se,d(Ve.el),F(Ve),k,L,U),X.el=Se.el,se===null&&OXe(k,Se.el),te&&Dc(te,L),(fe=X.props&&X.props.onVnodeUpdated)&&Dc(()=>uf(fe,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:fe,type:Se}=k,Ve=YA(C);Vb(k,!1),ie&&k7(ie),!Ve&&(X=te&&te.onVnodeBeforeMount)&&uf(X,se,C),Vb(k,!0);{fe.ce&&fe.ce._def.shadowRoot!==!1&&fe.ce._injectChildStyle(Se);const We=k.subTree=lde(k);R(null,We,A,x,k,L,U),C.el=We.el}if(re&&Dc(re,L),!Ve&&(X=te&&te.onVnodeMounted)){const We=C;Dc(()=>uf(X,se,We),L)}(C.shapeFlag&256||se&&YA(se.vnode)&&se.vnode.shapeFlag&256)&&k.a&&Dc(k.a,L),k.isMounted=!0,C=A=x=null}};k.scope.on();const $=k.effect=new E1e(H);k.scope.off();const B=k.update=$.run.bind($),Y=k.job=$.runIfDirty.bind($);Y.i=k,Y.id=k.uid,$.scheduler=()=>uee(Y),Vb(k,!0),B()},oe=(k,C,A)=>{C.component=k;const x=k.vnode.props;k.vnode=C,k.next=null,_Xe(k,C.props,x,A),bXe(k,C.children,A),Vm(),Xhe(k),Um()},de=(k,C,A,x,L,U,j,H,$=!1)=>{const B=k&&k.children,Y=k?k.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){Ke(B,X,A,x,L,U,j,H,$);return}else if(Z&256){ct(B,X,A,x,L,U,j,H,$);return}}te&8?(Y&16&&Fe(B,L,U),X!==B&&h(A,X)):Y&16?te&16?Ke(B,X,A,x,L,U,j,H,$):Fe(B,L,U,!0):(Y&8&&h(A,""),te&16&&v(X,A,x,L,U,j,H,$))},ct=(k,C,A,x,L,U,j,H,$)=>{k=k||TI,C=C||TI;const B=k.length,Y=C.length,X=Math.min(B,Y);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?yy(C[Z]):Mf(C[Z]);R(k[Z],te,A,null,L,U,j,H,$)}B>Y?Fe(k,L,U,!0,!1,X):v(C,A,x,L,U,j,H,$,X)},Ke=(k,C,A,x,L,U,j,H,$)=>{let B=0;const Y=C.length;let X=k.length-1,Z=Y-1;for(;B<=X&&B<=Z;){const te=k[B],ie=C[B]=$?yy(C[B]):Mf(C[B]);if(wE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;B++}for(;B<=X&&B<=Z;){const te=k[X],ie=C[Z]=$?yy(C[Z]):Mf(C[Z]);if(wE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Y?C[te].el:x;for(;B<=Z;)R(null,C[B]=$?yy(C[B]):Mf(C[B]),A,ie,L,U,j,H,$),B++}}else if(B>Z)for(;B<=X;)ge(k[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const Ue=C[B]=$?yy(C[B]):Mf(C[B]);Ue.key!=null&&re.set(Ue.key,B)}let se,fe=0;const Se=Z-ie+1;let Ve=!1,We=0;const Ge=new Array(Se);for(B=0;B<Se;B++)Ge[B]=0;for(B=te;B<=X;B++){const Ue=k[B];if(fe>=Se){ge(Ue,L,U,!0);continue}let Le;if(Ue.key!=null)Le=re.get(Ue.key);else for(se=ie;se<=Z;se++)if(Ge[se-ie]===0&&wE(Ue,C[se])){Le=se;break}Le===void 0?ge(Ue,L,U,!0):(Ge[Le-ie]=B+1,Le>=We?We=Le:Ve=!0,R(Ue,C[Le],A,null,L,U,j,H,$),fe++)}const ss=Ve?IXe(Ge):TI;for(se=ss.length-1,B=Se-1;B>=0;B--){const Ue=ie+B,Le=C[Ue],rs=C[Ue+1],Pr=Ue+1<Y?rs.el||rs.placeholder:x;Ge[B]===0?R(null,Le,A,Pr,L,U,j,H,$):Ve&&(se<0||B!==ss[se]?Qe(Le,A,Pr,2):se--)}}},Qe=(k,C,A,x,L=null)=>{const{el:U,type:j,transition:H,children:$,shapeFlag:B}=k;if(B&6){Qe(k.component.subTree,C,A,x);return}if(B&128){k.suspense.move(C,A,x);return}if(B&64){j.move(k,C,A,ee);return}if(j===qc){s(U,C,A);for(let Y=0;Y<$.length;Y++)Qe($[Y],C,A,x);s(k.anchor,C,A);return}if(j===L7){V(k,C,A);return}if(x!==2&&B&1&&H)if(x===0)H.beforeEnter(U),s(U,C,A),Dc(()=>H.enter(U),L);else{const{leave:Y,delayLeave:X,afterLeave:Z}=H,te=()=>{k.ctx.isUnmounted?r(U):s(U,C,A)},ie=()=>{Y(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,A)},ge=(k,C,A,x=!1,L=!1)=>{const{type:U,props:j,ref:H,children:$,dynamicChildren:B,shapeFlag:Y,patchFlag:X,dirs:Z,cacheIndex:te}=k;if(X===-2&&(L=!1),H!=null&&(Vm(),QA(H,null,A,k,!0),Um()),te!=null&&(C.renderCache[te]=void 0),Y&256){C.ctx.deactivate(k);return}const ie=Y&1&&Z,re=!YA(k);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&uf(se,C,k),Y&6)it(k.component,A,x);else{if(Y&128){k.suspense.unmount(A,x);return}ie&&Fb(k,null,C,"beforeUnmount"),Y&64?k.type.remove(k,C,A,ee,x):B&&!B.hasOnce&&(U!==qc||X>0&&X&64)?Fe(B,C,A,!1,!0):(U===qc&&X&384||!L&&Y&16)&&Fe($,C,A),x&&he(k)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&Dc(()=>{se&&uf(se,C,k),ie&&Fb(k,null,C,"unmounted")},A)},he=k=>{const{type:C,el:A,anchor:x,transition:L}=k;if(C===qc){qt(A,x);return}if(C===L7){q(k);return}const U=()=>{r(A),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(k.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:H}=L,$=()=>j(A,U);H?H(k.el,U,$):$()}else U()},qt=(k,C)=>{let A;for(;k!==C;)A=p(k),r(k),k=A;r(C)},it=(k,C,A)=>{const{bum:x,scope:L,job:U,subTree:j,um:H,m:$,a:B,parent:Y,slots:{__:X}}=k;cde($),cde(B),x&&k7(x),Y&&St(X)&&X.forEach(Z=>{Y.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ge(j,k,C,A)),H&&Dc(H,C),Dc(()=>{k.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Fe=(k,C,A,x=!1,L=!1,U=0)=>{for(let j=U;j<k.length;j++)ge(k[j],C,A,x,L)},F=k=>{if(k.shapeFlag&6)return F(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const C=p(k.anchor||k.el),A=C&&C[z1e];return A?p(A):C};let Q=!1;const K=(k,C,A)=>{k==null?C._vnode&&ge(C._vnode,null,null,!0):R(C._vnode||null,k,C,null,null,null,A),C._vnode=k,Q||(Q=!0,Xhe(),j1e(),Q=!1)},ee={p:R,um:ge,m:Qe,r:he,mt:G,mc:v,pc:de,pbc:T,n:F,o:t};return{render:K,hydrate:void 0,createApp:gXe(K)}}function O7({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vb({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function CXe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function pee(t,e,n=!1){const s=t.children,r=e.children;if(St(s)&&St(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=yy(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&pee(o,a)),a.type===Lj&&(a.el=o.el),a.type===Hc&&!a.el&&(a.el=o.el)}}function IXe(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function dRe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:dRe(e)}function cde(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const SXe=Symbol.for("v-scx"),kXe=()=>mc(SXe);function Pm(t,e,n){return fRe(t,e,n)}function fRe(t,e,n=$s){const{immediate:s,deep:r,flush:i,once:o}=n,a=jo({},n),l=e&&s||!e&&i!=="post";let u;if(nx){if(i==="sync"){const m=kXe();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Kf,m.resume=Kf,m.pause=Kf,m}}const h=uc;a.call=(m,w,R)=>Kd(m,h,w,R);let d=!1;i==="post"?a.scheduler=m=>{Dc(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():uee(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=GYe(t,e,a);return nx&&(u?u.push(p):l&&p()),p}function RXe(t,e,n){const s=this.proxy,r=ui(t)?t.includes(".")?pRe(s,t):()=>s[t]:t.bind(s,s);let i;zt(e)?i=e:(i=e.handler,n=e);const o=GO(this),a=fRe(r,i.bind(s),n);return o(),a}function pRe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const AXe=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ph(e)}Modifiers`]||t[`${kC(e)}Modifiers`];function PXe(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||$s;let r=n;const i=e.startsWith("update:"),o=i&&AXe(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ui(h)?h.trim():h)),o.number&&(r=n.map(dYe)));let a,l=s[a=S7(e)]||s[a=S7(Ph(e))];!l&&i&&(l=s[a=S7(kC(e))]),l&&Kd(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Kd(u,t,6,r)}}function gRe(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!zt(t)){const l=u=>{const h=gRe(u,e,!0);h&&(a=!0,jo(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ir(t)&&s.set(t,null),null):(St(i)?i.forEach(l=>o[l]=null):jo(o,i),Ir(t)&&s.set(t,o),o)}function Oj(t,e){return!t||!vj(e)?!1:(e=e.slice(2).replace(/Once$/,""),gs(t,e[0].toLowerCase()+e.slice(1))||gs(t,kC(e))||gs(t,e))}function lde(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:R}=t,P=eU(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,W=q;O=Mf(u.call(W,q,h,d,m,p,w)),M=a}else{const q=e;O=Mf(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:NXe(a)}}catch(q){JA.length=0,Rj(q,t,1),O=Lo(Hc)}let V=O;if(M&&R!==!1){const q=Object.keys(M),{shapeFlag:W}=V;q.length&&W&7&&(i&&q.some(eee)&&(M=xXe(M,i)),V=Kv(V,M,!1,!0))}return n.dirs&&(V=Kv(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&AT(V,n.transition),O=V,eU(P),O}const NXe=t=>{let e;for(const n in t)(n==="class"||n==="style"||vj(n))&&((e||(e={}))[n]=t[n]);return e},xXe=(t,e)=>{const n={};for(const s in t)(!eee(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function DXe(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?ude(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!Oj(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?ude(s,o,u):!0:!!o;return!1}function ude(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Oj(n,i))return!0}return!1}function OXe({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const mRe=t=>t.__isSuspense;function LXe(t,e){e&&e.pendingBranch?St(t)?e.effects.push(...t):e.effects.push(t):YYe(t)}const qc=Symbol.for("v-fgt"),Lj=Symbol.for("v-txt"),Hc=Symbol.for("v-cmt"),L7=Symbol.for("v-stc"),JA=[];let Mu=null;function t1(t=!1){JA.push(Mu=t?null:[])}function MXe(){JA.pop(),Mu=JA[JA.length-1]||null}let tx=1;function hde(t,e=!1){tx+=t,t<0&&Mu&&e&&(Mu.hasOnce=!0)}function _Re(t){return t.dynamicChildren=tx>0?Mu||TI:null,MXe(),tx>0&&Mu&&Mu.push(t),t}function zO(t,e,n,s,r,i){return _Re(n1(t,e,n,s,r,i,!0))}function HO(t,e,n,s,r){return _Re(Lo(t,e,n,s,r,!0))}function nU(t){return t?t.__v_isVNode===!0:!1}function wE(t,e){return t.type===e.type&&t.key===e.key}const yRe=({key:t})=>t??null,p4=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ui(t)||Ri(t)||zt(t)?{i:Lu,r:t,k:e,f:!!n}:t:null);function n1(t,e=null,n=null,s=0,r=null,i=t===qc?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&yRe(e),ref:e&&p4(e),scopeId:$1e,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Lu};return a?(gee(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ui(n)?8:16),tx>0&&!o&&Mu&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Mu.push(l),l}const Lo=FXe;function FXe(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===oXe)&&(t=Hc),nU(t)){const a=Kv(t,e,!0);return n&&gee(a,n),tx>0&&!i&&Mu&&(a.shapeFlag&6?Mu[Mu.indexOf(t)]=a:Mu.push(a)),a.patchFlag=-2,a}if(KXe(t)&&(t=t.__vccOpts),e){e=VXe(e);let{class:a,style:l}=e;a&&!ui(a)&&(e.class=AC(a)),Ir(l)&&(lee(l)&&!St(l)&&(l=jo({},l)),e.style=RC(l))}const o=ui(t)?1:mRe(t)?128:H1e(t)?64:Ir(t)?4:zt(t)?2:0;return n1(t,e,n,s,r,o,i,!0)}function VXe(t){return t?lee(t)||oRe(t)?jo({},t):t:null}function Kv(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?UXe(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&yRe(u),ref:e&&e.ref?n&&i?St(i)?i.concat(p4(e)):[i,p4(e)]:p4(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==qc?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Kv(t.ssContent),ssFallback:t.ssFallback&&Kv(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&AT(h,l.clone(h)),h}function WO(t=" ",e=0){return Lo(Lj,null,t,e)}function Mj(t="",e=!1){return e?(t1(),HO(Hc,null,t)):Lo(Hc,null,t)}function Mf(t){return t==null||typeof t=="boolean"?Lo(Hc):St(t)?Lo(qc,null,t.slice()):nU(t)?yy(t):Lo(Lj,null,String(t))}function yy(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Kv(t)}function gee(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(St(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),gee(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!oRe(e)?e._ctx=Lu:r===3&&Lu&&(Lu.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else zt(e)?(e={default:e,_ctx:Lu},n=32):(e=String(e),s&64?(n=16,e=[WO(e)]):n=8);t.children=e,t.shapeFlag|=n}function UXe(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=AC([e.class,s.class]));else if(r==="style")e.style=RC([e.style,s.style]);else if(vj(r)){const i=e[r],o=s[r];o&&i!==o&&!(St(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function uf(t,e,n,s=null){Kd(t,e,7,[n,s])}const qXe=sRe();let jXe=0;function BXe(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||qXe,i={uid:jXe++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new b1e(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:cRe(s,r),emitsOptions:gRe(s,r),emit:null,emitted:null,propsDefaults:$s,inheritAttrs:s.inheritAttrs,ctx:$s,data:$s,props:$s,attrs:$s,slots:$s,refs:$s,setupState:$s,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=PXe.bind(null,i),t.ce&&t.ce(i),i}let uc=null;const lf=()=>uc||Lu;let sU,SK;{const t=Tj(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};sU=e("__VUE_INSTANCE_SETTERS__",n=>uc=n),SK=e("__VUE_SSR_SETTERS__",n=>nx=n)}const GO=t=>{const e=uc;return sU(t),t.scope.on(),()=>{t.scope.off(),sU(e)}},dde=()=>{uc&&uc.scope.off(),sU(null)};function vRe(t){return t.vnode.shapeFlag&4}let nx=!1;function $Xe(t,e=!1,n=!1){e&&SK(e);const{props:s,children:r}=t.vnode,i=vRe(t);mXe(t,s,i,e),wXe(t,r,n||e);const o=i?zXe(t,e):void 0;return e&&SK(!1),o}function zXe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cXe);const{setup:s}=n;if(s){Vm();const r=t.setupContext=s.length>1?WXe(t):null,i=GO(t),o=FO(s,t,0,[t.props,r]),a=g1e(o);if(Um(),i(),(a||t.sp)&&!YA(t)&&Z1e(t),a){if(o.then(dde,dde),e)return o.then(l=>{fde(t,l)}).catch(l=>{Rj(l,t,0)});t.asyncDep=o}else fde(t,o)}else wRe(t)}function fde(t,e,n){zt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ir(e)&&(t.setupState=V1e(e)),wRe(t)}function wRe(t,e,n){const s=t.type;t.render||(t.render=s.render||Kf);{const r=GO(t);Vm();try{lXe(t)}finally{Um(),r()}}}const HXe={get(t,e){return Qa(t,"get",""),t[e]}};function WXe(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,HXe),slots:t.slots,emit:t.emit,expose:e}}function Fj(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(V1e(P_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in XA)return XA[n](t)},has(e,n){return n in e||n in XA}})):t.proxy}function GXe(t,e=!0){return zt(t)?t.displayName||t.name:t.name||e&&t.__name}function KXe(t){return zt(t)&&"__vccOpts"in t}const nt=(t,e)=>HYe(t,e,nx);function pt(t,e,n){const s=arguments.length;return s===2?Ir(e)&&!St(e)?nU(e)?Lo(t,null,[e]):Lo(t,e):Lo(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&nU(n)&&(n=[n]),Lo(t,e,n))}const QXe="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kK;const pde=typeof window<"u"&&window.trustedTypes;if(pde)try{kK=pde.createPolicy("vue",{createHTML:t=>t})}catch{}const bRe=kK?t=>kK.createHTML(t):t=>t,YXe="http://www.w3.org/2000/svg",XXe="http://www.w3.org/1998/Math/MathML",Gg=typeof document<"u"?document:null,gde=Gg&&Gg.createElement("template"),JXe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Gg.createElementNS(YXe,t):e==="mathml"?Gg.createElementNS(XXe,t):n?Gg.createElement(t,{is:n}):Gg.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Gg.createTextNode(t),createComment:t=>Gg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Gg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{gde.innerHTML=bRe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=gde.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Q_="transition",mR="animation",CS=Symbol("_vtc"),ERe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TRe=jo({},Q1e,ERe),ZXe=t=>(t.displayName="Transition",t.props=TRe,t),KO=ZXe((t,{slots:e})=>pt(ZYe,CRe(t),e)),Ub=(t,e=[])=>{St(t)?t.forEach(n=>n(...e)):t&&t(...e)},mde=t=>t?St(t)?t.some(e=>e.length>1):t.length>1:!1;function CRe(t){const e={};for(const E in t)E in ERe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=eJe(r),R=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:W,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,G,ne)=>{E._enterCancelled=ne,uy(E,b?h:a),uy(E,b?u:o),G&&G()},T=(E,b)=>{E._isLeaving=!1,uy(E,d),uy(E,m),uy(E,p),b&&b()},S=E=>(b,G)=>{const ne=E?I:M,ae=()=>y(b,E,G);Ub(ne,[b,ae]),_de(()=>{uy(b,E?l:i),wf(b,E?h:a),mde(ne)||yde(b,s,R,ae)})};return jo(e,{onBeforeEnter(E){Ub(O,[E]),wf(E,i),wf(E,o)},onBeforeAppear(E){Ub(J,[E]),wf(E,l),wf(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const G=()=>T(E,b);wf(E,d),E._enterCancelled?(wf(E,p),RK()):(RK(),wf(E,p)),_de(()=>{E._isLeaving&&(uy(E,d),wf(E,m),mde(q)||yde(E,s,P,G))}),Ub(q,[E,G])},onEnterCancelled(E){y(E,!1,void 0,!0),Ub(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Ub(v,[E])},onLeaveCancelled(E){T(E),Ub(W,[E])}})}function eJe(t){if(t==null)return null;if(Ir(t))return[M7(t.enter),M7(t.leave)];{const e=M7(t);return[e,e]}}function M7(t){return fYe(t)}function wf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[CS]||(t[CS]=new Set)).add(e)}function uy(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[CS];n&&(n.delete(e),n.size||(t[CS]=void 0))}function _de(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let tJe=0;function yde(t,e,n,s){const r=t._endId=++tJe,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=IRe(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function IRe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${Q_}Delay`),i=s(`${Q_}Duration`),o=vde(r,i),a=s(`${mR}Delay`),l=s(`${mR}Duration`),u=vde(a,l);let h=null,d=0,p=0;e===Q_?o>0&&(h=Q_,d=o,p=i.length):e===mR?u>0&&(h=mR,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?Q_:mR:null,p=h?h===Q_?i.length:l.length:0);const m=h===Q_&&/\b(transform|all)(,|$)/.test(s(`${Q_}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function vde(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>wde(n)+wde(t[s])))}function wde(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function RK(){return document.body.offsetHeight}function nJe(t,e,n){const s=t[CS];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const rU=Symbol("_vod"),SRe=Symbol("_vsh"),Vj={beforeMount(t,{value:e},{transition:n}){t[rU]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):_R(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),_R(t,!0),s.enter(t)):s.leave(t,()=>{_R(t,!1)}):_R(t,e))},beforeUnmount(t,{value:e}){_R(t,e)}};function _R(t,e){t.style.display=e?t[rU]:"none",t[SRe]=!e}const sJe=Symbol(""),rJe=/(^|;)\s*display\s*:/;function iJe(t,e,n){const s=t.style,r=ui(n);let i=!1;if(n&&!r){if(e)if(ui(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&g4(s,a,"")}else for(const o in e)n[o]==null&&g4(s,o,"");for(const o in n)o==="display"&&(i=!0),g4(s,o,n[o])}else if(r){if(e!==n){const o=s[sJe];o&&(n+=";"+o),s.cssText=n,i=rJe.test(n)}}else e&&t.removeAttribute("style");rU in t&&(t[rU]=i?s.display:"",t[SRe]&&(s.display="none"))}const bde=/\s*!important$/;function g4(t,e,n){if(St(n))n.forEach(s=>g4(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=oJe(t,e);bde.test(n)?t.setProperty(kC(s),n.replace(bde,""),"important"):t[s]=n}}const Ede=["Webkit","Moz","ms"],F7={};function oJe(t,e){const n=F7[e];if(n)return n;let s=Ph(e);if(s!=="filter"&&s in t)return F7[e]=s;s=Ej(s);for(let r=0;r<Ede.length;r++){const i=Ede[r]+s;if(i in t)return F7[e]=i}return e}const Tde="http://www.w3.org/1999/xlink";function Cde(t,e,n,s,r,i=vYe(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Tde,e.slice(6,e.length)):t.setAttributeNS(Tde,e,n):n==null||i&&!y1e(n)?t.removeAttribute(e):t.setAttribute(e,i?"":hb(n)?String(n):n)}function Ide(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?bRe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=y1e(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function aJe(t,e,n,s){t.addEventListener(e,n,s)}function cJe(t,e,n,s){t.removeEventListener(e,n,s)}const Sde=Symbol("_vei");function lJe(t,e,n,s,r=null){const i=t[Sde]||(t[Sde]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=uJe(e);if(s){const u=i[e]=fJe(s,r);aJe(t,a,u,l)}else o&&(cJe(t,a,o,l),i[e]=void 0)}}const kde=/(?:Once|Passive|Capture)$/;function uJe(t){let e;if(kde.test(t)){e={};let n;for(;n=t.match(kde);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):kC(t.slice(2)),e]}let V7=0;const hJe=Promise.resolve(),dJe=()=>V7||(hJe.then(()=>V7=0),V7=Date.now());function fJe(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Kd(pJe(s,n.value),e,5,[s])};return n.value=t,n.attached=dJe(),n}function pJe(t,e){if(St(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Rde=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,gJe=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?nJe(t,s,o):e==="style"?iJe(t,n,s):vj(e)?eee(e)||lJe(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mJe(t,e,s,o))?(Ide(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cde(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ui(s))?Ide(t,Ph(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Cde(t,e,s,o))};function mJe(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Rde(e)&&zt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Rde(e)&&ui(n)?!1:e in t}const kRe=new WeakMap,RRe=new WeakMap,iU=Symbol("_moveCb"),Ade=Symbol("_enterCb"),_Je=t=>(delete t.props.mode,t),yJe=_Je({name:"TransitionGroup",props:jo({},TRe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=lf(),s=K1e();let r,i;return e1(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!TJe(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(wJe),r.forEach(bJe);const a=r.filter(EJe);RK(),a.forEach(l=>{const u=l.el,h=u.style;wf(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[iU]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[iU]=null,uy(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=yn(t),a=CRe(o);let l=o.tag||qc;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),AT(h,ex(h,a,s,n)),kRe.set(h,h.el.getBoundingClientRect()))}i=e.default?hee(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&AT(h,ex(h,a,s,n))}return Lo(l,null,i)}}}),vJe=yJe;function wJe(t){const e=t.el;e[iU]&&e[iU](),e[Ade]&&e[Ade]()}function bJe(t){RRe.set(t,t.el.getBoundingClientRect())}function EJe(t){const e=kRe.get(t),n=RRe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function TJe(t,e,n){const s=t.cloneNode(),r=t[CS];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=IRe(s);return i.removeChild(s),o}const CJe=["ctrl","shift","alt","meta"],IJe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>CJe.some(n=>t[`${n}Key`]&&!e.includes(n))},Uj=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=IJe[e[o]];if(a&&a(r,e))return}return t(r,...i)})},SJe=jo({patchProp:gJe},JXe);let Pde;function kJe(){return Pde||(Pde=EXe(SJe))}const ARe=(...t)=>{const e=kJe().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=AJe(s);if(!r)return;const i=e._component;!zt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,RJe(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function RJe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function AJe(t){return ui(t)?document.querySelector(t):t}function fb(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function qj(t,e){for(const n in e)fb(t,n,e[n]);return t}const Qd=Nh(!1);let AK;function PJe(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function NJe(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const PRe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function xJe(t){const e=t.toLowerCase(),n=NJe(e),s=PJe(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Qd.value===!0&&(AK={is:{...r}}),PRe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const Nde=navigator.userAgent||navigator.vendor||window.opera,DJe={has:{touch:!1,webStorage:!1},within:{iframe:!1}},pu={userAgent:Nde,is:xJe(Nde),has:{touch:PRe},within:{iframe:window.self!==window.top}},PT={install(t){const{$q:e}=t;Qd.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,pu),Qd.value=!1}),e.platform=Xp(this)):e.platform=this}};{let t;fb(pu.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(PT,pu),Qd.value===!0&&(Object.assign(PT,AK,DJe),AK=null)}function x_(t){return P_(db(t))}function QO(t){return P_(t)}const jj=(t,e)=>{const n=Xp(t);for(const s in t)fb(e,s,()=>n[s],r=>{n[s]=r});return e},Yd={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Yd,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function qm(){}function Bj(t){return t.button===0}function YO(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function $j(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function s1(t){t.stopPropagation()}function NT(t){t.cancelable!==!1&&t.preventDefault()}function Ff(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function zj(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",NT,Yd.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",NT,Yd.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function XO(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Yd[r[3]])})}function JO(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Yd[s[3]])}),t[n]=void 0)}function ZO(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const U7=["sm","md","lg","xl"],{passive:xde}=Yd,OJe=jj({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:qm,setDebounce:qm,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||pu.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{U7.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&U7.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{U7.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,xde),a=p>0?ZO(this.__update,p):this.__update,s.addEventListener("resize",a,xde)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Qd.value===!0?e.push(h):h()}}),Oa=jj({isActive:!1,mode:!1},{__media:void 0,set(t){Oa.mode=t,t==="auto"?(Oa.__media===void 0&&(Oa.__media=window.matchMedia("(prefers-color-scheme: dark)"),Oa.__updateMedia=()=>{Oa.set("auto")},Oa.__media.addListener(Oa.__updateMedia)),t=Oa.__media.matches):Oa.__media!==void 0&&(Oa.__media.removeListener(Oa.__updateMedia),Oa.__media=void 0),Oa.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Oa.set(Oa.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function LJe(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let NRe=!1;function MJe(t){NRe=t.isComposing===!0}function eL(t){return NRe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function xT(t,e){return eL(t)===!0?!1:[].concat(e).includes(t.keyCode)}function xRe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function FJe({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=xRe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function VJe(){const{is:t}=pu,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=xRe(t);r!==void 0&&n.add(`platform-${r}`)}}pu.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),pu.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function UJe(t){for(const e in t)LJe(e,t[e])}const qJe={install(t){if(this.__installed!==!0){if(Qd.value===!0)VJe();else{const{$q:e}=t;e.config.brand!==void 0&&UJe(e.config.brand);const n=FJe(pu,e.config);document.body.classList.add.apply(document.body.classList,n)}pu.is.ios===!0&&document.body.addEventListener("touchstart",qm),window.addEventListener("keydown",MJe,!0)}}},DRe=()=>!0;function jJe(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function BJe(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function $Je(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return DRe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(jJe).map(BJe)),()=>e.includes(window.location.hash)}const tL={__history:[],add:qm,remove:qm,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=pu.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=DRe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=$Je(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Dde={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Ode(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const vy=jj({__qLang:{}},{getLocale:Ode,set(t=Dde,e){const n={...t,rtl:t.rtl===!0,getLocale:Ode};{if(n.set=vy.set,vy.__langConfig===void 0||vy.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(vy.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=vy.__qLang,vy.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||Dde))}}),zJe={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},oU=jj({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=oU.set,Object.assign(oU.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,fb(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||zJe))}}),ORe="_q_",Hj="_q_l_",Wj="_q_pc_",Gj="_q_fo_";function Kj(){}const aU={};let LRe=!1;function HJe(){LRe=!0}function eT(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(eT(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(eT(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(eT(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function jm(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Qj(t){return Object.prototype.toString.call(t)==="[object Date]"}function Yj(t){return typeof t=="number"&&isFinite(t)}const Lde=[PT,qJe,Oa,OJe,tL,vy,oU];function WJe(t,e){const n=ARe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function Mde(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function GJe(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(ORe,n.$q),Mde(n,Lde),e.components!==void 0&&Object.values(e.components).forEach(s=>{jm(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{jm(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&Mde(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&Lde.includes(s)===!1)),Qd.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const KJe=function(t,e={}){const n={version:"2.18.2"};LRe===!1?(e.config!==void 0&&Object.assign(aU,e.config),n.config={...aU},HJe()):n.config=e.config||{},GJe(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},QJe={name:"Quasar",version:"2.18.2",install:KJe,lang:vy,iconSet:oU};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const V0=typeof document<"u";function MRe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function YJe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&MRe(t.default)}const us=Object.assign;function q7(t,e){const n={};for(const s in e){const r=e[s];n[s]=Xd(r)?r.map(t):t(r)}return n}const ZA=()=>{},Xd=Array.isArray,FRe=/#/g,XJe=/&/g,JJe=/\//g,ZJe=/=/g,eZe=/\?/g,VRe=/\+/g,tZe=/%5B/g,nZe=/%5D/g,URe=/%5E/g,sZe=/%60/g,qRe=/%7B/g,rZe=/%7C/g,jRe=/%7D/g,iZe=/%20/g;function mee(t){return encodeURI(""+t).replace(rZe,"|").replace(tZe,"[").replace(nZe,"]")}function oZe(t){return mee(t).replace(qRe,"{").replace(jRe,"}").replace(URe,"^")}function PK(t){return mee(t).replace(VRe,"%2B").replace(iZe,"+").replace(FRe,"%23").replace(XJe,"%26").replace(sZe,"`").replace(qRe,"{").replace(jRe,"}").replace(URe,"^")}function aZe(t){return PK(t).replace(ZJe,"%3D")}function cZe(t){return mee(t).replace(FRe,"%23").replace(eZe,"%3F")}function lZe(t){return t==null?"":cZe(t).replace(JJe,"%2F")}function sx(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const uZe=/\/$/,hZe=t=>t.replace(uZe,"");function j7(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=gZe(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:sx(o)}}function dZe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Fde(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fZe(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&IS(e.matched[s],n.matched[r])&&BRe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function IS(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function BRe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pZe(t[n],e[n]))return!1;return!0}function pZe(t,e){return Xd(t)?Vde(t,e):Xd(e)?Vde(e,t):t===e}function Vde(t,e){return Xd(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function gZe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Y_={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rx;(function(t){t.pop="pop",t.push="push"})(rx||(rx={}));var eP;(function(t){t.back="back",t.forward="forward",t.unknown=""})(eP||(eP={}));function mZe(t){if(!t)if(V0){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hZe(t)}const _Ze=/^[^#]+#/;function yZe(t,e){return t.replace(_Ze,"#")+e}function vZe(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Xj=()=>({left:window.scrollX,top:window.scrollY});function wZe(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=vZe(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ude(t,e){return(history.state?history.state.position-e:-1)+t}const NK=new Map;function bZe(t,e){NK.set(t,e)}function EZe(t){const e=NK.get(t);return NK.delete(t),e}let TZe=()=>location.protocol+"//"+location.host;function $Re(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),Fde(a,"")}return Fde(n,t)+s+r}function CZe(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=$Re(t,location),w=n.value,R=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=R?p.position-R.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:rx.pop,direction:P?P>0?eP.forward:eP.back:eP.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(us({},p.state,{scroll:Xj()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function qde(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Xj():null}}function IZe(t){const{history:e,location:n}=window,s={value:$Re(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:TZe()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=us({},e.state,qde(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=us({},r.value,e.state,{forward:l,scroll:Xj()});i(h.current,h,!0);const d=us({},qde(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function SZe(t){t=mZe(t);const e=IZe(t),n=CZe(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=us({location:"",base:t,go:s,createHref:yZe.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function kZe(t){return typeof t=="string"||t&&typeof t=="object"}function zRe(t){return typeof t=="string"||typeof t=="symbol"}const HRe=Symbol("");var jde;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(jde||(jde={}));function SS(t,e){return us(new Error,{type:t,[HRe]:!0},e)}function Dg(t,e){return t instanceof Error&&HRe in t&&(e==null||!!(t.type&e))}const Bde="[^/]+?",RZe={sensitive:!1,strict:!1,start:!0,end:!0},AZe=/[.+*?^${}()[\]/\\]/g;function PZe(t,e){const n=us({},RZe,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(AZe,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:R,optional:P,regexp:O}=p;i.push({name:w,repeatable:R,optional:P});const M=O||Bde;if(M!==Bde){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=R?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),R&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:R,optional:P}=m,O=w in u?u[w]:"";if(Xd(O)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Xd(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function NZe(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function WRe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=NZe(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if($de(s))return 1;if($de(r))return-1}return r.length-s.length}function $de(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const xZe={type:0,value:""},DZe=/[a-zA-Z0-9_]/;function OZe(t){if(!t)return[[]];if(t==="/")return[[xZe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:DZe.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function LZe(t,e,n){const s=PZe(OZe(t.path),n),r=us(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function MZe(t,e){const n=[],s=new Map;e=Gde({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,R=Hde(d);R.aliasOf=m&&m.record;const P=Gde(e,d),O=[R];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of q)O.push(Hde(us({},R,{components:m?m.record.components:R.components,path:W,aliasOf:m?m.record:R})))}let M,V;for(const q of O){const{path:W}=q;if(p&&W[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(W&&I+W)}if(M=LZe(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!Wde(M)&&o(d.name)),GRe(M)&&l(M),R.children){const J=R.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:ZA}function o(d){if(zRe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=UZe(d,n);n.splice(p,0,d),d.record.name&&!Wde(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},R,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw SS(1,{location:d});P=m.record.name,w=us(zde(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&zde(d.params,m.keys.map(V=>V.name))),R=m.stringify(w)}else if(d.path!=null)R=d.path,m=n.find(V=>V.re.test(R)),m&&(w=m.parse(R),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw SS(1,{location:d,currentLocation:p});P=m.record.name,w=us({},p.params,d.params),R=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:R,params:w,matched:O,meta:VZe(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function zde(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Hde(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:FZe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function FZe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Wde(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function VZe(t){return t.reduce((e,n)=>us(e,n.meta),{})}function Gde(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function UZe(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;WRe(t,e[i])<0?s=i:n=i+1}const r=qZe(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function qZe(t){let e=t;for(;e=e.parent;)if(GRe(e)&&WRe(t,e)===0)return e}function GRe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function jZe(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(VRe," "),i=r.indexOf("="),o=sx(i<0?r:r.slice(0,i)),a=i<0?null:sx(r.slice(i+1));if(o in e){let l=e[o];Xd(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Kde(t){let e="";for(let n in t){const s=t[n];if(n=aZe(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Xd(s)?s.map(r=>r&&PK(r)):[s&&PK(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function BZe(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Xd(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const $Ze=Symbol(""),Qde=Symbol(""),Jj=Symbol(""),_ee=Symbol(""),xK=Symbol("");function yR(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function wy(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(SS(4,{from:n,to:e})):p instanceof Error?l(p):kZe(p)?l(SS(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function B7(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(MRe(l)){const u=(l.__vccOpts||l)[e];u&&i.push(wy(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=YJe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&wy(p,n,s,o,a,r)()}))}}return i}function Yde(t){const e=mc(Jj),n=mc(_ee),s=nt(()=>{const l=bd(t.to);return e.resolve(l)}),r=nt(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(IS.bind(null,h));if(p>-1)return p;const m=Xde(l[u-2]);return u>1&&Xde(h)===m&&d[d.length-1].path!==m?d.findIndex(IS.bind(null,l[u-2])):p}),i=nt(()=>r.value>-1&&KZe(n.params,s.value.params)),o=nt(()=>r.value>-1&&r.value===n.matched.length-1&&BRe(n.params,s.value.params));function a(l={}){if(GZe(l)){const u=e[bd(t.replace)?"replace":"push"](bd(t.to)).catch(ZA);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:nt(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function zZe(t){return t.length===1?t[0]:t}const HZe=db({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yde,setup(t,{slots:e}){const n=Xp(Yde(t)),{options:s}=mc(Jj),r=nt(()=>({[Jde(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Jde(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&zZe(e.default(n));return t.custom?i:pt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),WZe=HZe;function GZe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function KZe(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Xd(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Xde(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jde=(t,e,n)=>t??e??n,QZe=db({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=mc(xK),r=nt(()=>t.route||s.value),i=mc(Qde,0),o=nt(()=>{let u=bd(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=nt(()=>r.value.matched[o.value]);rv(Qde,nt(()=>o.value+1)),rv($Ze,a),rv(xK,r);const l=Nh();return Pm(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!IS(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return Zde(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,R=pt(p,us({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return Zde(n.default,{Component:R,route:u})||R}}});function Zde(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const YZe=QZe;function XZe(t){const e=MZe(t.routes,t),n=t.parseQuery||jZe,s=t.stringifyQuery||Kde,r=t.history,i=yR(),o=yR(),a=yR(),l=UYe(Y_);let u=Y_;V0&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=q7.bind(null,F=>""+F),d=q7.bind(null,lZe),p=q7.bind(null,sx);function m(F,Q){let K,ee;return zRe(F)?(K=e.getRecordMatcher(F),ee=Q):ee=F,e.addRoute(ee,K)}function w(F){const Q=e.getRecordMatcher(F);Q&&e.removeRoute(Q)}function R(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Q){if(Q=us({},Q||l.value),typeof F=="string"){const x=j7(n,F,Q.path),L=e.resolve({path:x.path},Q),U=r.createHref(x.fullPath);return us(x,L,{params:p(L.params),hash:sx(x.hash),redirectedFrom:void 0,href:U})}let K;if(F.path!=null)K=us({},F,{path:j7(n,F.path,Q.path).path});else{const x=us({},F.params);for(const L in x)x[L]==null&&delete x[L];K=us({},F,{params:d(x)}),Q.params=d(Q.params)}const ee=e.resolve(K,Q),k=F.hash||"";ee.params=h(p(ee.params));const C=dZe(s,us({},F,{hash:oZe(k),path:ee.path})),A=r.createHref(C);return us({fullPath:C,hash:k,query:s===Kde?BZe(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:A})}function M(F){return typeof F=="string"?j7(n,F,l.value.path):us({},F)}function V(F,Q){if(u!==F)return SS(8,{from:Q,to:F})}function q(F){return I(F)}function W(F){return q(us(M(F),{replace:!0}))}function J(F){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let ee=typeof K=="function"?K(F):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),us({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Q){const K=u=O(F),ee=l.value,k=F.state,C=F.force,A=F.replace===!0,x=J(K);if(x)return I(us(M(x),{state:typeof x=="object"?us({},k,x.state):k,force:C,replace:A}),Q||K);const L=K;L.redirectedFrom=Q;let U;return!C&&fZe(s,ee,K)&&(U=SS(16,{to:L,from:ee}),Qe(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Dg(j)?Dg(j,2)?j:Ke(j):de(j,L,ee)).then(j=>{if(j){if(Dg(j,2))return I(us({replace:A},M(j.to),{state:typeof j.to=="object"?us({},k,j.to.state):k,force:C}),Q||L)}else j=E(L,ee,!0,A,k);return S(L,ee,j),j})}function v(F,Q){const K=V(F,Q);return K?Promise.reject(K):Promise.resolve()}function y(F){const Q=qt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function T(F,Q){let K;const[ee,k,C]=JZe(F,Q);K=B7(ee.reverse(),"beforeRouteLeave",F,Q);for(const x of ee)x.leaveGuards.forEach(L=>{K.push(wy(L,F,Q))});const A=v.bind(null,F,Q);return K.push(A),Fe(K).then(()=>{K=[];for(const x of i.list())K.push(wy(x,F,Q));return K.push(A),Fe(K)}).then(()=>{K=B7(k,"beforeRouteUpdate",F,Q);for(const x of k)x.updateGuards.forEach(L=>{K.push(wy(L,F,Q))});return K.push(A),Fe(K)}).then(()=>{K=[];for(const x of C)if(x.beforeEnter)if(Xd(x.beforeEnter))for(const L of x.beforeEnter)K.push(wy(L,F,Q));else K.push(wy(x.beforeEnter,F,Q));return K.push(A),Fe(K)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),K=B7(C,"beforeRouteEnter",F,Q,y),K.push(A),Fe(K))).then(()=>{K=[];for(const x of o.list())K.push(wy(x,F,Q));return K.push(A),Fe(K)}).catch(x=>Dg(x,8)?x:Promise.reject(x))}function S(F,Q,K){a.list().forEach(ee=>y(()=>ee(F,Q,K)))}function E(F,Q,K,ee,k){const C=V(F,Q);if(C)return C;const A=Q===Y_,x=V0?history.state:{};K&&(ee||A?r.replace(F.fullPath,us({scroll:A&&x&&x.scroll},k)):r.push(F.fullPath,k)),l.value=F,Qe(F,Q,K,A),Ke()}let b;function G(){b||(b=r.listen((F,Q,K)=>{if(!it.listening)return;const ee=O(F),k=J(ee);if(k){I(us(k,{replace:!0,force:!0}),ee).catch(ZA);return}u=ee;const C=l.value;V0&&bZe(Ude(C.fullPath,K.delta),Xj()),T(ee,C).catch(A=>Dg(A,12)?A:Dg(A,2)?(I(us(M(A.to),{force:!0}),ee).then(x=>{Dg(x,20)&&!K.delta&&K.type===rx.pop&&r.go(-1,!1)}).catch(ZA),Promise.reject()):(K.delta&&r.go(-K.delta,!1),de(A,ee,C))).then(A=>{A=A||E(ee,C,!1),A&&(K.delta&&!Dg(A,8)?r.go(-K.delta,!1):K.type===rx.pop&&Dg(A,20)&&r.go(-1,!1)),S(ee,C,A)}).catch(ZA)}))}let ne=yR(),ae=yR(),oe;function de(F,Q,K){Ke(F);const ee=ae.list();return ee.length?ee.forEach(k=>k(F,Q,K)):console.error(F),Promise.reject(F)}function ct(){return oe&&l.value!==Y_?Promise.resolve():new Promise((F,Q)=>{ne.add([F,Q])})}function Ke(F){return oe||(oe=!F,G(),ne.list().forEach(([Q,K])=>F?K(F):Q()),ne.reset()),F}function Qe(F,Q,K,ee){const{scrollBehavior:k}=t;if(!V0||!k)return Promise.resolve();const C=!K&&EZe(Ude(F.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return Jk().then(()=>k(F,Q,C)).then(A=>A&&wZe(A)).catch(A=>de(A,F,Q))}const ge=F=>r.go(F);let he;const qt=new Set,it={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:R,resolve:O,options:t,push:q,replace:W,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:ct,install(F){const Q=this;F.component("RouterLink",WZe),F.component("RouterView",YZe),F.config.globalProperties.$router=Q,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>bd(l)}),V0&&!he&&l.value===Y_&&(he=!0,q(r.location).catch(k=>{}));const K={};for(const k in Y_)Object.defineProperty(K,k,{get:()=>l.value[k],enumerable:!0});F.provide(Jj,Q),F.provide(_ee,Xk(K)),F.provide(xK,l);const ee=F.unmount;qt.add(F),F.unmount=function(){qt.delete(F),qt.size<1&&(u=Y_,b&&b(),b=null,l.value=Y_,he=!1,oe=!1),ee()}}};function Fe(F){return F.reduce((Q,K)=>Q.then(()=>y(K)),Promise.resolve())}return it}function JZe(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>IS(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>IS(u,l))||r.push(l))}return[n,s,r]}function nL(){return mc(Jj)}function sL(t){return mc(_ee)}const ZZe=()=>{};var efe={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KRe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ae=function(t,e){if(!t)throw r1(e)},r1=function(t){return new Error("Firebase Database ("+KRe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const QRe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},eet=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},yee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(QRe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eet(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new tet;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tet extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YRe=function(t){const e=QRe(t);return yee.encodeByteArray(e,!0)},cU=function(t){return YRe(t).replace(/\./g,"")},lU=function(t){try{return yee.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function net(t){return XRe(void 0,t)}function XRe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!set(n)||(t[n]=XRe(t[n],e[n]));return t}function set(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ret(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iet=()=>ret().__FIREBASE_DEFAULTS__,oet=()=>{if(typeof process>"u"||typeof efe>"u")return;const t=efe.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aet=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lU(t[1]);return e&&JSON.parse(e)},Zj=()=>{try{return ZZe()||iet()||oet()||aet()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JRe=t=>Zj()?.emulatorHosts?.[t],vee=t=>{const e=JRe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ZRe=()=>Zj()?.config,eAe=t=>Zj()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jp(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function t3(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wee(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cU(JSON.stringify(n)),cU(JSON.stringify(o)),""].join(".")}const tP={};function cet(){const t={prod:[],emulator:[]};for(const e of Object.keys(tP))tP[e]?t.emulator.push(e):t.prod.push(e);return t}function uet(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tfe=!1;function n3(t,e){if(typeof window>"u"||typeof document>"u"||!Jp(window.location.host)||tP[t]===e||tP[t]||tfe)return;tP[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=cet().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{tfe=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=uet(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),R=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(R,w);const V=l();a(O,P),M.append(O,m,R,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yc())}function het(){const t=Zj()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function det(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fet(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tAe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pet(){const t=yc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function get(){return KRe.NODE_ADMIN===!0}function met(){return!het()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _et(){try{return typeof indexedDB=="object"}catch{return!1}}function yet(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vet="FirebaseError";class Zp extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=vet,Object.setPrototypeOf(this,Zp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rL.prototype.create)}}class rL{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?wet(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zp(r,a,s)}}function wet(t,e){return t.replace(bet,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const bet=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ix(t){return JSON.parse(t)}function wo(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nAe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=ix(lU(i[0])||""),n=ix(lU(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Eet=function(t){const e=nAe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Tet=function(t){const e=nAe(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kS(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function DK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uU(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Qv(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(nfe(i)&&nfe(o)){if(!Qv(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function nfe(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function i1(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cet{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function Iet(t,e){const n=new ket(t,e);return n.subscribe.bind(n)}class ket{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Ret(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=$7),r.error===void 0&&(r.error=$7),r.complete===void 0&&(r.complete=$7);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ret(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $7(){}function Eee(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Aet=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Ae(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},s3=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vs(t){return t&&t._delegate?t._delegate:t}class Bm{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rE="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pet{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new e3;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xet(e))try{this.getOrInitializeService({instanceIdentifier:rE})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=rE){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rE){return this.instances.has(e)}getOptions(e=rE){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Net(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=rE){return this.component?this.component.multipleInstances?e:rE:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Net(t){return t===rE?void 0:t}function xet(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Det{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Pet(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vn||(vn={}));const Oet={debug:vn.DEBUG,verbose:vn.VERBOSE,info:vn.INFO,warn:vn.WARN,error:vn.ERROR,silent:vn.SILENT},Let=vn.INFO,Met={[vn.DEBUG]:"log",[vn.VERBOSE]:"log",[vn.INFO]:"info",[vn.WARN]:"warn",[vn.ERROR]:"error"},Fet=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Met[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class r3{constructor(e){this.name=e,this._logLevel=Let,this._logHandler=Fet,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oet[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vn.DEBUG,...e),this._logHandler(this,vn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vn.VERBOSE,...e),this._logHandler(this,vn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vn.INFO,...e),this._logHandler(this,vn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vn.WARN,...e),this._logHandler(this,vn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vn.ERROR,...e),this._logHandler(this,vn.ERROR,...e)}}const Vet=(t,e)=>e.some(n=>t instanceof n);let sfe,rfe;function Uet(){return sfe||(sfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qet(){return rfe||(rfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sAe=new WeakMap,OK=new WeakMap,rAe=new WeakMap,z7=new WeakMap,Tee=new WeakMap;function jet(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(iv(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sAe.set(n,t)}).catch(()=>{}),Tee.set(e,t),e}function Bet(t){if(OK.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});OK.set(t,e)}let LK={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return OK.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rAe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return iv(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $et(t){LK=t(LK)}function zet(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(H7(this),e,...n);return rAe.set(s,e.sort?e.sort():[e]),iv(s)}:qet().includes(t)?function(...e){return t.apply(H7(this),e),iv(sAe.get(this))}:function(...e){return iv(t.apply(H7(this),e))}}function Het(t){return typeof t=="function"?zet(t):(t instanceof IDBTransaction&&Bet(t),Vet(t,Uet())?new Proxy(t,LK):t)}function iv(t){if(t instanceof IDBRequest)return jet(t);if(z7.has(t))return z7.get(t);const e=Het(t);return e!==t&&(z7.set(t,e),Tee.set(e,t)),e}const H7=t=>Tee.get(t);function Wet(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=iv(o);return s&&o.addEventListener("upgradeneeded",l=>{s(iv(o.result),l.oldVersion,l.newVersion,iv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Get=["get","getKey","getAll","getAllKeys","count"],Ket=["put","add","delete","clear"],W7=new Map;function ife(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(W7.get(e))return W7.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Ket.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Get.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return W7.set(e,i),i}$et(t=>({...t,get:(e,n,s)=>ife(e,n)||t.get(e,n,s),has:(e,n)=>!!ife(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qet{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Yet(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Yet(t){return t.getComponent()?.type==="VERSION"}const MK="@firebase/app",ofe="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $m=new r3("@firebase/app"),Xet="@firebase/app-compat",Jet="@firebase/analytics-compat",Zet="@firebase/analytics",ett="@firebase/app-check-compat",ttt="@firebase/app-check",ntt="@firebase/auth",stt="@firebase/auth-compat",rtt="@firebase/database",itt="@firebase/data-connect",ott="@firebase/database-compat",att="@firebase/functions",ctt="@firebase/functions-compat",ltt="@firebase/installations",utt="@firebase/installations-compat",htt="@firebase/messaging",dtt="@firebase/messaging-compat",ftt="@firebase/performance",ptt="@firebase/performance-compat",gtt="@firebase/remote-config",mtt="@firebase/remote-config-compat",_tt="@firebase/storage",ytt="@firebase/storage-compat",vtt="@firebase/firestore",wtt="@firebase/ai",btt="@firebase/firestore-compat",Ett="firebase",Ttt="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FK="[DEFAULT]",Ctt={[MK]:"fire-core",[Xet]:"fire-core-compat",[Zet]:"fire-analytics",[Jet]:"fire-analytics-compat",[ttt]:"fire-app-check",[ett]:"fire-app-check-compat",[ntt]:"fire-auth",[stt]:"fire-auth-compat",[rtt]:"fire-rtdb",[itt]:"fire-data-connect",[ott]:"fire-rtdb-compat",[att]:"fire-fn",[ctt]:"fire-fn-compat",[ltt]:"fire-iid",[utt]:"fire-iid-compat",[htt]:"fire-fcm",[dtt]:"fire-fcm-compat",[ftt]:"fire-perf",[ptt]:"fire-perf-compat",[gtt]:"fire-rc",[mtt]:"fire-rc-compat",[_tt]:"fire-gcs",[ytt]:"fire-gcs-compat",[vtt]:"fire-fst",[btt]:"fire-fst-compat",[wtt]:"fire-vertex","fire-js":"fire-js",[Ett]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hU=new Map,Itt=new Map,VK=new Map;function afe(t,e){try{t.container.addComponent(e)}catch(n){$m.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yv(t){const e=t.name;if(VK.has(e))return $m.debug(`There were multiple attempts to register component ${e}.`),!1;VK.set(e,t);for(const n of hU.values())afe(n,t);for(const n of Itt.values())afe(n,t);return!0}function iL(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Au(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Stt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ov=new rL("app","Firebase",Stt);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ktt{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ov.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pb=Ttt;function iAe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:FK,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ov.create("bad-app-name",{appName:String(r)});if(n||(n=ZRe()),!n)throw ov.create("no-options");const i=hU.get(r);if(i){if(Qv(n,i.options)&&Qv(s,i.config))return i;throw ov.create("duplicate-app",{appName:r})}const o=new Det(r);for(const l of VK.values())o.addComponent(l);const a=new ktt(n,s,o);return hU.set(r,a),a}function i3(t=FK){const e=hU.get(t);if(!e&&t===FK&&ZRe())return iAe();if(!e)throw ov.create("no-app",{appName:t});return e}function vh(t,e,n){let s=Ctt[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$m.warn(o.join(" "));return}Yv(new Bm(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Rtt="firebase-heartbeat-database",Att=1,ox="firebase-heartbeat-store";let G7=null;function oAe(){return G7||(G7=Wet(Rtt,Att,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ox)}catch(n){console.warn(n)}}}}).catch(t=>{throw ov.create("idb-open",{originalErrorMessage:t.message})})),G7}async function Ptt(t){try{const e=(await oAe()).transaction(ox),n=await e.objectStore(ox).get(aAe(t));return await e.done,n}catch(e){if(e instanceof Zp)$m.warn(e.message);else{const n=ov.create("idb-get",{originalErrorMessage:e?.message});$m.warn(n.message)}}}async function cfe(t,e){try{const n=(await oAe()).transaction(ox,"readwrite");await n.objectStore(ox).put(e,aAe(t)),await n.done}catch(n){if(n instanceof Zp)$m.warn(n.message);else{const s=ov.create("idb-set",{originalErrorMessage:n?.message});$m.warn(s.message)}}}function aAe(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ntt=1024,xtt=30;class Dtt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ltt(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=lfe();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>xtt){const s=Mtt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$m.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lfe(),{heartbeatsToSend:n,unsentEntries:s}=Ott(this._heartbeatsCache.heartbeats),r=cU(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return $m.warn(e),""}}}function lfe(){return new Date().toISOString().substring(0,10)}function Ott(t,e=Ntt){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ufe(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ufe(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ltt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _et()?yet().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Ptt(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cfe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return cfe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function ufe(t){return cU(JSON.stringify({version:2,heartbeats:t})).length}function Mtt(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ftt(t){Yv(new Bm("platform-logger",e=>new Qet(e),"PRIVATE")),Yv(new Bm("heartbeat",e=>new Dtt(e),"PRIVATE")),vh(MK,ofe,t),vh(MK,ofe,"esm2020"),vh("fire-js","")}Ftt("");function cAe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oL=cAe,lAe=new rL("auth","Firebase",cAe());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dU=new r3("@firebase/auth");function Vtt(t,...e){dU.logLevel<=vn.WARN&&dU.warn(`Auth (${pb}): ${t}`,...e)}function m4(t,...e){dU.logLevel<=vn.ERROR&&dU.error(`Auth (${pb}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kp(t,...e){throw Iee(t,...e)}function Ed(t,...e){return Iee(t,...e)}function Cee(t,e,n){const s={...oL(),[e]:n};return new rL("auth","Firebase",s).create(e,{appName:t.name})}function tT(t){return Cee(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Utt(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&kp(t,"argument-error"),Cee(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iee(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return lAe.create(t,...e)}function Dt(t,e,...n){if(!t)throw Iee(e,...n)}function pm(t){const e="INTERNAL ASSERTION FAILED: "+t;throw m4(e),new Error(e)}function zm(t,e){t||pm(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UK(){return typeof self<"u"&&self.location?.href||""}function qtt(){return hfe()==="http:"||hfe()==="https:"}function hfe(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jtt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qtt()||fet()||"connection"in navigator)?navigator.onLine:!0}function Btt(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aL{constructor(e,n){this.shortDelay=e,this.longDelay=n,zm(n>e,"Short delay should be less than long delay!"),this.isMobile=bee()||tAe()}get(){return jtt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function See(t,e){zm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uAe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ztt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Htt=new aL(3e4,6e4);function kee(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function o1(t,e,n,s,r={}){return hAe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=i1({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return det()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Jp(t.emulatorConfig.host)&&(u.credentials="include"),uAe.fetch()(await dAe(t,t.config.apiHost,n,a),u)})}async function hAe(t,e,n){t._canInitEmulator=!1;const s={...$tt,...e};try{const r=new Gtt(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw W2(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw W2(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw W2(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw W2(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Cee(t,h,u);kp(t,h)}}catch(r){if(r instanceof Zp)throw r;kp(t,"network-request-failed",{message:String(r)})}}async function Wtt(t,e,n,s,r={}){const i=await o1(t,e,n,s,r);return"mfaPendingCredential"in i&&kp(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function dAe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?See(t.config,r):`${t.config.apiScheme}://${r}`;return ztt.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Gtt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ed(this.auth,"network-request-failed")),Htt.get())})}}function W2(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ed(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ktt(t,e){return o1(t,"POST","/v1/accounts:delete",e)}async function fU(t,e){return o1(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nP(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cL(t,e=!1){const n=Vs(t),s=await n.getIdToken(e),r=Ree(s);Dt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:nP(K7(r.auth_time)),issuedAtTime:nP(K7(r.iat)),expirationTime:nP(K7(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function K7(t){return Number(t)*1e3}function Ree(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return m4("JWT malformed, contained fewer than 3 sections"),null;try{const r=lU(n);return r?JSON.parse(r):(m4("Failed to decode base64 JWT payload"),null)}catch(r){return m4("Caught error parsing JWT payload as JSON",r?.toString()),null}}function dfe(t){const e=Ree(t);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ax(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zp&&Qtt(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Qtt({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ytt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qK{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nP(this.lastLoginAt),this.creationTime=nP(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function pU(t){const e=t.auth,n=await t.getIdToken(),s=await ax(t,fU(e,{idToken:n}));Dt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?fAe(r.providerUserInfo):[],o=Xtt(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new qK(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function lL(t){const e=Vs(t);await pU(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xtt(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function fAe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Jtt(t,e){const n=await hAe(t,{},async()=>{const s=i1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await dAe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&Jp(t.emulatorConfig.host)&&(l.credentials="include"),uAe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ztt(t,e){return o1(t,"POST","/v2/accounts:revokeToken",kee(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SI{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dfe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const n=dfe(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Jtt(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new SI;return s&&(Dt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Dt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Dt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new SI,this.toJSON())}_performRefresh(){return pm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X_(t,e){Dt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ed{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Ytt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new qK(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ax(this,this.stsTokenManager.getToken(this.auth,e));return Dt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cL(this,e)}reload(){return lL(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ed({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await pU(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Au(this.auth.app))return Promise.reject(tT(this.auth));const e=await this.getIdToken();return await ax(this,Ktt(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:R}=n;Dt(d&&R,e,"internal-error");const P=SI.fromJSON(this.name,R);Dt(typeof d=="string",e,"internal-error"),X_(s,e.name),X_(r,e.name),Dt(typeof p=="boolean",e,"internal-error"),Dt(typeof m=="boolean",e,"internal-error"),X_(i,e.name),X_(o,e.name),X_(a,e.name),X_(l,e.name),X_(u,e.name),X_(h,e.name);const O=new ed({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new SI;r.updateFromServerResponse(n);const i=new ed({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await pU(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Dt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?fAe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new SI;a.updateFromIdToken(s);const l=new ed({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new qK(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ffe=new Map;function gm(t){zm(t instanceof Function,"Expected a class definition");let e=ffe.get(t);return e?(zm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ffe.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pAe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pAe.type="NONE";const RS=pAe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _4(t,e,n){return`firebase:${t}:${e}:${n}`}class kI{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=_4(this.userKey,r.apiKey,i),this.fullPersistenceKey=_4("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fU(this.auth,{idToken:e}).catch(()=>{});return n?ed._fromGetAccountInfoResponse(this.auth,n,e):null}return ed._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new kI(gm(RS),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||gm(RS);const o=_4(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await fU(e,{idToken:h}).catch(()=>{});if(!p)break;d=await ed._fromGetAccountInfoResponse(e,p,h)}else d=ed._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new kI(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new kI(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pfe(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yAe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gAe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wAe(e))return"Blackberry";if(bAe(e))return"Webos";if(mAe(e))return"Safari";if((e.includes("chrome/")||_Ae(e))&&!e.includes("edge/"))return"Chrome";if(vAe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function gAe(t=yc()){return/firefox\//i.test(t)}function mAe(t=yc()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _Ae(t=yc()){return/crios\//i.test(t)}function yAe(t=yc()){return/iemobile/i.test(t)}function vAe(t=yc()){return/android/i.test(t)}function wAe(t=yc()){return/blackberry/i.test(t)}function bAe(t=yc()){return/webos/i.test(t)}function Aee(t=yc()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ent(t=yc()){return Aee(t)&&!!window.navigator?.standalone}function tnt(){return pet()&&document.documentMode===10}function EAe(t=yc()){return Aee(t)||vAe(t)||bAe(t)||wAe(t)||/windows phone/i.test(t)||yAe(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TAe(t,e=[]){let n;switch(t){case"Browser":n=pfe(yc());break;case"Worker":n=`${pfe(yc())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pb}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nnt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function snt(t,e={}){return o1(t,"GET","/v2/passwordPolicy",kee(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rnt=6;class int{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rnt,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ont{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gfe(this),this.idTokenSubscription=new gfe(this),this.beforeStateQueue=new nnt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lAe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gm(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await kI.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fU(this,{idToken:e}),s=await ed._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Au(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pU(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Btt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Au(this.app))return Promise.reject(tT(this));const n=e?Vs(e):null;return n&&Dt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Au(this.app)?Promise.reject(tT(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Au(this.app)?Promise.reject(tT(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gm(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await snt(this),n=new int(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rL("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ztt(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gm(e)||this._popupRedirectResolver;Dt(n,this,"argument-error"),this.redirectPersistenceManager=await kI.create(this,[gm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TAe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Au(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Vtt(`Error while retrieving App Check token: ${e.error}`),e?.token}}function o3(t){return Vs(t)}class gfe{constructor(e){this.auth=e,this.observer=null,this.addObserver=Iet(n=>this.observer=n)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Pee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ant(t){Pee=t}function cnt(t){return Pee.loadJS(t)}function lnt(){return Pee.gapiScript}function unt(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uL(t,e){const n=iL(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Qv(r,e??{}))return s;kp(s,"already-initialized")}return n.initialize({options:e})}function hnt(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(gm);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function hL(t,e,n){const s=o3(t);Dt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=CAe(e),{host:o,port:a}=dnt(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Dt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Dt(Qv(u,s.config.emulator)&&Qv(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Jp(o)?(t3(`${i}//${o}${l}`),n3("Auth",!0)):fnt()}function CAe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dnt(t){const e=CAe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:mfe(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:mfe(o)}}}function mfe(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fnt(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pm("not implemented")}_getIdTokenResponse(e){return pm("not implemented")}_linkToIdToken(e,n){return pm("not implemented")}_getReauthenticationResolver(e){return pm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function RI(t,e){return Wtt(t,"POST","/v1/accounts:signInWithIdp",kee(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pnt="http://localhost";class Jd extends a1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kp("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Jd(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return RI(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,RI(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,RI(e,n)}buildRequest(){const e={requestUri:pnt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=i1(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nee{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dL extends Nee{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lh extends dL{constructor(){super("facebook.com")}static credential(e){return Jd._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lh.credential(e.oauthAccessToken)}catch{return null}}}lh.FACEBOOK_SIGN_IN_METHOD="facebook.com";lh.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pu extends dL{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jd._fromParams({providerId:Pu.PROVIDER_ID,signInMethod:Pu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pu.credentialFromTaggedObject(e)}static credentialFromError(e){return Pu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Pu.credential(n,s)}catch{return null}}}Pu.GOOGLE_SIGN_IN_METHOD="google.com";Pu.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uh extends dL{constructor(){super("github.com")}static credential(e){return Jd._fromParams({providerId:uh.PROVIDER_ID,signInMethod:uh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uh.credentialFromTaggedObject(e)}static credentialFromError(e){return uh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uh.credential(e.oauthAccessToken)}catch{return null}}}uh.GITHUB_SIGN_IN_METHOD="github.com";uh.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hh extends dL{constructor(){super("twitter.com")}static credential(e,n){return Jd._fromParams({providerId:hh.PROVIDER_ID,signInMethod:hh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hh.credentialFromTaggedObject(e)}static credentialFromError(e){return hh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return hh.credential(n,s)}catch{return null}}}hh.TWITTER_SIGN_IN_METHOD="twitter.com";hh.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AS{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await ed._fromIdTokenResponse(e,s,r),o=_fe(s);return new AS({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=_fe(s);return new AS({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function _fe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gU extends Zp{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,gU.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new gU(e,n,s,r)}}function IAe(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?gU._fromErrorAndOperation(t,r,e,s):r})}async function gnt(t,e,n=!1){const s=await ax(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return AS._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function mnt(t,e,n=!1){const{auth:s}=t;if(Au(s.app))return Promise.reject(tT(s));const r="reauthenticate";try{const i=await ax(t,IAe(s,r,e,t),n);Dt(i.idToken,s,"internal-error");const o=Ree(i.idToken);Dt(o,s,"internal-error");const{sub:a}=o;return Dt(t.uid===a,s,"user-mismatch"),AS._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&kp(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _nt(t,e,n=!1){if(Au(t.app))return Promise.reject(tT(t));const s="signIn",r=await IAe(t,s,e),i=await AS._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function fL(t,e,n,s){return Vs(t).onIdTokenChanged(e,n,s)}function pL(t,e,n){return Vs(t).beforeAuthStateChanged(e,n)}function gL(t,e,n,s){return Vs(t).onAuthStateChanged(e,n,s)}function tm(t){return Vs(t).signOut()}const mU="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SAe{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mU,"1"),this.storage.removeItem(mU),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ynt=1e3,vnt=10;class kAe extends SAe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EAe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);tnt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,vnt):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ynt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kAe.type="LOCAL";const mL=kAe;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RAe extends SAe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RAe.type="SESSION";const c1=RAe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wnt(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a3{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new a3(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await wnt(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}a3.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xee(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bnt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=xee("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yf(){return window}function Ent(t){Yf().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AAe(){return typeof Yf().WorkerGlobalScope<"u"&&typeof Yf().importScripts=="function"}async function Tnt(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cnt(){return navigator?.serviceWorker?.controller||null}function Int(){return AAe()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PAe="firebaseLocalStorageDb",Snt=1,_U="firebaseLocalStorage",NAe="fbase_key";class _L{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function c3(t,e){return t.transaction([_U],e?"readwrite":"readonly").objectStore(_U)}function knt(){const t=indexedDB.deleteDatabase(PAe);return new _L(t).toPromise()}function jK(){const t=indexedDB.open(PAe,Snt);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(_U,{keyPath:NAe})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(_U)?e(s):(s.close(),await knt(),e(await jK()))})})}async function yfe(t,e,n){const s=c3(t,!0).put({[NAe]:e,value:n});return new _L(s).toPromise()}async function Rnt(t,e){const n=c3(t,!1).get(e),s=await new _L(n).toPromise();return s===void 0?null:s.value}function vfe(t,e){const n=c3(t,!0).delete(e);return new _L(n).toPromise()}const Ant=800,Pnt=3;class xAe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jK(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Pnt)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AAe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=a3._getInstance(Int()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Tnt(),!this.activeServiceWorker)return;this.sender=new bnt(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cnt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jK();return await yfe(e,mU,"1"),await vfe(e,mU),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>yfe(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Rnt(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vfe(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=c3(r,!1).getAll();return new _L(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ant)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xAe.type="LOCAL";const yL=xAe;new aL(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DAe(t,e){return e?gm(e):(Dt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dee extends a1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return RI(e,this._buildIdpRequest())}_linkToIdToken(e,n){return RI(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return RI(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nnt(t){return _nt(t.auth,new Dee(t),t.bypassAuthState)}function xnt(t){const{auth:e,user:n}=t;return Dt(n,e,"internal-error"),mnt(n,new Dee(t),t.bypassAuthState)}async function Dnt(t){const{auth:e,user:n}=t;return Dt(n,e,"internal-error"),gnt(n,new Dee(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OAe{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nnt;case"linkViaPopup":case"linkViaRedirect":return Dnt;case"reauthViaPopup":case"reauthViaRedirect":return xnt;default:kp(this.auth,"internal-error")}}resolve(e){zm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ont=new aL(2e3,1e4);async function vL(t,e,n){if(Au(t.app))return Promise.reject(Ed(t,"operation-not-supported-in-this-environment"));const s=o3(t);Utt(t,e,Nee);const r=DAe(s,n);return new SE(s,"signInViaPopup",e,r).executeNotNull()}class SE extends OAe{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,SE.currentPopupAction&&SE.currentPopupAction.cancel(),SE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){zm(this.filter.length===1,"Popup operations only handle one event");const e=xee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ed(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ed(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,SE.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ed(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ont.get())};e()}}SE.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lnt="pendingRedirect",y4=new Map;class Mnt extends OAe{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=y4.get(this.auth._key());if(!e){try{const n=await Fnt(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}y4.set(this.auth._key(),e)}return this.bypassAuthState||y4.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fnt(t,e){const n=qnt(e),s=Unt(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Vnt(t,e){y4.set(t._key(),e)}function Unt(t){return gm(t._redirectPersistence)}function qnt(t){return _4(Lnt,t.config.apiKey,t.name)}async function jnt(t,e,n=!1){if(Au(t.app))return Promise.reject(tT(t));const s=o3(t),r=DAe(s,e),i=await new Mnt(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bnt=600*1e3;class $nt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!znt(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!LAe(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ed(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bnt&&this.cachedEventUids.clear(),this.cachedEventUids.has(wfe(e))}saveEventToCache(e){this.cachedEventUids.add(wfe(e)),this.lastProcessedEventTime=Date.now()}}function wfe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LAe({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function znt(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LAe(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Hnt(t,e={}){return o1(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Wnt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gnt=/^https?/;async function Knt(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Hnt(t);for(const n of e)try{if(Qnt(n))return}catch{}kp(t,"unauthorized-domain")}function Qnt(t){const e=UK(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!Gnt.test(n))return!1;if(Wnt.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ynt=new aL(3e4,6e4);function bfe(){const t=Yf().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Xnt(t){return new Promise((e,n)=>{function s(){bfe(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bfe(),n(Ed(t,"network-request-failed"))},timeout:Ynt.get()})}if(Yf().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Yf().gapi?.load)s();else{const r=unt("iframefcb");return Yf()[r]=()=>{gapi.load?s():n(Ed(t,"network-request-failed"))},cnt(`${lnt()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw v4=null,e})}let v4=null;function Jnt(t){return v4=v4||Xnt(t),v4}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Znt=new aL(5e3,15e3),est="__/auth/iframe",tst="emulator/auth/iframe",nst={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sst=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rst(t){const e=t.config;Dt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?See(e,tst):`https://${t.config.authDomain}/${est}`,s={apiKey:e.apiKey,appName:t.name,v:pb},r=sst.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${i1(s).slice(1)}`}async function ist(t){const e=await Jnt(t),n=Yf().gapi;return Dt(n,t,"internal-error"),e.open({where:document.body,url:rst(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nst,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ed(t,"network-request-failed"),a=Yf().setTimeout(()=>{i(o)},Znt.get());function l(){Yf().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ost={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ast=500,cst=600,lst="_blank",ust="http://localhost";class Efe{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hst(t,e,n,s=ast,r=cst){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...ost,width:s.toString(),height:r.toString(),top:i,left:o},u=yc().toLowerCase();n&&(a=_Ae(u)?lst:n),gAe(u)&&(e=e||ust,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(ent(u)&&a!=="_self")return dst(e||"",a),new Efe(null);const d=window.open(e||"",a,h);Dt(d,t,"popup-blocked");try{d.focus()}catch{}return new Efe(d)}function dst(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fst="__/auth/handler",pst="emulator/auth/handler",gst=encodeURIComponent("fac");async function Tfe(t,e,n,s,r,i){Dt(t.config.authDomain,t,"auth-domain-config-required"),Dt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:pb,eventId:r};if(e instanceof Nee){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DK(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof dL){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${gst}=${encodeURIComponent(l)}`:"";return`${mst(t)}?${i1(a).slice(1)}${u}`}function mst({config:t}){return t.emulator?See(t,pst):`https://${t.authDomain}/${fst}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q7="webStorageSupport";class _st{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c1,this._completeRedirectFn=jnt,this._overrideRedirectResult=Vnt}async _openPopup(e,n,s,r){zm(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Tfe(e,n,s,UK(),r);return hst(e,i,xee())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Tfe(e,n,s,UK(),r);return Ent(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(zm(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await ist(e),s=new $nt(e);return n.register("authEvent",r=>(Dt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Q7,{type:Q7},s=>{const r=s?.[0]?.[Q7];r!==void 0&&n(!!r),kp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Knt(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EAe()||mAe()||Aee()}}const wL=_st;var Cfe="@firebase/auth",Ife="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yst{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vst(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wst(t){Yv(new Bm("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Dt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TAe(t)},u=new ont(s,r,i,l);return hnt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Yv(new Bm("auth-internal",e=>{const n=o3(e.getProvider("auth").getImmediate());return(s=>new yst(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vh(Cfe,Ife,vst(t)),vh(Cfe,Ife,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bst=300,Est=eAe("authIdTokenMaxAge")||bst;let Sfe=null;const Tst=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Est)return;const r=n?.token;Sfe!==r&&(Sfe=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function bL(t=i3()){const e=iL(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uL(t,{popupRedirectResolver:wL,persistence:[yL,mL,c1]}),s=eAe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Tst(i.toString());pL(n,o,()=>o(n.currentUser)),fL(n,a=>o(a))}}const r=JRe("auth");return r&&hL(n,`http://${r}`),n}function Cst(){return document.getElementsByTagName("head")?.[0]??document}ant({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ed("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Cst().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wst("Browser");var kfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var av,MAe;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),G=2;G<arguments.length;G++)b[G-2]=arguments[G];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),T=T.j(E).add(u(b))):(T=T.j(y),T=T.add(u(b)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=O(this,I),R(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(R(this))return R(I)?P(this).j(P(I)):P(P(this).j(I));if(R(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,G=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*G,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*G,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(R(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(R(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=W(y),T=W(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=u(y),b=E.j(v);R(b)||0<b.l(I);)y-=T,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,MAe=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,av=o}).apply(typeof kfe<"u"?kfe:typeof self<"u"?self:typeof window<"u"?window:{});var G2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FAe,fA,VAe,w4,BK,UAe,qAe,jAe;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof G2=="object"&&G2];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var D=g++;return{value:f(D,c[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,D){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return f.prototype[N].apply(_,z)}}function R(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,D=_.length||0;c.length=N+D;for(let z=0;z<D;z++)c[N+z]=_[z]}else c.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=ct;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class G{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ct=new G,Ke=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(Qe)}};var Qe=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}de=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function it(c,f){if(he.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(W){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&it.aa.h.call(this)}}w(it,he);var Fe={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Q=0;function K(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Q,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function k(c){this.src=c,this.g={},this.h=0}k.prototype.add=function(c,f,g,_,N){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=A(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new K(f,this.src,D,!!_,N),f.fa=g,c.push(f)),f};function C(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=N)&&Array.prototype.splice.call(_,N,1),D&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function A(c,f,g,_){for(var N=0;N<c.length;++N){var D=c[N];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(c,f[D],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,D){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,le=Z(c);if(le||(c[x]=le=new k(c)),g=le.add(f,g,_,z,D),g.proxy)return g;if(_=H(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)qt||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Y(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function H(){function c(g){return f.call(c.src,c.listener,g)}const f=X;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(c,f[D],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(D=c.g[f],g=A(D,g,_,N),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=A(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])C(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Y(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Y(c){return c in L?L[c]:L[c]="on"+c}function X(c,f){if(c.da)c=!0;else{f=new it(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof k?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ge.call(this),this.i=new k(this),this.M=this,this.F=null}w(re,ge),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new he(f,c);else if(f instanceof he)f.target=f.target||c;else{var N=f;f=new he(_,c),T(f,N)}if(N=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];N=fe(z,_,!0,f)&&N}if(z=f.g=c,N=fe(z,_,!0,f)&&N,N=fe(z,_,!1,f)&&N,g)for(D=0;D<g.length;D++)z=f.g=g[D],N=fe(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function fe(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var le=z.listener,ke=z.ha||z.src;z.fa&&C(c.i,z),N=le.call(ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function Se(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ve(c){c.g=Se(()=>{c.g=null,c.i&&(c.i=!1,Ve(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class We extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(c){ge.call(this),this.h=c,this.g={}}w(Ge,ge);var ss=[];function Ue(c){J(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),Ue(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,rs=a.JSON.parse,Pr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xr(){}Xr.prototype.h=null;function ll(c){return c.h||(c.h=c.i())}function ul(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){he.call(this,"d")}w(Xi,he);function Ji(){he.call(this,"c")}w(Ji,he);var cn={},hl=null;function Nr(){return hl=hl||new re}cn.La="serverreachability";function dl(c){he.call(this,cn.La,c)}w(dl,he);function Ss(c){const f=Nr();se(f,new dl(f))}cn.STAT_EVENT="statevent";function fl(c,f){he.call(this,cn.STAT_EVENT,c),this.stat=f}w(fl,he);function Oe(c){const f=Nr();se(f,new fl(f,c))}cn.Ma="timingevent";function pl(c,f){he.call(this,cn.Ma,c),this.size=f}w(pl,he);function ks(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function lg(c,f,g,_,N,D){c.info(function(){if(c.g)if(D)for(var z="",le=D.split("&"),ke=0;ke<le.length;ke++){var ce=le[ke].split("=");if(1<ce.length){var Re=ce[0];ce=ce[1];var Me=Re.split("_");z=2<=Me.length&&Me[1]=="type"?z+(Re+"="+ce+"&"):z+(Re+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function ug(c,f,g,_,N,D,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+D+" "+z})}function Hn(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dg(c,g)+(_?" "+_:"")})}function hg(c,f){c.info(function(){return"TIMEOUT: "+f})}Rs.prototype.info=function(){};function dg(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var D=N[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Le(g)}catch{return f}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Dr(){}w(Dr,Xr),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Zi=new Dr;function jt(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var _l={},eo={};function to(c,f,g){c.L=1,c.v=Fr(gt(f)),c.m=g,c.P=!0,yl(c,null)}function yl(c,f){c.F=Date.now(),Or(c),c.A=gt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),xl(g.i,"t",_),c.C=0,g=c.j.J,c.h=new ml,c.g=Yl(c.j,g?f:null,!c.m),0<c.O&&(c.M=new We(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ss[0]=N.toString()),N=ss);for(var D=0;D<N.length;D++){var z=U(g,N[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ss(),lg(c.i,c.u,c.A,c.l,c.R,c.m)}jt.prototype.ca=function(c){c=c.target;const f=this.M;f&&mt(c)==3?f.j():this.Y(c)},jt.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mt(this.g);var f=this.g.Ba();const Kn=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Me!=4||f==7||(f==8||0>=Kn?Ss(3):Ss(2)),no(this);var g=this.g.Z();this.X=g;t:if(vl(this)){var _=Ul(this.g);c="";var N=_.length,D=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),As(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(D&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ug(this.i,this.u,this.A,this.l,this.R,Me,g),this.o){if(this.T&&!this.K){t:{if(this.g){var le,ke=this.g;if((le=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(le)){var ce=le;break t}}ce=null}if(g=ce)Hn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Oe(12),ln(this),As(this);break e}}if(this.P){g=!0;let Ye;for(;!this.J&&this.C<z.length;)if(Ye=fg(this,z),Ye==eo){Me==4&&(this.s=4,Oe(14),g=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==_l){this.s=4,Oe(15),Hn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hn(this.i,this.l,Ye,null),so(this,Ye);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)Hn(this.i,this.l,z,"[Invalid Chunked Response]"),ln(this),As(this);else if(0<z.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),lo(Re),Re.M=!0,Oe(11))}}else Hn(this.i,this.l,z,null),so(this,z);Me==4&&ln(this),this.o&&!this.J&&(Me==4?Wl(this.j,this):(this.o=!1,Or(this)))}else Pg(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),ln(this),As(this)}}}catch{}finally{}};function vl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fg(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?eo:(g=Number(f.substring(g,_)),isNaN(g)?_l:(_+=1,_+g>f.length?eo:(f=f.slice(_,_+g),c.C=_+g,f)))}jt.prototype.cancel=function(){this.J=!0,ln(this)};function Or(c){c.S=Date.now()+c.I,wl(c,c.I)}function wl(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ks(p(c.ba,c),f)}function no(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hg(this.i,this.A),this.L!=2&&(Ss(),Oe(17)),ln(this),this.s=2,As(this)):wl(this,this.S-c)};function As(c){c.j.G==0||c.J||Wl(c.j,c)}function ln(c){no(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ue(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function so(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ro(g.h,c))){if(!c.K&&ro(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$r(g),jr(g);else break e;co(g),Oe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=ks(p(g.Za,g),6e3));if(1>=Tl(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hn(g,11)}else if((c.K||g.g==c)&&$r(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ce=N[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Re=ce[3];Re!=null&&(g.la=Re,g.j.info("VER="+g.la));const Me=ce[4];Me!=null&&(g.Aa=Me,g.j.info("SVER="+g.Aa));const Kn=ce[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(_=1.5*Kn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ye=c.g;if(Ye){const Hr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var D=_.h;D.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(io(D,D.h),D.h=null))}if(_.D){const uo=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(_.ya=uo,ue(_.I,_.D,uo))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=Ql(_,_.J?_.ia:null,_.W),z.K){Cl(_.h,z);var le=z,ke=_.L;ke&&(le.I=ke),le.B&&(no(le),Or(le)),_.g=z}else zl(_);0<g.i.length&&Br(g)}else ce[0]!="stop"&&ce[0]!="close"||hn(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?hn(g,7):ao(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ss(4)}catch{}}var pg=class{constructor(c,f){this.g=c,this.map=f}};function bl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tl(c){return c.h?1:c.g?c.g.size:0}function ro(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function io(c,f){c.g?c.g.add(f):c.h=f}function Cl(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return R(c.i)}function gg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function mg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function Sl(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=mg(c),_=gg(c),N=_.length,D=0;D<N;D++)f.call(void 0,_[D],g&&g[D],c)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var D=c[g].substring(0,_);N=c[g].substring(_+1)}else D=c[g];f(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof un){this.h=c.h,Lr(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var f=c.i,g=new xs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Rl(this,g),this.m=c.m}else c&&(f=String(c).match(kl))?(this.h=!1,Lr(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Mr(this,f[4]),this.l=Ps(f[5]||"",!0),Rl(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}un.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ns(f,Al,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ns(f,Al,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ns(g,g.charAt(0)=="/"?wg:vg,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ns(g,Eg)),c.join("")};function gt(c){return new un(c)}function Lr(c,f,g){c.j=g?Ps(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Rl(c,f,g){f instanceof xs?(c.i=f,Tg(c.i,c.h)):(g||(f=Ns(f,bg)),c.i=new xs(f,c.h))}function ue(c,f,g){c.i.set(f,g)}function Fr(c){return ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ps(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ns(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,yg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,vg=/[#\?:]/g,wg=/[#\?]/g,bg=/[#\?@]/g,Eg=/#/g;function xs(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&_g(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xs.prototype,t.add=function(c,f){Bt(this),this.i=null,c=Wn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Pl(c,f){Bt(c),f=Wn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nl(c,f){return Bt(c),f=Wn(c,f),c.g.has(f)}t.forEach=function(c,f){Bt(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){Bt(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let D=0;D<N.length;D++)g.push(f[_])}return g},t.V=function(c){Bt(this);let f=[];if(typeof c=="string")Nl(this,c)&&(f=f.concat(this.g.get(Wn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Bt(this),this.i=null,c=Wn(this,c),Nl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xl(c,f,g){Pl(c,f),0<g.length&&(c.i=null,c.g.set(Wn(c,f),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=D;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function Wn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Tg(c,f){f&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(Pl(this,_),xl(this,N,g))},c)),c.j=f}function Cg(c,f){const g=new Rs;if(a.Image){const _=new Image;_.onload=m($t,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m($t,g,"TestLoadImage: error",!1,f,_),_.onabort=m($t,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m($t,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ig(c,f){const g=new Rs,_=new AbortController,N=setTimeout(()=>{_.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(D=>{clearTimeout(N),D.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),$t(g,"TestPingServer: error",!1,f)})}function $t(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Sg(){this.g=new Pr}function kg(c,f,g){const _=g||"";try{Sl(c,function(N,D){let z=N;u(N)&&(z=Le(N)),f.push(_+D+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vr,Xr),Vr.prototype.g=function(){return new Ur(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ur(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ur,re),t=Ur.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ds(this):Os(this),this.readyState==3&&Dl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let f="";return J(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function oo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ol(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ue(c,f,g))}function pe(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pe,re);var Rg=/^https?$/i,Ag=["POST","PUT"];t=pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ll(this.o):ll(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(D){Ll(this,D);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Ll(this,D)}};function Ll(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Ml(c),qr(c)}function Ml(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mt(c)!=4||c.Z()!=2)){if(c.u&&mt(c)==4)Se(c.Ea,0,c);else if(se(c,"readystatechange"),mt(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(kl)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Rg.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var D=2<mt(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Ml(c)}}finally{qr(c)}}}}function qr(c,f){if(c.g){Vl(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Vl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rs(f)}};function Ul(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pg(c){const f={};c=(c.g&&2<=mt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[N]||[];f[N]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function ql(c){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bl(c&&c.concurrentRequestLimit),this.Da=new Sg,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ql.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Oe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Ql(this,null,this.W),Br(this)};function ao(c){if(jl(c),c.G==3){var f=c.U++,g=gt(c.I);if(ue(g,"SID",c.K),ue(g,"RID",f),ue(g,"TYPE","terminate"),Ms(c,g),f=new jt(c,c.j,f),f.L=2,f.v=Fr(gt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Or(f)}Kl(c)}function jr(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function jl(c){jr(c),c.u&&(a.clearTimeout(c.u),c.u=null),$r(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Br(c){if(!El(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.B=0}}function Ng(c,f){return Tl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ks(p(c.Ga,c,f),Gl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new jt(this,this.j,c);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(N.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$l(this,N,f),g=gt(this.I),ue(g,"RID",c),ue(g,"CVER",22),this.D&&ue(g,"X-HTTP-Session-Id",this.D),Ms(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(Ol(D)))+"&"+f:this.m&&oo(g,this.m,D)),io(this.h,N),this.Ua&&ue(g,"TYPE","init"),this.P?(ue(g,"$req",f),ue(g,"SID","null"),N.T=!0,to(N,g,null)):to(N,g,f),this.G=2}}else this.G==3&&(c?Bl(this,c):this.i.length==0||El(this.h)||Bl(this))};function Bl(c,f){var g;f?g=f.l:g=c.U++;const _=gt(c.I);ue(_,"SID",c.K),ue(_,"RID",g),ue(_,"AID",c.T),Ms(c,_),c.m&&c.o&&oo(_,c.m,c.o),g=new jt(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$l(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),io(c.h,g),to(g,_,f)}function Ms(c,f){c.H&&J(c.H,function(g,_){ue(f,_,g)}),c.l&&Sl({},function(g,_){ue(f,_,g)})}function $l(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=N[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let le=!0;for(let ke=0;ke<g;ke++){let ce=N[ke].g;const Re=N[ke].map;if(ce-=D,0>ce)D=Math.max(0,N[ke].g-100),le=!1;else try{kg(Re,z,"req"+ce+"_")}catch{_&&_(Re)}}if(le){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function zl(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ks(p(c.Fa,c),Gl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ks(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),jr(this),Hl(this))};function lo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hl(c){c.g=new jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=gt(c.qa);ue(f,"RID","rpc"),ue(f,"SID",c.K),ue(f,"AID",c.T),ue(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ue(f,"TO",c.ja),ue(f,"TYPE","xmlhttp"),Ms(c,f),c.m&&c.o&&oo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Fr(gt(f)),g.m=null,g.P=!0,yl(g,c)}t.Za=function(){this.C!=null&&(this.C=null,jr(this),co(this),Oe(19))};function $r(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Wl(c,f){var g=null;if(c.g==f){$r(c),lo(c),c.g=null;var _=2}else if(ro(c.h,f))g=f.D,Cl(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Nr(),se(_,new pl(_,g)),Br(c)}else zl(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&Ng(c,f)||_==2&&co(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:hn(c,5);break;case 4:hn(c,10);break;case 3:hn(c,6);break;default:hn(c,2)}}}function Gl(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function hn(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new un(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lr(_,"https"),Fr(_),N?Cg(_.toString(),g):Ig(_.toString(),g)}else Oe(2);c.G=0,c.l&&c.l.sa(f),Kl(c),jl(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const f=Il(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ql(c,f,g){var _=g instanceof un?gt(g):new un(g);if(_.g!="")f&&(_.g=f+"."+_.g),Mr(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var D=new un(null);_&&Lr(D,_),f&&(D.g=f),N&&Mr(D,N),g&&(D.l=g),_=D}return g=c.D,f=c.ya,g&&f&&ue(_,g,f),ue(_,"VER",c.la),Ms(c,_),_}function Yl(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new pe(new Vr({eb:g})):new pe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(c,f){return new qe(c,f)};function qe(c,f){re.call(this),this.g=new ql(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gn(this)}w(qe,re),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){ao(this.g)},qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Le(c),c=g);f.i.push(new pg(f.Ya++,c)),f.G==3&&Br(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,qe.aa.N.call(this)};function Jl(c){Xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(Jl,Xi);function Zl(){Ji.call(this),this.status=1}w(Zl,Ji);function Gn(c){this.g=c}w(Gn,Xl),Gn.prototype.ua=function(){se(this.g,"a")},Gn.prototype.ta=function(c){se(this.g,new Jl(c))},Gn.prototype.sa=function(c){se(this.g,new Zl)},Gn.prototype.ra=function(){se(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,jAe=function(){return new zr},qAe=function(){return Nr()},UAe=cn,BK={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,w4=xr,gl.COMPLETE="complete",VAe=gl,ul.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",re.prototype.listen=re.prototype.K,fA=ul,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,FAe=pe}).apply(typeof G2<"u"?G2:typeof self<"u"?self:typeof window<"u"?window:{});const Rfe="@firebase/firestore",Afe="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let za=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};za.UNAUTHENTICATED=new za(null),za.GOOGLE_CREDENTIALS=new za("google-credentials-uid"),za.FIRST_PARTY=new za("first-party-uid"),za.MOCK_USER=new za("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let l1="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DT=new r3("@firebase/firestore");function U0(){return DT.logLevel}function je(t,...e){if(DT.logLevel<=vn.DEBUG){const n=e.map(Oee);DT.debug(`Firestore (${l1}): ${t}`,...n)}}function Hm(t,...e){if(DT.logLevel<=vn.ERROR){const n=e.map(Oee);DT.error(`Firestore (${l1}): ${t}`,...n)}}function PS(t,...e){if(DT.logLevel<=vn.WARN){const n=e.map(Oee);DT.warn(`Firestore (${l1}): ${t}`,...n)}}function Oee(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bt(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BAe(t,s,n)}function BAe(t,e,n){let s=`FIRESTORE (${l1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Hm(s),new Error(s)}function ws(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||BAe(e,r,s)}function Qt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Zp{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cv{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Ae{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ist{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(za.UNAUTHENTICATED))}shutdown(){}}class Sst{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kst{constructor(e){this.t=e,this.currentUser=za.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ws(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new cv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cv,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cv)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ws(typeof s.accessToken=="string",31837,{l:s}),new $Ae(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ws(e===null||typeof e=="string",2055,{h:e}),new za(e)}}class Rst{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=za.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ast{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Rst(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(za.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pfe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pst{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Au(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ws(this.o===void 0,3512);const s=i=>{i.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pfe(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ws(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pfe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nst(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lee{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Nst(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Pn(t,e){return t<e?-1:t>e?1:0}function $K(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Y7(r)===Y7(i)?Pn(r,i):Y7(r)?1:-1}return Pn(t.length,e.length)}const xst=55296,Dst=57343;function Y7(t){const e=t.charCodeAt(0);return e>=xst&&e<=Dst}function NS(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nfe="__name__";class Nf{constructor(e,n,s){n===void 0?n=0:n>e.length&&bt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&bt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Nf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nf?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Nf.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Pn(e.length,n.length)}static compareSegments(e,n){const s=Nf.isNumericId(e),r=Nf.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Nf.extractNumericId(e).compare(Nf.extractNumericId(n)):$K(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return av.fromString(e.substring(4,e.length-2))}}let yo=class b4 extends Nf{construct(e,n,s){return new b4(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Xe(we.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new b4(n)}static emptyPath(){return new b4([])}};const Ost=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let Td=class q0 extends Nf{construct(e,n,s){return new q0(e,n,s)}static isValidIdentifier(e){return Ost.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),q0.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nfe}static keyField(){return new q0([Nfe])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Xe(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Xe(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Xe(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Xe(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new q0(n)}static emptyPath(){return new q0([])}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lt{constructor(e){this.path=e}static fromPath(e){return new lt(yo.fromString(e))}static fromName(e){return new lt(yo.fromString(e).popFirst(5))}static empty(){return new lt(yo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yo.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new yo(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lst(t,e,n){if(!n)throw new Xe(we.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Mst(t,e,n,s){if(e===!0&&s===!0)throw new Xe(we.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xfe(t){if(!lt.isDocumentKey(t))throw new Xe(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zAe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mee(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt(12329,{type:typeof t})}function Cd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xe(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mee(t);throw new Xe(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oi(t,e){const n={typeString:t};return e&&(n.value=e),n}function EL(t,e){if(!zAe(t))throw new Xe(we.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Xe(we.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dfe=-62135596800,Ofe=1e6;let ha=class iE{static now(){return iE.fromMillis(Date.now())}static fromDate(e){return iE.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ofe);return new iE(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Xe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Xe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dfe)throw new Xe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ofe}_compareTo(e){return this.seconds===e.seconds?Pn(this.nanoseconds,e.nanoseconds):Pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:iE._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(EL(e,iE._jsonSchema))return new iE(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dfe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ha._jsonSchemaVersion="firestore/timestamp/1.0",ha._jsonSchema={type:Oi("string",ha._jsonSchemaVersion),seconds:Oi("number"),nanoseconds:Oi("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let nn=class E4{static fromTimestamp(e){return new E4(e)}static min(){return new E4(new ha(0,0))}static max(){return new E4(new ha(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cx=-1;function Fst(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=nn.fromTimestamp(s===1e9?new ha(n+1,0):new ha(n,s));return new Xv(r,lt.empty(),e)}function Vst(t){return new Xv(t.readTime,t.key,cx)}class Xv{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Xv(nn.min(),lt.empty(),cx)}static max(){return new Xv(nn.max(),lt.empty(),cx)}}function Ust(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=lt.comparator(t.documentKey,e.documentKey),n!==0?n:Pn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qst="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jst{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function u1(t){if(t.code!==we.FAILED_PRECONDITION||t.message!==qst)throw t;je("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ie=class eu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new eu((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof eu?n:eu.resolve(n)}catch(n){return eu.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):eu.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):eu.reject(n)}static resolve(e){return new eu((n,s)=>{n(e)})}static reject(e){return new eu((n,s)=>{s(e)})}static waitFor(e){return new eu((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=eu.resolve(!1);for(const s of e)n=n.next(r=>r?eu.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new eu((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new eu((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}};function Bst(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function h1(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class l3{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}l3.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fee=-1;function u3(t){return t==null}function yU(t){return t===0&&1/t==-1/0}function $st(t){return typeof t=="number"&&Number.isInteger(t)&&!yU(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HAe="";function zst(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Lfe(e)),e=Hst(t.get(n),e);return Lfe(e)}function Hst(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case HAe:n+="";break;default:n+=i}}return n}function Lfe(t){return t+HAe+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mfe(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gb(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WAe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let zi=class zK{constructor(e,n){this.comparator=e,this.root=n||lv.EMPTY}insert(e,n){return new zK(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lv.BLACK,null,null))}remove(e){return new zK(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lv.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new K2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new K2(this.root,e,this.comparator,!1)}getReverseIterator(){return new K2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new K2(this.root,e,this.comparator,!0)}},K2=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},lv=class Bg{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Bg.RED,this.left=r??Bg.EMPTY,this.right=i??Bg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Bg(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Bg.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw bt(27949);return e+(this.isRed()?0:1)}};lv.EMPTY=null,lv.RED=!0,lv.BLACK=!1;lv.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new lv(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let _c=class HK{constructor(e){this.comparator=e,this.data=new zi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ffe(this.data.getIterator())}getIteratorFrom(e){return new Ffe(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof HK)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new HK(this.comparator);return n.data=e,n}};class Ffe{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Wf=class WK{constructor(e){this.fields=e,e.sort(Td.comparator)}static empty(){return new WK([])}unionWith(e){let n=new _c(Td.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new WK(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return NS(this.fields,e.fields,(n,s)=>n.isEqual(s))}};/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GAe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ca{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new GAe("Invalid base64 string: "+r):r}}(e);return new Ca(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Ca(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ca.EMPTY_BYTE_STRING=new Ca("");const Wst=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jv(t){if(ws(!!t,39018),typeof t=="string"){let e=0;const n=Wst.exec(t);if(ws(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ti(t.seconds),nanos:Ti(t.nanos)}}function Ti(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zv(t){return typeof t=="string"?Ca.fromBase64String(t):Ca.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KAe="server_timestamp",QAe="__type__",YAe="__previous_value__",XAe="__local_write_time__";function Vee(t){return(t?.mapValue?.fields||{})[QAe]?.stringValue===KAe}function h3(t){const e=t.mapValue.fields[YAe];return Vee(e)?h3(e):e}function lx(t){const e=Jv(t.mapValue.fields[XAe].timestampValue);return new ha(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gst{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const vU="(default)";class ux{constructor(e,n){this.projectId=e,this.database=n||vU}static empty(){return new ux("","")}get isDefaultDatabase(){return this.database===vU}isEqual(e){return e instanceof ux&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JAe="__type__",Kst="__max__",Q2={mapValue:{}},ZAe="__vector__",wU="value";function ew(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vee(t)?4:Yst(t)?9007199254740991:Qst(t)?10:11:bt(28295,{value:t})}function Rp(t,e){if(t===e)return!0;const n=ew(t);if(n!==ew(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lx(t).isEqual(lx(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=Jv(s.timestampValue),o=Jv(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Zv(s.bytesValue).isEqual(Zv(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Ti(s.geoPointValue.latitude)===Ti(r.geoPointValue.latitude)&&Ti(s.geoPointValue.longitude)===Ti(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ti(s.integerValue)===Ti(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Ti(s.doubleValue),o=Ti(r.doubleValue);return i===o?yU(i)===yU(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return NS(t.arrayValue.values||[],e.arrayValue.values||[],Rp);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(Mfe(i)!==Mfe(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Rp(i[a],o[a])))return!1;return!0}(t,e);default:return bt(52216,{left:t})}}function hx(t,e){return(t.values||[]).find(n=>Rp(n,e))!==void 0}function xS(t,e){if(t===e)return 0;const n=ew(t),s=ew(e);if(n!==s)return Pn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Ti(r.integerValue||r.doubleValue),a=Ti(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Vfe(t.timestampValue,e.timestampValue);case 4:return Vfe(lx(t),lx(e));case 5:return $K(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Zv(r),a=Zv(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Pn(o[l],a[l]);if(u!==0)return u}return Pn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Pn(Ti(r.latitude),Ti(i.latitude));return o!==0?o:Pn(Ti(r.longitude),Ti(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ufe(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[wU]?.arrayValue,u=a[wU]?.arrayValue,h=Pn(l?.values?.length||0,u?.values?.length||0);return h!==0?h:Ufe(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===Q2.mapValue&&i===Q2.mapValue)return 0;if(r===Q2.mapValue)return 1;if(i===Q2.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=$K(a[h],u[h]);if(d!==0)return d;const p=xS(o[a[h]],l[u[h]]);if(p!==0)return p}return Pn(a.length,u.length)}(t.mapValue,e.mapValue);default:throw bt(23264,{he:n})}}function Vfe(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pn(t,e);const n=Jv(t),s=Jv(e),r=Pn(n.seconds,s.seconds);return r!==0?r:Pn(n.nanos,s.nanos)}function Ufe(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=xS(n[r],s[r]);if(i)return i}return Pn(n.length,s.length)}function DS(t){return GK(t)}function GK(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=Jv(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Zv(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return lt.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=GK(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${GK(e.fields[i])}`;return s+"}"}(t.mapValue):bt(61005,{value:t})}function T4(t){switch(ew(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=h3(t);return e?16+T4(e):16;case 5:return 2*t.stringValue.length;case 6:return Zv(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+T4(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return gb(n.fields,(r,i)=>{s+=r.length+T4(i)}),s}(t.mapValue);default:throw bt(13486,{value:t})}}function KK(t){return!!t&&"integerValue"in t}function Uee(t){return!!t&&"arrayValue"in t}function qfe(t){return!!t&&"nullValue"in t}function jfe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function C4(t){return!!t&&"mapValue"in t}function Qst(t){return(t?.mapValue?.fields||{})[JAe]?.stringValue===ZAe}function sP(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return gb(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=sP(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sP(t.arrayValue.values[n]);return e}return{...t}}function Yst(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Kst}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let zh=class QK{constructor(e){this.value=e}static empty(){return new QK({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!C4(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sP(n)}setAll(e){let n=Td.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=sP(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());C4(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rp(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];C4(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){gb(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new QK(sP(this.value))}};function ePe(t){const e=[];return gb(t.fields,(n,s)=>{const r=new Td([n]);if(C4(s)){const i=ePe(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Wf(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ya{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ya(e,0,nn.min(),nn.min(),nn.min(),zh.empty(),0)}static newFoundDocument(e,n,s,r){return new Ya(e,1,n,nn.min(),s,r,0)}static newNoDocument(e,n){return new Ya(e,2,n,nn.min(),nn.min(),zh.empty(),0)}static newUnknownDocument(e,n){return new Ya(e,3,n,nn.min(),nn.min(),zh.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(nn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ya&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ya(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bU{constructor(e,n){this.position=e,this.inclusive=n}}function Bfe(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=lt.comparator(lt.fromName(o.referenceValue),n.key):s=xS(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function $fe(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rp(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EU{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xst(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tPe{}class bo extends tPe{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Zst(e,n,s):n==="array-contains"?new nrt(e,s):n==="in"?new srt(e,s):n==="not-in"?new rrt(e,s):n==="array-contains-any"?new irt(e,s):new bo(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ert(e,s):new trt(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xS(n,this.value)):n!==null&&ew(this.value)===ew(n)&&this.matchesComparison(xS(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ap extends tPe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ap(e,n)}matches(e){return nPe(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nPe(t){return t.op==="and"}function sPe(t){return Jst(t)&&nPe(t)}function Jst(t){for(const e of t.filters)if(e instanceof Ap)return!1;return!0}function YK(t){if(t instanceof bo)return t.field.canonicalString()+t.op.toString()+DS(t.value);if(sPe(t))return t.filters.map(e=>YK(e)).join(",");{const e=t.filters.map(n=>YK(n)).join(",");return`${t.op}(${e})`}}function rPe(t,e){return t instanceof bo?function(n,s){return s instanceof bo&&n.op===s.op&&n.field.isEqual(s.field)&&Rp(n.value,s.value)}(t,e):t instanceof Ap?function(n,s){return s instanceof Ap&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&rPe(i,s.filters[o]),!0):!1}(t,e):void bt(19439)}function iPe(t){return t instanceof bo?function(e){return`${e.field.canonicalString()} ${e.op} ${DS(e.value)}`}(t):t instanceof Ap?function(e){return e.op.toString()+" {"+e.getFilters().map(iPe).join(" ,")+"}"}(t):"Filter"}class Zst extends bo{constructor(e,n,s){super(e,n,s),this.key=lt.fromName(s.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class ert extends bo{constructor(e,n){super(e,"in",n),this.keys=oPe("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class trt extends bo{constructor(e,n){super(e,"not-in",n),this.keys=oPe("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oPe(t,e){return(e.arrayValue?.values||[]).map(n=>lt.fromName(n.referenceValue))}class nrt extends bo{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uee(n)&&hx(n.arrayValue,this.value)}}class srt extends bo{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hx(this.value.arrayValue,n)}}class rrt extends bo{constructor(e,n){super(e,"not-in",n)}matches(e){if(hx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hx(this.value.arrayValue,n)}}class irt extends bo{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uee(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>hx(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ort{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function zfe(t,e=null,n=[],s=[],r=null,i=null,o=null){return new ort(t,e,n,s,r,i,o)}function qee(t){const e=Qt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>YK(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),u3(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>DS(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>DS(s)).join(",")),e.Te=n}return e.Te}function jee(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Xst(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rPe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$fe(t.startAt,e.startAt)&&$fe(t.endAt,e.endAt)}function XK(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d3{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function art(t,e,n,s,r,i,o,a){return new d3(t,e,n,s,r,i,o,a)}function f3(t){return new d3(t)}function Hfe(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function crt(t){return t.collectionGroup!==null}function rP(t){const e=Qt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new _c(Td.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new EU(r,s))}),n.has(Td.keyField().canonicalString())||e.Ie.push(new EU(Td.keyField(),s))}return e.Ie}function Xf(t){const e=Qt(t);return e.Ee||(e.Ee=lrt(e,rP(t))),e.Ee}function lrt(t,e){if(t.limitType==="F")return zfe(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new EU(r.field,i)});const n=t.endAt?new bU(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new bU(t.startAt.position,t.startAt.inclusive):null;return zfe(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function JK(t,e,n){return new d3(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function p3(t,e){return jee(Xf(t),Xf(e))&&t.limitType===e.limitType}function aPe(t){return`${qee(Xf(t))}|lt:${t.limitType}`}function j0(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>iPe(s)).join(", ")}]`),u3(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>DS(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>DS(s)).join(",")),`Target(${n})`}(Xf(t))}; limitType=${t.limitType})`}function g3(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):lt.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of rP(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=Bfe(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,rP(n),s)||n.endAt&&!function(r,i,o){const a=Bfe(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,rP(n),s))}(t,e)}function urt(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cPe(t){return(e,n)=>{let s=!1;for(const r of rP(t)){const i=hrt(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function hrt(t,e,n){const s=t.field.isKeyField()?lt.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?xS(a,l):bt(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return bt(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DC{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){gb(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return WAe(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const drt=new zi(lt.comparator);function Wm(){return drt}const lPe=new zi(lt.comparator);function pA(...t){let e=lPe;for(const n of t)e=e.insert(n.key,n);return e}function uPe(t){let e=lPe;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function kE(){return iP()}function hPe(){return iP()}function iP(){return new DC(t=>t.toString(),(t,e)=>t.isEqual(e))}const frt=new zi(lt.comparator),prt=new _c(lt.comparator);function Ln(...t){let e=prt;for(const n of t)e=e.add(n);return e}const grt=new _c(Pn);function mrt(){return grt}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bee(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yU(e)?"-0":e}}function dPe(t){return{integerValue:""+t}}function _rt(t,e){return $st(e)?dPe(e):Bee(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class m3{constructor(){this._=void 0}}function yrt(t,e,n){return t instanceof dx?function(s,r){const i={fields:{[QAe]:{stringValue:KAe},[XAe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Vee(r)&&(r=h3(r)),r&&(i.fields[YAe]=r),{mapValue:i}}(n,e):t instanceof fx?pPe(t,e):t instanceof px?gPe(t,e):function(s,r){const i=fPe(s,r),o=Wfe(i)+Wfe(s.Ae);return KK(i)&&KK(s.Ae)?dPe(o):Bee(s.serializer,o)}(t,e)}function vrt(t,e,n){return t instanceof fx?pPe(t,e):t instanceof px?gPe(t,e):n}function fPe(t,e){return t instanceof TU?function(n){return KK(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class dx extends m3{}class fx extends m3{constructor(e){super(),this.elements=e}}function pPe(t,e){const n=mPe(e);for(const s of t.elements)n.some(r=>Rp(r,s))||n.push(s);return{arrayValue:{values:n}}}class px extends m3{constructor(e){super(),this.elements=e}}function gPe(t,e){let n=mPe(e);for(const s of t.elements)n=n.filter(r=>!Rp(r,s));return{arrayValue:{values:n}}}class TU extends m3{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Wfe(t){return Ti(t.integerValue||t.doubleValue)}function mPe(t){return Uee(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wrt{constructor(e,n){this.field=e,this.transform=n}}function brt(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof fx&&s instanceof fx||n instanceof px&&s instanceof px?NS(n.elements,s.elements,Rp):n instanceof TU&&s instanceof TU?Rp(n.Ae,s.Ae):n instanceof dx&&s instanceof dx}(t.transform,e.transform)}class Ert{constructor(e,n){this.version=e,this.transformResults=n}}class Id{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Id}static exists(e){return new Id(void 0,e)}static updateTime(e){return new Id(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I4(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _3{}function _Pe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $ee(t.key,Id.none()):new TL(t.key,t.data,Id.none());{const n=t.data,s=zh.empty();let r=new _c(Td.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new mb(t.key,s,new Wf(r.toArray()),Id.none())}}function Trt(t,e,n){t instanceof TL?function(s,r,i){const o=s.value.clone(),a=Kfe(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof mb?function(s,r,i){if(!I4(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=Kfe(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(yPe(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function oP(t,e,n,s){return t instanceof TL?function(r,i,o,a){if(!I4(r.precondition,i))return o;const l=r.value.clone(),u=Qfe(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof mb?function(r,i,o,a){if(!I4(r.precondition,i))return o;const l=Qfe(r.fieldTransforms,a,i),u=i.data;return u.setAll(yPe(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return I4(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Crt(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=fPe(s.transform,r||null);i!=null&&(n===null&&(n=zh.empty()),n.set(s.field,i))}return n||null}function Gfe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&NS(n,s,(r,i)=>brt(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class TL extends _3{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mb extends _3{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yPe(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Kfe(t,e,n){const s=new Map;ws(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,vrt(o,a,n[r]))}return s}function Qfe(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,yrt(i,o,e))}return s}class $ee extends _3{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Irt extends _3{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Srt{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Trt(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=oP(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=oP(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=hPe();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=_Pe(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(nn.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ln())}isEqual(e){return this.batchId===e.batchId&&NS(this.mutations,e.mutations,(n,s)=>Gfe(n,s))&&NS(this.baseMutations,e.baseMutations,(n,s)=>Gfe(n,s))}}class zee{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ws(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return frt}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new zee(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class krt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rrt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ai,Qn;function Art(t){switch(t){case we.OK:return bt(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return bt(15467,{code:t})}}function vPe(t){if(t===void 0)return Hm("GRPC error has no .code"),we.UNKNOWN;switch(t){case Ai.OK:return we.OK;case Ai.CANCELLED:return we.CANCELLED;case Ai.UNKNOWN:return we.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return we.INTERNAL;case Ai.UNAVAILABLE:return we.UNAVAILABLE;case Ai.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Ai.NOT_FOUND:return we.NOT_FOUND;case Ai.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Ai.ABORTED:return we.ABORTED;case Ai.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Ai.DATA_LOSS:return we.DATA_LOSS;default:return bt(39323,{code:t})}}(Qn=Ai||(Ai={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Prt(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nrt=new av([4294967295,4294967295],0);function Yfe(t){const e=Prt().encode(t),n=new MAe;return n.update(e),new Uint8Array(n.digest())}function Xfe(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new av([n,s],0),new av([r,i],0)]}class Hee{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new gA(`Invalid padding: ${n}`);if(s<0)throw new gA(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gA(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new gA(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=av.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(av.fromNumber(s)));return r.compare(Nrt)===1&&(r=new av([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Yfe(e),[s,r]=Xfe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hee(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Yfe(e),[s,r]=Xfe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class gA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y3{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,CL.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new y3(nn.min(),r,new zi(Pn),Wm(),Ln())}}class CL{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new CL(s,n,Ln(),Ln(),Ln())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S4{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class wPe{constructor(e,n){this.targetId=e,this.Ce=n}}class bPe{constructor(e,n,s=Ca.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Jfe{constructor(){this.ve=0,this.Fe=Zfe(),this.Me=Ca.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ln(),n=Ln(),s=Ln();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:bt(38017,{changeType:i})}}),new CL(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Zfe()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ws(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xrt{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wm(),this.Je=Y2(),this.He=Y2(),this.Ye=new zi(Pn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:bt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(XK(i))if(s===0){const o=new lt(i.path);this.et(n,o,Ya.newNoDocument(o,nn.min()))}else ws(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Zv(s).toUint8Array()}catch(l){if(l instanceof GAe)return PS("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Hee(o,r,i)}catch(l){return PS(l instanceof gA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&XK(a.target)){const l=new lt(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ya.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Ln();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new y3(e,n,this.Ye,this.je,s);return this.je=Wm(),this.Je=Y2(),this.He=Y2(),this.Ye=new zi(Pn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Jfe,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _c(Pn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _c(Pn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||je("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jfe),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Y2(){return new zi(lt.comparator)}function Zfe(){return new zi(lt.comparator)}const Drt={asc:"ASCENDING",desc:"DESCENDING"},Ort={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lrt={and:"AND",or:"OR"};class Mrt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ZK(t,e){return t.useProto3Json||u3(e)?e:{value:e}}function CU(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EPe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Frt(t,e){return CU(t,e.toTimestamp())}function Jf(t){return ws(!!t,49232),nn.fromTimestamp(function(e){const n=Jv(e);return new ha(n.seconds,n.nanos)}(t))}function Wee(t,e){return eQ(t,e).canonicalString()}function eQ(t,e){const n=function(s){return new yo(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TPe(t){const e=yo.fromString(t);return ws(RPe(e),10190,{key:e.toString()}),e}function tQ(t,e){return Wee(t.databaseId,e.path)}function X7(t,e){const n=TPe(e);if(n.get(1)!==t.databaseId.projectId)throw new Xe(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xe(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(IPe(n))}function CPe(t,e){return Wee(t.databaseId,e)}function Vrt(t){const e=TPe(t);return e.length===4?yo.emptyPath():IPe(e)}function nQ(t){return new yo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IPe(t){return ws(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function epe(t,e,n){return{name:tQ(t,e),fields:n.value.mapValue.fields}}function Urt(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:bt(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(ws(u===void 0||typeof u=="string",58123),Ca.fromBase64String(u||"")):(ws(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ca.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?we.UNKNOWN:vPe(l.code);return new Xe(u,l.message||"")}(o);n=new bPe(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=X7(t,s.document.name),i=Jf(s.document.updateTime),o=s.document.createTime?Jf(s.document.createTime):nn.min(),a=new zh({mapValue:{fields:s.document.fields}}),l=Ya.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new S4(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=X7(t,s.document),i=s.readTime?Jf(s.readTime):nn.min(),o=Ya.newNoDocument(r,i),a=s.removedTargetIds||[];n=new S4([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=X7(t,s.document),i=s.removedTargetIds||[];n=new S4([],i,r,null)}else{if(!("filter"in e))return bt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new Rrt(r,i),a=s.targetId;n=new wPe(a,o)}}return n}function qrt(t,e){let n;if(e instanceof TL)n={update:epe(t,e.key,e.value)};else if(e instanceof $ee)n={delete:tQ(t,e.key)};else if(e instanceof mb)n={update:epe(t,e.key,e.data),updateMask:Qrt(e.fieldMask)};else{if(!(e instanceof Irt))return bt(16599,{Vt:e.type});n={verify:tQ(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof dx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof fx)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof px)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof TU)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw bt(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Frt(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:bt(27497)}(t,e.precondition)),n}function jrt(t,e){return t&&t.length>0?(ws(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Jf(s.updateTime):Jf(r);return i.isEqual(nn.min())&&(i=Jf(r)),new Ert(i,s.transformResults||[])}(n,e))):[]}function Brt(t,e){return{documents:[CPe(t,e.path)]}}function $rt(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=CPe(t,r);const i=function(l){if(l.length!==0)return kPe(Ap.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:B0(h.field),direction:Wrt(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ZK(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function zrt(t){let e=Vrt(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ws(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=SPe(h);return d instanceof Ap&&sPe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new EU($0(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,u3(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new bU(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new bU(p,d)}(n.endAt)),art(e,r,o,i,a,"F",l,u)}function Hrt(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SPe(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=$0(e.unaryFilter.field);return bo.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=$0(e.unaryFilter.field);return bo.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$0(e.unaryFilter.field);return bo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=$0(e.unaryFilter.field);return bo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}}(t):t.fieldFilter!==void 0?function(e){return bo.create($0(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ap.create(e.compositeFilter.filters.map(n=>SPe(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return bt(1026)}}(e.compositeFilter.op))}(t):bt(30097,{filter:t})}function Wrt(t){return Drt[t]}function Grt(t){return Ort[t]}function Krt(t){return Lrt[t]}function B0(t){return{fieldPath:t.canonicalString()}}function $0(t){return Td.fromServerFormat(t.fieldPath)}function kPe(t){return t instanceof bo?function(e){if(e.op==="=="){if(jfe(e.value))return{unaryFilter:{field:B0(e.field),op:"IS_NAN"}};if(qfe(e.value))return{unaryFilter:{field:B0(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(jfe(e.value))return{unaryFilter:{field:B0(e.field),op:"IS_NOT_NAN"}};if(qfe(e.value))return{unaryFilter:{field:B0(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:B0(e.field),op:Grt(e.op),value:e.value}}}(t):t instanceof Ap?function(e){const n=e.getFilters().map(s=>kPe(s));return n.length===1?n[0]:{compositeFilter:{op:Krt(e.op),filters:n}}}(t):bt(54877,{filter:t})}function Qrt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RPe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xy{constructor(e,n,s,r,i=nn.min(),o=nn.min(),a=Ca.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xy(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yrt{constructor(e){this.yt=e}}function Xrt(t){const e=zrt({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?JK(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jrt{constructor(){this.Cn=new Zrt}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(Xv.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(Xv.min())}updateCollectionGroup(e,n,s){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class Zrt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new _c(yo.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new _c(yo.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tpe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},APe=41943040;let Sf=class k4{static withCacheSize(e){return new k4(e,k4.DEFAULT_COLLECTION_PERCENTILE,k4.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Sf.DEFAULT_COLLECTION_PERCENTILE=10,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sf.DEFAULT=new Sf(APe,Sf.DEFAULT_COLLECTION_PERCENTILE,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sf.DISABLED=new Sf(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OS{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new OS(0)}static cr(){return new OS(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const npe="LruGarbageCollector",eit=1048576;function spe([t,e],[n,s]){const r=Pn(t,n);return r===0?Pn(e,s):r}class tit{constructor(e){this.Ir=e,this.buffer=new _c(spe),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();spe(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nit{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(npe,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){h1(n)?je(npe,"Ignoring IndexedDB error during garbage collection: ",n):await u1(n)}await this.Vr(3e5)})}}class sit{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(l3.ce);const s=new tit(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(tpe)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tpe):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),U0()<=vn.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function rit(t,e){return new sit(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iit{constructor(){this.changes=new DC(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ya.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oit{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ait{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&oP(s.mutation,r,Wf.empty(),ha.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ln()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ln()){const r=kE();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=pA();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=kE();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ln()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Wm();const o=iP(),a=function(){return iP()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof mb)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),oP(h.mutation,u,h.mutation.getFieldMask(),ha.now())):o.set(u.key,Wf.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new oit(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=iP();let r=new zi((o,a)=>o-a),i=Ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Wf.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Ln()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=hPe();h.forEach(p=>{if(!i.has(p)){const m=_Pe(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Ie.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return lt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):crt(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):Ie.resolve(kE());let a=cx,l=i;return o.next(u=>Ie.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?Ie.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Ln())).next(h=>({batchId:a,changes:uPe(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(s=>{let r=pA();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=pA();return this.indexManager.getCollectionParents(e,i).next(a=>Ie.forEach(a,l=>{const u=function(h,d){return new d3(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ya.newInvalidDocument(h)))});let a=pA();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&oP(h.mutation,u,Wf.empty(),ha.now()),g3(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cit{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jf(s.createTime)}}(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Xrt(s.bundledQuery),readTime:Jf(s.readTime)}}(n)),Ie.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lit{constructor(){this.overlays=new zi(lt.comparator),this.qr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=kE();return Ie.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),Ie.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),Ie.resolve()}getOverlaysForCollection(e,n,s){const r=kE(),i=n.length+1,o=new lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return Ie.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new zi((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=kE(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=kE(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return Ie.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new krt(n,s));let i=this.qr.get(n);i===void 0&&(i=Ln(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uit{constructor(){this.sessionToken=Ca.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gee{constructor(){this.Qr=new _c(Yo.$r),this.Ur=new _c(Yo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Yo(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Yo(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new lt(new yo([])),s=new Yo(n,e),r=new Yo(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new lt(new yo([])),s=new Yo(n,e),r=new Yo(n,e+1);let i=Ln();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Yo(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}let Yo=class{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return lt.comparator(t.key,e.key)||Pn(t.Yr,e.Yr)}static Kr(t,e){return Pn(t.Yr,e.Yr)||lt.comparator(t.key,e.key)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hit{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _c(Yo.$r)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Srt(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Yo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,n){return Ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?Fee:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Yo(n,0),r=new Yo(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new _c(Pn);return n.forEach(r=>{const i=new Yo(r,0),o=new Yo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),Ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;lt.isDocumentKey(i)||(i=i.child(""));const o=new Yo(new lt(i),0);let a=new _c(Pn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),Ie.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ws(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ie.forEach(n.mutations,r=>{const i=new Yo(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Yo(n,0),r=this.Zr.firstAfterOrEqual(s);return Ie.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dit{constructor(e){this.ri=e,this.docs=function(){return new zi(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Ie.resolve(s?s.document.mutableCopy():Ya.newInvalidDocument(n))}getEntries(e,n){let s=Wm();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ya.newInvalidDocument(r))}),Ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Wm();const o=n.path,a=new lt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Ust(Vst(h),s)<=0||(r.has(h.key)||g3(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,n,s,r){bt(9500)}ii(e,n){return Ie.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new fit(this)}getSize(e){return Ie.resolve(this.size)}}class fit extends iit{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),Ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pit{constructor(e){this.persistence=e,this.si=new DC(n=>qee(n),jee),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.oi=0,this._i=new Gee,this.targetCount=0,this.ai=OS.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new OS(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.Pr(n),Ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ie.waitFor(i).next(()=>r)}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return Ie.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),Ie.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return Ie.resolve(s)}containsKey(e,n){return Ie.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PPe{constructor(e,n){this.ui={},this.overlays={},this.ci=new l3(0),this.li=!1,this.li=!0,this.hi=new uit,this.referenceDelegate=e(this),this.Pi=new pit(this),this.indexManager=new Jrt,this.remoteDocumentCache=function(s){return new dit(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Yrt(n),this.Ii=new cit(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lit,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new hit(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){je("MemoryPersistence","Starting transaction:",e);const r=new git(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return Ie.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class git extends jst{constructor(e){super(),this.currentSequenceNumber=e}}class Kee{constructor(e){this.persistence=e,this.Ri=new Gee,this.Vi=null}static mi(e){return new Kee(e)}get fi(){if(this.Vi)return this.Vi;throw bt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,s=>{const r=lt.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,nn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class IU{constructor(e,n){this.persistence=e,this.pi=new DC(s=>zst(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=rit(this,n)}static mi(e,n){return new IU(e,n)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return Ie.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?Ie.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,nn.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=T4(e.data.value)),n}br(e,n,s){return Ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Ie.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qee{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ln(),r=Ln();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Qee(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mit{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _it{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return met()?8:Bst(yc())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mit;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(U0()<=vn.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",j0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(U0()<=vn.DEBUG&&je("QueryEngine","Query:",j0(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(U0()<=vn.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",j0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xf(n))):Ie.resolve())}ys(e,n){if(Hfe(n))return Ie.resolve(null);let s=Xf(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=JK(n,null,"F"),s=Xf(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ln(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,JK(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return Hfe(n)||r.isEqual(nn.min())?Ie.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?Ie.resolve(null):(U0()<=vn.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),j0(n)),this.vs(e,o,n,Fst(r,cx)).next(a=>a))})}Ds(e,n){let s=new _c(cPe(e));return n.forEach((r,i)=>{g3(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return U0()<=vn.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",j0(n)),this.ps.getDocumentsMatchingQuery(e,n,Xv.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yee="LocalStore",yit=3e8;class vit{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new zi(Pn),this.xs=new DC(i=>qee(i),jee),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ait(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function wit(t,e,n,s){return new vit(t,e,n,s)}async function NPe(t,e){const n=Qt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Ln();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function bit(t,e){const n=Qt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=Ie.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const R=l.docVersions.get(m);ws(R!==null,48541),w.version.compareTo(R)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Ln();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function xPe(t){const e=Qt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Eit(t,e){const n=Qt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ca.EMPTY_BYTE_STRING,nn.min()).withLastLimboFreeSnapshotVersion(nn.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,R,P){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=yit?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=Wm(),u=Ln();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Tit(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(nn.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return Ie.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function Tit(t,e,n){let s=Ln(),r=Ln();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Wm();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(nn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):je(Yee,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function Cit(t,e){const n=Qt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Fee),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Iit(t,e){const n=Qt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,Ie.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Xy(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function sQ(t,e,n){const s=Qt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!h1(o))throw o;je(Yee,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function rpe(t,e,n){const s=Qt(t);let r=nn.min(),i=Ln();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=Qt(a),d=h.xs.get(u);return d!==void 0?Ie.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,Xf(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:nn.min(),n?i:Ln())).next(a=>(Sit(s,urt(e),a),{documents:a,Qs:i})))}function Sit(t,e,n){let s=t.Os.get(e)||nn.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class ipe{constructor(){this.activeTargetIds=mrt()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kit{constructor(){this.Mo=new ipe,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ipe,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rit{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ope="ConnectivityMonitor";class ape{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(ope,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(ope,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let X2=null;function rQ(){return X2===null?X2=function(){return 268435456+Math.round(2147483648*Math.random())}():X2++,"0x"+X2.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J7="RestConnection",Ait={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pit{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===vU?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=rQ(),a=this.zo(e,n.toUriEncodedString());je(J7,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=Jp(u);return this.Jo(e,a,l,s,h).then(d=>(je(J7,`Received RPC '${e}' ${o}: `,d),d),d=>{throw PS(J7,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+l1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=Ait[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nit{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Aa="WebChannelConnection";class xit extends Pit{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=rQ();return new Promise((a,l)=>{const u=new FAe;u.setWithCredentials(!0),u.listenOnce(VAe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case w4.NO_ERROR:const d=u.getResponseJson();je(Aa,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case w4.TIMEOUT:je(Aa,`RPC '${e}' ${o} timed out`),l(new Xe(we.DEADLINE_EXCEEDED,"Request time out"));break;case w4.HTTP_ERROR:const p=u.getStatus();if(je(Aa,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const R=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(O)>=0?O:we.UNKNOWN}(w.status);l(new Xe(R,w.message))}else l(new Xe(we.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Xe(we.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{je(Aa,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);je(Aa,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=rQ(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jAe(),a=qAe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");je(Aa,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new Nit({Yo:P=>{m?je(Aa,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(je(Aa,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),je(Aa,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),R=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return R(d,fA.EventType.OPEN,()=>{m||(je(Aa,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),R(d,fA.EventType.CLOSE,()=>{m||(m=!0,je(Aa,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),R(d,fA.EventType.ERROR,P=>{m||(m=!0,PS(Aa,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Xe(we.UNAVAILABLE,"The operation could not be completed")))}),R(d,fA.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];ws(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){je(Aa,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let W=function(I){const v=Ai[I];if(v!==void 0)return vPe(v)}(q),J=V.message;W===void 0&&(W=we.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Xe(W,J)),d.close()}else je(Aa,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),R(a,UAe.STAT_EVENT,P=>{P.stat===BK.PROXY?je(Aa,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===BK.NOPROXY&&je(Aa,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Z7(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function v3(t){return new Mrt(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DPe{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&je("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cpe="PersistentStream";class OPe{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DPe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(Hm(n.toString()),Hm("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Xe(we.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return je(cpe,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(je(cpe,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dit extends OPe{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Urt(this.serializer,e),s=function(r){if(!("targetChange"in r))return nn.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?nn.min():i.readTime?Jf(i.readTime):nn.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=nQ(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=XK(a)?{documents:Brt(r,a)}:{query:$rt(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=EPe(r,i.resumeToken);const l=ZK(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(nn.min())>0){o.readTime=CU(r,i.snapshotVersion.toTimestamp());const l=ZK(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=Hrt(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=nQ(this.serializer),n.removeTarget=e,this.q_(n)}}class Oit extends OPe{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ws(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ws(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ws(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jrt(e.writeResults,e.commitTime),s=Jf(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=nQ(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>qrt(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lit{}class Mit extends Lit{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xe(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,eQ(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Xe(we.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,eQ(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Xe(we.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Fit{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hm(n),this.aa=!1):je("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OT="RemoteStore";class Vit{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{OC(this)&&(je(OT,"Restarting streams for network reachability change."),await async function(a){const l=Qt(a);l.Ea.add(4),await IL(l),l.Ra.set("Unknown"),l.Ea.delete(4),await w3(l)}(this))})}),this.Ra=new Fit(s,r)}}async function w3(t){if(OC(t))for(const e of t.da)await e(!0)}async function IL(t){for(const e of t.da)await e(!1)}function LPe(t,e){const n=Qt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ete(n)?Zee(n):d1(n).O_()&&Jee(n,e))}function Xee(t,e){const n=Qt(t),s=d1(n);n.Ia.delete(e),s.O_()&&MPe(n,e),n.Ia.size===0&&(s.O_()?s.L_():OC(n)&&n.Ra.set("Unknown"))}function Jee(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}d1(t).Y_(e)}function MPe(t,e){t.Va.Ue(e),d1(t).Z_(e)}function Zee(t){t.Va=new xrt({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),d1(t).start(),t.Ra.ua()}function ete(t){return OC(t)&&!d1(t).x_()&&t.Ia.size>0}function OC(t){return Qt(t).Ea.size===0}function FPe(t){t.Va=void 0}async function Uit(t){t.Ra.set("Online")}async function qit(t){t.Ia.forEach((e,n)=>{Jee(t,e)})}async function jit(t,e){FPe(t),ete(t)?(t.Ra.ha(e),Zee(t)):t.Ra.set("Unknown")}async function Bit(t,e,n){if(t.Ra.set("Online"),e instanceof bPe&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){je(OT,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await SU(t,s)}else if(e instanceof S4?t.Va.Ze(e):e instanceof wPe?t.Va.st(e):t.Va.tt(e),!n.isEqual(nn.min()))try{const s=await xPe(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(Ca.EMPTY_BYTE_STRING,u.snapshotVersion)),MPe(r,a);const h=new Xy(u.target,a,l,u.sequenceNumber);Jee(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){je(OT,"Failed to raise snapshot:",s),await SU(t,s)}}async function SU(t,e,n){if(!h1(e))throw e;t.Ea.add(1),await IL(t),t.Ra.set("Offline"),n||(n=()=>xPe(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{je(OT,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await w3(t)})}function VPe(t,e){return e().catch(n=>SU(t,n,e))}async function b3(t){const e=Qt(t),n=tw(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fee;for(;$it(e);)try{const r=await Cit(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,zit(e,r)}catch(r){await SU(e,r)}UPe(e)&&qPe(e)}function $it(t){return OC(t)&&t.Ta.length<10}function zit(t,e){t.Ta.push(e);const n=tw(t);n.O_()&&n.X_&&n.ea(e.mutations)}function UPe(t){return OC(t)&&!tw(t).x_()&&t.Ta.length>0}function qPe(t){tw(t).start()}async function Hit(t){tw(t).ra()}async function Wit(t){const e=tw(t);for(const n of t.Ta)e.ea(n.mutations)}async function Git(t,e,n){const s=t.Ta.shift(),r=zee.from(s,e,n);await VPe(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await b3(t)}async function Kit(t,e){e&&tw(t).X_&&await async function(n,s){if(function(r){return Art(r)&&r!==we.ABORTED}(s.code)){const r=n.Ta.shift();tw(n).B_(),await VPe(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await b3(n)}}(t,e),UPe(t)&&qPe(t)}async function lpe(t,e){const n=Qt(t);n.asyncQueue.verifyOperationInProgress(),je(OT,"RemoteStore received new credentials");const s=OC(n);n.Ea.add(3),await IL(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await w3(n)}async function Qit(t,e){const n=Qt(t);e?(n.Ea.delete(2),await w3(n)):e||(n.Ea.add(2),await IL(n),n.Ra.set("Unknown"))}function d1(t){return t.ma||(t.ma=function(e,n,s){const r=Qt(e);return r.sa(),new Dit(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Uit.bind(null,t),t_:qit.bind(null,t),r_:jit.bind(null,t),H_:Bit.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ete(t)?Zee(t):t.Ra.set("Unknown")):(await t.ma.stop(),FPe(t))})),t.ma}function tw(t){return t.fa||(t.fa=function(e,n,s){const r=Qt(e);return r.sa(),new Oit(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hit.bind(null,t),r_:Kit.bind(null,t),ta:Wit.bind(null,t),na:Git.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await b3(t)):(await t.fa.stop(),t.Ta.length>0&&(je(OT,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tte{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new cv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new tte(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nte(t,e){if(Hm("AsyncQueue",`${e}: ${t}`),h1(t))return new Xe(we.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AI{static emptySet(e){return new AI(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||lt.comparator(n.key,s.key):(n,s)=>lt.comparator(n.key,s.key),this.keyedMap=pA(),this.sortedSet=new zi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof AI)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new AI;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class upe{constructor(){this.ga=new zi(lt.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):bt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class LS{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new LS(e,n,AI.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p3(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yit{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Xit{constructor(){this.queries=hpe(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Qt(e),r=s.queries;s.queries=hpe(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Xe(we.ABORTED,"Firestore shutting down"))}}function hpe(){return new DC(t=>aPe(t),p3)}async function jPe(t,e){const n=Qt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Yit,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=nte(o,`Initialization of query '${j0(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ste(n)}async function BPe(t,e){const n=Qt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Jit(t,e){const n=Qt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ste(n)}function Zit(t,e,n){const s=Qt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ste(t){t.Ca.forEach(e=>{e.next()})}var iQ,dpe;(dpe=iQ||(iQ={})).Ma="default",dpe.Cache="cache";class $Pe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new LS(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=LS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==iQ.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zPe{constructor(e){this.key=e}}class HPe{constructor(e){this.key=e}}class eot{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ln(),this.mutatedKeys=Ln(),this.eu=cPe(e),this.tu=new AI(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new upe,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=g3(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==R&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Rt:R})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new LS(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new upe,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ln(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new HPe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new zPe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ln();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return LS.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rte="SyncEngine";class tot{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class not{constructor(e){this.key=e,this.hu=!1}}class sot{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new DC(a=>aPe(a),p3),this.Iu=new Map,this.Eu=new Set,this.du=new zi(lt.comparator),this.Au=new Map,this.Ru=new Gee,this.Vu={},this.mu=new Map,this.fu=OS.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rot(t,e,n=!0){const s=XPe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await WPe(s,e,n,!0),r}async function iot(t,e){const n=XPe(t);await WPe(n,e,!0,!1)}async function WPe(t,e,n,s){const r=await Iit(t.localStore,Xf(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await oot(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&LPe(t.remoteStore,r),a}async function oot(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,R,P,O){let M=R.view.ru(P);M.Cs&&(M=await rpe(w.localStore,R.query,!1).then(({documents:J})=>R.view.ru(J,M)));const V=O&&O.targetChanges.get(R.targetId),q=O&&O.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(M,w.isPrimaryClient,V,q);return ppe(w,R.targetId,W.au),W.snapshot}(t,d,p,m);const i=await rpe(t.localStore,e,!0),o=new eot(e,i.Qs),a=o.ru(i.documents),l=CL.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);ppe(t,n,u.au);const h=new tot(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function aot(t,e,n){const s=Qt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!p3(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await sQ(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Xee(s.remoteStore,r.targetId),oQ(s,r.targetId)}).catch(u1)):(oQ(s,r.targetId),await sQ(s.localStore,r.targetId,!0))}async function cot(t,e){const n=Qt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Xee(n.remoteStore,s.targetId))}async function lot(t,e,n){const s=mot(t);try{const r=await function(i,o){const a=Qt(i),l=ha.now(),u=o.reduce((p,m)=>p.add(m.key),Ln());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Wm(),w=Ln();return a.Ns.getEntries(p,u).next(R=>{m=R,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(R=>{h=R;const P=[];for(const O of o){const M=Crt(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new mb(O.key,M,ePe(M.value.mapValue),Id.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(R=>{d=R;const P=R.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,R.batchId,P)})}).then(()=>({batchId:d.batchId,changes:uPe(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new zi(Pn)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await SL(s,r.changes),await b3(s.remoteStore)}catch(r){const i=nte(r,"Failed to persist write");n.reject(i)}}async function GPe(t,e){const n=Qt(t);try{const s=await Eit(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(ws(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?ws(o.hu,14607):r.removedDocuments.size>0&&(ws(o.hu,42227),o.hu=!1))}),await SL(n,s,e)}catch(s){await u1(s)}}function fpe(t,e,n){const s=Qt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Qt(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&ste(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uot(t,e,n){const s=Qt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new zi(lt.comparator);o=o.insert(i,Ya.newNoDocument(i,nn.min()));const a=Ln().add(i),l=new y3(nn.min(),new Map,new zi(Pn),o,a);await GPe(s,l),s.du=s.du.remove(i),s.Au.delete(e),ite(s)}else await sQ(s.localStore,e,!1).then(()=>oQ(s,e,n)).catch(u1)}async function hot(t,e){const n=Qt(t),s=e.batch.batchId;try{const r=await bit(n.localStore,e);QPe(n,s,null),KPe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await SL(n,r)}catch(r){await u1(r)}}async function dot(t,e,n){const s=Qt(t);try{const r=await function(i,o){const a=Qt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(ws(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);QPe(s,e,n),KPe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await SL(s,r)}catch(r){await u1(r)}}function KPe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function QPe(t,e,n){const s=Qt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function oQ(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||YPe(t,s)})}function YPe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Xee(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ite(t))}function ppe(t,e,n){for(const s of n)s instanceof zPe?(t.Ru.addReference(s.key,e),fot(t,s)):s instanceof HPe?(je(rte,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||YPe(t,s.key)):bt(19791,{wu:s})}function fot(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(je(rte,"New document in limbo: "+n),t.Eu.add(s),ite(t))}function ite(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new lt(yo.fromString(e)),s=t.fu.next();t.Au.set(s,new not(n)),t.du=t.du.insert(n,s),LPe(t.remoteStore,new Xy(Xf(f3(n.path)),s,"TargetPurposeLimboResolution",l3.ce))}}async function SL(t,e,n){const s=Qt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Qee.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=Qt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ie.forEach(l,d=>Ie.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>Ie.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!h1(h))throw h;je(Yee,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function pot(t,e){const n=Qt(t);if(!n.currentUser.isEqual(e)){je(rte,"User change. New user:",e.toKey());const s=await NPe(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Xe(we.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await SL(n,s.Ls)}}function got(t,e){const n=Qt(t),s=n.Au.get(e);if(s&&s.hu)return Ln().add(s.key);{let r=Ln();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function XPe(t){const e=Qt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GPe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=got.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uot.bind(null,e),e.Pu.H_=Jit.bind(null,e.eventManager),e.Pu.yu=Zit.bind(null,e.eventManager),e}function mot(t){const e=Qt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hot.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dot.bind(null,e),e}class kU{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=v3(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wit(this.persistence,new _it,e.initialUser,this.serializer)}Cu(e){return new PPe(Kee.mi,this.serializer)}Du(e){return new kit}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kU.provider={build:()=>new kU};class _ot extends kU{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ws(this.persistence.referenceDelegate instanceof IU,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new nit(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Sf.withCacheSize(this.cacheSizeBytes):Sf.DEFAULT;return new PPe(s=>IU.mi(s,n),this.serializer)}}class aQ{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>fpe(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pot.bind(null,this.syncEngine),await Qit(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xit}()}createDatastore(e){const n=v3(e.databaseInfo.databaseId),s=function(r){return new xit(r)}(e.databaseInfo);return function(r,i,o,a){return new Mit(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new Vit(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>fpe(this.syncEngine,n,0),function(){return ape.v()?new ape:new Rit}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new sot(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Qt(e);je(OT,"RemoteStore shutting down."),n.Ea.add(5),await IL(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}aQ.provider={build:()=>new aQ};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JPe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hm("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nw="FirestoreClient";class yot{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=za.UNAUTHENTICATED,this.clientId=Lee.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{je(nw,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(je(nw,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=nte(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function eW(t,e){t.asyncQueue.verifyOperationInProgress(),je(nw,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await NPe(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gpe(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vot(t);je(nw,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>lpe(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>lpe(e.remoteStore,r)),t._onlineComponents=e}async function vot(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){je(nw,"Using user provided OfflineComponentProvider");try{await eW(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===we.FAILED_PRECONDITION||s.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;PS("Error using user provided cache. Falling back to memory cache: "+n),await eW(t,new kU)}}else je(nw,"Using default OfflineComponentProvider"),await eW(t,new _ot(void 0));return t._offlineComponents}async function ZPe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(je(nw,"Using user provided OnlineComponentProvider"),await gpe(t,t._uninitializedComponentsProvider._online)):(je(nw,"Using default OnlineComponentProvider"),await gpe(t,new aQ))),t._onlineComponents}function wot(t){return ZPe(t).then(e=>e.syncEngine)}async function cQ(t){const e=await ZPe(t),n=e.eventManager;return n.onListen=rot.bind(null,e.syncEngine),n.onUnlisten=aot.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iot.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cot.bind(null,e.syncEngine),n}function bot(t,e,n={}){const s=new cv;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new JPe({next:d=>{u.Nu(),i.enqueueAndForget(()=>BPe(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new Xe(we.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new Xe(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new $Pe(f3(o.path),u,{includeMetadataChanges:!0,qa:!0});return jPe(r,h)}(await cQ(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eNe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mpe=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tNe="firestore.googleapis.com",_pe=!0;class ype{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tNe,this.ssl=_pe}else this.host=e.host,this.ssl=e.ssl??_pe;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=APe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eit)throw new Xe(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mst("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eNe(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Xe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ote{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ype({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ype(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Ist;switch(n.type){case"firstParty":return new Ast(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xe(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=mpe.get(e);n&&(je("ComponentProvider","Removing Datastore"),mpe.delete(e),n.terminate())}(this),Promise.resolve()}}function Eot(t,e,n,s={}){t=Cd(t,ote);const r=Jp(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(t3(`https://${a}`),n3("Firestore",!0)),i.host!==tNe&&i.host!==a&&PS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Qv(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=za.MOCK_USER;else{u=wee(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Xe(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new za(d)}t._authCredentials=new Sst(new $Ae(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E3{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new E3(this.firestore,e,this._query)}}let al=class mA{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gx(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mA(this.firestore,e,this._key)}toJSON(){return{type:mA._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(EL(n,mA._jsonSchema))return new mA(e,s||null,new lt(yo.fromString(n.referencePath)))}};al._jsonSchemaVersion="firestore/documentReference/1.0",al._jsonSchema={type:Oi("string",al._jsonSchemaVersion),referencePath:Oi("string")};class gx extends E3{constructor(e,n,s){super(e,n,f3(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new al(this.firestore,null,new lt(e))}withConverter(e){return new gx(this.firestore,e,this._path)}}function kL(t,e,...n){if(t=Vs(t),arguments.length===1&&(e=Lee.newId()),Lst("doc","path",e),t instanceof ote){const s=yo.fromString(e,...n);return xfe(s),new al(t,null,new lt(s))}{if(!(t instanceof al||t instanceof gx))throw new Xe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(yo.fromString(e,...n));return xfe(s),new al(t.firestore,t instanceof gx?t.converter:null,new lt(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vpe="AsyncQueue";class wpe{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DPe(this,"async_queue_retry"),this._c=()=>{const s=Z7();s&&je(vpe,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Z7();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Z7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new cv;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!h1(e))throw e;je(vpe,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Hm("INTERNAL UNHANDLED ERROR: ",bpe(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=tte.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&bt(47125,{Pc:bpe(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bpe(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Epe(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class LT extends ote{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new wpe,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wpe(e),this._firestoreClient=void 0,await e}}}function nNe(t,e){const n=typeof t=="object"?t:i3(),s=typeof t=="string"?t:vU,r=iL(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=vee("firestore");i&&Eot(r,...i)}return r}function ate(t){if(t._terminated)throw new Xe(we.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Tot(t),t._firestoreClient}function Tot(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new Gst(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,eNe(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yot(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dh(Ca.fromBase64String(e))}catch(n){throw new Xe(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dh(Ca.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(EL(e,dh._jsonSchema))return dh.fromBase64String(e.bytes)}}dh._jsonSchemaVersion="firestore/bytes/1.0",dh._jsonSchema={type:Oi("string",dh._jsonSchemaVersion),bytes:Oi("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T3{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Xe(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Td(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C3{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Xe(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Xe(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pn(this._lat,e._lat)||Pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Zf._jsonSchemaVersion}}static fromJSON(e){if(EL(e,Zf._jsonSchema))return new Zf(e.latitude,e.longitude)}}Zf._jsonSchemaVersion="firestore/geoPoint/1.0",Zf._jsonSchema={type:Oi("string",Zf._jsonSchemaVersion),latitude:Oi("number"),longitude:Oi("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ep._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(EL(e,ep._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ep(e.vectorValues);throw new Xe(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ep._jsonSchemaVersion="firestore/vectorValue/1.0",ep._jsonSchema={type:Oi("string",ep._jsonSchemaVersion),vectorValues:Oi("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cot=/^__.*__$/;class Iot{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new mb(e,this.data,this.fieldMask,n,this.fieldTransforms):new TL(e,this.data,n,this.fieldTransforms)}}class sNe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new mb(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rNe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{Ac:t})}}class cte{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cte({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return RU(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rNe(this.Ac)&&Cot.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Sot{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||v3(e)}Cc(e,n,s,r=!1){return new cte({Ac:e,methodName:n,Dc:s,path:Td.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iNe(t){const e=t._freezeSettings(),n=v3(t._databaseId);return new Sot(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kot(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);ute("Data must be an object, but it was:",o,s);const a=oNe(s,o);let l,u;if(i.merge)l=new Wf(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=lQ(e,d,n);if(!o.contains(p))throw new Xe(we.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);cNe(h,p)||h.push(p)}l=new Wf(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new Iot(new zh(a),l,u)}class I3 extends C3{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof I3}}class lte extends C3{_toFieldTransform(e){return new wrt(e.path,new dx)}isEqual(e){return e instanceof lte}}function Rot(t,e,n,s){const r=t.Cc(1,e,n);ute("Data must be an object, but it was:",r,s);const i=[],o=zh.empty();gb(s,(l,u)=>{const h=hte(e,l,n);u=Vs(u);const d=r.yc(h);if(u instanceof I3)i.push(h);else{const p=S3(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Wf(i);return new sNe(o,a,r.fieldTransforms)}function Aot(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[lQ(e,s,n)],l=[r];if(i.length%2!=0)throw new Xe(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(lQ(e,i[p])),l.push(i[p+1]);const u=[],h=zh.empty();for(let p=a.length-1;p>=0;--p)if(!cNe(u,a[p])){const m=a[p];let w=l[p];w=Vs(w);const R=o.yc(m);if(w instanceof I3)u.push(m);else{const P=S3(w,R);P!=null&&(u.push(m),h.set(m,P))}}const d=new Wf(u);return new sNe(h,d,o.fieldTransforms)}function S3(t,e){if(aNe(t=Vs(t)))return ute("Unsupported field value:",e,t),oNe(t,e);if(t instanceof C3)return function(n,s){if(!rNe(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=S3(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Vs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _rt(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ha.fromDate(n);return{timestampValue:CU(s.serializer,r)}}if(n instanceof ha){const r=new ha(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:CU(s.serializer,r)}}if(n instanceof Zf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof dh)return{bytesValue:EPe(s.serializer,n._byteString)};if(n instanceof al){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Wee(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ep)return function(r,i){return{mapValue:{fields:{[JAe]:{stringValue:ZAe},[wU]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return Bee(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Mee(n)}`)}(t,e)}function oNe(t,e){const n={};return WAe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gb(t,(s,r)=>{const i=S3(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function aNe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ha||t instanceof Zf||t instanceof dh||t instanceof al||t instanceof C3||t instanceof ep)}function ute(t,e,n){if(!aNe(n)||!zAe(n)){const s=Mee(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function lQ(t,e,n){if((e=Vs(e))instanceof T3)return e._internalPath;if(typeof e=="string")return hte(t,e);throw RU("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pot=new RegExp("[~\\*/\\[\\]]");function hte(t,e,n){if(e.search(Pot)>=0)throw RU(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new T3(...e.split("."))._internalPath}catch{throw RU(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function RU(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Xe(we.INVALID_ARGUMENT,a+t+l)}function cNe(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lNe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new al(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Not(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uNe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Not extends lNe{data(){return super.data()}}function uNe(t,e){return typeof e=="string"?hte(t,e):e instanceof T3?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xot(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Xe(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dot{convertValue(e,n="none"){switch(ew(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ti(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return gb(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[wU].arrayValue?.values?.map(s=>Ti(s.doubleValue));return new ep(n)}convertGeoPoint(e){return new Zf(Ti(e.latitude),Ti(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=h3(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(lx(e));default:return null}}convertTimestamp(e){const n=Jv(e);return new ha(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=yo.fromString(e);ws(RPe(s),9688,{name:e});const r=new ux(s.get(1),s.get(3)),i=new lt(s.popFirst(5));return r.isEqual(n)||Hm(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oot(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class _A{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nT extends lNe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new R4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(uNe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=nT._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}nT._jsonSchemaVersion="firestore/documentSnapshot/1.0",nT._jsonSchema={type:Oi("string",nT._jsonSchemaVersion),bundleSource:Oi("string","DocumentSnapshot"),bundleName:Oi("string"),bundle:Oi("string")};class R4 extends nT{data(e={}){return super.data(e)}}class PI{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new _A(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new R4(this._firestore,this._userDataWriter,s.key,s,new _A(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Xe(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new R4(s._firestore,s._userDataWriter,o.doc.key,o.doc,new _A(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new R4(s._firestore,s._userDataWriter,o.doc.key,o.doc,new _A(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:Lot(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xe(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=PI._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lee.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lot(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MS(t){t=Cd(t,al);const e=Cd(t.firestore,LT);return bot(ate(e),t._key).then(n=>dNe(e,t,n))}PI._jsonSchemaVersion="firestore/querySnapshot/1.0",PI._jsonSchema={type:Oi("string",PI._jsonSchemaVersion),bundleSource:Oi("string","QuerySnapshot"),bundleName:Oi("string"),bundle:Oi("string")};class hNe extends Dot{constructor(e){super(),this.firestore=e}convertBytes(e){return new dh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new al(this.firestore,null,n)}}function FS(t,e,n){t=Cd(t,al);const s=Cd(t.firestore,LT),r=Oot(t.converter,e,n);return dte(s,[kot(iNe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Id.none())])}function k3(t,e,n,...s){t=Cd(t,al);const r=Cd(t.firestore,LT),i=iNe(r);let o;return o=typeof(e=Vs(e))=="string"||e instanceof T3?Aot(i,"updateDoc",t._key,e,n,s):Rot(i,"updateDoc",t._key,e),dte(r,[o.toMutation(t._key,Id.exists(!0))])}function R3(t){return dte(Cd(t.firestore,LT),[new $ee(t._key,Id.none())])}function A3(t,...e){t=Vs(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Epe(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Epe(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof al)o=Cd(t.firestore,LT),a=f3(t._key.path),i={next:l=>{e[s]&&e[s](dNe(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Cd(t,E3);o=Cd(l.firestore,LT),a=l._query;const u=new hNe(o);i={next:h=>{e[s]&&e[s](new PI(o,u,l,h))},error:e[s+1],complete:e[s+2]},xot(t._query)}return function(l,u,h,d){const p=new JPe(d),m=new $Pe(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>jPe(await cQ(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>BPe(await cQ(l),m))}}(ate(o),a,r,i)}function dte(t,e){return function(n,s){const r=new cv;return n.asyncQueue.enqueueAndForget(async()=>lot(await wot(n),s,r)),r.promise}(ate(t),e)}function dNe(t,e,n){const s=n.docs.get(e._key),r=new hNe(t);return new nT(t,r,e._key,s,new _A(n.hasPendingWrites,n.fromCache),e.converter)}function sT(){return new lte("serverTimestamp")}(function(t,e=!0){(function(n){l1=n})(pb),Yv(new Bm("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new LT(new kst(n.getProvider("auth-internal")),new Pst(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Xe(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ux(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),vh(Rfe,Afe,t),vh(Rfe,Afe,"esm2020")})();var Mot="firebase",Fot="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/vh(Mot,Fot,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fNe="firebasestorage.googleapis.com",pNe="storageBucket",Vot=120*1e3,Uot=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Qi=class gNe extends Zp{constructor(e,n,s=0){super(tW(e),`Firebase Storage: ${n} (${tW(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gNe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tW(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var hi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function tW(t){return"storage/"+t}function fte(){const t="An unknown error occurred, please check the error payload for server response.";return new Qi(hi.UNKNOWN,t)}function qot(t){return new Qi(hi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jot(t){return new Qi(hi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bot(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qi(hi.UNAUTHENTICATED,t)}function $ot(){return new Qi(hi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zot(t){return new Qi(hi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Hot(){return new Qi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wot(){return new Qi(hi.CANCELED,"User canceled the upload/download.")}function Got(t){return new Qi(hi.INVALID_URL,"Invalid URL '"+t+"'.")}function Kot(t){return new Qi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Qot(){return new Qi(hi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pNe+"' property when initializing the app?")}function Yot(){return new Qi(hi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xot(){return new Qi(hi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jot(t){return new Qi(hi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uQ(t){return new Qi(hi.INVALID_ARGUMENT,t)}function mNe(){return new Qi(hi.APP_DELETED,"The Firebase app was deleted.")}function Zot(t){return new Qi(hi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aP(t,e){return new Qi(hi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vR(t){throw new Qi(hi.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yc{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Yc.makeFromUrl(e,n)}catch{return new Yc(e,"")}if(s.path==="")return s;throw Kot(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},R=n===fNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${R}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],W=q.regex.exec(e);if(W){const J=W[q.indices.bucket];let I=W[q.indices.path];I||(I=""),s=new Yc(J,I),q.postModify(s);break}}if(s==null)throw Got(e);return s}}class eat{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tat(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(u){p();return}if(P){p(),h.call(null,P,...O);return}if(l()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function R(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function nat(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sat(t){return t!==void 0}function rat(t){return typeof t=="object"&&!Array.isArray(t)}function pte(t){return typeof t=="string"||t instanceof String}function Tpe(t){return gte()&&t instanceof Blob}function gte(){return typeof Blob<"u"}function hQ(t,e,n,s){if(s<e)throw uQ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw uQ(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RL(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function _Ne(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var rT;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rT||(rT={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iat(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oat{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,R)=>{this.resolve_=w,this.reject_=R,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new J2(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===rT.NO_ERROR,l=i.getStatus();if(!a||iat(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===rT.ABORT;s(!1,new J2(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new J2(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());sat(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=fte();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?mNe():Wot();o(l)}else{const l=Hot();o(l)}};this.canceled_?n(!1,new J2(!1,null,!0)):this.backoffId_=tat(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nat(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class J2{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function aat(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cat(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lat(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uat(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hat(t,e,n,s,r,i,o=!0,a=!1){const l=_Ne(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return lat(h,e),aat(h,n),cat(h,i),uat(h,s),new oat(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dat(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fat(...t){const e=dat();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(gte())return new Blob(t);throw new Qi(hi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pat(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gat(t){if(typeof atob>"u")throw Jot("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const td={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nW{constructor(e,n){this.data=e,this.contentType=n||null}}function yNe(t,e){switch(t){case td.RAW:return new nW(vNe(e));case td.BASE64:case td.BASE64URL:return new nW(wNe(t,e));case td.DATA_URL:return new nW(_at(e),yat(e))}throw fte()}function vNe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function mat(t){let e;try{e=decodeURIComponent(t)}catch{throw aP(td.DATA_URL,"Malformed data URL.")}return vNe(e)}function wNe(t,e){switch(t){case td.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw aP(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case td.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw aP(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gat(e)}catch(r){throw r.message.includes("polyfill")?r:aP(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class bNe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw aP(td.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=vat(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function _at(t){const e=new bNe(t);return e.base64?wNe(td.BASE64,e.rest):mat(e.rest)}function yat(t){return new bNe(t).contentType}function vat(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class By{constructor(e,n){let s=0,r="";Tpe(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Tpe(this.data_)){const s=this.data_,r=pat(s,e,n);return r===null?null:new By(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new By(s,!0)}}static getBlob(...e){if(gte()){const n=e.map(s=>s instanceof By?s.data_:s);return new By(fat.apply(null,n))}else{const n=e.map(o=>pte(o)?yNe(td.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new By(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mte(t){let e;try{e=JSON.parse(t)}catch{return null}return rat(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wat(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bat(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function ENe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eat(t,e){return e}class Tc{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||Eat}}let Z2=null;function Tat(t){return!pte(t)||t.length<2?t:ENe(t)}function TNe(){if(Z2)return Z2;const t=[];t.push(new Tc("bucket")),t.push(new Tc("generation")),t.push(new Tc("metageneration")),t.push(new Tc("name","fullPath",!0));function e(i,o){return Tat(o)}const n=new Tc("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new Tc("size");return r.xform=s,t.push(r),t.push(new Tc("timeCreated")),t.push(new Tc("updated")),t.push(new Tc("md5Hash",null,!0)),t.push(new Tc("cacheControl",null,!0)),t.push(new Tc("contentDisposition",null,!0)),t.push(new Tc("contentEncoding",null,!0)),t.push(new Tc("contentLanguage",null,!0)),t.push(new Tc("contentType",null,!0)),t.push(new Tc("metadata","customMetadata",!0)),Z2=t,Z2}function Cat(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Yc(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Iat(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return Cat(s,t),s}function CNe(t,e,n){const s=mte(e);return s===null?null:Iat(t,s,n)}function Sat(t,e,n,s){const r=mte(e);if(r===null||!pte(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=RL(h,n,s),p=_Ne({alt:"media",token:a});return d+p})[0]}function kat(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cpe="prefixes",Ipe="items";function Rat(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Cpe])for(const r of n[Cpe]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Yc(e,i));s.prefixes.push(o)}if(n[Ipe])for(const r of n[Ipe]){const i=t._makeStorageReference(new Yc(e,r.name));s.items.push(i)}return s}function Aat(t,e,n){const s=mte(n);return s===null?null:Rat(t,e,s)}class P3{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _te(t){if(!t)throw fte()}function Pat(t,e){function n(s,r){const i=CNe(t,r,e);return _te(i!==null),i}return n}function Nat(t,e){function n(s,r){const i=Aat(t,e,r);return _te(i!==null),i}return n}function xat(t,e){function n(s,r){const i=CNe(t,r,e);return _te(i!==null),Sat(i,r,t.host,t._protocol)}return n}function yte(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=$ot():r=Bot():n.getStatus()===402?r=jot(t.bucket):n.getStatus()===403?r=zot(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function INe(t){const e=yte(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=qot(t.path)),i.serverResponse=r.serverResponse,i}return n}function Dat(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=RL(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new P3(a,l,Nat(t,e.bucket),u);return h.urlParams=i,h.errorHandler=yte(e),h}function Oat(t,e,n){const s=e.fullServerUrl(),r=RL(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new P3(r,i,xat(t,n),o);return a.errorHandler=INe(e),a}function Lat(t,e){const n=e.fullServerUrl(),s=RL(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new P3(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=INe(e),a}function Mat(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Fat(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Mat(null,e)),s}function Vat(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=Fat(e,s,r),h=kat(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=By.getBlob(d,s,p);if(m===null)throw Yot();const w={name:u.fullPath},R=RL(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new P3(R,P,Pat(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=yte(e),M}class Uat{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rT.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rT.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rT.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw vR("cannot .send() more than once");if(Jp(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qat extends Uat{initXhr(){this.xhr_.responseType="text"}}function N3(){return new qat}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MT{constructor(e,n){this._service=e,n instanceof Yc?this._location=n:this._location=Yc.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new MT(e,n)}get root(){const e=new Yc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ENe(this._location.path)}get storage(){return this._service}get parent(){const e=wat(this._location.path);if(e===null)return null;const n=new Yc(this._location.bucket,e);return new MT(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Zot(e)}}function jat(t,e,n){t._throwIfRoot("uploadBytes");const s=Vat(t.storage,t._location,TNe(),new By(e,!0),n);return t.storage.makeRequestWithTokens(s,N3).then(r=>({metadata:r,ref:t}))}function Bat(t,e,n=td.RAW,s){t._throwIfRoot("uploadString");const r=yNe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),jat(t,r.data,i)}function $at(t){const e={prefixes:[],items:[]};return SNe(t,e).then(()=>e)}async function SNe(t,e,n){const s=await zat(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await SNe(t,e,s.nextPageToken)}function zat(t,e){e!=null&&typeof e.maxResults=="number"&&hQ("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=Dat(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,N3)}function Hat(t){t._throwIfRoot("getDownloadURL");const e=Oat(t.storage,t._location,TNe());return t.storage.makeRequestWithTokens(e,N3).then(n=>{if(n===null)throw Xot();return n})}function Wat(t){t._throwIfRoot("deleteObject");const e=Lat(t.storage,t._location);return t.storage.makeRequestWithTokens(e,N3)}function Gat(t,e){const n=bat(t._location.path,e),s=new Yc(t._location.bucket,n);return new MT(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kat(t){return/^[A-Za-z]+:\/\//.test(t)}function Qat(t,e){return new MT(t,e)}function kNe(t,e){if(t instanceof vte){const n=t;if(n._bucket==null)throw Qot();const s=new MT(n,n._bucket);return e!=null?kNe(s,e):s}else return e!==void 0?Gat(t,e):t}function Yat(t,e){if(e&&Kat(e)){if(t instanceof vte)return Qat(t,e);throw uQ("To use ref(service, url), the first argument must be a Storage instance.")}else return kNe(t,e)}function Spe(t,e){const n=e?.[pNe];return n==null?null:Yc.makeFromBucketSpec(n,t)}function Xat(t,e,n,s={}){t.host=`${e}:${n}`;const r=Jp(e);r&&(t3(`https://${t.host}/b`),n3("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:wee(i,t.app.options.projectId))}class vte{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=fNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vot,this._maxUploadRetryTime=Uot,this._requests=new Set,r!=null?this._bucket=Yc.makeFromBucketSpec(r,this._host):this._bucket=Spe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yc.makeFromBucketSpec(this._url,e):this._bucket=Spe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hQ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hQ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Au(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new MT(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new eat(mNe());{const o=hat(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const kpe="@firebase/storage",Rpe="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const RNe="storage";function x3(t,e,n,s){return t=Vs(t),Bat(t,e,n,s)}function D3(t){return t=Vs(t),$at(t)}function O3(t){return t=Vs(t),Hat(t)}function L3(t){return t=Vs(t),Wat(t)}function M3(t,e){return t=Vs(t),Yat(t,e)}function Jat(t=i3(),e){t=Vs(t);const n=iL(t,RNe).getImmediate({identifier:e}),s=vee("storage");return s&&Zat(n,...s),n}function Zat(t,e,n,s={}){Xat(t,e,n,s)}function ect(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new vte(n,s,r,e,pb)}function tct(){Yv(new Bm(RNe,ect,"PUBLIC").setMultipleInstances(!0)),vh(kpe,Rpe,""),vh(kpe,Rpe,"esm2020")}tct();var Ape={};const Ppe="@firebase/database",Npe="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ANe="";function nct(t){ANe=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sct{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wo(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ix(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rct{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return D_(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PNe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sct(e)}}catch{}return new rct},RE=PNe("localStorage"),ict=PNe("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NI=new r3("@firebase/database"),oct=function(){let t=1;return function(){return t++}}(),NNe=function(t){const e=Aet(t),n=new Cet;n.update(e);const s=n.digest();return yee.encodeByteArray(s)},AL=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=AL.apply(null,s):typeof s=="object"?e+=wo(s):e+=s,e+=" "}return e};let cP=null,xpe=!0;const act=function(t,e){Ae(!0,"Can't turn on custom loggers persistently."),NI.logLevel=vn.VERBOSE,cP=NI.log.bind(NI)},Xa=function(...t){if(xpe===!0&&(xpe=!1,cP===null&&ict.get("logging_enabled")===!0&&act()),cP){const e=AL.apply(null,t);cP(e)}},PL=function(t){return function(...e){Xa(t,...e)}},dQ=function(...t){const e="FIREBASE INTERNAL ERROR: "+AL(...t);NI.error(e)},Gm=function(...t){const e=`FIREBASE FATAL ERROR: ${AL(...t)}`;throw NI.error(e),new Error(e)},gu=function(...t){const e="FIREBASE WARNING: "+AL(...t);NI.warn(e)},cct=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xNe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},lct=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},VS="[MIN_NAME]",FT="[MAX_NAME]",f1=function(t,e){if(t===e)return 0;if(t===VS||e===FT)return-1;if(e===VS||t===FT)return 1;{const n=Dpe(t),s=Dpe(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},uct=function(t,e){return t===e?0:t<e?-1:1},wR=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wo(e))},wte=function(t){if(typeof t!="object"||t===null)return wo(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=wo(e[s]),n+=":",n+=wte(t[e[s]]);return n+="}",n},DNe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function bu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ONe=function(t){Ae(!xNe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},hct=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dct=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function fct(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const pct=new RegExp("^-?(0*)\\d{1,10}$"),gct=-2147483648,mct=2147483647,Dpe=function(t){if(pct.test(t)){const e=Number(t);if(e>=gct&&e<=mct)return e}return null},p1=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gu("Exception was thrown by user callback.",n),e},Math.floor(0))}},_ct=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lP=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yct{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Au(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){gu(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vct{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xa("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gu(e)}}class A4{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}A4.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bte="5",LNe="v",MNe="s",FNe="r",VNe="f",UNe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qNe="ls",jNe="p",fQ="ac",BNe="websocket",$Ne="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zNe{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=RE.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&RE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function wct(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function HNe(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let s;if(e===BNe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$Ne)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wct(t)&&(n.ns=t.namespace);const r=[];return bu(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bct{constructor(){this.counters_={}}incrementCounter(e,n=1){D_(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return net(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sW={},rW={};function Ete(t){const e=t.toString();return sW[e]||(sW[e]=new bct),sW[e]}function Ect(t,e){const n=t.toString();return rW[n]||(rW[n]=e()),rW[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tct{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&p1(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ope="start",Cct="close",Ict="pLPCommand",Sct="pRTLPCB",WNe="id",GNe="pw",KNe="ser",kct="cb",Rct="seg",Act="ts",Pct="d",Nct="dframe",QNe=1870,YNe=30,xct=QNe-YNe,Dct=25e3,Oct=3e4;class _I{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=PL(e),this.stats_=Ete(n),this.urlFn=l=>(this.appCheckToken&&(l[fQ]=this.appCheckToken),HNe(n,$Ne,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Tct(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Oct)),lct(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tte((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ope)this.id=a,this.password=l;else if(o===Cct)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Ope]="t",s[KNe]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[kct]=this.scriptTagHolder.uniqueCallbackIdentifier),s[LNe]=bte,this.transportSessionId&&(s[MNe]=this.transportSessionId),this.lastSessionId&&(s[qNe]=this.lastSessionId),this.applicationId&&(s[jNe]=this.applicationId),this.appCheckToken&&(s[fQ]=this.appCheckToken),typeof location<"u"&&location.hostname&&UNe.test(location.hostname)&&(s[FNe]=VNe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_I.forceAllow_=!0}static forceDisallow(){_I.forceDisallow_=!0}static isAvailable(){return _I.forceAllow_?!0:!_I.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hct()&&!dct()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wo(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=YRe(n),r=DNe(s,xct);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[Nct]="t",s[WNe]=e,s[GNe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wo(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Tte{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=oct(),window[Ict+this.uniqueCallbackIdentifier]=e,window[Sct+this.uniqueCallbackIdentifier]=n,this.myIFrame=Tte.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xa("frame writing exception"),a.stack&&Xa(a.stack),Xa(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xa("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WNe]=this.myID,e[GNe]=this.myPW,e[KNe]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+YNe+s.length<=QNe;){const i=this.pendingSegs.shift();s=s+"&"+Rct+r+"="+i.seg+"&"+Act+r+"="+i.ts+"&"+Pct+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(Dct)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Xa("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lct=16384,Mct=45e3;let AU=null;typeof MozWebSocket<"u"?AU=MozWebSocket:typeof WebSocket<"u"&&(AU=WebSocket);class Hh{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=PL(this.connId),this.stats_=Ete(n),this.connURL=Hh.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[LNe]=bte,typeof location<"u"&&location.hostname&&UNe.test(location.hostname)&&(o[FNe]=VNe),n&&(o[MNe]=n),s&&(o[qNe]=s),r&&(o[fQ]=r),i&&(o[jNe]=i),HNe(e,BNe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,RE.set("previous_websocket_failure",!0);try{let s;get(),this.mySock=new AU(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Hh.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&AU!==null&&!Hh.forceDisallow_}static previouslyFailed(){return RE.isInMemoryStorage||RE.get("previous_websocket_failure")===!0}markConnectionHealthy(){RE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=ix(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=wo(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=DNe(n,Lct);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Mct))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hh.responsesRequiredToBeHealthy=2;Hh.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mx{static get ALL_TRANSPORTS(){return[_I,Hh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Hh&&Hh.isAvailable();let s=n&&!Hh.previouslyFailed();if(e.webSocketOnly&&(n||gu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Hh];else{const r=this.transports_=[];for(const i of mx.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);mx.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}mx.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fct=6e4,Vct=5e3,Uct=10*1024,qct=100*1024,iW="t",Lpe="d",jct="s",Mpe="r",Bct="e",Fpe="o",Vpe="a",Upe="n",qpe="p",$ct="h";class zct{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=PL("c:"+this.id+":"),this.transportManager_=new mx(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=lP(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>qct?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Uct?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(iW in e){const n=e[iW];n===Vpe?this.upgradeIfSecondaryHealthy_():n===Mpe?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fpe&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=wR("t",e),s=wR("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:qpe,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vpe,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Upe,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=wR("t",e),s=wR("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=wR(iW,e);if(Lpe in e){const s=e[Lpe];if(n===$ct){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Upe){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jct?this.onConnectionShutdown_(s):n===Mpe?this.onReset_(s):n===Bct?dQ("Server Error: "+s):n===Fpe?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dQ("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),bte!==s&&gu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),lP(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Fct))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lP(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vct))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:qpe,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(RE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XNe{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JNe{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PU extends JNe{static getInstance(){return new PU}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bee()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jpe=32,Bpe=768;let Ks=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function is(){return new Ks("")}function dn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function sw(t){return t.pieces_.length-t.pieceNum_}function ir(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ks(t.pieces_,e)}function ZNe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Hct(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function exe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function txe(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ks(e,0)}function Eo(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Ks)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Ks(n,0)}function Cn(t){return t.pieceNum_>=t.pieces_.length}function Xc(t,e){const n=dn(t),s=dn(e);if(n===null)return e;if(n===s)return Xc(ir(t),ir(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Cte(t,e){if(sw(t)!==sw(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function nd(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(sw(t)>sw(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class Wct{constructor(e,n){this.errorPrefix_=n,this.parts_=exe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=s3(this.parts_[s]);nxe(this)}}function Gct(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=s3(e),nxe(t)}function Kct(t){const e=t.parts_.pop();t.byteLength_-=s3(e),t.parts_.length>0&&(t.byteLength_-=1)}function nxe(t){if(t.byteLength_>Bpe)throw new Error(t.errorPrefix_+"has a key path longer than "+Bpe+" bytes ("+t.byteLength_+").");if(t.parts_.length>jpe)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jpe+") or object contains a cycle "+oE(t))}function oE(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ite extends JNe{static getInstance(){return new Ite}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bR=1e3,Qct=300*1e3,$pe=30*1e3,Yct=1.3,Xct=3e4,Jct="server_kill",zpe=3;class Nm extends XNe{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Nm.nextPersistentConnectionId_++,this.log_=PL("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bR,this.maxReconnectDelay_=Qct,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ite.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&PU.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(wo(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new e3,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Nm.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&D_(e,"w")){const s=kS(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();gu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Tet(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$pe)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Eet(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wo(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):dQ("Unrecognized action received from server: "+wo(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Xct&&(this.reconnectDelay_=bR),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Yct)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Nm.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Xa("getToken() completed but was canceled"):(Xa("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new zct(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{gu(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jct)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&gu(d),l())}}}interrupt(e){Xa("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xa("Resuming connection for reason: "+e),delete this.interruptReasons_[e],DK(this.interruptReasons_)&&(this.reconnectDelay_=bR,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>wte(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Ks(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Xa("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zpe&&(this.reconnectDelay_=$pe,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xa("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zpe&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ANe.replace(/\./g,"-")]=1,bee()?e["framework.cordova"]=1:tAe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=PU.getInstance().currentlyOnline();return DK(this.interruptReasons_)&&e}}Nm.nextPersistentConnectionId_=0;Nm.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Mn=class sxe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new sxe(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F3{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Mn(VS,e),r=new Mn(VS,n);return this.compare(s,r)!==0}minPost(){return Mn.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let eF;class rxe extends F3{static get __EMPTY_NODE(){return eF}static set __EMPTY_NODE(e){eF=e}compare(e,n){return f1(e.name,n.name)}isDefinedOn(e){throw r1("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Mn.MIN}maxPost(){return new Mn(FT,eF)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Mn(e,eF)}toString(){return".key"}}const xI=new rxe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tF{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ku=class yA{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??yA.RED,this.left=r??Gf.EMPTY_NODE,this.right=i??Gf.EMPTY_NODE}copy(e,n,s,r,i){return new yA(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gf.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Gf.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yA.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yA.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ku.RED=!0;ku.BLACK=!1;class Zct{copy(e,n,s,r,i){return this}insert(e,n,s){return new ku(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Gf=class P4{constructor(e,n=P4.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new P4(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ku.BLACK,null,null))}remove(e){return new P4(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ku.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tF(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tF(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tF(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tF(this.root_,null,this.comparator_,!0,e)}};Gf.EMPTY_NODE=new Zct;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function elt(t,e){return f1(t.name,e.name)}function Ste(t,e){return f1(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let pQ;function tlt(t){pQ=t}const ixe=function(t){return typeof t=="number"?"number:"+ONe(t):"string:"+t},oxe=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&D_(e,".sv"),"Priority must be a string or number.")}else Ae(t===pQ||t.isEmpty(),"priority of unexpected type.");Ae(t===pQ||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Hpe,VT=class Fh{static set __childrenNodeConstructor(e){Hpe=e}static get __childrenNodeConstructor(){return Hpe}constructor(e,n=Fh.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oxe(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Fh(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Fh.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Cn(e)?this:dn(e)===".priority"?this.priorityNode_:Fh.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Fh.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=dn(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Ae(s!==".priority"||sw(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Fh.__childrenNodeConstructor.EMPTY_NODE.updateChild(ir(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ixe(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ONe(this.value_):e+=this.value_,this.lazyHash_=NNe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Fh.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Fh.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Fh.VALUE_TYPE_ORDER.indexOf(n),i=Fh.VALUE_TYPE_ORDER.indexOf(s);return Ae(r>=0,"Unknown leaf type: "+n),Ae(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}};VT.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let axe,cxe;function nlt(t){axe=t}function slt(t){cxe=t}class rlt extends F3{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?f1(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Mn.MIN}maxPost(){return new Mn(FT,new VT("[PRIORITY-POST]",cxe))}makePost(e,n){const s=axe(e);return new Mn(n,new VT("[PRIORITY-POST]",s))}toString(){return".priority"}}const ii=new rlt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ilt=Math.log(2);class olt{constructor(e){const n=i=>parseInt(Math.log(i)/ilt,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const NU=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new ku(p,d.node,ku.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),R=r(m+1,u);return d=t[m],p=n?n(d):d,new ku(p,d.node,ku.BLACK,w,R)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,R){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new ku(q,V.node,R,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?p(P,ku.BLACK):(p(P,ku.BLACK),p(P,ku.RED))}return h},o=new olt(t.length),a=i(o);return new Gf(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let oW;const a0={};class mm{static get Default(){return Ae(a0&&ii,"ChildrenNode.ts has not been loaded"),oW=oW||new mm({".priority":a0},{".priority":ii}),oW}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=kS(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gf?n:null}hasIndex(e){return D_(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==xI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Mn.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=NU(s,e.getCompare()):a=a0;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new mm(h,u)}addToIndexes(e,n){const s=uU(this.indexes_,(r,i)=>{const o=kS(this.indexSet_,i);if(Ae(o,"Missing index implementation for "+i),r===a0)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Mn.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),NU(a,o.getCompare())}else return a0;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Mn(e.name,a))),l.insert(e,e.node)}});return new mm(s,this.indexSet_)}removeFromIndexes(e,n){const s=uU(this.indexes_,r=>{if(r===a0)return r;{const i=n.get(e.name);return i?r.remove(new Mn(e.name,i)):r}});return new mm(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ER;class yt{static get EMPTY_NODE(){return ER||(ER=new yt(new Gf(Ste),null,mm.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&oxe(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ER}updatePriority(e){return this.children_.isEmpty()?this:new yt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ER:n}}getChild(e){const n=dn(e);return n===null?this:this.getImmediateChild(n).getChild(ir(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Mn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?ER:this.priorityNode_;return new yt(r,o,i)}}updateChild(e,n){const s=dn(e);if(s===null)return n;{Ae(dn(e)!==".priority"||sw(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(ir(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(ii,(o,a)=>{n[o]=a.val(e),s++,i&&yt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ixe(this.getPriority().val())+":"),this.forEachChild(ii,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":NNe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Mn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Mn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Mn(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Mn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Mn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===NL?-1:0}withIndex(e){if(e===xI||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new yt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===xI||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(ii),r=n.getIterator(ii);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===xI?null:this.indexMap_.get(e.toString())}}yt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class alt extends yt{constructor(){super(new Gf(Ste),yt.EMPTY_NODE,mm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}}const NL=new alt;Object.defineProperties(Mn,{MIN:{value:new Mn(VS,yt.EMPTY_NODE)},MAX:{value:new Mn(FT,NL)}});rxe.__EMPTY_NODE=yt.EMPTY_NODE;VT.__childrenNodeConstructor=yt;tlt(NL);slt(NL);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const clt=!0;function ia(t,e=null){if(t===null)return yt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new VT(n,ia(e))}if(!(t instanceof Array)&&clt){const n=[];let s=!1;if(bu(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=ia(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new Mn(i,a)))}}),n.length===0)return yt.EMPTY_NODE;const r=NU(n,elt,i=>i.name,Ste);if(s){const i=NU(n,ii.getCompare());return new yt(r,ia(e),new mm({".priority":i},{".priority":ii}))}else return new yt(r,ia(e),mm.Default)}else{let n=yt.EMPTY_NODE;return bu(t,(s,r)=>{if(D_(t,s)&&s.substring(0,1)!=="."){const i=ia(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(ia(e))}}nlt(ia);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class llt extends F3{constructor(e){super(),this.indexPath_=e,Ae(!Cn(e)&&dn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?f1(e.name,n.name):i}makePost(e,n){const s=ia(e),r=yt.EMPTY_NODE.updateChild(this.indexPath_,s);return new Mn(n,r)}maxPost(){const e=yt.EMPTY_NODE.updateChild(this.indexPath_,NL);return new Mn(FT,e)}toString(){return exe(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ult extends F3{compare(e,n){const s=e.node.compareTo(n.node);return s===0?f1(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Mn.MIN}maxPost(){return Mn.MAX}makePost(e,n){const s=ia(e);return new Mn(n,s)}toString(){return".value"}}const hlt=new ult;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lxe(t){return{type:"value",snapshotNode:t}}function US(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function _x(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function dlt(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kte{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(_x(n,a)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(US(n,s)):o.trackChildChange(yx(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(ii,(r,i)=>{n.hasChild(r)||s.trackChildChange(_x(r,i))}),n.isLeafNode()||n.forEachChild(ii,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(yx(r,i,o))}else s.trackChildChange(US(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?yt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vx{constructor(e){this.indexedFilter_=new kte(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vx.getStartPost_(e),this.endPost_=vx.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Mn(n,s))||(s=yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=yt.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(yt.EMPTY_NODE);const i=this;return n.forEachChild(ii,(o,a)=>{i.matches(new Mn(o,a))||(r=r.updateImmediateChild(o,yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class flt{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new vx(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Mn(n,s))||(s=yt.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=yt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=yt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(yt.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Ae(a.numChildren()===this.limit_,"");const l=new Mn(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(yx(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(_x(n,d));const w=a.updateImmediateChild(n,yt.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(US(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(_x(u.name,u.node)),i.trackChildChange(US(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,yt.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rte{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ii}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:VS}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:FT}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ii}copy(){const e=new Rte;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function plt(t){return t.loadsAllData()?new kte(t.getIndex()):t.hasLimit()?new flt(t):new vx(t)}function Wpe(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ii?n="$priority":t.index_===hlt?n="$value":t.index_===xI?n="$key":(Ae(t.index_ instanceof llt,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wo(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=wo(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+wo(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=wo(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+wo(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Gpe(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ii&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xU extends XNe{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=PL("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=xU.getListenId_(e,s),a={};this.listens_[o]=a;const l=Wpe(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),kS(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=xU.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Wpe(e._queryParams),s=e._path.toString(),r=new e3;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+i1(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ix(a.responseText)}catch{gu("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&gu("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class glt{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DU(){return{value:null,children:new Map}}function uxe(t,e,n){if(Cn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=dn(e);t.children.has(s)||t.children.set(s,DU());const r=t.children.get(s);e=ir(e),uxe(r,e,n)}}function gQ(t,e,n){t.value!==null?n(e,t.value):mlt(t,(s,r)=>{const i=new Ks(e.toString()+"/"+s);gQ(r,i,n)})}function mlt(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _lt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&bu(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kpe=10*1e3,ylt=30*1e3,vlt=300*1e3;class wlt{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new _lt(e);const s=Kpe+(ylt-Kpe)*Math.random();lP(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;bu(e,(r,i)=>{i>0&&D_(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),lP(this.reportStats_.bind(this),Math.floor(Math.random()*2*vlt))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sd;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sd||(sd={}));function hxe(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ate(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pte(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OU{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=sd.ACK_USER_WRITE,this.source=hxe()}operationForChild(e){if(Cn(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ks(e));return new OU(is(),n,this.revert)}}else return Ae(dn(this.path)===e,"operationForChild called for unrelated child."),new OU(ir(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wx{constructor(e,n){this.source=e,this.path=n,this.type=sd.LISTEN_COMPLETE}operationForChild(e){return Cn(this.path)?new wx(this.source,is()):new wx(this.source,ir(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UT{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=sd.OVERWRITE}operationForChild(e){return Cn(this.path)?new UT(this.source,is(),this.snap.getImmediateChild(e)):new UT(this.source,ir(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bx{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=sd.MERGE}operationForChild(e){if(Cn(this.path)){const n=this.children.subtree(new Ks(e));return n.isEmpty()?null:n.value?new UT(this.source,is(),n.value):new bx(this.source,is(),n)}else return Ae(dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new bx(this.source,ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rw{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Cn(e))return this.isFullyInitialized()&&!this.filtered_;const n=dn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class blt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Elt(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(dlt(o.childName,o.snapshotNode))}),TR(t,r,"child_removed",e,s,n),TR(t,r,"child_added",e,s,n),TR(t,r,"child_moved",i,s,n),TR(t,r,"child_changed",e,s,n),TR(t,r,"value",e,s,n),r}function TR(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>Clt(t,a,l)),o.forEach(a=>{const l=Tlt(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Tlt(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Clt(t,e,n){if(e.childName==null||n.childName==null)throw r1("Should only compare child_ events.");const s=new Mn(e.childName,e.snapshotNode),r=new Mn(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function V3(t,e){return{eventCache:t,serverCache:e}}function uP(t,e,n,s){return V3(new rw(e,n,s),t.serverCache)}function dxe(t,e,n,s){return V3(t.eventCache,new rw(e,n,s))}function LU(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qT(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let aW;const Ilt=()=>(aW||(aW=new Gf(uct)),aW);let xh=class Su{static fromObject(e){let n=new Su(null);return bu(e,(s,r)=>{n=n.set(new Ks(s),r)}),n}constructor(e,n=Ilt()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:is(),value:this.value};if(Cn(e))return null;{const s=dn(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(ir(e),n);return i!=null?{path:Eo(new Ks(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Cn(e))return this;{const n=dn(e),s=this.children.get(n);return s!==null?s.subtree(ir(e)):new Su(null)}}set(e,n){if(Cn(e))return new Su(n,this.children);{const s=dn(e),r=(this.children.get(s)||new Su(null)).set(ir(e),n),i=this.children.insert(s,r);return new Su(this.value,i)}}remove(e){if(Cn(e))return this.children.isEmpty()?new Su(null):new Su(null,this.children);{const n=dn(e),s=this.children.get(n);if(s){const r=s.remove(ir(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new Su(null):new Su(this.value,i)}else return this}}get(e){if(Cn(e))return this.value;{const n=dn(e),s=this.children.get(n);return s?s.get(ir(e)):null}}setTree(e,n){if(Cn(e))return n;{const s=dn(e),r=(this.children.get(s)||new Su(null)).setTree(ir(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new Su(this.value,i)}}fold(e){return this.fold_(is(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Eo(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,is(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Cn(e))return null;{const i=dn(e),o=this.children.get(i);return o?o.findOnPath_(ir(e),Eo(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,is(),n)}foreachOnPath_(e,n,s){if(Cn(e))return this;{this.value&&s(n,this.value);const r=dn(e),i=this.children.get(r);return i?i.foreachOnPath_(ir(e),Eo(n,r),s):new Su(null)}}foreach(e){this.foreach_(is(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Eo(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sd{constructor(e){this.writeTree_=e}static empty(){return new Sd(new xh(null))}}function hP(t,e,n){if(Cn(e))return new Sd(new xh(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Xc(r,e);return i=i.updateChild(o,n),new Sd(t.writeTree_.set(r,i))}else{const r=new xh(n),i=t.writeTree_.setTree(e,r);return new Sd(i)}}}function Qpe(t,e,n){let s=t;return bu(n,(r,i)=>{s=hP(s,Eo(e,r),i)}),s}function Ype(t,e){if(Cn(e))return Sd.empty();{const n=t.writeTree_.setTree(e,new xh(null));return new Sd(n)}}function mQ(t,e){return LC(t,e)!=null}function LC(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Xc(n.path,e)):null}function Xpe(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ii,(s,r)=>{e.push(new Mn(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Mn(s,r.value))}),e}function uv(t,e){if(Cn(e))return t;{const n=LC(t,e);return n!=null?new Sd(new xh(n)):new Sd(t.writeTree_.subtree(e))}}function _Q(t){return t.writeTree_.isEmpty()}function qS(t,e){return fxe(is(),t.writeTree_,e)}function fxe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Ae(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=fxe(Eo(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Eo(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U3(t,e){return _xe(e,t)}function Slt(t,e,n,s,r){Ae(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=hP(t.visibleWrites,e,n)),t.lastWriteId=s}function klt(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Rlt(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Alt(a,s.path)?r=!1:nd(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return Plt(t),!0;if(s.snap)t.visibleWrites=Ype(t.visibleWrites,s.path);else{const a=s.children;bu(a,l=>{t.visibleWrites=Ype(t.visibleWrites,Eo(s.path,l))})}return!0}else return!1}function Alt(t,e){if(t.snap)return nd(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&nd(Eo(t.path,n),e))return!0;return!1}function Plt(t){t.visibleWrites=pxe(t.allWrites,Nlt,is()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Nlt(t){return t.visible}function pxe(t,e,n){let s=Sd.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)nd(n,o)?(a=Xc(n,o),s=hP(s,a,i.snap)):nd(o,n)&&(a=Xc(o,n),s=hP(s,is(),i.snap.getChild(a)));else if(i.children){if(nd(n,o))a=Xc(n,o),s=Qpe(s,a,i.children);else if(nd(o,n))if(a=Xc(o,n),Cn(a))s=Qpe(s,is(),i.children);else{const l=kS(i.children,dn(a));if(l){const u=l.getChild(ir(a));s=hP(s,is(),u)}}}else throw r1("WriteRecord should have .snap or .children")}}return s}function gxe(t,e,n,s,r){if(!s&&!r){const i=LC(t.visibleWrites,e);if(i!=null)return i;{const o=uv(t.visibleWrites,e);if(_Q(o))return n;if(n==null&&!mQ(o,is()))return null;{const a=n||yt.EMPTY_NODE;return qS(o,a)}}}else{const i=uv(t.visibleWrites,e);if(!r&&_Q(i))return n;if(!r&&n==null&&!mQ(i,is()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(nd(u.path,e)||nd(e,u.path))},a=pxe(t.allWrites,o,e),l=n||yt.EMPTY_NODE;return qS(a,l)}}}function xlt(t,e,n){let s=yt.EMPTY_NODE;const r=LC(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ii,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=uv(t.visibleWrites,e);return n.forEachChild(ii,(o,a)=>{const l=qS(uv(i,new Ks(o)),a);s=s.updateImmediateChild(o,l)}),Xpe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=uv(t.visibleWrites,e);return Xpe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Dlt(t,e,n,s,r){Ae(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Eo(e,n);if(mQ(t.visibleWrites,i))return null;{const o=uv(t.visibleWrites,i);return _Q(o)?r.getChild(n):qS(o,r.getChild(n))}}function Olt(t,e,n,s){const r=Eo(e,n),i=LC(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=uv(t.visibleWrites,r);return qS(o,s.getNode().getImmediateChild(n))}else return null}function Llt(t,e){return LC(t.visibleWrites,e)}function Mlt(t,e,n,s,r,i,o){let a;const l=uv(t.visibleWrites,e),u=LC(l,is());if(u!=null)a=u;else if(n!=null)a=qS(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function Flt(){return{visibleWrites:Sd.empty(),allWrites:[],lastWriteId:-1}}function MU(t,e,n,s){return gxe(t.writeTree,t.treePath,e,n,s)}function Nte(t,e){return xlt(t.writeTree,t.treePath,e)}function Jpe(t,e,n,s){return Dlt(t.writeTree,t.treePath,e,n,s)}function FU(t,e){return Llt(t.writeTree,Eo(t.treePath,e))}function Vlt(t,e,n,s,r,i){return Mlt(t.writeTree,t.treePath,e,n,s,r,i)}function xte(t,e,n){return Olt(t.writeTree,t.treePath,e,n)}function mxe(t,e){return _xe(Eo(t.treePath,e),t.writeTree)}function _xe(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ult{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,yx(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,_x(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,US(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,yx(s,e.snapshotNode,r.oldSnap));else throw r1("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qlt{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const yxe=new qlt;class Dte{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new rw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xte(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qT(this.viewCache_),i=Vlt(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jlt(t){return{filter:t}}function Blt(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function $lt(t,e,n,s,r){const i=new Ult;let o,a;if(n.type===sd.OVERWRITE){const u=n;u.source.fromUser?o=yQ(t,e,u.path,u.snap,s,r,i):(Ae(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Cn(u.path),o=VU(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===sd.MERGE){const u=n;u.source.fromUser?o=Hlt(t,e,u.path,u.children,s,r,i):(Ae(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=vQ(t,e,u.path,u.children,s,r,a,i))}else if(n.type===sd.ACK_USER_WRITE){const u=n;u.revert?o=Klt(t,e,u.path,s,r,i):o=Wlt(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===sd.LISTEN_COMPLETE)o=Glt(t,e,n.path,s,i);else throw r1("Unknown operation type: "+n.type);const l=i.getChanges();return zlt(e,o,l),{viewCache:o,changes:l}}function zlt(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=LU(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(lxe(LU(e)))}}function vxe(t,e,n,s,r,i){const o=e.eventCache;if(FU(s,n)!=null)return e;{let a,l;if(Cn(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=qT(e),h=u instanceof yt?u:yt.EMPTY_NODE,d=Nte(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=MU(s,qT(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=dn(n);if(u===".priority"){Ae(sw(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Jpe(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=ir(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=Jpe(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=xte(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return uP(e,a,o.isFullyInitialized()||Cn(n),t.filter.filtersNodes())}}function VU(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Cn(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=dn(n);if(!l.isCompleteForPath(n)&&sw(n)>1)return e;const w=ir(n),R=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),R):u=h.updateChild(l.getNode(),m,R,w,yxe,null)}const d=dxe(e,u,l.isFullyInitialized()||Cn(n),h.filtersNodes()),p=new Dte(r,d,i);return vxe(t,d,n,r,p,a)}function yQ(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new Dte(r,e,i);if(Cn(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=uP(e,u,!0,t.filter.filtersNodes());else{const d=dn(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=uP(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=ir(n),m=a.getNode().getImmediateChild(d);let w;if(Cn(p))w=s;else{const R=h.getCompleteChild(d);R!=null?ZNe(p)===".priority"&&R.getChild(txe(p)).isEmpty()?w=R:w=R.updateChild(p,s):w=yt.EMPTY_NODE}if(m.equals(w))l=e;else{const R=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=uP(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Zpe(t,e){return t.eventCache.isCompleteForChild(e)}function Hlt(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Eo(n,l);Zpe(e,dn(h))&&(a=yQ(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Eo(n,l);Zpe(e,dn(h))||(a=yQ(t,a,h,u,r,i,o))}),a}function ege(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function vQ(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Cn(n)?u=s:u=new xh(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=ege(t,m,p);l=VU(t,l,new Ks(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),R=ege(t,w,p);l=VU(t,l,new Ks(d),R,r,i,o,a)}}),l}function Wlt(t,e,n,s,r,i,o){if(FU(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Cn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return VU(t,e,n,l.getNode().getChild(n),r,i,a,o);if(Cn(n)){let u=new xh(null);return l.getNode().forEachChild(xI,(h,d)=>{u=u.set(new Ks(h),d)}),vQ(t,e,n,u,r,i,a,o)}else return e}else{let u=new xh(null);return s.foreach((h,d)=>{const p=Eo(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),vQ(t,e,n,u,r,i,a,o)}}function Glt(t,e,n,s,r){const i=e.serverCache,o=dxe(e,i.getNode(),i.isFullyInitialized()||Cn(n),i.isFiltered());return vxe(t,o,n,s,yxe,r)}function Klt(t,e,n,s,r,i){let o;if(FU(s,n)!=null)return e;{const a=new Dte(s,e,r),l=e.eventCache.getNode();let u;if(Cn(n)||dn(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=MU(s,qT(e));else{const d=e.serverCache.getNode();Ae(d instanceof yt,"serverChildren would be complete if leaf node"),h=Nte(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=dn(n);let d=xte(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,ir(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,yt.EMPTY_NODE,ir(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=MU(s,qT(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||FU(s,is())!=null,uP(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qlt{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new kte(s.getIndex()),i=plt(s);this.processor_=jlt(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(yt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(yt.EMPTY_NODE,a.getNode(),null),h=new rw(l,o.isFullyInitialized(),r.filtersNodes()),d=new rw(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=V3(d,h),this.eventGenerator_=new blt(this.query_)}get query(){return this.query_}}function Ylt(t){return t.viewCache_.serverCache.getNode()}function Xlt(t){return LU(t.viewCache_)}function Jlt(t,e){const n=qT(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Cn(e)&&!n.getImmediateChild(dn(e)).isEmpty())?n.getChild(e):null}function tge(t){return t.eventRegistrations_.length===0}function Zlt(t,e){t.eventRegistrations_.push(e)}function nge(t,e,n){const s=[];if(n){Ae(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function sge(t,e,n,s){e.type===sd.MERGE&&e.source.queryId!==null&&(Ae(qT(t.viewCache_),"We should always have a full cache before handling merges"),Ae(LU(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=$lt(t.processor_,r,e,n,s);return Blt(t.processor_,i.viewCache),Ae(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,wxe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function eut(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ii,(r,i)=>{s.push(US(r,i))}),n.isFullyInitialized()&&s.push(lxe(n.getNode())),wxe(t,s,n.getNode(),e)}function wxe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return Elt(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let UU;class bxe{constructor(){this.views=new Map}}function tut(t){Ae(!UU,"__referenceConstructor has already been defined"),UU=t}function nut(){return Ae(UU,"Reference.ts has not been loaded"),UU}function sut(t){return t.views.size===0}function Ote(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Ae(i!=null,"SyncTree gave us an op for an invalid query."),sge(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(sge(o,e,n,s));return i}}function Exe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=MU(n,r?s:null),l=!1;a?l=!0:s instanceof yt?(a=Nte(n,s),l=!1):(a=yt.EMPTY_NODE,l=!1);const u=V3(new rw(a,l,!1),new rw(s,r,!1));return new Qlt(e,u)}return o}function rut(t,e,n,s,r,i){const o=Exe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Zlt(o,n),eut(o,n)}function iut(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=iw(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(nge(u,n,s)),tge(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(nge(l,n,s)),tge(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!iw(t)&&i.push(new(nut())(e._repo,e._path)),{removed:i,events:o}}function Txe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function hv(t,e){let n=null;for(const s of t.views.values())n=n||Jlt(s,e);return n}function Cxe(t,e){if(e._queryParams.loadsAllData())return q3(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Ixe(t,e){return Cxe(t,e)!=null}function iw(t){return q3(t)!=null}function q3(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let qU;function out(t){Ae(!qU,"__referenceConstructor has already been defined"),qU=t}function aut(){return Ae(qU,"Reference.ts has not been loaded"),qU}let cut=1;class rge{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xh(null),this.pendingWriteTree_=Flt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Sxe(t,e,n,s,r){return Slt(t.pendingWriteTree_,e,n,s,r),r?DL(t,new UT(hxe(),e,n)):[]}function AE(t,e,n=!1){const s=klt(t.pendingWriteTree_,e);if(Rlt(t.pendingWriteTree_,e)){let r=new xh(null);return s.snap!=null?r=r.set(is(),!0):bu(s.children,i=>{r=r.set(new Ks(i),!0)}),DL(t,new OU(s.path,r,n))}else return[]}function xL(t,e,n){return DL(t,new UT(Ate(),e,n))}function lut(t,e,n){const s=xh.fromObject(n);return DL(t,new bx(Ate(),e,s))}function uut(t,e){return DL(t,new wx(Ate(),e))}function hut(t,e,n){const s=Mte(t,n);if(s){const r=Fte(s),i=r.path,o=r.queryId,a=Xc(i,e),l=new wx(Pte(o),a);return Vte(t,i,l)}else return[]}function jU(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Ixe(o,e))){const l=iut(o,e,n,s);sut(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>iw(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=put(p);for(let w=0;w<m.length;++w){const R=m[w],P=R.query,O=Pxe(t,R);t.listenProvider_.startListening(dP(P),Ex(t,P),O.hashFn,O.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(dP(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(j3(p));t.listenProvider_.stopListening(dP(p),m)}))}gut(t,u)}return a}function kxe(t,e,n,s){const r=Mte(t,s);if(r!=null){const i=Fte(r),o=i.path,a=i.queryId,l=Xc(o,e),u=new UT(Pte(a),l,n);return Vte(t,o,u)}else return[]}function dut(t,e,n,s){const r=Mte(t,s);if(r){const i=Fte(r),o=i.path,a=i.queryId,l=Xc(o,e),u=xh.fromObject(n),h=new bx(Pte(a),l,u);return Vte(t,o,h)}else return[]}function wQ(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Xc(p,r);i=i||hv(m,w),o=o||iw(m)});let a=t.syncPointTree_.get(r);a?(o=o||iw(a),i=i||hv(a,is())):(a=new bxe,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=yt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=hv(m,is());w&&(i=i.updateImmediateChild(p,w))}));const u=Ixe(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=j3(e);Ae(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=mut();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=U3(t.pendingWriteTree_,r);let d=rut(a,e,n,h,i,l);if(!u&&!o&&!s){const p=Cxe(a,e);d=d.concat(_ut(t,e,p))}return d}function Lte(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Xc(i,e),l=hv(o,a);if(l)return l});return gxe(s,e,r,n,!0)}function fut(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Xc(u,n);s=s||hv(h,d)});let r=t.syncPointTree_.get(n);r?s=s||hv(r,is()):(r=new bxe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new rw(s,!0,!1):null,a=U3(t.pendingWriteTree_,e._path),l=Exe(r,e,a,i?o.getNode():yt.EMPTY_NODE,i);return Xlt(l)}function DL(t,e){return Rxe(e,t.syncPointTree_,null,U3(t.pendingWriteTree_,is()))}function Rxe(t,e,n,s){if(Cn(t.path))return Axe(t,e,n,s);{const r=e.get(is());n==null&&r!=null&&(n=hv(r,is()));let i=[];const o=dn(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=mxe(s,o);i=i.concat(Rxe(a,l,u,h))}return r&&(i=i.concat(Ote(r,t,s,n))),i}}function Axe(t,e,n,s){const r=e.get(is());n==null&&r!=null&&(n=hv(r,is()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=mxe(s,o),h=t.operationForChild(o);h&&(i=i.concat(Axe(h,a,l,u)))}),r&&(i=i.concat(Ote(r,t,s,n))),i}function Pxe(t,e){const n=e.query,s=Ex(t,n);return{hashFn:()=>(Ylt(e)||yt.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?hut(t,n._path,s):uut(t,n._path);{const i=fct(r,n);return jU(t,n,null,i)}}}}function Ex(t,e){const n=j3(e);return t.queryToTagMap.get(n)}function j3(t){return t._path.toString()+"$"+t._queryIdentifier}function Mte(t,e){return t.tagToQueryMap.get(e)}function Fte(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ks(t.substr(0,e))}}function Vte(t,e,n){const s=t.syncPointTree_.get(e);Ae(s,"Missing sync point for query tag that we're tracking");const r=U3(t.pendingWriteTree_,e);return Ote(s,n,r,null)}function put(t){return t.fold((e,n,s)=>{if(n&&iw(n))return[q3(n)];{let r=[];return n&&(r=Txe(n)),bu(s,(i,o)=>{r=r.concat(o)}),r}})}function dP(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(aut())(t._repo,t._path):t}function gut(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=j3(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function mut(){return cut++}function _ut(t,e,n){const s=e._path,r=Ex(t,e),i=Pxe(t,n),o=t.listenProvider_.startListening(dP(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Ae(!iw(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!Cn(u)&&h&&iw(h))return[q3(h).query];{let p=[];return h&&(p=p.concat(Txe(h).map(m=>m.query))),bu(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(dP(h),Ex(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ute{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ute(n)}node(){return this.node_}}class qte{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Eo(this.path_,e);return new qte(this.syncTree_,n)}node(){return Lte(this.syncTree_,this.path_)}}const yut=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ige=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return vut(t[".sv"],e,n);if(typeof t[".sv"]=="object")return wut(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},vut=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},wut=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Ae(!1,"Unexpected increment value: "+s);const r=e.node();if(Ae(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},but=function(t,e,n,s){return jte(e,new qte(n,t),s)},Nxe=function(t,e,n){return jte(t,new Ute(e),n)};function jte(t,e,n){const s=t.getPriority().val(),r=ige(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=ige(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new VT(a,ia(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new VT(r))),o.forEachChild(ii,(a,l)=>{const u=jte(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bte{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function $te(t,e){let n=e instanceof Ks?e:new Ks(e),s=t,r=dn(n);for(;r!==null;){const i=kS(s.node.children,r)||{children:{},childCount:0};s=new Bte(r,s,i),n=ir(n),r=dn(n)}return s}function g1(t){return t.node.value}function xxe(t,e){t.node.value=e,bQ(t)}function Dxe(t){return t.node.childCount>0}function Eut(t){return g1(t)===void 0&&!Dxe(t)}function B3(t,e){bu(t.node.children,(n,s)=>{e(new Bte(n,t,s))})}function Oxe(t,e,n,s){n&&e(t),B3(t,r=>{Oxe(r,e,!0)})}function Tut(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function OL(t){return new Ks(t.parent===null?t.name:OL(t.parent)+"/"+t.name)}function bQ(t){t.parent!==null&&Cut(t.parent,t.name,t)}function Cut(t,e,n){const s=Eut(n),r=D_(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,bQ(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,bQ(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Iut=/[\[\].#$\/\u0000-\u001F\u007F]/,Sut=/[\[\].#$\u0000-\u001F\u007F]/,cW=10*1024*1024,Lxe=function(t){return typeof t=="string"&&t.length!==0&&!Iut.test(t)},Mxe=function(t){return typeof t=="string"&&t.length!==0&&!Sut.test(t)},kut=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Mxe(t)},Rut=function(t,e,n,s){zte(Eee(t,"value"),e,n)},zte=function(t,e,n){const s=n instanceof Ks?new Wct(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+oE(s));if(typeof e=="function")throw new Error(t+"contains a function "+oE(s)+" with contents = "+e.toString());if(xNe(e))throw new Error(t+"contains "+e.toString()+" "+oE(s));if(typeof e=="string"&&e.length>cW/3&&s3(e)>cW)throw new Error(t+"contains a string greater than "+cW+" utf8 bytes "+oE(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(bu(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Lxe(o)))throw new Error(t+" contains an invalid key ("+o+") "+oE(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Gct(s,o),zte(t,a,s),Kct(s)}),r&&i)throw new Error(t+' contains ".value" child '+oE(s)+" in addition to actual children.")}},Fxe=function(t,e,n,s){if(!Mxe(n))throw new Error(Eee(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Aut=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fxe(t,e,n)},Vxe=function(t,e){if(dn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Put=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Lxe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kut(n))throw new Error(Eee(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nut{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hte(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!Cte(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function Uxe(t,e,n){Hte(t,n),qxe(t,s=>Cte(s,e))}function Pp(t,e,n){Hte(t,n),qxe(t,s=>nd(s,e)||nd(e,s))}function qxe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(xut(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xut(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();cP&&Xa("event: "+n.toString()),p1(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dut="repo_interrupt",Out=25;class Lut{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nut,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DU(),this.transactionQueueTree_=new Bte,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mut(t,e,n){if(t.stats_=Ete(t.repoInfo_),t.forceRestClient_||_ct())t.server_=new xU(t.repoInfo_,(s,r,i,o)=>{oge(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>age(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wo(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nm(t.repoInfo_,e,(s,r,i,o)=>{oge(t,s,r,i,o)},s=>{age(t,s)},s=>{Vut(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=Ect(t.repoInfo_,()=>new wlt(t.stats_,t.server_)),t.infoData_=new glt,t.infoSyncTree_=new rge({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=xL(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gte(t,"connected",!1),t.serverSyncTree_=new rge({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Pp(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function Fut(t){const e=t.infoData_.getNode(new Ks(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Wte(t){return yut({timestamp:Fut(t)})}function oge(t,e,n,s,r){t.dataUpdateCount++;const i=new Ks(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=uU(n,u=>ia(u));o=dut(t.serverSyncTree_,i,l,r)}else{const l=ia(n);o=kxe(t.serverSyncTree_,i,l,r)}else if(s){const l=uU(n,u=>ia(u));o=lut(t.serverSyncTree_,i,l)}else{const l=ia(n);o=xL(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=z3(t,i)),Pp(t.eventQueue_,a,o)}function age(t,e){Gte(t,"connected",e),e===!1&&jut(t)}function Vut(t,e){bu(e,(n,s)=>{Gte(t,n,s)})}function Gte(t,e,n){const s=new Ks("/.info/"+e),r=ia(n);t.infoData_.updateSnapshot(s,r);const i=xL(t.infoSyncTree_,s,r);Pp(t.eventQueue_,s,i)}function jxe(t){return t.nextWriteId_++}function Uut(t,e,n){const s=fut(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=ia(r).withIndex(e._queryParams.getIndex());wQ(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=xL(t.serverSyncTree_,e._path,i);else{const a=Ex(t.serverSyncTree_,e);o=kxe(t.serverSyncTree_,e._path,i,a)}return Pp(t.eventQueue_,e._path,o),jU(t.serverSyncTree_,e,n,null,!0),i},r=>($3(t,"get for query "+wo(e)+" failed: "+r),Promise.reject(new Error(r))))}function qut(t,e,n,s,r){$3(t,"set",{path:e.toString(),value:n,priority:s});const i=Wte(t),o=ia(n,s),a=Lte(t.serverSyncTree_,e),l=Nxe(o,a,i),u=jxe(t),h=Sxe(t.serverSyncTree_,e,l,u,!0);Hte(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||gu("set at "+e+" failed: "+p);const R=AE(t.serverSyncTree_,u,!w);Pp(t.eventQueue_,e,R),Hut(t,r,p,m)});const d=Wxe(t,e);z3(t,d),Pp(t.eventQueue_,d,[])}function jut(t){$3(t,"onDisconnectEvents");const e=Wte(t),n=DU();gQ(t.onDisconnect_,is(),(r,i)=>{const o=but(r,i,t.serverSyncTree_,e);uxe(n,r,o)});let s=[];gQ(n,is(),(r,i)=>{s=s.concat(xL(t.serverSyncTree_,r,i));const o=Wxe(t,r);z3(t,o)}),t.onDisconnect_=DU(),Pp(t.eventQueue_,is(),s)}function But(t,e,n){let s;dn(e._path)===".info"?s=wQ(t.infoSyncTree_,e,n):s=wQ(t.serverSyncTree_,e,n),Uxe(t.eventQueue_,e._path,s)}function $ut(t,e,n){let s;dn(e._path)===".info"?s=jU(t.infoSyncTree_,e,n):s=jU(t.serverSyncTree_,e,n),Uxe(t.eventQueue_,e._path,s)}function zut(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Dut)}function $3(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xa(n,...e)}function Hut(t,e,n,s){e&&p1(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function Bxe(t,e,n){return Lte(t.serverSyncTree_,e,n)||yt.EMPTY_NODE}function Kte(t,e=t.transactionQueueTree_){if(e||H3(t,e),g1(e)){const n=zxe(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Wut(t,OL(e),n)}else Dxe(e)&&B3(e,n=>{Kte(t,n)})}function Wut(t,e,n){const s=n.map(u=>u.currentWriteId),r=Bxe(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];Ae(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Xc(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{$3(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(AE(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();H3(t,$te(t.transactionQueueTree_,e)),Kte(t,t.transactionQueueTree_),Pp(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)p1(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{gu("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}z3(t,e)}},o)}function z3(t,e){const n=$xe(t,e),s=OL(n),r=zxe(t,n);return Gut(t,r,s),s}function Gut(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=Xc(n,a.path);let u=!1,h;if(Ae(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(AE(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Out)u=!0,h="maxretry",r=r.concat(AE(t.serverSyncTree_,a.currentWriteId,!0));else{const d=Bxe(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){zte("transaction failed: Data returned ",p,a.path);let m=ia(p);typeof p=="object"&&p!=null&&D_(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,R=Wte(t),P=Nxe(m,d,R);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=jxe(t),i.splice(i.indexOf(w),1),r=r.concat(Sxe(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(AE(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(AE(t.serverSyncTree_,a.currentWriteId,!0))}Pp(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}H3(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)p1(s[o]);Kte(t,t.transactionQueueTree_)}function $xe(t,e){let n,s=t.transactionQueueTree_;for(n=dn(e);n!==null&&g1(s)===void 0;)s=$te(s,n),e=ir(e),n=dn(e);return s}function zxe(t,e){const n=[];return Hxe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Hxe(t,e,n){const s=g1(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);B3(e,r=>{Hxe(t,r,n)})}function H3(t,e){const n=g1(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,xxe(e,n.length>0?n:void 0)}B3(e,s=>{H3(t,s)})}function Wxe(t,e){const n=OL($xe(t,e)),s=$te(t.transactionQueueTree_,e);return Tut(s,r=>{lW(t,r)}),lW(t,s),Oxe(s,r=>{lW(t,r)}),n}function lW(t,e){const n=g1(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(AE(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?xxe(e,void 0):n.length=i+1,Pp(t.eventQueue_,OL(e),r);for(let o=0;o<s.length;o++)p1(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kut(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function Qut(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):gu(`Invalid query segment '${n}' in query '${t}'`)}return e}const cge=function(t,e){const n=Yut(t),s=n.namespace;n.domain==="firebase.com"&&Gm(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Gm("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||cct();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new zNe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Ks(n.pathString)}},Yut=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=Kut(t.substring(h,d)));const p=Qut(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xut{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wo(this.snapshot.exportVal())}}class Jut{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gxe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qte{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Cn(this._path)?null:ZNe(this._path)}get ref(){return new O_(this._repo,this._path)}get _queryIdentifier(){const e=Gpe(this._queryParams),n=wte(e);return n==="{}"?"default":n}get _queryObject(){return Gpe(this._queryParams)}isEqual(e){if(e=Vs(e),!(e instanceof Qte))return!1;const n=this._repo===e._repo,s=Cte(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hct(this._path)}}class O_ extends Qte{constructor(e,n){super(e,n,new Rte,!1)}get parent(){const e=txe(this._path);return e===null?null:new O_(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Tx{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ks(e),s=EQ(this.ref,e);return new Tx(this._node.getChild(n),s,ii)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new Tx(s,EQ(this.ref,n),ii)))}hasChild(e){const n=new Ks(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function W3(t,e){return t=Vs(t),t._checkNotDeleted("ref"),e!==void 0?EQ(t._root,e):t._root}function EQ(t,e){return t=Vs(t),dn(t._path)===null?Aut("child","path",e):Fxe("child","path",e),new O_(t._repo,Eo(t._path,e))}function G3(t){return Vxe("remove",t._path),LL(t,null)}function LL(t,e){t=Vs(t),Vxe("set",t._path),Rut("set",e,t._path);const n=new e3;return qut(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function K3(t){t=Vs(t);const e=new Gxe(()=>{}),n=new Q3(e);return Uut(t._repo,t,n).then(s=>new Tx(s,new O_(t._repo,t._path),t._queryParams.getIndex()))}class Q3{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new Xut("value",this,new Tx(e.snapshotNode,new O_(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Jut(this,e,n):null}matches(e){return e instanceof Q3?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Zut(t,e,n,s,r){const i=new Gxe(n,void 0),o=new Q3(i);return But(t._repo,t,o),()=>$ut(t._repo,t,o)}function Y3(t,e,n,s){return Zut(t,"value",e)}tut(O_);out(O_);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eht="FIREBASE_DATABASE_EMULATOR_HOST",TQ={};let tht=!1;function nht(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=Jp(i);t.repoInfo_=new zNe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function sht(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Gm("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xa("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cge(i,r),a=o.repoInfo,l;typeof process<"u"&&Ape&&(l=Ape[eht]),l?(i=`http://${l}?ns=${a.namespace}`,o=cge(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new vct(t.name,t.options,e);Put("Invalid Firebase Database URL",o),Cn(o.path)||Gm("Database URL must point to the root of a Firebase Database (not including a child path).");const h=iht(a,t,u,new yct(t,n));return new oht(h,t)}function rht(t,e){const n=TQ[e];(!n||n[t.key]!==t)&&Gm(`Database ${e}(${t.repoInfo_}) has already been deleted.`),zut(t),delete n[t.key]}function iht(t,e,n,s){let r=TQ[e.name];r||(r={},TQ[e.name]=r);let i=r[t.toURLString()];return i&&Gm("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Lut(t,tht,n,s),r[t.toURLString()]=i,i}class oht{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Mut(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new O_(this._repo,is())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rht(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gm("Cannot call "+e+" on a deleted database.")}}function ML(t=i3(),e){const n=iL(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=vee("database");s&&aht(n,...s)}return n}function aht(t,e,n,s={}){t=Vs(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Qv(s,i.repoInfo_.emulatorOptions))return;Gm("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Gm('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new A4(A4.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:wee(s.mockUserToken,t.app.options.projectId);o=new A4(a)}Jp(e)&&(t3(e),n3("Database",!0)),nht(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cht(t){nct(pb),Yv(new Bm("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return sht(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),vh(Ppe,Npe,t),vh(Ppe,Npe,"esm2020")}Nm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Nm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cht();var qb={};const fo={apiKey:qb.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:qb.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:qb.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:qb.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:qb.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:qb.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:qb.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log(" Firebase  :",{apiKey:fo.apiKey?"":" ",authDomain:fo.authDomain?"":" ",projectId:fo.projectId?"":" ",storageBucket:fo.storageBucket?"":" ",messagingSenderId:fo.messagingSenderId?"":" ",appId:fo.appId?"":" ",databaseURL:fo.databaseURL?"":""});console.log(" Firebase   :",{apiKey:fo.apiKey?`${fo.apiKey.substring(0,10)}...`:"",authDomain:fo.authDomain,projectId:fo.projectId,databaseURL:fo.databaseURL?"":""});(!fo.apiKey||!fo.authDomain||!fo.projectId)&&console.warn(" Firebase   .   .");let Zs,Jr,PE,jT,BT;fo.apiKey&&fo.authDomain&&fo.projectId?(Zs=iAe(fo),Jr=bL(Zs),PE=new Pu,jT=nNe(Zs),BT=Jat(Zs),ML(Zs)):(console.warn(" Firebase  .  (,  )    ."),Jr=null,PE=null,jT=null,BT=null);const lht=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Jr},get db(){return jT},get firebaseApp(){return Zs},get googleProvider(){return PE},get storage(){return BT}},Symbol.toStringTag,{value:"Module"}));function FL(){return mc(ORe)}const hr=Nh(null),hf=Nh(!0),nF=Nh(null);let c0=null,lge=!1;function VL(){const t=FL(),e=Zs?nNe(Zs):null;e?console.log(" Firestore  "):console.error(" Firestore  ."),Zs?console.log(" Firebase  "):console.warn(" Firebase  .     .");const n=async l=>{if(!e)throw console.log(" Firestore  ."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("    :",l.email,`( ${h+1}/${u})`);const d=kL(e,"users",l.uid),p=await MS(d);if(p.exists()){const m=p.data();return console.log("   :",m),await FS(d,{lastLoginAt:sT()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("    :",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],R=w.includes(l.email||"");console.log("   :",{userEmail:l.email,adminEmails:w,isAdminEmail:R});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:R?"admin":"student",createdAt:sT(),lastLoginAt:sT()};console.log("     :",P),await FS(d,P),console.log("    :",l.email);const O=await MS(d);if(O.exists())console.log("    :",O.data());else throw console.error("    :   "),new Error("   .");return{...l,role:R?"admin":"student"}}}catch(d){if(h++,console.error(` Firestore   ( ${h}/${u}):`,d),console.error("  :",d.code),console.error("  :",d.message),d.code==="permission-denied")throw console.error(" Firestore  .   ."),console.error("   :",{code:d.code,message:d.message,firebaseApp:!!Zs,db:!!e,auth:!!Jr,userUid:l.uid,userEmail:l.email}),new Error("Firebase   . Firestore   Security Rules    .");if(h<u)console.log(` ${h*1e3}ms  ...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("   .   ."),new Error("    .    .")}return{...l,role:"student"}},s=async()=>{if(!hf.value){hf.value=!0,nF.value=null;try{if(!Jr||!PE)throw new Error("Firebase is not configured.");const l=await vL(Jr,PE);console.log(" Google   :",l.user.email);try{if(Zs&&e)hr.value=await n(l.user),console.log("      :",hr.value.role);else{console.log(" Firebase      ."),hr.value=null,Jr&&await tm(Jr),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3}),hf.value=!1;return}console.log("      :",{isAuthenticated:!!hr.value,userRole:hr.value?.role,userEmail:hr.value?.email})}catch(u){console.error("      :",u),hr.value=null,Jr&&await tm(Jr),t.notify({type:"warning",message:"Firebase       .",timeout:5e3}),hf.value=!1;return}hf.value=!1,t.notify({type:"positive",message:" !",timeout:2e3})}catch(l){console.error(" Google   :",l),nF.value=l.message,t.notify({type:"negative",message:"   ."}),hf.value=!1}}},r=async()=>{if(console.log(" useAuth: logout  "),console.log(" useAuth: auth  :",!!Jr),!Jr){console.log(" useAuth: auth  ");return}try{c0&&(console.log(" useAuth: Firestore  "),c0(),c0=null),console.log(" useAuth: Firebase signOut "),await tm(Jr),console.log(" useAuth: Firebase signOut "),hr.value=null,console.log(" useAuth:    "),console.log("  ")}catch(l){console.error(" useAuth:  :",l),t.notify({type:"negative",message:"   ."})}},i=()=>{if(!lge){if(lge=!0,console.log(" Firebase   :",{firebaseApp:!!Zs,auth:!!Jr,db:!!e}),!Jr){console.log(" Firebase Auth  "),hf.value=!1;return}console.log(" Firebase Auth  "),c0=gL(Jr,async l=>{if(console.log(" onAuthStateChanged . :",l?l.email:""),l)if(console.log("   :",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),Zs&&e)try{hr.value=await n(l),console.log("    :",hr.value.role),console.log("    :",{isAuthenticated:!!hr.value,userRole:hr.value?.role,userEmail:hr.value?.email})}catch(u){console.error("    :",u),console.error("  :",u.code),console.error("  :",u.message),hr.value=null,Jr&&await tm(Jr),nF.value=u.message,t.notify({type:"warning",message:" /     .  .",timeout:5e3}),hf.value=!1;return}else console.log(" Firebase       ."),hr.value=null,Jr&&await tm(Jr),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3});else console.log("   "),hr.value=null,console.log("     ");hf.value=!1})}};xC(()=>{c0&&c0()});const o=()=>{console.log("   :",{user:hr.value,isAuthenticated:!!hr.value,userRole:hr.value?.role,firebaseApp:!!Zs,firestore:!!e})},a=()=>(console.log(" Firebase   :"),console.log("  - Firebase App:",!!Zs),console.log("  - Firebase Auth:",!!Jr),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!PE),Zs&&console.log("  - Firebase Config:",{apiKey:Zs.options.apiKey?"":" ",authDomain:Zs.options.authDomain?"":" ",projectId:Zs.options.projectId?"":" ",storageBucket:Zs.options.storageBucket?"":" "}),{firebaseApp:!!Zs,auth:!!Jr,db:!!e,googleProvider:!!PE});return{user:nt(()=>hr.value),loading:nt(()=>hf.value),error:nt(()=>nF.value),isAuthenticated:nt(()=>!!hr.value),displayName:nt(()=>hr.value?.displayName||""),email:nt(()=>hr.value?.email||""),photoURL:nt(()=>hr.value?.photoURL||""),isFirebaseConfigured:nt(()=>!!Zs),userRole:nt(()=>hr.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const uht={id:"app"},hht=db({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=VL(),o=nL(),a=sL();return PC(()=>{e()}),Pm([n,s,r],([l,u,h])=>{h||(console.log(`  : isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(` : ${a.path}`),i(),l?u==="admin"?(console.log(" .   ."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log(" .   ."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("    .   ."):console.log(" .   ."))}),(l,u)=>{const h=$O("router-view");return t1(),zO("div",uht,[Lo(h)])}}}),dht=t=>t,fht=dht,pht=[{path:"/",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./MainLayout-CbUPrBs9-h46N59WV-BF4eerBE-BaJy3rXd-CMtI8LWQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),Fs([0,1,2,3,4,5,6,7,8,9,10,11])),ri([0,1,2,3,4,5,6,7,8,9,10,11])),Vc([0,1,2,3,4,5,6,7,8,9,10,11])),gy([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),children:[{path:"",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi-Dav2vSnU-CfpLyWfF.js"),__vite__mapDeps([12,1,2,3,10,13,8,9,14,11])),Fs([12,1,2,3,10,13,8,9,14,11])),ri([12,1,2,3,10,13,8,9,14,11])),Vc([12,1,2,3,10,13,8,9,14,11])),gy([14,1,2,3,10,15,8,9,16,12,17]))},{path:"survey-results",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd-BJUyk6is-DzDmumAF.js"),__vite__mapDeps([15,6,3,1,2,5,16,13,17])),Fs([15,6,3,1,2,5,16,13,17])),ri([15,6,3,1,2,5,16,13,17])),Vc([15,6,3,1,2,5,16,13,17])),gy([18,6,3,1,2,5,19,15,20,21]))}]},{path:"/logout",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh-Bhu1IBHp-YdyFVrae.js"),__vite__mapDeps([18,2,3,10,13,4])),Fs([18,2,3,10,13,4])),ri([18,2,3,10,13,4])),Vc([18,2,3,10,13,4])),gy([22,2,3,10,15,4,23]))},{path:"/poll-result",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO-Cl7Zdf_z-Ce_I2uVo.js"),__vite__mapDeps([19,6,3,13,17])),Fs([19,6,3,13,17])),ri([19,6,3,13,17])),Vc([19,6,3,13,17])),gy([24,6,3,15,20,21,25]))},{path:"/study/:courseId",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O-C_q9m6Eq-CC3p36g1.js"),__vite__mapDeps([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),Fs([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),ri([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),Vc([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),gy([26,1,2,3,5,7,4,8,9,10,6,11,16,15,19,20,21,27])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("   :",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("    :",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./ErrorNotFound-BPK_S1F5-DtaYr84p-DaOkcD4U-BENG9V6Z-Ce9LtljA.js"),[]),[]),[]),[]),[])}],uW=fht(function(){return XZe({scrollBehavior:()=>({left:0,top:0}),routes:pht,history:SZe("/")})});async function ght(t,e){const n=t(hht);n.use(QJe,e);const s=P_(typeof uW=="function"?await uW({}):uW);return{app:n,router:s}}const CQ={xs:18,sm:24,md:32,lg:38,xl:46},MC={size:String};function FC(t,e=CQ){return nt(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function UL(t,e){return t!==void 0&&t()||e}function X3(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function _m(t,e){return t!==void 0?e.concat(t()):e}function qL(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function J3(t,e,n,s,r,i){e.key=s+r;const o=pt(t,e,n);return r===!0?Zk(o,i()):o}const uge="0 0 24 24",hW=t=>t,dW=t=>`ionicons ${t}`,Kxe={"mdi-":t=>`mdi ${t}`,"icon-":hW,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":dW,"ion-ios":dW,"ion-logo":dW,"iconfont ":hW,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":hW},Qxe={o_:"-outlined",r_:"-round",s_:"-sharp"},Yxe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},mht=new RegExp("^("+Object.keys(Kxe).join("|")+")"),_ht=new RegExp("^("+Object.keys(Qxe).join("|")+")"),hge=new RegExp("^("+Object.keys(Yxe).join("|")+")"),yht=/^[Mm]\s?[-+]?\.?\d/,vht=/^img:/,wht=/^svguse:/,bht=/^ion-/,Eht=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,ow=x_({name:"QIcon",props:{...MC,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=lf(),s=FC(t),r=nt(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=nt(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(yht.test(a)===!0){const[h,d=uge]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,R]=p.split("@@");return pt("path",{style:w,d:m,transform:R})})}}if(vht.test(a)===!0)return{img:!0,src:a.substring(4)};if(wht.test(a)===!0){const[h,d=uge]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(mht);if(u!==null)o=Kxe[u[1]](a);else if(Eht.test(a)===!0)o=a;else if(bht.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(hge.test(a)===!0){o="notranslate material-symbols";const h=a.match(hge);h!==null&&(a=a.substring(6),o+=Yxe[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(_ht);h!==null&&(a=a.substring(2),o+=Qxe[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?pt(t.tag,o,UL(e.default)):i.value.img===!0?pt(t.tag,o,_m(e.default,[pt("img",{src:i.value.src})])):i.value.svg===!0?pt(t.tag,o,_m(e.default,[pt("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?pt(t.tag,o,_m(e.default,[pt("svg",{viewBox:i.value.viewBox},[pt("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),pt(t.tag,o,_m(e.default,[i.value.content])))}}}),jL=x_({name:"QAvatar",props:{...MC,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=FC(t),s=nt(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=nt(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[pt(ow,{name:t.icon})]:void 0;return pt("div",{class:s.value,style:n.value},[pt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},qL(e.default,i))])}}}),BL={size:{type:[String,Number],default:"1em"},color:String};function $L(t){return{cSize:nt(()=>t.size in CQ?`${CQ[t.size]}px`:t.size),classes:nt(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const m1=x_({name:"QSpinner",props:{...BL,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=$L(t);return()=>pt("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[pt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function zL(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function Z3(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=bd(t);if(e)return e.$el||e}function eB(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function Tht(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function dge(t,e,n,s){n.modifiers.stop===!0&&s1(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=YO(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,R=`${(d-m)/2}px`,P=i?R:`${l.left-u-w}px`,O=`${(p-m)/2}px`,M=i?O:`${l.top-h-w}px`;a.className="q-ripple__inner",zL(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${R},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function fge(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const HL=QO({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&dge(r,t,s,r.qKeyEvent===!0)},keystart:Tht(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&xT(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&dge(r,t,s,!0)},300)};fge(s,e),t.__qripple=s,XO(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&fge(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),JO(e,"main"),delete t._qripple)}}),Xxe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Cht=Object.keys(Xxe),WL={align:{type:String,validator:t=>Cht.includes(t)}};function GL(t){return nt(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${Xxe[e]}`})}function tB(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function KL(t){return t.appContext.config.globalProperties.$router!==void 0}function nB(t){return t.isUnmounted===!0||t.isDeactivated===!0}function pge(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function gge(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Iht(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function mge(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Sht(t,e){return Array.isArray(t)===!0?mge(t,e):Array.isArray(e)===!0?mge(e,t):t===e}function kht(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(Sht(t[n],e[n])===!1)return!1;return!0}const Jxe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},sB={...Jxe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function QL({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=lf(),{props:s,proxy:r,emit:i}=n,o=KL(n),a=nt(()=>s.disable!==!0&&s.href!==void 0),l=nt(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=nt(()=>l.value===!0?M(s.to):null),h=nt(()=>u.value!==null),d=nt(()=>a.value===!0||h.value===!0),p=nt(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=nt(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=nt(()=>{if(h.value===!1)return-1;const{matched:W}=u.value,{length:J}=W,I=W[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(gge.bind(null,I));if(y!==-1)return y;const T=pge(W[J-2]);return J>1&&pge(I)===T&&v[v.length-1].path!==T?v.findIndex(gge.bind(null,W[J-2])):y}),R=nt(()=>h.value===!0&&w.value!==-1&&Iht(r.$route.params,u.value.params)),P=nt(()=>R.value===!0&&w.value===r.$route.matched.length-1&&kht(r.$route.params,u.value.params)),O=nt(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":R.value===!0?` ${s.activeClass}`:"":"");function M(W){try{return r.$router.resolve(W)}catch{}return null}function V(W,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return W.preventDefault(),Promise.resolve(!1);if(W.metaKey||W.altKey||W.ctrlKey||W.shiftKey||W.button!==void 0&&W.button!==0||s.target==="_blank")return Promise.resolve(!1);W.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(W){if(h.value===!0){const J=I=>V(W,I);i("click",W,J),W.defaultPrevented!==!0&&J()}else i("click",W)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:R,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const _ge={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Rht={xs:8,sm:10,md:14,lg:20,xl:24},Aht=["button","submit","reset"],Pht=/[^\s]\/[^\s]/,Nht=["flat","outline","push","unelevated"];function xht(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const Dht={...MC,...Jxe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...Nht.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...WL.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},Oht={...Dht,round:Boolean};function Lht(t){const e=FC(t,Rht),n=GL(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=QL({fallbackTag:"button"}),l=nt(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in _ge?_ge[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),u=nt(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=nt(()=>t.disable!==!0&&t.loading!==!0),d=nt(()=>h.value===!0?t.tabindex||0:-1),p=nt(()=>xht(t,"standard")),m=nt(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):Aht.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&Pht.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=nt(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),R=nt(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:R,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:Ju}=Yd;let l0=null,u0=null,h0=null;const YL=x_({name:"QBtn",props:{...Oht,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=lf(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=Lht(t),p=Nh(null),m=Nh(null);let w=null,R,P=null;const O=nt(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=nt(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=nt(()=>({center:t.round})),q=nt(()=>{const G=Math.max(0,Math.min(100,t.percentage));return G>0?{transition:"transform 0.6s",transform:`translateX(${G-100}%)`}:{}}),W=nt(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const G={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";G[`onTouchstart${ne}`]=y}return G}return{onClick:Ff}}),J=nt(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...W.value}));function I(G){if(p.value!==null){if(G!==void 0){if(G.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){G.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",Ff,!0),document.removeEventListener("keyup",ae,Ju),p.value?.removeEventListener("blur",ae,Ju)};document.addEventListener("keydown",Ff,!0),document.addEventListener("keyup",ae,Ju),p.value.addEventListener("blur",ae,Ju)}}h(G)}}function v(G){p.value!==null&&(n("keydown",G),xT(G,[13,32])===!0&&u0!==p.value&&(u0!==null&&E(),G.defaultPrevented!==!0&&(G.qAvoidFocus!==!0&&p.value.focus(),u0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,Ju)),Ff(G)))}function y(G){p.value!==null&&(n("touchstart",G),G.defaultPrevented!==!0&&(l0!==p.value&&(l0!==null&&E(),l0=p.value,w=G.target,w.addEventListener("touchcancel",S,Ju),w.addEventListener("touchend",S,Ju)),R=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,R=!1},200)))}function T(G){p.value!==null&&(G.qSkipRipple=R===!0,n("mousedown",G),G.defaultPrevented!==!0&&h0!==p.value&&(h0!==null&&E(),h0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,Ju)))}function S(G){if(p.value!==null&&!(G?.type==="blur"&&document.activeElement===p.value)){if(G?.type==="keyup"){if(u0===p.value&&xT(G,[13,32])===!0){const ne=new MouseEvent("click",G);ne.qKeyEvent=!0,G.defaultPrevented===!0&&NT(ne),G.cancelBubble===!0&&s1(ne),p.value.dispatchEvent(ne),Ff(G),G.qKeyEvent=!0}n("keyup",G)}E()}}function E(G){const ne=m.value;G!==!0&&(l0===p.value||h0===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),l0===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,Ju),w.removeEventListener("touchend",S,Ju)),l0=w=null),h0===p.value&&(document.removeEventListener("mouseup",S,Ju),h0=null),u0===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,Ju),u0=null),p.value?.classList.remove("q-btn--active")}function b(G){Ff(G),G.qSkipRipple=!0}return NC(()=>{E(!0)}),Object.assign(s,{click:G=>{d.value===!0&&I(G)}}),()=>{let G=[];t.icon!==void 0&&G.push(pt(ow,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&G.push(pt("span",{class:"block"},[t.label])),G=_m(e.default,G),t.iconRight!==void 0&&t.round===!1&&G.push(pt(ow,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[pt("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(pt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[pt("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(pt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},G)),t.loading!==null&&ne.push(pt(KO,{name:"q-transition--fade"},()=>t.loading===!0?[pt("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[pt(m1)])]:null)),Zk(pt(u.value,J.value,ne),[[HL,M.value,void 0,V.value]])}}});let Mht=1,Fht=document.body;function XL(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${Mht++}`:t,aU.globalNodes!==void 0){const s=aU.globalNodes.class;s!==void 0&&(n.className=s)}return Fht.appendChild(n),n}function rB(t){t.remove()}let Vht=0;const N4={},x4={},Vh={},Zxe={},Uht=/^\s*$/,eDe=[],qht=[void 0,null,!0,!1,""],Yte=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],jht=["top-left","top-right","bottom-left","bottom-right"],vA={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function tDe(t,e,n){if(!t)return CR("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,N4),jm(t)===!1&&(r.type&&Object.assign(r,vA[r.type]),t={message:t}),Object.assign(r,vA[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=m1),r.spinner=P_(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:yge(r.message)||yge(r.caption)},r.position){if(Yte.includes(r.position)===!1)return CR("wrong position",t)}else r.position="bottom";if(qht.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return CR("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(N4.actions)===!0?N4.actions:[]).concat(Array.isArray(vA[t.type]?.actions)===!0?vA[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=Vh[r.position].value.indexOf(n.notif);Vh[r.position].value[l]=r}else{const l=x4[r.meta.group];if(l===void 0){if(r.meta.uid=Vht++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Vh[r.position].value.splice(Math.floor(Vh[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";Vh[r.position].value[u](r)}r.group!==void 0&&(x4[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(jht.includes(r.badgePosition)===!1)return CR("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=Vh[r.position].value.indexOf(l);Vh[r.position].value[u]=x4[r.meta.group]=r}}const a=()=>{Bht(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?CR("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});tDe(u,e,s)}}}function Bht(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Vh[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete x4[t.meta.group];const n=eDe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}Vh[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function yge(t){return t!=null&&Uht.test(t)!==!0}function CR(t,e){return console.error(`Notify: ${t}`,e),!1}function $ht(){return x_({name:"QNotifications",devtools:{hide:!0},setup(){return()=>pt("div",{class:"q-notifications"},Yte.map(t=>pt(vJe,{key:t,class:Zxe[t],tag:"div",name:`q-notification--${t}`},()=>Vh[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(pt(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(pt(ow,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(pt(jL,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>pt("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[pt("div",a),pt("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(pt("div",o,i))}const r=[pt("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(pt("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(pt("div",{class:n.actionsClass},e.actions.map(i=>pt(YL,i)))),n.badge>1&&r.push(pt("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),pt("div",{ref:i=>{eDe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[pt("div",{class:n.wrapperClass},r)])}))))}})}const zht={setDefaults(t){jm(t)===!0&&Object.assign(N4,t)},registerType(t,e){jm(e)===!0&&(vA[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>tDe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Yte.forEach(s=>{Vh[s]=Nh([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;Zxe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=XL("q-notify");WJe($ht(),e).mount(n)}}},Hht={config:{},plugins:{Notify:zht}},Wht="/";async function Ght({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:Wht})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}ght(ARe,Hht).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ah(()=>ho(()=>ur(()=>ns(()=>an(()=>import("./pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7-BANrqH3G-CCsHXFuo.js"),__vite__mapDeps([21,9])),Fs([21,9])),ri([21,9])),Vc([21,9])),gy([28,9]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");Ght(t,r)})});const Kht=Object.freeze(Object.defineProperty({__proto__:null,$:Yd,A:J3,B:qL,C:Ff,D:db,E:zO,F:n1,G:Lo,H:t1,I:YL,J:s1,K:pu,L:fb,M:NT,N:PC,O:sL,P:HO,Q:ow,R:HL,S:VO,T:Mj,U:LO,V:WO,W:nL,X:FL,Y:Qd,Z:NC,_:qm,a:Xp,a$:tL,a0:rv,a1:xC,a2:_m,get a3(){return Zs},a4:ML,a5:Y3,a6:W3,a7:eL,get a8(){return BT},a9:M3,aA:JO,aB:zj,aC:XO,aD:YO,aE:Bj,aF:ZO,aG:qO,aH:UO,aI:nB,aJ:Gj,aK:jm,aL:bL,aM:qc,aN:xj,aO:jL,aP:Uj,aQ:KO,aR:Xk,aS:Vj,aT:m1,aU:$O,aV:jO,aW:eB,aX:eT,aY:BO,aZ:e1,a_:KL,aa:x3,get ab(){return jT},ac:kL,ad:k3,ae:sT,af:O3,ag:D3,ah:L3,ai:FS,aj:MS,ak:A3,al:ah,am:R3,an:sB,ao:QL,ap:xT,aq:X3,ar:VL,as:LL,at:K3,au:RC,av:AC,aw:bd,ax:G3,ay:Zk,az:QO,b:Qf,b0:Yj,b1:Qj,b2:qj,b3:PT,b4:tB,b5:Aj,b6:XL,b7:rB,b8:$j,b9:WL,ba:GL,bb:a1,bc:lh,bd:uh,be:Pu,bf:Jd,bg:hh,bh:pL,bi:mL,bj:wL,bk:c1,bl:hL,bm:cL,bn:RS,bo:yL,bp:uL,bq:gL,br:fL,bs:oL,bt:lL,bu:vL,bv:tm,bw:BL,bx:$L,by:lht,c:kj,d:nt,e:Cj,f:mc,g:MO,h:Dj,i:Ri,j:x_,k:lf,l:pt,m:P_,n:Jk,o:Ij,p:UL,q:Kj,r:Nh,s:Hj,t:yn,u:Wj,v:Z3,w:Pm,x:zL,y:MC,z:FC},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Xte(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const zs={},DI=[],tp=()=>{},Qht=()=>!1,iB=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Jte=t=>t.startsWith("onUpdate:"),Bo=Object.assign,Zte=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Yht=Object.prototype.hasOwnProperty,ms=(t,e)=>Yht.call(t,e),kt=Array.isArray,OI=t=>oB(t)==="[object Map]",nDe=t=>oB(t)==="[object Set]",Ht=t=>typeof t=="function",di=t=>typeof t=="string",_b=t=>typeof t=="symbol",Sr=t=>t!==null&&typeof t=="object",sDe=t=>(Sr(t)||Ht(t))&&Ht(t.then)&&Ht(t.catch),rDe=Object.prototype.toString,oB=t=>rDe.call(t),Xht=t=>oB(t).slice(8,-1),iDe=t=>oB(t)==="[object Object]",ene=t=>di(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fP=Xte(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aB=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Jht=/-(\w)/g,Dh=aB(t=>t.replace(Jht,(e,n)=>n?n.toUpperCase():"")),Zht=/\B([A-Z])/g,VC=aB(t=>t.replace(Zht,"-$1").toLowerCase()),cB=aB(t=>t.charAt(0).toUpperCase()+t.slice(1)),fW=aB(t=>t?`on${cB(t)}`:""),dv=(t,e)=>!Object.is(t,e),pW=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},IQ=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},edt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tdt=t=>{const e=di(t)?Number(t):NaN;return isNaN(e)?t:e};let vge;const lB=()=>vge||(vge=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _1(t){if(kt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=di(s)?idt(s):_1(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(di(t)||Sr(t))return t}const ndt=/;(?![^(]*\))/g,sdt=/:([^]+)/,rdt=/\/\*[^]*?\*\//g;function idt(t){const e={};return t.replace(rdt,"").split(ndt).forEach(n=>{if(n){const s=n.split(sdt);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function y1(t){let e="";if(di(t))e=t;else if(kt(t))for(let n=0;n<t.length;n++){const s=y1(t[n]);s&&(e+=s+" ")}else if(Sr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const odt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",adt=Xte(odt);function oDe(t){return!!t||t===""}const aDe=t=>!!(t&&t.__v_isRef===!0),uB=t=>di(t)?t:t==null?"":kt(t)||Sr(t)&&(t.toString===rDe||!Ht(t.toString))?aDe(t)?uB(t.value):JSON.stringify(t,cDe,2):String(t),cDe=(t,e)=>aDe(e)?cDe(t,e.value):OI(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[gW(s,i)+" =>"]=r,n),{})}:nDe(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>gW(n))}:_b(e)?gW(e):Sr(e)&&!kt(e)&&!iDe(e)?String(e):e,gW=(t,e="")=>{var n;return _b(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qa;class lDe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qa,!e&&qa&&(this.index=(qa.scopes||(qa.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=qa;try{return qa=this,e()}finally{qa=n}}}on(){++this._on===1&&(this.prevScope=qa,qa=this)}off(){this._on>0&&--this._on===0&&(qa=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function tne(t){return new lDe(t)}function hB(){return qa}function nne(t,e=!1){qa&&qa.cleanups.push(t)}let tr;const mW=new WeakSet;class uDe{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qa&&qa.active&&qa.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mW.has(this)&&(mW.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dDe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wge(this),fDe(this);const e=tr,n=kd;tr=this,kd=!0;try{return this.fn()}finally{pDe(this),tr=e,kd=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ine(e);this.deps=this.depsTail=void 0,wge(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mW.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){SQ(this)&&this.run()}get dirty(){return SQ(this)}}let hDe=0,pP,gP;function dDe(t,e=!1){if(t.flags|=8,e){t.next=gP,gP=t;return}t.next=pP,pP=t}function sne(){hDe++}function rne(){if(--hDe>0)return;if(gP){let e=gP;for(gP=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;pP;){let e=pP;for(pP=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function fDe(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function pDe(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),ine(s),cdt(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function SQ(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(gDe(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function gDe(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Cx)||(t.globalVersion=Cx,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!SQ(t))))return;t.flags|=2;const e=t.dep,n=tr,s=kd;tr=t,kd=!0;try{fDe(t);const r=t.fn(t._value);(e.version===0||dv(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{tr=n,kd=s,pDe(t),t.flags&=-3}}function ine(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ine(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function cdt(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let kd=!0;const mDe=[];function Km(){mDe.push(kd),kd=!1}function Qm(){const t=mDe.pop();kd=t===void 0?!0:t}function wge(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=tr;tr=void 0;try{e()}finally{tr=n}}}let Cx=0;class ldt{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class one{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!tr||!kd||tr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==tr)n=this.activeLink=new ldt(tr,this),tr.deps?(n.prevDep=tr.depsTail,tr.depsTail.nextDep=n,tr.depsTail=n):tr.deps=tr.depsTail=n,_De(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=tr.depsTail,n.nextDep=void 0,tr.depsTail.nextDep=n,tr.depsTail=n,tr.deps===n&&(tr.deps=s)}return n}trigger(e){this.version++,Cx++,this.notify(e)}notify(e){sne();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rne()}}}function _De(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)_De(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const BU=new WeakMap,iT=Symbol(""),kQ=Symbol(""),Ix=Symbol("");function Ja(t,e,n){if(kd&&tr){let s=BU.get(t);s||BU.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new one),r.map=s,r.key=n),r.track()}}function nm(t,e,n,s,r,i){const o=BU.get(t);if(!o){Cx++;return}const a=l=>{l&&l.trigger()};if(sne(),e==="clear")o.forEach(a);else{const l=kt(t),u=l&&ene(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===Ix||!_b(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Ix)),e){case"add":l?u&&a(o.get("length")):(a(o.get(iT)),OI(t)&&a(o.get(kQ)));break;case"delete":l||(a(o.get(iT)),OI(t)&&a(o.get(kQ)));break;case"set":OI(t)&&a(o.get(iT));break}}rne()}function udt(t,e){const n=BU.get(t);return n&&n.get(e)}function d0(t){const e=An(t);return e===t?e:(Ja(e,"iterate",Ix),wh(t)?e:e.map(pa))}function dB(t){return Ja(t=An(t),"iterate",Ix),t}const hdt={__proto__:null,[Symbol.iterator](){return _W(this,Symbol.iterator,pa)},concat(...t){return d0(this).concat(...t.map(e=>kt(e)?d0(e):e))},entries(){return _W(this,"entries",t=>(t[1]=pa(t[1]),t))},every(t,e){return Og(this,"every",t,e,void 0,arguments)},filter(t,e){return Og(this,"filter",t,e,n=>n.map(pa),arguments)},find(t,e){return Og(this,"find",t,e,pa,arguments)},findIndex(t,e){return Og(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Og(this,"findLast",t,e,pa,arguments)},findLastIndex(t,e){return Og(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Og(this,"forEach",t,e,void 0,arguments)},includes(...t){return yW(this,"includes",t)},indexOf(...t){return yW(this,"indexOf",t)},join(t){return d0(this).join(t)},lastIndexOf(...t){return yW(this,"lastIndexOf",t)},map(t,e){return Og(this,"map",t,e,void 0,arguments)},pop(){return IR(this,"pop")},push(...t){return IR(this,"push",t)},reduce(t,...e){return bge(this,"reduce",t,e)},reduceRight(t,...e){return bge(this,"reduceRight",t,e)},shift(){return IR(this,"shift")},some(t,e){return Og(this,"some",t,e,void 0,arguments)},splice(...t){return IR(this,"splice",t)},toReversed(){return d0(this).toReversed()},toSorted(t){return d0(this).toSorted(t)},toSpliced(...t){return d0(this).toSpliced(...t)},unshift(...t){return IR(this,"unshift",t)},values(){return _W(this,"values",pa)}};function _W(t,e,n){const s=dB(t),r=s[e]();return s!==t&&!wh(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const ddt=Array.prototype;function Og(t,e,n,s,r,i){const o=dB(t),a=o!==t&&!wh(t),l=o[e];if(l!==ddt[e]){const d=l.apply(t,i);return a?pa(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,pa(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function bge(t,e,n,s){const r=dB(t);let i=n;return r!==t&&(wh(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,pa(a),l,t)}),r[e](i,...s)}function yW(t,e,n){const s=An(t);Ja(s,"iterate",Ix);const r=s[e](...n);return(r===-1||r===!1)&&lne(n[0])?(n[0]=An(n[0]),s[e](...n)):r}function IR(t,e,n=[]){Km(),sne();const s=An(t)[e].apply(t,n);return rne(),Qm(),s}const fdt=Xte("__proto__,__v_isRef,__isVue"),yDe=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_b));function pdt(t){_b(t)||(t=String(t));const e=An(this);return Ja(e,"has",t),e.hasOwnProperty(t)}class vDe{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Cdt:TDe:i?EDe:bDe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=kt(e);if(!r){let l;if(o&&(l=hdt[n]))return l;if(n==="hasOwnProperty")return pdt}const a=Reflect.get(e,n,$i(e)?e:s);return(_b(n)?yDe.has(n):fdt(n))||(r||Ja(e,"get",n),i)?a:$i(a)?o&&ene(n)?a:a.value:Sr(a)?r?CDe(a):L_(a):a}}class wDe extends vDe{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=aw(i);if(!wh(s)&&!aw(s)&&(i=An(i),s=An(s)),!kt(e)&&$i(i)&&!$i(s))return l?!1:(i.value=s,!0)}const o=kt(e)&&ene(n)?Number(n)<e.length:ms(e,n),a=Reflect.set(e,n,s,$i(e)?e:r);return e===An(r)&&(o?dv(s,i)&&nm(e,"set",n,s):nm(e,"add",n,s)),a}deleteProperty(e,n){const s=ms(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&nm(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!_b(n)||!yDe.has(n))&&Ja(e,"has",n),s}ownKeys(e){return Ja(e,"iterate",kt(e)?"length":iT),Reflect.ownKeys(e)}}class gdt extends vDe{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mdt=new wDe,_dt=new gdt,ydt=new wDe(!0),RQ=t=>t,sF=t=>Reflect.getPrototypeOf(t);function vdt(t,e,n){return function(...s){const r=this.__v_raw,i=An(r),o=OI(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?RQ:e?$U:pa;return!e&&Ja(i,"iterate",l?kQ:iT),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function rF(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function wdt(t,e){const n={get(s){const r=this.__v_raw,i=An(r),o=An(s);t||(dv(s,o)&&Ja(i,"get",s),Ja(i,"get",o));const{has:a}=sF(i),l=e?RQ:t?$U:pa;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&Ja(An(s),"iterate",iT),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=An(r),o=An(s);return t||(dv(s,o)&&Ja(i,"has",s),Ja(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=An(o),l=e?RQ:t?$U:pa;return!t&&Ja(a,"iterate",iT),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return Bo(n,t?{add:rF("add"),set:rF("set"),delete:rF("delete"),clear:rF("clear")}:{add(s){!e&&!wh(s)&&!aw(s)&&(s=An(s));const r=An(this);return sF(r).has.call(r,s)||(r.add(s),nm(r,"add",s,s)),this},set(s,r){!e&&!wh(r)&&!aw(r)&&(r=An(r));const i=An(this),{has:o,get:a}=sF(i);let l=o.call(i,s);l||(s=An(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?dv(r,u)&&nm(i,"set",s,r):nm(i,"add",s,r),this},delete(s){const r=An(this),{has:i,get:o}=sF(r);let a=i.call(r,s);a||(s=An(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&nm(r,"delete",s,void 0),l},clear(){const s=An(this),r=s.size!==0,i=s.clear();return r&&nm(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=vdt(s,t,e)}),n}function ane(t,e){const n=wdt(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(ms(n,r)&&r in s?n:s,r,i)}const bdt={get:ane(!1,!1)},Edt={get:ane(!1,!0)},Tdt={get:ane(!0,!1)},bDe=new WeakMap,EDe=new WeakMap,TDe=new WeakMap,Cdt=new WeakMap;function Idt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sdt(t){return t.__v_skip||!Object.isExtensible(t)?0:Idt(Xht(t))}function L_(t){return aw(t)?t:cne(t,!1,mdt,bdt,bDe)}function JL(t){return cne(t,!1,ydt,Edt,EDe)}function CDe(t){return cne(t,!0,_dt,Tdt,TDe)}function cne(t,e,n,s,r){if(!Sr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Sdt(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function xm(t){return aw(t)?xm(t.__v_raw):!!(t&&t.__v_isReactive)}function aw(t){return!!(t&&t.__v_isReadonly)}function wh(t){return!!(t&&t.__v_isShallow)}function lne(t){return t?!!t.__v_raw:!1}function An(t){const e=t&&t.__v_raw;return e?An(e):t}function yb(t){return!ms(t,"__v_skip")&&Object.isExtensible(t)&&IQ(t,"__v_skip",!0),t}const pa=t=>Sr(t)?L_(t):t,$U=t=>Sr(t)?CDe(t):t;function $i(t){return t?t.__v_isRef===!0:!1}function Zd(t){return IDe(t,!1)}function kdt(t){return IDe(t,!0)}function IDe(t,e){return $i(t)?t:new Rdt(t,e)}class Rdt{constructor(e,n){this.dep=new one,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:An(e),this._value=n?e:pa(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||wh(e)||aw(e);e=s?e:An(e),dv(e,n)&&(this._rawValue=e,this._value=s?e:pa(e),this.dep.trigger())}}function np(t){return $i(t)?t.value:t}const Adt={get:(t,e,n)=>e==="__v_raw"?t:np(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return $i(r)&&!$i(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function SDe(t){return xm(t)?t:new Proxy(t,Adt)}function une(t){const e=kt(t)?new Array(t.length):{};for(const n in t)e[n]=Ndt(t,n);return e}class Pdt{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return udt(An(this._object),this._key)}}function Ndt(t,e,n){const s=t[e];return $i(s)?s:new Pdt(t,e,n)}class xdt{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new one(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cx-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&tr!==this)return dDe(this,!0),!0}get value(){const e=this.dep.track();return gDe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ddt(t,e,n=!1){let s,r;return Ht(t)?s=t:(s=t.get,r=t.set),new xdt(s,r,n)}const iF={},zU=new WeakMap;let aE;function Odt(t,e=!1,n=aE){if(n){let s=zU.get(n);s||zU.set(n,s=[]),s.push(t)}}function Ldt(t,e,n=zs){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:wh(q)||r===!1||r===0?sm(q,1):sm(q);let h,d,p,m,w=!1,R=!1;if($i(t)?(d=()=>t.value,w=wh(t)):xm(t)?(d=()=>u(t),w=!0):kt(t)?(R=!0,w=t.some(q=>xm(q)||wh(q)),d=()=>t.map(q=>{if($i(q))return q.value;if(xm(q))return u(q);if(Ht(q))return l?l(q,2):q()})):Ht(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Km();try{p()}finally{Qm()}}const q=aE;aE=h;try{return l?l(t,3,[m]):t(m)}finally{aE=q}}:d=tp,e&&r){const q=d,W=r===!0?1/0:r;d=()=>sm(q(),W)}const P=hB(),O=()=>{h.stop(),P&&P.active&&Zte(P.effects,h)};if(i&&e){const q=e;e=(...W)=>{q(...W),O()}}let M=R?new Array(t.length).fill(iF):iF;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const W=h.run();if(r||w||(R?W.some((J,I)=>dv(J,M[I])):dv(W,M))){p&&p();const J=aE;aE=h;try{const I=[W,M===iF?void 0:R&&M[0]===iF?[]:M,m];M=W,l?l(e,3,I):e(...I)}finally{aE=J}}}else h.run()};return a&&a(V),h=new uDe(d),h.scheduler=o?()=>o(V,!1):V,m=q=>Odt(q,!1,h),p=h.onStop=()=>{const q=zU.get(h);if(q){if(l)l(q,4);else for(const W of q)W();zU.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function sm(t,e=1/0,n){if(e<=0||!Sr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,$i(t))sm(t.value,e,n);else if(kt(t))for(let s=0;s<t.length;s++)sm(t[s],e,n);else if(nDe(t)||OI(t))t.forEach(s=>{sm(s,e,n)});else if(iDe(t)){for(const s in t)sm(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&sm(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ZL(t,e,n,s){try{return s?t(...s):t()}catch(r){fB(r,e,n)}}function ef(t,e,n,s){if(Ht(t)){const r=ZL(t,e,n,s);return r&&sDe(r)&&r.catch(i=>{fB(i,e,n)}),r}if(kt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(ef(t[i],e,n,s));return r}}function fB(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||zs;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){Km(),ZL(i,null,10,[t,l,u]),Qm();return}}Mdt(t,n,r,s,o)}function Mdt(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const jc=[];let kf=-1;const LI=[];let by=null,z0=0;const kDe=Promise.resolve();let HU=null;function eM(t){const e=HU||kDe;return t?e.then(this?t.bind(this):t):e}function Fdt(t){let e=kf+1,n=jc.length;for(;e<n;){const s=e+n>>>1,r=jc[s],i=Sx(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function hne(t){if(!(t.flags&1)){const e=Sx(t),n=jc[jc.length-1];!n||!(t.flags&2)&&e>=Sx(n)?jc.push(t):jc.splice(Fdt(e),0,t),t.flags|=1,RDe()}}function RDe(){HU||(HU=kDe.then(PDe))}function Vdt(t){kt(t)?LI.push(...t):by&&t.id===-1?by.splice(z0+1,0,t):t.flags&1||(LI.push(t),t.flags|=1),RDe()}function Ege(t,e,n=kf+1){for(;n<jc.length;n++){const s=jc[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;jc.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ADe(t){if(LI.length){const e=[...new Set(LI)].sort((n,s)=>Sx(n)-Sx(s));if(LI.length=0,by){by.push(...e);return}for(by=e,z0=0;z0<by.length;z0++){const n=by[z0];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}by=null,z0=0}}const Sx=t=>t.id==null?t.flags&2?-1:1/0:t.id;function PDe(t){try{for(kf=0;kf<jc.length;kf++){const e=jc[kf];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ZL(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kf<jc.length;kf++){const e=jc[kf];e&&(e.flags&=-2)}kf=-1,jc.length=0,ADe(),HU=null,(jc.length||LI.length)&&PDe()}}let Fu=null,NDe=null;function WU(t){const e=Fu;return Fu=t,NDe=t&&t.type.__scopeId||null,e}function pB(t,e=Fu,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Mge(-1);const i=WU(e);let o;try{o=t(...r)}finally{WU(i),s._d&&Mge(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function tM(t,e){if(Fu===null)return t;const n=kB(Fu),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=zs]=e[r];i&&(Ht(i)&&(i={mounted:i,updated:i}),i.deep&&sm(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function jb(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Km(),ef(l,n,8,[t.el,a,t,e]),Qm())}}const xDe=Symbol("_vte"),DDe=t=>t.__isTeleport,mP=t=>t&&(t.disabled||t.disabled===""),Tge=t=>t&&(t.defer||t.defer===""),Cge=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ige=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,AQ=(t,e)=>{const n=t&&t.to;return di(n)?e?e(n):null:n},ODe={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:R,createComment:P}}=u,O=mP(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const W=e.el=R(""),J=e.anchor=R("");m(W,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,l))},v=()=>{const y=e.target=AQ(e.props,w),T=LDe(y,e,R,m);y&&(o!=="svg"&&Cge(y)?o="svg":o!=="mathml"&&Ige(y)&&(o="mathml"),O||(I(y,T),D4(e,!1)))};O&&(I(n,J),D4(e,!0)),Tge(e.props)?(e.el.__isMounted=!1,Oc(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Tge(e.props)&&t.el.__isMounted===!1){Oc(()=>{ODe.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=mP(t.props),y=v?n:J,T=v?W:I;if(o==="svg"||Cge(J)?o="svg":(o==="mathml"||Ige(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),yne(t,e,!0)):l||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):oF(e,n,W,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=AQ(e.props,w);S&&oF(e,S,null,u,0)}else v&&oF(e,J,I,u,1);D4(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!mP(p);for(let w=0;w<a.length;w++){const R=a[w];s(R,e,n,m,!!R.dynamicChildren)}}},move:oF,hydrate:Udt};function oF(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||mP(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function Udt(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=AQ(e.props,l);if(p){const m=mP(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let R=w;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")e.targetStart=R;else if(R.data==="teleport anchor"){e.targetAnchor=R,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}R=o(R)}e.targetAnchor||LDe(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}D4(e,m)}return e.anchor&&o(e.anchor)}const dne=ODe;function D4(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function LDe(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[xDe]=i,t&&(s(r,t),s(i,t)),i}const Ey=Symbol("_leaveCb"),aF=Symbol("_enterCb");function MDe(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return v1(()=>{t.isMounted=!0}),w1(()=>{t.isUnmounting=!0}),t}const Zu=[Function,Array],FDe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zu,onEnter:Zu,onAfterEnter:Zu,onEnterCancelled:Zu,onBeforeLeave:Zu,onLeave:Zu,onAfterLeave:Zu,onLeaveCancelled:Zu,onBeforeAppear:Zu,onAppear:Zu,onAfterAppear:Zu,onAppearCancelled:Zu},VDe=t=>{const e=t.subTree;return e.component?VDe(e.component):e},qdt={name:"BaseTransition",props:FDe,setup(t,{slots:e}){const n=eg(),s=MDe();return()=>{const r=e.default&&fne(e.default(),!0);if(!r||!r.length)return;const i=UDe(r),o=An(t),{mode:a}=o;if(s.isLeaving)return vW(i);const l=Sge(i);if(!l)return vW(i);let u=kx(l,o,s,n,d=>u=d);l.type!==Wc&&$T(l,u);let h=n.subTree&&Sge(n.subTree);if(h&&h.type!==Wc&&!bE(l,h)&&VDe(n).type!==Wc){let d=kx(h,o,s,n);if($T(h,d),a==="out-in"&&l.type!==Wc)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},vW(i);a==="in-out"&&l.type!==Wc?d.delayLeave=(p,m,w)=>{const R=qDe(s,h);R[String(h.key)]=h,p[Ey]=()=>{m(),p[Ey]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function UDe(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Wc){e=n;break}}return e}const jdt=qdt;function qDe(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function kx(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),W=qDe(n,t),J=(y,T)=>{y&&ef(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),kt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[Ey]&&y[Ey](!0);const S=W[q];S&&bE(t,S)&&S.el[Ey]&&S.el[Ey](),J(T,[y])},enter(y){let T=u,S=h,E=d;if(!n.isMounted)if(i)T=O||u,S=M||h,E=V||d;else return;let b=!1;const G=y[aF]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[aF]=void 0)};T?I(T,[y,G]):G()},leave(y,T){const S=String(t.key);if(y[aF]&&y[aF](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Ey]=G=>{E||(E=!0,T(),G?J(R,[y]):J(w,[y]),y[Ey]=void 0,W[S]===t&&delete W[S])};W[S]=t,m?I(m,[y,b]):b()},clone(y){const T=kx(y,e,n,s,r);return r&&r(T),T}};return v}function vW(t){if(gB(t))return t=cw(t),t.children=null,t}function Sge(t){if(!gB(t))return DDe(t.type)&&t.children?UDe(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ht(n.default))return n.default()}}function $T(t,e){t.shapeFlag&6&&t.component?(t.transition=e,$T(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function fne(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===iu?(o.patchFlag&128&&r++,s=s.concat(fne(o.children,e,a))):(e||o.type!==Wc)&&s.push(a!=null?cw(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function UC(t,e){return Ht(t)?Bo({name:t.name},e,{setup:t}):t}function jDe(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function _P(t,e,n,s,r=!1){if(kt(t)){t.forEach((w,R)=>_P(w,e&&(kt(e)?e[R]:e),n,s,r));return}if(yP(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&_P(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?kB(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===zs?a.refs={}:a.refs,d=a.setupState,p=An(d),m=d===zs?()=>!1:w=>ms(p,w);if(u!=null&&u!==l&&(di(u)?(h[u]=null,m(u)&&(d[u]=null)):$i(u)&&(u.value=null)),Ht(l))ZL(l,a,12,[o,h]);else{const w=di(l),R=$i(l);if(w||R){const P=()=>{if(t.f){const O=w?m(l)?d[l]:h[l]:l.value;r?kt(O)&&Zte(O,i):kt(O)?O.includes(i)||O.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):R&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Oc(P,n)):P()}}}lB().requestIdleCallback;lB().cancelIdleCallback;const yP=t=>!!t.type.__asyncLoader,gB=t=>t.type.__isKeepAlive;function mB(t,e){BDe(t,"a",e)}function _B(t,e){BDe(t,"da",e)}function BDe(t,e,n=hc){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(yB(e,s,n),n){let r=n.parent;for(;r&&r.parent;)gB(r.parent.vnode)&&Bdt(s,e,n,r),r=r.parent}}function Bdt(t,e,n,s){const r=yB(e,t,s,!0);b1(()=>{Zte(s[e],r)},n)}function yB(t,e,n=hc,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Km();const a=iM(n),l=ef(e,n,t,o);return a(),Qm(),l});return s?r.unshift(i):r.push(i),i}}const M_=t=>(e,n=hc)=>{(!Ax||t==="sp")&&yB(t,(...s)=>e(...s),n)},vB=M_("bm"),v1=M_("m"),wB=M_("bu"),nM=M_("u"),w1=M_("bum"),b1=M_("um"),$dt=M_("sp"),zdt=M_("rtg"),Hdt=M_("rtc");function Wdt(t,e=hc){yB("ec",t,e)}const Gdt="components";function bB(t,e){return Qdt(Gdt,t,!0,e)||t}const Kdt=Symbol.for("v-ndc");function Qdt(t,e,n=!0,s=!1){const r=Fu||hc;if(r){const i=r.type;{const a=Lft(i,!1);if(a&&(a===e||a===Dh(e)||a===cB(Dh(e))))return i}const o=kge(r[t]||i[t],e)||kge(r.appContext[t],e);return!o&&s?i:o}}function kge(t,e){return t&&(t[e]||t[Dh(e)]||t[cB(Dh(e))])}function pne(t,e,n,s){let r;const i=n,o=kt(t);if(o||di(t)){const a=o&&xm(t);let l=!1,u=!1;a&&(l=!wh(t),u=aw(t),t=dB(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?$U(pa(t[h])):pa(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Sr(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const PQ=t=>t?aOe(t)?kB(t):PQ(t.parent):null,vP=Bo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>PQ(t.parent),$root:t=>PQ(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>zDe(t),$forceUpdate:t=>t.f||(t.f=()=>{hne(t.update)}),$nextTick:t=>t.n||(t.n=eM.bind(t.proxy)),$watch:t=>mft.bind(t)}),wW=(t,e)=>t!==zs&&!t.__isScriptSetup&&ms(t,e),Ydt={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(wW(s,e))return o[e]=1,s[e];if(r!==zs&&ms(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&ms(u,e))return o[e]=3,i[e];if(n!==zs&&ms(n,e))return o[e]=4,n[e];NQ&&(o[e]=0)}}const h=vP[e];let d,p;if(h)return e==="$attrs"&&Ja(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==zs&&ms(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ms(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return wW(r,e)?(r[e]=n,!0):s!==zs&&ms(s,e)?(s[e]=n,!0):ms(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==zs&&ms(t,o)||wW(e,o)||(a=i[0])&&ms(a,o)||ms(s,o)||ms(vP,o)||ms(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ms(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Rge(t){return kt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let NQ=!0;function Xdt(t){const e=zDe(t),n=t.proxy,s=t.ctx;NQ=!1,e.beforeCreate&&Age(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:R,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:W,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:G}=e;if(u&&Jdt(u,s,null),o)for(const ae in o){const oe=o[ae];Ht(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);Sr(ae)&&(t.data=L_(ae))}if(NQ=!0,i)for(const ae in i){const oe=i[ae],de=Ht(oe)?oe.bind(n,n):Ht(oe.get)?oe.get.bind(n,n):tp,ct=!Ht(oe)&&Ht(oe.set)?oe.set.bind(n):tp,Ke=st({get:de,set:ct});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Qe=>Ke.value=Qe})}if(a)for(const ae in a)$De(a[ae],s,n,ae);if(l){const ae=Ht(l)?l.call(n):l;Reflect.ownKeys(ae).forEach(oe=>{aT(oe,ae[oe])})}h&&Age(h,t,"c");function ne(ae,oe){kt(oe)?oe.forEach(de=>ae(de.bind(n))):oe&&ae(oe.bind(n))}if(ne(vB,d),ne(v1,p),ne(wB,m),ne(nM,w),ne(mB,R),ne(_B,P),ne(Wdt,v),ne(Hdt,J),ne(zdt,I),ne(w1,M),ne(b1,q),ne($dt,y),kt(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:de=>n[oe]=de,enumerable:!0})})}else t.exposed||(t.exposed={});W&&t.render===tp&&(t.render=W),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&jDe(t)}function Jdt(t,e,n=tp){kt(t)&&(t=xQ(t));for(const s in t){const r=t[s];let i;Sr(r)?"default"in r?i=cl(r.from||s,r.default,!0):i=cl(r.from||s):i=cl(r),$i(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Age(t,e,n){ef(kt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function $De(t,e,n,s){let r=s.includes(".")?nOe(n,s):()=>n[s];if(di(t)){const i=e[t];Ht(i)&&fv(r,i)}else if(Ht(t))fv(r,t.bind(n));else if(Sr(t))if(kt(t))t.forEach(i=>$De(i,e,n,s));else{const i=Ht(t.handler)?t.handler.bind(n):e[t.handler];Ht(i)&&fv(r,i,t)}}function zDe(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>GU(l,u,o,!0)),GU(l,e,o)),Sr(e)&&i.set(e,l),l}function GU(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&GU(t,i,n,!0),r&&r.forEach(o=>GU(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Zdt[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Zdt={data:Pge,props:Nge,emits:Nge,methods:wA,computed:wA,beforeCreate:Ac,created:Ac,beforeMount:Ac,mounted:Ac,beforeUpdate:Ac,updated:Ac,beforeDestroy:Ac,beforeUnmount:Ac,destroyed:Ac,unmounted:Ac,activated:Ac,deactivated:Ac,errorCaptured:Ac,serverPrefetch:Ac,components:wA,directives:wA,watch:tft,provide:Pge,inject:eft};function Pge(t,e){return e?t?function(){return Bo(Ht(t)?t.call(this,this):t,Ht(e)?e.call(this,this):e)}:e:t}function eft(t,e){return wA(xQ(t),xQ(e))}function xQ(t){if(kt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ac(t,e){return t?[...new Set([].concat(t,e))]:e}function wA(t,e){return t?Bo(Object.create(null),t,e):e}function Nge(t,e){return t?kt(t)&&kt(e)?[...new Set([...t,...e])]:Bo(Object.create(null),Rge(t),Rge(e??{})):e}function tft(t,e){if(!t)return e;if(!e)return t;const n=Bo(Object.create(null),t);for(const s in e)n[s]=Ac(t[s],e[s]);return n}function HDe(){return{app:null,config:{isNativeTag:Qht,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nft=0;function sft(t,e){return function(n,s=null){Ht(n)||(n=Bo({},n)),s!=null&&!Sr(s)&&(s=null);const r=HDe(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:nft++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Fft,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&Ht(u.install)?(i.add(u),u.install(l,...h)):Ht(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||ua(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,kB(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(ef(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=oT;oT=l;try{return u()}finally{oT=h}}};return l}}let oT=null;function aT(t,e){if(hc){let n=hc.provides;const s=hc.parent&&hc.parent.provides;s===n&&(n=hc.provides=Object.create(s)),n[t]=e}}function cl(t,e,n=!1){const s=eg();if(s||oT){let r=oT?oT._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ht(e)?e.call(s&&s.proxy):e}}function gne(){return!!(eg()||oT)}const WDe={},GDe=()=>Object.create(WDe),KDe=t=>Object.getPrototypeOf(t)===WDe;function rft(t,e,n,s=!1){const r={},i=GDe();t.propsDefaults=Object.create(null),QDe(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:JL(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function ift(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=An(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(EB(t.emitsOptions,p))continue;const m=e[p];if(l)if(ms(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Dh(p);r[w]=DQ(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{QDe(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!ms(e,d)&&((h=VC(d))===d||!ms(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=DQ(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!ms(e,d))&&(delete i[d],u=!0)}u&&nm(t.attrs,"set","")}function QDe(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(fP(l))continue;const u=e[l];let h;r&&ms(r,h=Dh(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:EB(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=An(n),u=a||zs;for(let h=0;h<i.length;h++){const d=i[h];n[d]=DQ(r,l,d,u[d],t,!ms(u,d))}}return o}function DQ(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=ms(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ht(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=iM(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===VC(n))&&(s=!0))}return s}const oft=new WeakMap;function YDe(t,e,n=!1){const s=n?oft:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Ht(t)){const h=d=>{l=!0;const[p,m]=YDe(d,e,!0);Bo(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Sr(t)&&s.set(t,DI),DI;if(kt(i))for(let h=0;h<i.length;h++){const d=Dh(i[h]);xge(d)&&(o[d]=zs)}else if(i)for(const h in i){const d=Dh(h);if(xge(d)){const p=i[h],m=o[d]=kt(p)||Ht(p)?{type:p}:Bo({},p),w=m.type;let R=!1,P=!0;if(kt(w))for(let O=0;O<w.length;++O){const M=w[O],V=Ht(M)&&M.name;if(V==="Boolean"){R=!0;break}else V==="String"&&(P=!1)}else R=Ht(w)&&w.name==="Boolean";m[0]=R,m[1]=P,(R||ms(m,"default"))&&a.push(d)}}const u=[o,a];return Sr(t)&&s.set(t,u),u}function xge(t){return t[0]!=="$"&&!fP(t)}const mne=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",_ne=t=>kt(t)?t.map(Vf):[Vf(t)],aft=(t,e,n)=>{if(e._n)return e;const s=pB((...r)=>_ne(e(...r)),n);return s._c=!1,s},XDe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(mne(r))continue;const i=t[r];if(Ht(i))e[r]=aft(r,i,s);else if(i!=null){const o=_ne(i);e[r]=()=>o}}},JDe=(t,e)=>{const n=_ne(e);t.slots.default=()=>n},ZDe=(t,e,n)=>{for(const s in e)(n||!mne(s))&&(t[s]=e[s])},cft=(t,e,n)=>{const s=t.slots=GDe();if(t.vnode.shapeFlag&32){const r=e.__;r&&IQ(s,"__",r,!0);const i=e._;i?(ZDe(s,e,n),n&&IQ(s,"_",i,!0)):XDe(e,s)}else e&&JDe(t,e)},lft=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=zs;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:ZDe(r,e,n):(i=!e.$stable,XDe(e,r)),o=e}else e&&(JDe(t,e),o={default:1});if(i)for(const a in r)!mne(a)&&o[a]==null&&delete r[a]},Oc=Tft;function uft(t){return hft(t)}function hft(t,e){const n=lB();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=tp,insertStaticContent:w}=t,R=(k,C,A,x=null,L=null,U=null,j=void 0,H=null,$=!!C.dynamicChildren)=>{if(k===C)return;k&&!bE(k,C)&&(x=F(k),ge(k,L,U,!0),k=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Y,shapeFlag:X}=C;switch(B){case TB:P(k,C,A,x);break;case Wc:O(k,C,A,x);break;case EW:k==null&&M(C,A,x,j);break;case iu:E(k,C,A,x,L,U,j,H,$);break;default:X&1?W(k,C,A,x,L,U,j,H,$):X&6?b(k,C,A,x,L,U,j,H,$):(X&64||X&128)&&B.process(k,C,A,x,L,U,j,H,$,ee)}Y!=null&&L?_P(Y,k&&k.ref,U,C||k,!C):Y==null&&k&&k.ref!=null&&_P(k.ref,null,U,k,!0)},P=(k,C,A,x)=>{if(k==null)s(C.el=a(C.children),A,x);else{const L=C.el=k.el;C.children!==k.children&&u(L,C.children)}},O=(k,C,A,x)=>{k==null?s(C.el=l(C.children||""),A,x):C.el=k.el},M=(k,C,A,x)=>{[k.el,k.anchor]=w(k.children,C,A,x,k.el,k.anchor)},V=({el:k,anchor:C},A,x)=>{let L;for(;k&&k!==C;)L=p(k),s(k,A,x),k=L;s(C,A,x)},q=({el:k,anchor:C})=>{let A;for(;k&&k!==C;)A=p(k),r(k),k=A;r(C)},W=(k,C,A,x,L,U,j,H,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),k==null?J(C,A,x,L,U,j,H,$):y(k,C,L,U,j,H,$)},J=(k,C,A,x,L,U,j,H)=>{let $,B;const{props:Y,shapeFlag:X,transition:Z,dirs:te}=k;if($=k.el=o(k.type,U,Y&&Y.is,Y),X&8?h($,k.children):X&16&&v(k.children,$,null,x,L,bW(k,U),j,H),te&&jb(k,null,x,"created"),I($,k,k.scopeId,j,x),Y){for(const re in Y)re!=="value"&&!fP(re)&&i($,re,null,Y[re],U,x);"value"in Y&&i($,"value",null,Y.value,U),(B=Y.onVnodeBeforeMount)&&df(B,x,k)}te&&jb(k,null,x,"beforeMount");const ie=dft(L,Z);ie&&Z.beforeEnter($),s($,C,A),((B=Y&&Y.onVnodeMounted)||ie||te)&&Oc(()=>{B&&df(B,x,k),ie&&Z.enter($),te&&jb(k,null,x,"mounted")},L)},I=(k,C,A,x,L)=>{if(A&&m(k,A),x)for(let U=0;U<x.length;U++)m(k,x[U]);if(L){let U=L.subTree;if(C===U||rOe(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(k,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(k,C,A,x,L,U,j,H,$=0)=>{for(let B=$;B<k.length;B++){const Y=k[B]=H?Ty(k[B]):Vf(k[B]);R(null,Y,C,A,x,L,U,j,H)}},y=(k,C,A,x,L,U,j)=>{const H=C.el=k.el;let{patchFlag:$,dynamicChildren:B,dirs:Y}=C;$|=k.patchFlag&16;const X=k.props||zs,Z=C.props||zs;let te;if(A&&Bb(A,!1),(te=Z.onVnodeBeforeUpdate)&&df(te,A,C,k),Y&&jb(C,k,A,"beforeUpdate"),A&&Bb(A,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(H,""),B?T(k.dynamicChildren,B,H,A,x,bW(C,L),U):j||de(k,C,H,null,A,x,bW(C,L),U,!1),$>0){if($&16)S(H,X,Z,A,L);else if($&2&&X.class!==Z.class&&i(H,"class",null,Z.class,L),$&4&&i(H,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],fe=X[se],Se=Z[se];(Se!==fe||se==="value")&&i(H,se,fe,Se,L,A)}}$&1&&k.children!==C.children&&h(H,C.children)}else!j&&B==null&&S(H,X,Z,A,L);((te=Z.onVnodeUpdated)||Y)&&Oc(()=>{te&&df(te,A,C,k),Y&&jb(C,k,A,"updated")},x)},T=(k,C,A,x,L,U,j)=>{for(let H=0;H<C.length;H++){const $=k[H],B=C[H],Y=$.el&&($.type===iu||!bE($,B)||$.shapeFlag&198)?d($.el):A;R($,B,Y,null,x,L,U,j,!0)}},S=(k,C,A,x,L)=>{if(C!==A){if(C!==zs)for(const U in C)!fP(U)&&!(U in A)&&i(k,U,C[U],null,L,x);for(const U in A){if(fP(U))continue;const j=A[U],H=C[U];j!==H&&U!=="value"&&i(k,U,H,j,L,x)}"value"in A&&i(k,"value",C.value,A.value,L)}},E=(k,C,A,x,L,U,j,H,$)=>{const B=C.el=k?k.el:a(""),Y=C.anchor=k?k.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(H=H?H.concat(te):te),k==null?(s(B,A,x),s(Y,A,x),v(C.children||[],A,Y,L,U,j,H,$)):X>0&&X&64&&Z&&k.dynamicChildren?(T(k.dynamicChildren,Z,A,L,U,j,H),(C.key!=null||L&&C===L.subTree)&&yne(k,C,!0)):de(k,C,A,Y,L,U,j,H,$)},b=(k,C,A,x,L,U,j,H,$)=>{C.slotScopeIds=H,k==null?C.shapeFlag&512?L.ctx.activate(C,A,x,j,$):G(C,A,x,L,U,j,$):ne(k,C,$)},G=(k,C,A,x,L,U,j)=>{const H=k.component=Pft(k,x,L);if(gB(k)&&(H.ctx.renderer=ee),Nft(H,!1,j),H.asyncDep){if(L&&L.registerDep(H,ae,j),!k.el){const $=H.subTree=ua(Wc);O(null,$,C,A),k.placeholder=$.el}}else ae(H,k,C,A,L,U,j)},ne=(k,C,A)=>{const x=C.component=k.component;if(bft(k,C,A))if(x.asyncDep&&!x.asyncResolved){oe(x,C,A);return}else x.next=C,x.update();else C.el=k.el,x.vnode=C},ae=(k,C,A,x,L,U,j)=>{const H=()=>{if(k.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=k;{const We=eOe(k);if(We){X&&(X.el=re.el,oe(k,X,j)),We.asyncDep.then(()=>{k.isUnmounted||H()});return}}let se=X,fe;Bb(k,!1),X?(X.el=re.el,oe(k,X,j)):X=re,Z&&pW(Z),(fe=X.props&&X.props.onVnodeBeforeUpdate)&&df(fe,ie,X,re),Bb(k,!0);const Se=Oge(k),Ve=k.subTree;k.subTree=Se,R(Ve,Se,d(Ve.el),F(Ve),k,L,U),X.el=Se.el,se===null&&Eft(k,Se.el),te&&Oc(te,L),(fe=X.props&&X.props.onVnodeUpdated)&&Oc(()=>df(fe,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:fe,type:Se}=k,Ve=yP(C);Bb(k,!1),ie&&pW(ie),!Ve&&(X=te&&te.onVnodeBeforeMount)&&df(X,se,C),Bb(k,!0);{fe.ce&&fe.ce._def.shadowRoot!==!1&&fe.ce._injectChildStyle(Se);const We=k.subTree=Oge(k);R(null,We,A,x,k,L,U),C.el=We.el}if(re&&Oc(re,L),!Ve&&(X=te&&te.onVnodeMounted)){const We=C;Oc(()=>df(X,se,We),L)}(C.shapeFlag&256||se&&yP(se.vnode)&&se.vnode.shapeFlag&256)&&k.a&&Oc(k.a,L),k.isMounted=!0,C=A=x=null}};k.scope.on();const $=k.effect=new uDe(H);k.scope.off();const B=k.update=$.run.bind($),Y=k.job=$.runIfDirty.bind($);Y.i=k,Y.id=k.uid,$.scheduler=()=>hne(Y),Bb(k,!0),B()},oe=(k,C,A)=>{C.component=k;const x=k.vnode.props;k.vnode=C,k.next=null,ift(k,C.props,x,A),lft(k,C.children,A),Km(),Ege(k),Qm()},de=(k,C,A,x,L,U,j,H,$=!1)=>{const B=k&&k.children,Y=k?k.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){Ke(B,X,A,x,L,U,j,H,$);return}else if(Z&256){ct(B,X,A,x,L,U,j,H,$);return}}te&8?(Y&16&&Fe(B,L,U),X!==B&&h(A,X)):Y&16?te&16?Ke(B,X,A,x,L,U,j,H,$):Fe(B,L,U,!0):(Y&8&&h(A,""),te&16&&v(X,A,x,L,U,j,H,$))},ct=(k,C,A,x,L,U,j,H,$)=>{k=k||DI,C=C||DI;const B=k.length,Y=C.length,X=Math.min(B,Y);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?Ty(C[Z]):Vf(C[Z]);R(k[Z],te,A,null,L,U,j,H,$)}B>Y?Fe(k,L,U,!0,!1,X):v(C,A,x,L,U,j,H,$,X)},Ke=(k,C,A,x,L,U,j,H,$)=>{let B=0;const Y=C.length;let X=k.length-1,Z=Y-1;for(;B<=X&&B<=Z;){const te=k[B],ie=C[B]=$?Ty(C[B]):Vf(C[B]);if(bE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;B++}for(;B<=X&&B<=Z;){const te=k[X],ie=C[Z]=$?Ty(C[Z]):Vf(C[Z]);if(bE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Y?C[te].el:x;for(;B<=Z;)R(null,C[B]=$?Ty(C[B]):Vf(C[B]),A,ie,L,U,j,H,$),B++}}else if(B>Z)for(;B<=X;)ge(k[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const Ue=C[B]=$?Ty(C[B]):Vf(C[B]);Ue.key!=null&&re.set(Ue.key,B)}let se,fe=0;const Se=Z-ie+1;let Ve=!1,We=0;const Ge=new Array(Se);for(B=0;B<Se;B++)Ge[B]=0;for(B=te;B<=X;B++){const Ue=k[B];if(fe>=Se){ge(Ue,L,U,!0);continue}let Le;if(Ue.key!=null)Le=re.get(Ue.key);else for(se=ie;se<=Z;se++)if(Ge[se-ie]===0&&bE(Ue,C[se])){Le=se;break}Le===void 0?ge(Ue,L,U,!0):(Ge[Le-ie]=B+1,Le>=We?We=Le:Ve=!0,R(Ue,C[Le],A,null,L,U,j,H,$),fe++)}const ss=Ve?fft(Ge):DI;for(se=ss.length-1,B=Se-1;B>=0;B--){const Ue=ie+B,Le=C[Ue],rs=C[Ue+1],Pr=Ue+1<Y?rs.el||rs.placeholder:x;Ge[B]===0?R(null,Le,A,Pr,L,U,j,H,$):Ve&&(se<0||B!==ss[se]?Qe(Le,A,Pr,2):se--)}}},Qe=(k,C,A,x,L=null)=>{const{el:U,type:j,transition:H,children:$,shapeFlag:B}=k;if(B&6){Qe(k.component.subTree,C,A,x);return}if(B&128){k.suspense.move(C,A,x);return}if(B&64){j.move(k,C,A,ee);return}if(j===iu){s(U,C,A);for(let Y=0;Y<$.length;Y++)Qe($[Y],C,A,x);s(k.anchor,C,A);return}if(j===EW){V(k,C,A);return}if(x!==2&&B&1&&H)if(x===0)H.beforeEnter(U),s(U,C,A),Oc(()=>H.enter(U),L);else{const{leave:Y,delayLeave:X,afterLeave:Z}=H,te=()=>{k.ctx.isUnmounted?r(U):s(U,C,A)},ie=()=>{Y(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,A)},ge=(k,C,A,x=!1,L=!1)=>{const{type:U,props:j,ref:H,children:$,dynamicChildren:B,shapeFlag:Y,patchFlag:X,dirs:Z,cacheIndex:te}=k;if(X===-2&&(L=!1),H!=null&&(Km(),_P(H,null,A,k,!0),Qm()),te!=null&&(C.renderCache[te]=void 0),Y&256){C.ctx.deactivate(k);return}const ie=Y&1&&Z,re=!yP(k);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&df(se,C,k),Y&6)it(k.component,A,x);else{if(Y&128){k.suspense.unmount(A,x);return}ie&&jb(k,null,C,"beforeUnmount"),Y&64?k.type.remove(k,C,A,ee,x):B&&!B.hasOnce&&(U!==iu||X>0&&X&64)?Fe(B,C,A,!1,!0):(U===iu&&X&384||!L&&Y&16)&&Fe($,C,A),x&&he(k)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&Oc(()=>{se&&df(se,C,k),ie&&jb(k,null,C,"unmounted")},A)},he=k=>{const{type:C,el:A,anchor:x,transition:L}=k;if(C===iu){qt(A,x);return}if(C===EW){q(k);return}const U=()=>{r(A),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(k.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:H}=L,$=()=>j(A,U);H?H(k.el,U,$):$()}else U()},qt=(k,C)=>{let A;for(;k!==C;)A=p(k),r(k),k=A;r(C)},it=(k,C,A)=>{const{bum:x,scope:L,job:U,subTree:j,um:H,m:$,a:B,parent:Y,slots:{__:X}}=k;Dge($),Dge(B),x&&pW(x),Y&&kt(X)&&X.forEach(Z=>{Y.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ge(j,k,C,A)),H&&Oc(H,C),Oc(()=>{k.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Fe=(k,C,A,x=!1,L=!1,U=0)=>{for(let j=U;j<k.length;j++)ge(k[j],C,A,x,L)},F=k=>{if(k.shapeFlag&6)return F(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const C=p(k.anchor||k.el),A=C&&C[xDe];return A?p(A):C};let Q=!1;const K=(k,C,A)=>{k==null?C._vnode&&ge(C._vnode,null,null,!0):R(C._vnode||null,k,C,null,null,null,A),C._vnode=k,Q||(Q=!0,Ege(),ADe(),Q=!1)},ee={p:R,um:ge,m:Qe,r:he,mt:G,mc:v,pc:de,pbc:T,n:F,o:t};return{render:K,hydrate:void 0,createApp:sft(K)}}function bW({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Bb({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function dft(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function yne(t,e,n=!1){const s=t.children,r=e.children;if(kt(s)&&kt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ty(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&yne(o,a)),a.type===TB&&(a.el=o.el),a.type===Wc&&!a.el&&(a.el=o.el)}}function fft(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function eOe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:eOe(e)}function Dge(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pft=Symbol.for("v-scx"),gft=()=>cl(pft);function fv(t,e,n){return tOe(t,e,n)}function tOe(t,e,n=zs){const{immediate:s,deep:r,flush:i,once:o}=n,a=Bo({},n),l=e&&s||!e&&i!=="post";let u;if(Ax){if(i==="sync"){const m=gft();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=tp,m.resume=tp,m.pause=tp,m}}const h=hc;a.call=(m,w,R)=>ef(m,h,w,R);let d=!1;i==="post"?a.scheduler=m=>{Oc(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():hne(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Ldt(t,e,a);return Ax&&(u?u.push(p):l&&p()),p}function mft(t,e,n){const s=this.proxy,r=di(t)?t.includes(".")?nOe(s,t):()=>s[t]:t.bind(s,s);let i;Ht(e)?i=e:(i=e.handler,n=e);const o=iM(this),a=tOe(r,i.bind(s),n);return o(),a}function nOe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const _ft=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Dh(e)}Modifiers`]||t[`${VC(e)}Modifiers`];function yft(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||zs;let r=n;const i=e.startsWith("update:"),o=i&&_ft(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>di(h)?h.trim():h)),o.number&&(r=n.map(edt)));let a,l=s[a=fW(e)]||s[a=fW(Dh(e))];!l&&i&&(l=s[a=fW(VC(e))]),l&&ef(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ef(u,t,6,r)}}function sOe(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Ht(t)){const l=u=>{const h=sOe(u,e,!0);h&&(a=!0,Bo(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Sr(t)&&s.set(t,null),null):(kt(i)?i.forEach(l=>o[l]=null):Bo(o,i),Sr(t)&&s.set(t,o),o)}function EB(t,e){return!t||!iB(e)?!1:(e=e.slice(2).replace(/Once$/,""),ms(t,e[0].toLowerCase()+e.slice(1))||ms(t,VC(e))||ms(t,e))}function Oge(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:R}=t,P=WU(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,W=q;O=Vf(u.call(W,q,h,d,m,p,w)),M=a}else{const q=e;O=Vf(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:vft(a)}}catch(q){wP.length=0,fB(q,t,1),O=ua(Wc)}let V=O;if(M&&R!==!1){const q=Object.keys(M),{shapeFlag:W}=V;q.length&&W&7&&(i&&q.some(Jte)&&(M=wft(M,i)),V=cw(V,M,!1,!0))}return n.dirs&&(V=cw(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&$T(V,n.transition),O=V,WU(P),O}const vft=t=>{let e;for(const n in t)(n==="class"||n==="style"||iB(n))&&((e||(e={}))[n]=t[n]);return e},wft=(t,e)=>{const n={};for(const s in t)(!Jte(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function bft(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Lge(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!EB(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Lge(s,o,u):!0:!!o;return!1}function Lge(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!EB(n,i))return!0}return!1}function Eft({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const rOe=t=>t.__isSuspense;function Tft(t,e){e&&e.pendingBranch?kt(t)?e.effects.push(...t):e.effects.push(t):Vdt(t)}const iu=Symbol.for("v-fgt"),TB=Symbol.for("v-txt"),Wc=Symbol.for("v-cmt"),EW=Symbol.for("v-stc"),wP=[];let Vu=null;function sM(t=!1){wP.push(Vu=t?null:[])}function Cft(){wP.pop(),Vu=wP[wP.length-1]||null}let Rx=1;function Mge(t,e=!1){Rx+=t,t<0&&Vu&&e&&(Vu.hasOnce=!0)}function iOe(t){return t.dynamicChildren=Rx>0?Vu||DI:null,Cft(),Rx>0&&Vu&&Vu.push(t),t}function CB(t,e,n,s,r,i){return iOe(rM(t,e,n,s,r,i,!0))}function IB(t,e,n,s,r){return iOe(ua(t,e,n,s,r,!0))}function KU(t){return t?t.__v_isVNode===!0:!1}function bE(t,e){return t.type===e.type&&t.key===e.key}const oOe=({key:t})=>t??null,O4=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?di(t)||$i(t)||Ht(t)?{i:Fu,r:t,k:e,f:!!n}:t:null);function rM(t,e=null,n=null,s=0,r=null,i=t===iu?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oOe(e),ref:e&&O4(e),scopeId:NDe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fu};return a?(wne(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=di(n)?8:16),Rx>0&&!o&&Vu&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Vu.push(l),l}const ua=Ift;function Ift(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Kdt)&&(t=Wc),KU(t)){const a=cw(t,e,!0);return n&&wne(a,n),Rx>0&&!i&&Vu&&(a.shapeFlag&6?Vu[Vu.indexOf(t)]=a:Vu.push(a)),a.patchFlag=-2,a}if(Mft(t)&&(t=t.__vccOpts),e){e=Sft(e);let{class:a,style:l}=e;a&&!di(a)&&(e.class=y1(a)),Sr(l)&&(lne(l)&&!kt(l)&&(l=Bo({},l)),e.style=_1(l))}const o=di(t)?1:rOe(t)?128:DDe(t)?64:Sr(t)?4:Ht(t)?2:0;return rM(t,e,n,s,r,o,i,!0)}function Sft(t){return t?lne(t)||KDe(t)?Bo({},t):t:null}function cw(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?kft(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&oOe(u),ref:e&&e.ref?n&&i?kt(i)?i.concat(O4(e)):[i,O4(e)]:O4(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==iu?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cw(t.ssContent),ssFallback:t.ssFallback&&cw(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&$T(h,l.clone(h)),h}function SB(t=" ",e=0){return ua(TB,null,t,e)}function vne(t="",e=!1){return e?(sM(),IB(Wc,null,t)):ua(Wc,null,t)}function Vf(t){return t==null||typeof t=="boolean"?ua(Wc):kt(t)?ua(iu,null,t.slice()):KU(t)?Ty(t):ua(TB,null,String(t))}function Ty(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cw(t)}function wne(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(kt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),wne(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!KDe(e)?e._ctx=Fu:r===3&&Fu&&(Fu.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ht(e)?(e={default:e,_ctx:Fu},n=32):(e=String(e),s&64?(n=16,e=[SB(e)]):n=8);t.children=e,t.shapeFlag|=n}function kft(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=y1([e.class,s.class]));else if(r==="style")e.style=_1([e.style,s.style]);else if(iB(r)){const i=e[r],o=s[r];o&&i!==o&&!(kt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function df(t,e,n,s=null){ef(t,e,7,[n,s])}const Rft=HDe();let Aft=0;function Pft(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Rft,i={uid:Aft++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lDe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:YDe(s,r),emitsOptions:sOe(s,r),emit:null,emitted:null,propsDefaults:zs,inheritAttrs:s.inheritAttrs,ctx:zs,data:zs,props:zs,attrs:zs,slots:zs,refs:zs,setupState:zs,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=yft.bind(null,i),t.ce&&t.ce(i),i}let hc=null;const eg=()=>hc||Fu;let QU,OQ;{const t=lB(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};QU=e("__VUE_INSTANCE_SETTERS__",n=>hc=n),OQ=e("__VUE_SSR_SETTERS__",n=>Ax=n)}const iM=t=>{const e=hc;return QU(t),t.scope.on(),()=>{t.scope.off(),QU(e)}},Fge=()=>{hc&&hc.scope.off(),QU(null)};function aOe(t){return t.vnode.shapeFlag&4}let Ax=!1;function Nft(t,e=!1,n=!1){e&&OQ(e);const{props:s,children:r}=t.vnode,i=aOe(t);rft(t,s,i,e),cft(t,r,n||e);const o=i?xft(t,e):void 0;return e&&OQ(!1),o}function xft(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ydt);const{setup:s}=n;if(s){Km();const r=t.setupContext=s.length>1?Oft(t):null,i=iM(t),o=ZL(s,t,0,[t.props,r]),a=sDe(o);if(Qm(),i(),(a||t.sp)&&!yP(t)&&jDe(t),a){if(o.then(Fge,Fge),e)return o.then(l=>{Vge(t,l)}).catch(l=>{fB(l,t,0)});t.asyncDep=o}else Vge(t,o)}else cOe(t)}function Vge(t,e,n){Ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Sr(e)&&(t.setupState=SDe(e)),cOe(t)}function cOe(t,e,n){const s=t.type;t.render||(t.render=s.render||tp);{const r=iM(t);Km();try{Xdt(t)}finally{Qm(),r()}}}const Dft={get(t,e){return Ja(t,"get",""),t[e]}};function Oft(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Dft),slots:t.slots,emit:t.emit,expose:e}}function kB(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(SDe(yb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in vP)return vP[n](t)},has(e,n){return n in e||n in vP}})):t.proxy}function Lft(t,e=!0){return Ht(t)?t.displayName||t.name:t.name||e&&t.__name}function Mft(t){return Ht(t)&&"__vccOpts"in t}const st=(t,e)=>Ddt(t,e,Ax);function _t(t,e,n){const s=arguments.length;return s===2?Sr(e)&&!kt(e)?KU(e)?ua(t,null,[e]):ua(t,e):ua(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&KU(n)&&(n=[n]),ua(t,e,n))}const Fft="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let LQ;const Uge=typeof window<"u"&&window.trustedTypes;if(Uge)try{LQ=Uge.createPolicy("vue",{createHTML:t=>t})}catch{}const lOe=LQ?t=>LQ.createHTML(t):t=>t,Vft="http://www.w3.org/2000/svg",Uft="http://www.w3.org/1998/Math/MathML",Kg=typeof document<"u"?document:null,qge=Kg&&Kg.createElement("template"),qft={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Kg.createElementNS(Vft,t):e==="mathml"?Kg.createElementNS(Uft,t):n?Kg.createElement(t,{is:n}):Kg.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Kg.createTextNode(t),createComment:t=>Kg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Kg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{qge.innerHTML=lOe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=qge.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},J_="transition",SR="animation",jS=Symbol("_vtc"),uOe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hOe=Bo({},FDe,uOe),jft=t=>(t.displayName="Transition",t.props=hOe,t),RB=jft((t,{slots:e})=>_t(jdt,dOe(t),e)),$b=(t,e=[])=>{kt(t)?t.forEach(n=>n(...e)):t&&t(...e)},jge=t=>t?kt(t)?t.some(e=>e.length>1):t.length>1:!1;function dOe(t){const e={};for(const E in t)E in uOe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=Bft(r),R=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:W,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,G,ne)=>{E._enterCancelled=ne,hy(E,b?h:a),hy(E,b?u:o),G&&G()},T=(E,b)=>{E._isLeaving=!1,hy(E,d),hy(E,m),hy(E,p),b&&b()},S=E=>(b,G)=>{const ne=E?I:M,ae=()=>y(b,E,G);$b(ne,[b,ae]),Bge(()=>{hy(b,E?l:i),bf(b,E?h:a),jge(ne)||$ge(b,s,R,ae)})};return Bo(e,{onBeforeEnter(E){$b(O,[E]),bf(E,i),bf(E,o)},onBeforeAppear(E){$b(J,[E]),bf(E,l),bf(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const G=()=>T(E,b);bf(E,d),E._enterCancelled?(bf(E,p),MQ()):(MQ(),bf(E,p)),Bge(()=>{E._isLeaving&&(hy(E,d),bf(E,m),jge(q)||$ge(E,s,P,G))}),$b(q,[E,G])},onEnterCancelled(E){y(E,!1,void 0,!0),$b(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),$b(v,[E])},onLeaveCancelled(E){T(E),$b(W,[E])}})}function Bft(t){if(t==null)return null;if(Sr(t))return[TW(t.enter),TW(t.leave)];{const e=TW(t);return[e,e]}}function TW(t){return tdt(t)}function bf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[jS]||(t[jS]=new Set)).add(e)}function hy(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[jS];n&&(n.delete(e),n.size||(t[jS]=void 0))}function Bge(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let $ft=0;function $ge(t,e,n,s){const r=t._endId=++$ft,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=fOe(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function fOe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${J_}Delay`),i=s(`${J_}Duration`),o=zge(r,i),a=s(`${SR}Delay`),l=s(`${SR}Duration`),u=zge(a,l);let h=null,d=0,p=0;e===J_?o>0&&(h=J_,d=o,p=i.length):e===SR?u>0&&(h=SR,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?J_:SR:null,p=h?h===J_?i.length:l.length:0);const m=h===J_&&/\b(transform|all)(,|$)/.test(s(`${J_}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function zge(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Hge(n)+Hge(t[s])))}function Hge(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function MQ(){return document.body.offsetHeight}function zft(t,e,n){const s=t[jS];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const YU=Symbol("_vod"),pOe=Symbol("_vsh"),bne={beforeMount(t,{value:e},{transition:n}){t[YU]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):kR(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),kR(t,!0),s.enter(t)):s.leave(t,()=>{kR(t,!1)}):kR(t,e))},beforeUnmount(t,{value:e}){kR(t,e)}};function kR(t,e){t.style.display=e?t[YU]:"none",t[pOe]=!e}const Hft=Symbol(""),Wft=/(^|;)\s*display\s*:/;function Gft(t,e,n){const s=t.style,r=di(n);let i=!1;if(n&&!r){if(e)if(di(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&L4(s,a,"")}else for(const o in e)n[o]==null&&L4(s,o,"");for(const o in n)o==="display"&&(i=!0),L4(s,o,n[o])}else if(r){if(e!==n){const o=s[Hft];o&&(n+=";"+o),s.cssText=n,i=Wft.test(n)}}else e&&t.removeAttribute("style");YU in t&&(t[YU]=i?s.display:"",t[pOe]&&(s.display="none"))}const Wge=/\s*!important$/;function L4(t,e,n){if(kt(n))n.forEach(s=>L4(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Kft(t,e);Wge.test(n)?t.setProperty(VC(s),n.replace(Wge,""),"important"):t[s]=n}}const Gge=["Webkit","Moz","ms"],CW={};function Kft(t,e){const n=CW[e];if(n)return n;let s=Dh(e);if(s!=="filter"&&s in t)return CW[e]=s;s=cB(s);for(let r=0;r<Gge.length;r++){const i=Gge[r]+s;if(i in t)return CW[e]=i}return e}const Kge="http://www.w3.org/1999/xlink";function Qge(t,e,n,s,r,i=adt(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Kge,e.slice(6,e.length)):t.setAttributeNS(Kge,e,n):n==null||i&&!oDe(n)?t.removeAttribute(e):t.setAttribute(e,i?"":_b(n)?String(n):n)}function Yge(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?lOe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=oDe(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Qft(t,e,n,s){t.addEventListener(e,n,s)}function Yft(t,e,n,s){t.removeEventListener(e,n,s)}const Xge=Symbol("_vei");function Xft(t,e,n,s,r=null){const i=t[Xge]||(t[Xge]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=Jft(e);if(s){const u=i[e]=tpt(s,r);Qft(t,a,u,l)}else o&&(Yft(t,a,o,l),i[e]=void 0)}}const Jge=/(?:Once|Passive|Capture)$/;function Jft(t){let e;if(Jge.test(t)){e={};let n;for(;n=t.match(Jge);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):VC(t.slice(2)),e]}let IW=0;const Zft=Promise.resolve(),ept=()=>IW||(Zft.then(()=>IW=0),IW=Date.now());function tpt(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ef(npt(s,n.value),e,5,[s])};return n.value=t,n.attached=ept(),n}function npt(t,e){if(kt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Zge=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,spt=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?zft(t,s,o):e==="style"?Gft(t,n,s):iB(e)?Jte(e)||Xft(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rpt(t,e,s,o))?(Yge(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qge(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!di(s))?Yge(t,Dh(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Qge(t,e,s,o))};function rpt(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Zge(e)&&Ht(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Zge(e)&&di(n)?!1:e in t}const gOe=new WeakMap,mOe=new WeakMap,XU=Symbol("_moveCb"),eme=Symbol("_enterCb"),ipt=t=>(delete t.props.mode,t),opt=ipt({name:"TransitionGroup",props:Bo({},hOe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=eg(),s=MDe();let r,i;return nM(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!hpt(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(cpt),r.forEach(lpt);const a=r.filter(upt);MQ(),a.forEach(l=>{const u=l.el,h=u.style;bf(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[XU]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[XU]=null,hy(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=An(t),a=dOe(o);let l=o.tag||iu;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),$T(h,kx(h,a,s,n)),gOe.set(h,h.el.getBoundingClientRect()))}i=e.default?fne(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&$T(h,kx(h,a,s,n))}return ua(l,null,i)}}}),apt=opt;function cpt(t){const e=t.el;e[XU]&&e[XU](),e[eme]&&e[eme]()}function lpt(t){mOe.set(t,t.el.getBoundingClientRect())}function upt(t){const e=gOe.get(t),n=mOe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function hpt(t,e,n){const s=t.cloneNode(),r=t[jS];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=fOe(s);return i.removeChild(s),o}const dpt=["ctrl","shift","alt","meta"],fpt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>dpt.some(n=>t[`${n}Key`]&&!e.includes(n))},Ene=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=fpt[e[o]];if(a&&a(r,e))return}return t(r,...i)})},ppt=Bo({patchProp:spt},qft);let tme;function gpt(){return tme||(tme=uft(ppt))}const _Oe=(...t)=>{const e=gpt().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=_pt(s);if(!r)return;const i=e._component;!Ht(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,mpt(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function mpt(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function _pt(t){return di(t)?document.querySelector(t):t}function qC(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function Tne(t,e){for(const n in e)qC(t,n,e[n]);return t}const Np=Zd(!1);let FQ;function ypt(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function vpt(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const yOe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function wpt(t){const e=t.toLowerCase(),n=vpt(e),s=ypt(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Np.value===!0&&(FQ={is:{...r}}),yOe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const nme=navigator.userAgent||navigator.vendor||window.opera,bpt={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Qu={userAgent:nme,is:wpt(nme),has:{touch:yOe},within:{iframe:window.self!==window.top}},BS={install(t){const{$q:e}=t;Np.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Qu),Np.value=!1}),e.platform=L_(this)):e.platform=this}};{let t;qC(Qu.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(BS,Qu),Np.value===!0&&(Object.assign(BS,FQ,bpt),FQ=null)}function vb(t){return yb(UC(t))}function AB(t){return yb(t)}const PB=(t,e)=>{const n=L_(t);for(const s in t)qC(e,s,()=>n[s],r=>{n[s]=r});return e},xp={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(xp,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function lw(){}function Cne(t){return t.button===0}function NB(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Ine(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function oM(t){t.stopPropagation()}function $S(t){t.cancelable!==!1&&t.preventDefault()}function Jg(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function Sne(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",$S,xp.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",$S,xp.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function xB(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],xp[r[3]])})}function DB(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],xp[s[3]])}),t[n]=void 0)}function OB(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const SW=["sm","md","lg","xl"],{passive:sme}=xp,Ept=PB({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:lw,setDebounce:lw,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Qu.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{SW.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&SW.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{SW.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,sme),a=p>0?OB(this.__update,p):this.__update,s.addEventListener("resize",a,sme)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Np.value===!0?e.push(h):h()}}),La=PB({isActive:!1,mode:!1},{__media:void 0,set(t){La.mode=t,t==="auto"?(La.__media===void 0&&(La.__media=window.matchMedia("(prefers-color-scheme: dark)"),La.__updateMedia=()=>{La.set("auto")},La.__media.addListener(La.__updateMedia)),t=La.__media.matches):La.__media!==void 0&&(La.__media.removeListener(La.__updateMedia),La.__media=void 0),La.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){La.set(La.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function Tpt(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let vOe=!1;function Cpt(t){vOe=t.isComposing===!0}function LB(t){return vOe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function zS(t,e){return LB(t)===!0?!1:[].concat(e).includes(t.keyCode)}function wOe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function Ipt({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=wOe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function Spt(){const{is:t}=Qu,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=wOe(t);r!==void 0&&n.add(`platform-${r}`)}}Qu.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Qu.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function kpt(t){for(const e in t)Tpt(e,t[e])}const Rpt={install(t){if(this.__installed!==!0){if(Np.value===!0)Spt();else{const{$q:e}=t;e.config.brand!==void 0&&kpt(e.config.brand);const n=Ipt(Qu,e.config);document.body.classList.add.apply(document.body.classList,n)}Qu.is.ios===!0&&document.body.addEventListener("touchstart",lw),window.addEventListener("keydown",Cpt,!0)}}},bOe=()=>!0;function Apt(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function Ppt(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function Npt(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return bOe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(Apt).map(Ppt)),()=>e.includes(window.location.hash)}const MB={__history:[],add:lw,remove:lw,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Qu.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=bOe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=Npt(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},rme={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function ime(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Cy=PB({__qLang:{}},{getLocale:ime,set(t=rme,e){const n={...t,rtl:t.rtl===!0,getLocale:ime};{if(n.set=Cy.set,Cy.__langConfig===void 0||Cy.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Cy.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Cy.__qLang,Cy.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||rme))}}),xpt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},JU=PB({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=JU.set,Object.assign(JU.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,qC(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||xpt))}}),EOe="_q_",kne="_q_l_",Rne="_q_pc_",Ane="_q_fo_";function Pne(){}const ZU={};let TOe=!1;function Dpt(){TOe=!0}function MI(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(MI(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(MI(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(MI(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function uw(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Nne(t){return Object.prototype.toString.call(t)==="[object Date]"}function xne(t){return typeof t=="number"&&isFinite(t)}const ome=[BS,Rpt,La,Ept,MB,Cy,JU];function Opt(t,e){const n=_Oe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function ame(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function Lpt(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(EOe,n.$q),ame(n,ome),e.components!==void 0&&Object.values(e.components).forEach(s=>{uw(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{uw(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&ame(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&ome.includes(s)===!1)),Np.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const Mpt=function(t,e={}){const n={version:"2.18.2"};TOe===!1?(e.config!==void 0&&Object.assign(ZU,e.config),n.config={...ZU},Dpt()):n.config=e.config||{},Lpt(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},Fpt={name:"Quasar",version:"2.18.2",install:Mpt,lang:Cy,iconSet:JU};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const H0=typeof document<"u";function COe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Vpt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&COe(t.default)}const hs=Object.assign;function kW(t,e){const n={};for(const s in e){const r=e[s];n[s]=tf(r)?r.map(t):t(r)}return n}const bP=()=>{},tf=Array.isArray,IOe=/#/g,Upt=/&/g,qpt=/\//g,jpt=/=/g,Bpt=/\?/g,SOe=/\+/g,$pt=/%5B/g,zpt=/%5D/g,kOe=/%5E/g,Hpt=/%60/g,ROe=/%7B/g,Wpt=/%7C/g,AOe=/%7D/g,Gpt=/%20/g;function Dne(t){return encodeURI(""+t).replace(Wpt,"|").replace($pt,"[").replace(zpt,"]")}function Kpt(t){return Dne(t).replace(ROe,"{").replace(AOe,"}").replace(kOe,"^")}function VQ(t){return Dne(t).replace(SOe,"%2B").replace(Gpt,"+").replace(IOe,"%23").replace(Upt,"%26").replace(Hpt,"`").replace(ROe,"{").replace(AOe,"}").replace(kOe,"^")}function Qpt(t){return VQ(t).replace(jpt,"%3D")}function Ypt(t){return Dne(t).replace(IOe,"%23").replace(Bpt,"%3F")}function Xpt(t){return t==null?"":Ypt(t).replace(qpt,"%2F")}function Px(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Jpt=/\/$/,Zpt=t=>t.replace(Jpt,"");function RW(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=sgt(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Px(o)}}function egt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function cme(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function tgt(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&HS(e.matched[s],n.matched[r])&&POe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function HS(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function POe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!ngt(t[n],e[n]))return!1;return!0}function ngt(t,e){return tf(t)?lme(t,e):tf(e)?lme(e,t):t===e}function lme(t,e){return tf(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function sgt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Z_={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Nx;(function(t){t.pop="pop",t.push="push"})(Nx||(Nx={}));var EP;(function(t){t.back="back",t.forward="forward",t.unknown=""})(EP||(EP={}));function rgt(t){if(!t)if(H0){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Zpt(t)}const igt=/^[^#]+#/;function ogt(t,e){return t.replace(igt,"#")+e}function agt(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const FB=()=>({left:window.scrollX,top:window.scrollY});function cgt(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=agt(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ume(t,e){return(history.state?history.state.position-e:-1)+t}const UQ=new Map;function lgt(t,e){UQ.set(t,e)}function ugt(t){const e=UQ.get(t);return UQ.delete(t),e}let hgt=()=>location.protocol+"//"+location.host;function NOe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),cme(a,"")}return cme(n,t)+s+r}function dgt(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=NOe(t,location),w=n.value,R=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=R?p.position-R.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:Nx.pop,direction:P?P>0?EP.forward:EP.back:EP.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(hs({},p.state,{scroll:FB()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function hme(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?FB():null}}function fgt(t){const{history:e,location:n}=window,s={value:NOe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:hgt()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=hs({},e.state,hme(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=hs({},r.value,e.state,{forward:l,scroll:FB()});i(h.current,h,!0);const d=hs({},hme(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function pgt(t){t=rgt(t);const e=fgt(t),n=dgt(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=hs({location:"",base:t,go:s,createHref:ogt.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ggt(t){return typeof t=="string"||t&&typeof t=="object"}function xOe(t){return typeof t=="string"||typeof t=="symbol"}const DOe=Symbol("");var dme;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(dme||(dme={}));function WS(t,e){return hs(new Error,{type:t,[DOe]:!0},e)}function Lg(t,e){return t instanceof Error&&DOe in t&&(e==null||!!(t.type&e))}const fme="[^/]+?",mgt={sensitive:!1,strict:!1,start:!0,end:!0},_gt=/[.+*?^${}()[\]/\\]/g;function ygt(t,e){const n=hs({},mgt,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(_gt,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:R,optional:P,regexp:O}=p;i.push({name:w,repeatable:R,optional:P});const M=O||fme;if(M!==fme){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=R?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),R&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:R,optional:P}=m,O=w in u?u[w]:"";if(tf(O)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=tf(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function vgt(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function OOe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=vgt(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(pme(s))return 1;if(pme(r))return-1}return r.length-s.length}function pme(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const wgt={type:0,value:""},bgt=/[a-zA-Z0-9_]/;function Egt(t){if(!t)return[[]];if(t==="/")return[[wgt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:bgt.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function Tgt(t,e,n){const s=ygt(Egt(t.path),n),r=hs(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Cgt(t,e){const n=[],s=new Map;e=yme({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,R=mme(d);R.aliasOf=m&&m.record;const P=yme(e,d),O=[R];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of q)O.push(mme(hs({},R,{components:m?m.record.components:R.components,path:W,aliasOf:m?m.record:R})))}let M,V;for(const q of O){const{path:W}=q;if(p&&W[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(W&&I+W)}if(M=Tgt(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!_me(M)&&o(d.name)),LOe(M)&&l(M),R.children){const J=R.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:bP}function o(d){if(xOe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=kgt(d,n);n.splice(p,0,d),d.record.name&&!_me(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},R,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw WS(1,{location:d});P=m.record.name,w=hs(gme(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&gme(d.params,m.keys.map(V=>V.name))),R=m.stringify(w)}else if(d.path!=null)R=d.path,m=n.find(V=>V.re.test(R)),m&&(w=m.parse(R),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw WS(1,{location:d,currentLocation:p});P=m.record.name,w=hs({},p.params,d.params),R=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:R,params:w,matched:O,meta:Sgt(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function gme(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function mme(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Igt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Igt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function _me(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Sgt(t){return t.reduce((e,n)=>hs(e,n.meta),{})}function yme(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function kgt(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;OOe(t,e[i])<0?s=i:n=i+1}const r=Rgt(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function Rgt(t){let e=t;for(;e=e.parent;)if(LOe(e)&&OOe(t,e)===0)return e}function LOe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Agt(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(SOe," "),i=r.indexOf("="),o=Px(i<0?r:r.slice(0,i)),a=i<0?null:Px(r.slice(i+1));if(o in e){let l=e[o];tf(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function vme(t){let e="";for(let n in t){const s=t[n];if(n=Qpt(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(tf(s)?s.map(r=>r&&VQ(r)):[s&&VQ(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function Pgt(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=tf(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Ngt=Symbol(""),wme=Symbol(""),VB=Symbol(""),One=Symbol(""),qQ=Symbol("");function RR(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Iy(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(WS(4,{from:n,to:e})):p instanceof Error?l(p):ggt(p)?l(WS(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function AW(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(COe(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Iy(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Vpt(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Iy(p,n,s,o,a,r)()}))}}return i}function bme(t){const e=cl(VB),n=cl(One),s=st(()=>{const l=np(t.to);return e.resolve(l)}),r=st(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(HS.bind(null,h));if(p>-1)return p;const m=Eme(l[u-2]);return u>1&&Eme(h)===m&&d[d.length-1].path!==m?d.findIndex(HS.bind(null,l[u-2])):p}),i=st(()=>r.value>-1&&Mgt(n.params,s.value.params)),o=st(()=>r.value>-1&&r.value===n.matched.length-1&&POe(n.params,s.value.params));function a(l={}){if(Lgt(l)){const u=e[np(t.replace)?"replace":"push"](np(t.to)).catch(bP);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:st(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function xgt(t){return t.length===1?t[0]:t}const Dgt=UC({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:bme,setup(t,{slots:e}){const n=L_(bme(t)),{options:s}=cl(VB),r=st(()=>({[Tme(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Tme(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&xgt(e.default(n));return t.custom?i:_t("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Ogt=Dgt;function Lgt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Mgt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!tf(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Eme(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Tme=(t,e,n)=>t??e??n,Fgt=UC({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=cl(qQ),r=st(()=>t.route||s.value),i=cl(wme,0),o=st(()=>{let u=np(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=st(()=>r.value.matched[o.value]);aT(wme,st(()=>o.value+1)),aT(Ngt,a),aT(qQ,r);const l=Zd();return fv(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!HS(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return Cme(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,R=_t(p,hs({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return Cme(n.default,{Component:R,route:u})||R}}});function Cme(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Vgt=Fgt;function Ugt(t){const e=Cgt(t.routes,t),n=t.parseQuery||Agt,s=t.stringifyQuery||vme,r=t.history,i=RR(),o=RR(),a=RR(),l=kdt(Z_);let u=Z_;H0&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=kW.bind(null,F=>""+F),d=kW.bind(null,Xpt),p=kW.bind(null,Px);function m(F,Q){let K,ee;return xOe(F)?(K=e.getRecordMatcher(F),ee=Q):ee=F,e.addRoute(ee,K)}function w(F){const Q=e.getRecordMatcher(F);Q&&e.removeRoute(Q)}function R(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Q){if(Q=hs({},Q||l.value),typeof F=="string"){const x=RW(n,F,Q.path),L=e.resolve({path:x.path},Q),U=r.createHref(x.fullPath);return hs(x,L,{params:p(L.params),hash:Px(x.hash),redirectedFrom:void 0,href:U})}let K;if(F.path!=null)K=hs({},F,{path:RW(n,F.path,Q.path).path});else{const x=hs({},F.params);for(const L in x)x[L]==null&&delete x[L];K=hs({},F,{params:d(x)}),Q.params=d(Q.params)}const ee=e.resolve(K,Q),k=F.hash||"";ee.params=h(p(ee.params));const C=egt(s,hs({},F,{hash:Kpt(k),path:ee.path})),A=r.createHref(C);return hs({fullPath:C,hash:k,query:s===vme?Pgt(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:A})}function M(F){return typeof F=="string"?RW(n,F,l.value.path):hs({},F)}function V(F,Q){if(u!==F)return WS(8,{from:Q,to:F})}function q(F){return I(F)}function W(F){return q(hs(M(F),{replace:!0}))}function J(F){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let ee=typeof K=="function"?K(F):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),hs({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Q){const K=u=O(F),ee=l.value,k=F.state,C=F.force,A=F.replace===!0,x=J(K);if(x)return I(hs(M(x),{state:typeof x=="object"?hs({},k,x.state):k,force:C,replace:A}),Q||K);const L=K;L.redirectedFrom=Q;let U;return!C&&tgt(s,ee,K)&&(U=WS(16,{to:L,from:ee}),Qe(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Lg(j)?Lg(j,2)?j:Ke(j):de(j,L,ee)).then(j=>{if(j){if(Lg(j,2))return I(hs({replace:A},M(j.to),{state:typeof j.to=="object"?hs({},k,j.to.state):k,force:C}),Q||L)}else j=E(L,ee,!0,A,k);return S(L,ee,j),j})}function v(F,Q){const K=V(F,Q);return K?Promise.reject(K):Promise.resolve()}function y(F){const Q=qt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function T(F,Q){let K;const[ee,k,C]=qgt(F,Q);K=AW(ee.reverse(),"beforeRouteLeave",F,Q);for(const x of ee)x.leaveGuards.forEach(L=>{K.push(Iy(L,F,Q))});const A=v.bind(null,F,Q);return K.push(A),Fe(K).then(()=>{K=[];for(const x of i.list())K.push(Iy(x,F,Q));return K.push(A),Fe(K)}).then(()=>{K=AW(k,"beforeRouteUpdate",F,Q);for(const x of k)x.updateGuards.forEach(L=>{K.push(Iy(L,F,Q))});return K.push(A),Fe(K)}).then(()=>{K=[];for(const x of C)if(x.beforeEnter)if(tf(x.beforeEnter))for(const L of x.beforeEnter)K.push(Iy(L,F,Q));else K.push(Iy(x.beforeEnter,F,Q));return K.push(A),Fe(K)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),K=AW(C,"beforeRouteEnter",F,Q,y),K.push(A),Fe(K))).then(()=>{K=[];for(const x of o.list())K.push(Iy(x,F,Q));return K.push(A),Fe(K)}).catch(x=>Lg(x,8)?x:Promise.reject(x))}function S(F,Q,K){a.list().forEach(ee=>y(()=>ee(F,Q,K)))}function E(F,Q,K,ee,k){const C=V(F,Q);if(C)return C;const A=Q===Z_,x=H0?history.state:{};K&&(ee||A?r.replace(F.fullPath,hs({scroll:A&&x&&x.scroll},k)):r.push(F.fullPath,k)),l.value=F,Qe(F,Q,K,A),Ke()}let b;function G(){b||(b=r.listen((F,Q,K)=>{if(!it.listening)return;const ee=O(F),k=J(ee);if(k){I(hs(k,{replace:!0,force:!0}),ee).catch(bP);return}u=ee;const C=l.value;H0&&lgt(ume(C.fullPath,K.delta),FB()),T(ee,C).catch(A=>Lg(A,12)?A:Lg(A,2)?(I(hs(M(A.to),{force:!0}),ee).then(x=>{Lg(x,20)&&!K.delta&&K.type===Nx.pop&&r.go(-1,!1)}).catch(bP),Promise.reject()):(K.delta&&r.go(-K.delta,!1),de(A,ee,C))).then(A=>{A=A||E(ee,C,!1),A&&(K.delta&&!Lg(A,8)?r.go(-K.delta,!1):K.type===Nx.pop&&Lg(A,20)&&r.go(-1,!1)),S(ee,C,A)}).catch(bP)}))}let ne=RR(),ae=RR(),oe;function de(F,Q,K){Ke(F);const ee=ae.list();return ee.length?ee.forEach(k=>k(F,Q,K)):console.error(F),Promise.reject(F)}function ct(){return oe&&l.value!==Z_?Promise.resolve():new Promise((F,Q)=>{ne.add([F,Q])})}function Ke(F){return oe||(oe=!F,G(),ne.list().forEach(([Q,K])=>F?K(F):Q()),ne.reset()),F}function Qe(F,Q,K,ee){const{scrollBehavior:k}=t;if(!H0||!k)return Promise.resolve();const C=!K&&ugt(ume(F.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return eM().then(()=>k(F,Q,C)).then(A=>A&&cgt(A)).catch(A=>de(A,F,Q))}const ge=F=>r.go(F);let he;const qt=new Set,it={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:R,resolve:O,options:t,push:q,replace:W,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:ct,install(F){const Q=this;F.component("RouterLink",Ogt),F.component("RouterView",Vgt),F.config.globalProperties.$router=Q,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>np(l)}),H0&&!he&&l.value===Z_&&(he=!0,q(r.location).catch(k=>{}));const K={};for(const k in Z_)Object.defineProperty(K,k,{get:()=>l.value[k],enumerable:!0});F.provide(VB,Q),F.provide(One,JL(K)),F.provide(qQ,l);const ee=F.unmount;qt.add(F),F.unmount=function(){qt.delete(F),qt.size<1&&(u=Z_,b&&b(),b=null,l.value=Z_,he=!1,oe=!1),ee()}}};function Fe(F){return F.reduce((Q,K)=>Q.then(()=>y(K)),Promise.resolve())}return it}function qgt(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>HS(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>HS(u,l))||r.push(l))}return[n,s,r]}function UB(){return cl(VB)}function qB(t){return cl(One)}const jgt=()=>{};var Ime={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MOe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pe=function(t,e){if(!t)throw E1(e)},E1=function(t){return new Error("Firebase Database ("+MOe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FOe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Bgt=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Lne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(FOe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bgt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new $gt;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $gt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VOe=function(t){const e=FOe(t);return Lne.encodeByteArray(e,!0)},e6=function(t){return VOe(t).replace(/\./g,"")},t6=function(t){try{return Lne.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zgt(t){return UOe(void 0,t)}function UOe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Hgt(n)||(t[n]=UOe(t[n],e[n]));return t}function Hgt(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wgt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ggt=()=>Wgt().__FIREBASE_DEFAULTS__,Kgt=()=>{if(typeof process>"u"||typeof Ime>"u")return;const t=Ime.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qgt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t6(t[1]);return e&&JSON.parse(e)},jB=()=>{try{return jgt()||Ggt()||Kgt()||Qgt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qOe=t=>jB()?.emulatorHosts?.[t],Mne=t=>{const e=qOe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},jOe=()=>jB()?.config,BOe=t=>jB()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tg(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $B(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fne(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[e6(JSON.stringify(n)),e6(JSON.stringify(o)),""].join(".")}const TP={};function Ygt(){const t={prod:[],emulator:[]};for(const e of Object.keys(TP))TP[e]?t.emulator.push(e):t.prod.push(e);return t}function Xgt(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sme=!1;function zB(t,e){if(typeof window>"u"||typeof document>"u"||!tg(window.location.host)||TP[t]===e||TP[t]||Sme)return;TP[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=Ygt().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Sme=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=Xgt(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),R=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(R,w);const V=l();a(O,P),M.append(O,m,R,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vc())}function Jgt(){const t=jB()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zgt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function emt(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $Oe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tmt(){const t=vc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nmt(){return MOe.NODE_ADMIN===!0}function smt(){return!Jgt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rmt(){try{return typeof indexedDB=="object"}catch{return!1}}function imt(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const omt="FirebaseError";class ng extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=omt,Object.setPrototypeOf(this,ng.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aM.prototype.create)}}class aM{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?amt(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ng(r,a,s)}}function amt(t,e){return t.replace(cmt,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const cmt=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xx(t){return JSON.parse(t)}function To(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zOe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=xx(t6(i[0])||""),n=xx(t6(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},lmt=function(t){const e=zOe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},umt=function(t){const e=zOe(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function GS(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function n6(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function hw(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(kme(i)&&kme(o)){if(!hw(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function kme(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T1(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hmt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function dmt(t,e){const n=new fmt(t,e);return n.subscribe.bind(n)}class fmt{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pmt(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=PW),r.error===void 0&&(r.error=PW),r.complete===void 0&&(r.complete=PW);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pmt(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function PW(){}function Une(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gmt=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Pe(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HB=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Us(t){return t&&t._delegate?t._delegate:t}class Ym{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cE="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mmt{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new BB;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ymt(e))try{this.getOrInitializeService({instanceIdentifier:cE})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=cE){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cE){return this.instances.has(e)}getOptions(e=cE){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_mt(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=cE){return this.component?this.component.multipleInstances?e:cE:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _mt(t){return t===cE?void 0:t}function ymt(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vmt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mmt(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wn||(wn={}));const wmt={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},bmt=wn.INFO,Emt={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},Tmt=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Emt[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class WB{constructor(e){this.name=e,this._logLevel=bmt,this._logHandler=Tmt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wmt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...e),this._logHandler(this,wn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...e),this._logHandler(this,wn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...e),this._logHandler(this,wn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...e),this._logHandler(this,wn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...e),this._logHandler(this,wn.ERROR,...e)}}const Cmt=(t,e)=>e.some(n=>t instanceof n);let Rme,Ame;function Imt(){return Rme||(Rme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Smt(){return Ame||(Ame=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HOe=new WeakMap,BQ=new WeakMap,WOe=new WeakMap,NW=new WeakMap,qne=new WeakMap;function kmt(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pv(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&HOe.set(n,t)}).catch(()=>{}),qne.set(e,t),e}function Rmt(t){if(BQ.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});BQ.set(t,e)}let $Q={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return BQ.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WOe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pv(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Amt(t){$Q=t($Q)}function Pmt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(xW(this),e,...n);return WOe.set(s,e.sort?e.sort():[e]),pv(s)}:Smt().includes(t)?function(...e){return t.apply(xW(this),e),pv(HOe.get(this))}:function(...e){return pv(t.apply(xW(this),e))}}function Nmt(t){return typeof t=="function"?Pmt(t):(t instanceof IDBTransaction&&Rmt(t),Cmt(t,Imt())?new Proxy(t,$Q):t)}function pv(t){if(t instanceof IDBRequest)return kmt(t);if(NW.has(t))return NW.get(t);const e=Nmt(t);return e!==t&&(NW.set(t,e),qne.set(e,t)),e}const xW=t=>qne.get(t);function xmt(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=pv(o);return s&&o.addEventListener("upgradeneeded",l=>{s(pv(o.result),l.oldVersion,l.newVersion,pv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Dmt=["get","getKey","getAll","getAllKeys","count"],Omt=["put","add","delete","clear"],DW=new Map;function Pme(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(DW.get(e))return DW.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Omt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Dmt.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return DW.set(e,i),i}Amt(t=>({...t,get:(e,n,s)=>Pme(e,n)||t.get(e,n,s),has:(e,n)=>!!Pme(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lmt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Mmt(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Mmt(t){return t.getComponent()?.type==="VERSION"}const zQ="@firebase/app",Nme="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xm=new WB("@firebase/app"),Fmt="@firebase/app-compat",Vmt="@firebase/analytics-compat",Umt="@firebase/analytics",qmt="@firebase/app-check-compat",jmt="@firebase/app-check",Bmt="@firebase/auth",$mt="@firebase/auth-compat",zmt="@firebase/database",Hmt="@firebase/data-connect",Wmt="@firebase/database-compat",Gmt="@firebase/functions",Kmt="@firebase/functions-compat",Qmt="@firebase/installations",Ymt="@firebase/installations-compat",Xmt="@firebase/messaging",Jmt="@firebase/messaging-compat",Zmt="@firebase/performance",e_t="@firebase/performance-compat",t_t="@firebase/remote-config",n_t="@firebase/remote-config-compat",s_t="@firebase/storage",r_t="@firebase/storage-compat",i_t="@firebase/firestore",o_t="@firebase/ai",a_t="@firebase/firestore-compat",c_t="firebase",l_t="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HQ="[DEFAULT]",u_t={[zQ]:"fire-core",[Fmt]:"fire-core-compat",[Umt]:"fire-analytics",[Vmt]:"fire-analytics-compat",[jmt]:"fire-app-check",[qmt]:"fire-app-check-compat",[Bmt]:"fire-auth",[$mt]:"fire-auth-compat",[zmt]:"fire-rtdb",[Hmt]:"fire-data-connect",[Wmt]:"fire-rtdb-compat",[Gmt]:"fire-fn",[Kmt]:"fire-fn-compat",[Qmt]:"fire-iid",[Ymt]:"fire-iid-compat",[Xmt]:"fire-fcm",[Jmt]:"fire-fcm-compat",[Zmt]:"fire-perf",[e_t]:"fire-perf-compat",[t_t]:"fire-rc",[n_t]:"fire-rc-compat",[s_t]:"fire-gcs",[r_t]:"fire-gcs-compat",[i_t]:"fire-fst",[a_t]:"fire-fst-compat",[o_t]:"fire-vertex","fire-js":"fire-js",[c_t]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s6=new Map,h_t=new Map,WQ=new Map;function xme(t,e){try{t.container.addComponent(e)}catch(n){Xm.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dw(t){const e=t.name;if(WQ.has(e))return Xm.debug(`There were multiple attempts to register component ${e}.`),!1;WQ.set(e,t);for(const n of s6.values())xme(n,t);for(const n of h_t.values())xme(n,t);return!0}function cM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nu(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d_t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gv=new aM("app","Firebase",d_t);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f_t{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ym("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gv.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wb=l_t;function GOe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:HQ,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw gv.create("bad-app-name",{appName:String(r)});if(n||(n=jOe()),!n)throw gv.create("no-options");const i=s6.get(r);if(i){if(hw(n,i.options)&&hw(s,i.config))return i;throw gv.create("duplicate-app",{appName:r})}const o=new vmt(r);for(const l of WQ.values())o.addComponent(l);const a=new f_t(n,s,o);return s6.set(r,a),a}function GB(t=HQ){const e=s6.get(t);if(!e&&t===HQ&&jOe())return GOe();if(!e)throw gv.create("no-app",{appName:t});return e}function bh(t,e,n){let s=u_t[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xm.warn(o.join(" "));return}dw(new Ym(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p_t="firebase-heartbeat-database",g_t=1,Dx="firebase-heartbeat-store";let OW=null;function KOe(){return OW||(OW=xmt(p_t,g_t,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dx)}catch(n){console.warn(n)}}}}).catch(t=>{throw gv.create("idb-open",{originalErrorMessage:t.message})})),OW}async function m_t(t){try{const e=(await KOe()).transaction(Dx),n=await e.objectStore(Dx).get(QOe(t));return await e.done,n}catch(e){if(e instanceof ng)Xm.warn(e.message);else{const n=gv.create("idb-get",{originalErrorMessage:e?.message});Xm.warn(n.message)}}}async function Dme(t,e){try{const n=(await KOe()).transaction(Dx,"readwrite");await n.objectStore(Dx).put(e,QOe(t)),await n.done}catch(n){if(n instanceof ng)Xm.warn(n.message);else{const s=gv.create("idb-set",{originalErrorMessage:n?.message});Xm.warn(s.message)}}}function QOe(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const __t=1024,y_t=30;class v_t{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b_t(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Ome();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>y_t){const s=E_t(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xm.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ome(),{heartbeatsToSend:n,unsentEntries:s}=w_t(this._heartbeatsCache.heartbeats),r=e6(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Xm.warn(e),""}}}function Ome(){return new Date().toISOString().substring(0,10)}function w_t(t,e=__t){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Lme(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Lme(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class b_t{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rmt()?imt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await m_t(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Dme(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Dme(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Lme(t){return e6(JSON.stringify({version:2,heartbeats:t})).length}function E_t(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T_t(t){dw(new Ym("platform-logger",e=>new Lmt(e),"PRIVATE")),dw(new Ym("heartbeat",e=>new v_t(e),"PRIVATE")),bh(zQ,Nme,t),bh(zQ,Nme,"esm2020"),bh("fire-js","")}T_t("");function YOe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KB=YOe,XOe=new aM("auth","Firebase",YOe());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const r6=new WB("@firebase/auth");function C_t(t,...e){r6.logLevel<=wn.WARN&&r6.warn(`Auth (${wb}): ${t}`,...e)}function M4(t,...e){r6.logLevel<=wn.ERROR&&r6.error(`Auth (${wb}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dp(t,...e){throw Bne(t,...e)}function Rd(t,...e){return Bne(t,...e)}function jne(t,e,n){const s={...KB(),[e]:n};return new aM("auth","Firebase",s).create(e,{appName:t.name})}function cT(t){return jne(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I_t(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Dp(t,"argument-error"),jne(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bne(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return XOe.create(t,...e)}function Ot(t,e,...n){if(!t)throw Bne(e,...n)}function ym(t){const e="INTERNAL ASSERTION FAILED: "+t;throw M4(e),new Error(e)}function Jm(t,e){t||ym(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GQ(){return typeof self<"u"&&self.location?.href||""}function S_t(){return Mme()==="http:"||Mme()==="https:"}function Mme(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k_t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S_t()||emt()||"connection"in navigator)?navigator.onLine:!0}function R_t(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lM{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jm(n>e,"Short delay should be less than long delay!"),this.isMobile=Vne()||$Oe()}get(){return k_t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $ne(t,e){Jm(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JOe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ym("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ym("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ym("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const A_t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P_t=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N_t=new lM(3e4,6e4);function zne(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function C1(t,e,n,s,r={}){return ZOe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=T1({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return Zgt()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&tg(t.emulatorConfig.host)&&(u.credentials="include"),JOe.fetch()(await eLe(t,t.config.apiHost,n,a),u)})}async function ZOe(t,e,n){t._canInitEmulator=!1;const s={...A_t,...e};try{const r=new D_t(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw cF(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw cF(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw cF(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw cF(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jne(t,h,u);Dp(t,h)}}catch(r){if(r instanceof ng)throw r;Dp(t,"network-request-failed",{message:String(r)})}}async function x_t(t,e,n,s,r={}){const i=await C1(t,e,n,s,r);return"mfaPendingCredential"in i&&Dp(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eLe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?$ne(t.config,r):`${t.config.apiScheme}://${r}`;return P_t.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class D_t{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Rd(this.auth,"network-request-failed")),N_t.get())})}}function cF(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Rd(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function O_t(t,e){return C1(t,"POST","/v1/accounts:delete",e)}async function i6(t,e){return C1(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CP(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QB(t,e=!1){const n=Us(t),s=await n.getIdToken(e),r=Hne(s);Ot(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:CP(LW(r.auth_time)),issuedAtTime:CP(LW(r.iat)),expirationTime:CP(LW(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function LW(t){return Number(t)*1e3}function Hne(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return M4("JWT malformed, contained fewer than 3 sections"),null;try{const r=t6(n);return r?JSON.parse(r):(M4("Failed to decode base64 JWT payload"),null)}catch(r){return M4("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Fme(t){const e=Hne(t);return Ot(e,"internal-error"),Ot(typeof e.exp<"u","internal-error"),Ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ox(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ng&&L_t(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function L_t({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M_t{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KQ{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=CP(this.lastLoginAt),this.creationTime=CP(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function o6(t){const e=t.auth,n=await t.getIdToken(),s=await Ox(t,i6(e,{idToken:n}));Ot(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?tLe(r.providerUserInfo):[],o=F_t(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new KQ(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function YB(t){const e=Us(t);await o6(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function F_t(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function tLe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function V_t(t,e){const n=await ZOe(t,{},async()=>{const s=T1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await eLe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&tg(t.emulatorConfig.host)&&(l.credentials="include"),JOe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function U_t(t,e){return C1(t,"POST","/v2/accounts:revokeToken",zne(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FI{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ot(e.idToken,"internal-error"),Ot(typeof e.idToken<"u","internal-error"),Ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fme(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ot(e.length!==0,"internal-error");const n=Fme(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await V_t(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new FI;return s&&(Ot(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ot(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ot(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new FI,this.toJSON())}_performRefresh(){return ym("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ey(t,e){Ot(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rd{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new M_t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new KQ(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ox(this,this.stsTokenManager.getToken(this.auth,e));return Ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QB(this,e)}reload(){return YB(this)}_assign(e){this!==e&&(Ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rd({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await o6(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nu(this.auth.app))return Promise.reject(cT(this.auth));const e=await this.getIdToken();return await Ox(this,O_t(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:R}=n;Ot(d&&R,e,"internal-error");const P=FI.fromJSON(this.name,R);Ot(typeof d=="string",e,"internal-error"),ey(s,e.name),ey(r,e.name),Ot(typeof p=="boolean",e,"internal-error"),Ot(typeof m=="boolean",e,"internal-error"),ey(i,e.name),ey(o,e.name),ey(a,e.name),ey(l,e.name),ey(u,e.name),ey(h,e.name);const O=new rd({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new FI;r.updateFromServerResponse(n);const i=new rd({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await o6(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ot(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?tLe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new FI;a.updateFromIdToken(s);const l=new rd({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new KQ(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vme=new Map;function vm(t){Jm(t instanceof Function,"Expected a class definition");let e=Vme.get(t);return e?(Jm(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vme.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nLe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nLe.type="NONE";const Lx=nLe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F4(t,e,n){return`firebase:${t}:${e}:${n}`}class VI{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=F4(this.userKey,r.apiKey,i),this.fullPersistenceKey=F4("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await i6(this.auth,{idToken:e}).catch(()=>{});return n?rd._fromGetAccountInfoResponse(this.auth,n,e):null}return rd._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new VI(vm(Lx),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||vm(Lx);const o=F4(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await i6(e,{idToken:h}).catch(()=>{});if(!p)break;d=await rd._fromGetAccountInfoResponse(e,p,h)}else d=rd._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new VI(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new VI(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ume(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oLe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sLe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cLe(e))return"Blackberry";if(lLe(e))return"Webos";if(rLe(e))return"Safari";if((e.includes("chrome/")||iLe(e))&&!e.includes("edge/"))return"Chrome";if(aLe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function sLe(t=vc()){return/firefox\//i.test(t)}function rLe(t=vc()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iLe(t=vc()){return/crios\//i.test(t)}function oLe(t=vc()){return/iemobile/i.test(t)}function aLe(t=vc()){return/android/i.test(t)}function cLe(t=vc()){return/blackberry/i.test(t)}function lLe(t=vc()){return/webos/i.test(t)}function Wne(t=vc()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function q_t(t=vc()){return Wne(t)&&!!window.navigator?.standalone}function j_t(){return tmt()&&document.documentMode===10}function uLe(t=vc()){return Wne(t)||aLe(t)||lLe(t)||cLe(t)||/windows phone/i.test(t)||oLe(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hLe(t,e=[]){let n;switch(t){case"Browser":n=Ume(vc());break;case"Worker":n=`${Ume(vc())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wb}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class B_t{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $_t(t,e={}){return C1(t,"GET","/v2/passwordPolicy",zne(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z_t=6;class H_t{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??z_t,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W_t{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qme(this),this.idTokenSubscription=new qme(this),this.beforeStateQueue=new B_t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XOe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vm(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await VI.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await i6(this,{idToken:e}),s=await rd._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Nu(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await o6(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=R_t()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nu(this.app))return Promise.reject(cT(this));const n=e?Us(e):null;return n&&Ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nu(this.app)?Promise.reject(cT(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nu(this.app)?Promise.reject(cT(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vm(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $_t(this),n=new H_t(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new aM("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await U_t(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vm(e)||this._popupRedirectResolver;Ot(n,this,"argument-error"),this.redirectPersistenceManager=await VI.create(this,[vm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ot(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hLe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Nu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&C_t(`Error while retrieving App Check token: ${e.error}`),e?.token}}function XB(t){return Us(t)}class qme{constructor(e){this.auth=e,this.observer=null,this.addObserver=dmt(n=>this.observer=n)}get next(){return Ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Gne={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G_t(t){Gne=t}function K_t(t){return Gne.loadJS(t)}function Q_t(){return Gne.gapiScript}function Y_t(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JB(t,e){const n=cM(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(hw(r,e??{}))return s;Dp(s,"already-initialized")}return n.initialize({options:e})}function X_t(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(vm);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function ZB(t,e,n){const s=XB(t);Ot(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=dLe(e),{host:o,port:a}=J_t(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ot(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ot(hw(u,s.config.emulator)&&hw(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,tg(o)?($B(`${i}//${o}${l}`),zB("Auth",!0)):Z_t()}function dLe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function J_t(t){const e=dLe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:jme(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:jme(o)}}}function jme(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z_t(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uM{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ym("not implemented")}_getIdTokenResponse(e){return ym("not implemented")}_linkToIdToken(e,n){return ym("not implemented")}_getReauthenticationResolver(e){return ym("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function UI(t,e){return x_t(t,"POST","/v1/accounts:signInWithIdp",zne(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eyt="http://localhost";class Op extends uM{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Op(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dp("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Op(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return UI(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,UI(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,UI(e,n)}buildRequest(){const e={requestUri:eyt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=T1(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kne{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hM extends Kne{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wh extends hM{constructor(){super("facebook.com")}static credential(e){return Op._fromParams({providerId:Wh.PROVIDER_ID,signInMethod:Wh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wh.credentialFromTaggedObject(e)}static credentialFromError(e){return Wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wh.credential(e.oauthAccessToken)}catch{return null}}}Wh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wh.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fh extends hM{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Op._fromParams({providerId:fh.PROVIDER_ID,signInMethod:fh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fh.credentialFromTaggedObject(e)}static credentialFromError(e){return fh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fh.credential(n,s)}catch{return null}}}fh.GOOGLE_SIGN_IN_METHOD="google.com";fh.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gh extends hM{constructor(){super("github.com")}static credential(e){return Op._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gh.credentialFromTaggedObject(e)}static credentialFromError(e){return Gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gh.credential(e.oauthAccessToken)}catch{return null}}}Gh.GITHUB_SIGN_IN_METHOD="github.com";Gh.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kh extends hM{constructor(){super("twitter.com")}static credential(e,n){return Op._fromParams({providerId:Kh.PROVIDER_ID,signInMethod:Kh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kh.credentialFromTaggedObject(e)}static credentialFromError(e){return Kh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Kh.credential(n,s)}catch{return null}}}Kh.TWITTER_SIGN_IN_METHOD="twitter.com";Kh.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KS{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await rd._fromIdTokenResponse(e,s,r),o=Bme(s);return new KS({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Bme(s);return new KS({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Bme(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a6 extends ng{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,a6.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new a6(e,n,s,r)}}function fLe(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?a6._fromErrorAndOperation(t,r,e,s):r})}async function tyt(t,e,n=!1){const s=await Ox(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return KS._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function nyt(t,e,n=!1){const{auth:s}=t;if(Nu(s.app))return Promise.reject(cT(s));const r="reauthenticate";try{const i=await Ox(t,fLe(s,r,e,t),n);Ot(i.idToken,s,"internal-error");const o=Hne(i.idToken);Ot(o,s,"internal-error");const{sub:a}=o;return Ot(t.uid===a,s,"user-mismatch"),KS._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Dp(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function syt(t,e,n=!1){if(Nu(t.app))return Promise.reject(cT(t));const s="signIn",r=await fLe(t,s,e),i=await KS._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function e5(t,e,n,s){return Us(t).onIdTokenChanged(e,n,s)}function t5(t,e,n){return Us(t).beforeAuthStateChanged(e,n)}function n5(t,e,n,s){return Us(t).onAuthStateChanged(e,n,s)}function $y(t){return Us(t).signOut()}const c6="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pLe{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(c6,"1"),this.storage.removeItem(c6),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ryt=1e3,iyt=10;class gLe extends pLe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uLe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);j_t()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,iyt):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ryt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gLe.type="LOCAL";const s5=gLe;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mLe extends pLe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mLe.type="SESSION";const dM=mLe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oyt(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r5{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new r5(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await oyt(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r5.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Qne(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ayt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Qne("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sp(){return window}function cyt(t){sp().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Le(){return typeof sp().WorkerGlobalScope<"u"&&typeof sp().importScripts=="function"}async function lyt(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uyt(){return navigator?.serviceWorker?.controller||null}function hyt(){return _Le()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yLe="firebaseLocalStorageDb",dyt=1,l6="firebaseLocalStorage",vLe="fbase_key";class fM{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function i5(t,e){return t.transaction([l6],e?"readwrite":"readonly").objectStore(l6)}function fyt(){const t=indexedDB.deleteDatabase(yLe);return new fM(t).toPromise()}function QQ(){const t=indexedDB.open(yLe,dyt);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(l6,{keyPath:vLe})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(l6)?e(s):(s.close(),await fyt(),e(await QQ()))})})}async function $me(t,e,n){const s=i5(t,!0).put({[vLe]:e,value:n});return new fM(s).toPromise()}async function pyt(t,e){const n=i5(t,!1).get(e),s=await new fM(n).toPromise();return s===void 0?null:s.value}function zme(t,e){const n=i5(t,!0).delete(e);return new fM(n).toPromise()}const gyt=800,myt=3;class wLe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QQ(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>myt)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _Le()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r5._getInstance(hyt()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await lyt(),!this.activeServiceWorker)return;this.sender=new ayt(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uyt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await QQ();return await $me(e,c6,"1"),await zme(e,c6),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>$me(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>pyt(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zme(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=i5(r,!1).getAll();return new fM(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gyt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wLe.type="LOCAL";const o5=wLe;new lM(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bLe(t,e){return e?vm(e):(Ot(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yne extends uM{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return UI(e,this._buildIdpRequest())}_linkToIdToken(e,n){return UI(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return UI(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _yt(t){return syt(t.auth,new Yne(t),t.bypassAuthState)}function yyt(t){const{auth:e,user:n}=t;return Ot(n,e,"internal-error"),nyt(n,new Yne(t),t.bypassAuthState)}async function vyt(t){const{auth:e,user:n}=t;return Ot(n,e,"internal-error"),tyt(n,new Yne(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ELe{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _yt;case"linkViaPopup":case"linkViaRedirect":return vyt;case"reauthViaPopup":case"reauthViaRedirect":return yyt;default:Dp(this.auth,"internal-error")}}resolve(e){Jm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wyt=new lM(2e3,1e4);async function a5(t,e,n){if(Nu(t.app))return Promise.reject(Rd(t,"operation-not-supported-in-this-environment"));const s=XB(t);I_t(t,e,Kne);const r=bLe(s,n);return new NE(s,"signInViaPopup",e,r).executeNotNull()}class NE extends ELe{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,NE.currentPopupAction&&NE.currentPopupAction.cancel(),NE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ot(e,this.auth,"internal-error"),e}async onExecution(){Jm(this.filter.length===1,"Popup operations only handle one event");const e=Qne();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Rd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,NE.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wyt.get())};e()}}NE.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const byt="pendingRedirect",V4=new Map;class Eyt extends ELe{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=V4.get(this.auth._key());if(!e){try{const n=await Tyt(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}V4.set(this.auth._key(),e)}return this.bypassAuthState||V4.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tyt(t,e){const n=Syt(e),s=Iyt(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Cyt(t,e){V4.set(t._key(),e)}function Iyt(t){return vm(t._redirectPersistence)}function Syt(t){return F4(byt,t.config.apiKey,t.name)}async function kyt(t,e,n=!1){if(Nu(t.app))return Promise.reject(cT(t));const s=XB(t),r=bLe(s,e),i=await new Eyt(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ryt=600*1e3;class Ayt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Pyt(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!TLe(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Rd(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ryt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hme(e))}saveEventToCache(e){this.cachedEventUids.add(Hme(e)),this.lastProcessedEventTime=Date.now()}}function Hme(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TLe({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Pyt(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TLe(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Nyt(t,e={}){return C1(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xyt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dyt=/^https?/;async function Oyt(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Nyt(t);for(const n of e)try{if(Lyt(n))return}catch{}Dp(t,"unauthorized-domain")}function Lyt(t){const e=GQ(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!Dyt.test(n))return!1;if(xyt.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Myt=new lM(3e4,6e4);function Wme(){const t=sp().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Fyt(t){return new Promise((e,n)=>{function s(){Wme(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wme(),n(Rd(t,"network-request-failed"))},timeout:Myt.get()})}if(sp().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(sp().gapi?.load)s();else{const r=Y_t("iframefcb");return sp()[r]=()=>{gapi.load?s():n(Rd(t,"network-request-failed"))},K_t(`${Q_t()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw U4=null,e})}let U4=null;function Vyt(t){return U4=U4||Fyt(t),U4}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uyt=new lM(5e3,15e3),qyt="__/auth/iframe",jyt="emulator/auth/iframe",Byt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$yt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zyt(t){const e=t.config;Ot(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$ne(e,jyt):`https://${t.config.authDomain}/${qyt}`,s={apiKey:e.apiKey,appName:t.name,v:wb},r=$yt.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${T1(s).slice(1)}`}async function Hyt(t){const e=await Vyt(t),n=sp().gapi;return Ot(n,t,"internal-error"),e.open({where:document.body,url:zyt(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Byt,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Rd(t,"network-request-failed"),a=sp().setTimeout(()=>{i(o)},Uyt.get());function l(){sp().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Wyt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gyt=500,Kyt=600,Qyt="_blank",Yyt="http://localhost";class Gme{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xyt(t,e,n,s=Gyt,r=Kyt){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...Wyt,width:s.toString(),height:r.toString(),top:i,left:o},u=vc().toLowerCase();n&&(a=iLe(u)?Qyt:n),sLe(u)&&(e=e||Yyt,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(q_t(u)&&a!=="_self")return Jyt(e||"",a),new Gme(null);const d=window.open(e||"",a,h);Ot(d,t,"popup-blocked");try{d.focus()}catch{}return new Gme(d)}function Jyt(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zyt="__/auth/handler",evt="emulator/auth/handler",tvt=encodeURIComponent("fac");async function Kme(t,e,n,s,r,i){Ot(t.config.authDomain,t,"auth-domain-config-required"),Ot(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:wb,eventId:r};if(e instanceof Kne){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jQ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof hM){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${tvt}=${encodeURIComponent(l)}`:"";return`${nvt(t)}?${T1(a).slice(1)}${u}`}function nvt({config:t}){return t.emulator?$ne(t,evt):`https://${t.authDomain}/${Zyt}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MW="webStorageSupport";class svt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dM,this._completeRedirectFn=kyt,this._overrideRedirectResult=Cyt}async _openPopup(e,n,s,r){Jm(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Kme(e,n,s,GQ(),r);return Xyt(e,i,Qne())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Kme(e,n,s,GQ(),r);return cyt(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Jm(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Hyt(e),s=new Ayt(e);return n.register("authEvent",r=>(Ot(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(MW,{type:MW},s=>{const r=s?.[0]?.[MW];r!==void 0&&n(!!r),Dp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Oyt(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uLe()||rLe()||Wne()}}const c5=svt;var Qme="@firebase/auth",Yme="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rvt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ivt(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ovt(t){dw(new Ym("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ot(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hLe(t)},u=new W_t(s,r,i,l);return X_t(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),dw(new Ym("auth-internal",e=>{const n=XB(e.getProvider("auth").getImmediate());return(s=>new rvt(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bh(Qme,Yme,ivt(t)),bh(Qme,Yme,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const avt=300,cvt=BOe("authIdTokenMaxAge")||avt;let Xme=null;const lvt=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>cvt)return;const r=n?.token;Xme!==r&&(Xme=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function l5(t=GB()){const e=cM(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JB(t,{popupRedirectResolver:c5,persistence:[o5,s5,dM]}),s=BOe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=lvt(i.toString());t5(n,o,()=>o(n.currentUser)),e5(n,a=>o(a))}}const r=qOe("auth");return r&&ZB(n,`http://${r}`),n}function uvt(){return document.getElementsByTagName("head")?.[0]??document}G_t({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Rd("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",uvt().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ovt("Browser");var Jme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mv,CLe;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),G=2;G<arguments.length;G++)b[G-2]=arguments[G];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),T=T.j(E).add(u(b))):(T=T.j(y),T=T.add(u(b)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=O(this,I),R(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(R(this))return R(I)?P(this).j(P(I)):P(P(this).j(I));if(R(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,G=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*G,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*G,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(R(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(R(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=W(y),T=W(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=u(y),b=E.j(v);R(b)||0<b.l(I);)y-=T,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,CLe=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,mv=o}).apply(typeof Jme<"u"?Jme:typeof self<"u"?self:typeof window<"u"?window:{});var lF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ILe,bA,SLe,q4,YQ,kLe,RLe,ALe;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lF=="object"&&lF];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var D=g++;return{value:f(D,c[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,D){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return f.prototype[N].apply(_,z)}}function R(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,D=_.length||0;c.length=N+D;for(let z=0;z<D;z++)c[N+z]=_[z]}else c.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=ct;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class G{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ct=new G,Ke=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(Qe)}};var Qe=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}de=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function it(c,f){if(he.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(W){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&it.aa.h.call(this)}}w(it,he);var Fe={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Q=0;function K(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Q,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function k(c){this.src=c,this.g={},this.h=0}k.prototype.add=function(c,f,g,_,N){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=A(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new K(f,this.src,D,!!_,N),f.fa=g,c.push(f)),f};function C(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=N)&&Array.prototype.splice.call(_,N,1),D&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function A(c,f,g,_){for(var N=0;N<c.length;++N){var D=c[N];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(c,f[D],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,D){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,le=Z(c);if(le||(c[x]=le=new k(c)),g=le.add(f,g,_,z,D),g.proxy)return g;if(_=H(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)qt||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Y(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function H(){function c(g){return f.call(c.src,c.listener,g)}const f=X;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(c,f[D],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(D=c.g[f],g=A(D,g,_,N),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=A(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])C(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Y(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Y(c){return c in L?L[c]:L[c]="on"+c}function X(c,f){if(c.da)c=!0;else{f=new it(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof k?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ge.call(this),this.i=new k(this),this.M=this,this.F=null}w(re,ge),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new he(f,c);else if(f instanceof he)f.target=f.target||c;else{var N=f;f=new he(_,c),T(f,N)}if(N=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];N=fe(z,_,!0,f)&&N}if(z=f.g=c,N=fe(z,_,!0,f)&&N,N=fe(z,_,!1,f)&&N,g)for(D=0;D<g.length;D++)z=f.g=g[D],N=fe(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function fe(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var le=z.listener,ke=z.ha||z.src;z.fa&&C(c.i,z),N=le.call(ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function Se(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ve(c){c.g=Se(()=>{c.g=null,c.i&&(c.i=!1,Ve(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class We extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(c){ge.call(this),this.h=c,this.g={}}w(Ge,ge);var ss=[];function Ue(c){J(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),Ue(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,rs=a.JSON.parse,Pr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xr(){}Xr.prototype.h=null;function ll(c){return c.h||(c.h=c.i())}function ul(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){he.call(this,"d")}w(Xi,he);function Ji(){he.call(this,"c")}w(Ji,he);var cn={},hl=null;function Nr(){return hl=hl||new re}cn.La="serverreachability";function dl(c){he.call(this,cn.La,c)}w(dl,he);function Ss(c){const f=Nr();se(f,new dl(f))}cn.STAT_EVENT="statevent";function fl(c,f){he.call(this,cn.STAT_EVENT,c),this.stat=f}w(fl,he);function Oe(c){const f=Nr();se(f,new fl(f,c))}cn.Ma="timingevent";function pl(c,f){he.call(this,cn.Ma,c),this.size=f}w(pl,he);function ks(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function lg(c,f,g,_,N,D){c.info(function(){if(c.g)if(D)for(var z="",le=D.split("&"),ke=0;ke<le.length;ke++){var ce=le[ke].split("=");if(1<ce.length){var Re=ce[0];ce=ce[1];var Me=Re.split("_");z=2<=Me.length&&Me[1]=="type"?z+(Re+"="+ce+"&"):z+(Re+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function ug(c,f,g,_,N,D,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+D+" "+z})}function Hn(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dg(c,g)+(_?" "+_:"")})}function hg(c,f){c.info(function(){return"TIMEOUT: "+f})}Rs.prototype.info=function(){};function dg(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var D=N[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Le(g)}catch{return f}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Dr(){}w(Dr,Xr),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Zi=new Dr;function jt(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var _l={},eo={};function to(c,f,g){c.L=1,c.v=Fr(gt(f)),c.m=g,c.P=!0,yl(c,null)}function yl(c,f){c.F=Date.now(),Or(c),c.A=gt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),xl(g.i,"t",_),c.C=0,g=c.j.J,c.h=new ml,c.g=Yl(c.j,g?f:null,!c.m),0<c.O&&(c.M=new We(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ss[0]=N.toString()),N=ss);for(var D=0;D<N.length;D++){var z=U(g,N[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ss(),lg(c.i,c.u,c.A,c.l,c.R,c.m)}jt.prototype.ca=function(c){c=c.target;const f=this.M;f&&mt(c)==3?f.j():this.Y(c)},jt.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mt(this.g);var f=this.g.Ba();const Kn=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Me!=4||f==7||(f==8||0>=Kn?Ss(3):Ss(2)),no(this);var g=this.g.Z();this.X=g;t:if(vl(this)){var _=Ul(this.g);c="";var N=_.length,D=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),As(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(D&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ug(this.i,this.u,this.A,this.l,this.R,Me,g),this.o){if(this.T&&!this.K){t:{if(this.g){var le,ke=this.g;if((le=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(le)){var ce=le;break t}}ce=null}if(g=ce)Hn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Oe(12),ln(this),As(this);break e}}if(this.P){g=!0;let Ye;for(;!this.J&&this.C<z.length;)if(Ye=fg(this,z),Ye==eo){Me==4&&(this.s=4,Oe(14),g=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==_l){this.s=4,Oe(15),Hn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hn(this.i,this.l,Ye,null),so(this,Ye);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)Hn(this.i,this.l,z,"[Invalid Chunked Response]"),ln(this),As(this);else if(0<z.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),lo(Re),Re.M=!0,Oe(11))}}else Hn(this.i,this.l,z,null),so(this,z);Me==4&&ln(this),this.o&&!this.J&&(Me==4?Wl(this.j,this):(this.o=!1,Or(this)))}else Pg(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),ln(this),As(this)}}}catch{}finally{}};function vl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fg(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?eo:(g=Number(f.substring(g,_)),isNaN(g)?_l:(_+=1,_+g>f.length?eo:(f=f.slice(_,_+g),c.C=_+g,f)))}jt.prototype.cancel=function(){this.J=!0,ln(this)};function Or(c){c.S=Date.now()+c.I,wl(c,c.I)}function wl(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ks(p(c.ba,c),f)}function no(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hg(this.i,this.A),this.L!=2&&(Ss(),Oe(17)),ln(this),this.s=2,As(this)):wl(this,this.S-c)};function As(c){c.j.G==0||c.J||Wl(c.j,c)}function ln(c){no(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ue(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function so(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ro(g.h,c))){if(!c.K&&ro(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$r(g),jr(g);else break e;co(g),Oe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=ks(p(g.Za,g),6e3));if(1>=Tl(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hn(g,11)}else if((c.K||g.g==c)&&$r(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ce=N[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Re=ce[3];Re!=null&&(g.la=Re,g.j.info("VER="+g.la));const Me=ce[4];Me!=null&&(g.Aa=Me,g.j.info("SVER="+g.Aa));const Kn=ce[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(_=1.5*Kn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ye=c.g;if(Ye){const Hr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var D=_.h;D.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(io(D,D.h),D.h=null))}if(_.D){const uo=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(_.ya=uo,ue(_.I,_.D,uo))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=Ql(_,_.J?_.ia:null,_.W),z.K){Cl(_.h,z);var le=z,ke=_.L;ke&&(le.I=ke),le.B&&(no(le),Or(le)),_.g=z}else zl(_);0<g.i.length&&Br(g)}else ce[0]!="stop"&&ce[0]!="close"||hn(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?hn(g,7):ao(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ss(4)}catch{}}var pg=class{constructor(c,f){this.g=c,this.map=f}};function bl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tl(c){return c.h?1:c.g?c.g.size:0}function ro(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function io(c,f){c.g?c.g.add(f):c.h=f}function Cl(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return R(c.i)}function gg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function mg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function Sl(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=mg(c),_=gg(c),N=_.length,D=0;D<N;D++)f.call(void 0,_[D],g&&g[D],c)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var D=c[g].substring(0,_);N=c[g].substring(_+1)}else D=c[g];f(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof un){this.h=c.h,Lr(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var f=c.i,g=new xs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Rl(this,g),this.m=c.m}else c&&(f=String(c).match(kl))?(this.h=!1,Lr(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Mr(this,f[4]),this.l=Ps(f[5]||"",!0),Rl(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}un.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ns(f,Al,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ns(f,Al,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ns(g,g.charAt(0)=="/"?wg:vg,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ns(g,Eg)),c.join("")};function gt(c){return new un(c)}function Lr(c,f,g){c.j=g?Ps(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Rl(c,f,g){f instanceof xs?(c.i=f,Tg(c.i,c.h)):(g||(f=Ns(f,bg)),c.i=new xs(f,c.h))}function ue(c,f,g){c.i.set(f,g)}function Fr(c){return ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ps(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ns(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,yg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,vg=/[#\?:]/g,wg=/[#\?]/g,bg=/[#\?@]/g,Eg=/#/g;function xs(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&_g(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xs.prototype,t.add=function(c,f){Bt(this),this.i=null,c=Wn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Pl(c,f){Bt(c),f=Wn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nl(c,f){return Bt(c),f=Wn(c,f),c.g.has(f)}t.forEach=function(c,f){Bt(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){Bt(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let D=0;D<N.length;D++)g.push(f[_])}return g},t.V=function(c){Bt(this);let f=[];if(typeof c=="string")Nl(this,c)&&(f=f.concat(this.g.get(Wn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Bt(this),this.i=null,c=Wn(this,c),Nl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xl(c,f,g){Pl(c,f),0<g.length&&(c.i=null,c.g.set(Wn(c,f),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=D;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function Wn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Tg(c,f){f&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(Pl(this,_),xl(this,N,g))},c)),c.j=f}function Cg(c,f){const g=new Rs;if(a.Image){const _=new Image;_.onload=m($t,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m($t,g,"TestLoadImage: error",!1,f,_),_.onabort=m($t,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m($t,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ig(c,f){const g=new Rs,_=new AbortController,N=setTimeout(()=>{_.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(D=>{clearTimeout(N),D.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),$t(g,"TestPingServer: error",!1,f)})}function $t(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Sg(){this.g=new Pr}function kg(c,f,g){const _=g||"";try{Sl(c,function(N,D){let z=N;u(N)&&(z=Le(N)),f.push(_+D+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vr,Xr),Vr.prototype.g=function(){return new Ur(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ur(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ur,re),t=Ur.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ds(this):Os(this),this.readyState==3&&Dl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let f="";return J(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function oo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ol(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ue(c,f,g))}function pe(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pe,re);var Rg=/^https?$/i,Ag=["POST","PUT"];t=pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ll(this.o):ll(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(D){Ll(this,D);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Ll(this,D)}};function Ll(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Ml(c),qr(c)}function Ml(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mt(c)!=4||c.Z()!=2)){if(c.u&&mt(c)==4)Se(c.Ea,0,c);else if(se(c,"readystatechange"),mt(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(kl)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Rg.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var D=2<mt(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Ml(c)}}finally{qr(c)}}}}function qr(c,f){if(c.g){Vl(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Vl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rs(f)}};function Ul(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pg(c){const f={};c=(c.g&&2<=mt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[N]||[];f[N]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function ql(c){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bl(c&&c.concurrentRequestLimit),this.Da=new Sg,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ql.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Oe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Ql(this,null,this.W),Br(this)};function ao(c){if(jl(c),c.G==3){var f=c.U++,g=gt(c.I);if(ue(g,"SID",c.K),ue(g,"RID",f),ue(g,"TYPE","terminate"),Ms(c,g),f=new jt(c,c.j,f),f.L=2,f.v=Fr(gt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Or(f)}Kl(c)}function jr(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function jl(c){jr(c),c.u&&(a.clearTimeout(c.u),c.u=null),$r(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Br(c){if(!El(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.B=0}}function Ng(c,f){return Tl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ks(p(c.Ga,c,f),Gl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new jt(this,this.j,c);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(N.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$l(this,N,f),g=gt(this.I),ue(g,"RID",c),ue(g,"CVER",22),this.D&&ue(g,"X-HTTP-Session-Id",this.D),Ms(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(Ol(D)))+"&"+f:this.m&&oo(g,this.m,D)),io(this.h,N),this.Ua&&ue(g,"TYPE","init"),this.P?(ue(g,"$req",f),ue(g,"SID","null"),N.T=!0,to(N,g,null)):to(N,g,f),this.G=2}}else this.G==3&&(c?Bl(this,c):this.i.length==0||El(this.h)||Bl(this))};function Bl(c,f){var g;f?g=f.l:g=c.U++;const _=gt(c.I);ue(_,"SID",c.K),ue(_,"RID",g),ue(_,"AID",c.T),Ms(c,_),c.m&&c.o&&oo(_,c.m,c.o),g=new jt(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$l(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),io(c.h,g),to(g,_,f)}function Ms(c,f){c.H&&J(c.H,function(g,_){ue(f,_,g)}),c.l&&Sl({},function(g,_){ue(f,_,g)})}function $l(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=N[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let le=!0;for(let ke=0;ke<g;ke++){let ce=N[ke].g;const Re=N[ke].map;if(ce-=D,0>ce)D=Math.max(0,N[ke].g-100),le=!1;else try{kg(Re,z,"req"+ce+"_")}catch{_&&_(Re)}}if(le){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function zl(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ks(p(c.Fa,c),Gl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ks(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),jr(this),Hl(this))};function lo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hl(c){c.g=new jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=gt(c.qa);ue(f,"RID","rpc"),ue(f,"SID",c.K),ue(f,"AID",c.T),ue(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ue(f,"TO",c.ja),ue(f,"TYPE","xmlhttp"),Ms(c,f),c.m&&c.o&&oo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Fr(gt(f)),g.m=null,g.P=!0,yl(g,c)}t.Za=function(){this.C!=null&&(this.C=null,jr(this),co(this),Oe(19))};function $r(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Wl(c,f){var g=null;if(c.g==f){$r(c),lo(c),c.g=null;var _=2}else if(ro(c.h,f))g=f.D,Cl(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Nr(),se(_,new pl(_,g)),Br(c)}else zl(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&Ng(c,f)||_==2&&co(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:hn(c,5);break;case 4:hn(c,10);break;case 3:hn(c,6);break;default:hn(c,2)}}}function Gl(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function hn(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new un(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lr(_,"https"),Fr(_),N?Cg(_.toString(),g):Ig(_.toString(),g)}else Oe(2);c.G=0,c.l&&c.l.sa(f),Kl(c),jl(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const f=Il(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ql(c,f,g){var _=g instanceof un?gt(g):new un(g);if(_.g!="")f&&(_.g=f+"."+_.g),Mr(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var D=new un(null);_&&Lr(D,_),f&&(D.g=f),N&&Mr(D,N),g&&(D.l=g),_=D}return g=c.D,f=c.ya,g&&f&&ue(_,g,f),ue(_,"VER",c.la),Ms(c,_),_}function Yl(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new pe(new Vr({eb:g})):new pe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(c,f){return new qe(c,f)};function qe(c,f){re.call(this),this.g=new ql(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gn(this)}w(qe,re),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){ao(this.g)},qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Le(c),c=g);f.i.push(new pg(f.Ya++,c)),f.G==3&&Br(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,qe.aa.N.call(this)};function Jl(c){Xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(Jl,Xi);function Zl(){Ji.call(this),this.status=1}w(Zl,Ji);function Gn(c){this.g=c}w(Gn,Xl),Gn.prototype.ua=function(){se(this.g,"a")},Gn.prototype.ta=function(c){se(this.g,new Jl(c))},Gn.prototype.sa=function(c){se(this.g,new Zl)},Gn.prototype.ra=function(){se(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,ALe=function(){return new zr},RLe=function(){return Nr()},kLe=cn,YQ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,q4=xr,gl.COMPLETE="complete",SLe=gl,ul.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",re.prototype.listen=re.prototype.K,bA=ul,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,ILe=pe}).apply(typeof lF<"u"?lF:typeof self<"u"?self:typeof window<"u"?window:{});const Zme="@firebase/firestore",e_e="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ha{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ha.UNAUTHENTICATED=new Ha(null),Ha.GOOGLE_CREDENTIALS=new Ha("google-credentials-uid"),Ha.FIRST_PARTY=new Ha("first-party-uid"),Ha.MOCK_USER=new Ha("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let I1="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zT=new WB("@firebase/firestore");function W0(){return zT.logLevel}function Be(t,...e){if(zT.logLevel<=wn.DEBUG){const n=e.map(Xne);zT.debug(`Firestore (${I1}): ${t}`,...n)}}function Zm(t,...e){if(zT.logLevel<=wn.ERROR){const n=e.map(Xne);zT.error(`Firestore (${I1}): ${t}`,...n)}}function QS(t,...e){if(zT.logLevel<=wn.WARN){const n=e.map(Xne);zT.warn(`Firestore (${I1}): ${t}`,...n)}}function Xne(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Et(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,PLe(t,s,n)}function PLe(t,e,n){let s=`FIRESTORE (${I1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Zm(s),new Error(s)}function bs(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||PLe(e,r,s)}function Yt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends ng{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _v{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NLe{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hvt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ha.UNAUTHENTICATED))}shutdown(){}}class dvt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fvt{constructor(e){this.t=e,this.currentUser=Ha.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bs(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new _v;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _v,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _v)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bs(typeof s.accessToken=="string",31837,{l:s}),new NLe(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bs(e===null||typeof e=="string",2055,{h:e}),new Ha(e)}}class pvt{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ha.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gvt{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new pvt(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ha.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t_e{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mvt{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bs(this.o===void 0,3512);const s=i=>{i.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new t_e(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(bs(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new t_e(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _vt(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jne{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=_vt(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Nn(t,e){return t<e?-1:t>e?1:0}function XQ(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return FW(r)===FW(i)?Nn(r,i):FW(r)?1:-1}return Nn(t.length,e.length)}const yvt=55296,vvt=57343;function FW(t){const e=t.charCodeAt(0);return e>=yvt&&e<=vvt}function YS(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n_e="__name__";class xf{constructor(e,n,s){n===void 0?n=0:n>e.length&&Et(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Et(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xf?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=xf.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Nn(e.length,n.length)}static compareSegments(e,n){const s=xf.isNumericId(e),r=xf.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?xf.extractNumericId(e).compare(xf.extractNumericId(n)):XQ(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mv.fromString(e.substring(4,e.length-2))}}let vo=class j4 extends xf{construct(e,n,s){return new j4(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Je(be.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new j4(n)}static emptyPath(){return new j4([])}};const wvt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ya extends xf{construct(e,n,s){return new ya(e,n,s)}static isValidIdentifier(e){return wvt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ya.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n_e}static keyField(){return new ya([n_e])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Je(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Je(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Je(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Je(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ya(n)}static emptyPath(){return new ya([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ut{constructor(e){this.path=e}static fromPath(e){return new ut(vo.fromString(e))}static fromName(e){return new ut(vo.fromString(e).popFirst(5))}static empty(){return new ut(vo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return vo.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new vo(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bvt(t,e,n){if(!n)throw new Je(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Evt(t,e,n,s){if(e===!0&&s===!0)throw new Je(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function s_e(t){if(!ut.isDocumentKey(t))throw new Je(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xLe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Zne(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et(12329,{type:typeof t})}function Ad(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Je(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zne(t);throw new Je(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Li(t,e){const n={typeString:t};return e&&(n.value=e),n}function pM(t,e){if(!xLe(t))throw new Je(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Je(be.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const r_e=-62135596800,i_e=1e6;class br{static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*i_e);return new br(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r_e)throw new Je(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i_e}_compareTo(e){return this.seconds===e.seconds?Nn(this.nanoseconds,e.nanoseconds):Nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:br._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pM(e,br._jsonSchema))return new br(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r_e;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}br._jsonSchemaVersion="firestore/timestamp/1.0",br._jsonSchema={type:Li("string",br._jsonSchemaVersion),seconds:Li("number"),nanoseconds:Li("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let sn=class B4{static fromTimestamp(e){return new B4(e)}static min(){return new B4(new br(0,0))}static max(){return new B4(new br(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mx=-1;function Tvt(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=sn.fromTimestamp(s===1e9?new br(n+1,0):new br(n,s));return new fw(r,ut.empty(),e)}function Cvt(t){return new fw(t.readTime,t.key,Mx)}class fw{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new fw(sn.min(),ut.empty(),Mx)}static max(){return new fw(sn.max(),ut.empty(),Mx)}}function Ivt(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Nn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Svt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kvt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function S1(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==Svt)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):me.reject(n)}static resolve(e){return new me((n,s)=>{n(e)})}static reject(e){return new me((n,s)=>{s(e)})}static waitFor(e){return new me((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=me.resolve(!1);for(const s of e)n=n.next(r=>r?me.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new me((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new me((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Rvt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function k1(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class u5{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}u5.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ese=-1;function h5(t){return t==null}function u6(t){return t===0&&1/t==-1/0}function Avt(t){return typeof t=="number"&&Number.isInteger(t)&&!u6(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DLe="";function Pvt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o_e(e)),e=Nvt(t.get(n),e);return o_e(e)}function Nvt(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case DLe:n+="";break;default:n+=i}}return n}function o_e(t){return t+DLe+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a_e(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bb(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OLe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Hi=class JQ{constructor(e,n){this.comparator=e,this.root=n||yv.EMPTY}insert(e,n){return new JQ(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yv.BLACK,null,null))}remove(e){return new JQ(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yv.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uF(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uF(this.root,e,this.comparator,!1)}getReverseIterator(){return new uF(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uF(this.root,e,this.comparator,!0)}},uF=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},yv=class $g{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??$g.RED,this.left=r??$g.EMPTY,this.right=i??$g.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new $g(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $g.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $g.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$g.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$g.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}};yv.EMPTY=null,yv.RED=!0,yv.BLACK=!1;yv.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new yv(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mo{constructor(e){this.comparator=e,this.data=new Hi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c_e(this.data.getIterator())}getIteratorFrom(e){return new c_e(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mo(this.comparator);return n.data=e,n}}class c_e{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uu{constructor(e){this.fields=e,e.sort(ya.comparator)}static empty(){return new Uu([])}unionWith(e){let n=new Mo(ya.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Uu(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return YS(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LLe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ia{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new LLe("Invalid base64 string: "+r):r}}(e);return new Ia(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Ia(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ia.EMPTY_BYTE_STRING=new Ia("");const xvt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pw(t){if(bs(!!t,39018),typeof t=="string"){let e=0;const n=xvt.exec(t);if(bs(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ci(t.seconds),nanos:Ci(t.nanos)}}function Ci(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gw(t){return typeof t=="string"?Ia.fromBase64String(t):Ia.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MLe="server_timestamp",FLe="__type__",VLe="__previous_value__",ULe="__local_write_time__";function tse(t){return(t?.mapValue?.fields||{})[FLe]?.stringValue===MLe}function d5(t){const e=t.mapValue.fields[VLe];return tse(e)?d5(e):e}function Fx(t){const e=pw(t.mapValue.fields[ULe].timestampValue);return new br(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dvt{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const h6="(default)";class Vx{constructor(e,n){this.projectId=e,this.database=n||h6}static empty(){return new Vx("","")}get isDefaultDatabase(){return this.database===h6}isEqual(e){return e instanceof Vx&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qLe="__type__",Ovt="__max__",hF={mapValue:{}},jLe="__vector__",d6="value";function mw(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tse(t)?4:Mvt(t)?9007199254740991:Lvt(t)?10:11:Et(28295,{value:t})}function Lp(t,e){if(t===e)return!0;const n=mw(t);if(n!==mw(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fx(t).isEqual(Fx(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=pw(s.timestampValue),o=pw(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return gw(s.bytesValue).isEqual(gw(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Ci(s.geoPointValue.latitude)===Ci(r.geoPointValue.latitude)&&Ci(s.geoPointValue.longitude)===Ci(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ci(s.integerValue)===Ci(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Ci(s.doubleValue),o=Ci(r.doubleValue);return i===o?u6(i)===u6(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return YS(t.arrayValue.values||[],e.arrayValue.values||[],Lp);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(a_e(i)!==a_e(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Lp(i[a],o[a])))return!1;return!0}(t,e);default:return Et(52216,{left:t})}}function Ux(t,e){return(t.values||[]).find(n=>Lp(n,e))!==void 0}function XS(t,e){if(t===e)return 0;const n=mw(t),s=mw(e);if(n!==s)return Nn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Ci(r.integerValue||r.doubleValue),a=Ci(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return l_e(t.timestampValue,e.timestampValue);case 4:return l_e(Fx(t),Fx(e));case 5:return XQ(t.stringValue,e.stringValue);case 6:return function(r,i){const o=gw(r),a=gw(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Nn(o[l],a[l]);if(u!==0)return u}return Nn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Nn(Ci(r.latitude),Ci(i.latitude));return o!==0?o:Nn(Ci(r.longitude),Ci(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u_e(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[d6]?.arrayValue,u=a[d6]?.arrayValue,h=Nn(l?.values?.length||0,u?.values?.length||0);return h!==0?h:u_e(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===hF.mapValue&&i===hF.mapValue)return 0;if(r===hF.mapValue)return 1;if(i===hF.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=XQ(a[h],u[h]);if(d!==0)return d;const p=XS(o[a[h]],l[u[h]]);if(p!==0)return p}return Nn(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Et(23264,{he:n})}}function l_e(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Nn(t,e);const n=pw(t),s=pw(e),r=Nn(n.seconds,s.seconds);return r!==0?r:Nn(n.nanos,s.nanos)}function u_e(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=XS(n[r],s[r]);if(i)return i}return Nn(n.length,s.length)}function JS(t){return ZQ(t)}function ZQ(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=pw(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return gw(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return ut.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=ZQ(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${ZQ(e.fields[i])}`;return s+"}"}(t.mapValue):Et(61005,{value:t})}function $4(t){switch(mw(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=d5(t);return e?16+$4(e):16;case 5:return 2*t.stringValue.length;case 6:return gw(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+$4(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return bb(n.fields,(r,i)=>{s+=r.length+$4(i)}),s}(t.mapValue);default:throw Et(13486,{value:t})}}function eY(t){return!!t&&"integerValue"in t}function nse(t){return!!t&&"arrayValue"in t}function h_e(t){return!!t&&"nullValue"in t}function d_e(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function z4(t){return!!t&&"mapValue"in t}function Lvt(t){return(t?.mapValue?.fields||{})[qLe]?.stringValue===jLe}function IP(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return bb(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=IP(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=IP(t.arrayValue.values[n]);return e}return{...t}}function Mvt(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ovt}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ou{constructor(e){this.value=e}static empty(){return new ou({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!z4(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=IP(n)}setAll(e){let n=ya.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=IP(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());z4(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lp(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];z4(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){bb(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new ou(IP(this.value))}}function BLe(t){const e=[];return bb(t.fields,(n,s)=>{const r=new ya([n]);if(z4(s)){const i=BLe(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Uu(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Za{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Za(e,0,sn.min(),sn.min(),sn.min(),ou.empty(),0)}static newFoundDocument(e,n,s,r){return new Za(e,1,n,sn.min(),s,r,0)}static newNoDocument(e,n){return new Za(e,2,n,sn.min(),sn.min(),ou.empty(),0)}static newUnknownDocument(e,n){return new Za(e,3,n,sn.min(),sn.min(),ou.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ou.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ou.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Za&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Za(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f6{constructor(e,n){this.position=e,this.inclusive=n}}function f_e(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ut.comparator(ut.fromName(o.referenceValue),n.key):s=XS(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function p_e(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lp(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p6{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fvt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Le{}class Co extends $Le{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Uvt(e,n,s):n==="array-contains"?new Bvt(e,s):n==="in"?new $vt(e,s):n==="not-in"?new zvt(e,s):n==="array-contains-any"?new Hvt(e,s):new Co(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new qvt(e,s):new jvt(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(XS(n,this.value)):n!==null&&mw(this.value)===mw(n)&&this.matchesComparison(XS(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mp extends $Le{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Mp(e,n)}matches(e){return zLe(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zLe(t){return t.op==="and"}function HLe(t){return Vvt(t)&&zLe(t)}function Vvt(t){for(const e of t.filters)if(e instanceof Mp)return!1;return!0}function tY(t){if(t instanceof Co)return t.field.canonicalString()+t.op.toString()+JS(t.value);if(HLe(t))return t.filters.map(e=>tY(e)).join(",");{const e=t.filters.map(n=>tY(n)).join(",");return`${t.op}(${e})`}}function WLe(t,e){return t instanceof Co?function(n,s){return s instanceof Co&&n.op===s.op&&n.field.isEqual(s.field)&&Lp(n.value,s.value)}(t,e):t instanceof Mp?function(n,s){return s instanceof Mp&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&WLe(i,s.filters[o]),!0):!1}(t,e):void Et(19439)}function GLe(t){return t instanceof Co?function(e){return`${e.field.canonicalString()} ${e.op} ${JS(e.value)}`}(t):t instanceof Mp?function(e){return e.op.toString()+" {"+e.getFilters().map(GLe).join(" ,")+"}"}(t):"Filter"}class Uvt extends Co{constructor(e,n,s){super(e,n,s),this.key=ut.fromName(s.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class qvt extends Co{constructor(e,n){super(e,"in",n),this.keys=KLe("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jvt extends Co{constructor(e,n){super(e,"not-in",n),this.keys=KLe("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KLe(t,e){return(e.arrayValue?.values||[]).map(n=>ut.fromName(n.referenceValue))}class Bvt extends Co{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nse(n)&&Ux(n.arrayValue,this.value)}}class $vt extends Co{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ux(this.value.arrayValue,n)}}class zvt extends Co{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ux(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ux(this.value.arrayValue,n)}}class Hvt extends Co{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nse(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ux(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wvt{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function g_e(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Wvt(t,e,n,s,r,i,o)}function sse(t){const e=Yt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>tY(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),h5(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>JS(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>JS(s)).join(",")),e.Te=n}return e.Te}function rse(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fvt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!WLe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p_e(t.startAt,e.startAt)&&p_e(t.endAt,e.endAt)}function nY(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f5{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gvt(t,e,n,s,r,i,o,a){return new f5(t,e,n,s,r,i,o,a)}function p5(t){return new f5(t)}function m_e(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Kvt(t){return t.collectionGroup!==null}function SP(t){const e=Yt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new Mo(ya.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new p6(r,s))}),n.has(ya.keyField().canonicalString())||e.Ie.push(new p6(ya.keyField(),s))}return e.Ie}function rp(t){const e=Yt(t);return e.Ee||(e.Ee=Qvt(e,SP(t))),e.Ee}function Qvt(t,e){if(t.limitType==="F")return g_e(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new p6(r.field,i)});const n=t.endAt?new f6(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new f6(t.startAt.position,t.startAt.inclusive):null;return g_e(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function sY(t,e,n){return new f5(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function g5(t,e){return rse(rp(t),rp(e))&&t.limitType===e.limitType}function QLe(t){return`${sse(rp(t))}|lt:${t.limitType}`}function G0(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>GLe(s)).join(", ")}]`),h5(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>JS(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>JS(s)).join(",")),`Target(${n})`}(rp(t))}; limitType=${t.limitType})`}function m5(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ut.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of SP(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=f_e(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,SP(n),s)||n.endAt&&!function(r,i,o){const a=f_e(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,SP(n),s))}(t,e)}function Yvt(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YLe(t){return(e,n)=>{let s=!1;for(const r of SP(t)){const i=Xvt(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Xvt(t,e,n){const s=t.field.isKeyField()?ut.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?XS(a,l):Et(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Et(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jC{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){bb(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return OLe(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jvt=new Hi(ut.comparator);function e_(){return Jvt}const XLe=new Hi(ut.comparator);function EA(...t){let e=XLe;for(const n of t)e=e.insert(n.key,n);return e}function JLe(t){let e=XLe;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function xE(){return kP()}function ZLe(){return kP()}function kP(){return new jC(t=>t.toString(),(t,e)=>t.isEqual(e))}const Zvt=new Hi(ut.comparator),ewt=new Mo(ut.comparator);function Fn(...t){let e=ewt;for(const n of t)e=e.add(n);return e}const twt=new Mo(Nn);function nwt(){return twt}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ise(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u6(e)?"-0":e}}function eMe(t){return{integerValue:""+t}}function swt(t,e){return Avt(e)?eMe(e):ise(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _5{constructor(){this._=void 0}}function rwt(t,e,n){return t instanceof qx?function(s,r){const i={fields:{[FLe]:{stringValue:MLe},[ULe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&tse(r)&&(r=d5(r)),r&&(i.fields[VLe]=r),{mapValue:i}}(n,e):t instanceof jx?nMe(t,e):t instanceof Bx?sMe(t,e):function(s,r){const i=tMe(s,r),o=__e(i)+__e(s.Ae);return eY(i)&&eY(s.Ae)?eMe(o):ise(s.serializer,o)}(t,e)}function iwt(t,e,n){return t instanceof jx?nMe(t,e):t instanceof Bx?sMe(t,e):n}function tMe(t,e){return t instanceof g6?function(n){return eY(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class qx extends _5{}class jx extends _5{constructor(e){super(),this.elements=e}}function nMe(t,e){const n=rMe(e);for(const s of t.elements)n.some(r=>Lp(r,s))||n.push(s);return{arrayValue:{values:n}}}class Bx extends _5{constructor(e){super(),this.elements=e}}function sMe(t,e){let n=rMe(e);for(const s of t.elements)n=n.filter(r=>!Lp(r,s));return{arrayValue:{values:n}}}class g6 extends _5{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function __e(t){return Ci(t.integerValue||t.doubleValue)}function rMe(t){return nse(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class owt{constructor(e,n){this.field=e,this.transform=n}}function awt(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof jx&&s instanceof jx||n instanceof Bx&&s instanceof Bx?YS(n.elements,s.elements,Lp):n instanceof g6&&s instanceof g6?Lp(n.Ae,s.Ae):n instanceof qx&&s instanceof qx}(t.transform,e.transform)}class cwt{constructor(e,n){this.version=e,this.transformResults=n}}class Pd{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Pd}static exists(e){return new Pd(void 0,e)}static updateTime(e){return new Pd(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function H4(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class y5{}function iMe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ose(t.key,Pd.none()):new gM(t.key,t.data,Pd.none());{const n=t.data,s=ou.empty();let r=new Mo(ya.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Eb(t.key,s,new Uu(r.toArray()),Pd.none())}}function lwt(t,e,n){t instanceof gM?function(s,r,i){const o=s.value.clone(),a=v_e(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Eb?function(s,r,i){if(!H4(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=v_e(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(oMe(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function RP(t,e,n,s){return t instanceof gM?function(r,i,o,a){if(!H4(r.precondition,i))return o;const l=r.value.clone(),u=w_e(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Eb?function(r,i,o,a){if(!H4(r.precondition,i))return o;const l=w_e(r.fieldTransforms,a,i),u=i.data;return u.setAll(oMe(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return H4(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function uwt(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=tMe(s.transform,r||null);i!=null&&(n===null&&(n=ou.empty()),n.set(s.field,i))}return n||null}function y_e(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&YS(n,s,(r,i)=>awt(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gM extends y5{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Eb extends y5{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oMe(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function v_e(t,e,n){const s=new Map;bs(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,iwt(o,a,n[r]))}return s}function w_e(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,rwt(i,o,e))}return s}class ose extends y5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hwt extends y5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dwt{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&lwt(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=RP(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=RP(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ZLe();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=iMe(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(sn.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fn())}isEqual(e){return this.batchId===e.batchId&&YS(this.mutations,e.mutations,(n,s)=>y_e(n,s))&&YS(this.baseMutations,e.baseMutations,(n,s)=>y_e(n,s))}}class ase{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){bs(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return Zvt}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ase(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fwt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pwt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pi,Yn;function gwt(t){switch(t){case be.OK:return Et(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return Et(15467,{code:t})}}function aMe(t){if(t===void 0)return Zm("GRPC error has no .code"),be.UNKNOWN;switch(t){case Pi.OK:return be.OK;case Pi.CANCELLED:return be.CANCELLED;case Pi.UNKNOWN:return be.UNKNOWN;case Pi.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Pi.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Pi.INTERNAL:return be.INTERNAL;case Pi.UNAVAILABLE:return be.UNAVAILABLE;case Pi.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Pi.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Pi.NOT_FOUND:return be.NOT_FOUND;case Pi.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Pi.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Pi.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Pi.ABORTED:return be.ABORTED;case Pi.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Pi.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Pi.DATA_LOSS:return be.DATA_LOSS;default:return Et(39323,{code:t})}}(Yn=Pi||(Pi={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mwt(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _wt=new mv([4294967295,4294967295],0);function b_e(t){const e=mwt().encode(t),n=new CLe;return n.update(e),new Uint8Array(n.digest())}function E_e(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mv([n,s],0),new mv([r,i],0)]}class cse{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new TA(`Invalid padding: ${n}`);if(s<0)throw new TA(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new TA(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new TA(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mv.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(mv.fromNumber(s)));return r.compare(_wt)===1&&(r=new mv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=b_e(e),[s,r]=E_e(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cse(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=b_e(e),[s,r]=E_e(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class TA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v5{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,mM.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new v5(sn.min(),r,new Hi(Nn),e_(),Fn())}}class mM{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new mM(s,n,Fn(),Fn(),Fn())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W4{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class cMe{constructor(e,n){this.targetId=e,this.Ce=n}}class lMe{constructor(e,n,s=Ia.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class T_e{constructor(){this.ve=0,this.Fe=C_e(),this.Me=Ia.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fn(),n=Fn(),s=Fn();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Et(38017,{changeType:i})}}),new mM(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=C_e()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,bs(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ywt{constructor(e){this.Ge=e,this.ze=new Map,this.je=e_(),this.Je=dF(),this.He=dF(),this.Ye=new Hi(Nn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(nY(i))if(s===0){const o=new ut(i.path);this.et(n,o,Za.newNoDocument(o,sn.min()))}else bs(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=gw(s).toUint8Array()}catch(l){if(l instanceof LLe)return QS("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cse(o,r,i)}catch(l){return QS(l instanceof TA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&nY(a.target)){const l=new ut(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Za.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Fn();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new v5(e,n,this.Ye,this.je,s);return this.je=e_(),this.Je=dF(),this.He=dF(),this.Ye=new Hi(Nn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new T_e,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Mo(Nn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Mo(Nn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new T_e),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dF(){return new Hi(ut.comparator)}function C_e(){return new Hi(ut.comparator)}const vwt={asc:"ASCENDING",desc:"DESCENDING"},wwt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bwt={and:"AND",or:"OR"};class Ewt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rY(t,e){return t.useProto3Json||h5(e)?e:{value:e}}function m6(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uMe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Twt(t,e){return m6(t,e.toTimestamp())}function ip(t){return bs(!!t,49232),sn.fromTimestamp(function(e){const n=pw(e);return new br(n.seconds,n.nanos)}(t))}function lse(t,e){return iY(t,e).canonicalString()}function iY(t,e){const n=function(s){return new vo(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hMe(t){const e=vo.fromString(t);return bs(mMe(e),10190,{key:e.toString()}),e}function oY(t,e){return lse(t.databaseId,e.path)}function VW(t,e){const n=hMe(e);if(n.get(1)!==t.databaseId.projectId)throw new Je(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Je(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(fMe(n))}function dMe(t,e){return lse(t.databaseId,e)}function Cwt(t){const e=hMe(t);return e.length===4?vo.emptyPath():fMe(e)}function aY(t){return new vo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fMe(t){return bs(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function I_e(t,e,n){return{name:oY(t,e),fields:n.value.mapValue.fields}}function Iwt(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Et(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(bs(u===void 0||typeof u=="string",58123),Ia.fromBase64String(u||"")):(bs(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ia.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?be.UNKNOWN:aMe(l.code);return new Je(u,l.message||"")}(o);n=new lMe(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=VW(t,s.document.name),i=ip(s.document.updateTime),o=s.document.createTime?ip(s.document.createTime):sn.min(),a=new ou({mapValue:{fields:s.document.fields}}),l=Za.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new W4(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=VW(t,s.document),i=s.readTime?ip(s.readTime):sn.min(),o=Za.newNoDocument(r,i),a=s.removedTargetIds||[];n=new W4([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=VW(t,s.document),i=s.removedTargetIds||[];n=new W4([],i,r,null)}else{if(!("filter"in e))return Et(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new pwt(r,i),a=s.targetId;n=new cMe(a,o)}}return n}function Swt(t,e){let n;if(e instanceof gM)n={update:I_e(t,e.key,e.value)};else if(e instanceof ose)n={delete:oY(t,e.key)};else if(e instanceof Eb)n={update:I_e(t,e.key,e.data),updateMask:Lwt(e.fieldMask)};else{if(!(e instanceof hwt))return Et(16599,{Vt:e.type});n={verify:oY(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof qx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jx)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Bx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof g6)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Et(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Twt(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Et(27497)}(t,e.precondition)),n}function kwt(t,e){return t&&t.length>0?(bs(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?ip(s.updateTime):ip(r);return i.isEqual(sn.min())&&(i=ip(r)),new cwt(i,s.transformResults||[])}(n,e))):[]}function Rwt(t,e){return{documents:[dMe(t,e.path)]}}function Awt(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=dMe(t,r);const i=function(l){if(l.length!==0)return gMe(Mp.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:K0(h.field),direction:xwt(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=rY(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function Pwt(t){let e=Cwt(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){bs(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=pMe(h);return d instanceof Mp&&HLe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new p6(Q0(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,h5(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new f6(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new f6(p,d)}(n.endAt)),Gvt(e,r,o,i,a,"F",l,u)}function Nwt(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pMe(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Q0(e.unaryFilter.field);return Co.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Q0(e.unaryFilter.field);return Co.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Q0(e.unaryFilter.field);return Co.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Q0(e.unaryFilter.field);return Co.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}}(t):t.fieldFilter!==void 0?function(e){return Co.create(Q0(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Mp.create(e.compositeFilter.filters.map(n=>pMe(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Et(1026)}}(e.compositeFilter.op))}(t):Et(30097,{filter:t})}function xwt(t){return vwt[t]}function Dwt(t){return wwt[t]}function Owt(t){return bwt[t]}function K0(t){return{fieldPath:t.canonicalString()}}function Q0(t){return ya.fromServerFormat(t.fieldPath)}function gMe(t){return t instanceof Co?function(e){if(e.op==="=="){if(d_e(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NAN"}};if(h_e(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(d_e(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NOT_NAN"}};if(h_e(e.value))return{unaryFilter:{field:K0(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K0(e.field),op:Dwt(e.op),value:e.value}}}(t):t instanceof Mp?function(e){const n=e.getFilters().map(s=>gMe(s));return n.length===1?n[0]:{compositeFilter:{op:Owt(e.op),filters:n}}}(t):Et(54877,{filter:t})}function Lwt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mMe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jy{constructor(e,n,s,r,i=sn.min(),o=sn.min(),a=Ia.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Jy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jy(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mwt{constructor(e){this.yt=e}}function Fwt(t){const e=Pwt({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sY(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vwt{constructor(){this.Cn=new Uwt}addToCollectionParentIndex(e,n){return this.Cn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(fw.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(fw.min())}updateCollectionGroup(e,n,s){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class Uwt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Mo(vo.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Mo(vo.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const S_e={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_Me=41943040;class tu{static withCacheSize(e){return new tu(e,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/tu.DEFAULT_COLLECTION_PERCENTILE=10,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tu.DEFAULT=new tu(_Me,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tu.DISABLED=new tu(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZS{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ZS(0)}static cr(){return new ZS(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k_e="LruGarbageCollector",qwt=1048576;function R_e([t,e],[n,s]){const r=Nn(t,n);return r===0?Nn(e,s):r}class jwt{constructor(e){this.Ir=e,this.buffer=new Mo(R_e),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();R_e(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bwt{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be(k_e,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){k1(n)?Be(k_e,"Ignoring IndexedDB error during garbage collection: ",n):await S1(n)}await this.Vr(3e5)})}}class $wt{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return me.resolve(u5.ce);const s=new jwt(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(S_e)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_e):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),W0()<=wn.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function zwt(t,e){return new $wt(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hwt{constructor(){this.changes=new jC(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Za.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?me.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wwt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gwt{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&RP(s.mutation,r,Uu.empty(),br.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Fn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Fn()){const r=xE();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=EA();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=xE();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Fn()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=e_();const o=kP(),a=function(){return kP()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Eb)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),RP(h.mutation,u,h.mutation.getFieldMask(),br.now())):o.set(u.key,Uu.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new Wwt(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=kP();let r=new Hi((o,a)=>o-a),i=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Uu.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Fn()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=ZLe();h.forEach(p=>{if(!i.has(p)){const m=iMe(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return me.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return ut.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Kvt(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):me.resolve(xE());let a=Mx,l=i;return o.next(u=>me.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?me.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Fn())).next(h=>({batchId:a,changes:JLe(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(s=>{let r=EA();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=EA();return this.indexManager.getCollectionParents(e,i).next(a=>me.forEach(a,l=>{const u=function(h,d){return new f5(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Za.newInvalidDocument(h)))});let a=EA();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&RP(h.mutation,u,Uu.empty(),br.now()),m5(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kwt{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return me.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ip(s.createTime)}}(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Fwt(s.bundledQuery),readTime:ip(s.readTime)}}(n)),me.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qwt{constructor(){this.overlays=new Hi(ut.comparator),this.qr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const s=xE();return me.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),me.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),me.resolve()}getOverlaysForCollection(e,n,s){const r=xE(),i=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return me.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Hi((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=xE(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=xE(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return me.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new fwt(n,s));let i=this.qr.get(n);i===void 0&&(i=Fn(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ywt{constructor(){this.sessionToken=Ia.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class use{constructor(){this.Qr=new Mo(Xo.$r),this.Ur=new Mo(Xo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Xo(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Xo(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ut(new vo([])),s=new Xo(n,e),r=new Xo(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ut(new vo([])),s=new Xo(n,e),r=new Xo(n,e+1);let i=Fn();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xo(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Xo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ut.comparator(e.key,n.key)||Nn(e.Yr,n.Yr)}static Kr(e,n){return Nn(e.Yr,n.Yr)||ut.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xwt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Mo(Xo.$r)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new dwt(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Xo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return me.resolve(o)}lookupMutationBatch(e,n){return me.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return me.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?ese:this.tr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Xo(n,0),r=new Xo(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),me.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Mo(Nn);return n.forEach(r=>{const i=new Xo(r,0),o=new Xo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),me.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ut.isDocumentKey(i)||(i=i.child(""));const o=new Xo(new ut(i),0);let a=new Mo(Nn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),me.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){bs(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return me.forEach(n.mutations,r=>{const i=new Xo(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Xo(n,0),r=this.Zr.firstAfterOrEqual(s);return me.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jwt{constructor(e){this.ri=e,this.docs=function(){return new Hi(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return me.resolve(s?s.document.mutableCopy():Za.newInvalidDocument(n))}getEntries(e,n){let s=e_();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Za.newInvalidDocument(r))}),me.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=e_();const o=n.path,a=new ut(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Ivt(Cvt(h),s)<=0||(r.has(h.key)||m5(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Et(9500)}ii(e,n){return me.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Zwt(this)}getSize(e){return me.resolve(this.size)}}class Zwt extends Hwt{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),me.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ebt{constructor(e){this.persistence=e,this.si=new jC(n=>sse(n),rse),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.oi=0,this._i=new use,this.targetCount=0,this.ai=ZS.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),me.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ZS(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.Pr(n),me.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),me.waitFor(i).next(()=>r)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return me.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),me.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),me.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return me.resolve(s)}containsKey(e,n){return me.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yMe{constructor(e,n){this.ui={},this.overlays={},this.ci=new u5(0),this.li=!1,this.li=!0,this.hi=new Ywt,this.referenceDelegate=e(this),this.Pi=new ebt(this),this.indexManager=new Vwt,this.remoteDocumentCache=function(s){return new Jwt(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Mwt(n),this.Ii=new Kwt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qwt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Xwt(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Be("MemoryPersistence","Starting transaction:",e);const r=new tbt(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return me.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class tbt extends kvt{constructor(e){super(),this.currentSequenceNumber=e}}class hse{constructor(e){this.persistence=e,this.Ri=new use,this.Vi=null}static mi(e){return new hse(e)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),me.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.fi,s=>{const r=ut.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,sn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _6{constructor(e,n){this.persistence=e,this.pi=new jC(s=>Pvt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=zwt(this,n)}static mi(e,n){return new _6(e,n)}Ei(){}di(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return me.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?me.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,sn.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),me.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$4(e.data.value)),n}br(e,n,s){return me.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return me.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dse{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Fn(),r=Fn();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dse(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nbt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sbt{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return smt()?8:Rvt(vc())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new nbt;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(W0()<=wn.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",G0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),me.resolve()):(W0()<=wn.DEBUG&&Be("QueryEngine","Query:",G0(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(W0()<=wn.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",G0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rp(n))):me.resolve())}ys(e,n){if(m_e(n))return me.resolve(null);let s=rp(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=sY(n,null,"F"),s=rp(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Fn(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,sY(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return m_e(n)||r.isEqual(sn.min())?me.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?me.resolve(null):(W0()<=wn.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),G0(n)),this.vs(e,o,n,Tvt(r,Mx)).next(a=>a))})}Ds(e,n){let s=new Mo(YLe(e));return n.forEach((r,i)=>{m5(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return W0()<=wn.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",G0(n)),this.ps.getDocumentsMatchingQuery(e,n,fw.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fse="LocalStore",rbt=3e8;class ibt{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Hi(Nn),this.xs=new jC(i=>sse(i),rse),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gwt(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function obt(t,e,n,s){return new ibt(t,e,n,s)}async function vMe(t,e){const n=Yt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Fn();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function abt(t,e){const n=Yt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=me.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const R=l.docVersions.get(m);bs(R!==null,48541),w.version.compareTo(R)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Fn();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function wMe(t){const e=Yt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function cbt(t,e){const n=Yt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ia.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,R,P){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=rbt?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=e_(),u=Fn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(lbt(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(sn.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return me.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function lbt(t,e,n){let s=Fn(),r=Fn();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=e_();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(sn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Be(fse,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function ubt(t,e){const n=Yt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ese),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function hbt(t,e){const n=Yt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,me.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Jy(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function cY(t,e,n){const s=Yt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!k1(o))throw o;Be(fse,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function A_e(t,e,n){const s=Yt(t);let r=sn.min(),i=Fn();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=Yt(a),d=h.xs.get(u);return d!==void 0?me.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,rp(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:sn.min(),n?i:Fn())).next(a=>(dbt(s,Yvt(e),a),{documents:a,Qs:i})))}function dbt(t,e,n){let s=t.Os.get(e)||sn.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class P_e{constructor(){this.activeTargetIds=nwt()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fbt{constructor(){this.Mo=new P_e,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new P_e,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pbt{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N_e="ConnectivityMonitor";class x_e{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(N_e,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(N_e,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let fF=null;function lY(){return fF===null?fF=function(){return 268435456+Math.round(2147483648*Math.random())}():fF++,"0x"+fF.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UW="RestConnection",gbt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mbt{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===h6?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=lY(),a=this.zo(e,n.toUriEncodedString());Be(UW,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=tg(u);return this.Jo(e,a,l,s,h).then(d=>(Be(UW,`Received RPC '${e}' ${o}: `,d),d),d=>{throw QS(UW,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+I1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=gbt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _bt{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pa="WebChannelConnection";class ybt extends mbt{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=lY();return new Promise((a,l)=>{const u=new ILe;u.setWithCredentials(!0),u.listenOnce(SLe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case q4.NO_ERROR:const d=u.getResponseJson();Be(Pa,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case q4.TIMEOUT:Be(Pa,`RPC '${e}' ${o} timed out`),l(new Je(be.DEADLINE_EXCEEDED,"Request time out"));break;case q4.HTTP_ERROR:const p=u.getStatus();if(Be(Pa,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const R=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(O)>=0?O:be.UNKNOWN}(w.status);l(new Je(R,w.message))}else l(new Je(be.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Je(be.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Be(Pa,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Be(Pa,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=lY(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ALe(),a=RLe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");Be(Pa,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new _bt({Yo:P=>{m?Be(Pa,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Be(Pa,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Be(Pa,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),R=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return R(d,bA.EventType.OPEN,()=>{m||(Be(Pa,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),R(d,bA.EventType.CLOSE,()=>{m||(m=!0,Be(Pa,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),R(d,bA.EventType.ERROR,P=>{m||(m=!0,QS(Pa,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Je(be.UNAVAILABLE,"The operation could not be completed")))}),R(d,bA.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];bs(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){Be(Pa,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let W=function(I){const v=Pi[I];if(v!==void 0)return aMe(v)}(q),J=V.message;W===void 0&&(W=be.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Je(W,J)),d.close()}else Be(Pa,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),R(a,kLe.STAT_EVENT,P=>{P.stat===YQ.PROXY?Be(Pa,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===YQ.NOPROXY&&Be(Pa,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qW(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w5(t){return new Ewt(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bMe{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Be("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const D_e="PersistentStream";class EMe{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bMe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(Zm(n.toString()),Zm("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Je(be.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Be(D_e,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Be(D_e,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vbt extends EMe{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Iwt(this.serializer,e),s=function(r){if(!("targetChange"in r))return sn.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?sn.min():i.readTime?ip(i.readTime):sn.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=aY(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=nY(a)?{documents:Rwt(r,a)}:{query:Awt(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=uMe(r,i.resumeToken);const l=rY(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(sn.min())>0){o.readTime=m6(r,i.snapshotVersion.toTimestamp());const l=rY(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=Nwt(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=aY(this.serializer),n.removeTarget=e,this.q_(n)}}class wbt extends EMe{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return bs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bs(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kwt(e.writeResults,e.commitTime),s=ip(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=aY(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Swt(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bbt{}class Ebt extends bbt{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Je(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,iY(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Je(be.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,iY(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Je(be.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Tbt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zm(n),this.aa=!1):Be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HT="RemoteStore";class Cbt{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{BC(this)&&(Be(HT,"Restarting streams for network reachability change."),await async function(a){const l=Yt(a);l.Ea.add(4),await _M(l),l.Ra.set("Unknown"),l.Ea.delete(4),await b5(l)}(this))})}),this.Ra=new Tbt(s,r)}}async function b5(t){if(BC(t))for(const e of t.da)await e(!0)}async function _M(t){for(const e of t.da)await e(!1)}function TMe(t,e){const n=Yt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_se(n)?mse(n):R1(n).O_()&&gse(n,e))}function pse(t,e){const n=Yt(t),s=R1(n);n.Ia.delete(e),s.O_()&&CMe(n,e),n.Ia.size===0&&(s.O_()?s.L_():BC(n)&&n.Ra.set("Unknown"))}function gse(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}R1(t).Y_(e)}function CMe(t,e){t.Va.Ue(e),R1(t).Z_(e)}function mse(t){t.Va=new ywt({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),R1(t).start(),t.Ra.ua()}function _se(t){return BC(t)&&!R1(t).x_()&&t.Ia.size>0}function BC(t){return Yt(t).Ea.size===0}function IMe(t){t.Va=void 0}async function Ibt(t){t.Ra.set("Online")}async function Sbt(t){t.Ia.forEach((e,n)=>{gse(t,e)})}async function kbt(t,e){IMe(t),_se(t)?(t.Ra.ha(e),mse(t)):t.Ra.set("Unknown")}async function Rbt(t,e,n){if(t.Ra.set("Online"),e instanceof lMe&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){Be(HT,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await y6(t,s)}else if(e instanceof W4?t.Va.Ze(e):e instanceof cMe?t.Va.st(e):t.Va.tt(e),!n.isEqual(sn.min()))try{const s=await wMe(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(Ia.EMPTY_BYTE_STRING,u.snapshotVersion)),CMe(r,a);const h=new Jy(u.target,a,l,u.sequenceNumber);gse(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){Be(HT,"Failed to raise snapshot:",s),await y6(t,s)}}async function y6(t,e,n){if(!k1(e))throw e;t.Ea.add(1),await _M(t),t.Ra.set("Offline"),n||(n=()=>wMe(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Be(HT,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await b5(t)})}function SMe(t,e){return e().catch(n=>y6(t,n,e))}async function E5(t){const e=Yt(t),n=_w(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ese;for(;Abt(e);)try{const r=await ubt(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,Pbt(e,r)}catch(r){await y6(e,r)}kMe(e)&&RMe(e)}function Abt(t){return BC(t)&&t.Ta.length<10}function Pbt(t,e){t.Ta.push(e);const n=_w(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kMe(t){return BC(t)&&!_w(t).x_()&&t.Ta.length>0}function RMe(t){_w(t).start()}async function Nbt(t){_w(t).ra()}async function xbt(t){const e=_w(t);for(const n of t.Ta)e.ea(n.mutations)}async function Dbt(t,e,n){const s=t.Ta.shift(),r=ase.from(s,e,n);await SMe(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await E5(t)}async function Obt(t,e){e&&_w(t).X_&&await async function(n,s){if(function(r){return gwt(r)&&r!==be.ABORTED}(s.code)){const r=n.Ta.shift();_w(n).B_(),await SMe(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await E5(n)}}(t,e),kMe(t)&&RMe(t)}async function O_e(t,e){const n=Yt(t);n.asyncQueue.verifyOperationInProgress(),Be(HT,"RemoteStore received new credentials");const s=BC(n);n.Ea.add(3),await _M(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await b5(n)}async function Lbt(t,e){const n=Yt(t);e?(n.Ea.delete(2),await b5(n)):e||(n.Ea.add(2),await _M(n),n.Ra.set("Unknown"))}function R1(t){return t.ma||(t.ma=function(e,n,s){const r=Yt(e);return r.sa(),new vbt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Ibt.bind(null,t),t_:Sbt.bind(null,t),r_:kbt.bind(null,t),H_:Rbt.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_se(t)?mse(t):t.Ra.set("Unknown")):(await t.ma.stop(),IMe(t))})),t.ma}function _w(t){return t.fa||(t.fa=function(e,n,s){const r=Yt(e);return r.sa(),new wbt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Nbt.bind(null,t),r_:Obt.bind(null,t),ta:xbt.bind(null,t),na:Dbt.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await E5(t)):(await t.fa.stop(),t.Ta.length>0&&(Be(HT,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yse{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new _v,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new yse(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vse(t,e){if(Zm("AsyncQueue",`${e}: ${t}`),k1(t))return new Je(be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qI{static emptySet(e){return new qI(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ut.comparator(n.key,s.key):(n,s)=>ut.comparator(n.key,s.key),this.keyedMap=EA(),this.sortedSet=new Hi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qI)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qI;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L_e{constructor(){this.ga=new Hi(ut.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Et(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class ek{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ek(e,n,qI.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&g5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mbt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Fbt{constructor(){this.queries=M_e(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Yt(e),r=s.queries;s.queries=M_e(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Je(be.ABORTED,"Firestore shutting down"))}}function M_e(){return new jC(t=>QLe(t),g5)}async function AMe(t,e){const n=Yt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Mbt,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=vse(o,`Initialization of query '${G0(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&wse(n)}async function PMe(t,e){const n=Yt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Vbt(t,e){const n=Yt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&wse(n)}function Ubt(t,e,n){const s=Yt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function wse(t){t.Ca.forEach(e=>{e.next()})}var uY,F_e;(F_e=uY||(uY={})).Ma="default",F_e.Cache="cache";class NMe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ek(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ek.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uY.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xMe{constructor(e){this.key=e}}class DMe{constructor(e){this.key=e}}class qbt{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fn(),this.mutatedKeys=Fn(),this.eu=YLe(e),this.tu=new qI(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new L_e,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=m5(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==R&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:R})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new ek(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new L_e,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fn(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new DMe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new xMe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Fn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ek.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bse="SyncEngine";class jbt{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Bbt{constructor(e){this.key=e,this.hu=!1}}class $bt{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new jC(a=>QLe(a),g5),this.Iu=new Map,this.Eu=new Set,this.du=new Hi(ut.comparator),this.Au=new Map,this.Ru=new use,this.Vu={},this.mu=new Map,this.fu=ZS.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zbt(t,e,n=!0){const s=UMe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await OMe(s,e,n,!0),r}async function Hbt(t,e){const n=UMe(t);await OMe(n,e,!0,!1)}async function OMe(t,e,n,s){const r=await hbt(t.localStore,rp(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await Wbt(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&TMe(t.remoteStore,r),a}async function Wbt(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,R,P,O){let M=R.view.ru(P);M.Cs&&(M=await A_e(w.localStore,R.query,!1).then(({documents:J})=>R.view.ru(J,M)));const V=O&&O.targetChanges.get(R.targetId),q=O&&O.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(M,w.isPrimaryClient,V,q);return U_e(w,R.targetId,W.au),W.snapshot}(t,d,p,m);const i=await A_e(t.localStore,e,!0),o=new qbt(e,i.Qs),a=o.ru(i.documents),l=mM.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);U_e(t,n,u.au);const h=new jbt(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Gbt(t,e,n){const s=Yt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!g5(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await cY(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&pse(s.remoteStore,r.targetId),hY(s,r.targetId)}).catch(S1)):(hY(s,r.targetId),await cY(s.localStore,r.targetId,!0))}async function Kbt(t,e){const n=Yt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),pse(n.remoteStore,s.targetId))}async function Qbt(t,e,n){const s=nEt(t);try{const r=await function(i,o){const a=Yt(i),l=br.now(),u=o.reduce((p,m)=>p.add(m.key),Fn());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=e_(),w=Fn();return a.Ns.getEntries(p,u).next(R=>{m=R,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(R=>{h=R;const P=[];for(const O of o){const M=uwt(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new Eb(O.key,M,BLe(M.value.mapValue),Pd.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(R=>{d=R;const P=R.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,R.batchId,P)})}).then(()=>({batchId:d.batchId,changes:JLe(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new Hi(Nn)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await yM(s,r.changes),await E5(s.remoteStore)}catch(r){const i=vse(r,"Failed to persist write");n.reject(i)}}async function LMe(t,e){const n=Yt(t);try{const s=await cbt(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(bs(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?bs(o.hu,14607):r.removedDocuments.size>0&&(bs(o.hu,42227),o.hu=!1))}),await yM(n,s,e)}catch(s){await S1(s)}}function V_e(t,e,n){const s=Yt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Yt(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&wse(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Ybt(t,e,n){const s=Yt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Hi(ut.comparator);o=o.insert(i,Za.newNoDocument(i,sn.min()));const a=Fn().add(i),l=new v5(sn.min(),new Map,new Hi(Nn),o,a);await LMe(s,l),s.du=s.du.remove(i),s.Au.delete(e),Ese(s)}else await cY(s.localStore,e,!1).then(()=>hY(s,e,n)).catch(S1)}async function Xbt(t,e){const n=Yt(t),s=e.batch.batchId;try{const r=await abt(n.localStore,e);FMe(n,s,null),MMe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await yM(n,r)}catch(r){await S1(r)}}async function Jbt(t,e,n){const s=Yt(t);try{const r=await function(i,o){const a=Yt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(bs(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);FMe(s,e,n),MMe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await yM(s,r)}catch(r){await S1(r)}}function MMe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function FMe(t,e,n){const s=Yt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function hY(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||VMe(t,s)})}function VMe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pse(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ese(t))}function U_e(t,e,n){for(const s of n)s instanceof xMe?(t.Ru.addReference(s.key,e),Zbt(t,s)):s instanceof DMe?(Be(bse,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||VMe(t,s.key)):Et(19791,{wu:s})}function Zbt(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Be(bse,"New document in limbo: "+n),t.Eu.add(s),Ese(t))}function Ese(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ut(vo.fromString(e)),s=t.fu.next();t.Au.set(s,new Bbt(n)),t.du=t.du.insert(n,s),TMe(t.remoteStore,new Jy(rp(p5(n.path)),s,"TargetPurposeLimboResolution",u5.ce))}}async function yM(t,e,n){const s=Yt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=dse.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=Yt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>me.forEach(l,d=>me.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>me.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!k1(h))throw h;Be(fse,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function eEt(t,e){const n=Yt(t);if(!n.currentUser.isEqual(e)){Be(bse,"User change. New user:",e.toKey());const s=await vMe(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Je(be.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await yM(n,s.Ls)}}function tEt(t,e){const n=Yt(t),s=n.Au.get(e);if(s&&s.hu)return Fn().add(s.key);{let r=Fn();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function UMe(t){const e=Yt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LMe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tEt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ybt.bind(null,e),e.Pu.H_=Vbt.bind(null,e.eventManager),e.Pu.yu=Ubt.bind(null,e.eventManager),e}function nEt(t){const e=Yt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xbt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jbt.bind(null,e),e}class v6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=w5(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return obt(this.persistence,new sbt,e.initialUser,this.serializer)}Cu(e){return new yMe(hse.mi,this.serializer)}Du(e){return new fbt}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v6.provider={build:()=>new v6};class sEt extends v6{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bs(this.persistence.referenceDelegate instanceof _6,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Bwt(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?tu.withCacheSize(this.cacheSizeBytes):tu.DEFAULT;return new yMe(s=>_6.mi(s,n),this.serializer)}}class dY{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>V_e(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=eEt.bind(null,this.syncEngine),await Lbt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Fbt}()}createDatastore(e){const n=w5(e.databaseInfo.databaseId),s=function(r){return new ybt(r)}(e.databaseInfo);return function(r,i,o,a){return new Ebt(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new Cbt(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>V_e(this.syncEngine,n,0),function(){return x_e.v()?new x_e:new pbt}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new $bt(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Yt(e);Be(HT,"RemoteStore shutting down."),n.Ea.add(5),await _M(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dY.provider={build:()=>new dY};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qMe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zm("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yw="FirestoreClient";class rEt{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ha.UNAUTHENTICATED,this.clientId=Jne.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Be(yw,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Be(yw,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _v;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=vse(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function jW(t,e){t.asyncQueue.verifyOperationInProgress(),Be(yw,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await vMe(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function q_e(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iEt(t);Be(yw,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>O_e(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>O_e(e.remoteStore,r)),t._onlineComponents=e}async function iEt(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(yw,"Using user provided OfflineComponentProvider");try{await jW(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===be.FAILED_PRECONDITION||s.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;QS("Error using user provided cache. Falling back to memory cache: "+n),await jW(t,new v6)}}else Be(yw,"Using default OfflineComponentProvider"),await jW(t,new sEt(void 0));return t._offlineComponents}async function jMe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(yw,"Using user provided OnlineComponentProvider"),await q_e(t,t._uninitializedComponentsProvider._online)):(Be(yw,"Using default OnlineComponentProvider"),await q_e(t,new dY))),t._onlineComponents}function oEt(t){return jMe(t).then(e=>e.syncEngine)}async function fY(t){const e=await jMe(t),n=e.eventManager;return n.onListen=zbt.bind(null,e.syncEngine),n.onUnlisten=Gbt.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hbt.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Kbt.bind(null,e.syncEngine),n}function aEt(t,e,n={}){const s=new _v;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new qMe({next:d=>{u.Nu(),i.enqueueAndForget(()=>PMe(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new Je(be.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new Je(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new NMe(p5(o.path),u,{includeMetadataChanges:!0,qa:!0});return AMe(r,h)}(await fY(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BMe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const j_e=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $Me="firestore.googleapis.com",B_e=!0;class $_e{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Je(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$Me,this.ssl=B_e}else this.host=e.host,this.ssl=e.ssl??B_e;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_Me;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qwt)throw new Je(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Evt("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BMe(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Je(be.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tse{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_e({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_e(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new hvt;switch(n.type){case"firstParty":return new gvt(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Je(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=j_e.get(e);n&&(Be("ComponentProvider","Removing Datastore"),j_e.delete(e),n.terminate())}(this),Promise.resolve()}}function cEt(t,e,n,s={}){t=Ad(t,Tse);const r=tg(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&($B(`https://${a}`),zB("Firestore",!0)),i.host!==$Me&&i.host!==a&&QS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!hw(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ha.MOCK_USER;else{u=Fne(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Je(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ha(d)}t._authCredentials=new dvt(new NLe(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T5{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new T5(this.firestore,e,this._query)}}class Mi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $x(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mi(this.firestore,e,this._key)}toJSON(){return{type:Mi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(pM(n,Mi._jsonSchema))return new Mi(e,s||null,new ut(vo.fromString(n.referencePath)))}}Mi._jsonSchemaVersion="firestore/documentReference/1.0",Mi._jsonSchema={type:Li("string",Mi._jsonSchemaVersion),referencePath:Li("string")};class $x extends T5{constructor(e,n,s){super(e,n,p5(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mi(this.firestore,null,new ut(e))}withConverter(e){return new $x(this.firestore,e,this._path)}}function C5(t,e,...n){if(t=Us(t),arguments.length===1&&(e=Jne.newId()),bvt("doc","path",e),t instanceof Tse){const s=vo.fromString(e,...n);return s_e(s),new Mi(t,null,new ut(s))}{if(!(t instanceof Mi||t instanceof $x))throw new Je(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(vo.fromString(e,...n));return s_e(s),new Mi(t.firestore,t instanceof $x?t.converter:null,new ut(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z_e="AsyncQueue";class H_e{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bMe(this,"async_queue_retry"),this._c=()=>{const s=qW();s&&Be(z_e,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=qW();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qW();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _v;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!k1(e))throw e;Be(z_e,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Zm("INTERNAL UNHANDLED ERROR: ",W_e(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=yse.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&Et(47125,{Pc:W_e(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function W_e(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function G_e(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class WT extends Tse{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new H_e,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H_e(e),this._firestoreClient=void 0,await e}}}function zMe(t,e){const n=typeof t=="object"?t:GB(),s=typeof t=="string"?t:h6,r=cM(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Mne("firestore");i&&cEt(r,...i)}return r}function Cse(t){if(t._terminated)throw new Je(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||lEt(t),t._firestoreClient}function lEt(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new Dvt(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,BMe(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new rEt(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ph{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ph(Ia.fromBase64String(e))}catch(n){throw new Je(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ph(Ia.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ph._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pM(e,ph._jsonSchema))return ph.fromBase64String(e.bytes)}}ph._jsonSchemaVersion="firestore/bytes/1.0",ph._jsonSchema={type:Li("string",ph._jsonSchemaVersion),bytes:Li("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I5{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ya(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S5{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class op{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nn(this._lat,e._lat)||Nn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:op._jsonSchemaVersion}}static fromJSON(e){if(pM(e,op._jsonSchema))return new op(e.latitude,e.longitude)}}op._jsonSchemaVersion="firestore/geoPoint/1.0",op._jsonSchema={type:Li("string",op._jsonSchemaVersion),latitude:Li("number"),longitude:Li("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ap{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ap._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pM(e,ap._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ap(e.vectorValues);throw new Je(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ap._jsonSchemaVersion="firestore/vectorValue/1.0",ap._jsonSchema={type:Li("string",ap._jsonSchemaVersion),vectorValues:Li("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uEt=/^__.*__$/;class hEt{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Eb(e,this.data,this.fieldMask,n,this.fieldTransforms):new gM(e,this.data,n,this.fieldTransforms)}}class HMe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Eb(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WMe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:t})}}class Ise{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ise({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return w6(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WMe(this.Ac)&&uEt.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dEt{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||w5(e)}Cc(e,n,s,r=!1){return new Ise({Ac:e,methodName:n,Dc:s,path:ya.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function GMe(t){const e=t._freezeSettings(),n=w5(t._databaseId);return new dEt(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fEt(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);kse("Data must be an object, but it was:",o,s);const a=KMe(s,o);let l,u;if(i.merge)l=new Uu(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=pY(e,d,n);if(!o.contains(p))throw new Je(be.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);YMe(h,p)||h.push(p)}l=new Uu(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new hEt(new ou(a),l,u)}class k5 extends S5{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof k5}}class Sse extends S5{_toFieldTransform(e){return new owt(e.path,new qx)}isEqual(e){return e instanceof Sse}}function pEt(t,e,n,s){const r=t.Cc(1,e,n);kse("Data must be an object, but it was:",r,s);const i=[],o=ou.empty();bb(s,(l,u)=>{const h=Rse(e,l,n);u=Us(u);const d=r.yc(h);if(u instanceof k5)i.push(h);else{const p=R5(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Uu(i);return new HMe(o,a,r.fieldTransforms)}function gEt(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[pY(e,s,n)],l=[r];if(i.length%2!=0)throw new Je(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(pY(e,i[p])),l.push(i[p+1]);const u=[],h=ou.empty();for(let p=a.length-1;p>=0;--p)if(!YMe(u,a[p])){const m=a[p];let w=l[p];w=Us(w);const R=o.yc(m);if(w instanceof k5)u.push(m);else{const P=R5(w,R);P!=null&&(u.push(m),h.set(m,P))}}const d=new Uu(u);return new HMe(h,d,o.fieldTransforms)}function R5(t,e){if(QMe(t=Us(t)))return kse("Unsupported field value:",e,t),KMe(t,e);if(t instanceof S5)return function(n,s){if(!WMe(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=R5(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Us(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return swt(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=br.fromDate(n);return{timestampValue:m6(s.serializer,r)}}if(n instanceof br){const r=new br(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:m6(s.serializer,r)}}if(n instanceof op)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ph)return{bytesValue:uMe(s.serializer,n._byteString)};if(n instanceof Mi){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:lse(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ap)return function(r,i){return{mapValue:{fields:{[qLe]:{stringValue:jLe},[d6]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return ise(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Zne(n)}`)}(t,e)}function KMe(t,e){const n={};return OLe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bb(t,(s,r)=>{const i=R5(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function QMe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof br||t instanceof op||t instanceof ph||t instanceof Mi||t instanceof S5||t instanceof ap)}function kse(t,e,n){if(!QMe(n)||!xLe(n)){const s=Zne(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function pY(t,e,n){if((e=Us(e))instanceof I5)return e._internalPath;if(typeof e=="string")return Rse(t,e);throw w6("Field path arguments must be of type string or ",t,!1,void 0,n)}const mEt=new RegExp("[~\\*/\\[\\]]");function Rse(t,e,n){if(e.search(mEt)>=0)throw w6(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new I5(...e.split("."))._internalPath}catch{throw w6(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function w6(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Je(be.INVALID_ARGUMENT,a+t+l)}function YMe(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XMe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _Et(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JMe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _Et extends XMe{data(){return super.data()}}function JMe(t,e){return typeof e=="string"?Rse(t,e):e instanceof I5?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yEt(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Je(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vEt{convertValue(e,n="none"){switch(mw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return bb(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[d6].arrayValue?.values?.map(s=>Ci(s.doubleValue));return new ap(n)}convertGeoPoint(e){return new op(Ci(e.latitude),Ci(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=d5(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Fx(e));default:return null}}convertTimestamp(e){const n=pw(e);return new br(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=vo.fromString(e);bs(mMe(s),9688,{name:e});const r=new Vx(s.get(1),s.get(3)),i=new ut(s.popFirst(5));return r.isEqual(n)||Zm(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wEt(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class CA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lT extends XMe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new G4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(JMe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lT._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}lT._jsonSchemaVersion="firestore/documentSnapshot/1.0",lT._jsonSchema={type:Li("string",lT._jsonSchemaVersion),bundleSource:Li("string","DocumentSnapshot"),bundleName:Li("string"),bundle:Li("string")};class G4 extends lT{data(e={}){return super.data(e)}}class jI{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new CA(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new G4(this._firestore,this._userDataWriter,s.key,s,new CA(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new G4(s._firestore,s._userDataWriter,o.doc.key,o.doc,new CA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new G4(s._firestore,s._userDataWriter,o.doc.key,o.doc,new CA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:bEt(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jI._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jne.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bEt(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zx(t){t=Ad(t,Mi);const e=Ad(t.firestore,WT);return aEt(Cse(e),t._key).then(n=>e2e(e,t,n))}jI._jsonSchemaVersion="firestore/querySnapshot/1.0",jI._jsonSchema={type:Li("string",jI._jsonSchemaVersion),bundleSource:Li("string","QuerySnapshot"),bundleName:Li("string"),bundle:Li("string")};class ZMe extends vEt{constructor(e){super(),this.firestore=e}convertBytes(e){return new ph(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mi(this.firestore,null,n)}}function Hx(t,e,n){t=Ad(t,Mi);const s=Ad(t.firestore,WT),r=wEt(t.converter,e,n);return xse(s,[fEt(GMe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Pd.none())])}function Ase(t,e,n,...s){t=Ad(t,Mi);const r=Ad(t.firestore,WT),i=GMe(r);let o;return o=typeof(e=Us(e))=="string"||e instanceof I5?gEt(i,"updateDoc",t._key,e,n,s):pEt(i,"updateDoc",t._key,e),xse(r,[o.toMutation(t._key,Pd.exists(!0))])}function Pse(t){return xse(Ad(t.firestore,WT),[new ose(t._key,Pd.none())])}function Nse(t,...e){t=Us(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||G_e(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(G_e(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof Mi)o=Ad(t.firestore,WT),a=p5(t._key.path),i={next:l=>{e[s]&&e[s](e2e(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Ad(t,T5);o=Ad(l.firestore,WT),a=l._query;const u=new ZMe(o);i={next:h=>{e[s]&&e[s](new jI(o,u,l,h))},error:e[s+1],complete:e[s+2]},yEt(t._query)}return function(l,u,h,d){const p=new qMe(d),m=new NMe(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>AMe(await fY(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>PMe(await fY(l),m))}}(Cse(o),a,r,i)}function xse(t,e){return function(n,s){const r=new _v;return n.asyncQueue.enqueueAndForget(async()=>Qbt(await oEt(n),s,r)),r.promise}(Cse(t),e)}function e2e(t,e,n){const s=n.docs.get(e._key),r=new ZMe(t);return new lT(t,r,e._key,s,new CA(n.hasPendingWrites,n.fromCache),e.converter)}function BI(){return new Sse("serverTimestamp")}(function(t,e=!0){(function(n){I1=n})(wb),dw(new Ym("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new WT(new fvt(n.getProvider("auth-internal")),new mvt(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Je(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vx(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),bh(Zme,e_e,t),bh(Zme,e_e,"esm2020")})();var EEt="firebase",TEt="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/bh(EEt,TEt,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const t2e="firebasestorage.googleapis.com",n2e="storageBucket",CEt=120*1e3,IEt=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Yi=class s2e extends ng{constructor(e,n,s=0){super(BW(e),`Firebase Storage: ${n} (${BW(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,s2e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return BW(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var fi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(fi||(fi={}));function BW(t){return"storage/"+t}function Dse(){const t="An unknown error occurred, please check the error payload for server response.";return new Yi(fi.UNKNOWN,t)}function SEt(t){return new Yi(fi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function kEt(t){return new Yi(fi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function REt(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yi(fi.UNAUTHENTICATED,t)}function AEt(){return new Yi(fi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function PEt(t){return new Yi(fi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function NEt(){return new Yi(fi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xEt(){return new Yi(fi.CANCELED,"User canceled the upload/download.")}function DEt(t){return new Yi(fi.INVALID_URL,"Invalid URL '"+t+"'.")}function OEt(t){return new Yi(fi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LEt(){return new Yi(fi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+n2e+"' property when initializing the app?")}function MEt(){return new Yi(fi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FEt(){return new Yi(fi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VEt(t){return new Yi(fi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gY(t){return new Yi(fi.INVALID_ARGUMENT,t)}function r2e(){return new Yi(fi.APP_DELETED,"The Firebase app was deleted.")}function UEt(t){return new Yi(fi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function AP(t,e){return new Yi(fi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function AR(t){throw new Yi(fi.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jc{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Jc.makeFromUrl(e,n)}catch{return new Jc(e,"")}if(s.path==="")return s;throw OEt(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},R=n===t2e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${R}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],W=q.regex.exec(e);if(W){const J=W[q.indices.bucket];let I=W[q.indices.path];I||(I=""),s=new Jc(J,I),q.postModify(s);break}}if(s==null)throw DEt(e);return s}}class qEt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jEt(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(u){p();return}if(P){p(),h.call(null,P,...O);return}if(l()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function R(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function BEt(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Et(t){return t!==void 0}function zEt(t){return typeof t=="object"&&!Array.isArray(t)}function Ose(t){return typeof t=="string"||t instanceof String}function K_e(t){return Lse()&&t instanceof Blob}function Lse(){return typeof Blob<"u"}function mY(t,e,n,s){if(s<e)throw gY(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw gY(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vM(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function i2e(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var uT;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uT||(uT={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HEt(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WEt{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,R)=>{this.resolve_=w,this.reject_=R,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new pF(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===uT.NO_ERROR,l=i.getStatus();if(!a||HEt(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===uT.ABORT;s(!1,new pF(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new pF(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());$Et(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Dse();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?r2e():xEt();o(l)}else{const l=NEt();o(l)}};this.canceled_?n(!1,new pF(!1,null,!0)):this.backoffId_=jEt(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BEt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pF{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function GEt(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KEt(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QEt(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YEt(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function XEt(t,e,n,s,r,i,o=!0,a=!1){const l=i2e(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return QEt(h,e),GEt(h,n),KEt(h,i),YEt(h,s),new WEt(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JEt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZEt(...t){const e=JEt();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Lse())return new Blob(t);throw new Yi(fi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eTt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tTt(t){if(typeof atob>"u")throw VEt("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const id={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $W{constructor(e,n){this.data=e,this.contentType=n||null}}function o2e(t,e){switch(t){case id.RAW:return new $W(a2e(e));case id.BASE64:case id.BASE64URL:return new $W(c2e(t,e));case id.DATA_URL:return new $W(sTt(e),rTt(e))}throw Dse()}function a2e(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function nTt(t){let e;try{e=decodeURIComponent(t)}catch{throw AP(id.DATA_URL,"Malformed data URL.")}return a2e(e)}function c2e(t,e){switch(t){case id.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw AP(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case id.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw AP(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tTt(e)}catch(r){throw r.message.includes("polyfill")?r:AP(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class l2e{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw AP(id.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=iTt(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function sTt(t){const e=new l2e(t);return e.base64?c2e(id.BASE64,e.rest):nTt(e.rest)}function rTt(t){return new l2e(t).contentType}function iTt(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zy{constructor(e,n){let s=0,r="";K_e(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(K_e(this.data_)){const s=this.data_,r=eTt(s,e,n);return r===null?null:new zy(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new zy(s,!0)}}static getBlob(...e){if(Lse()){const n=e.map(s=>s instanceof zy?s.data_:s);return new zy(ZEt.apply(null,n))}else{const n=e.map(o=>Ose(o)?o2e(id.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new zy(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mse(t){let e;try{e=JSON.parse(t)}catch{return null}return zEt(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oTt(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aTt(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function u2e(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cTt(t,e){return e}class Cc{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||cTt}}let gF=null;function lTt(t){return!Ose(t)||t.length<2?t:u2e(t)}function h2e(){if(gF)return gF;const t=[];t.push(new Cc("bucket")),t.push(new Cc("generation")),t.push(new Cc("metageneration")),t.push(new Cc("name","fullPath",!0));function e(i,o){return lTt(o)}const n=new Cc("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new Cc("size");return r.xform=s,t.push(r),t.push(new Cc("timeCreated")),t.push(new Cc("updated")),t.push(new Cc("md5Hash",null,!0)),t.push(new Cc("cacheControl",null,!0)),t.push(new Cc("contentDisposition",null,!0)),t.push(new Cc("contentEncoding",null,!0)),t.push(new Cc("contentLanguage",null,!0)),t.push(new Cc("contentType",null,!0)),t.push(new Cc("metadata","customMetadata",!0)),gF=t,gF}function uTt(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Jc(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function hTt(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return uTt(s,t),s}function d2e(t,e,n){const s=Mse(e);return s===null?null:hTt(t,s,n)}function dTt(t,e,n,s){const r=Mse(e);if(r===null||!Ose(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=vM(h,n,s),p=i2e({alt:"media",token:a});return d+p})[0]}function fTt(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q_e="prefixes",Y_e="items";function pTt(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Q_e])for(const r of n[Q_e]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Jc(e,i));s.prefixes.push(o)}if(n[Y_e])for(const r of n[Y_e]){const i=t._makeStorageReference(new Jc(e,r.name));s.items.push(i)}return s}function gTt(t,e,n){const s=Mse(n);return s===null?null:pTt(t,e,s)}class A5{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fse(t){if(!t)throw Dse()}function mTt(t,e){function n(s,r){const i=d2e(t,r,e);return Fse(i!==null),i}return n}function _Tt(t,e){function n(s,r){const i=gTt(t,e,r);return Fse(i!==null),i}return n}function yTt(t,e){function n(s,r){const i=d2e(t,r,e);return Fse(i!==null),dTt(i,r,t.host,t._protocol)}return n}function Vse(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=AEt():r=REt():n.getStatus()===402?r=kEt(t.bucket):n.getStatus()===403?r=PEt(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function f2e(t){const e=Vse(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=SEt(t.path)),i.serverResponse=r.serverResponse,i}return n}function vTt(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=vM(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new A5(a,l,_Tt(t,e.bucket),u);return h.urlParams=i,h.errorHandler=Vse(e),h}function wTt(t,e,n){const s=e.fullServerUrl(),r=vM(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new A5(r,i,yTt(t,n),o);return a.errorHandler=f2e(e),a}function bTt(t,e){const n=e.fullServerUrl(),s=vM(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new A5(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=f2e(e),a}function ETt(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TTt(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=ETt(null,e)),s}function CTt(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=TTt(e,s,r),h=fTt(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=zy.getBlob(d,s,p);if(m===null)throw MEt();const w={name:u.fullPath},R=vM(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new A5(R,P,mTt(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=Vse(e),M}class ITt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uT.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uT.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uT.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw AR("cannot .send() more than once");if(tg(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw AR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw AR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw AR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw AR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class STt extends ITt{initXhr(){this.xhr_.responseType="text"}}function P5(){return new STt}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GT{constructor(e,n){this._service=e,n instanceof Jc?this._location=n:this._location=Jc.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new GT(e,n)}get root(){const e=new Jc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u2e(this._location.path)}get storage(){return this._service}get parent(){const e=oTt(this._location.path);if(e===null)return null;const n=new Jc(this._location.bucket,e);return new GT(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UEt(e)}}function kTt(t,e,n){t._throwIfRoot("uploadBytes");const s=CTt(t.storage,t._location,h2e(),new zy(e,!0),n);return t.storage.makeRequestWithTokens(s,P5).then(r=>({metadata:r,ref:t}))}function RTt(t,e,n=id.RAW,s){t._throwIfRoot("uploadString");const r=o2e(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),kTt(t,r.data,i)}function ATt(t){const e={prefixes:[],items:[]};return p2e(t,e).then(()=>e)}async function p2e(t,e,n){const s=await PTt(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await p2e(t,e,s.nextPageToken)}function PTt(t,e){e!=null&&typeof e.maxResults=="number"&&mY("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=vTt(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,P5)}function NTt(t){t._throwIfRoot("getDownloadURL");const e=wTt(t.storage,t._location,h2e());return t.storage.makeRequestWithTokens(e,P5).then(n=>{if(n===null)throw FEt();return n})}function xTt(t){t._throwIfRoot("deleteObject");const e=bTt(t.storage,t._location);return t.storage.makeRequestWithTokens(e,P5)}function DTt(t,e){const n=aTt(t._location.path,e),s=new Jc(t._location.bucket,n);return new GT(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OTt(t){return/^[A-Za-z]+:\/\//.test(t)}function LTt(t,e){return new GT(t,e)}function g2e(t,e){if(t instanceof Use){const n=t;if(n._bucket==null)throw LEt();const s=new GT(n,n._bucket);return e!=null?g2e(s,e):s}else return e!==void 0?DTt(t,e):t}function MTt(t,e){if(e&&OTt(e)){if(t instanceof Use)return LTt(t,e);throw gY("To use ref(service, url), the first argument must be a Storage instance.")}else return g2e(t,e)}function X_e(t,e){const n=e?.[n2e];return n==null?null:Jc.makeFromBucketSpec(n,t)}function FTt(t,e,n,s={}){t.host=`${e}:${n}`;const r=tg(e);r&&($B(`https://${t.host}/b`),zB("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:Fne(i,t.app.options.projectId))}class Use{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=t2e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CEt,this._maxUploadRetryTime=IEt,this._requests=new Set,r!=null?this._bucket=Jc.makeFromBucketSpec(r,this._host):this._bucket=X_e(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jc.makeFromBucketSpec(this._url,e):this._bucket=X_e(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mY("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mY("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new GT(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new qEt(r2e());{const o=XEt(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const J_e="@firebase/storage",Z_e="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const m2e="storage";function qse(t,e,n,s){return t=Us(t),RTt(t,e,n,s)}function jse(t){return t=Us(t),ATt(t)}function Bse(t){return t=Us(t),NTt(t)}function $se(t){return t=Us(t),xTt(t)}function zse(t,e){return t=Us(t),MTt(t,e)}function VTt(t=GB(),e){t=Us(t);const n=cM(t,m2e).getImmediate({identifier:e}),s=Mne("storage");return s&&UTt(n,...s),n}function UTt(t,e,n,s={}){FTt(t,e,n,s)}function qTt(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Use(n,s,r,e,wb)}function jTt(){dw(new Ym(m2e,qTt,"PUBLIC").setMultipleInstances(!0)),bh(J_e,Z_e,""),bh(J_e,Z_e,"esm2020")}jTt();var eye={};const tye="@firebase/database",nye="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let _2e="";function BTt(t){_2e=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Tt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),To(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:xx(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zTt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return F_(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const y2e=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $Tt(e)}}catch{}return new zTt},DE=y2e("localStorage"),HTt=y2e("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $I=new WB("@firebase/database"),WTt=function(){let t=1;return function(){return t++}}(),v2e=function(t){const e=gmt(t),n=new hmt;n.update(e);const s=n.digest();return Lne.encodeByteArray(s)},wM=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=wM.apply(null,s):typeof s=="object"?e+=To(s):e+=s,e+=" "}return e};let PP=null,sye=!0;const GTt=function(t,e){Pe(!0,"Can't turn on custom loggers persistently."),$I.logLevel=wn.VERBOSE,PP=$I.log.bind($I)},ec=function(...t){if(sye===!0&&(sye=!1,PP===null&&HTt.get("logging_enabled")===!0&&GTt()),PP){const e=wM.apply(null,t);PP(e)}},bM=function(t){return function(...e){ec(t,...e)}},_Y=function(...t){const e="FIREBASE INTERNAL ERROR: "+wM(...t);$I.error(e)},t_=function(...t){const e=`FIREBASE FATAL ERROR: ${wM(...t)}`;throw $I.error(e),new Error(e)},mu=function(...t){const e="FIREBASE WARNING: "+wM(...t);$I.warn(e)},KTt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&mu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},w2e=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QTt=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},tk="[MIN_NAME]",KT="[MAX_NAME]",A1=function(t,e){if(t===e)return 0;if(t===tk||e===KT)return-1;if(e===tk||t===KT)return 1;{const n=rye(t),s=rye(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},YTt=function(t,e){return t===e?0:t<e?-1:1},PR=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+To(e))},Hse=function(t){if(typeof t!="object"||t===null)return To(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=To(e[s]),n+=":",n+=Hse(t[e[s]]);return n+="}",n},b2e=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Eu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const E2e=function(t){Pe(!w2e(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},XTt=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JTt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ZTt(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const eCt=new RegExp("^-?(0*)\\d{1,10}$"),tCt=-2147483648,nCt=2147483647,rye=function(t){if(eCt.test(t)){const e=Number(t);if(e>=tCt&&e<=nCt)return e}return null},P1=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw mu("Exception was thrown by user callback.",n),e},Math.floor(0))}},sCt=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},NP=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rCt{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Nu(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){mu(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iCt{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ec("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mu(e)}}class K4{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}K4.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Wse="5",T2e="v",C2e="s",I2e="r",S2e="f",k2e=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R2e="ls",A2e="p",yY="ac",P2e="websocket",N2e="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class x2e{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=DE.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&DE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function oCt(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function D2e(t,e,n){Pe(typeof e=="string","typeof type must == string"),Pe(typeof n=="object","typeof params must == object");let s;if(e===P2e)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===N2e)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oCt(t)&&(n.ns=t.namespace);const r=[];return Eu(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aCt{constructor(){this.counters_={}}incrementCounter(e,n=1){F_(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return zgt(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zW={},HW={};function Gse(t){const e=t.toString();return zW[e]||(zW[e]=new aCt),zW[e]}function cCt(t,e){const n=t.toString();return HW[n]||(HW[n]=e()),HW[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lCt{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&P1(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iye="start",uCt="close",hCt="pLPCommand",dCt="pRTLPCB",O2e="id",L2e="pw",M2e="ser",fCt="cb",pCt="seg",gCt="ts",mCt="d",_Ct="dframe",F2e=1870,V2e=30,yCt=F2e-V2e,vCt=25e3,wCt=3e4;class yI{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bM(e),this.stats_=Gse(n),this.urlFn=l=>(this.appCheckToken&&(l[yY]=this.appCheckToken),D2e(n,N2e,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lCt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wCt)),QTt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kse((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iye)this.id=a,this.password=l;else if(o===uCt)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[iye]="t",s[M2e]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[fCt]=this.scriptTagHolder.uniqueCallbackIdentifier),s[T2e]=Wse,this.transportSessionId&&(s[C2e]=this.transportSessionId),this.lastSessionId&&(s[R2e]=this.lastSessionId),this.applicationId&&(s[A2e]=this.applicationId),this.appCheckToken&&(s[yY]=this.appCheckToken),typeof location<"u"&&location.hostname&&k2e.test(location.hostname)&&(s[I2e]=S2e);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yI.forceAllow_=!0}static forceDisallow(){yI.forceDisallow_=!0}static isAvailable(){return yI.forceAllow_?!0:!yI.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XTt()&&!JTt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=To(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=VOe(n),r=b2e(s,yCt);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[_Ct]="t",s[O2e]=e,s[L2e]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=To(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Kse{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=WTt(),window[hCt+this.uniqueCallbackIdentifier]=e,window[dCt+this.uniqueCallbackIdentifier]=n,this.myIFrame=Kse.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ec("frame writing exception"),a.stack&&ec(a.stack),ec(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ec("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[O2e]=this.myID,e[L2e]=this.myPW,e[M2e]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+V2e+s.length<=F2e;){const i=this.pendingSegs.shift();s=s+"&"+pCt+r+"="+i.seg+"&"+gCt+r+"="+i.ts+"&"+mCt+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(vCt)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{ec("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bCt=16384,ECt=45e3;let b6=null;typeof MozWebSocket<"u"?b6=MozWebSocket:typeof WebSocket<"u"&&(b6=WebSocket);class Qh{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bM(this.connId),this.stats_=Gse(n),this.connURL=Qh.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[T2e]=Wse,typeof location<"u"&&location.hostname&&k2e.test(location.hostname)&&(o[I2e]=S2e),n&&(o[C2e]=n),s&&(o[R2e]=s),r&&(o[yY]=r),i&&(o[A2e]=i),D2e(e,P2e,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,DE.set("previous_websocket_failure",!0);try{let s;nmt(),this.mySock=new b6(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Qh.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&b6!==null&&!Qh.forceDisallow_}static previouslyFailed(){return DE.isInMemoryStorage||DE.get("previous_websocket_failure")===!0}markConnectionHealthy(){DE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=xx(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Pe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=To(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=b2e(n,bCt);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ECt))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qh.responsesRequiredToBeHealthy=2;Qh.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wx{static get ALL_TRANSPORTS(){return[yI,Qh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Qh&&Qh.isAvailable();let s=n&&!Qh.previouslyFailed();if(e.webSocketOnly&&(n||mu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qh];else{const r=this.transports_=[];for(const i of Wx.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);Wx.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wx.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const TCt=6e4,CCt=5e3,ICt=10*1024,SCt=100*1024,WW="t",oye="d",kCt="s",aye="r",RCt="e",cye="o",lye="a",uye="n",hye="p",ACt="h";class PCt{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bM("c:"+this.id+":"),this.transportManager_=new Wx(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=NP(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SCt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>ICt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(WW in e){const n=e[WW];n===lye?this.upgradeIfSecondaryHealthy_():n===aye?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cye&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=PR("t",e),s=PR("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hye,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lye,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uye,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=PR("t",e),s=PR("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=PR(WW,e);if(oye in e){const s=e[oye];if(n===ACt){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===uye){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kCt?this.onConnectionShutdown_(s):n===aye?this.onReset_(s):n===RCt?_Y("Server Error: "+s):n===cye?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_Y("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Wse!==s&&mu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),NP(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TCt))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):NP(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CCt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hye,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(DE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U2e{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class q2e{constructor(e){this.allowedEvents_=e,this.listeners_={},Pe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Pe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E6 extends q2e{static getInstance(){return new E6}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vne()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Pe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dye=32,fye=768;let Qs=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function os(){return new Qs("")}function fn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vw(t){return t.pieces_.length-t.pieceNum_}function or(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Qs(t.pieces_,e)}function j2e(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function NCt(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function B2e(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $2e(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Qs(e,0)}function Io(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Qs)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Qs(n,0)}function In(t){return t.pieceNum_>=t.pieces_.length}function Zc(t,e){const n=fn(t),s=fn(e);if(n===null)return e;if(n===s)return Zc(or(t),or(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Qse(t,e){if(vw(t)!==vw(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function od(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(vw(t)>vw(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class xCt{constructor(e,n){this.errorPrefix_=n,this.parts_=B2e(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=HB(this.parts_[s]);z2e(this)}}function DCt(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=HB(e),z2e(t)}function OCt(t){const e=t.parts_.pop();t.byteLength_-=HB(e),t.parts_.length>0&&(t.byteLength_-=1)}function z2e(t){if(t.byteLength_>fye)throw new Error(t.errorPrefix_+"has a key path longer than "+fye+" bytes ("+t.byteLength_+").");if(t.parts_.length>dye)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dye+") or object contains a cycle "+lE(t))}function lE(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yse extends q2e{static getInstance(){return new Yse}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Pe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NR=1e3,LCt=300*1e3,pye=30*1e3,MCt=1.3,FCt=3e4,VCt="server_kill",gye=3;class Dm extends U2e{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Dm.nextPersistentConnectionId_++,this.log_=bM("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=NR,this.maxReconnectDelay_=LCt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Yse.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&E6.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(To(i)),Pe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new BB,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Pe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Dm.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&F_(e,"w")){const s=GS(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();mu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||umt(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pye)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=lmt(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Pe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+To(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):_Y("Unrecognized action received from server: "+To(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Pe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=NR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=NR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FCt&&(this.reconnectDelay_=NR),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*MCt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Dm.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){Pe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?ec("getToken() completed but was canceled"):(ec("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new PCt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{mu(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(VCt)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&mu(d),l())}}}interrupt(e){ec("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ec("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jQ(this.interruptReasons_)&&(this.reconnectDelay_=NR,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>Hse(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Qs(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){ec("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gye&&(this.reconnectDelay_=pye,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ec("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gye&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+_2e.replace(/\./g,"-")]=1,Vne()?e["framework.cordova"]=1:$Oe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=E6.getInstance().currentlyOnline();return jQ(this.interruptReasons_)&&e}}Dm.nextPersistentConnectionId_=0;Dm.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Vn=class H2e{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new H2e(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N5{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Vn(tk,e),r=new Vn(tk,n);return this.compare(s,r)!==0}minPost(){return Vn.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let mF;class W2e extends N5{static get __EMPTY_NODE(){return mF}static set __EMPTY_NODE(e){mF=e}compare(e,n){return A1(e.name,n.name)}isDefinedOn(e){throw E1("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Vn.MIN}maxPost(){return new Vn(KT,mF)}makePost(e,n){return Pe(typeof e=="string","KeyIndex indexValue must always be a string."),new Vn(e,mF)}toString(){return".key"}}const zI=new W2e;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _F{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ta{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ta.RED,this.left=r??uu.EMPTY_NODE,this.right=i??uu.EMPTY_NODE}copy(e,n,s,r,i){return new ta(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return uu.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return uu.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ta.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ta.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ta.RED=!0;ta.BLACK=!1;class UCt{copy(e,n,s,r,i){return this}insert(e,n,s){return new ta(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class uu{constructor(e,n=uu.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new uu(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ta.BLACK,null,null))}remove(e){return new uu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ta.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _F(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new _F(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new _F(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new _F(this.root_,null,this.comparator_,!0,e)}}uu.EMPTY_NODE=new UCt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qCt(t,e){return A1(t.name,e.name)}function Xse(t,e){return A1(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let vY;function jCt(t){vY=t}const G2e=function(t){return typeof t=="number"?"number:"+E2e(t):"string:"+t},K2e=function(t){if(t.isLeafNode()){const e=t.val();Pe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&F_(e,".sv"),"Priority must be a string or number.")}else Pe(t===vY||t.isEmpty(),"priority of unexpected type.");Pe(t===vY||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let mye;class Wo{static set __childrenNodeConstructor(e){mye=e}static get __childrenNodeConstructor(){return mye}constructor(e,n=Wo.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Pe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),K2e(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Wo(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Wo.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return In(e)?this:fn(e)===".priority"?this.priorityNode_:Wo.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Wo.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=fn(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Pe(s!==".priority"||vw(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Wo.__childrenNodeConstructor.EMPTY_NODE.updateChild(or(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+G2e(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=E2e(this.value_):e+=this.value_,this.lazyHash_=v2e(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Wo.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Wo.__childrenNodeConstructor?-1:(Pe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Wo.VALUE_TYPE_ORDER.indexOf(n),i=Wo.VALUE_TYPE_ORDER.indexOf(s);return Pe(r>=0,"Unknown leaf type: "+n),Pe(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Wo.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Q2e,Y2e;function BCt(t){Q2e=t}function $Ct(t){Y2e=t}class zCt extends N5{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?A1(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Vn.MIN}maxPost(){return new Vn(KT,new Wo("[PRIORITY-POST]",Y2e))}makePost(e,n){const s=Q2e(e);return new Vn(n,new Wo("[PRIORITY-POST]",s))}toString(){return".priority"}}const oi=new zCt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HCt=Math.log(2);class WCt{constructor(e){const n=i=>parseInt(Math.log(i)/HCt,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const T6=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new ta(p,d.node,ta.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),R=r(m+1,u);return d=t[m],p=n?n(d):d,new ta(p,d.node,ta.BLACK,w,R)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,R){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new ta(q,V.node,R,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?p(P,ta.BLACK):(p(P,ta.BLACK),p(P,ta.RED))}return h},o=new WCt(t.length),a=i(o);return new uu(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let GW;const f0={};class wm{static get Default(){return Pe(f0&&oi,"ChildrenNode.ts has not been loaded"),GW=GW||new wm({".priority":f0},{".priority":oi}),GW}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=GS(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof uu?n:null}hasIndex(e){return F_(this.indexSet_,e.toString())}addIndex(e,n){Pe(e!==zI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Vn.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=T6(s,e.getCompare()):a=f0;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new wm(h,u)}addToIndexes(e,n){const s=n6(this.indexes_,(r,i)=>{const o=GS(this.indexSet_,i);if(Pe(o,"Missing index implementation for "+i),r===f0)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Vn.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),T6(a,o.getCompare())}else return f0;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Vn(e.name,a))),l.insert(e,e.node)}});return new wm(s,this.indexSet_)}removeFromIndexes(e,n){const s=n6(this.indexes_,r=>{if(r===f0)return r;{const i=n.get(e.name);return i?r.remove(new Vn(e.name,i)):r}});return new wm(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let xR;class vt{static get EMPTY_NODE(){return xR||(xR=new vt(new uu(Xse),null,wm.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&K2e(this.priorityNode_),this.children_.isEmpty()&&Pe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xR}updatePriority(e){return this.children_.isEmpty()?this:new vt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?xR:n}}getChild(e){const n=fn(e);return n===null?this:this.getImmediateChild(n).getChild(or(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Pe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Vn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?xR:this.priorityNode_;return new vt(r,o,i)}}updateChild(e,n){const s=fn(e);if(s===null)return n;{Pe(fn(e)!==".priority"||vw(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(or(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(oi,(o,a)=>{n[o]=a.val(e),s++,i&&vt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+G2e(this.getPriority().val())+":"),this.forEachChild(oi,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":v2e(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Vn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Vn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Vn(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Vn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Vn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===EM?-1:0}withIndex(e){if(e===zI||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new vt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===zI||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(oi),r=n.getIterator(oi);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===zI?null:this.indexMap_.get(e.toString())}}vt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class GCt extends vt{constructor(){super(new uu(Xse),vt.EMPTY_NODE,wm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vt.EMPTY_NODE}isEmpty(){return!1}}const EM=new GCt;Object.defineProperties(Vn,{MIN:{value:new Vn(tk,vt.EMPTY_NODE)},MAX:{value:new Vn(KT,EM)}});W2e.__EMPTY_NODE=vt.EMPTY_NODE;Wo.__childrenNodeConstructor=vt;jCt(EM);$Ct(EM);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KCt=!0;function oa(t,e=null){if(t===null)return vt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Pe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Wo(n,oa(e))}if(!(t instanceof Array)&&KCt){const n=[];let s=!1;if(Eu(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=oa(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new Vn(i,a)))}}),n.length===0)return vt.EMPTY_NODE;const r=T6(n,qCt,i=>i.name,Xse);if(s){const i=T6(n,oi.getCompare());return new vt(r,oa(e),new wm({".priority":i},{".priority":oi}))}else return new vt(r,oa(e),wm.Default)}else{let n=vt.EMPTY_NODE;return Eu(t,(s,r)=>{if(F_(t,s)&&s.substring(0,1)!=="."){const i=oa(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(oa(e))}}BCt(oa);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QCt extends N5{constructor(e){super(),this.indexPath_=e,Pe(!In(e)&&fn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?A1(e.name,n.name):i}makePost(e,n){const s=oa(e),r=vt.EMPTY_NODE.updateChild(this.indexPath_,s);return new Vn(n,r)}maxPost(){const e=vt.EMPTY_NODE.updateChild(this.indexPath_,EM);return new Vn(KT,e)}toString(){return B2e(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YCt extends N5{compare(e,n){const s=e.node.compareTo(n.node);return s===0?A1(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Vn.MIN}maxPost(){return Vn.MAX}makePost(e,n){const s=oa(e);return new Vn(n,s)}toString(){return".value"}}const XCt=new YCt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function X2e(t){return{type:"value",snapshotNode:t}}function nk(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Gx(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Kx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function JCt(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jse{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Pe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(Gx(n,a)):Pe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(nk(n,s)):o.trackChildChange(Kx(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(oi,(r,i)=>{n.hasChild(r)||s.trackChildChange(Gx(r,i))}),n.isLeafNode()||n.forEachChild(oi,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(Kx(r,i,o))}else s.trackChildChange(nk(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?vt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qx{constructor(e){this.indexedFilter_=new Jse(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Qx.getStartPost_(e),this.endPost_=Qx.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Vn(n,s))||(s=vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=vt.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(vt.EMPTY_NODE);const i=this;return n.forEachChild(oi,(o,a)=>{i.matches(new Vn(o,a))||(r=r.updateImmediateChild(o,vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZCt{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Qx(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Vn(n,s))||(s=vt.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=vt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=vt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(vt.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Pe(a.numChildren()===this.limit_,"");const l=new Vn(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(Kx(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(Gx(n,d));const w=a.updateImmediateChild(n,vt.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(nk(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(Gx(u.name,u.node)),i.trackChildChange(nk(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,vt.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zse{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oi}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Pe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Pe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tk}hasEnd(){return this.endSet_}getIndexEndValue(){return Pe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Pe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:KT}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Pe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oi}copy(){const e=new Zse;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function e0t(t){return t.loadsAllData()?new Jse(t.getIndex()):t.hasLimit()?new ZCt(t):new Qx(t)}function _ye(t){const e={};if(t.isDefault())return e;let n;if(t.index_===oi?n="$priority":t.index_===XCt?n="$value":t.index_===zI?n="$key":(Pe(t.index_ instanceof QCt,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=To(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=To(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+To(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=To(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+To(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yye(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==oi&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C6 extends U2e{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Pe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=bM("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=C6.getListenId_(e,s),a={};this.listens_[o]=a;const l=_ye(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),GS(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=C6.getListenId_(e,n);delete this.listens_[s]}get(e){const n=_ye(e._queryParams),s=e._path.toString(),r=new BB;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+T1(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=xx(a.responseText)}catch{mu("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&mu("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t0t{constructor(){this.rootNode_=vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function I6(){return{value:null,children:new Map}}function J2e(t,e,n){if(In(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=fn(e);t.children.has(s)||t.children.set(s,I6());const r=t.children.get(s);e=or(e),J2e(r,e,n)}}function wY(t,e,n){t.value!==null?n(e,t.value):n0t(t,(s,r)=>{const i=new Qs(e.toString()+"/"+s);wY(r,i,n)})}function n0t(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class s0t{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Eu(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vye=10*1e3,r0t=30*1e3,i0t=300*1e3;class o0t{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new s0t(e);const s=vye+(r0t-vye)*Math.random();NP(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Eu(e,(r,i)=>{i>0&&F_(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),NP(this.reportStats_.bind(this),Math.floor(Math.random()*2*i0t))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ad;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ad||(ad={}));function Z2e(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ere(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tre(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S6{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=ad.ACK_USER_WRITE,this.source=Z2e()}operationForChild(e){if(In(this.path)){if(this.affectedTree.value!=null)return Pe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Qs(e));return new S6(os(),n,this.revert)}}else return Pe(fn(this.path)===e,"operationForChild called for unrelated child."),new S6(or(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yx{constructor(e,n){this.source=e,this.path=n,this.type=ad.LISTEN_COMPLETE}operationForChild(e){return In(this.path)?new Yx(this.source,os()):new Yx(this.source,or(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QT{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=ad.OVERWRITE}operationForChild(e){return In(this.path)?new QT(this.source,os(),this.snap.getImmediateChild(e)):new QT(this.source,or(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xx{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=ad.MERGE}operationForChild(e){if(In(this.path)){const n=this.children.subtree(new Qs(e));return n.isEmpty()?null:n.value?new QT(this.source,os(),n.value):new Xx(this.source,os(),n)}else return Pe(fn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xx(this.source,or(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ww{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(In(e))return this.isFullyInitialized()&&!this.filtered_;const n=fn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a0t{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function c0t(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(JCt(o.childName,o.snapshotNode))}),DR(t,r,"child_removed",e,s,n),DR(t,r,"child_added",e,s,n),DR(t,r,"child_moved",i,s,n),DR(t,r,"child_changed",e,s,n),DR(t,r,"value",e,s,n),r}function DR(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>u0t(t,a,l)),o.forEach(a=>{const l=l0t(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function l0t(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function u0t(t,e,n){if(e.childName==null||n.childName==null)throw E1("Should only compare child_ events.");const s=new Vn(e.childName,e.snapshotNode),r=new Vn(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function x5(t,e){return{eventCache:t,serverCache:e}}function xP(t,e,n,s){return x5(new ww(e,n,s),t.serverCache)}function eFe(t,e,n,s){return x5(t.eventCache,new ww(e,n,s))}function k6(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function YT(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let KW;const h0t=()=>(KW||(KW=new uu(YTt)),KW);class _r{static fromObject(e){let n=new _r(null);return Eu(e,(s,r)=>{n=n.set(new Qs(s),r)}),n}constructor(e,n=h0t()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:os(),value:this.value};if(In(e))return null;{const s=fn(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(or(e),n);return i!=null?{path:Io(new Qs(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(In(e))return this;{const n=fn(e),s=this.children.get(n);return s!==null?s.subtree(or(e)):new _r(null)}}set(e,n){if(In(e))return new _r(n,this.children);{const s=fn(e),r=(this.children.get(s)||new _r(null)).set(or(e),n),i=this.children.insert(s,r);return new _r(this.value,i)}}remove(e){if(In(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const n=fn(e),s=this.children.get(n);if(s){const r=s.remove(or(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new _r(null):new _r(this.value,i)}else return this}}get(e){if(In(e))return this.value;{const n=fn(e),s=this.children.get(n);return s?s.get(or(e)):null}}setTree(e,n){if(In(e))return n;{const s=fn(e),r=(this.children.get(s)||new _r(null)).setTree(or(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new _r(this.value,i)}}fold(e){return this.fold_(os(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Io(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,os(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(In(e))return null;{const i=fn(e),o=this.children.get(i);return o?o.findOnPath_(or(e),Io(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,os(),n)}foreachOnPath_(e,n,s){if(In(e))return this;{this.value&&s(n,this.value);const r=fn(e),i=this.children.get(r);return i?i.foreachOnPath_(or(e),Io(n,r),s):new _r(null)}}foreach(e){this.foreach_(os(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Io(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nd{constructor(e){this.writeTree_=e}static empty(){return new Nd(new _r(null))}}function DP(t,e,n){if(In(e))return new Nd(new _r(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Zc(r,e);return i=i.updateChild(o,n),new Nd(t.writeTree_.set(r,i))}else{const r=new _r(n),i=t.writeTree_.setTree(e,r);return new Nd(i)}}}function wye(t,e,n){let s=t;return Eu(n,(r,i)=>{s=DP(s,Io(e,r),i)}),s}function bye(t,e){if(In(e))return Nd.empty();{const n=t.writeTree_.setTree(e,new _r(null));return new Nd(n)}}function bY(t,e){return $C(t,e)!=null}function $C(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Zc(n.path,e)):null}function Eye(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(oi,(s,r)=>{e.push(new Vn(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Vn(s,r.value))}),e}function vv(t,e){if(In(e))return t;{const n=$C(t,e);return n!=null?new Nd(new _r(n)):new Nd(t.writeTree_.subtree(e))}}function EY(t){return t.writeTree_.isEmpty()}function sk(t,e){return tFe(os(),t.writeTree_,e)}function tFe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Pe(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=tFe(Io(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Io(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D5(t,e){return iFe(e,t)}function d0t(t,e,n,s,r){Pe(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=DP(t.visibleWrites,e,n)),t.lastWriteId=s}function f0t(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function p0t(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Pe(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&g0t(a,s.path)?r=!1:od(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return m0t(t),!0;if(s.snap)t.visibleWrites=bye(t.visibleWrites,s.path);else{const a=s.children;Eu(a,l=>{t.visibleWrites=bye(t.visibleWrites,Io(s.path,l))})}return!0}else return!1}function g0t(t,e){if(t.snap)return od(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&od(Io(t.path,n),e))return!0;return!1}function m0t(t){t.visibleWrites=nFe(t.allWrites,_0t,os()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _0t(t){return t.visible}function nFe(t,e,n){let s=Nd.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)od(n,o)?(a=Zc(n,o),s=DP(s,a,i.snap)):od(o,n)&&(a=Zc(o,n),s=DP(s,os(),i.snap.getChild(a)));else if(i.children){if(od(n,o))a=Zc(n,o),s=wye(s,a,i.children);else if(od(o,n))if(a=Zc(o,n),In(a))s=wye(s,os(),i.children);else{const l=GS(i.children,fn(a));if(l){const u=l.getChild(or(a));s=DP(s,os(),u)}}}else throw E1("WriteRecord should have .snap or .children")}}return s}function sFe(t,e,n,s,r){if(!s&&!r){const i=$C(t.visibleWrites,e);if(i!=null)return i;{const o=vv(t.visibleWrites,e);if(EY(o))return n;if(n==null&&!bY(o,os()))return null;{const a=n||vt.EMPTY_NODE;return sk(o,a)}}}else{const i=vv(t.visibleWrites,e);if(!r&&EY(i))return n;if(!r&&n==null&&!bY(i,os()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(od(u.path,e)||od(e,u.path))},a=nFe(t.allWrites,o,e),l=n||vt.EMPTY_NODE;return sk(a,l)}}}function y0t(t,e,n){let s=vt.EMPTY_NODE;const r=$C(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(oi,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=vv(t.visibleWrites,e);return n.forEachChild(oi,(o,a)=>{const l=sk(vv(i,new Qs(o)),a);s=s.updateImmediateChild(o,l)}),Eye(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=vv(t.visibleWrites,e);return Eye(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function v0t(t,e,n,s,r){Pe(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Io(e,n);if(bY(t.visibleWrites,i))return null;{const o=vv(t.visibleWrites,i);return EY(o)?r.getChild(n):sk(o,r.getChild(n))}}function w0t(t,e,n,s){const r=Io(e,n),i=$C(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=vv(t.visibleWrites,r);return sk(o,s.getNode().getImmediateChild(n))}else return null}function b0t(t,e){return $C(t.visibleWrites,e)}function E0t(t,e,n,s,r,i,o){let a;const l=vv(t.visibleWrites,e),u=$C(l,os());if(u!=null)a=u;else if(n!=null)a=sk(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function T0t(){return{visibleWrites:Nd.empty(),allWrites:[],lastWriteId:-1}}function R6(t,e,n,s){return sFe(t.writeTree,t.treePath,e,n,s)}function nre(t,e){return y0t(t.writeTree,t.treePath,e)}function Tye(t,e,n,s){return v0t(t.writeTree,t.treePath,e,n,s)}function A6(t,e){return b0t(t.writeTree,Io(t.treePath,e))}function C0t(t,e,n,s,r,i){return E0t(t.writeTree,t.treePath,e,n,s,r,i)}function sre(t,e,n){return w0t(t.writeTree,t.treePath,e,n)}function rFe(t,e){return iFe(Io(t.treePath,e),t.writeTree)}function iFe(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I0t{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Pe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Pe(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,Kx(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,Gx(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,nk(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,Kx(s,e.snapshotNode,r.oldSnap));else throw E1("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S0t{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const oFe=new S0t;class rre{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new ww(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sre(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:YT(this.viewCache_),i=C0t(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k0t(t){return{filter:t}}function R0t(t,e){Pe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Pe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function A0t(t,e,n,s,r){const i=new I0t;let o,a;if(n.type===ad.OVERWRITE){const u=n;u.source.fromUser?o=TY(t,e,u.path,u.snap,s,r,i):(Pe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!In(u.path),o=P6(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===ad.MERGE){const u=n;u.source.fromUser?o=N0t(t,e,u.path,u.children,s,r,i):(Pe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=CY(t,e,u.path,u.children,s,r,a,i))}else if(n.type===ad.ACK_USER_WRITE){const u=n;u.revert?o=O0t(t,e,u.path,s,r,i):o=x0t(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===ad.LISTEN_COMPLETE)o=D0t(t,e,n.path,s,i);else throw E1("Unknown operation type: "+n.type);const l=i.getChanges();return P0t(e,o,l),{viewCache:o,changes:l}}function P0t(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=k6(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(X2e(k6(e)))}}function aFe(t,e,n,s,r,i){const o=e.eventCache;if(A6(s,n)!=null)return e;{let a,l;if(In(n))if(Pe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=YT(e),h=u instanceof vt?u:vt.EMPTY_NODE,d=nre(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=R6(s,YT(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=fn(n);if(u===".priority"){Pe(vw(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Tye(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=or(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=Tye(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=sre(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return xP(e,a,o.isFullyInitialized()||In(n),t.filter.filtersNodes())}}function P6(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(In(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=fn(n);if(!l.isCompleteForPath(n)&&vw(n)>1)return e;const w=or(n),R=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),R):u=h.updateChild(l.getNode(),m,R,w,oFe,null)}const d=eFe(e,u,l.isFullyInitialized()||In(n),h.filtersNodes()),p=new rre(r,d,i);return aFe(t,d,n,r,p,a)}function TY(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new rre(r,e,i);if(In(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=xP(e,u,!0,t.filter.filtersNodes());else{const d=fn(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=xP(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=or(n),m=a.getNode().getImmediateChild(d);let w;if(In(p))w=s;else{const R=h.getCompleteChild(d);R!=null?j2e(p)===".priority"&&R.getChild($2e(p)).isEmpty()?w=R:w=R.updateChild(p,s):w=vt.EMPTY_NODE}if(m.equals(w))l=e;else{const R=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=xP(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Cye(t,e){return t.eventCache.isCompleteForChild(e)}function N0t(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Io(n,l);Cye(e,fn(h))&&(a=TY(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Io(n,l);Cye(e,fn(h))||(a=TY(t,a,h,u,r,i,o))}),a}function Iye(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function CY(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;In(n)?u=s:u=new _r(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=Iye(t,m,p);l=P6(t,l,new Qs(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),R=Iye(t,w,p);l=P6(t,l,new Qs(d),R,r,i,o,a)}}),l}function x0t(t,e,n,s,r,i,o){if(A6(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(In(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return P6(t,e,n,l.getNode().getChild(n),r,i,a,o);if(In(n)){let u=new _r(null);return l.getNode().forEachChild(zI,(h,d)=>{u=u.set(new Qs(h),d)}),CY(t,e,n,u,r,i,a,o)}else return e}else{let u=new _r(null);return s.foreach((h,d)=>{const p=Io(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),CY(t,e,n,u,r,i,a,o)}}function D0t(t,e,n,s,r){const i=e.serverCache,o=eFe(e,i.getNode(),i.isFullyInitialized()||In(n),i.isFiltered());return aFe(t,o,n,s,oFe,r)}function O0t(t,e,n,s,r,i){let o;if(A6(s,n)!=null)return e;{const a=new rre(s,e,r),l=e.eventCache.getNode();let u;if(In(n)||fn(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=R6(s,YT(e));else{const d=e.serverCache.getNode();Pe(d instanceof vt,"serverChildren would be complete if leaf node"),h=nre(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=fn(n);let d=sre(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,or(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,vt.EMPTY_NODE,or(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=R6(s,YT(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||A6(s,os())!=null,xP(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L0t{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Jse(s.getIndex()),i=e0t(s);this.processor_=k0t(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(vt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(vt.EMPTY_NODE,a.getNode(),null),h=new ww(l,o.isFullyInitialized(),r.filtersNodes()),d=new ww(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=x5(d,h),this.eventGenerator_=new a0t(this.query_)}get query(){return this.query_}}function M0t(t){return t.viewCache_.serverCache.getNode()}function F0t(t){return k6(t.viewCache_)}function V0t(t,e){const n=YT(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!In(e)&&!n.getImmediateChild(fn(e)).isEmpty())?n.getChild(e):null}function Sye(t){return t.eventRegistrations_.length===0}function U0t(t,e){t.eventRegistrations_.push(e)}function kye(t,e,n){const s=[];if(n){Pe(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function Rye(t,e,n,s){e.type===ad.MERGE&&e.source.queryId!==null&&(Pe(YT(t.viewCache_),"We should always have a full cache before handling merges"),Pe(k6(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=A0t(t.processor_,r,e,n,s);return R0t(t.processor_,i.viewCache),Pe(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,cFe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function q0t(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(oi,(r,i)=>{s.push(nk(r,i))}),n.isFullyInitialized()&&s.push(X2e(n.getNode())),cFe(t,s,n.getNode(),e)}function cFe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return c0t(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let N6;class lFe{constructor(){this.views=new Map}}function j0t(t){Pe(!N6,"__referenceConstructor has already been defined"),N6=t}function B0t(){return Pe(N6,"Reference.ts has not been loaded"),N6}function $0t(t){return t.views.size===0}function ire(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Pe(i!=null,"SyncTree gave us an op for an invalid query."),Rye(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(Rye(o,e,n,s));return i}}function uFe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=R6(n,r?s:null),l=!1;a?l=!0:s instanceof vt?(a=nre(n,s),l=!1):(a=vt.EMPTY_NODE,l=!1);const u=x5(new ww(a,l,!1),new ww(s,r,!1));return new L0t(e,u)}return o}function z0t(t,e,n,s,r,i){const o=uFe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),U0t(o,n),q0t(o,n)}function H0t(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=bw(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(kye(u,n,s)),Sye(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(kye(l,n,s)),Sye(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!bw(t)&&i.push(new(B0t())(e._repo,e._path)),{removed:i,events:o}}function hFe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wv(t,e){let n=null;for(const s of t.views.values())n=n||V0t(s,e);return n}function dFe(t,e){if(e._queryParams.loadsAllData())return O5(t);{const n=e._queryIdentifier;return t.views.get(n)}}function fFe(t,e){return dFe(t,e)!=null}function bw(t){return O5(t)!=null}function O5(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let x6;function W0t(t){Pe(!x6,"__referenceConstructor has already been defined"),x6=t}function G0t(){return Pe(x6,"Reference.ts has not been loaded"),x6}let K0t=1;class Aye{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=T0t(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pFe(t,e,n,s,r){return d0t(t.pendingWriteTree_,e,n,s,r),r?CM(t,new QT(Z2e(),e,n)):[]}function OE(t,e,n=!1){const s=f0t(t.pendingWriteTree_,e);if(p0t(t.pendingWriteTree_,e)){let r=new _r(null);return s.snap!=null?r=r.set(os(),!0):Eu(s.children,i=>{r=r.set(new Qs(i),!0)}),CM(t,new S6(s.path,r,n))}else return[]}function TM(t,e,n){return CM(t,new QT(ere(),e,n))}function Q0t(t,e,n){const s=_r.fromObject(n);return CM(t,new Xx(ere(),e,s))}function Y0t(t,e){return CM(t,new Yx(ere(),e))}function X0t(t,e,n){const s=are(t,n);if(s){const r=cre(s),i=r.path,o=r.queryId,a=Zc(i,e),l=new Yx(tre(o),a);return lre(t,i,l)}else return[]}function D6(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||fFe(o,e))){const l=H0t(o,e,n,s);$0t(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>bw(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=eIt(p);for(let w=0;w<m.length;++w){const R=m[w],P=R.query,O=yFe(t,R);t.listenProvider_.startListening(OP(P),Jx(t,P),O.hashFn,O.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(OP(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(L5(p));t.listenProvider_.stopListening(OP(p),m)}))}tIt(t,u)}return a}function gFe(t,e,n,s){const r=are(t,s);if(r!=null){const i=cre(r),o=i.path,a=i.queryId,l=Zc(o,e),u=new QT(tre(a),l,n);return lre(t,o,u)}else return[]}function J0t(t,e,n,s){const r=are(t,s);if(r){const i=cre(r),o=i.path,a=i.queryId,l=Zc(o,e),u=_r.fromObject(n),h=new Xx(tre(a),l,u);return lre(t,o,h)}else return[]}function IY(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Zc(p,r);i=i||wv(m,w),o=o||bw(m)});let a=t.syncPointTree_.get(r);a?(o=o||bw(a),i=i||wv(a,os())):(a=new lFe,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=vt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=wv(m,os());w&&(i=i.updateImmediateChild(p,w))}));const u=fFe(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=L5(e);Pe(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=nIt();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=D5(t.pendingWriteTree_,r);let d=z0t(a,e,n,h,i,l);if(!u&&!o&&!s){const p=dFe(a,e);d=d.concat(sIt(t,e,p))}return d}function ore(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Zc(i,e),l=wv(o,a);if(l)return l});return sFe(s,e,r,n,!0)}function Z0t(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Zc(u,n);s=s||wv(h,d)});let r=t.syncPointTree_.get(n);r?s=s||wv(r,os()):(r=new lFe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new ww(s,!0,!1):null,a=D5(t.pendingWriteTree_,e._path),l=uFe(r,e,a,i?o.getNode():vt.EMPTY_NODE,i);return F0t(l)}function CM(t,e){return mFe(e,t.syncPointTree_,null,D5(t.pendingWriteTree_,os()))}function mFe(t,e,n,s){if(In(t.path))return _Fe(t,e,n,s);{const r=e.get(os());n==null&&r!=null&&(n=wv(r,os()));let i=[];const o=fn(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=rFe(s,o);i=i.concat(mFe(a,l,u,h))}return r&&(i=i.concat(ire(r,t,s,n))),i}}function _Fe(t,e,n,s){const r=e.get(os());n==null&&r!=null&&(n=wv(r,os()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=rFe(s,o),h=t.operationForChild(o);h&&(i=i.concat(_Fe(h,a,l,u)))}),r&&(i=i.concat(ire(r,t,s,n))),i}function yFe(t,e){const n=e.query,s=Jx(t,n);return{hashFn:()=>(M0t(e)||vt.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?X0t(t,n._path,s):Y0t(t,n._path);{const i=ZTt(r,n);return D6(t,n,null,i)}}}}function Jx(t,e){const n=L5(e);return t.queryToTagMap.get(n)}function L5(t){return t._path.toString()+"$"+t._queryIdentifier}function are(t,e){return t.tagToQueryMap.get(e)}function cre(t){const e=t.indexOf("$");return Pe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Qs(t.substr(0,e))}}function lre(t,e,n){const s=t.syncPointTree_.get(e);Pe(s,"Missing sync point for query tag that we're tracking");const r=D5(t.pendingWriteTree_,e);return ire(s,n,r,null)}function eIt(t){return t.fold((e,n,s)=>{if(n&&bw(n))return[O5(n)];{let r=[];return n&&(r=hFe(n)),Eu(s,(i,o)=>{r=r.concat(o)}),r}})}function OP(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(G0t())(t._repo,t._path):t}function tIt(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=L5(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function nIt(){return K0t++}function sIt(t,e,n){const s=e._path,r=Jx(t,e),i=yFe(t,n),o=t.listenProvider_.startListening(OP(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Pe(!bw(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!In(u)&&h&&bw(h))return[O5(h).query];{let p=[];return h&&(p=p.concat(hFe(h).map(m=>m.query))),Eu(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(OP(h),Jx(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ure{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ure(n)}node(){return this.node_}}class hre{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Io(this.path_,e);return new hre(this.syncTree_,n)}node(){return ore(this.syncTree_,this.path_)}}const rIt=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Pye=function(t,e,n){if(!t||typeof t!="object")return t;if(Pe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return iIt(t[".sv"],e,n);if(typeof t[".sv"]=="object")return oIt(t[".sv"],e);Pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},iIt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Pe(!1,"Unexpected server value: "+t)}},oIt=function(t,e,n){t.hasOwnProperty("increment")||Pe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Pe(!1,"Unexpected increment value: "+s);const r=e.node();if(Pe(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},aIt=function(t,e,n,s){return dre(e,new hre(n,t),s)},vFe=function(t,e,n){return dre(t,new ure(e),n)};function dre(t,e,n){const s=t.getPriority().val(),r=Pye(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Pye(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Wo(a,oa(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Wo(r))),o.forEachChild(oi,(a,l)=>{const u=dre(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fre{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function pre(t,e){let n=e instanceof Qs?e:new Qs(e),s=t,r=fn(n);for(;r!==null;){const i=GS(s.node.children,r)||{children:{},childCount:0};s=new fre(r,s,i),n=or(n),r=fn(n)}return s}function N1(t){return t.node.value}function wFe(t,e){t.node.value=e,SY(t)}function bFe(t){return t.node.childCount>0}function cIt(t){return N1(t)===void 0&&!bFe(t)}function M5(t,e){Eu(t.node.children,(n,s)=>{e(new fre(n,t,s))})}function EFe(t,e,n,s){n&&e(t),M5(t,r=>{EFe(r,e,!0)})}function lIt(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function IM(t){return new Qs(t.parent===null?t.name:IM(t.parent)+"/"+t.name)}function SY(t){t.parent!==null&&uIt(t.parent,t.name,t)}function uIt(t,e,n){const s=cIt(n),r=F_(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,SY(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,SY(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hIt=/[\[\].#$\/\u0000-\u001F\u007F]/,dIt=/[\[\].#$\u0000-\u001F\u007F]/,QW=10*1024*1024,TFe=function(t){return typeof t=="string"&&t.length!==0&&!hIt.test(t)},CFe=function(t){return typeof t=="string"&&t.length!==0&&!dIt.test(t)},fIt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),CFe(t)},pIt=function(t,e,n,s){gre(Une(t,"value"),e,n)},gre=function(t,e,n){const s=n instanceof Qs?new xCt(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+lE(s));if(typeof e=="function")throw new Error(t+"contains a function "+lE(s)+" with contents = "+e.toString());if(w2e(e))throw new Error(t+"contains "+e.toString()+" "+lE(s));if(typeof e=="string"&&e.length>QW/3&&HB(e)>QW)throw new Error(t+"contains a string greater than "+QW+" utf8 bytes "+lE(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Eu(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!TFe(o)))throw new Error(t+" contains an invalid key ("+o+") "+lE(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);DCt(s,o),gre(t,a,s),OCt(s)}),r&&i)throw new Error(t+' contains ".value" child '+lE(s)+" in addition to actual children.")}},IFe=function(t,e,n,s){if(!CFe(n))throw new Error(Une(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gIt=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),IFe(t,e,n)},SFe=function(t,e){if(fn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},mIt=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!TFe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fIt(n))throw new Error(Une(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _It{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mre(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!Qse(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function kFe(t,e,n){mre(t,n),RFe(t,s=>Qse(s,e))}function Fp(t,e,n){mre(t,n),RFe(t,s=>od(s,e)||od(e,s))}function RFe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(yIt(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function yIt(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();PP&&ec("event: "+n.toString()),P1(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vIt="repo_interrupt",wIt=25;class bIt{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _It,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=I6(),this.transactionQueueTree_=new fre,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EIt(t,e,n){if(t.stats_=Gse(t.repoInfo_),t.forceRestClient_||sCt())t.server_=new C6(t.repoInfo_,(s,r,i,o)=>{Nye(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>xye(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{To(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Dm(t.repoInfo_,e,(s,r,i,o)=>{Nye(t,s,r,i,o)},s=>{xye(t,s)},s=>{CIt(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=cCt(t.repoInfo_,()=>new o0t(t.stats_,t.server_)),t.infoData_=new t0t,t.infoSyncTree_=new Aye({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=TM(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yre(t,"connected",!1),t.serverSyncTree_=new Aye({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Fp(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function TIt(t){const e=t.infoData_.getNode(new Qs(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function _re(t){return rIt({timestamp:TIt(t)})}function Nye(t,e,n,s,r){t.dataUpdateCount++;const i=new Qs(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=n6(n,u=>oa(u));o=J0t(t.serverSyncTree_,i,l,r)}else{const l=oa(n);o=gFe(t.serverSyncTree_,i,l,r)}else if(s){const l=n6(n,u=>oa(u));o=Q0t(t.serverSyncTree_,i,l)}else{const l=oa(n);o=TM(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=V5(t,i)),Fp(t.eventQueue_,a,o)}function xye(t,e){yre(t,"connected",e),e===!1&&kIt(t)}function CIt(t,e){Eu(e,(n,s)=>{yre(t,n,s)})}function yre(t,e,n){const s=new Qs("/.info/"+e),r=oa(n);t.infoData_.updateSnapshot(s,r);const i=TM(t.infoSyncTree_,s,r);Fp(t.eventQueue_,s,i)}function AFe(t){return t.nextWriteId_++}function IIt(t,e,n){const s=Z0t(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=oa(r).withIndex(e._queryParams.getIndex());IY(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=TM(t.serverSyncTree_,e._path,i);else{const a=Jx(t.serverSyncTree_,e);o=gFe(t.serverSyncTree_,e._path,i,a)}return Fp(t.eventQueue_,e._path,o),D6(t.serverSyncTree_,e,n,null,!0),i},r=>(F5(t,"get for query "+To(e)+" failed: "+r),Promise.reject(new Error(r))))}function SIt(t,e,n,s,r){F5(t,"set",{path:e.toString(),value:n,priority:s});const i=_re(t),o=oa(n,s),a=ore(t.serverSyncTree_,e),l=vFe(o,a,i),u=AFe(t),h=pFe(t.serverSyncTree_,e,l,u,!0);mre(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||mu("set at "+e+" failed: "+p);const R=OE(t.serverSyncTree_,u,!w);Fp(t.eventQueue_,e,R),NIt(t,r,p,m)});const d=OFe(t,e);V5(t,d),Fp(t.eventQueue_,d,[])}function kIt(t){F5(t,"onDisconnectEvents");const e=_re(t),n=I6();wY(t.onDisconnect_,os(),(r,i)=>{const o=aIt(r,i,t.serverSyncTree_,e);J2e(n,r,o)});let s=[];wY(n,os(),(r,i)=>{s=s.concat(TM(t.serverSyncTree_,r,i));const o=OFe(t,r);V5(t,o)}),t.onDisconnect_=I6(),Fp(t.eventQueue_,os(),s)}function RIt(t,e,n){let s;fn(e._path)===".info"?s=IY(t.infoSyncTree_,e,n):s=IY(t.serverSyncTree_,e,n),kFe(t.eventQueue_,e._path,s)}function AIt(t,e,n){let s;fn(e._path)===".info"?s=D6(t.infoSyncTree_,e,n):s=D6(t.serverSyncTree_,e,n),kFe(t.eventQueue_,e._path,s)}function PIt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(vIt)}function F5(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ec(n,...e)}function NIt(t,e,n,s){e&&P1(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function PFe(t,e,n){return ore(t.serverSyncTree_,e,n)||vt.EMPTY_NODE}function vre(t,e=t.transactionQueueTree_){if(e||U5(t,e),N1(e)){const n=xFe(t,e);Pe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&xIt(t,IM(e),n)}else bFe(e)&&M5(e,n=>{vre(t,n)})}function xIt(t,e,n){const s=n.map(u=>u.currentWriteId),r=PFe(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];Pe(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Zc(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{F5(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(OE(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();U5(t,pre(t.transactionQueueTree_,e)),vre(t,t.transactionQueueTree_),Fp(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)P1(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{mu("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}V5(t,e)}},o)}function V5(t,e){const n=NFe(t,e),s=IM(n),r=xFe(t,n);return DIt(t,r,s),s}function DIt(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=Zc(n,a.path);let u=!1,h;if(Pe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(OE(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=wIt)u=!0,h="maxretry",r=r.concat(OE(t.serverSyncTree_,a.currentWriteId,!0));else{const d=PFe(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){gre("transaction failed: Data returned ",p,a.path);let m=oa(p);typeof p=="object"&&p!=null&&F_(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,R=_re(t),P=vFe(m,d,R);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=AFe(t),i.splice(i.indexOf(w),1),r=r.concat(pFe(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(OE(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(OE(t.serverSyncTree_,a.currentWriteId,!0))}Fp(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}U5(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)P1(s[o]);vre(t,t.transactionQueueTree_)}function NFe(t,e){let n,s=t.transactionQueueTree_;for(n=fn(e);n!==null&&N1(s)===void 0;)s=pre(s,n),e=or(e),n=fn(e);return s}function xFe(t,e){const n=[];return DFe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function DFe(t,e,n){const s=N1(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);M5(e,r=>{DFe(t,r,n)})}function U5(t,e){const n=N1(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,wFe(e,n.length>0?n:void 0)}M5(e,s=>{U5(t,s)})}function OFe(t,e){const n=IM(NFe(t,e)),s=pre(t.transactionQueueTree_,e);return lIt(s,r=>{YW(t,r)}),YW(t,s),EFe(s,r=>{YW(t,r)}),n}function YW(t,e){const n=N1(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Pe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Pe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(OE(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?wFe(e,void 0):n.length=i+1,Fp(t.eventQueue_,IM(e),r);for(let o=0;o<s.length;o++)P1(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OIt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function LIt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):mu(`Invalid query segment '${n}' in query '${t}'`)}return e}const Dye=function(t,e){const n=MIt(t),s=n.namespace;n.domain==="firebase.com"&&t_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&t_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KTt();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new x2e(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Qs(n.pathString)}},MIt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=OIt(t.substring(h,d)));const p=LIt(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FIt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+To(this.snapshot.exportVal())}}class VIt{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LFe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Pe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wre{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return In(this._path)?null:j2e(this._path)}get ref(){return new V_(this._repo,this._path)}get _queryIdentifier(){const e=yye(this._queryParams),n=Hse(e);return n==="{}"?"default":n}get _queryObject(){return yye(this._queryParams)}isEqual(e){if(e=Us(e),!(e instanceof wre))return!1;const n=this._repo===e._repo,s=Qse(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+NCt(this._path)}}class V_ extends wre{constructor(e,n){super(e,n,new Zse,!1)}get parent(){const e=$2e(this._path);return e===null?null:new V_(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Zx{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Qs(e),s=kY(this.ref,e);return new Zx(this._node.getChild(n),s,oi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new Zx(s,kY(this.ref,n),oi)))}hasChild(e){const n=new Qs(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function bre(t,e){return t=Us(t),t._checkNotDeleted("ref"),e!==void 0?kY(t._root,e):t._root}function kY(t,e){return t=Us(t),fn(t._path)===null?gIt("child","path",e):IFe("child","path",e),new V_(t._repo,Io(t._path,e))}function Ere(t){return SFe("remove",t._path),q5(t,null)}function q5(t,e){t=Us(t),SFe("set",t._path),pIt("set",e,t._path);const n=new BB;return SIt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Tre(t){t=Us(t);const e=new LFe(()=>{}),n=new j5(e);return IIt(t._repo,t,n).then(s=>new Zx(s,new V_(t._repo,t._path),t._queryParams.getIndex()))}class j5{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new FIt("value",this,new Zx(e.snapshotNode,new V_(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new VIt(this,e,n):null}matches(e){return e instanceof j5?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function UIt(t,e,n,s,r){const i=new LFe(n,void 0),o=new j5(i);return RIt(t._repo,t,o),()=>AIt(t._repo,t,o)}function Cre(t,e,n,s){return UIt(t,"value",e)}j0t(V_);W0t(V_);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qIt="FIREBASE_DATABASE_EMULATOR_HOST",RY={};let jIt=!1;function BIt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=tg(i);t.repoInfo_=new x2e(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function $It(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||t_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ec("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Dye(i,r),a=o.repoInfo,l;typeof process<"u"&&eye&&(l=eye[qIt]),l?(i=`http://${l}?ns=${a.namespace}`,o=Dye(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new iCt(t.name,t.options,e);mIt("Invalid Firebase Database URL",o),In(o.path)||t_("Database URL must point to the root of a Firebase Database (not including a child path).");const h=HIt(a,t,u,new rCt(t,n));return new WIt(h,t)}function zIt(t,e){const n=RY[e];(!n||n[t.key]!==t)&&t_(`Database ${e}(${t.repoInfo_}) has already been deleted.`),PIt(t),delete n[t.key]}function HIt(t,e,n,s){let r=RY[e.name];r||(r={},RY[e.name]=r);let i=r[t.toURLString()];return i&&t_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new bIt(t,jIt,n,s),r[t.toURLString()]=i,i}class WIt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EIt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new V_(this._repo,os())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zIt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&t_("Cannot call "+e+" on a deleted database.")}}function B5(t=GB(),e){const n=cM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=Mne("database");s&&GIt(n,...s)}return n}function GIt(t,e,n,s={}){t=Us(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&hw(s,i.repoInfo_.emulatorOptions))return;t_("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&t_('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new K4(K4.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:Fne(s.mockUserToken,t.app.options.projectId);o=new K4(a)}tg(e)&&($B(e),zB("Database",!0)),BIt(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KIt(t){BTt(wb),dw(new Ym("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return $It(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),bh(tye,nye,t),bh(tye,nye,"esm2020")}Dm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};KIt();var zb={};const po={apiKey:zb.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:zb.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:zb.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:zb.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:zb.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:zb.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:zb.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log(" Firebase  :",{apiKey:po.apiKey?"":" ",authDomain:po.authDomain?"":" ",projectId:po.projectId?"":" ",storageBucket:po.storageBucket?"":" ",messagingSenderId:po.messagingSenderId?"":" ",appId:po.appId?"":" ",databaseURL:po.databaseURL?"":""});console.log(" Firebase   :",{apiKey:po.apiKey?`${po.apiKey.substring(0,10)}...`:"",authDomain:po.authDomain,projectId:po.projectId,databaseURL:po.databaseURL?"":""});(!po.apiKey||!po.authDomain||!po.projectId)&&console.warn(" Firebase   .   .");let mr,Zr,LE,rk,ik;po.apiKey&&po.authDomain&&po.projectId?(mr=GOe(po),Zr=l5(mr),LE=new fh,rk=zMe(mr),ik=VTt(mr),B5(mr)):(console.warn(" Firebase  .  (,  )    ."),Zr=null,LE=null,rk=null,ik=null);const QIt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Zr},get db(){return rk},get firebaseApp(){return mr},get googleProvider(){return LE},get storage(){return ik}},Symbol.toStringTag,{value:"Module"}));function $5(){return cl(EOe)}const dr=Zd(null),ff=Zd(!0),yF=Zd(null);let p0=null,Oye=!1;function z5(){const t=$5(),e=mr?zMe(mr):null;e?console.log(" Firestore  "):console.error(" Firestore  ."),mr?console.log(" Firebase  "):console.warn(" Firebase  .     .");const n=async l=>{if(!e)throw console.log(" Firestore  ."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("    :",l.email,`( ${h+1}/${u})`);const d=C5(e,"users",l.uid),p=await zx(d);if(p.exists()){const m=p.data();return console.log("   :",m),await Hx(d,{lastLoginAt:BI()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("    :",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],R=w.includes(l.email||"");console.log("   :",{userEmail:l.email,adminEmails:w,isAdminEmail:R});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:R?"admin":"student",createdAt:BI(),lastLoginAt:BI()};console.log("     :",P),await Hx(d,P),console.log("    :",l.email);const O=await zx(d);if(O.exists())console.log("    :",O.data());else throw console.error("    :   "),new Error("   .");return{...l,role:R?"admin":"student"}}}catch(d){if(h++,console.error(` Firestore   ( ${h}/${u}):`,d),console.error("  :",d.code),console.error("  :",d.message),d.code==="permission-denied")throw console.error(" Firestore  .   ."),console.error("   :",{code:d.code,message:d.message,firebaseApp:!!mr,db:!!e,auth:!!Zr,userUid:l.uid,userEmail:l.email}),new Error("Firebase   . Firestore   Security Rules    .");if(h<u)console.log(` ${h*1e3}ms  ...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("   .   ."),new Error("    .    .")}return{...l,role:"student"}},s=async()=>{if(!ff.value){ff.value=!0,yF.value=null;try{if(!Zr||!LE)throw new Error("Firebase is not configured.");const l=await a5(Zr,LE);console.log(" Google   :",l.user.email);try{if(mr&&e)dr.value=await n(l.user),console.log("      :",dr.value.role);else{console.log(" Firebase      ."),dr.value=null,Zr&&await $y(Zr),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3}),ff.value=!1;return}console.log("      :",{isAuthenticated:!!dr.value,userRole:dr.value?.role,userEmail:dr.value?.email})}catch(u){console.error("      :",u),dr.value=null,Zr&&await $y(Zr),t.notify({type:"warning",message:"Firebase       .",timeout:5e3}),ff.value=!1;return}ff.value=!1,t.notify({type:"positive",message:" !",timeout:2e3})}catch(l){console.error(" Google   :",l),yF.value=l.message,t.notify({type:"negative",message:"   ."}),ff.value=!1}}},r=async()=>{if(console.log(" useAuth: logout  "),console.log(" useAuth: auth  :",!!Zr),!Zr){console.log(" useAuth: auth  ");return}try{p0&&(console.log(" useAuth: Firestore  "),p0(),p0=null),console.log(" useAuth: Firebase signOut "),await $y(Zr),console.log(" useAuth: Firebase signOut "),dr.value=null,console.log(" useAuth:    "),console.log("  ")}catch(l){console.error(" useAuth:  :",l),t.notify({type:"negative",message:"   ."})}},i=()=>{if(!Oye){if(Oye=!0,console.log(" Firebase   :",{firebaseApp:!!mr,auth:!!Zr,db:!!e}),!Zr){console.log(" Firebase Auth  "),ff.value=!1;return}console.log(" Firebase Auth  "),p0=n5(Zr,async l=>{if(console.log(" onAuthStateChanged . :",l?l.email:""),l)if(console.log("   :",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),mr&&e)try{dr.value=await n(l),console.log("    :",dr.value.role),console.log("    :",{isAuthenticated:!!dr.value,userRole:dr.value?.role,userEmail:dr.value?.email})}catch(u){console.error("    :",u),console.error("  :",u.code),console.error("  :",u.message),dr.value=null,Zr&&await $y(Zr),yF.value=u.message,t.notify({type:"warning",message:" /     .  .",timeout:5e3}),ff.value=!1;return}else console.log(" Firebase       ."),dr.value=null,Zr&&await $y(Zr),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3});else console.log("   "),dr.value=null,console.log("     ");ff.value=!1})}};b1(()=>{p0&&p0()});const o=()=>{console.log("   :",{user:dr.value,isAuthenticated:!!dr.value,userRole:dr.value?.role,firebaseApp:!!mr,firestore:!!e})},a=()=>(console.log(" Firebase   :"),console.log("  - Firebase App:",!!mr),console.log("  - Firebase Auth:",!!Zr),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!LE),mr&&console.log("  - Firebase Config:",{apiKey:mr.options.apiKey?"":" ",authDomain:mr.options.authDomain?"":" ",projectId:mr.options.projectId?"":" ",storageBucket:mr.options.storageBucket?"":" "}),{firebaseApp:!!mr,auth:!!Zr,db:!!e,googleProvider:!!LE});return{user:st(()=>dr.value),loading:st(()=>ff.value),error:st(()=>yF.value),isAuthenticated:st(()=>!!dr.value),displayName:st(()=>dr.value?.displayName||""),email:st(()=>dr.value?.email||""),photoURL:st(()=>dr.value?.photoURL||""),isFirebaseConfigured:st(()=>!!mr),userRole:st(()=>dr.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const YIt={id:"app"},XIt=UC({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=z5(),o=UB(),a=qB();return v1(()=>{e()}),fv([n,s,r],([l,u,h])=>{h||(console.log(`  : isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(` : ${a.path}`),i(),l?u==="admin"?(console.log(" .   ."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log(" .   ."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("    .   ."):console.log(" .   ."))}),(l,u)=>{const h=bB("router-view");return sM(),CB("div",YIt,[ua(h)])}}}),JIt=t=>t,ZIt=JIt,eSt=[{path:"/",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./MainLayout-Bwj2wsFm-Cz6tEJ5A-BqhNFaGb-C1FXY7I5.js"),__vite__mapDeps([22,23,24,25,26,27,28,29,30,31,32,33])),Fs([22,23,24,25,26,27,28,29,30,31,32,33])),ri([22,23,24,25,26,27,28,29,30,31,32,33])),Vc([22,23,24,25,26,27,28,29,30,31,32,33,34,35])),children:[{path:"",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./IndexPage-CFs49cf4-DCFzd5a3-BgfGDant-BQyu4c8A.js"),__vite__mapDeps([34,23,24,25,32,35,30,31,36,33])),Fs([34,23,24,25,32,35,30,31,36,33])),ri([34,23,24,25,32,35,30,31,36,33])),Vc([36,23,24,25,32,37,30,31,38,34,39]))},{path:"survey-results",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./SurveyResults-DvN0U2_L-LlonMCsx-BnTA3nZB-sQ_LP71B.js"),__vite__mapDeps([37,28,25,23,24,27,38,35,39])),Fs([37,28,25,23,24,27,38,35,39])),ri([37,28,25,23,24,27,38,35,39])),Vc([40,28,25,23,24,27,41,37,42,43]))}]},{path:"/logout",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./LogoutPage-CtCownZv-BTcpQEl3-n4ns1Z9p-ZobQPw5w.js"),__vite__mapDeps([40,24,25,32,35,26])),Fs([40,24,25,32,35,26])),ri([40,24,25,32,35,26])),Vc([44,24,25,32,37,26,45]))},{path:"/poll-result",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./PollResultPage-BsZ27FdJ-BqTU4Xdx-BVDVEe2h-DYtMi2mC.js"),__vite__mapDeps([41,28,25,35,39])),Fs([41,28,25,35,39])),ri([41,28,25,35,39])),Vc([46,28,25,37,42,43,47]))},{path:"/study/:courseId",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./StudentView-EHbgIK-q-CI38o4Vo-NXpdNqUJ-Bi3XwWbb.js"),__vite__mapDeps([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),Fs([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),ri([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),Vc([48,23,24,25,27,29,26,30,31,32,28,33,38,37,41,42,43,49])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("   :",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("    :",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ho(()=>ur(()=>ns(()=>an(()=>import("./ErrorNotFound-C3eQr692-UoAM-uVv-BT5vL26p-DMUfOcIe.js"),[]),[]),[]),[])}],XW=ZIt(function(){return Ugt({scrollBehavior:()=>({left:0,top:0}),routes:eSt,history:pgt("/")})});async function tSt(t,e){const n=t(XIt);n.use(Fpt,e);const s=yb(typeof XW=="function"?await XW({}):XW);return{app:n,router:s}}const AY={xs:18,sm:24,md:32,lg:38,xl:46},x1={size:String};function D1(t,e=AY){return st(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function H5(t,e){return t!==void 0&&t()||e}function Ire(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function Zy(t,e){return t!==void 0?e.concat(t()):e}function W5(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function Sre(t,e,n,s,r,i){e.key=s+r;const o=_t(t,e,n);return r===!0?tM(o,i()):o}const Lye="0 0 24 24",JW=t=>t,ZW=t=>`ionicons ${t}`,MFe={"mdi-":t=>`mdi ${t}`,"icon-":JW,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":ZW,"ion-ios":ZW,"ion-logo":ZW,"iconfont ":JW,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":JW},FFe={o_:"-outlined",r_:"-round",s_:"-sharp"},VFe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},nSt=new RegExp("^("+Object.keys(MFe).join("|")+")"),sSt=new RegExp("^("+Object.keys(FFe).join("|")+")"),Mye=new RegExp("^("+Object.keys(VFe).join("|")+")"),rSt=/^[Mm]\s?[-+]?\.?\d/,iSt=/^img:/,oSt=/^svguse:/,aSt=/^ion-/,cSt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,XT=vb({name:"QIcon",props:{...x1,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=eg(),s=D1(t),r=st(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=st(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(rSt.test(a)===!0){const[h,d=Lye]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,R]=p.split("@@");return _t("path",{style:w,d:m,transform:R})})}}if(iSt.test(a)===!0)return{img:!0,src:a.substring(4)};if(oSt.test(a)===!0){const[h,d=Lye]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(nSt);if(u!==null)o=MFe[u[1]](a);else if(cSt.test(a)===!0)o=a;else if(aSt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(Mye.test(a)===!0){o="notranslate material-symbols";const h=a.match(Mye);h!==null&&(a=a.substring(6),o+=VFe[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(sSt);h!==null&&(a=a.substring(2),o+=FFe[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?_t(t.tag,o,H5(e.default)):i.value.img===!0?_t(t.tag,o,Zy(e.default,[_t("img",{src:i.value.src})])):i.value.svg===!0?_t(t.tag,o,Zy(e.default,[_t("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?_t(t.tag,o,Zy(e.default,[_t("svg",{viewBox:i.value.viewBox},[_t("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),_t(t.tag,o,Zy(e.default,[i.value.content])))}}}),G5=vb({name:"QAvatar",props:{...x1,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=D1(t),s=st(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=st(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[_t(XT,{name:t.icon})]:void 0;return _t("div",{class:s.value,style:n.value},[_t("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},W5(e.default,i))])}}}),K5={size:{type:[String,Number],default:"1em"},color:String};function Q5(t){return{cSize:st(()=>t.size in AY?`${AY[t.size]}px`:t.size),classes:st(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const SM=vb({name:"QSpinner",props:{...K5,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=Q5(t);return()=>_t("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[_t("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Y5(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function kre(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=np(t);if(e)return e.$el||e}function Rre(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function lSt(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function Fye(t,e,n,s){n.modifiers.stop===!0&&oM(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=NB(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,R=`${(d-m)/2}px`,P=i?R:`${l.left-u-w}px`,O=`${(p-m)/2}px`,M=i?O:`${l.top-h-w}px`;a.className="q-ripple__inner",Y5(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${R},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function Vye(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const X5=AB({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&Fye(r,t,s,r.qKeyEvent===!0)},keystart:lSt(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&zS(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&Fye(r,t,s,!0)},300)};Vye(s,e),t.__qripple=s,xB(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&Vye(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),DB(e,"main"),delete t._qripple)}}),UFe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},uSt=Object.keys(UFe),J5={align:{type:String,validator:t=>uSt.includes(t)}};function Z5(t){return st(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${UFe[e]}`})}function Are(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function e$(t){return t.appContext.config.globalProperties.$router!==void 0}function Pre(t){return t.isUnmounted===!0||t.isDeactivated===!0}function Uye(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function qye(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hSt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function jye(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function dSt(t,e){return Array.isArray(t)===!0?jye(t,e):Array.isArray(e)===!0?jye(e,t):t===e}function fSt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(dSt(t[n],e[n])===!1)return!1;return!0}const qFe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Nre={...qFe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function t$({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=eg(),{props:s,proxy:r,emit:i}=n,o=e$(n),a=st(()=>s.disable!==!0&&s.href!==void 0),l=st(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=st(()=>l.value===!0?M(s.to):null),h=st(()=>u.value!==null),d=st(()=>a.value===!0||h.value===!0),p=st(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=st(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=st(()=>{if(h.value===!1)return-1;const{matched:W}=u.value,{length:J}=W,I=W[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(qye.bind(null,I));if(y!==-1)return y;const T=Uye(W[J-2]);return J>1&&Uye(I)===T&&v[v.length-1].path!==T?v.findIndex(qye.bind(null,W[J-2])):y}),R=st(()=>h.value===!0&&w.value!==-1&&hSt(r.$route.params,u.value.params)),P=st(()=>R.value===!0&&w.value===r.$route.matched.length-1&&fSt(r.$route.params,u.value.params)),O=st(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":R.value===!0?` ${s.activeClass}`:"":"");function M(W){try{return r.$router.resolve(W)}catch{}return null}function V(W,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return W.preventDefault(),Promise.resolve(!1);if(W.metaKey||W.altKey||W.ctrlKey||W.shiftKey||W.button!==void 0&&W.button!==0||s.target==="_blank")return Promise.resolve(!1);W.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(W){if(h.value===!0){const J=I=>V(W,I);i("click",W,J),W.defaultPrevented!==!0&&J()}else i("click",W)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:R,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const Bye={none:0,xs:4,sm:8,md:16,lg:24,xl:32},pSt={xs:8,sm:10,md:14,lg:20,xl:24},gSt=["button","submit","reset"],mSt=/[^\s]\/[^\s]/,_St=["flat","outline","push","unelevated"];function ySt(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const vSt={...x1,...qFe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,..._St.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...J5.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},wSt={...vSt,round:Boolean};function bSt(t){const e=D1(t,pSt),n=Z5(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=t$({fallbackTag:"button"}),l=st(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in Bye?Bye[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),u=st(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=st(()=>t.disable!==!0&&t.loading!==!0),d=st(()=>h.value===!0?t.tabindex||0:-1),p=st(()=>ySt(t,"standard")),m=st(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):gSt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&mSt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=st(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),R=st(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:R,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:eh}=xp;let g0=null,m0=null,_0=null;const n$=vb({name:"QBtn",props:{...wSt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=eg(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=bSt(t),p=Zd(null),m=Zd(null);let w=null,R,P=null;const O=st(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=st(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=st(()=>({center:t.round})),q=st(()=>{const G=Math.max(0,Math.min(100,t.percentage));return G>0?{transition:"transform 0.6s",transform:`translateX(${G-100}%)`}:{}}),W=st(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const G={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";G[`onTouchstart${ne}`]=y}return G}return{onClick:Jg}}),J=st(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...W.value}));function I(G){if(p.value!==null){if(G!==void 0){if(G.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){G.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",Jg,!0),document.removeEventListener("keyup",ae,eh),p.value?.removeEventListener("blur",ae,eh)};document.addEventListener("keydown",Jg,!0),document.addEventListener("keyup",ae,eh),p.value.addEventListener("blur",ae,eh)}}h(G)}}function v(G){p.value!==null&&(n("keydown",G),zS(G,[13,32])===!0&&m0!==p.value&&(m0!==null&&E(),G.defaultPrevented!==!0&&(G.qAvoidFocus!==!0&&p.value.focus(),m0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,eh)),Jg(G)))}function y(G){p.value!==null&&(n("touchstart",G),G.defaultPrevented!==!0&&(g0!==p.value&&(g0!==null&&E(),g0=p.value,w=G.target,w.addEventListener("touchcancel",S,eh),w.addEventListener("touchend",S,eh)),R=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,R=!1},200)))}function T(G){p.value!==null&&(G.qSkipRipple=R===!0,n("mousedown",G),G.defaultPrevented!==!0&&_0!==p.value&&(_0!==null&&E(),_0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,eh)))}function S(G){if(p.value!==null&&!(G?.type==="blur"&&document.activeElement===p.value)){if(G?.type==="keyup"){if(m0===p.value&&zS(G,[13,32])===!0){const ne=new MouseEvent("click",G);ne.qKeyEvent=!0,G.defaultPrevented===!0&&$S(ne),G.cancelBubble===!0&&oM(ne),p.value.dispatchEvent(ne),Jg(G),G.qKeyEvent=!0}n("keyup",G)}E()}}function E(G){const ne=m.value;G!==!0&&(g0===p.value||_0===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),g0===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,eh),w.removeEventListener("touchend",S,eh)),g0=w=null),_0===p.value&&(document.removeEventListener("mouseup",S,eh),_0=null),m0===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,eh),m0=null),p.value?.classList.remove("q-btn--active")}function b(G){Jg(G),G.qSkipRipple=!0}return w1(()=>{E(!0)}),Object.assign(s,{click:G=>{d.value===!0&&I(G)}}),()=>{let G=[];t.icon!==void 0&&G.push(_t(XT,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&G.push(_t("span",{class:"block"},[t.label])),G=Zy(e.default,G),t.iconRight!==void 0&&t.round===!1&&G.push(_t(XT,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[_t("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(_t("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[_t("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(_t("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},G)),t.loading!==null&&ne.push(_t(RB,{name:"q-transition--fade"},()=>t.loading===!0?[_t("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[_t(SM)])]:null)),tM(_t(u.value,J.value,ne),[[X5,M.value,void 0,V.value]])}}});let ESt=1,TSt=document.body;function s$(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${ESt++}`:t,ZU.globalNodes!==void 0){const s=ZU.globalNodes.class;s!==void 0&&(n.className=s)}return TSt.appendChild(n),n}function xre(t){t.remove()}let CSt=0;const Q4={},Y4={},Uh={},jFe={},ISt=/^\s*$/,BFe=[],SSt=[void 0,null,!0,!1,""],Dre=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],kSt=["top-left","top-right","bottom-left","bottom-right"],IA={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function $Fe(t,e,n){if(!t)return OR("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,Q4),uw(t)===!1&&(r.type&&Object.assign(r,IA[r.type]),t={message:t}),Object.assign(r,IA[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=SM),r.spinner=yb(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:$ye(r.message)||$ye(r.caption)},r.position){if(Dre.includes(r.position)===!1)return OR("wrong position",t)}else r.position="bottom";if(SSt.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return OR("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Q4.actions)===!0?Q4.actions:[]).concat(Array.isArray(IA[t.type]?.actions)===!0?IA[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=Uh[r.position].value.indexOf(n.notif);Uh[r.position].value[l]=r}else{const l=Y4[r.meta.group];if(l===void 0){if(r.meta.uid=CSt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Uh[r.position].value.splice(Math.floor(Uh[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";Uh[r.position].value[u](r)}r.group!==void 0&&(Y4[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(kSt.includes(r.badgePosition)===!1)return OR("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=Uh[r.position].value.indexOf(l);Uh[r.position].value[u]=Y4[r.meta.group]=r}}const a=()=>{RSt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?OR("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});$Fe(u,e,s)}}}function RSt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Uh[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete Y4[t.meta.group];const n=BFe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}Uh[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function $ye(t){return t!=null&&ISt.test(t)!==!0}function OR(t,e){return console.error(`Notify: ${t}`,e),!1}function ASt(){return vb({name:"QNotifications",devtools:{hide:!0},setup(){return()=>_t("div",{class:"q-notifications"},Dre.map(t=>_t(apt,{key:t,class:jFe[t],tag:"div",name:`q-notification--${t}`},()=>Uh[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(_t(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(_t(XT,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(_t(G5,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>_t("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[_t("div",a),_t("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(_t("div",o,i))}const r=[_t("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(_t("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(_t("div",{class:n.actionsClass},e.actions.map(i=>_t(n$,i)))),n.badge>1&&r.push(_t("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),_t("div",{ref:i=>{BFe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[_t("div",{class:n.wrapperClass},r)])}))))}})}const PSt={setDefaults(t){uw(t)===!0&&Object.assign(Q4,t)},registerType(t,e){uw(e)===!0&&(IA[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>$Fe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Dre.forEach(s=>{Uh[s]=Zd([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;jFe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=s$("q-notify");Opt(ASt(),e).mount(n)}}},NSt={config:{},plugins:{Notify:PSt}},xSt="/";async function DSt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:xSt})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}tSt(_Oe,NSt).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ho(()=>ur(()=>ns(()=>an(()=>import("./pinia-F5TpqEXP-CcuIgscM-CCJFe5VR-Cn00B-AD.js"),__vite__mapDeps([43,31])),Fs([43,31])),ri([43,31])),Vc([50,31]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");DSt(t,r)})});const OSt=Object.freeze(Object.defineProperty({__proto__:null,$:Pm,A:ow,B:Uj,C:Vj,D:FL,E:NC,F:Mj,G:Ff,H:Hj,I:xC,J:sL,K:db,L:t1,M:HO,N:RC,O:VL,get P(){return Zs},Q:ML,R:ah,S:G3,T:W3,U:n1,V:LL,W:Xp,X:lf,Y:jL,Z:Nh,_:ho,a:nL,get a$(){return jT},a0:K3,a1:fb,a2:NT,a3:pu,a4:s1,a5:qm,a6:Yd,a7:jO,a8:UO,a9:qO,aA:J3,aB:rv,aC:nB,aD:Gj,aE:BL,aF:$L,aG:tm,aH:vL,aI:lL,aJ:oL,aK:fL,aL:gL,aM:uL,aN:yL,aO:RS,aP:cL,aQ:hL,aR:c1,aS:wL,aT:mL,aU:pL,aV:hh,aW:Jd,aX:Pu,aY:uh,aZ:lh,a_:a1,aa:_m,ab:YO,ac:eB,ad:eT,ae:eL,af:Jk,ag:BO,ah:e1,ai:xT,aj:qj,ak:ZO,al:KL,am:tL,an:Yj,ao:Qj,ap:jm,aq:MC,ar:FC,as:yn,at:bL,au:Y3,av:QO,aw:JO,ax:zj,ay:XO,az:Bj,b:x_,b$:XT,b0:kL,b1:MS,b2:R3,b3:FS,get b4(){return BT},b5:M3,b6:x3,b7:k3,b8:sT,b9:O3,bA:L_,bB:tne,bC:$i,bD:xm,bE:An,bF:fv,bG:eM,bH:une,bI:yb,bJ:st,bK:hB,bL:nne,bM:cl,bN:gne,bO:vb,bP:eg,bQ:_t,bR:H5,bS:Pne,bT:kne,bU:Rne,bV:kre,bW:Y5,bX:x1,bY:D1,bZ:Sre,b_:X5,ba:D3,bb:L3,bc:A3,bd:QL,be:WL,bf:GL,bg:Aj,bh:PT,bi:XL,bj:$j,bk:Qd,bl:tB,bm:rB,bn:Wj,bo:zL,bp:Z3,bq:qL,br:Cj,bs:P_,bt:Dj,bu:Ri,bv:Qf,bw:MO,bx:Ij,by:kj,bz:Zd,c:UL,c$:NB,c0:W5,c1:Jg,c2:UC,c3:CB,c4:rM,c5:ua,c6:sM,c7:n$,c8:oM,c9:Qu,get cA(){return rk},cB:C5,cC:Ase,cD:BI,cE:Bse,cF:jse,cG:$se,cH:Hx,cI:zx,cJ:Nse,cK:Pse,cL:Nre,cM:t$,cN:zS,cO:Ire,cP:z5,cQ:q5,cR:Tre,cS:_1,cT:y1,cU:np,cV:Ere,cW:tM,cX:AB,cY:DB,cZ:Sne,c_:xB,ca:qC,cb:$S,cc:v1,cd:qB,ce:IB,cf:pB,cg:vne,ch:uB,ci:SB,cj:UB,ck:$5,cl:Np,cm:w1,cn:lw,co:xp,cp:aT,cq:b1,cr:Zy,get cs(){return mr},ct:B5,cu:Cre,cv:bre,cw:LB,get cx(){return ik},cy:zse,cz:qse,d:Kj,d0:Cne,d1:OB,d2:_B,d3:mB,d4:Pre,d5:Ane,d6:uw,d7:l5,d8:iu,d9:pne,dA:uM,dB:Wh,dC:Gh,dD:fh,dE:Op,dF:Kh,dG:t5,dH:s5,dI:c5,dJ:dM,dK:ZB,dL:QB,dM:Lx,dN:o5,dO:JB,dP:n5,dQ:e5,dR:KB,dS:YB,dT:a5,dU:$y,dV:K5,dW:Q5,dX:Kht,dY:QIt,da:G5,db:Ene,dc:RB,dd:JL,de:bne,df:SM,dg:bB,dh:vB,di:Rre,dj:MI,dk:wB,dl:nM,dm:e$,dn:MB,dp:xne,dq:Nne,dr:Tne,ds:BS,dt:Are,du:dne,dv:s$,dw:xre,dx:Ine,dy:J5,dz:Z5,e:X3,f:KO,g:mc,h:Xk,i:zO,j:VO,k:YL,l:bd,m:WO,n:$O,o:nt,p:pt,q:LO,r:m1,s:xj,t:AC,u:Zk,v:PC,w:qc,x:HL,y:sB,z:Lo},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ore(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Hs={},HI=[],cp=()=>{},LSt=()=>!1,r$=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Lre=t=>t.startsWith("onUpdate:"),$o=Object.assign,Mre=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MSt=Object.prototype.hasOwnProperty,_s=(t,e)=>MSt.call(t,e),Rt=Array.isArray,WI=t=>i$(t)==="[object Map]",zFe=t=>i$(t)==="[object Set]",Wt=t=>typeof t=="function",pi=t=>typeof t=="string",Tb=t=>typeof t=="symbol",kr=t=>t!==null&&typeof t=="object",HFe=t=>(kr(t)||Wt(t))&&Wt(t.then)&&Wt(t.catch),WFe=Object.prototype.toString,i$=t=>WFe.call(t),FSt=t=>i$(t).slice(8,-1),GFe=t=>i$(t)==="[object Object]",Fre=t=>pi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,LP=Ore(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),o$=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},VSt=/-(\w)/g,Oh=o$(t=>t.replace(VSt,(e,n)=>n?n.toUpperCase():"")),USt=/\B([A-Z])/g,zC=o$(t=>t.replace(USt,"-$1").toLowerCase()),a$=o$(t=>t.charAt(0).toUpperCase()+t.slice(1)),e8=o$(t=>t?`on${a$(t)}`:""),bv=(t,e)=>!Object.is(t,e),t8=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},PY=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},qSt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},jSt=t=>{const e=pi(t)?Number(t):NaN;return isNaN(e)?t:e};let zye;const c$=()=>zye||(zye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kM(t){if(Rt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=pi(s)?HSt(s):kM(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(pi(t)||kr(t))return t}const BSt=/;(?![^(]*\))/g,$St=/:([^]+)/,zSt=/\/\*[^]*?\*\//g;function HSt(t){const e={};return t.replace(zSt,"").split(BSt).forEach(n=>{if(n){const s=n.split($St);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function RM(t){let e="";if(pi(t))e=t;else if(Rt(t))for(let n=0;n<t.length;n++){const s=RM(t[n]);s&&(e+=s+" ")}else if(kr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const WSt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",GSt=Ore(WSt);function KFe(t){return!!t||t===""}const QFe=t=>!!(t&&t.__v_isRef===!0),Vre=t=>pi(t)?t:t==null?"":Rt(t)||kr(t)&&(t.toString===WFe||!Wt(t.toString))?QFe(t)?Vre(t.value):JSON.stringify(t,YFe,2):String(t),YFe=(t,e)=>QFe(e)?YFe(t,e.value):WI(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[n8(s,i)+" =>"]=r,n),{})}:zFe(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>n8(n))}:Tb(e)?n8(e):kr(e)&&!Rt(e)&&!GFe(e)?String(e):e,n8=(t,e="")=>{var n;return Tb(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ja;class XFe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ja,!e&&ja&&(this.index=(ja.scopes||(ja.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ja;try{return ja=this,e()}finally{ja=n}}}on(){++this._on===1&&(this.prevScope=ja,ja=this)}off(){this._on>0&&--this._on===0&&(ja=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function JFe(t){return new XFe(t)}function Ure(){return ja}function ZFe(t,e=!1){ja&&ja.cleanups.push(t)}let nr;const s8=new WeakSet;class e4e{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ja&&ja.active&&ja.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,s8.has(this)&&(s8.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||n4e(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hye(this),s4e(this);const e=nr,n=xd;nr=this,xd=!0;try{return this.fn()}finally{r4e(this),nr=e,xd=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bre(e);this.deps=this.depsTail=void 0,Hye(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?s8.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){NY(this)&&this.run()}get dirty(){return NY(this)}}let t4e=0,MP,FP;function n4e(t,e=!1){if(t.flags|=8,e){t.next=FP,FP=t;return}t.next=MP,MP=t}function qre(){t4e++}function jre(){if(--t4e>0)return;if(FP){let e=FP;for(FP=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;MP;){let e=MP;for(MP=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function s4e(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function r4e(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Bre(s),KSt(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function NY(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(i4e(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function i4e(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===eD)||(t.globalVersion=eD,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!NY(t))))return;t.flags|=2;const e=t.dep,n=nr,s=xd;nr=t,xd=!0;try{s4e(t);const r=t.fn(t._value);(e.version===0||bv(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{nr=n,xd=s,r4e(t),t.flags&=-3}}function Bre(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Bre(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function KSt(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let xd=!0;const o4e=[];function n_(){o4e.push(xd),xd=!1}function s_(){const t=o4e.pop();xd=t===void 0?!0:t}function Hye(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=nr;nr=void 0;try{e()}finally{nr=n}}}let eD=0;class QSt{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $re{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!nr||!xd||nr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==nr)n=this.activeLink=new QSt(nr,this),nr.deps?(n.prevDep=nr.depsTail,nr.depsTail.nextDep=n,nr.depsTail=n):nr.deps=nr.depsTail=n,a4e(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=nr.depsTail,n.nextDep=void 0,nr.depsTail.nextDep=n,nr.depsTail=n,nr.deps===n&&(nr.deps=s)}return n}trigger(e){this.version++,eD++,this.notify(e)}notify(e){qre();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jre()}}}function a4e(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)a4e(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const O6=new WeakMap,hT=Symbol(""),xY=Symbol(""),tD=Symbol("");function tc(t,e,n){if(xd&&nr){let s=O6.get(t);s||O6.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new $re),r.map=s,r.key=n),r.track()}}function rm(t,e,n,s,r,i){const o=O6.get(t);if(!o){eD++;return}const a=l=>{l&&l.trigger()};if(qre(),e==="clear")o.forEach(a);else{const l=Rt(t),u=l&&Fre(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===tD||!Tb(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(tD)),e){case"add":l?u&&a(o.get("length")):(a(o.get(hT)),WI(t)&&a(o.get(xY)));break;case"delete":l||(a(o.get(hT)),WI(t)&&a(o.get(xY)));break;case"set":WI(t)&&a(o.get(hT));break}}jre()}function YSt(t,e){const n=O6.get(t);return n&&n.get(e)}function y0(t){const e=zn(t);return e===t?e:(tc(e,"iterate",tD),Eh(t)?e:e.map(ga))}function l$(t){return tc(t=zn(t),"iterate",tD),t}const XSt={__proto__:null,[Symbol.iterator](){return r8(this,Symbol.iterator,ga)},concat(...t){return y0(this).concat(...t.map(e=>Rt(e)?y0(e):e))},entries(){return r8(this,"entries",t=>(t[1]=ga(t[1]),t))},every(t,e){return Mg(this,"every",t,e,void 0,arguments)},filter(t,e){return Mg(this,"filter",t,e,n=>n.map(ga),arguments)},find(t,e){return Mg(this,"find",t,e,ga,arguments)},findIndex(t,e){return Mg(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Mg(this,"findLast",t,e,ga,arguments)},findLastIndex(t,e){return Mg(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Mg(this,"forEach",t,e,void 0,arguments)},includes(...t){return i8(this,"includes",t)},indexOf(...t){return i8(this,"indexOf",t)},join(t){return y0(this).join(t)},lastIndexOf(...t){return i8(this,"lastIndexOf",t)},map(t,e){return Mg(this,"map",t,e,void 0,arguments)},pop(){return LR(this,"pop")},push(...t){return LR(this,"push",t)},reduce(t,...e){return Wye(this,"reduce",t,e)},reduceRight(t,...e){return Wye(this,"reduceRight",t,e)},shift(){return LR(this,"shift")},some(t,e){return Mg(this,"some",t,e,void 0,arguments)},splice(...t){return LR(this,"splice",t)},toReversed(){return y0(this).toReversed()},toSorted(t){return y0(this).toSorted(t)},toSpliced(...t){return y0(this).toSpliced(...t)},unshift(...t){return LR(this,"unshift",t)},values(){return r8(this,"values",ga)}};function r8(t,e,n){const s=l$(t),r=s[e]();return s!==t&&!Eh(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const JSt=Array.prototype;function Mg(t,e,n,s,r,i){const o=l$(t),a=o!==t&&!Eh(t),l=o[e];if(l!==JSt[e]){const d=l.apply(t,i);return a?ga(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,ga(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function Wye(t,e,n,s){const r=l$(t);let i=n;return r!==t&&(Eh(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,ga(a),l,t)}),r[e](i,...s)}function i8(t,e,n){const s=zn(t);tc(s,"iterate",tD);const r=s[e](...n);return(r===-1||r===!1)&&Wre(n[0])?(n[0]=zn(n[0]),s[e](...n)):r}function LR(t,e,n=[]){n_(),qre();const s=zn(t)[e].apply(t,n);return jre(),s_(),s}const ZSt=Ore("__proto__,__v_isRef,__isVue"),c4e=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tb));function ekt(t){Tb(t)||(t=String(t));const e=zn(this);return tc(e,"has",t),e.hasOwnProperty(t)}class l4e{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?ukt:f4e:i?d4e:h4e).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Rt(e);if(!r){let l;if(o&&(l=XSt[n]))return l;if(n==="hasOwnProperty")return ekt}const a=Reflect.get(e,n,Fo(e)?e:s);return(Tb(n)?c4e.has(n):ZSt(n))||(r||tc(e,"get",n),i)?a:Fo(a)?o&&Fre(n)?a:a.value:kr(a)?r?p4e(a):Cb(a):a}}class u4e extends l4e{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Ew(i);if(!Eh(s)&&!Ew(s)&&(i=zn(i),s=zn(s)),!Rt(e)&&Fo(i)&&!Fo(s))return l?!1:(i.value=s,!0)}const o=Rt(e)&&Fre(n)?Number(n)<e.length:_s(e,n),a=Reflect.set(e,n,s,Fo(e)?e:r);return e===zn(r)&&(o?bv(s,i)&&rm(e,"set",n,s):rm(e,"add",n,s)),a}deleteProperty(e,n){const s=_s(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&rm(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Tb(n)||!c4e.has(n))&&tc(e,"has",n),s}ownKeys(e){return tc(e,"iterate",Rt(e)?"length":hT),Reflect.ownKeys(e)}}class tkt extends l4e{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const nkt=new u4e,skt=new tkt,rkt=new u4e(!0),DY=t=>t,vF=t=>Reflect.getPrototypeOf(t);function ikt(t,e,n){return function(...s){const r=this.__v_raw,i=zn(r),o=WI(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?DY:e?L6:ga;return!e&&tc(i,"iterate",l?xY:hT),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function wF(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function okt(t,e){const n={get(s){const r=this.__v_raw,i=zn(r),o=zn(s);t||(bv(s,o)&&tc(i,"get",s),tc(i,"get",o));const{has:a}=vF(i),l=e?DY:t?L6:ga;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&tc(zn(s),"iterate",hT),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=zn(r),o=zn(s);return t||(bv(s,o)&&tc(i,"has",s),tc(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=zn(o),l=e?DY:t?L6:ga;return!t&&tc(a,"iterate",hT),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return $o(n,t?{add:wF("add"),set:wF("set"),delete:wF("delete"),clear:wF("clear")}:{add(s){!e&&!Eh(s)&&!Ew(s)&&(s=zn(s));const r=zn(this);return vF(r).has.call(r,s)||(r.add(s),rm(r,"add",s,s)),this},set(s,r){!e&&!Eh(r)&&!Ew(r)&&(r=zn(r));const i=zn(this),{has:o,get:a}=vF(i);let l=o.call(i,s);l||(s=zn(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?bv(r,u)&&rm(i,"set",s,r):rm(i,"add",s,r),this},delete(s){const r=zn(this),{has:i,get:o}=vF(r);let a=i.call(r,s);a||(s=zn(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&rm(r,"delete",s,void 0),l},clear(){const s=zn(this),r=s.size!==0,i=s.clear();return r&&rm(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ikt(s,t,e)}),n}function zre(t,e){const n=okt(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(_s(n,r)&&r in s?n:s,r,i)}const akt={get:zre(!1,!1)},ckt={get:zre(!1,!0)},lkt={get:zre(!0,!1)},h4e=new WeakMap,d4e=new WeakMap,f4e=new WeakMap,ukt=new WeakMap;function hkt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dkt(t){return t.__v_skip||!Object.isExtensible(t)?0:hkt(FSt(t))}function Cb(t){return Ew(t)?t:Hre(t,!1,nkt,akt,h4e)}function u$(t){return Hre(t,!1,rkt,ckt,d4e)}function p4e(t){return Hre(t,!0,skt,lkt,f4e)}function Hre(t,e,n,s,r){if(!kr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=dkt(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Ev(t){return Ew(t)?Ev(t.__v_raw):!!(t&&t.__v_isReactive)}function Ew(t){return!!(t&&t.__v_isReadonly)}function Eh(t){return!!(t&&t.__v_isShallow)}function Wre(t){return t?!!t.__v_raw:!1}function zn(t){const e=t&&t.__v_raw;return e?zn(e):t}function HC(t){return!_s(t,"__v_skip")&&Object.isExtensible(t)&&PY(t,"__v_skip",!0),t}const ga=t=>kr(t)?Cb(t):t,L6=t=>kr(t)?p4e(t):t;function Fo(t){return t?t.__v_isRef===!0:!1}function Vp(t){return g4e(t,!1)}function fkt(t){return g4e(t,!0)}function g4e(t,e){return Fo(t)?t:new pkt(t,e)}class pkt{constructor(e,n){this.dep=new $re,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:zn(e),this._value=n?e:ga(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Eh(e)||Ew(e);e=s?e:zn(e),bv(e,n)&&(this._rawValue=e,this._value=s?e:ga(e),this.dep.trigger())}}function Om(t){return Fo(t)?t.value:t}const gkt={get:(t,e,n)=>e==="__v_raw"?t:Om(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Fo(r)&&!Fo(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function m4e(t){return Ev(t)?t:new Proxy(t,gkt)}function _4e(t){const e=Rt(t)?new Array(t.length):{};for(const n in t)e[n]=_kt(t,n);return e}class mkt{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return YSt(zn(this._object),this._key)}}function _kt(t,e,n){const s=t[e];return Fo(s)?s:new mkt(t,e,n)}class ykt{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new $re(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=eD-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&nr!==this)return n4e(this,!0),!0}get value(){const e=this.dep.track();return i4e(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function vkt(t,e,n=!1){let s,r;return Wt(t)?s=t:(s=t.get,r=t.set),new ykt(s,r,n)}const bF={},M6=new WeakMap;let uE;function wkt(t,e=!1,n=uE){if(n){let s=M6.get(n);s||M6.set(n,s=[]),s.push(t)}}function bkt(t,e,n=Hs){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:Eh(q)||r===!1||r===0?im(q,1):im(q);let h,d,p,m,w=!1,R=!1;if(Fo(t)?(d=()=>t.value,w=Eh(t)):Ev(t)?(d=()=>u(t),w=!0):Rt(t)?(R=!0,w=t.some(q=>Ev(q)||Eh(q)),d=()=>t.map(q=>{if(Fo(q))return q.value;if(Ev(q))return u(q);if(Wt(q))return l?l(q,2):q()})):Wt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){n_();try{p()}finally{s_()}}const q=uE;uE=h;try{return l?l(t,3,[m]):t(m)}finally{uE=q}}:d=cp,e&&r){const q=d,W=r===!0?1/0:r;d=()=>im(q(),W)}const P=Ure(),O=()=>{h.stop(),P&&P.active&&Mre(P.effects,h)};if(i&&e){const q=e;e=(...W)=>{q(...W),O()}}let M=R?new Array(t.length).fill(bF):bF;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const W=h.run();if(r||w||(R?W.some((J,I)=>bv(J,M[I])):bv(W,M))){p&&p();const J=uE;uE=h;try{const I=[W,M===bF?void 0:R&&M[0]===bF?[]:M,m];M=W,l?l(e,3,I):e(...I)}finally{uE=J}}}else h.run()};return a&&a(V),h=new e4e(d),h.scheduler=o?()=>o(V,!1):V,m=q=>wkt(q,!1,h),p=h.onStop=()=>{const q=M6.get(h);if(q){if(l)l(q,4);else for(const W of q)W();M6.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function im(t,e=1/0,n){if(e<=0||!kr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Fo(t))im(t.value,e,n);else if(Rt(t))for(let s=0;s<t.length;s++)im(t[s],e,n);else if(zFe(t)||WI(t))t.forEach(s=>{im(s,e,n)});else if(GFe(t)){for(const s in t)im(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&im(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function AM(t,e,n,s){try{return s?t(...s):t()}catch(r){h$(r,e,n)}}function nf(t,e,n,s){if(Wt(t)){const r=AM(t,e,n,s);return r&&HFe(r)&&r.catch(i=>{h$(i,e,n)}),r}if(Rt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(nf(t[i],e,n,s));return r}}function h$(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Hs;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){n_(),AM(i,null,10,[t,l,u]),s_();return}}Ekt(t,n,r,s,o)}function Ekt(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Bc=[];let Rf=-1;const GI=[];let Sy=null,Y0=0;const y4e=Promise.resolve();let F6=null;function d$(t){const e=F6||y4e;return t?e.then(this?t.bind(this):t):e}function Tkt(t){let e=Rf+1,n=Bc.length;for(;e<n;){const s=e+n>>>1,r=Bc[s],i=nD(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Gre(t){if(!(t.flags&1)){const e=nD(t),n=Bc[Bc.length-1];!n||!(t.flags&2)&&e>=nD(n)?Bc.push(t):Bc.splice(Tkt(e),0,t),t.flags|=1,v4e()}}function v4e(){F6||(F6=y4e.then(b4e))}function Ckt(t){Rt(t)?GI.push(...t):Sy&&t.id===-1?Sy.splice(Y0+1,0,t):t.flags&1||(GI.push(t),t.flags|=1),v4e()}function Gye(t,e,n=Rf+1){for(;n<Bc.length;n++){const s=Bc[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Bc.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function w4e(t){if(GI.length){const e=[...new Set(GI)].sort((n,s)=>nD(n)-nD(s));if(GI.length=0,Sy){Sy.push(...e);return}for(Sy=e,Y0=0;Y0<Sy.length;Y0++){const n=Sy[Y0];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Sy=null,Y0=0}}const nD=t=>t.id==null?t.flags&2?-1:1/0:t.id;function b4e(t){try{for(Rf=0;Rf<Bc.length;Rf++){const e=Bc[Rf];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),AM(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Rf<Bc.length;Rf++){const e=Bc[Rf];e&&(e.flags&=-2)}Rf=-1,Bc.length=0,w4e(),F6=null,(Bc.length||GI.length)&&b4e()}}let qu=null,E4e=null;function V6(t){const e=qu;return qu=t,E4e=t&&t.type.__scopeId||null,e}function Kre(t,e=qu,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ave(-1);const i=V6(e);let o;try{o=t(...r)}finally{V6(i),s._d&&ave(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function f$(t,e){if(qu===null)return t;const n=b$(qu),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Hs]=e[r];i&&(Wt(i)&&(i={mounted:i,updated:i}),i.deep&&im(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Hb(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(n_(),nf(l,n,8,[t.el,a,t,e]),s_())}}const T4e=Symbol("_vte"),C4e=t=>t.__isTeleport,VP=t=>t&&(t.disabled||t.disabled===""),Kye=t=>t&&(t.defer||t.defer===""),Qye=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Yye=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,OY=(t,e)=>{const n=t&&t.to;return pi(n)?e?e(n):null:n},I4e={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:R,createComment:P}}=u,O=VP(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const W=e.el=R(""),J=e.anchor=R("");m(W,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,l))},v=()=>{const y=e.target=OY(e.props,w),T=k4e(y,e,R,m);y&&(o!=="svg"&&Qye(y)?o="svg":o!=="mathml"&&Yye(y)&&(o="mathml"),O||(I(y,T),X4(e,!1)))};O&&(I(n,J),X4(e,!0)),Kye(e.props)?(e.el.__isMounted=!1,Lc(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Kye(e.props)&&t.el.__isMounted===!1){Lc(()=>{I4e.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=VP(t.props),y=v?n:J,T=v?W:I;if(o==="svg"||Qye(J)?o="svg":(o==="mathml"||Yye(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),sie(t,e,!0)):l||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):EF(e,n,W,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=OY(e.props,w);S&&EF(e,S,null,u,0)}else v&&EF(e,J,I,u,1);X4(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!VP(p);for(let w=0;w<a.length;w++){const R=a[w];s(R,e,n,m,!!R.dynamicChildren)}}},move:EF,hydrate:Ikt};function EF(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||VP(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function Ikt(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=OY(e.props,l);if(p){const m=VP(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let R=w;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")e.targetStart=R;else if(R.data==="teleport anchor"){e.targetAnchor=R,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}R=o(R)}e.targetAnchor||k4e(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}X4(e,m)}return e.anchor&&o(e.anchor)}const S4e=I4e;function X4(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function k4e(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[T4e]=i,t&&(s(r,t),s(i,t)),i}const ky=Symbol("_leaveCb"),TF=Symbol("_enterCb");function R4e(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return PM(()=>{t.isMounted=!0}),NM(()=>{t.isUnmounting=!0}),t}const th=[Function,Array],A4e={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:th,onEnter:th,onAfterEnter:th,onEnterCancelled:th,onBeforeLeave:th,onLeave:th,onAfterLeave:th,onLeaveCancelled:th,onBeforeAppear:th,onAppear:th,onAfterAppear:th,onAppearCancelled:th},P4e=t=>{const e=t.subTree;return e.component?P4e(e.component):e},Skt={name:"BaseTransition",props:A4e,setup(t,{slots:e}){const n=q_(),s=R4e();return()=>{const r=e.default&&Qre(e.default(),!0);if(!r||!r.length)return;const i=N4e(r),o=zn(t),{mode:a}=o;if(s.isLeaving)return o8(i);const l=Xye(i);if(!l)return o8(i);let u=sD(l,o,s,n,d=>u=d);l.type!==Gc&&JT(l,u);let h=n.subTree&&Xye(n.subTree);if(h&&h.type!==Gc&&!EE(l,h)&&P4e(n).type!==Gc){let d=sD(h,o,s,n);if(JT(h,d),a==="out-in"&&l.type!==Gc)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},o8(i);a==="in-out"&&l.type!==Gc?d.delayLeave=(p,m,w)=>{const R=x4e(s,h);R[String(h.key)]=h,p[ky]=()=>{m(),p[ky]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function N4e(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Gc){e=n;break}}return e}const kkt=Skt;function x4e(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function sD(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),W=x4e(n,t),J=(y,T)=>{y&&nf(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),Rt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[ky]&&y[ky](!0);const S=W[q];S&&EE(t,S)&&S.el[ky]&&S.el[ky](),J(T,[y])},enter(y){let T=u,S=h,E=d;if(!n.isMounted)if(i)T=O||u,S=M||h,E=V||d;else return;let b=!1;const G=y[TF]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[TF]=void 0)};T?I(T,[y,G]):G()},leave(y,T){const S=String(t.key);if(y[TF]&&y[TF](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[ky]=G=>{E||(E=!0,T(),G?J(R,[y]):J(w,[y]),y[ky]=void 0,W[S]===t&&delete W[S])};W[S]=t,m?I(m,[y,b]):b()},clone(y){const T=sD(y,e,n,s,r);return r&&r(T),T}};return v}function o8(t){if(p$(t))return t=Tw(t),t.children=null,t}function Xye(t){if(!p$(t))return C4e(t.type)&&t.children?N4e(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Wt(n.default))return n.default()}}function JT(t,e){t.shapeFlag&6&&t.component?(t.transition=e,JT(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Qre(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ru?(o.patchFlag&128&&r++,s=s.concat(Qre(o.children,e,a))):(e||o.type!==Gc)&&s.push(a!=null?Tw(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function O1(t,e){return Wt(t)?$o({name:t.name},e,{setup:t}):t}function D4e(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function UP(t,e,n,s,r=!1){if(Rt(t)){t.forEach((w,R)=>UP(w,e&&(Rt(e)?e[R]:e),n,s,r));return}if(qP(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&UP(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?b$(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Hs?a.refs={}:a.refs,d=a.setupState,p=zn(d),m=d===Hs?()=>!1:w=>_s(p,w);if(u!=null&&u!==l&&(pi(u)?(h[u]=null,m(u)&&(d[u]=null)):Fo(u)&&(u.value=null)),Wt(l))AM(l,a,12,[o,h]);else{const w=pi(l),R=Fo(l);if(w||R){const P=()=>{if(t.f){const O=w?m(l)?d[l]:h[l]:l.value;r?Rt(O)&&Mre(O,i):Rt(O)?O.includes(i)||O.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):R&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Lc(P,n)):P()}}}c$().requestIdleCallback;c$().cancelIdleCallback;const qP=t=>!!t.type.__asyncLoader,p$=t=>t.type.__isKeepAlive;function Yre(t,e){O4e(t,"a",e)}function Xre(t,e){O4e(t,"da",e)}function O4e(t,e,n=dc){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(g$(e,s,n),n){let r=n.parent;for(;r&&r.parent;)p$(r.parent.vnode)&&Rkt(s,e,n,r),r=r.parent}}function Rkt(t,e,n,s){const r=g$(e,t,s,!0);xM(()=>{Mre(s[e],r)},n)}function g$(t,e,n=dc,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{n_();const a=DM(n),l=nf(e,n,t,o);return a(),s_(),l});return s?r.unshift(i):r.push(i),i}}const U_=t=>(e,n=dc)=>{(!iD||t==="sp")&&g$(t,(...s)=>e(...s),n)},Jre=U_("bm"),PM=U_("m"),Zre=U_("bu"),m$=U_("u"),NM=U_("bum"),xM=U_("um"),Akt=U_("sp"),Pkt=U_("rtg"),Nkt=U_("rtc");function xkt(t,e=dc){g$("ec",t,e)}const Dkt="components";function eie(t,e){return Lkt(Dkt,t,!0,e)||t}const Okt=Symbol.for("v-ndc");function Lkt(t,e,n=!0,s=!1){const r=qu||dc;if(r){const i=r.type;{const a=b1t(i,!1);if(a&&(a===e||a===Oh(e)||a===a$(Oh(e))))return i}const o=Jye(r[t]||i[t],e)||Jye(r.appContext[t],e);return!o&&s?i:o}}function Jye(t,e){return t&&(t[e]||t[Oh(e)]||t[a$(Oh(e))])}function L4e(t,e,n,s){let r;const i=n,o=Rt(t);if(o||pi(t)){const a=o&&Ev(t);let l=!1,u=!1;a&&(l=!Eh(t),u=Ew(t),t=l$(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?L6(ga(t[h])):ga(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(kr(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const LY=t=>t?nVe(t)?b$(t):LY(t.parent):null,jP=$o(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>LY(t.parent),$root:t=>LY(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>F4e(t),$forceUpdate:t=>t.f||(t.f=()=>{Gre(t.update)}),$nextTick:t=>t.n||(t.n=d$.bind(t.proxy)),$watch:t=>n1t.bind(t)}),a8=(t,e)=>t!==Hs&&!t.__isScriptSetup&&_s(t,e),Mkt={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(a8(s,e))return o[e]=1,s[e];if(r!==Hs&&_s(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&_s(u,e))return o[e]=3,i[e];if(n!==Hs&&_s(n,e))return o[e]=4,n[e];MY&&(o[e]=0)}}const h=jP[e];let d,p;if(h)return e==="$attrs"&&tc(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Hs&&_s(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,_s(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return a8(r,e)?(r[e]=n,!0):s!==Hs&&_s(s,e)?(s[e]=n,!0):_s(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Hs&&_s(t,o)||a8(e,o)||(a=i[0])&&_s(a,o)||_s(s,o)||_s(jP,o)||_s(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:_s(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zye(t){return Rt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let MY=!0;function Fkt(t){const e=F4e(t),n=t.proxy,s=t.ctx;MY=!1,e.beforeCreate&&eve(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:R,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:W,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:G}=e;if(u&&Vkt(u,s,null),o)for(const ae in o){const oe=o[ae];Wt(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);kr(ae)&&(t.data=Cb(ae))}if(MY=!0,i)for(const ae in i){const oe=i[ae],de=Wt(oe)?oe.bind(n,n):Wt(oe.get)?oe.get.bind(n,n):cp,ct=!Wt(oe)&&Wt(oe.set)?oe.set.bind(n):cp,Ke=rt({get:de,set:ct});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Qe=>Ke.value=Qe})}if(a)for(const ae in a)M4e(a[ae],s,n,ae);if(l){const ae=Wt(l)?l.call(n):l;Reflect.ownKeys(ae).forEach(oe=>{KI(oe,ae[oe])})}h&&eve(h,t,"c");function ne(ae,oe){Rt(oe)?oe.forEach(de=>ae(de.bind(n))):oe&&ae(oe.bind(n))}if(ne(Jre,d),ne(PM,p),ne(Zre,m),ne(m$,w),ne(Yre,R),ne(Xre,P),ne(xkt,v),ne(Nkt,J),ne(Pkt,I),ne(NM,M),ne(xM,q),ne(Akt,y),Rt(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:de=>n[oe]=de,enumerable:!0})})}else t.exposed||(t.exposed={});W&&t.render===cp&&(t.render=W),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&D4e(t)}function Vkt(t,e,n=cp){Rt(t)&&(t=FY(t));for(const s in t){const r=t[s];let i;kr(r)?"default"in r?i=_u(r.from||s,r.default,!0):i=_u(r.from||s):i=_u(r),Fo(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function eve(t,e,n){nf(Rt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function M4e(t,e,n,s){let r=s.includes(".")?Y4e(n,s):()=>n[s];if(pi(t)){const i=e[t];Wt(i)&&fT(r,i)}else if(Wt(t))fT(r,t.bind(n));else if(kr(t))if(Rt(t))t.forEach(i=>M4e(i,e,n,s));else{const i=Wt(t.handler)?t.handler.bind(n):e[t.handler];Wt(i)&&fT(r,i,t)}}function F4e(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>U6(l,u,o,!0)),U6(l,e,o)),kr(e)&&i.set(e,l),l}function U6(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&U6(t,i,n,!0),r&&r.forEach(o=>U6(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Ukt[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ukt={data:tve,props:nve,emits:nve,methods:SA,computed:SA,beforeCreate:Pc,created:Pc,beforeMount:Pc,mounted:Pc,beforeUpdate:Pc,updated:Pc,beforeDestroy:Pc,beforeUnmount:Pc,destroyed:Pc,unmounted:Pc,activated:Pc,deactivated:Pc,errorCaptured:Pc,serverPrefetch:Pc,components:SA,directives:SA,watch:jkt,provide:tve,inject:qkt};function tve(t,e){return e?t?function(){return $o(Wt(t)?t.call(this,this):t,Wt(e)?e.call(this,this):e)}:e:t}function qkt(t,e){return SA(FY(t),FY(e))}function FY(t){if(Rt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pc(t,e){return t?[...new Set([].concat(t,e))]:e}function SA(t,e){return t?$o(Object.create(null),t,e):e}function nve(t,e){return t?Rt(t)&&Rt(e)?[...new Set([...t,...e])]:$o(Object.create(null),Zye(t),Zye(e??{})):e}function jkt(t,e){if(!t)return e;if(!e)return t;const n=$o(Object.create(null),t);for(const s in e)n[s]=Pc(t[s],e[s]);return n}function V4e(){return{app:null,config:{isNativeTag:LSt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bkt=0;function $kt(t,e){return function(n,s=null){Wt(n)||(n=$o({},n)),s!=null&&!kr(s)&&(s=null);const r=V4e(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:Bkt++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:T1t,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&Wt(u.install)?(i.add(u),u.install(l,...h)):Wt(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||Ea(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,b$(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(nf(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=dT;dT=l;try{return u()}finally{dT=h}}};return l}}let dT=null;function KI(t,e){if(dc){let n=dc.provides;const s=dc.parent&&dc.parent.provides;s===n&&(n=dc.provides=Object.create(s)),n[t]=e}}function _u(t,e,n=!1){const s=q_();if(s||dT){let r=dT?dT._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Wt(e)?e.call(s&&s.proxy):e}}function U4e(){return!!(q_()||dT)}const q4e={},j4e=()=>Object.create(q4e),B4e=t=>Object.getPrototypeOf(t)===q4e;function zkt(t,e,n,s=!1){const r={},i=j4e();t.propsDefaults=Object.create(null),$4e(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:u$(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Hkt(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=zn(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(_$(t.emitsOptions,p))continue;const m=e[p];if(l)if(_s(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Oh(p);r[w]=VY(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{$4e(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!_s(e,d)&&((h=zC(d))===d||!_s(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=VY(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!_s(e,d))&&(delete i[d],u=!0)}u&&rm(t.attrs,"set","")}function $4e(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(LP(l))continue;const u=e[l];let h;r&&_s(r,h=Oh(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:_$(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=zn(n),u=a||Hs;for(let h=0;h<i.length;h++){const d=i[h];n[d]=VY(r,l,d,u[d],t,!_s(u,d))}}return o}function VY(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=_s(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Wt(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=DM(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===zC(n))&&(s=!0))}return s}const Wkt=new WeakMap;function z4e(t,e,n=!1){const s=n?Wkt:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Wt(t)){const h=d=>{l=!0;const[p,m]=z4e(d,e,!0);$o(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return kr(t)&&s.set(t,HI),HI;if(Rt(i))for(let h=0;h<i.length;h++){const d=Oh(i[h]);sve(d)&&(o[d]=Hs)}else if(i)for(const h in i){const d=Oh(h);if(sve(d)){const p=i[h],m=o[d]=Rt(p)||Wt(p)?{type:p}:$o({},p),w=m.type;let R=!1,P=!0;if(Rt(w))for(let O=0;O<w.length;++O){const M=w[O],V=Wt(M)&&M.name;if(V==="Boolean"){R=!0;break}else V==="String"&&(P=!1)}else R=Wt(w)&&w.name==="Boolean";m[0]=R,m[1]=P,(R||_s(m,"default"))&&a.push(d)}}const u=[o,a];return kr(t)&&s.set(t,u),u}function sve(t){return t[0]!=="$"&&!LP(t)}const tie=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",nie=t=>Rt(t)?t.map(Uf):[Uf(t)],Gkt=(t,e,n)=>{if(e._n)return e;const s=Kre((...r)=>nie(e(...r)),n);return s._c=!1,s},H4e=(t,e,n)=>{const s=t._ctx;for(const r in t){if(tie(r))continue;const i=t[r];if(Wt(i))e[r]=Gkt(r,i,s);else if(i!=null){const o=nie(i);e[r]=()=>o}}},W4e=(t,e)=>{const n=nie(e);t.slots.default=()=>n},G4e=(t,e,n)=>{for(const s in e)(n||!tie(s))&&(t[s]=e[s])},Kkt=(t,e,n)=>{const s=t.slots=j4e();if(t.vnode.shapeFlag&32){const r=e.__;r&&PY(s,"__",r,!0);const i=e._;i?(G4e(s,e,n),n&&PY(s,"_",i,!0)):H4e(e,s)}else e&&W4e(t,e)},Qkt=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Hs;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:G4e(r,e,n):(i=!e.$stable,H4e(e,r)),o=e}else e&&(W4e(t,e),o={default:1});if(i)for(const a in r)!tie(a)&&o[a]==null&&delete r[a]},Lc=l1t;function Ykt(t){return Xkt(t)}function Xkt(t,e){const n=c$();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=cp,insertStaticContent:w}=t,R=(k,C,A,x=null,L=null,U=null,j=void 0,H=null,$=!!C.dynamicChildren)=>{if(k===C)return;k&&!EE(k,C)&&(x=F(k),ge(k,L,U,!0),k=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Y,shapeFlag:X}=C;switch(B){case y$:P(k,C,A,x);break;case Gc:O(k,C,A,x);break;case l8:k==null&&M(C,A,x,j);break;case Ru:E(k,C,A,x,L,U,j,H,$);break;default:X&1?W(k,C,A,x,L,U,j,H,$):X&6?b(k,C,A,x,L,U,j,H,$):(X&64||X&128)&&B.process(k,C,A,x,L,U,j,H,$,ee)}Y!=null&&L?UP(Y,k&&k.ref,U,C||k,!C):Y==null&&k&&k.ref!=null&&UP(k.ref,null,U,k,!0)},P=(k,C,A,x)=>{if(k==null)s(C.el=a(C.children),A,x);else{const L=C.el=k.el;C.children!==k.children&&u(L,C.children)}},O=(k,C,A,x)=>{k==null?s(C.el=l(C.children||""),A,x):C.el=k.el},M=(k,C,A,x)=>{[k.el,k.anchor]=w(k.children,C,A,x,k.el,k.anchor)},V=({el:k,anchor:C},A,x)=>{let L;for(;k&&k!==C;)L=p(k),s(k,A,x),k=L;s(C,A,x)},q=({el:k,anchor:C})=>{let A;for(;k&&k!==C;)A=p(k),r(k),k=A;r(C)},W=(k,C,A,x,L,U,j,H,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),k==null?J(C,A,x,L,U,j,H,$):y(k,C,L,U,j,H,$)},J=(k,C,A,x,L,U,j,H)=>{let $,B;const{props:Y,shapeFlag:X,transition:Z,dirs:te}=k;if($=k.el=o(k.type,U,Y&&Y.is,Y),X&8?h($,k.children):X&16&&v(k.children,$,null,x,L,c8(k,U),j,H),te&&Hb(k,null,x,"created"),I($,k,k.scopeId,j,x),Y){for(const re in Y)re!=="value"&&!LP(re)&&i($,re,null,Y[re],U,x);"value"in Y&&i($,"value",null,Y.value,U),(B=Y.onVnodeBeforeMount)&&pf(B,x,k)}te&&Hb(k,null,x,"beforeMount");const ie=Jkt(L,Z);ie&&Z.beforeEnter($),s($,C,A),((B=Y&&Y.onVnodeMounted)||ie||te)&&Lc(()=>{B&&pf(B,x,k),ie&&Z.enter($),te&&Hb(k,null,x,"mounted")},L)},I=(k,C,A,x,L)=>{if(A&&m(k,A),x)for(let U=0;U<x.length;U++)m(k,x[U]);if(L){let U=L.subTree;if(C===U||J4e(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(k,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(k,C,A,x,L,U,j,H,$=0)=>{for(let B=$;B<k.length;B++){const Y=k[B]=H?Ry(k[B]):Uf(k[B]);R(null,Y,C,A,x,L,U,j,H)}},y=(k,C,A,x,L,U,j)=>{const H=C.el=k.el;let{patchFlag:$,dynamicChildren:B,dirs:Y}=C;$|=k.patchFlag&16;const X=k.props||Hs,Z=C.props||Hs;let te;if(A&&Wb(A,!1),(te=Z.onVnodeBeforeUpdate)&&pf(te,A,C,k),Y&&Hb(C,k,A,"beforeUpdate"),A&&Wb(A,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(H,""),B?T(k.dynamicChildren,B,H,A,x,c8(C,L),U):j||de(k,C,H,null,A,x,c8(C,L),U,!1),$>0){if($&16)S(H,X,Z,A,L);else if($&2&&X.class!==Z.class&&i(H,"class",null,Z.class,L),$&4&&i(H,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],fe=X[se],Se=Z[se];(Se!==fe||se==="value")&&i(H,se,fe,Se,L,A)}}$&1&&k.children!==C.children&&h(H,C.children)}else!j&&B==null&&S(H,X,Z,A,L);((te=Z.onVnodeUpdated)||Y)&&Lc(()=>{te&&pf(te,A,C,k),Y&&Hb(C,k,A,"updated")},x)},T=(k,C,A,x,L,U,j)=>{for(let H=0;H<C.length;H++){const $=k[H],B=C[H],Y=$.el&&($.type===Ru||!EE($,B)||$.shapeFlag&198)?d($.el):A;R($,B,Y,null,x,L,U,j,!0)}},S=(k,C,A,x,L)=>{if(C!==A){if(C!==Hs)for(const U in C)!LP(U)&&!(U in A)&&i(k,U,C[U],null,L,x);for(const U in A){if(LP(U))continue;const j=A[U],H=C[U];j!==H&&U!=="value"&&i(k,U,H,j,L,x)}"value"in A&&i(k,"value",C.value,A.value,L)}},E=(k,C,A,x,L,U,j,H,$)=>{const B=C.el=k?k.el:a(""),Y=C.anchor=k?k.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(H=H?H.concat(te):te),k==null?(s(B,A,x),s(Y,A,x),v(C.children||[],A,Y,L,U,j,H,$)):X>0&&X&64&&Z&&k.dynamicChildren?(T(k.dynamicChildren,Z,A,L,U,j,H),(C.key!=null||L&&C===L.subTree)&&sie(k,C,!0)):de(k,C,A,Y,L,U,j,H,$)},b=(k,C,A,x,L,U,j,H,$)=>{C.slotScopeIds=H,k==null?C.shapeFlag&512?L.ctx.activate(C,A,x,j,$):G(C,A,x,L,U,j,$):ne(k,C,$)},G=(k,C,A,x,L,U,j)=>{const H=k.component=m1t(k,x,L);if(p$(k)&&(H.ctx.renderer=ee),_1t(H,!1,j),H.asyncDep){if(L&&L.registerDep(H,ae,j),!k.el){const $=H.subTree=Ea(Gc);O(null,$,C,A),k.placeholder=$.el}}else ae(H,k,C,A,L,U,j)},ne=(k,C,A)=>{const x=C.component=k.component;if(a1t(k,C,A))if(x.asyncDep&&!x.asyncResolved){oe(x,C,A);return}else x.next=C,x.update();else C.el=k.el,x.vnode=C},ae=(k,C,A,x,L,U,j)=>{const H=()=>{if(k.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=k;{const We=K4e(k);if(We){X&&(X.el=re.el,oe(k,X,j)),We.asyncDep.then(()=>{k.isUnmounted||H()});return}}let se=X,fe;Wb(k,!1),X?(X.el=re.el,oe(k,X,j)):X=re,Z&&t8(Z),(fe=X.props&&X.props.onVnodeBeforeUpdate)&&pf(fe,ie,X,re),Wb(k,!0);const Se=ive(k),Ve=k.subTree;k.subTree=Se,R(Ve,Se,d(Ve.el),F(Ve),k,L,U),X.el=Se.el,se===null&&c1t(k,Se.el),te&&Lc(te,L),(fe=X.props&&X.props.onVnodeUpdated)&&Lc(()=>pf(fe,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:fe,type:Se}=k,Ve=qP(C);Wb(k,!1),ie&&t8(ie),!Ve&&(X=te&&te.onVnodeBeforeMount)&&pf(X,se,C),Wb(k,!0);{fe.ce&&fe.ce._def.shadowRoot!==!1&&fe.ce._injectChildStyle(Se);const We=k.subTree=ive(k);R(null,We,A,x,k,L,U),C.el=We.el}if(re&&Lc(re,L),!Ve&&(X=te&&te.onVnodeMounted)){const We=C;Lc(()=>pf(X,se,We),L)}(C.shapeFlag&256||se&&qP(se.vnode)&&se.vnode.shapeFlag&256)&&k.a&&Lc(k.a,L),k.isMounted=!0,C=A=x=null}};k.scope.on();const $=k.effect=new e4e(H);k.scope.off();const B=k.update=$.run.bind($),Y=k.job=$.runIfDirty.bind($);Y.i=k,Y.id=k.uid,$.scheduler=()=>Gre(Y),Wb(k,!0),B()},oe=(k,C,A)=>{C.component=k;const x=k.vnode.props;k.vnode=C,k.next=null,Hkt(k,C.props,x,A),Qkt(k,C.children,A),n_(),Gye(k),s_()},de=(k,C,A,x,L,U,j,H,$=!1)=>{const B=k&&k.children,Y=k?k.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){Ke(B,X,A,x,L,U,j,H,$);return}else if(Z&256){ct(B,X,A,x,L,U,j,H,$);return}}te&8?(Y&16&&Fe(B,L,U),X!==B&&h(A,X)):Y&16?te&16?Ke(B,X,A,x,L,U,j,H,$):Fe(B,L,U,!0):(Y&8&&h(A,""),te&16&&v(X,A,x,L,U,j,H,$))},ct=(k,C,A,x,L,U,j,H,$)=>{k=k||HI,C=C||HI;const B=k.length,Y=C.length,X=Math.min(B,Y);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?Ry(C[Z]):Uf(C[Z]);R(k[Z],te,A,null,L,U,j,H,$)}B>Y?Fe(k,L,U,!0,!1,X):v(C,A,x,L,U,j,H,$,X)},Ke=(k,C,A,x,L,U,j,H,$)=>{let B=0;const Y=C.length;let X=k.length-1,Z=Y-1;for(;B<=X&&B<=Z;){const te=k[B],ie=C[B]=$?Ry(C[B]):Uf(C[B]);if(EE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;B++}for(;B<=X&&B<=Z;){const te=k[X],ie=C[Z]=$?Ry(C[Z]):Uf(C[Z]);if(EE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Y?C[te].el:x;for(;B<=Z;)R(null,C[B]=$?Ry(C[B]):Uf(C[B]),A,ie,L,U,j,H,$),B++}}else if(B>Z)for(;B<=X;)ge(k[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const Ue=C[B]=$?Ry(C[B]):Uf(C[B]);Ue.key!=null&&re.set(Ue.key,B)}let se,fe=0;const Se=Z-ie+1;let Ve=!1,We=0;const Ge=new Array(Se);for(B=0;B<Se;B++)Ge[B]=0;for(B=te;B<=X;B++){const Ue=k[B];if(fe>=Se){ge(Ue,L,U,!0);continue}let Le;if(Ue.key!=null)Le=re.get(Ue.key);else for(se=ie;se<=Z;se++)if(Ge[se-ie]===0&&EE(Ue,C[se])){Le=se;break}Le===void 0?ge(Ue,L,U,!0):(Ge[Le-ie]=B+1,Le>=We?We=Le:Ve=!0,R(Ue,C[Le],A,null,L,U,j,H,$),fe++)}const ss=Ve?Zkt(Ge):HI;for(se=ss.length-1,B=Se-1;B>=0;B--){const Ue=ie+B,Le=C[Ue],rs=C[Ue+1],Pr=Ue+1<Y?rs.el||rs.placeholder:x;Ge[B]===0?R(null,Le,A,Pr,L,U,j,H,$):Ve&&(se<0||B!==ss[se]?Qe(Le,A,Pr,2):se--)}}},Qe=(k,C,A,x,L=null)=>{const{el:U,type:j,transition:H,children:$,shapeFlag:B}=k;if(B&6){Qe(k.component.subTree,C,A,x);return}if(B&128){k.suspense.move(C,A,x);return}if(B&64){j.move(k,C,A,ee);return}if(j===Ru){s(U,C,A);for(let Y=0;Y<$.length;Y++)Qe($[Y],C,A,x);s(k.anchor,C,A);return}if(j===l8){V(k,C,A);return}if(x!==2&&B&1&&H)if(x===0)H.beforeEnter(U),s(U,C,A),Lc(()=>H.enter(U),L);else{const{leave:Y,delayLeave:X,afterLeave:Z}=H,te=()=>{k.ctx.isUnmounted?r(U):s(U,C,A)},ie=()=>{Y(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,A)},ge=(k,C,A,x=!1,L=!1)=>{const{type:U,props:j,ref:H,children:$,dynamicChildren:B,shapeFlag:Y,patchFlag:X,dirs:Z,cacheIndex:te}=k;if(X===-2&&(L=!1),H!=null&&(n_(),UP(H,null,A,k,!0),s_()),te!=null&&(C.renderCache[te]=void 0),Y&256){C.ctx.deactivate(k);return}const ie=Y&1&&Z,re=!qP(k);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&pf(se,C,k),Y&6)it(k.component,A,x);else{if(Y&128){k.suspense.unmount(A,x);return}ie&&Hb(k,null,C,"beforeUnmount"),Y&64?k.type.remove(k,C,A,ee,x):B&&!B.hasOnce&&(U!==Ru||X>0&&X&64)?Fe(B,C,A,!1,!0):(U===Ru&&X&384||!L&&Y&16)&&Fe($,C,A),x&&he(k)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&Lc(()=>{se&&pf(se,C,k),ie&&Hb(k,null,C,"unmounted")},A)},he=k=>{const{type:C,el:A,anchor:x,transition:L}=k;if(C===Ru){qt(A,x);return}if(C===l8){q(k);return}const U=()=>{r(A),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(k.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:H}=L,$=()=>j(A,U);H?H(k.el,U,$):$()}else U()},qt=(k,C)=>{let A;for(;k!==C;)A=p(k),r(k),k=A;r(C)},it=(k,C,A)=>{const{bum:x,scope:L,job:U,subTree:j,um:H,m:$,a:B,parent:Y,slots:{__:X}}=k;rve($),rve(B),x&&t8(x),Y&&Rt(X)&&X.forEach(Z=>{Y.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ge(j,k,C,A)),H&&Lc(H,C),Lc(()=>{k.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Fe=(k,C,A,x=!1,L=!1,U=0)=>{for(let j=U;j<k.length;j++)ge(k[j],C,A,x,L)},F=k=>{if(k.shapeFlag&6)return F(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const C=p(k.anchor||k.el),A=C&&C[T4e];return A?p(A):C};let Q=!1;const K=(k,C,A)=>{k==null?C._vnode&&ge(C._vnode,null,null,!0):R(C._vnode||null,k,C,null,null,null,A),C._vnode=k,Q||(Q=!0,Gye(),w4e(),Q=!1)},ee={p:R,um:ge,m:Qe,r:he,mt:G,mc:v,pc:de,pbc:T,n:F,o:t};return{render:K,hydrate:void 0,createApp:$kt(K)}}function c8({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Wb({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Jkt(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function sie(t,e,n=!1){const s=t.children,r=e.children;if(Rt(s)&&Rt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ry(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&sie(o,a)),a.type===y$&&(a.el=o.el),a.type===Gc&&!a.el&&(a.el=o.el)}}function Zkt(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function K4e(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:K4e(e)}function rve(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const e1t=Symbol.for("v-scx"),t1t=()=>_u(e1t);function fT(t,e,n){return Q4e(t,e,n)}function Q4e(t,e,n=Hs){const{immediate:s,deep:r,flush:i,once:o}=n,a=$o({},n),l=e&&s||!e&&i!=="post";let u;if(iD){if(i==="sync"){const m=t1t();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=cp,m.resume=cp,m.pause=cp,m}}const h=dc;a.call=(m,w,R)=>nf(m,h,w,R);let d=!1;i==="post"?a.scheduler=m=>{Lc(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():Gre(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=bkt(t,e,a);return iD&&(u?u.push(p):l&&p()),p}function n1t(t,e,n){const s=this.proxy,r=pi(t)?t.includes(".")?Y4e(s,t):()=>s[t]:t.bind(s,s);let i;Wt(e)?i=e:(i=e.handler,n=e);const o=DM(this),a=Q4e(r,i.bind(s),n);return o(),a}function Y4e(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const s1t=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Oh(e)}Modifiers`]||t[`${zC(e)}Modifiers`];function r1t(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Hs;let r=n;const i=e.startsWith("update:"),o=i&&s1t(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>pi(h)?h.trim():h)),o.number&&(r=n.map(qSt)));let a,l=s[a=e8(e)]||s[a=e8(Oh(e))];!l&&i&&(l=s[a=e8(zC(e))]),l&&nf(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,nf(u,t,6,r)}}function X4e(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Wt(t)){const l=u=>{const h=X4e(u,e,!0);h&&(a=!0,$o(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(kr(t)&&s.set(t,null),null):(Rt(i)?i.forEach(l=>o[l]=null):$o(o,i),kr(t)&&s.set(t,o),o)}function _$(t,e){return!t||!r$(e)?!1:(e=e.slice(2).replace(/Once$/,""),_s(t,e[0].toLowerCase()+e.slice(1))||_s(t,zC(e))||_s(t,e))}function ive(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:R}=t,P=V6(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,W=q;O=Uf(u.call(W,q,h,d,m,p,w)),M=a}else{const q=e;O=Uf(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:i1t(a)}}catch(q){BP.length=0,h$(q,t,1),O=Ea(Gc)}let V=O;if(M&&R!==!1){const q=Object.keys(M),{shapeFlag:W}=V;q.length&&W&7&&(i&&q.some(Lre)&&(M=o1t(M,i)),V=Tw(V,M,!1,!0))}return n.dirs&&(V=Tw(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&JT(V,n.transition),O=V,V6(P),O}const i1t=t=>{let e;for(const n in t)(n==="class"||n==="style"||r$(n))&&((e||(e={}))[n]=t[n]);return e},o1t=(t,e)=>{const n={};for(const s in t)(!Lre(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function a1t(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?ove(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!_$(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?ove(s,o,u):!0:!!o;return!1}function ove(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!_$(n,i))return!0}return!1}function c1t({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const J4e=t=>t.__isSuspense;function l1t(t,e){e&&e.pendingBranch?Rt(t)?e.effects.push(...t):e.effects.push(t):Ckt(t)}const Ru=Symbol.for("v-fgt"),y$=Symbol.for("v-txt"),Gc=Symbol.for("v-cmt"),l8=Symbol.for("v-stc"),BP=[];let ju=null;function v$(t=!1){BP.push(ju=t?null:[])}function u1t(){BP.pop(),ju=BP[BP.length-1]||null}let rD=1;function ave(t,e=!1){rD+=t,t<0&&ju&&e&&(ju.hasOnce=!0)}function Z4e(t){return t.dynamicChildren=rD>0?ju||HI:null,u1t(),rD>0&&ju&&ju.push(t),t}function rie(t,e,n,s,r,i){return Z4e(w$(t,e,n,s,r,i,!0))}function iie(t,e,n,s,r){return Z4e(Ea(t,e,n,s,r,!0))}function q6(t){return t?t.__v_isVNode===!0:!1}function EE(t,e){return t.type===e.type&&t.key===e.key}const eVe=({key:t})=>t??null,J4=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?pi(t)||Fo(t)||Wt(t)?{i:qu,r:t,k:e,f:!!n}:t:null);function w$(t,e=null,n=null,s=0,r=null,i=t===Ru?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&eVe(e),ref:e&&J4(e),scopeId:E4e,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:qu};return a?(aie(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=pi(n)?8:16),rD>0&&!o&&ju&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ju.push(l),l}const Ea=h1t;function h1t(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Okt)&&(t=Gc),q6(t)){const a=Tw(t,e,!0);return n&&aie(a,n),rD>0&&!i&&ju&&(a.shapeFlag&6?ju[ju.indexOf(t)]=a:ju.push(a)),a.patchFlag=-2,a}if(E1t(t)&&(t=t.__vccOpts),e){e=d1t(e);let{class:a,style:l}=e;a&&!pi(a)&&(e.class=RM(a)),kr(l)&&(Wre(l)&&!Rt(l)&&(l=$o({},l)),e.style=kM(l))}const o=pi(t)?1:J4e(t)?128:C4e(t)?64:kr(t)?4:Wt(t)?2:0;return w$(t,e,n,s,r,o,i,!0)}function d1t(t){return t?Wre(t)||B4e(t)?$o({},t):t:null}function Tw(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?f1t(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&eVe(u),ref:e&&e.ref?n&&i?Rt(i)?i.concat(J4(e)):[i,J4(e)]:J4(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ru?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Tw(t.ssContent),ssFallback:t.ssFallback&&Tw(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&JT(h,l.clone(h)),h}function oie(t=" ",e=0){return Ea(y$,null,t,e)}function tVe(t="",e=!1){return e?(v$(),iie(Gc,null,t)):Ea(Gc,null,t)}function Uf(t){return t==null||typeof t=="boolean"?Ea(Gc):Rt(t)?Ea(Ru,null,t.slice()):q6(t)?Ry(t):Ea(y$,null,String(t))}function Ry(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Tw(t)}function aie(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Rt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),aie(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!B4e(e)?e._ctx=qu:r===3&&qu&&(qu.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Wt(e)?(e={default:e,_ctx:qu},n=32):(e=String(e),s&64?(n=16,e=[oie(e)]):n=8);t.children=e,t.shapeFlag|=n}function f1t(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=RM([e.class,s.class]));else if(r==="style")e.style=kM([e.style,s.style]);else if(r$(r)){const i=e[r],o=s[r];o&&i!==o&&!(Rt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function pf(t,e,n,s=null){nf(t,e,7,[n,s])}const p1t=V4e();let g1t=0;function m1t(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||p1t,i={uid:g1t++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new XFe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:z4e(s,r),emitsOptions:X4e(s,r),emit:null,emitted:null,propsDefaults:Hs,inheritAttrs:s.inheritAttrs,ctx:Hs,data:Hs,props:Hs,attrs:Hs,slots:Hs,refs:Hs,setupState:Hs,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=r1t.bind(null,i),t.ce&&t.ce(i),i}let dc=null;const q_=()=>dc||qu;let j6,UY;{const t=c$(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};j6=e("__VUE_INSTANCE_SETTERS__",n=>dc=n),UY=e("__VUE_SSR_SETTERS__",n=>iD=n)}const DM=t=>{const e=dc;return j6(t),t.scope.on(),()=>{t.scope.off(),j6(e)}},cve=()=>{dc&&dc.scope.off(),j6(null)};function nVe(t){return t.vnode.shapeFlag&4}let iD=!1;function _1t(t,e=!1,n=!1){e&&UY(e);const{props:s,children:r}=t.vnode,i=nVe(t);zkt(t,s,i,e),Kkt(t,r,n||e);const o=i?y1t(t,e):void 0;return e&&UY(!1),o}function y1t(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Mkt);const{setup:s}=n;if(s){n_();const r=t.setupContext=s.length>1?w1t(t):null,i=DM(t),o=AM(s,t,0,[t.props,r]),a=HFe(o);if(s_(),i(),(a||t.sp)&&!qP(t)&&D4e(t),a){if(o.then(cve,cve),e)return o.then(l=>{lve(t,l)}).catch(l=>{h$(l,t,0)});t.asyncDep=o}else lve(t,o)}else sVe(t)}function lve(t,e,n){Wt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:kr(e)&&(t.setupState=m4e(e)),sVe(t)}function sVe(t,e,n){const s=t.type;t.render||(t.render=s.render||cp);{const r=DM(t);n_();try{Fkt(t)}finally{s_(),r()}}}const v1t={get(t,e){return tc(t,"get",""),t[e]}};function w1t(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,v1t),slots:t.slots,emit:t.emit,expose:e}}function b$(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(m4e(HC(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in jP)return jP[n](t)},has(e,n){return n in e||n in jP}})):t.proxy}function b1t(t,e=!0){return Wt(t)?t.displayName||t.name:t.name||e&&t.__name}function E1t(t){return Wt(t)&&"__vccOpts"in t}const rt=(t,e)=>vkt(t,e,iD);function Nt(t,e,n){const s=arguments.length;return s===2?kr(e)&&!Rt(e)?q6(e)?Ea(t,null,[e]):Ea(t,e):Ea(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&q6(n)&&(n=[n]),Ea(t,e,n))}const T1t="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qY;const uve=typeof window<"u"&&window.trustedTypes;if(uve)try{qY=uve.createPolicy("vue",{createHTML:t=>t})}catch{}const rVe=qY?t=>qY.createHTML(t):t=>t,C1t="http://www.w3.org/2000/svg",I1t="http://www.w3.org/1998/Math/MathML",Qg=typeof document<"u"?document:null,hve=Qg&&Qg.createElement("template"),S1t={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Qg.createElementNS(C1t,t):e==="mathml"?Qg.createElementNS(I1t,t):n?Qg.createElement(t,{is:n}):Qg.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Qg.createTextNode(t),createComment:t=>Qg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{hve.innerHTML=rVe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=hve.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ty="transition",MR="animation",ok=Symbol("_vtc"),iVe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oVe=$o({},A4e,iVe),k1t=t=>(t.displayName="Transition",t.props=oVe,t),cie=k1t((t,{slots:e})=>Nt(kkt,aVe(t),e)),Gb=(t,e=[])=>{Rt(t)?t.forEach(n=>n(...e)):t&&t(...e)},dve=t=>t?Rt(t)?t.some(e=>e.length>1):t.length>1:!1;function aVe(t){const e={};for(const E in t)E in iVe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=R1t(r),R=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:W,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,G,ne)=>{E._enterCancelled=ne,dy(E,b?h:a),dy(E,b?u:o),G&&G()},T=(E,b)=>{E._isLeaving=!1,dy(E,d),dy(E,m),dy(E,p),b&&b()},S=E=>(b,G)=>{const ne=E?I:M,ae=()=>y(b,E,G);Gb(ne,[b,ae]),fve(()=>{dy(b,E?l:i),Ef(b,E?h:a),dve(ne)||pve(b,s,R,ae)})};return $o(e,{onBeforeEnter(E){Gb(O,[E]),Ef(E,i),Ef(E,o)},onBeforeAppear(E){Gb(J,[E]),Ef(E,l),Ef(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const G=()=>T(E,b);Ef(E,d),E._enterCancelled?(Ef(E,p),jY()):(jY(),Ef(E,p)),fve(()=>{E._isLeaving&&(dy(E,d),Ef(E,m),dve(q)||pve(E,s,P,G))}),Gb(q,[E,G])},onEnterCancelled(E){y(E,!1,void 0,!0),Gb(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Gb(v,[E])},onLeaveCancelled(E){T(E),Gb(W,[E])}})}function R1t(t){if(t==null)return null;if(kr(t))return[u8(t.enter),u8(t.leave)];{const e=u8(t);return[e,e]}}function u8(t){return jSt(t)}function Ef(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ok]||(t[ok]=new Set)).add(e)}function dy(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[ok];n&&(n.delete(e),n.size||(t[ok]=void 0))}function fve(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let A1t=0;function pve(t,e,n,s){const r=t._endId=++A1t,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=cVe(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function cVe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${ty}Delay`),i=s(`${ty}Duration`),o=gve(r,i),a=s(`${MR}Delay`),l=s(`${MR}Duration`),u=gve(a,l);let h=null,d=0,p=0;e===ty?o>0&&(h=ty,d=o,p=i.length):e===MR?u>0&&(h=MR,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?ty:MR:null,p=h?h===ty?i.length:l.length:0);const m=h===ty&&/\b(transform|all)(,|$)/.test(s(`${ty}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function gve(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>mve(n)+mve(t[s])))}function mve(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function jY(){return document.body.offsetHeight}function P1t(t,e,n){const s=t[ok];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const B6=Symbol("_vod"),lVe=Symbol("_vsh"),uVe={beforeMount(t,{value:e},{transition:n}){t[B6]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):FR(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),FR(t,!0),s.enter(t)):s.leave(t,()=>{FR(t,!1)}):FR(t,e))},beforeUnmount(t,{value:e}){FR(t,e)}};function FR(t,e){t.style.display=e?t[B6]:"none",t[lVe]=!e}const N1t=Symbol(""),x1t=/(^|;)\s*display\s*:/;function D1t(t,e,n){const s=t.style,r=pi(n);let i=!1;if(n&&!r){if(e)if(pi(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Z4(s,a,"")}else for(const o in e)n[o]==null&&Z4(s,o,"");for(const o in n)o==="display"&&(i=!0),Z4(s,o,n[o])}else if(r){if(e!==n){const o=s[N1t];o&&(n+=";"+o),s.cssText=n,i=x1t.test(n)}}else e&&t.removeAttribute("style");B6 in t&&(t[B6]=i?s.display:"",t[lVe]&&(s.display="none"))}const _ve=/\s*!important$/;function Z4(t,e,n){if(Rt(n))n.forEach(s=>Z4(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=O1t(t,e);_ve.test(n)?t.setProperty(zC(s),n.replace(_ve,""),"important"):t[s]=n}}const yve=["Webkit","Moz","ms"],h8={};function O1t(t,e){const n=h8[e];if(n)return n;let s=Oh(e);if(s!=="filter"&&s in t)return h8[e]=s;s=a$(s);for(let r=0;r<yve.length;r++){const i=yve[r]+s;if(i in t)return h8[e]=i}return e}const vve="http://www.w3.org/1999/xlink";function wve(t,e,n,s,r,i=GSt(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vve,e.slice(6,e.length)):t.setAttributeNS(vve,e,n):n==null||i&&!KFe(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Tb(n)?String(n):n)}function bve(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?rVe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=KFe(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function L1t(t,e,n,s){t.addEventListener(e,n,s)}function M1t(t,e,n,s){t.removeEventListener(e,n,s)}const Eve=Symbol("_vei");function F1t(t,e,n,s,r=null){const i=t[Eve]||(t[Eve]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=V1t(e);if(s){const u=i[e]=j1t(s,r);L1t(t,a,u,l)}else o&&(M1t(t,a,o,l),i[e]=void 0)}}const Tve=/(?:Once|Passive|Capture)$/;function V1t(t){let e;if(Tve.test(t)){e={};let n;for(;n=t.match(Tve);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zC(t.slice(2)),e]}let d8=0;const U1t=Promise.resolve(),q1t=()=>d8||(U1t.then(()=>d8=0),d8=Date.now());function j1t(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;nf(B1t(s,n.value),e,5,[s])};return n.value=t,n.attached=q1t(),n}function B1t(t,e){if(Rt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Cve=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,$1t=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?P1t(t,s,o):e==="style"?D1t(t,n,s):r$(e)?Lre(e)||F1t(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):z1t(t,e,s,o))?(bve(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wve(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!pi(s))?bve(t,Oh(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),wve(t,e,s,o))};function z1t(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Cve(e)&&Wt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Cve(e)&&pi(n)?!1:e in t}const hVe=new WeakMap,dVe=new WeakMap,$6=Symbol("_moveCb"),Ive=Symbol("_enterCb"),H1t=t=>(delete t.props.mode,t),W1t=H1t({name:"TransitionGroup",props:$o({},oVe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=q_(),s=R4e();let r,i;return m$(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!X1t(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(K1t),r.forEach(Q1t);const a=r.filter(Y1t);jY(),a.forEach(l=>{const u=l.el,h=u.style;Ef(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[$6]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[$6]=null,dy(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=zn(t),a=aVe(o);let l=o.tag||Ru;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),JT(h,sD(h,a,s,n)),hVe.set(h,h.el.getBoundingClientRect()))}i=e.default?Qre(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&JT(h,sD(h,a,s,n))}return Ea(l,null,i)}}}),G1t=W1t;function K1t(t){const e=t.el;e[$6]&&e[$6](),e[Ive]&&e[Ive]()}function Q1t(t){dVe.set(t,t.el.getBoundingClientRect())}function Y1t(t){const e=hVe.get(t),n=dVe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function X1t(t,e,n){const s=t.cloneNode(),r=t[ok];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=cVe(s);return i.removeChild(s),o}const J1t=["ctrl","shift","alt","meta"],Z1t={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>J1t.some(n=>t[`${n}Key`]&&!e.includes(n))},fVe=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Z1t[e[o]];if(a&&a(r,e))return}return t(r,...i)})},eRt=$o({patchProp:$1t},S1t);let Sve;function tRt(){return Sve||(Sve=Ykt(eRt))}const pVe=(...t)=>{const e=tRt().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=sRt(s);if(!r)return;const i=e._component;!Wt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,nRt(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function nRt(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function sRt(t){return pi(t)?document.querySelector(t):t}function L1(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function gVe(t,e){for(const n in e)L1(t,n,e[n]);return t}const r_=Vp(!1);let BY;function rRt(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function iRt(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const mVe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function oRt(t){const e=t.toLowerCase(),n=iRt(e),s=rRt(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),r_.value===!0&&(BY={is:{...r}}),mVe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const kve=navigator.userAgent||navigator.vendor||window.opera,aRt={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Th={userAgent:kve,is:oRt(kve),has:{touch:mVe},within:{iframe:window.self!==window.top}},oD={install(t){const{$q:e}=t;r_.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Th),r_.value=!1}),e.platform=Cb(this)):e.platform=this}};{let t;L1(Th.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(oD,Th),r_.value===!0&&(Object.assign(oD,BY,aRt),BY=null)}function WC(t){return HC(O1(t))}function lie(t){return HC(t)}const E$=(t,e)=>{const n=Cb(t);for(const s in t)L1(e,s,()=>n[s],r=>{n[s]=r});return e},i_={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(i_,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function ZT(){}function _Ve(t){return t.button===0}function uie(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function yVe(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function T$(t){t.stopPropagation()}function aD(t){t.cancelable!==!1&&t.preventDefault()}function Ay(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function vVe(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",aD,i_.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",aD,i_.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function hie(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],i_[r[3]])})}function die(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],i_[s[3]])}),t[n]=void 0)}function fie(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const f8=["sm","md","lg","xl"],{passive:Rve}=i_,cRt=E$({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:ZT,setDebounce:ZT,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Th.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{f8.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&f8.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{f8.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,Rve),a=p>0?fie(this.__update,p):this.__update,s.addEventListener("resize",a,Rve)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};r_.value===!0?e.push(h):h()}}),Ma=E$({isActive:!1,mode:!1},{__media:void 0,set(t){Ma.mode=t,t==="auto"?(Ma.__media===void 0&&(Ma.__media=window.matchMedia("(prefers-color-scheme: dark)"),Ma.__updateMedia=()=>{Ma.set("auto")},Ma.__media.addListener(Ma.__updateMedia)),t=Ma.__media.matches):Ma.__media!==void 0&&(Ma.__media.removeListener(Ma.__updateMedia),Ma.__media=void 0),Ma.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Ma.set(Ma.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function lRt(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let wVe=!1;function uRt(t){wVe=t.isComposing===!0}function pie(t){return wVe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function cD(t,e){return pie(t)===!0?!1:[].concat(e).includes(t.keyCode)}function bVe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function hRt({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=bVe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function dRt(){const{is:t}=Th,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=bVe(t);r!==void 0&&n.add(`platform-${r}`)}}Th.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Th.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function fRt(t){for(const e in t)lRt(e,t[e])}const pRt={install(t){if(this.__installed!==!0){if(r_.value===!0)dRt();else{const{$q:e}=t;e.config.brand!==void 0&&fRt(e.config.brand);const n=hRt(Th,e.config);document.body.classList.add.apply(document.body.classList,n)}Th.is.ios===!0&&document.body.addEventListener("touchstart",ZT),window.addEventListener("keydown",uRt,!0)}}},EVe=()=>!0;function gRt(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function mRt(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function _Rt(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return EVe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(gRt).map(mRt)),()=>e.includes(window.location.hash)}const gie={__history:[],add:ZT,remove:ZT,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Th.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=EVe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=_Rt(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Ave={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Pve(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Py=E$({__qLang:{}},{getLocale:Pve,set(t=Ave,e){const n={...t,rtl:t.rtl===!0,getLocale:Pve};{if(n.set=Py.set,Py.__langConfig===void 0||Py.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Py.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Py.__qLang,Py.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||Ave))}}),yRt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},z6=E$({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=z6.set,Object.assign(z6.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,L1(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||yRt))}}),TVe="_q_",CVe="_q_l_",IVe="_q_pc_",SVe="_q_fo_";function kVe(){}const H6={};let RVe=!1;function vRt(){RVe=!0}function $P(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if($P(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if($P(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if($P(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function eC(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function AVe(t){return Object.prototype.toString.call(t)==="[object Date]"}function PVe(t){return typeof t=="number"&&isFinite(t)}const Nve=[oD,pRt,Ma,cRt,gie,Py,z6];function wRt(t,e){const n=pVe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function xve(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function bRt(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(TVe,n.$q),xve(n,Nve),e.components!==void 0&&Object.values(e.components).forEach(s=>{eC(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{eC(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&xve(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&Nve.includes(s)===!1)),r_.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const ERt=function(t,e={}){const n={version:"2.18.2"};RVe===!1?(e.config!==void 0&&Object.assign(H6,e.config),n.config={...H6},vRt()):n.config=e.config||{},bRt(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},TRt={name:"Quasar",version:"2.18.2",install:ERt,lang:Py,iconSet:z6};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const X0=typeof document<"u";function NVe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function CRt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&NVe(t.default)}const ds=Object.assign;function p8(t,e){const n={};for(const s in e){const r=e[s];n[s]=sf(r)?r.map(t):t(r)}return n}const zP=()=>{},sf=Array.isArray,xVe=/#/g,IRt=/&/g,SRt=/\//g,kRt=/=/g,RRt=/\?/g,DVe=/\+/g,ARt=/%5B/g,PRt=/%5D/g,OVe=/%5E/g,NRt=/%60/g,LVe=/%7B/g,xRt=/%7C/g,MVe=/%7D/g,DRt=/%20/g;function mie(t){return encodeURI(""+t).replace(xRt,"|").replace(ARt,"[").replace(PRt,"]")}function ORt(t){return mie(t).replace(LVe,"{").replace(MVe,"}").replace(OVe,"^")}function $Y(t){return mie(t).replace(DVe,"%2B").replace(DRt,"+").replace(xVe,"%23").replace(IRt,"%26").replace(NRt,"`").replace(LVe,"{").replace(MVe,"}").replace(OVe,"^")}function LRt(t){return $Y(t).replace(kRt,"%3D")}function MRt(t){return mie(t).replace(xVe,"%23").replace(RRt,"%3F")}function FRt(t){return t==null?"":MRt(t).replace(SRt,"%2F")}function lD(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const VRt=/\/$/,URt=t=>t.replace(VRt,"");function g8(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=$Rt(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:lD(o)}}function qRt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Dve(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function jRt(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&ak(e.matched[s],n.matched[r])&&FVe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ak(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function FVe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!BRt(t[n],e[n]))return!1;return!0}function BRt(t,e){return sf(t)?Ove(t,e):sf(e)?Ove(e,t):t===e}function Ove(t,e){return sf(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function $Rt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const ny={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var uD;(function(t){t.pop="pop",t.push="push"})(uD||(uD={}));var HP;(function(t){t.back="back",t.forward="forward",t.unknown=""})(HP||(HP={}));function zRt(t){if(!t)if(X0){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),URt(t)}const HRt=/^[^#]+#/;function WRt(t,e){return t.replace(HRt,"#")+e}function GRt(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const C$=()=>({left:window.scrollX,top:window.scrollY});function KRt(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=GRt(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Lve(t,e){return(history.state?history.state.position-e:-1)+t}const zY=new Map;function QRt(t,e){zY.set(t,e)}function YRt(t){const e=zY.get(t);return zY.delete(t),e}let XRt=()=>location.protocol+"//"+location.host;function VVe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),Dve(a,"")}return Dve(n,t)+s+r}function JRt(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=VVe(t,location),w=n.value,R=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=R?p.position-R.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:uD.pop,direction:P?P>0?HP.forward:HP.back:HP.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(ds({},p.state,{scroll:C$()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Mve(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?C$():null}}function ZRt(t){const{history:e,location:n}=window,s={value:VVe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:XRt()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=ds({},e.state,Mve(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=ds({},r.value,e.state,{forward:l,scroll:C$()});i(h.current,h,!0);const d=ds({},Mve(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function eAt(t){t=zRt(t);const e=ZRt(t),n=JRt(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ds({location:"",base:t,go:s,createHref:WRt.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function tAt(t){return typeof t=="string"||t&&typeof t=="object"}function UVe(t){return typeof t=="string"||typeof t=="symbol"}const qVe=Symbol("");var Fve;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Fve||(Fve={}));function ck(t,e){return ds(new Error,{type:t,[qVe]:!0},e)}function Fg(t,e){return t instanceof Error&&qVe in t&&(e==null||!!(t.type&e))}const Vve="[^/]+?",nAt={sensitive:!1,strict:!1,start:!0,end:!0},sAt=/[.+*?^${}()[\]/\\]/g;function rAt(t,e){const n=ds({},nAt,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(sAt,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:R,optional:P,regexp:O}=p;i.push({name:w,repeatable:R,optional:P});const M=O||Vve;if(M!==Vve){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=R?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),R&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:R,optional:P}=m,O=w in u?u[w]:"";if(sf(O)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=sf(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function iAt(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function jVe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=iAt(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Uve(s))return 1;if(Uve(r))return-1}return r.length-s.length}function Uve(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const oAt={type:0,value:""},aAt=/[a-zA-Z0-9_]/;function cAt(t){if(!t)return[[]];if(t==="/")return[[oAt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:aAt.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function lAt(t,e,n){const s=rAt(cAt(t.path),n),r=ds(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function uAt(t,e){const n=[],s=new Map;e=$ve({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,R=jve(d);R.aliasOf=m&&m.record;const P=$ve(e,d),O=[R];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of q)O.push(jve(ds({},R,{components:m?m.record.components:R.components,path:W,aliasOf:m?m.record:R})))}let M,V;for(const q of O){const{path:W}=q;if(p&&W[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(W&&I+W)}if(M=lAt(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!Bve(M)&&o(d.name)),BVe(M)&&l(M),R.children){const J=R.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:zP}function o(d){if(UVe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=fAt(d,n);n.splice(p,0,d),d.record.name&&!Bve(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},R,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw ck(1,{location:d});P=m.record.name,w=ds(qve(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&qve(d.params,m.keys.map(V=>V.name))),R=m.stringify(w)}else if(d.path!=null)R=d.path,m=n.find(V=>V.re.test(R)),m&&(w=m.parse(R),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw ck(1,{location:d,currentLocation:p});P=m.record.name,w=ds({},p.params,d.params),R=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:R,params:w,matched:O,meta:dAt(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function qve(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function jve(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:hAt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function hAt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Bve(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function dAt(t){return t.reduce((e,n)=>ds(e,n.meta),{})}function $ve(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function fAt(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;jVe(t,e[i])<0?s=i:n=i+1}const r=pAt(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function pAt(t){let e=t;for(;e=e.parent;)if(BVe(e)&&jVe(t,e)===0)return e}function BVe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gAt(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(DVe," "),i=r.indexOf("="),o=lD(i<0?r:r.slice(0,i)),a=i<0?null:lD(r.slice(i+1));if(o in e){let l=e[o];sf(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function zve(t){let e="";for(let n in t){const s=t[n];if(n=LRt(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(sf(s)?s.map(r=>r&&$Y(r)):[s&&$Y(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function mAt(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=sf(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const _At=Symbol(""),Hve=Symbol(""),I$=Symbol(""),_ie=Symbol(""),HY=Symbol("");function VR(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ny(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(ck(4,{from:n,to:e})):p instanceof Error?l(p):tAt(p)?l(ck(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function m8(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(NVe(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ny(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=CRt(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Ny(p,n,s,o,a,r)()}))}}return i}function Wve(t){const e=_u(I$),n=_u(_ie),s=rt(()=>{const l=Om(t.to);return e.resolve(l)}),r=rt(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(ak.bind(null,h));if(p>-1)return p;const m=Gve(l[u-2]);return u>1&&Gve(h)===m&&d[d.length-1].path!==m?d.findIndex(ak.bind(null,l[u-2])):p}),i=rt(()=>r.value>-1&&EAt(n.params,s.value.params)),o=rt(()=>r.value>-1&&r.value===n.matched.length-1&&FVe(n.params,s.value.params));function a(l={}){if(bAt(l)){const u=e[Om(t.replace)?"replace":"push"](Om(t.to)).catch(zP);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:rt(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function yAt(t){return t.length===1?t[0]:t}const vAt=O1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Wve,setup(t,{slots:e}){const n=Cb(Wve(t)),{options:s}=_u(I$),r=rt(()=>({[Kve(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Kve(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&yAt(e.default(n));return t.custom?i:Nt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),wAt=vAt;function bAt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function EAt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!sf(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Gve(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Kve=(t,e,n)=>t??e??n,TAt=O1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=_u(HY),r=rt(()=>t.route||s.value),i=_u(Hve,0),o=rt(()=>{let u=Om(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=rt(()=>r.value.matched[o.value]);KI(Hve,rt(()=>o.value+1)),KI(_At,a),KI(HY,r);const l=Vp();return fT(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!ak(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return Qve(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,R=Nt(p,ds({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return Qve(n.default,{Component:R,route:u})||R}}});function Qve(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const CAt=TAt;function IAt(t){const e=uAt(t.routes,t),n=t.parseQuery||gAt,s=t.stringifyQuery||zve,r=t.history,i=VR(),o=VR(),a=VR(),l=fkt(ny);let u=ny;X0&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=p8.bind(null,F=>""+F),d=p8.bind(null,FRt),p=p8.bind(null,lD);function m(F,Q){let K,ee;return UVe(F)?(K=e.getRecordMatcher(F),ee=Q):ee=F,e.addRoute(ee,K)}function w(F){const Q=e.getRecordMatcher(F);Q&&e.removeRoute(Q)}function R(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Q){if(Q=ds({},Q||l.value),typeof F=="string"){const x=g8(n,F,Q.path),L=e.resolve({path:x.path},Q),U=r.createHref(x.fullPath);return ds(x,L,{params:p(L.params),hash:lD(x.hash),redirectedFrom:void 0,href:U})}let K;if(F.path!=null)K=ds({},F,{path:g8(n,F.path,Q.path).path});else{const x=ds({},F.params);for(const L in x)x[L]==null&&delete x[L];K=ds({},F,{params:d(x)}),Q.params=d(Q.params)}const ee=e.resolve(K,Q),k=F.hash||"";ee.params=h(p(ee.params));const C=qRt(s,ds({},F,{hash:ORt(k),path:ee.path})),A=r.createHref(C);return ds({fullPath:C,hash:k,query:s===zve?mAt(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:A})}function M(F){return typeof F=="string"?g8(n,F,l.value.path):ds({},F)}function V(F,Q){if(u!==F)return ck(8,{from:Q,to:F})}function q(F){return I(F)}function W(F){return q(ds(M(F),{replace:!0}))}function J(F){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let ee=typeof K=="function"?K(F):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),ds({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Q){const K=u=O(F),ee=l.value,k=F.state,C=F.force,A=F.replace===!0,x=J(K);if(x)return I(ds(M(x),{state:typeof x=="object"?ds({},k,x.state):k,force:C,replace:A}),Q||K);const L=K;L.redirectedFrom=Q;let U;return!C&&jRt(s,ee,K)&&(U=ck(16,{to:L,from:ee}),Qe(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Fg(j)?Fg(j,2)?j:Ke(j):de(j,L,ee)).then(j=>{if(j){if(Fg(j,2))return I(ds({replace:A},M(j.to),{state:typeof j.to=="object"?ds({},k,j.to.state):k,force:C}),Q||L)}else j=E(L,ee,!0,A,k);return S(L,ee,j),j})}function v(F,Q){const K=V(F,Q);return K?Promise.reject(K):Promise.resolve()}function y(F){const Q=qt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function T(F,Q){let K;const[ee,k,C]=SAt(F,Q);K=m8(ee.reverse(),"beforeRouteLeave",F,Q);for(const x of ee)x.leaveGuards.forEach(L=>{K.push(Ny(L,F,Q))});const A=v.bind(null,F,Q);return K.push(A),Fe(K).then(()=>{K=[];for(const x of i.list())K.push(Ny(x,F,Q));return K.push(A),Fe(K)}).then(()=>{K=m8(k,"beforeRouteUpdate",F,Q);for(const x of k)x.updateGuards.forEach(L=>{K.push(Ny(L,F,Q))});return K.push(A),Fe(K)}).then(()=>{K=[];for(const x of C)if(x.beforeEnter)if(sf(x.beforeEnter))for(const L of x.beforeEnter)K.push(Ny(L,F,Q));else K.push(Ny(x.beforeEnter,F,Q));return K.push(A),Fe(K)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),K=m8(C,"beforeRouteEnter",F,Q,y),K.push(A),Fe(K))).then(()=>{K=[];for(const x of o.list())K.push(Ny(x,F,Q));return K.push(A),Fe(K)}).catch(x=>Fg(x,8)?x:Promise.reject(x))}function S(F,Q,K){a.list().forEach(ee=>y(()=>ee(F,Q,K)))}function E(F,Q,K,ee,k){const C=V(F,Q);if(C)return C;const A=Q===ny,x=X0?history.state:{};K&&(ee||A?r.replace(F.fullPath,ds({scroll:A&&x&&x.scroll},k)):r.push(F.fullPath,k)),l.value=F,Qe(F,Q,K,A),Ke()}let b;function G(){b||(b=r.listen((F,Q,K)=>{if(!it.listening)return;const ee=O(F),k=J(ee);if(k){I(ds(k,{replace:!0,force:!0}),ee).catch(zP);return}u=ee;const C=l.value;X0&&QRt(Lve(C.fullPath,K.delta),C$()),T(ee,C).catch(A=>Fg(A,12)?A:Fg(A,2)?(I(ds(M(A.to),{force:!0}),ee).then(x=>{Fg(x,20)&&!K.delta&&K.type===uD.pop&&r.go(-1,!1)}).catch(zP),Promise.reject()):(K.delta&&r.go(-K.delta,!1),de(A,ee,C))).then(A=>{A=A||E(ee,C,!1),A&&(K.delta&&!Fg(A,8)?r.go(-K.delta,!1):K.type===uD.pop&&Fg(A,20)&&r.go(-1,!1)),S(ee,C,A)}).catch(zP)}))}let ne=VR(),ae=VR(),oe;function de(F,Q,K){Ke(F);const ee=ae.list();return ee.length?ee.forEach(k=>k(F,Q,K)):console.error(F),Promise.reject(F)}function ct(){return oe&&l.value!==ny?Promise.resolve():new Promise((F,Q)=>{ne.add([F,Q])})}function Ke(F){return oe||(oe=!F,G(),ne.list().forEach(([Q,K])=>F?K(F):Q()),ne.reset()),F}function Qe(F,Q,K,ee){const{scrollBehavior:k}=t;if(!X0||!k)return Promise.resolve();const C=!K&&YRt(Lve(F.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return d$().then(()=>k(F,Q,C)).then(A=>A&&KRt(A)).catch(A=>de(A,F,Q))}const ge=F=>r.go(F);let he;const qt=new Set,it={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:R,resolve:O,options:t,push:q,replace:W,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:ct,install(F){const Q=this;F.component("RouterLink",wAt),F.component("RouterView",CAt),F.config.globalProperties.$router=Q,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Om(l)}),X0&&!he&&l.value===ny&&(he=!0,q(r.location).catch(k=>{}));const K={};for(const k in ny)Object.defineProperty(K,k,{get:()=>l.value[k],enumerable:!0});F.provide(I$,Q),F.provide(_ie,u$(K)),F.provide(HY,l);const ee=F.unmount;qt.add(F),F.unmount=function(){qt.delete(F),qt.size<1&&(u=ny,b&&b(),b=null,l.value=ny,he=!1,oe=!1),ee()}}};function Fe(F){return F.reduce((Q,K)=>Q.then(()=>y(K)),Promise.resolve())}return it}function SAt(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>ak(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>ak(u,l))||r.push(l))}return[n,s,r]}function yie(){return _u(I$)}function vie(t){return _u(_ie)}const kAt=()=>{};var Yve={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $Ve={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ne=function(t,e){if(!t)throw M1(e)},M1=function(t){return new Error("Firebase Database ("+$Ve.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zVe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},RAt=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zVe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RAt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new AAt;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AAt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HVe=function(t){const e=zVe(t);return wie.encodeByteArray(e,!0)},W6=function(t){return HVe(t).replace(/\./g,"")},G6=function(t){try{return wie.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PAt(t){return WVe(void 0,t)}function WVe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!NAt(n)||(t[n]=WVe(t[n],e[n]));return t}function NAt(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xAt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DAt=()=>xAt().__FIREBASE_DEFAULTS__,OAt=()=>{if(typeof process>"u"||typeof Yve>"u")return;const t=Yve.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LAt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G6(t[1]);return e&&JSON.parse(e)},S$=()=>{try{return kAt()||DAt()||OAt()||LAt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GVe=t=>S$()?.emulatorHosts?.[t],bie=t=>{const e=GVe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},KVe=()=>S$()?.config,QVe=t=>S$()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sg(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R$(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eie(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[W6(JSON.stringify(n)),W6(JSON.stringify(o)),""].join(".")}const WP={};function MAt(){const t={prod:[],emulator:[]};for(const e of Object.keys(WP))WP[e]?t.emulator.push(e):t.prod.push(e);return t}function FAt(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xve=!1;function A$(t,e){if(typeof window>"u"||typeof document>"u"||!sg(window.location.host)||WP[t]===e||WP[t]||Xve)return;WP[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=MAt().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Xve=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=FAt(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),R=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(R,w);const V=l();a(O,P),M.append(O,m,R,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wc())}function VAt(){const t=S$()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UAt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qAt(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YVe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jAt(){const t=wc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BAt(){return $Ve.NODE_ADMIN===!0}function $At(){return!VAt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zAt(){try{return typeof indexedDB=="object"}catch{return!1}}function HAt(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WAt="FirebaseError";class rg extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WAt,Object.setPrototypeOf(this,rg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,OM.prototype.create)}}class OM{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?GAt(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new rg(r,a,s)}}function GAt(t,e){return t.replace(KAt,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const KAt=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hD(t){return JSON.parse(t)}function So(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XVe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=hD(G6(i[0])||""),n=hD(G6(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},QAt=function(t){const e=XVe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},YAt=function(t){const e=XVe(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function j_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lk(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function WY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function K6(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Cw(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Jve(i)&&Jve(o)){if(!Cw(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Jve(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F1(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XAt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function JAt(t,e){const n=new ZAt(t,e);return n.subscribe.bind(n)}class ZAt{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ePt(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=_8),r.error===void 0&&(r.error=_8),r.complete===void 0&&(r.complete=_8);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ePt(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _8(){}function Cie(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tPt=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Ne(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},P$=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qs(t){return t&&t._delegate?t._delegate:t}class o_{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hE="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nPt{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new k$;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rPt(e))try{this.getOrInitializeService({instanceIdentifier:hE})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=hE){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hE){return this.instances.has(e)}getOptions(e=hE){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sPt(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=hE){return this.component?this.component.multipleInstances?e:hE:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sPt(t){return t===hE?void 0:t}function rPt(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iPt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nPt(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(bn||(bn={}));const oPt={debug:bn.DEBUG,verbose:bn.VERBOSE,info:bn.INFO,warn:bn.WARN,error:bn.ERROR,silent:bn.SILENT},aPt=bn.INFO,cPt={[bn.DEBUG]:"log",[bn.VERBOSE]:"log",[bn.INFO]:"info",[bn.WARN]:"warn",[bn.ERROR]:"error"},lPt=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=cPt[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class N${constructor(e){this.name=e,this._logLevel=aPt,this._logHandler=lPt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oPt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,bn.DEBUG,...e),this._logHandler(this,bn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,bn.VERBOSE,...e),this._logHandler(this,bn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,bn.INFO,...e),this._logHandler(this,bn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,bn.WARN,...e),this._logHandler(this,bn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,bn.ERROR,...e),this._logHandler(this,bn.ERROR,...e)}}const uPt=(t,e)=>e.some(n=>t instanceof n);let Zve,ewe;function hPt(){return Zve||(Zve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dPt(){return ewe||(ewe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JVe=new WeakMap,GY=new WeakMap,ZVe=new WeakMap,y8=new WeakMap,Iie=new WeakMap;function fPt(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Tv(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JVe.set(n,t)}).catch(()=>{}),Iie.set(e,t),e}function pPt(t){if(GY.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});GY.set(t,e)}let KY={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return GY.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZVe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tv(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gPt(t){KY=t(KY)}function mPt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(v8(this),e,...n);return ZVe.set(s,e.sort?e.sort():[e]),Tv(s)}:dPt().includes(t)?function(...e){return t.apply(v8(this),e),Tv(JVe.get(this))}:function(...e){return Tv(t.apply(v8(this),e))}}function _Pt(t){return typeof t=="function"?mPt(t):(t instanceof IDBTransaction&&pPt(t),uPt(t,hPt())?new Proxy(t,KY):t)}function Tv(t){if(t instanceof IDBRequest)return fPt(t);if(y8.has(t))return y8.get(t);const e=_Pt(t);return e!==t&&(y8.set(t,e),Iie.set(e,t)),e}const v8=t=>Iie.get(t);function yPt(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Tv(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Tv(o.result),l.oldVersion,l.newVersion,Tv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const vPt=["get","getKey","getAll","getAllKeys","count"],wPt=["put","add","delete","clear"],w8=new Map;function twe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w8.get(e))return w8.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=wPt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||vPt.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return w8.set(e,i),i}gPt(t=>({...t,get:(e,n,s)=>twe(e,n)||t.get(e,n,s),has:(e,n)=>!!twe(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bPt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(EPt(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function EPt(t){return t.getComponent()?.type==="VERSION"}const QY="@firebase/app",nwe="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a_=new N$("@firebase/app"),TPt="@firebase/app-compat",CPt="@firebase/analytics-compat",IPt="@firebase/analytics",SPt="@firebase/app-check-compat",kPt="@firebase/app-check",RPt="@firebase/auth",APt="@firebase/auth-compat",PPt="@firebase/database",NPt="@firebase/data-connect",xPt="@firebase/database-compat",DPt="@firebase/functions",OPt="@firebase/functions-compat",LPt="@firebase/installations",MPt="@firebase/installations-compat",FPt="@firebase/messaging",VPt="@firebase/messaging-compat",UPt="@firebase/performance",qPt="@firebase/performance-compat",jPt="@firebase/remote-config",BPt="@firebase/remote-config-compat",$Pt="@firebase/storage",zPt="@firebase/storage-compat",HPt="@firebase/firestore",WPt="@firebase/ai",GPt="@firebase/firestore-compat",KPt="firebase",QPt="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YY="[DEFAULT]",YPt={[QY]:"fire-core",[TPt]:"fire-core-compat",[IPt]:"fire-analytics",[CPt]:"fire-analytics-compat",[kPt]:"fire-app-check",[SPt]:"fire-app-check-compat",[RPt]:"fire-auth",[APt]:"fire-auth-compat",[PPt]:"fire-rtdb",[NPt]:"fire-data-connect",[xPt]:"fire-rtdb-compat",[DPt]:"fire-fn",[OPt]:"fire-fn-compat",[LPt]:"fire-iid",[MPt]:"fire-iid-compat",[FPt]:"fire-fcm",[VPt]:"fire-fcm-compat",[UPt]:"fire-perf",[qPt]:"fire-perf-compat",[jPt]:"fire-rc",[BPt]:"fire-rc-compat",[$Pt]:"fire-gcs",[zPt]:"fire-gcs-compat",[HPt]:"fire-fst",[GPt]:"fire-fst-compat",[WPt]:"fire-vertex","fire-js":"fire-js",[KPt]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q6=new Map,XPt=new Map,XY=new Map;function swe(t,e){try{t.container.addComponent(e)}catch(n){a_.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Iw(t){const e=t.name;if(XY.has(e))return a_.debug(`There were multiple attempts to register component ${e}.`),!1;XY.set(e,t);for(const n of Q6.values())swe(n,t);for(const n of XPt.values())swe(n,t);return!0}function LM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xu(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cv=new OM("app","Firebase",JPt);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZPt{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new o_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cv.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ib=QPt;function eUe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:YY,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Cv.create("bad-app-name",{appName:String(r)});if(n||(n=KVe()),!n)throw Cv.create("no-options");const i=Q6.get(r);if(i){if(Cw(n,i.options)&&Cw(s,i.config))return i;throw Cv.create("duplicate-app",{appName:r})}const o=new iPt(r);for(const l of XY.values())o.addComponent(l);const a=new ZPt(n,s,o);return Q6.set(r,a),a}function x$(t=YY){const e=Q6.get(t);if(!e&&t===YY&&KVe())return eUe();if(!e)throw Cv.create("no-app",{appName:t});return e}function Ch(t,e,n){let s=YPt[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),a_.warn(o.join(" "));return}Iw(new o_(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eNt="firebase-heartbeat-database",tNt=1,dD="firebase-heartbeat-store";let b8=null;function tUe(){return b8||(b8=yPt(eNt,tNt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dD)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cv.create("idb-open",{originalErrorMessage:t.message})})),b8}async function nNt(t){try{const e=(await tUe()).transaction(dD),n=await e.objectStore(dD).get(nUe(t));return await e.done,n}catch(e){if(e instanceof rg)a_.warn(e.message);else{const n=Cv.create("idb-get",{originalErrorMessage:e?.message});a_.warn(n.message)}}}async function rwe(t,e){try{const n=(await tUe()).transaction(dD,"readwrite");await n.objectStore(dD).put(e,nUe(t)),await n.done}catch(n){if(n instanceof rg)a_.warn(n.message);else{const s=Cv.create("idb-set",{originalErrorMessage:n?.message});a_.warn(s.message)}}}function nUe(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sNt=1024,rNt=30;class iNt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aNt(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=iwe();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>rNt){const s=cNt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){a_.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=iwe(),{heartbeatsToSend:n,unsentEntries:s}=oNt(this._heartbeatsCache.heartbeats),r=W6(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return a_.warn(e),""}}}function iwe(){return new Date().toISOString().substring(0,10)}function oNt(t,e=sNt){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),owe(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),owe(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class aNt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zAt()?HAt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await nNt(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return rwe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return rwe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function owe(t){return W6(JSON.stringify({version:2,heartbeats:t})).length}function cNt(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lNt(t){Iw(new o_("platform-logger",e=>new bPt(e),"PRIVATE")),Iw(new o_("heartbeat",e=>new iNt(e),"PRIVATE")),Ch(QY,nwe,t),Ch(QY,nwe,"esm2020"),Ch("fire-js","")}lNt("");function sUe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sie=sUe,rUe=new OM("auth","Firebase",sUe());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Y6=new N$("@firebase/auth");function uNt(t,...e){Y6.logLevel<=bn.WARN&&Y6.warn(`Auth (${Ib}): ${t}`,...e)}function eV(t,...e){Y6.logLevel<=bn.ERROR&&Y6.error(`Auth (${Ib}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Up(t,...e){throw Rie(t,...e)}function Dd(t,...e){return Rie(t,...e)}function kie(t,e,n){const s={...Sie(),[e]:n};return new OM("auth","Firebase",s).create(e,{appName:t.name})}function pT(t){return kie(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hNt(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Up(t,"argument-error"),kie(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rie(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return rUe.create(t,...e)}function Lt(t,e,...n){if(!t)throw Rie(e,...n)}function bm(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eV(e),new Error(e)}function c_(t,e){t||bm(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JY(){return typeof self<"u"&&self.location?.href||""}function dNt(){return awe()==="http:"||awe()==="https:"}function awe(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fNt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dNt()||qAt()||"connection"in navigator)?navigator.onLine:!0}function pNt(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MM{constructor(e,n){this.shortDelay=e,this.longDelay=n,c_(n>e,"Short delay should be less than long delay!"),this.isMobile=Tie()||YVe()}get(){return fNt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Aie(t,e){c_(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iUe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gNt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mNt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_Nt=new MM(3e4,6e4);function Pie(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function V1(t,e,n,s,r={}){return oUe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=F1({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return UAt()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&sg(t.emulatorConfig.host)&&(u.credentials="include"),iUe.fetch()(await aUe(t,t.config.apiHost,n,a),u)})}async function oUe(t,e,n){t._canInitEmulator=!1;const s={...gNt,...e};try{const r=new vNt(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw CF(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw CF(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw CF(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw CF(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kie(t,h,u);Up(t,h)}}catch(r){if(r instanceof rg)throw r;Up(t,"network-request-failed",{message:String(r)})}}async function yNt(t,e,n,s,r={}){const i=await V1(t,e,n,s,r);return"mfaPendingCredential"in i&&Up(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function aUe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Aie(t.config,r):`${t.config.apiScheme}://${r}`;return mNt.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class vNt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Dd(this.auth,"network-request-failed")),_Nt.get())})}}function CF(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Dd(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function wNt(t,e){return V1(t,"POST","/v1/accounts:delete",e)}async function X6(t,e){return V1(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GP(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nie(t,e=!1){const n=qs(t),s=await n.getIdToken(e),r=xie(s);Lt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:GP(E8(r.auth_time)),issuedAtTime:GP(E8(r.iat)),expirationTime:GP(E8(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function E8(t){return Number(t)*1e3}function xie(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return eV("JWT malformed, contained fewer than 3 sections"),null;try{const r=G6(n);return r?JSON.parse(r):(eV("Failed to decode base64 JWT payload"),null)}catch(r){return eV("Caught error parsing JWT payload as JSON",r?.toString()),null}}function cwe(t){const e=xie(t);return Lt(e,"internal-error"),Lt(typeof e.exp<"u","internal-error"),Lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function fD(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof rg&&bNt(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function bNt({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ENt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZY{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=GP(this.lastLoginAt),this.creationTime=GP(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function J6(t){const e=t.auth,n=await t.getIdToken(),s=await fD(t,X6(e,{idToken:n}));Lt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?cUe(r.providerUserInfo):[],o=TNt(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new ZY(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Die(t){const e=qs(t);await J6(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TNt(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function cUe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function CNt(t,e){const n=await oUe(t,{},async()=>{const s=F1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await aUe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&sg(t.emulatorConfig.host)&&(l.credentials="include"),iUe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function INt(t,e){return V1(t,"POST","/v2/accounts:revokeToken",Pie(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QI{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lt(e.idToken,"internal-error"),Lt(typeof e.idToken<"u","internal-error"),Lt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cwe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Lt(e.length!==0,"internal-error");const n=cwe(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await CNt(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new QI;return s&&(Lt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Lt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Lt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new QI,this.toJSON())}_performRefresh(){return bm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sy(t,e){Lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cd{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new ENt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ZY(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await fD(this,this.stsTokenManager.getToken(this.auth,e));return Lt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Nie(this,e)}reload(){return Die(this)}_assign(e){this!==e&&(Lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cd({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await J6(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xu(this.auth.app))return Promise.reject(pT(this.auth));const e=await this.getIdToken();return await fD(this,wNt(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:R}=n;Lt(d&&R,e,"internal-error");const P=QI.fromJSON(this.name,R);Lt(typeof d=="string",e,"internal-error"),sy(s,e.name),sy(r,e.name),Lt(typeof p=="boolean",e,"internal-error"),Lt(typeof m=="boolean",e,"internal-error"),sy(i,e.name),sy(o,e.name),sy(a,e.name),sy(l,e.name),sy(u,e.name),sy(h,e.name);const O=new cd({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new QI;r.updateFromServerResponse(n);const i=new cd({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await J6(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Lt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?cUe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new QI;a.updateFromIdToken(s);const l=new cd({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ZY(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lwe=new Map;function Em(t){c_(t instanceof Function,"Expected a class definition");let e=lwe.get(t);return e?(c_(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lwe.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lUe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lUe.type="NONE";const Z6=lUe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tV(t,e,n){return`firebase:${t}:${e}:${n}`}class YI{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=tV(this.userKey,r.apiKey,i),this.fullPersistenceKey=tV("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await X6(this.auth,{idToken:e}).catch(()=>{});return n?cd._fromGetAccountInfoResponse(this.auth,n,e):null}return cd._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new YI(Em(Z6),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Em(Z6);const o=tV(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await X6(e,{idToken:h}).catch(()=>{});if(!p)break;d=await cd._fromGetAccountInfoResponse(e,p,h)}else d=cd._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new YI(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new YI(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uwe(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fUe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uUe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gUe(e))return"Blackberry";if(mUe(e))return"Webos";if(hUe(e))return"Safari";if((e.includes("chrome/")||dUe(e))&&!e.includes("edge/"))return"Chrome";if(pUe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function uUe(t=wc()){return/firefox\//i.test(t)}function hUe(t=wc()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dUe(t=wc()){return/crios\//i.test(t)}function fUe(t=wc()){return/iemobile/i.test(t)}function pUe(t=wc()){return/android/i.test(t)}function gUe(t=wc()){return/blackberry/i.test(t)}function mUe(t=wc()){return/webos/i.test(t)}function Oie(t=wc()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SNt(t=wc()){return Oie(t)&&!!window.navigator?.standalone}function kNt(){return jAt()&&document.documentMode===10}function _Ue(t=wc()){return Oie(t)||pUe(t)||mUe(t)||gUe(t)||/windows phone/i.test(t)||fUe(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yUe(t,e=[]){let n;switch(t){case"Browser":n=uwe(wc());break;case"Worker":n=`${uwe(wc())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ib}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RNt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ANt(t,e={}){return V1(t,"GET","/v2/passwordPolicy",Pie(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PNt=6;class NNt{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PNt,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xNt{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hwe(this),this.idTokenSubscription=new hwe(this),this.beforeStateQueue=new RNt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rUe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Em(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await YI.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await X6(this,{idToken:e}),s=await cd._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xu(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await J6(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pNt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xu(this.app))return Promise.reject(pT(this));const n=e?qs(e):null;return n&&Lt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xu(this.app)?Promise.reject(pT(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xu(this.app)?Promise.reject(pT(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Em(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ANt(this),n=new NNt(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new OM("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await INt(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Em(e)||this._popupRedirectResolver;Lt(n,this,"argument-error"),this.redirectPersistenceManager=await YI.create(this,[Em(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Lt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yUe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(xu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uNt(`Error while retrieving App Check token: ${e.error}`),e?.token}}function D$(t){return qs(t)}class hwe{constructor(e){this.auth=e,this.observer=null,this.addObserver=JAt(n=>this.observer=n)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Lie={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DNt(t){Lie=t}function ONt(t){return Lie.loadJS(t)}function LNt(){return Lie.gapiScript}function MNt(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mie(t,e){const n=LM(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Cw(r,e??{}))return s;Up(s,"already-initialized")}return n.initialize({options:e})}function FNt(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Em);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function Fie(t,e,n){const s=D$(t);Lt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=vUe(e),{host:o,port:a}=VNt(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Lt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Lt(Cw(u,s.config.emulator)&&Cw(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,sg(o)?(R$(`${i}//${o}${l}`),A$("Auth",!0)):UNt()}function vUe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VNt(t){const e=vUe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:dwe(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:dwe(o)}}}function dwe(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UNt(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O${constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bm("not implemented")}_getIdTokenResponse(e){return bm("not implemented")}_linkToIdToken(e,n){return bm("not implemented")}_getReauthenticationResolver(e){return bm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function XI(t,e){return yNt(t,"POST","/v1/accounts:signInWithIdp",Pie(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qNt="http://localhost";class l_ extends O${constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new l_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Up("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new l_(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return XI(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,XI(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,XI(e,n)}buildRequest(){const e={requestUri:qNt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=F1(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vie{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FM extends Vie{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bf extends FM{constructor(){super("facebook.com")}static credential(e){return l_._fromParams({providerId:Bf.PROVIDER_ID,signInMethod:Bf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bf.credentialFromTaggedObject(e)}static credentialFromError(e){return Bf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bf.credential(e.oauthAccessToken)}catch{return null}}}Bf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bf.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yh extends FM{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return l_._fromParams({providerId:Yh.PROVIDER_ID,signInMethod:Yh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yh.credentialFromTaggedObject(e)}static credentialFromError(e){return Yh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Yh.credential(n,s)}catch{return null}}}Yh.GOOGLE_SIGN_IN_METHOD="google.com";Yh.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $f extends FM{constructor(){super("github.com")}static credential(e){return l_._fromParams({providerId:$f.PROVIDER_ID,signInMethod:$f.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $f.credentialFromTaggedObject(e)}static credentialFromError(e){return $f.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $f.credential(e.oauthAccessToken)}catch{return null}}}$f.GITHUB_SIGN_IN_METHOD="github.com";$f.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zf extends FM{constructor(){super("twitter.com")}static credential(e,n){return l_._fromParams({providerId:zf.PROVIDER_ID,signInMethod:zf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zf.credentialFromTaggedObject(e)}static credentialFromError(e){return zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return zf.credential(n,s)}catch{return null}}}zf.TWITTER_SIGN_IN_METHOD="twitter.com";zf.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uk{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await cd._fromIdTokenResponse(e,s,r),o=fwe(s);return new uk({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=fwe(s);return new uk({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function fwe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e9 extends rg{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,e9.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new e9(e,n,s,r)}}function wUe(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?e9._fromErrorAndOperation(t,r,e,s):r})}async function jNt(t,e,n=!1){const s=await fD(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return uk._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function BNt(t,e,n=!1){const{auth:s}=t;if(xu(s.app))return Promise.reject(pT(s));const r="reauthenticate";try{const i=await fD(t,wUe(s,r,e,t),n);Lt(i.idToken,s,"internal-error");const o=xie(i.idToken);Lt(o,s,"internal-error");const{sub:a}=o;return Lt(t.uid===a,s,"user-mismatch"),uk._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Up(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function $Nt(t,e,n=!1){if(xu(t.app))return Promise.reject(pT(t));const s="signIn",r=await wUe(t,s,e),i=await uk._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function Uie(t,e,n,s){return qs(t).onIdTokenChanged(e,n,s)}function qie(t,e,n){return qs(t).beforeAuthStateChanged(e,n)}function jie(t,e,n,s){return qs(t).onAuthStateChanged(e,n,s)}function TE(t){return qs(t).signOut()}const t9="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bUe{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(t9,"1"),this.storage.removeItem(t9),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zNt=1e3,HNt=10;class EUe extends bUe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_Ue(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);kNt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,HNt):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},zNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EUe.type="LOCAL";const Bie=EUe;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TUe extends bUe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TUe.type="SESSION";const L$=TUe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WNt(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class M${constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new M$(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await WNt(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M$.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $ie(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GNt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=$ie("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lp(){return window}function KNt(t){lp().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CUe(){return typeof lp().WorkerGlobalScope<"u"&&typeof lp().importScripts=="function"}async function QNt(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YNt(){return navigator?.serviceWorker?.controller||null}function XNt(){return CUe()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IUe="firebaseLocalStorageDb",JNt=1,n9="firebaseLocalStorage",SUe="fbase_key";class VM{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function F$(t,e){return t.transaction([n9],e?"readwrite":"readonly").objectStore(n9)}function ZNt(){const t=indexedDB.deleteDatabase(IUe);return new VM(t).toPromise()}function eX(){const t=indexedDB.open(IUe,JNt);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(n9,{keyPath:SUe})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(n9)?e(s):(s.close(),await ZNt(),e(await eX()))})})}async function pwe(t,e,n){const s=F$(t,!0).put({[SUe]:e,value:n});return new VM(s).toPromise()}async function ext(t,e){const n=F$(t,!1).get(e),s=await new VM(n).toPromise();return s===void 0?null:s.value}function gwe(t,e){const n=F$(t,!0).delete(e);return new VM(n).toPromise()}const txt=800,nxt=3;class kUe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eX(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>nxt)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CUe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M$._getInstance(XNt()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QNt(),!this.activeServiceWorker)return;this.sender=new GNt(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YNt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eX();return await pwe(e,t9,"1"),await gwe(e,t9),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>pwe(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>ext(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gwe(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=F$(r,!1).getAll();return new VM(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),txt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kUe.type="LOCAL";const zie=kUe;new MM(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RUe(t,e){return e?Em(e):(Lt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hie extends O${constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return XI(e,this._buildIdpRequest())}_linkToIdToken(e,n){return XI(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return XI(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sxt(t){return $Nt(t.auth,new Hie(t),t.bypassAuthState)}function rxt(t){const{auth:e,user:n}=t;return Lt(n,e,"internal-error"),BNt(n,new Hie(t),t.bypassAuthState)}async function ixt(t){const{auth:e,user:n}=t;return Lt(n,e,"internal-error"),jNt(n,new Hie(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AUe{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sxt;case"linkViaPopup":case"linkViaRedirect":return ixt;case"reauthViaPopup":case"reauthViaRedirect":return rxt;default:Up(this.auth,"internal-error")}}resolve(e){c_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){c_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oxt=new MM(2e3,1e4);async function Wie(t,e,n){if(xu(t.app))return Promise.reject(Dd(t,"operation-not-supported-in-this-environment"));const s=D$(t);hNt(t,e,Vie);const r=RUe(s,n);return new ME(s,"signInViaPopup",e,r).executeNotNull()}class ME extends AUe{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ME.currentPopupAction&&ME.currentPopupAction.cancel(),ME.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Lt(e,this.auth,"internal-error"),e}async onExecution(){c_(this.filter.length===1,"Popup operations only handle one event");const e=$ie();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Dd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ME.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oxt.get())};e()}}ME.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const axt="pendingRedirect",nV=new Map;class cxt extends AUe{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=nV.get(this.auth._key());if(!e){try{const n=await lxt(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}nV.set(this.auth._key(),e)}return this.bypassAuthState||nV.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lxt(t,e){const n=dxt(e),s=hxt(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function uxt(t,e){nV.set(t._key(),e)}function hxt(t){return Em(t._redirectPersistence)}function dxt(t){return tV(axt,t.config.apiKey,t.name)}async function fxt(t,e,n=!1){if(xu(t.app))return Promise.reject(pT(t));const s=D$(t),r=RUe(s,e),i=await new cxt(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pxt=600*1e3;class gxt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mxt(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!PUe(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Dd(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pxt&&this.cachedEventUids.clear(),this.cachedEventUids.has(mwe(e))}saveEventToCache(e){this.cachedEventUids.add(mwe(e)),this.lastProcessedEventTime=Date.now()}}function mwe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PUe({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mxt(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PUe(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _xt(t,e={}){return V1(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yxt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vxt=/^https?/;async function wxt(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _xt(t);for(const n of e)try{if(bxt(n))return}catch{}Up(t,"unauthorized-domain")}function bxt(t){const e=JY(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!vxt.test(n))return!1;if(yxt.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ext=new MM(3e4,6e4);function _we(){const t=lp().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Txt(t){return new Promise((e,n)=>{function s(){_we(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_we(),n(Dd(t,"network-request-failed"))},timeout:Ext.get()})}if(lp().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(lp().gapi?.load)s();else{const r=MNt("iframefcb");return lp()[r]=()=>{gapi.load?s():n(Dd(t,"network-request-failed"))},ONt(`${LNt()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw sV=null,e})}let sV=null;function Cxt(t){return sV=sV||Txt(t),sV}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ixt=new MM(5e3,15e3),Sxt="__/auth/iframe",kxt="emulator/auth/iframe",Rxt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Axt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pxt(t){const e=t.config;Lt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Aie(e,kxt):`https://${t.config.authDomain}/${Sxt}`,s={apiKey:e.apiKey,appName:t.name,v:Ib},r=Axt.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${F1(s).slice(1)}`}async function Nxt(t){const e=await Cxt(t),n=lp().gapi;return Lt(n,t,"internal-error"),e.open({where:document.body,url:Pxt(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rxt,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Dd(t,"network-request-failed"),a=lp().setTimeout(()=>{i(o)},Ixt.get());function l(){lp().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xxt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dxt=500,Oxt=600,Lxt="_blank",Mxt="http://localhost";class ywe{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fxt(t,e,n,s=Dxt,r=Oxt){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...xxt,width:s.toString(),height:r.toString(),top:i,left:o},u=wc().toLowerCase();n&&(a=dUe(u)?Lxt:n),uUe(u)&&(e=e||Mxt,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(SNt(u)&&a!=="_self")return Vxt(e||"",a),new ywe(null);const d=window.open(e||"",a,h);Lt(d,t,"popup-blocked");try{d.focus()}catch{}return new ywe(d)}function Vxt(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uxt="__/auth/handler",qxt="emulator/auth/handler",jxt=encodeURIComponent("fac");async function vwe(t,e,n,s,r,i){Lt(t.config.authDomain,t,"auth-domain-config-required"),Lt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ib,eventId:r};if(e instanceof Vie){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WY(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof FM){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${jxt}=${encodeURIComponent(l)}`:"";return`${Bxt(t)}?${F1(a).slice(1)}${u}`}function Bxt({config:t}){return t.emulator?Aie(t,qxt):`https://${t.authDomain}/${Uxt}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const T8="webStorageSupport";class $xt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L$,this._completeRedirectFn=fxt,this._overrideRedirectResult=uxt}async _openPopup(e,n,s,r){c_(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await vwe(e,n,s,JY(),r);return Fxt(e,i,$ie())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await vwe(e,n,s,JY(),r);return KNt(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(c_(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Nxt(e),s=new gxt(e);return n.register("authEvent",r=>(Lt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(T8,{type:T8},s=>{const r=s?.[0]?.[T8];r!==void 0&&n(!!r),Up(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wxt(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _Ue()||hUe()||Oie()}}const Gie=$xt;var wwe="@firebase/auth",bwe="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zxt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hxt(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wxt(t){Iw(new o_("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Lt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yUe(t)},u=new xNt(s,r,i,l);return FNt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Iw(new o_("auth-internal",e=>{const n=D$(e.getProvider("auth").getImmediate());return(s=>new zxt(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ch(wwe,bwe,Hxt(t)),Ch(wwe,bwe,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gxt=300,Kxt=QVe("authIdTokenMaxAge")||Gxt;let Ewe=null;const Qxt=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Kxt)return;const r=n?.token;Ewe!==r&&(Ewe=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Kie(t=x$()){const e=LM(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Mie(t,{popupRedirectResolver:Gie,persistence:[zie,Bie,L$]}),s=QVe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Qxt(i.toString());qie(n,o,()=>o(n.currentUser)),Uie(n,a=>o(a))}}const r=GVe("auth");return r&&Fie(n,`http://${r}`),n}function Yxt(){return document.getElementsByTagName("head")?.[0]??document}DNt({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Dd("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Yxt().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wxt("Browser");var Twe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iv,NUe;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),G=2;G<arguments.length;G++)b[G-2]=arguments[G];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),T=T.j(E).add(u(b))):(T=T.j(y),T=T.add(u(b)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=O(this,I),R(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(R(this))return R(I)?P(this).j(P(I)):P(P(this).j(I));if(R(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,G=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*G,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*G,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(R(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(R(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=W(y),T=W(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=u(y),b=E.j(v);R(b)||0<b.l(I);)y-=T,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,NUe=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Iv=o}).apply(typeof Twe<"u"?Twe:typeof self<"u"?self:typeof window<"u"?window:{});var IF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xUe,kA,DUe,rV,tX,OUe,LUe,MUe;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof IF=="object"&&IF];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var D=g++;return{value:f(D,c[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,D){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return f.prototype[N].apply(_,z)}}function R(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,D=_.length||0;c.length=N+D;for(let z=0;z<D;z++)c[N+z]=_[z]}else c.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=ct;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class G{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ct=new G,Ke=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(Qe)}};var Qe=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}de=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function it(c,f){if(he.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(W){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&it.aa.h.call(this)}}w(it,he);var Fe={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Q=0;function K(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Q,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function k(c){this.src=c,this.g={},this.h=0}k.prototype.add=function(c,f,g,_,N){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=A(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new K(f,this.src,D,!!_,N),f.fa=g,c.push(f)),f};function C(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=N)&&Array.prototype.splice.call(_,N,1),D&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function A(c,f,g,_){for(var N=0;N<c.length;++N){var D=c[N];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(c,f[D],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,D){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,le=Z(c);if(le||(c[x]=le=new k(c)),g=le.add(f,g,_,z,D),g.proxy)return g;if(_=H(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)qt||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Y(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function H(){function c(g){return f.call(c.src,c.listener,g)}const f=X;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(c,f[D],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(D=c.g[f],g=A(D,g,_,N),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=A(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])C(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Y(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Y(c){return c in L?L[c]:L[c]="on"+c}function X(c,f){if(c.da)c=!0;else{f=new it(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof k?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ge.call(this),this.i=new k(this),this.M=this,this.F=null}w(re,ge),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new he(f,c);else if(f instanceof he)f.target=f.target||c;else{var N=f;f=new he(_,c),T(f,N)}if(N=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];N=fe(z,_,!0,f)&&N}if(z=f.g=c,N=fe(z,_,!0,f)&&N,N=fe(z,_,!1,f)&&N,g)for(D=0;D<g.length;D++)z=f.g=g[D],N=fe(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function fe(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var le=z.listener,ke=z.ha||z.src;z.fa&&C(c.i,z),N=le.call(ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function Se(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ve(c){c.g=Se(()=>{c.g=null,c.i&&(c.i=!1,Ve(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class We extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(c){ge.call(this),this.h=c,this.g={}}w(Ge,ge);var ss=[];function Ue(c){J(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),Ue(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,rs=a.JSON.parse,Pr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xr(){}Xr.prototype.h=null;function ll(c){return c.h||(c.h=c.i())}function ul(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){he.call(this,"d")}w(Xi,he);function Ji(){he.call(this,"c")}w(Ji,he);var cn={},hl=null;function Nr(){return hl=hl||new re}cn.La="serverreachability";function dl(c){he.call(this,cn.La,c)}w(dl,he);function Ss(c){const f=Nr();se(f,new dl(f))}cn.STAT_EVENT="statevent";function fl(c,f){he.call(this,cn.STAT_EVENT,c),this.stat=f}w(fl,he);function Oe(c){const f=Nr();se(f,new fl(f,c))}cn.Ma="timingevent";function pl(c,f){he.call(this,cn.Ma,c),this.size=f}w(pl,he);function ks(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function lg(c,f,g,_,N,D){c.info(function(){if(c.g)if(D)for(var z="",le=D.split("&"),ke=0;ke<le.length;ke++){var ce=le[ke].split("=");if(1<ce.length){var Re=ce[0];ce=ce[1];var Me=Re.split("_");z=2<=Me.length&&Me[1]=="type"?z+(Re+"="+ce+"&"):z+(Re+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function ug(c,f,g,_,N,D,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+D+" "+z})}function Hn(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dg(c,g)+(_?" "+_:"")})}function hg(c,f){c.info(function(){return"TIMEOUT: "+f})}Rs.prototype.info=function(){};function dg(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var D=N[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Le(g)}catch{return f}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Dr(){}w(Dr,Xr),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Zi=new Dr;function jt(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var _l={},eo={};function to(c,f,g){c.L=1,c.v=Fr(gt(f)),c.m=g,c.P=!0,yl(c,null)}function yl(c,f){c.F=Date.now(),Or(c),c.A=gt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),xl(g.i,"t",_),c.C=0,g=c.j.J,c.h=new ml,c.g=Yl(c.j,g?f:null,!c.m),0<c.O&&(c.M=new We(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ss[0]=N.toString()),N=ss);for(var D=0;D<N.length;D++){var z=U(g,N[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ss(),lg(c.i,c.u,c.A,c.l,c.R,c.m)}jt.prototype.ca=function(c){c=c.target;const f=this.M;f&&mt(c)==3?f.j():this.Y(c)},jt.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mt(this.g);var f=this.g.Ba();const Kn=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Me!=4||f==7||(f==8||0>=Kn?Ss(3):Ss(2)),no(this);var g=this.g.Z();this.X=g;t:if(vl(this)){var _=Ul(this.g);c="";var N=_.length,D=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),As(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(D&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ug(this.i,this.u,this.A,this.l,this.R,Me,g),this.o){if(this.T&&!this.K){t:{if(this.g){var le,ke=this.g;if((le=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(le)){var ce=le;break t}}ce=null}if(g=ce)Hn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Oe(12),ln(this),As(this);break e}}if(this.P){g=!0;let Ye;for(;!this.J&&this.C<z.length;)if(Ye=fg(this,z),Ye==eo){Me==4&&(this.s=4,Oe(14),g=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==_l){this.s=4,Oe(15),Hn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hn(this.i,this.l,Ye,null),so(this,Ye);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)Hn(this.i,this.l,z,"[Invalid Chunked Response]"),ln(this),As(this);else if(0<z.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),lo(Re),Re.M=!0,Oe(11))}}else Hn(this.i,this.l,z,null),so(this,z);Me==4&&ln(this),this.o&&!this.J&&(Me==4?Wl(this.j,this):(this.o=!1,Or(this)))}else Pg(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),ln(this),As(this)}}}catch{}finally{}};function vl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fg(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?eo:(g=Number(f.substring(g,_)),isNaN(g)?_l:(_+=1,_+g>f.length?eo:(f=f.slice(_,_+g),c.C=_+g,f)))}jt.prototype.cancel=function(){this.J=!0,ln(this)};function Or(c){c.S=Date.now()+c.I,wl(c,c.I)}function wl(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ks(p(c.ba,c),f)}function no(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hg(this.i,this.A),this.L!=2&&(Ss(),Oe(17)),ln(this),this.s=2,As(this)):wl(this,this.S-c)};function As(c){c.j.G==0||c.J||Wl(c.j,c)}function ln(c){no(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ue(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function so(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ro(g.h,c))){if(!c.K&&ro(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$r(g),jr(g);else break e;co(g),Oe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=ks(p(g.Za,g),6e3));if(1>=Tl(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hn(g,11)}else if((c.K||g.g==c)&&$r(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ce=N[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Re=ce[3];Re!=null&&(g.la=Re,g.j.info("VER="+g.la));const Me=ce[4];Me!=null&&(g.Aa=Me,g.j.info("SVER="+g.Aa));const Kn=ce[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(_=1.5*Kn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ye=c.g;if(Ye){const Hr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var D=_.h;D.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(io(D,D.h),D.h=null))}if(_.D){const uo=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(_.ya=uo,ue(_.I,_.D,uo))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=Ql(_,_.J?_.ia:null,_.W),z.K){Cl(_.h,z);var le=z,ke=_.L;ke&&(le.I=ke),le.B&&(no(le),Or(le)),_.g=z}else zl(_);0<g.i.length&&Br(g)}else ce[0]!="stop"&&ce[0]!="close"||hn(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?hn(g,7):ao(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ss(4)}catch{}}var pg=class{constructor(c,f){this.g=c,this.map=f}};function bl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tl(c){return c.h?1:c.g?c.g.size:0}function ro(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function io(c,f){c.g?c.g.add(f):c.h=f}function Cl(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return R(c.i)}function gg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function mg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function Sl(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=mg(c),_=gg(c),N=_.length,D=0;D<N;D++)f.call(void 0,_[D],g&&g[D],c)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var D=c[g].substring(0,_);N=c[g].substring(_+1)}else D=c[g];f(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof un){this.h=c.h,Lr(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var f=c.i,g=new xs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Rl(this,g),this.m=c.m}else c&&(f=String(c).match(kl))?(this.h=!1,Lr(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Mr(this,f[4]),this.l=Ps(f[5]||"",!0),Rl(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}un.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ns(f,Al,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ns(f,Al,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ns(g,g.charAt(0)=="/"?wg:vg,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ns(g,Eg)),c.join("")};function gt(c){return new un(c)}function Lr(c,f,g){c.j=g?Ps(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Rl(c,f,g){f instanceof xs?(c.i=f,Tg(c.i,c.h)):(g||(f=Ns(f,bg)),c.i=new xs(f,c.h))}function ue(c,f,g){c.i.set(f,g)}function Fr(c){return ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ps(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ns(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,yg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,vg=/[#\?:]/g,wg=/[#\?]/g,bg=/[#\?@]/g,Eg=/#/g;function xs(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&_g(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xs.prototype,t.add=function(c,f){Bt(this),this.i=null,c=Wn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Pl(c,f){Bt(c),f=Wn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nl(c,f){return Bt(c),f=Wn(c,f),c.g.has(f)}t.forEach=function(c,f){Bt(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){Bt(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let D=0;D<N.length;D++)g.push(f[_])}return g},t.V=function(c){Bt(this);let f=[];if(typeof c=="string")Nl(this,c)&&(f=f.concat(this.g.get(Wn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Bt(this),this.i=null,c=Wn(this,c),Nl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xl(c,f,g){Pl(c,f),0<g.length&&(c.i=null,c.g.set(Wn(c,f),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=D;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function Wn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Tg(c,f){f&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(Pl(this,_),xl(this,N,g))},c)),c.j=f}function Cg(c,f){const g=new Rs;if(a.Image){const _=new Image;_.onload=m($t,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m($t,g,"TestLoadImage: error",!1,f,_),_.onabort=m($t,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m($t,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ig(c,f){const g=new Rs,_=new AbortController,N=setTimeout(()=>{_.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(D=>{clearTimeout(N),D.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),$t(g,"TestPingServer: error",!1,f)})}function $t(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Sg(){this.g=new Pr}function kg(c,f,g){const _=g||"";try{Sl(c,function(N,D){let z=N;u(N)&&(z=Le(N)),f.push(_+D+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vr,Xr),Vr.prototype.g=function(){return new Ur(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ur(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ur,re),t=Ur.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ds(this):Os(this),this.readyState==3&&Dl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let f="";return J(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function oo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ol(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ue(c,f,g))}function pe(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pe,re);var Rg=/^https?$/i,Ag=["POST","PUT"];t=pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ll(this.o):ll(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(D){Ll(this,D);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Ll(this,D)}};function Ll(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Ml(c),qr(c)}function Ml(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mt(c)!=4||c.Z()!=2)){if(c.u&&mt(c)==4)Se(c.Ea,0,c);else if(se(c,"readystatechange"),mt(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(kl)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Rg.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var D=2<mt(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Ml(c)}}finally{qr(c)}}}}function qr(c,f){if(c.g){Vl(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Vl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rs(f)}};function Ul(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pg(c){const f={};c=(c.g&&2<=mt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[N]||[];f[N]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function ql(c){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bl(c&&c.concurrentRequestLimit),this.Da=new Sg,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ql.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Oe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Ql(this,null,this.W),Br(this)};function ao(c){if(jl(c),c.G==3){var f=c.U++,g=gt(c.I);if(ue(g,"SID",c.K),ue(g,"RID",f),ue(g,"TYPE","terminate"),Ms(c,g),f=new jt(c,c.j,f),f.L=2,f.v=Fr(gt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Or(f)}Kl(c)}function jr(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function jl(c){jr(c),c.u&&(a.clearTimeout(c.u),c.u=null),$r(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Br(c){if(!El(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.B=0}}function Ng(c,f){return Tl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ks(p(c.Ga,c,f),Gl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new jt(this,this.j,c);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(N.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$l(this,N,f),g=gt(this.I),ue(g,"RID",c),ue(g,"CVER",22),this.D&&ue(g,"X-HTTP-Session-Id",this.D),Ms(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(Ol(D)))+"&"+f:this.m&&oo(g,this.m,D)),io(this.h,N),this.Ua&&ue(g,"TYPE","init"),this.P?(ue(g,"$req",f),ue(g,"SID","null"),N.T=!0,to(N,g,null)):to(N,g,f),this.G=2}}else this.G==3&&(c?Bl(this,c):this.i.length==0||El(this.h)||Bl(this))};function Bl(c,f){var g;f?g=f.l:g=c.U++;const _=gt(c.I);ue(_,"SID",c.K),ue(_,"RID",g),ue(_,"AID",c.T),Ms(c,_),c.m&&c.o&&oo(_,c.m,c.o),g=new jt(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$l(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),io(c.h,g),to(g,_,f)}function Ms(c,f){c.H&&J(c.H,function(g,_){ue(f,_,g)}),c.l&&Sl({},function(g,_){ue(f,_,g)})}function $l(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=N[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let le=!0;for(let ke=0;ke<g;ke++){let ce=N[ke].g;const Re=N[ke].map;if(ce-=D,0>ce)D=Math.max(0,N[ke].g-100),le=!1;else try{kg(Re,z,"req"+ce+"_")}catch{_&&_(Re)}}if(le){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function zl(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ks(p(c.Fa,c),Gl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ks(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),jr(this),Hl(this))};function lo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hl(c){c.g=new jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=gt(c.qa);ue(f,"RID","rpc"),ue(f,"SID",c.K),ue(f,"AID",c.T),ue(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ue(f,"TO",c.ja),ue(f,"TYPE","xmlhttp"),Ms(c,f),c.m&&c.o&&oo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Fr(gt(f)),g.m=null,g.P=!0,yl(g,c)}t.Za=function(){this.C!=null&&(this.C=null,jr(this),co(this),Oe(19))};function $r(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Wl(c,f){var g=null;if(c.g==f){$r(c),lo(c),c.g=null;var _=2}else if(ro(c.h,f))g=f.D,Cl(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Nr(),se(_,new pl(_,g)),Br(c)}else zl(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&Ng(c,f)||_==2&&co(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:hn(c,5);break;case 4:hn(c,10);break;case 3:hn(c,6);break;default:hn(c,2)}}}function Gl(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function hn(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new un(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lr(_,"https"),Fr(_),N?Cg(_.toString(),g):Ig(_.toString(),g)}else Oe(2);c.G=0,c.l&&c.l.sa(f),Kl(c),jl(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const f=Il(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ql(c,f,g){var _=g instanceof un?gt(g):new un(g);if(_.g!="")f&&(_.g=f+"."+_.g),Mr(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var D=new un(null);_&&Lr(D,_),f&&(D.g=f),N&&Mr(D,N),g&&(D.l=g),_=D}return g=c.D,f=c.ya,g&&f&&ue(_,g,f),ue(_,"VER",c.la),Ms(c,_),_}function Yl(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new pe(new Vr({eb:g})):new pe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(c,f){return new qe(c,f)};function qe(c,f){re.call(this),this.g=new ql(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gn(this)}w(qe,re),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){ao(this.g)},qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Le(c),c=g);f.i.push(new pg(f.Ya++,c)),f.G==3&&Br(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,qe.aa.N.call(this)};function Jl(c){Xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(Jl,Xi);function Zl(){Ji.call(this),this.status=1}w(Zl,Ji);function Gn(c){this.g=c}w(Gn,Xl),Gn.prototype.ua=function(){se(this.g,"a")},Gn.prototype.ta=function(c){se(this.g,new Jl(c))},Gn.prototype.sa=function(c){se(this.g,new Zl)},Gn.prototype.ra=function(){se(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,MUe=function(){return new zr},LUe=function(){return Nr()},OUe=cn,tX={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,rV=xr,gl.COMPLETE="complete",DUe=gl,ul.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",re.prototype.listen=re.prototype.K,kA=ul,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,xUe=pe}).apply(typeof IF<"u"?IF:typeof self<"u"?self:typeof window<"u"?window:{});const Cwe="@firebase/firestore",Iwe="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wa{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wa.UNAUTHENTICATED=new Wa(null),Wa.GOOGLE_CREDENTIALS=new Wa("google-credentials-uid"),Wa.FIRST_PARTY=new Wa("first-party-uid"),Wa.MOCK_USER=new Wa("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let U1="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tC=new N$("@firebase/firestore");function J0(){return tC.logLevel}function $e(t,...e){if(tC.logLevel<=bn.DEBUG){const n=e.map(Qie);tC.debug(`Firestore (${U1}): ${t}`,...n)}}function u_(t,...e){if(tC.logLevel<=bn.ERROR){const n=e.map(Qie);tC.error(`Firestore (${U1}): ${t}`,...n)}}function hk(t,...e){if(tC.logLevel<=bn.WARN){const n=e.map(Qie);tC.warn(`Firestore (${U1}): ${t}`,...n)}}function Qie(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tt(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,FUe(t,s,n)}function FUe(t,e,n){let s=`FIRESTORE (${U1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw u_(s),new Error(s)}function Es(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||FUe(e,r,s)}function Xt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends rg{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sv{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VUe{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xxt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wa.UNAUTHENTICATED))}shutdown(){}}class Jxt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zxt{constructor(e){this.t=e,this.currentUser=Wa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Es(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Sv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Sv,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Sv)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Es(typeof s.accessToken=="string",31837,{l:s}),new VUe(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Es(e===null||typeof e=="string",2055,{h:e}),new Wa(e)}}class eDt{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Wa.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tDt{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new eDt(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Wa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Swe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nDt{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Es(this.o===void 0,3512);const s=i=>{i.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Swe(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Es(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Swe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sDt(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yie{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=sDt(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function xn(t,e){return t<e?-1:t>e?1:0}function nX(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return C8(r)===C8(i)?xn(r,i):C8(r)?1:-1}return xn(t.length,e.length)}const rDt=55296,iDt=57343;function C8(t){const e=t.charCodeAt(0);return e>=rDt&&e<=iDt}function dk(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kwe="__name__";class Df{constructor(e,n,s){n===void 0?n=0:n>e.length&&Tt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Tt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Df.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Df?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Df.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return xn(e.length,n.length)}static compareSegments(e,n){const s=Df.isNumericId(e),r=Df.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Df.extractNumericId(e).compare(Df.extractNumericId(n)):nX(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Iv.fromString(e.substring(4,e.length-2))}}class Kr extends Df{construct(e,n,s){return new Kr(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Kr(n)}static emptyPath(){return new Kr([])}}const oDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class va extends Df{construct(e,n,s){return new va(e,n,s)}static isValidIdentifier(e){return oDt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),va.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kwe}static keyField(){return new va([kwe])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ze(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ze(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Ze(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new va(n)}static emptyPath(){return new va([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ht{constructor(e){this.path=e}static fromPath(e){return new ht(Kr.fromString(e))}static fromName(e){return new ht(Kr.fromString(e).popFirst(5))}static empty(){return new ht(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new Kr(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aDt(t,e,n){if(!n)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cDt(t,e,n,s){if(e===!0&&s===!0)throw new Ze(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rwe(t){if(!ht.isDocumentKey(t))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UUe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xie(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Tt(12329,{type:typeof t})}function Od(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xie(t);throw new Ze(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fi(t,e){const n={typeString:t};return e&&(n.value=e),n}function UM(t,e){if(!UUe(t))throw new Ze(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Ze(Ee.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Awe=-62135596800,Pwe=1e6;class Er{static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Pwe);return new Er(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Awe)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pwe}_compareTo(e){return this.seconds===e.seconds?xn(this.nanoseconds,e.nanoseconds):xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Er._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(UM(e,Er._jsonSchema))return new Er(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Awe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Er._jsonSchemaVersion="firestore/timestamp/1.0",Er._jsonSchema={type:Fi("string",Er._jsonSchemaVersion),seconds:Fi("number"),nanoseconds:Fi("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let rn=class iV{static fromTimestamp(e){return new iV(e)}static min(){return new iV(new Er(0,0))}static max(){return new iV(new Er(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pD=-1;function lDt(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=rn.fromTimestamp(s===1e9?new Er(n+1,0):new Er(n,s));return new Sw(r,ht.empty(),e)}function uDt(t){return new Sw(t.readTime,t.key,pD)}class Sw{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Sw(rn.min(),ht.empty(),pD)}static max(){return new Sw(rn.max(),ht.empty(),pD)}}function hDt(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:xn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fDt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function q1(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==dDt)throw t;$e("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,s)=>{n(e)})}static reject(e){return new _e((n,s)=>{s(e)})}static waitFor(e){return new _e((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=_e.resolve(!1);for(const s of e)n=n.next(r=>r?_e.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new _e((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new _e((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function pDt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function j1(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class V${constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}V$.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jie=-1;function U$(t){return t==null}function s9(t){return t===0&&1/t==-1/0}function gDt(t){return typeof t=="number"&&Number.isInteger(t)&&!s9(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qUe="";function mDt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nwe(e)),e=_Dt(t.get(n),e);return Nwe(e)}function _Dt(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case qUe:n+="";break;default:n+=i}}return n}function Nwe(t){return t+qUe+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xwe(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sb(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jUe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Wi=class sX{constructor(e,n){this.comparator=e,this.root=n||kv.EMPTY}insert(e,n){return new sX(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kv.BLACK,null,null))}remove(e){return new sX(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kv.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SF(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SF(this.root,e,this.comparator,!1)}getReverseIterator(){return new SF(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SF(this.root,e,this.comparator,!0)}},SF=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},kv=class zg{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??zg.RED,this.left=r??zg.EMPTY,this.right=i??zg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new zg(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return zg.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Tt(27949);return e+(this.isRed()?0:1)}};kv.EMPTY=null,kv.RED=!0,kv.BLACK=!1;kv.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new kv(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vo{constructor(e){this.comparator=e,this.data=new Wi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dwe(this.data.getIterator())}getIteratorFrom(e){return new Dwe(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vo(this.comparator);return n.data=e,n}}class Dwe{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bu{constructor(e){this.fields=e,e.sort(va.comparator)}static empty(){return new Bu([])}unionWith(e){let n=new Vo(va.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Bu(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dk(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BUe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sa{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new BUe("Invalid base64 string: "+r):r}}(e);return new Sa(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Sa(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sa.EMPTY_BYTE_STRING=new Sa("");const yDt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kw(t){if(Es(!!t,39018),typeof t=="string"){let e=0;const n=yDt.exec(t);if(Es(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ii(t.seconds),nanos:Ii(t.nanos)}}function Ii(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Rw(t){return typeof t=="string"?Sa.fromBase64String(t):Sa.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $Ue="server_timestamp",zUe="__type__",HUe="__previous_value__",WUe="__local_write_time__";function Zie(t){return(t?.mapValue?.fields||{})[zUe]?.stringValue===$Ue}function q$(t){const e=t.mapValue.fields[HUe];return Zie(e)?q$(e):e}function gD(t){const e=kw(t.mapValue.fields[WUe].timestampValue);return new Er(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vDt{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const r9="(default)";class mD{constructor(e,n){this.projectId=e,this.database=n||r9}static empty(){return new mD("","")}get isDefaultDatabase(){return this.database===r9}isEqual(e){return e instanceof mD&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GUe="__type__",wDt="__max__",kF={mapValue:{}},KUe="__vector__",i9="value";function Aw(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zie(t)?4:EDt(t)?9007199254740991:bDt(t)?10:11:Tt(28295,{value:t})}function qp(t,e){if(t===e)return!0;const n=Aw(t);if(n!==Aw(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gD(t).isEqual(gD(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=kw(s.timestampValue),o=kw(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Rw(s.bytesValue).isEqual(Rw(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Ii(s.geoPointValue.latitude)===Ii(r.geoPointValue.latitude)&&Ii(s.geoPointValue.longitude)===Ii(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ii(s.integerValue)===Ii(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Ii(s.doubleValue),o=Ii(r.doubleValue);return i===o?s9(i)===s9(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return dk(t.arrayValue.values||[],e.arrayValue.values||[],qp);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(xwe(i)!==xwe(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!qp(i[a],o[a])))return!1;return!0}(t,e);default:return Tt(52216,{left:t})}}function _D(t,e){return(t.values||[]).find(n=>qp(n,e))!==void 0}function fk(t,e){if(t===e)return 0;const n=Aw(t),s=Aw(e);if(n!==s)return xn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Ii(r.integerValue||r.doubleValue),a=Ii(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Owe(t.timestampValue,e.timestampValue);case 4:return Owe(gD(t),gD(e));case 5:return nX(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Rw(r),a=Rw(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=xn(o[l],a[l]);if(u!==0)return u}return xn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=xn(Ii(r.latitude),Ii(i.latitude));return o!==0?o:xn(Ii(r.longitude),Ii(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lwe(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[i9]?.arrayValue,u=a[i9]?.arrayValue,h=xn(l?.values?.length||0,u?.values?.length||0);return h!==0?h:Lwe(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===kF.mapValue&&i===kF.mapValue)return 0;if(r===kF.mapValue)return 1;if(i===kF.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=nX(a[h],u[h]);if(d!==0)return d;const p=fk(o[a[h]],l[u[h]]);if(p!==0)return p}return xn(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Tt(23264,{he:n})}}function Owe(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xn(t,e);const n=kw(t),s=kw(e),r=xn(n.seconds,s.seconds);return r!==0?r:xn(n.nanos,s.nanos)}function Lwe(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=fk(n[r],s[r]);if(i)return i}return xn(n.length,s.length)}function pk(t){return rX(t)}function rX(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=kw(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Rw(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return ht.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=rX(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${rX(e.fields[i])}`;return s+"}"}(t.mapValue):Tt(61005,{value:t})}function oV(t){switch(Aw(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=q$(t);return e?16+oV(e):16;case 5:return 2*t.stringValue.length;case 6:return Rw(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+oV(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Sb(n.fields,(r,i)=>{s+=r.length+oV(i)}),s}(t.mapValue);default:throw Tt(13486,{value:t})}}function iX(t){return!!t&&"integerValue"in t}function eoe(t){return!!t&&"arrayValue"in t}function Mwe(t){return!!t&&"nullValue"in t}function Fwe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aV(t){return!!t&&"mapValue"in t}function bDt(t){return(t?.mapValue?.fields||{})[GUe]?.stringValue===KUe}function KP(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Sb(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=KP(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=KP(t.arrayValue.values[n]);return e}return{...t}}function EDt(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wDt}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class au{constructor(e){this.value=e}static empty(){return new au({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!aV(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=KP(n)}setAll(e){let n=va.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=KP(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());aV(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qp(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];aV(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Sb(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new au(KP(this.value))}}function QUe(t){const e=[];return Sb(t.fields,(n,s)=>{const r=new va([n]);if(aV(s)){const i=QUe(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Bu(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nc{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nc(e,0,rn.min(),rn.min(),rn.min(),au.empty(),0)}static newFoundDocument(e,n,s,r){return new nc(e,1,n,rn.min(),s,r,0)}static newNoDocument(e,n){return new nc(e,2,n,rn.min(),rn.min(),au.empty(),0)}static newUnknownDocument(e,n){return new nc(e,3,n,rn.min(),rn.min(),au.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=au.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=au.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o9{constructor(e,n){this.position=e,this.inclusive=n}}function Vwe(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ht.comparator(ht.fromName(o.referenceValue),n.key):s=fk(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Uwe(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qp(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a9{constructor(e,n="asc"){this.field=e,this.dir=n}}function TDt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YUe{}class ko extends YUe{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new IDt(e,n,s):n==="array-contains"?new RDt(e,s):n==="in"?new ADt(e,s):n==="not-in"?new PDt(e,s):n==="array-contains-any"?new NDt(e,s):new ko(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new SDt(e,s):new kDt(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fk(n,this.value)):n!==null&&Aw(this.value)===Aw(n)&&this.matchesComparison(fk(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jp extends YUe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new jp(e,n)}matches(e){return XUe(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XUe(t){return t.op==="and"}function JUe(t){return CDt(t)&&XUe(t)}function CDt(t){for(const e of t.filters)if(e instanceof jp)return!1;return!0}function oX(t){if(t instanceof ko)return t.field.canonicalString()+t.op.toString()+pk(t.value);if(JUe(t))return t.filters.map(e=>oX(e)).join(",");{const e=t.filters.map(n=>oX(n)).join(",");return`${t.op}(${e})`}}function ZUe(t,e){return t instanceof ko?function(n,s){return s instanceof ko&&n.op===s.op&&n.field.isEqual(s.field)&&qp(n.value,s.value)}(t,e):t instanceof jp?function(n,s){return s instanceof jp&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&ZUe(i,s.filters[o]),!0):!1}(t,e):void Tt(19439)}function e6e(t){return t instanceof ko?function(e){return`${e.field.canonicalString()} ${e.op} ${pk(e.value)}`}(t):t instanceof jp?function(e){return e.op.toString()+" {"+e.getFilters().map(e6e).join(" ,")+"}"}(t):"Filter"}class IDt extends ko{constructor(e,n,s){super(e,n,s),this.key=ht.fromName(s.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class SDt extends ko{constructor(e,n){super(e,"in",n),this.keys=t6e("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kDt extends ko{constructor(e,n){super(e,"not-in",n),this.keys=t6e("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t6e(t,e){return(e.arrayValue?.values||[]).map(n=>ht.fromName(n.referenceValue))}class RDt extends ko{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eoe(n)&&_D(n.arrayValue,this.value)}}class ADt extends ko{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_D(this.value.arrayValue,n)}}class PDt extends ko{constructor(e,n){super(e,"not-in",n)}matches(e){if(_D(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_D(this.value.arrayValue,n)}}class NDt extends ko{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eoe(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>_D(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xDt{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function qwe(t,e=null,n=[],s=[],r=null,i=null,o=null){return new xDt(t,e,n,s,r,i,o)}function toe(t){const e=Xt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>oX(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),U$(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>pk(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>pk(s)).join(",")),e.Te=n}return e.Te}function noe(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TDt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZUe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uwe(t.startAt,e.startAt)&&Uwe(t.endAt,e.endAt)}function aX(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j${constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DDt(t,e,n,s,r,i,o,a){return new j$(t,e,n,s,r,i,o,a)}function B$(t){return new j$(t)}function jwe(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ODt(t){return t.collectionGroup!==null}function QP(t){const e=Xt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new Vo(va.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new a9(r,s))}),n.has(va.keyField().canonicalString())||e.Ie.push(new a9(va.keyField(),s))}return e.Ie}function up(t){const e=Xt(t);return e.Ee||(e.Ee=LDt(e,QP(t))),e.Ee}function LDt(t,e){if(t.limitType==="F")return qwe(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new a9(r.field,i)});const n=t.endAt?new o9(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new o9(t.startAt.position,t.startAt.inclusive):null;return qwe(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function cX(t,e,n){return new j$(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $$(t,e){return noe(up(t),up(e))&&t.limitType===e.limitType}function n6e(t){return`${toe(up(t))}|lt:${t.limitType}`}function Z0(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>e6e(s)).join(", ")}]`),U$(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>pk(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>pk(s)).join(",")),`Target(${n})`}(up(t))}; limitType=${t.limitType})`}function z$(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ht.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of QP(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=Vwe(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,QP(n),s)||n.endAt&&!function(r,i,o){const a=Vwe(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,QP(n),s))}(t,e)}function MDt(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s6e(t){return(e,n)=>{let s=!1;for(const r of QP(t)){const i=FDt(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function FDt(t,e,n){const s=t.field.isKeyField()?ht.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?fk(a,l):Tt(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Tt(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GC{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sb(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return jUe(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VDt=new Wi(ht.comparator);function h_(){return VDt}const r6e=new Wi(ht.comparator);function RA(...t){let e=r6e;for(const n of t)e=e.insert(n.key,n);return e}function i6e(t){let e=r6e;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function FE(){return YP()}function o6e(){return YP()}function YP(){return new GC(t=>t.toString(),(t,e)=>t.isEqual(e))}const UDt=new Wi(ht.comparator),qDt=new Vo(ht.comparator);function Un(...t){let e=qDt;for(const n of t)e=e.add(n);return e}const jDt=new Vo(xn);function BDt(){return jDt}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function soe(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:s9(e)?"-0":e}}function a6e(t){return{integerValue:""+t}}function $Dt(t,e){return gDt(e)?a6e(e):soe(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class H${constructor(){this._=void 0}}function zDt(t,e,n){return t instanceof yD?function(s,r){const i={fields:{[zUe]:{stringValue:$Ue},[WUe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Zie(r)&&(r=q$(r)),r&&(i.fields[HUe]=r),{mapValue:i}}(n,e):t instanceof vD?l6e(t,e):t instanceof wD?u6e(t,e):function(s,r){const i=c6e(s,r),o=Bwe(i)+Bwe(s.Ae);return iX(i)&&iX(s.Ae)?a6e(o):soe(s.serializer,o)}(t,e)}function HDt(t,e,n){return t instanceof vD?l6e(t,e):t instanceof wD?u6e(t,e):n}function c6e(t,e){return t instanceof c9?function(n){return iX(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class yD extends H${}class vD extends H${constructor(e){super(),this.elements=e}}function l6e(t,e){const n=h6e(e);for(const s of t.elements)n.some(r=>qp(r,s))||n.push(s);return{arrayValue:{values:n}}}class wD extends H${constructor(e){super(),this.elements=e}}function u6e(t,e){let n=h6e(e);for(const s of t.elements)n=n.filter(r=>!qp(r,s));return{arrayValue:{values:n}}}class c9 extends H${constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bwe(t){return Ii(t.integerValue||t.doubleValue)}function h6e(t){return eoe(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WDt{constructor(e,n){this.field=e,this.transform=n}}function GDt(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof vD&&s instanceof vD||n instanceof wD&&s instanceof wD?dk(n.elements,s.elements,qp):n instanceof c9&&s instanceof c9?qp(n.Ae,s.Ae):n instanceof yD&&s instanceof yD}(t.transform,e.transform)}class KDt{constructor(e,n){this.version=e,this.transformResults=n}}class Ld{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ld}static exists(e){return new Ld(void 0,e)}static updateTime(e){return new Ld(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cV(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class W${}function d6e(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new roe(t.key,Ld.none()):new qM(t.key,t.data,Ld.none());{const n=t.data,s=au.empty();let r=new Vo(va.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new kb(t.key,s,new Bu(r.toArray()),Ld.none())}}function QDt(t,e,n){t instanceof qM?function(s,r,i){const o=s.value.clone(),a=zwe(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof kb?function(s,r,i){if(!cV(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=zwe(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(f6e(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function XP(t,e,n,s){return t instanceof qM?function(r,i,o,a){if(!cV(r.precondition,i))return o;const l=r.value.clone(),u=Hwe(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof kb?function(r,i,o,a){if(!cV(r.precondition,i))return o;const l=Hwe(r.fieldTransforms,a,i),u=i.data;return u.setAll(f6e(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return cV(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function YDt(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=c6e(s.transform,r||null);i!=null&&(n===null&&(n=au.empty()),n.set(s.field,i))}return n||null}function $we(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&dk(n,s,(r,i)=>GDt(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qM extends W${constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kb extends W${constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function f6e(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function zwe(t,e,n){const s=new Map;Es(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,HDt(o,a,n[r]))}return s}function Hwe(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,zDt(i,o,e))}return s}class roe extends W${constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XDt extends W${constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JDt{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&QDt(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=XP(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=XP(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=o6e();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=d6e(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(rn.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Un())}isEqual(e){return this.batchId===e.batchId&&dk(this.mutations,e.mutations,(n,s)=>$we(n,s))&&dk(this.baseMutations,e.baseMutations,(n,s)=>$we(n,s))}}class ioe{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Es(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return UDt}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ioe(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZDt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eOt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ni,Xn;function tOt(t){switch(t){case Ee.OK:return Tt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Tt(15467,{code:t})}}function p6e(t){if(t===void 0)return u_("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case Ni.OK:return Ee.OK;case Ni.CANCELLED:return Ee.CANCELLED;case Ni.UNKNOWN:return Ee.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return Ee.INTERNAL;case Ni.UNAVAILABLE:return Ee.UNAVAILABLE;case Ni.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Ni.NOT_FOUND:return Ee.NOT_FOUND;case Ni.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Ni.ABORTED:return Ee.ABORTED;case Ni.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Ni.DATA_LOSS:return Ee.DATA_LOSS;default:return Tt(39323,{code:t})}}(Xn=Ni||(Ni={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nOt(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sOt=new Iv([4294967295,4294967295],0);function Wwe(t){const e=nOt().encode(t),n=new NUe;return n.update(e),new Uint8Array(n.digest())}function Gwe(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Iv([n,s],0),new Iv([r,i],0)]}class ooe{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new AA(`Invalid padding: ${n}`);if(s<0)throw new AA(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new AA(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new AA(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Iv.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Iv.fromNumber(s)));return r.compare(sOt)===1&&(r=new Iv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Wwe(e),[s,r]=Gwe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ooe(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Wwe(e),[s,r]=Gwe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class AA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G${constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,jM.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new G$(rn.min(),r,new Wi(xn),h_(),Un())}}class jM{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new jM(s,n,Un(),Un(),Un())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lV{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class g6e{constructor(e,n){this.targetId=e,this.Ce=n}}class m6e{constructor(e,n,s=Sa.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Kwe{constructor(){this.ve=0,this.Fe=Qwe(),this.Me=Sa.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Un(),n=Un(),s=Un();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Tt(38017,{changeType:i})}}),new jM(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Qwe()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Es(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rOt{constructor(e){this.Ge=e,this.ze=new Map,this.je=h_(),this.Je=RF(),this.He=RF(),this.Ye=new Wi(xn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Tt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(aX(i))if(s===0){const o=new ht(i.path);this.et(n,o,nc.newNoDocument(o,rn.min()))}else Es(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Rw(s).toUint8Array()}catch(l){if(l instanceof BUe)return hk("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ooe(o,r,i)}catch(l){return hk(l instanceof AA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&aX(a.target)){const l=new ht(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,nc.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Un();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new G$(e,n,this.Ye,this.je,s);return this.je=h_(),this.Je=RF(),this.He=RF(),this.Ye=new Wi(xn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Kwe,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vo(xn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vo(xn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Kwe),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function RF(){return new Wi(ht.comparator)}function Qwe(){return new Wi(ht.comparator)}const iOt={asc:"ASCENDING",desc:"DESCENDING"},oOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aOt={and:"AND",or:"OR"};class cOt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lX(t,e){return t.useProto3Json||U$(e)?e:{value:e}}function l9(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _6e(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lOt(t,e){return l9(t,e.toTimestamp())}function hp(t){return Es(!!t,49232),rn.fromTimestamp(function(e){const n=kw(e);return new Er(n.seconds,n.nanos)}(t))}function aoe(t,e){return uX(t,e).canonicalString()}function uX(t,e){const n=function(s){return new Kr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function y6e(t){const e=Kr.fromString(t);return Es(T6e(e),10190,{key:e.toString()}),e}function hX(t,e){return aoe(t.databaseId,e.path)}function I8(t,e){const n=y6e(e);if(n.get(1)!==t.databaseId.projectId)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(w6e(n))}function v6e(t,e){return aoe(t.databaseId,e)}function uOt(t){const e=y6e(t);return e.length===4?Kr.emptyPath():w6e(e)}function dX(t){return new Kr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w6e(t){return Es(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ywe(t,e,n){return{name:hX(t,e),fields:n.value.mapValue.fields}}function hOt(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Tt(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(Es(u===void 0||typeof u=="string",58123),Sa.fromBase64String(u||"")):(Es(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Sa.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?Ee.UNKNOWN:p6e(l.code);return new Ze(u,l.message||"")}(o);n=new m6e(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=I8(t,s.document.name),i=hp(s.document.updateTime),o=s.document.createTime?hp(s.document.createTime):rn.min(),a=new au({mapValue:{fields:s.document.fields}}),l=nc.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new lV(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=I8(t,s.document),i=s.readTime?hp(s.readTime):rn.min(),o=nc.newNoDocument(r,i),a=s.removedTargetIds||[];n=new lV([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=I8(t,s.document),i=s.removedTargetIds||[];n=new lV([],i,r,null)}else{if(!("filter"in e))return Tt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new eOt(r,i),a=s.targetId;n=new g6e(a,o)}}return n}function dOt(t,e){let n;if(e instanceof qM)n={update:Ywe(t,e.key,e.value)};else if(e instanceof roe)n={delete:hX(t,e.key)};else if(e instanceof kb)n={update:Ywe(t,e.key,e.data),updateMask:bOt(e.fieldMask)};else{if(!(e instanceof XDt))return Tt(16599,{Vt:e.type});n={verify:hX(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof yD)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof vD)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof wD)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof c9)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Tt(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:lOt(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Tt(27497)}(t,e.precondition)),n}function fOt(t,e){return t&&t.length>0?(Es(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?hp(s.updateTime):hp(r);return i.isEqual(rn.min())&&(i=hp(r)),new KDt(i,s.transformResults||[])}(n,e))):[]}function pOt(t,e){return{documents:[v6e(t,e.path)]}}function gOt(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=v6e(t,r);const i=function(l){if(l.length!==0)return E6e(jp.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:eI(h.field),direction:yOt(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=lX(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function mOt(t){let e=uOt(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Es(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=b6e(h);return d instanceof jp&&JUe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new a9(tI(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,U$(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new o9(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new o9(p,d)}(n.endAt)),DDt(e,r,o,i,a,"F",l,u)}function _Ot(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function b6e(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=tI(e.unaryFilter.field);return ko.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=tI(e.unaryFilter.field);return ko.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tI(e.unaryFilter.field);return ko.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=tI(e.unaryFilter.field);return ko.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(t):t.fieldFilter!==void 0?function(e){return ko.create(tI(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return jp.create(e.compositeFilter.filters.map(n=>b6e(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(e.compositeFilter.op))}(t):Tt(30097,{filter:t})}function yOt(t){return iOt[t]}function vOt(t){return oOt[t]}function wOt(t){return aOt[t]}function eI(t){return{fieldPath:t.canonicalString()}}function tI(t){return va.fromServerFormat(t.fieldPath)}function E6e(t){return t instanceof ko?function(e){if(e.op==="=="){if(Fwe(e.value))return{unaryFilter:{field:eI(e.field),op:"IS_NAN"}};if(Mwe(e.value))return{unaryFilter:{field:eI(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Fwe(e.value))return{unaryFilter:{field:eI(e.field),op:"IS_NOT_NAN"}};if(Mwe(e.value))return{unaryFilter:{field:eI(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eI(e.field),op:vOt(e.op),value:e.value}}}(t):t instanceof jp?function(e){const n=e.getFilters().map(s=>E6e(s));return n.length===1?n[0]:{compositeFilter:{op:wOt(e.op),filters:n}}}(t):Tt(54877,{filter:t})}function bOt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function T6e(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ev{constructor(e,n,s,r,i=rn.min(),o=rn.min(),a=Sa.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ev(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ev(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class EOt{constructor(e){this.yt=e}}function TOt(t){const e=mOt({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cX(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class COt{constructor(){this.Cn=new IOt}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(Sw.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(Sw.min())}updateCollectionGroup(e,n,s){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class IOt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Vo(Kr.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Vo(Kr.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xwe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C6e=41943040;class nu{static withCacheSize(e){return new nu(e,nu.DEFAULT_COLLECTION_PERCENTILE,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/nu.DEFAULT_COLLECTION_PERCENTILE=10,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nu.DEFAULT=new nu(C6e,nu.DEFAULT_COLLECTION_PERCENTILE,nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nu.DISABLED=new nu(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gk{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gk(0)}static cr(){return new gk(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jwe="LruGarbageCollector",SOt=1048576;function Zwe([t,e],[n,s]){const r=xn(t,n);return r===0?xn(e,s):r}class kOt{constructor(e){this.Ir=e,this.buffer=new Vo(Zwe),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Zwe(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ROt{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$e(Jwe,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){j1(n)?$e(Jwe,"Ignoring IndexedDB error during garbage collection: ",n):await q1(n)}await this.Vr(3e5)})}}class AOt{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(V$.ce);const s=new kOt(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(Xwe)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xwe):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),J0()<=bn.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function POt(t,e){return new AOt(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NOt{constructor(){this.changes=new GC(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nc.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?_e.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xOt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DOt{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&XP(s.mutation,r,Bu.empty(),Er.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Un()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Un()){const r=FE();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=RA();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=FE();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Un()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=h_();const o=YP(),a=function(){return YP()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof kb)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),XP(h.mutation,u,h.mutation.getFieldMask(),Er.now())):o.set(u.key,Bu.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new xOt(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=YP();let r=new Wi((o,a)=>o-a),i=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Bu.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Un()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=o6e();h.forEach(p=>{if(!i.has(p)){const m=d6e(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return _e.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return ht.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ODt(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):_e.resolve(FE());let a=pD,l=i;return o.next(u=>_e.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?_e.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Un())).next(h=>({batchId:a,changes:i6e(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(s=>{let r=RA();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=RA();return this.indexManager.getCollectionParents(e,i).next(a=>_e.forEach(a,l=>{const u=function(h,d){return new j$(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,nc.newInvalidDocument(h)))});let a=RA();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&XP(h.mutation,u,Bu.empty(),Er.now()),z$(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OOt{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hp(s.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:TOt(s.bundledQuery),readTime:hp(s.readTime)}}(n)),_e.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LOt{constructor(){this.overlays=new Wi(ht.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const s=FE();return _e.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),_e.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),_e.resolve()}getOverlaysForCollection(e,n,s){const r=FE(),i=n.length+1,o=new ht(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return _e.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Wi((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=FE(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=FE(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return _e.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new ZDt(n,s));let i=this.qr.get(n);i===void 0&&(i=Un(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MOt{constructor(){this.sessionToken=Sa.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class coe{constructor(){this.Qr=new Vo(Jo.$r),this.Ur=new Vo(Jo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Jo(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Jo(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ht(new Kr([])),s=new Jo(n,e),r=new Jo(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ht(new Kr([])),s=new Jo(n,e),r=new Jo(n,e+1);let i=Un();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Jo(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Jo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ht.comparator(e.key,n.key)||xn(e.Yr,n.Yr)}static Kr(e,n){return xn(e.Yr,n.Yr)||ht.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FOt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vo(Jo.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JDt(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Jo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _e.resolve(o)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return _e.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?Jie:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Jo(n,0),r=new Jo(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),_e.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Vo(xn);return n.forEach(r=>{const i=new Jo(r,0),o=new Jo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),_e.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ht.isDocumentKey(i)||(i=i.child(""));const o=new Jo(new ht(i),0);let a=new Vo(xn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),_e.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Es(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return _e.forEach(n.mutations,r=>{const i=new Jo(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Jo(n,0),r=this.Zr.firstAfterOrEqual(s);return _e.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VOt{constructor(e){this.ri=e,this.docs=function(){return new Wi(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return _e.resolve(s?s.document.mutableCopy():nc.newInvalidDocument(n))}getEntries(e,n){let s=h_();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():nc.newInvalidDocument(r))}),_e.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=h_();const o=n.path,a=new ht(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hDt(uDt(h),s)<=0||(r.has(h.key)||z$(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Tt(9500)}ii(e,n){return _e.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new UOt(this)}getSize(e){return _e.resolve(this.size)}}class UOt extends NOt{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qOt{constructor(e){this.persistence=e,this.si=new GC(n=>toe(n),noe),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.oi=0,this._i=new coe,this.targetCount=0,this.ai=gk.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gk(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_e.waitFor(i).next(()=>r)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return _e.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),_e.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),_e.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return _e.resolve(s)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I6e{constructor(e,n){this.ui={},this.overlays={},this.ci=new V$(0),this.li=!1,this.li=!0,this.hi=new MOt,this.referenceDelegate=e(this),this.Pi=new qOt(this),this.indexManager=new COt,this.remoteDocumentCache=function(s){return new VOt(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new EOt(n),this.Ii=new OOt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LOt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new FOt(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){$e("MemoryPersistence","Starting transaction:",e);const r=new jOt(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return _e.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class jOt extends fDt{constructor(e){super(),this.currentSequenceNumber=e}}class loe{constructor(e){this.persistence=e,this.Ri=new coe,this.Vi=null}static mi(e){return new loe(e)}get fi(){if(this.Vi)return this.Vi;throw Tt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),_e.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,s=>{const r=ht.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,rn.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class u9{constructor(e,n){this.persistence=e,this.pi=new GC(s=>mDt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=POt(this,n)}static mi(e,n){return new u9(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return _e.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?_e.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,rn.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oV(e.data.value)),n}br(e,n,s){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return _e.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uoe{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Un(),r=Un();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new uoe(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BOt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Ot{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $At()?8:pDt(wc())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new BOt;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(J0()<=bn.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Z0(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(J0()<=bn.DEBUG&&$e("QueryEngine","Query:",Z0(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(J0()<=bn.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Z0(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,up(n))):_e.resolve())}ys(e,n){if(jwe(n))return _e.resolve(null);let s=up(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=cX(n,null,"F"),s=up(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Un(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,cX(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return jwe(n)||r.isEqual(rn.min())?_e.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?_e.resolve(null):(J0()<=bn.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Z0(n)),this.vs(e,o,n,lDt(r,pD)).next(a=>a))})}Ds(e,n){let s=new Vo(s6e(e));return n.forEach((r,i)=>{z$(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return J0()<=bn.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Z0(n)),this.ps.getDocumentsMatchingQuery(e,n,Sw.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hoe="LocalStore",zOt=3e8;class HOt{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Wi(xn),this.xs=new GC(i=>toe(i),noe),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DOt(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function WOt(t,e,n,s){return new HOt(t,e,n,s)}async function S6e(t,e){const n=Xt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Un();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function GOt(t,e){const n=Xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=_e.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const R=l.docVersions.get(m);Es(R!==null,48541),w.version.compareTo(R)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Un();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function k6e(t){const e=Xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function KOt(t,e){const n=Xt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Sa.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,R,P){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=zOt?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=h_(),u=Un();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(QOt(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(rn.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return _e.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function QOt(t,e,n){let s=Un(),r=Un();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=h_();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(rn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$e(hoe,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function YOt(t,e){const n=Xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Jie),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function XOt(t,e){const n=Xt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,_e.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new ev(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function fX(t,e,n){const s=Xt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!j1(o))throw o;$e(hoe,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ebe(t,e,n){const s=Xt(t);let r=rn.min(),i=Un();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=Xt(a),d=h.xs.get(u);return d!==void 0?_e.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,up(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:rn.min(),n?i:Un())).next(a=>(JOt(s,MDt(e),a),{documents:a,Qs:i})))}function JOt(t,e,n){let s=t.Os.get(e)||rn.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class tbe{constructor(){this.activeTargetIds=BDt()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZOt{constructor(){this.Mo=new tbe,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new tbe,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eLt{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nbe="ConnectivityMonitor";class sbe{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$e(nbe,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$e(nbe,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let AF=null;function pX(){return AF===null?AF=function(){return 268435456+Math.round(2147483648*Math.random())}():AF++,"0x"+AF.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const S8="RestConnection",tLt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nLt{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===r9?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=pX(),a=this.zo(e,n.toUriEncodedString());$e(S8,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=sg(u);return this.Jo(e,a,l,s,h).then(d=>($e(S8,`Received RPC '${e}' ${o}: `,d),d),d=>{throw hk(S8,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+U1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=tLt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sLt{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Na="WebChannelConnection";class rLt extends nLt{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=pX();return new Promise((a,l)=>{const u=new xUe;u.setWithCredentials(!0),u.listenOnce(DUe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rV.NO_ERROR:const d=u.getResponseJson();$e(Na,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case rV.TIMEOUT:$e(Na,`RPC '${e}' ${o} timed out`),l(new Ze(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case rV.HTTP_ERROR:const p=u.getStatus();if($e(Na,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const R=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(O)>=0?O:Ee.UNKNOWN}(w.status);l(new Ze(R,w.message))}else l(new Ze(Ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ze(Ee.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$e(Na,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);$e(Na,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=pX(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MUe(),a=LUe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");$e(Na,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new sLt({Yo:P=>{m?$e(Na,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||($e(Na,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),$e(Na,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),R=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return R(d,kA.EventType.OPEN,()=>{m||($e(Na,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),R(d,kA.EventType.CLOSE,()=>{m||(m=!0,$e(Na,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),R(d,kA.EventType.ERROR,P=>{m||(m=!0,hk(Na,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Ze(Ee.UNAVAILABLE,"The operation could not be completed")))}),R(d,kA.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];Es(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){$e(Na,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let W=function(I){const v=Ni[I];if(v!==void 0)return p6e(v)}(q),J=V.message;W===void 0&&(W=Ee.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Ze(W,J)),d.close()}else $e(Na,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),R(a,OUe.STAT_EVENT,P=>{P.stat===tX.PROXY?$e(Na,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===tX.NOPROXY&&$e(Na,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function k8(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function K$(t){return new cOt(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class R6e{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rbe="PersistentStream";class A6e{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R6e(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(u_(n.toString()),u_("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Ze(Ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $e(rbe,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($e(rbe,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iLt extends A6e{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hOt(this.serializer,e),s=function(r){if(!("targetChange"in r))return rn.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?rn.min():i.readTime?hp(i.readTime):rn.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=dX(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=aX(a)?{documents:pOt(r,a)}:{query:gOt(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=_6e(r,i.resumeToken);const l=lX(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(rn.min())>0){o.readTime=l9(r,i.snapshotVersion.toTimestamp());const l=lX(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=_Ot(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=dX(this.serializer),n.removeTarget=e,this.q_(n)}}class oLt extends A6e{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Es(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Es(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Es(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fOt(e.writeResults,e.commitTime),s=hp(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=dX(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>dOt(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aLt{}class cLt extends aLt{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,uX(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ze(Ee.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,uX(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ze(Ee.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lLt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(u_(n),this.aa=!1):$e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nC="RemoteStore";class uLt{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{KC(this)&&($e(nC,"Restarting streams for network reachability change."),await async function(a){const l=Xt(a);l.Ea.add(4),await BM(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Q$(l)}(this))})}),this.Ra=new lLt(s,r)}}async function Q$(t){if(KC(t))for(const e of t.da)await e(!0)}async function BM(t){for(const e of t.da)await e(!1)}function P6e(t,e){const n=Xt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),goe(n)?poe(n):B1(n).O_()&&foe(n,e))}function doe(t,e){const n=Xt(t),s=B1(n);n.Ia.delete(e),s.O_()&&N6e(n,e),n.Ia.size===0&&(s.O_()?s.L_():KC(n)&&n.Ra.set("Unknown"))}function foe(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}B1(t).Y_(e)}function N6e(t,e){t.Va.Ue(e),B1(t).Z_(e)}function poe(t){t.Va=new rOt({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),B1(t).start(),t.Ra.ua()}function goe(t){return KC(t)&&!B1(t).x_()&&t.Ia.size>0}function KC(t){return Xt(t).Ea.size===0}function x6e(t){t.Va=void 0}async function hLt(t){t.Ra.set("Online")}async function dLt(t){t.Ia.forEach((e,n)=>{foe(t,e)})}async function fLt(t,e){x6e(t),goe(t)?(t.Ra.ha(e),poe(t)):t.Ra.set("Unknown")}async function pLt(t,e,n){if(t.Ra.set("Online"),e instanceof m6e&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){$e(nC,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await h9(t,s)}else if(e instanceof lV?t.Va.Ze(e):e instanceof g6e?t.Va.st(e):t.Va.tt(e),!n.isEqual(rn.min()))try{const s=await k6e(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(Sa.EMPTY_BYTE_STRING,u.snapshotVersion)),N6e(r,a);const h=new ev(u.target,a,l,u.sequenceNumber);foe(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){$e(nC,"Failed to raise snapshot:",s),await h9(t,s)}}async function h9(t,e,n){if(!j1(e))throw e;t.Ea.add(1),await BM(t),t.Ra.set("Offline"),n||(n=()=>k6e(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$e(nC,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Q$(t)})}function D6e(t,e){return e().catch(n=>h9(t,n,e))}async function Y$(t){const e=Xt(t),n=Pw(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jie;for(;gLt(e);)try{const r=await YOt(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,mLt(e,r)}catch(r){await h9(e,r)}O6e(e)&&L6e(e)}function gLt(t){return KC(t)&&t.Ta.length<10}function mLt(t,e){t.Ta.push(e);const n=Pw(t);n.O_()&&n.X_&&n.ea(e.mutations)}function O6e(t){return KC(t)&&!Pw(t).x_()&&t.Ta.length>0}function L6e(t){Pw(t).start()}async function _Lt(t){Pw(t).ra()}async function yLt(t){const e=Pw(t);for(const n of t.Ta)e.ea(n.mutations)}async function vLt(t,e,n){const s=t.Ta.shift(),r=ioe.from(s,e,n);await D6e(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Y$(t)}async function wLt(t,e){e&&Pw(t).X_&&await async function(n,s){if(function(r){return tOt(r)&&r!==Ee.ABORTED}(s.code)){const r=n.Ta.shift();Pw(n).B_(),await D6e(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Y$(n)}}(t,e),O6e(t)&&L6e(t)}async function ibe(t,e){const n=Xt(t);n.asyncQueue.verifyOperationInProgress(),$e(nC,"RemoteStore received new credentials");const s=KC(n);n.Ea.add(3),await BM(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Q$(n)}async function bLt(t,e){const n=Xt(t);e?(n.Ea.delete(2),await Q$(n)):e||(n.Ea.add(2),await BM(n),n.Ra.set("Unknown"))}function B1(t){return t.ma||(t.ma=function(e,n,s){const r=Xt(e);return r.sa(),new iLt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:hLt.bind(null,t),t_:dLt.bind(null,t),r_:fLt.bind(null,t),H_:pLt.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),goe(t)?poe(t):t.Ra.set("Unknown")):(await t.ma.stop(),x6e(t))})),t.ma}function Pw(t){return t.fa||(t.fa=function(e,n,s){const r=Xt(e);return r.sa(),new oLt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_Lt.bind(null,t),r_:wLt.bind(null,t),ta:yLt.bind(null,t),na:vLt.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Y$(t)):(await t.fa.stop(),t.Ta.length>0&&($e(nC,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class moe{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Sv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new moe(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _oe(t,e){if(u_("AsyncQueue",`${e}: ${t}`),j1(t))return new Ze(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JI{static emptySet(e){return new JI(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ht.comparator(n.key,s.key):(n,s)=>ht.comparator(n.key,s.key),this.keyedMap=RA(),this.sortedSet=new Wi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof JI)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new JI;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class obe{constructor(){this.ga=new Wi(ht.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Tt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class mk{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mk(e,n,JI.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$$(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ELt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TLt{constructor(){this.queries=abe(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Xt(e),r=s.queries;s.queries=abe(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Ze(Ee.ABORTED,"Firestore shutting down"))}}function abe(){return new GC(t=>n6e(t),$$)}async function M6e(t,e){const n=Xt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new ELt,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=_oe(o,`Initialization of query '${Z0(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&yoe(n)}async function F6e(t,e){const n=Xt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function CLt(t,e){const n=Xt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&yoe(n)}function ILt(t,e,n){const s=Xt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function yoe(t){t.Ca.forEach(e=>{e.next()})}var gX,cbe;(cbe=gX||(gX={})).Ma="default",cbe.Cache="cache";class V6e{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new mk(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gX.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U6e{constructor(e){this.key=e}}class q6e{constructor(e){this.key=e}}class SLt{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Un(),this.mutatedKeys=Un(),this.eu=s6e(e),this.tu=new JI(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new obe,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=z$(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==R&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Rt:R})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new mk(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new obe,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Un(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new q6e(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new U6e(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Un();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mk.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const voe="SyncEngine";class kLt{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class RLt{constructor(e){this.key=e,this.hu=!1}}class ALt{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new GC(a=>n6e(a),$$),this.Iu=new Map,this.Eu=new Set,this.du=new Wi(ht.comparator),this.Au=new Map,this.Ru=new coe,this.Vu={},this.mu=new Map,this.fu=gk.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PLt(t,e,n=!0){const s=W6e(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await j6e(s,e,n,!0),r}async function NLt(t,e){const n=W6e(t);await j6e(n,e,!0,!1)}async function j6e(t,e,n,s){const r=await XOt(t.localStore,up(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await xLt(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&P6e(t.remoteStore,r),a}async function xLt(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,R,P,O){let M=R.view.ru(P);M.Cs&&(M=await ebe(w.localStore,R.query,!1).then(({documents:J})=>R.view.ru(J,M)));const V=O&&O.targetChanges.get(R.targetId),q=O&&O.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(M,w.isPrimaryClient,V,q);return ube(w,R.targetId,W.au),W.snapshot}(t,d,p,m);const i=await ebe(t.localStore,e,!0),o=new SLt(e,i.Qs),a=o.ru(i.documents),l=jM.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);ube(t,n,u.au);const h=new kLt(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function DLt(t,e,n){const s=Xt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!$$(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await fX(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&doe(s.remoteStore,r.targetId),mX(s,r.targetId)}).catch(q1)):(mX(s,r.targetId),await fX(s.localStore,r.targetId,!0))}async function OLt(t,e){const n=Xt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),doe(n.remoteStore,s.targetId))}async function LLt(t,e,n){const s=BLt(t);try{const r=await function(i,o){const a=Xt(i),l=Er.now(),u=o.reduce((p,m)=>p.add(m.key),Un());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=h_(),w=Un();return a.Ns.getEntries(p,u).next(R=>{m=R,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(R=>{h=R;const P=[];for(const O of o){const M=YDt(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new kb(O.key,M,QUe(M.value.mapValue),Ld.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(R=>{d=R;const P=R.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,R.batchId,P)})}).then(()=>({batchId:d.batchId,changes:i6e(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new Wi(xn)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await $M(s,r.changes),await Y$(s.remoteStore)}catch(r){const i=_oe(r,"Failed to persist write");n.reject(i)}}async function B6e(t,e){const n=Xt(t);try{const s=await KOt(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Es(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Es(o.hu,14607):r.removedDocuments.size>0&&(Es(o.hu,42227),o.hu=!1))}),await $M(n,s,e)}catch(s){await q1(s)}}function lbe(t,e,n){const s=Xt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Xt(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&yoe(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function MLt(t,e,n){const s=Xt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Wi(ht.comparator);o=o.insert(i,nc.newNoDocument(i,rn.min()));const a=Un().add(i),l=new G$(rn.min(),new Map,new Wi(xn),o,a);await B6e(s,l),s.du=s.du.remove(i),s.Au.delete(e),woe(s)}else await fX(s.localStore,e,!1).then(()=>mX(s,e,n)).catch(q1)}async function FLt(t,e){const n=Xt(t),s=e.batch.batchId;try{const r=await GOt(n.localStore,e);z6e(n,s,null),$6e(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await $M(n,r)}catch(r){await q1(r)}}async function VLt(t,e,n){const s=Xt(t);try{const r=await function(i,o){const a=Xt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(Es(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);z6e(s,e,n),$6e(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await $M(s,r)}catch(r){await q1(r)}}function $6e(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function z6e(t,e,n){const s=Xt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function mX(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||H6e(t,s)})}function H6e(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(doe(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),woe(t))}function ube(t,e,n){for(const s of n)s instanceof U6e?(t.Ru.addReference(s.key,e),ULt(t,s)):s instanceof q6e?($e(voe,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||H6e(t,s.key)):Tt(19791,{wu:s})}function ULt(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||($e(voe,"New document in limbo: "+n),t.Eu.add(s),woe(t))}function woe(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ht(Kr.fromString(e)),s=t.fu.next();t.Au.set(s,new RLt(n)),t.du=t.du.insert(n,s),P6e(t.remoteStore,new ev(up(B$(n.path)),s,"TargetPurposeLimboResolution",V$.ce))}}async function $M(t,e,n){const s=Xt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=uoe.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=Xt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>_e.forEach(l,d=>_e.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>_e.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!j1(h))throw h;$e(hoe,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function qLt(t,e){const n=Xt(t);if(!n.currentUser.isEqual(e)){$e(voe,"User change. New user:",e.toKey());const s=await S6e(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Ze(Ee.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $M(n,s.Ls)}}function jLt(t,e){const n=Xt(t),s=n.Au.get(e);if(s&&s.hu)return Un().add(s.key);{let r=Un();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function W6e(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B6e.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jLt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MLt.bind(null,e),e.Pu.H_=CLt.bind(null,e.eventManager),e.Pu.yu=ILt.bind(null,e.eventManager),e}function BLt(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FLt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VLt.bind(null,e),e}class d9{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=K$(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return WOt(this.persistence,new $Ot,e.initialUser,this.serializer)}Cu(e){return new I6e(loe.mi,this.serializer)}Du(e){return new ZOt}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}d9.provider={build:()=>new d9};class $Lt extends d9{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Es(this.persistence.referenceDelegate instanceof u9,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ROt(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?nu.withCacheSize(this.cacheSizeBytes):nu.DEFAULT;return new I6e(s=>u9.mi(s,n),this.serializer)}}class _X{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>lbe(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=qLt.bind(null,this.syncEngine),await bLt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TLt}()}createDatastore(e){const n=K$(e.databaseInfo.databaseId),s=function(r){return new rLt(r)}(e.databaseInfo);return function(r,i,o,a){return new cLt(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new uLt(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>lbe(this.syncEngine,n,0),function(){return sbe.v()?new sbe:new eLt}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new ALt(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Xt(e);$e(nC,"RemoteStore shutting down."),n.Ea.add(5),await BM(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}_X.provider={build:()=>new _X};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G6e{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):u_("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nw="FirestoreClient";class zLt{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Wa.UNAUTHENTICATED,this.clientId=Yie.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{$e(Nw,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>($e(Nw,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=_oe(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function R8(t,e){t.asyncQueue.verifyOperationInProgress(),$e(Nw,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await S6e(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hbe(t,e){t.asyncQueue.verifyOperationInProgress();const n=await HLt(t);$e(Nw,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>ibe(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>ibe(e.remoteStore,r)),t._onlineComponents=e}async function HLt(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$e(Nw,"Using user provided OfflineComponentProvider");try{await R8(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Ee.FAILED_PRECONDITION||s.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hk("Error using user provided cache. Falling back to memory cache: "+n),await R8(t,new d9)}}else $e(Nw,"Using default OfflineComponentProvider"),await R8(t,new $Lt(void 0));return t._offlineComponents}async function K6e(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($e(Nw,"Using user provided OnlineComponentProvider"),await hbe(t,t._uninitializedComponentsProvider._online)):($e(Nw,"Using default OnlineComponentProvider"),await hbe(t,new _X))),t._onlineComponents}function WLt(t){return K6e(t).then(e=>e.syncEngine)}async function yX(t){const e=await K6e(t),n=e.eventManager;return n.onListen=PLt.bind(null,e.syncEngine),n.onUnlisten=DLt.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NLt.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OLt.bind(null,e.syncEngine),n}function GLt(t,e,n={}){const s=new Sv;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new G6e({next:d=>{u.Nu(),i.enqueueAndForget(()=>F6e(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new Ze(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new Ze(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new V6e(B$(o.path),u,{includeMetadataChanges:!0,qa:!0});return M6e(r,h)}(await yX(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q6e(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dbe=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Y6e="firestore.googleapis.com",fbe=!0;class pbe{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y6e,this.ssl=fbe}else this.host=e.host,this.ssl=e.ssl??fbe;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C6e;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SOt)throw new Ze(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cDt("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q6e(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class boe{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pbe({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pbe(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Xxt;switch(n.type){case"firstParty":return new tDt(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ze(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=dbe.get(e);n&&($e("ComponentProvider","Removing Datastore"),dbe.delete(e),n.terminate())}(this),Promise.resolve()}}function KLt(t,e,n,s={}){t=Od(t,boe);const r=sg(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(R$(`https://${a}`),A$("Firestore",!0)),i.host!==Y6e&&i.host!==a&&hk("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Cw(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Wa.MOCK_USER;else{u=Eie(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Ze(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Wa(d)}t._authCredentials=new Jxt(new VUe(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class X${constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new X$(this.firestore,e,this._query)}}class Vi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vi(this.firestore,e,this._key)}toJSON(){return{type:Vi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(UM(n,Vi._jsonSchema))return new Vi(e,s||null,new ht(Kr.fromString(n.referencePath)))}}Vi._jsonSchemaVersion="firestore/documentReference/1.0",Vi._jsonSchema={type:Fi("string",Vi._jsonSchemaVersion),referencePath:Fi("string")};class bD extends X${constructor(e,n,s){super(e,n,B$(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vi(this.firestore,null,new ht(e))}withConverter(e){return new bD(this.firestore,e,this._path)}}function Eoe(t,e,...n){if(t=qs(t),arguments.length===1&&(e=Yie.newId()),aDt("doc","path",e),t instanceof boe){const s=Kr.fromString(e,...n);return Rwe(s),new Vi(t,null,new ht(s))}{if(!(t instanceof Vi||t instanceof bD))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Kr.fromString(e,...n));return Rwe(s),new Vi(t.firestore,t instanceof bD?t.converter:null,new ht(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gbe="AsyncQueue";class mbe{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R6e(this,"async_queue_retry"),this._c=()=>{const s=k8();s&&$e(gbe,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=k8();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=k8();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Sv;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!j1(e))throw e;$e(gbe,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,u_("INTERNAL UNHANDLED ERROR: ",_be(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=moe.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&Tt(47125,{Pc:_be(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _be(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ybe(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class sC extends boe{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new mbe,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mbe(e),this._firestoreClient=void 0,await e}}}function X6e(t,e){const n=typeof t=="object"?t:x$(),s=typeof t=="string"?t:r9,r=LM(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=bie("firestore");i&&KLt(r,...i)}return r}function Toe(t){if(t._terminated)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QLt(t),t._firestoreClient}function QLt(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new vDt(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Q6e(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zLt(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gh(Sa.fromBase64String(e))}catch(n){throw new Ze(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gh(Sa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(UM(e,gh._jsonSchema))return gh.fromBase64String(e.bytes)}}gh._jsonSchemaVersion="firestore/bytes/1.0",gh._jsonSchema={type:Fi("string",gh._jsonSchemaVersion),bytes:Fi("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J${constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new va(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z${constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xn(this._lat,e._lat)||xn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dp._jsonSchemaVersion}}static fromJSON(e){if(UM(e,dp._jsonSchema))return new dp(e.latitude,e.longitude)}}dp._jsonSchemaVersion="firestore/geoPoint/1.0",dp._jsonSchema={type:Fi("string",dp._jsonSchemaVersion),latitude:Fi("number"),longitude:Fi("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(UM(e,fp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fp(e.vectorValues);throw new Ze(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fp._jsonSchemaVersion="firestore/vectorValue/1.0",fp._jsonSchema={type:Fi("string",fp._jsonSchemaVersion),vectorValues:Fi("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YLt=/^__.*__$/;class XLt{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new kb(e,this.data,this.fieldMask,n,this.fieldTransforms):new qM(e,this.data,n,this.fieldTransforms)}}class J6e{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new kb(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z6e(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ac:t})}}class Coe{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Coe({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return f9(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z6e(this.Ac)&&YLt.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JLt{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||K$(e)}Cc(e,n,s,r=!1){return new Coe({Ac:e,methodName:n,Dc:s,path:va.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e9e(t){const e=t._freezeSettings(),n=K$(t._databaseId);return new JLt(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ZLt(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Soe("Data must be an object, but it was:",o,s);const a=t9e(s,o);let l,u;if(i.merge)l=new Bu(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=vX(e,d,n);if(!o.contains(p))throw new Ze(Ee.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);s9e(h,p)||h.push(p)}l=new Bu(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new XLt(new au(a),l,u)}class ez extends Z${_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ez}}class Ioe extends Z${_toFieldTransform(e){return new WDt(e.path,new yD)}isEqual(e){return e instanceof Ioe}}function eMt(t,e,n,s){const r=t.Cc(1,e,n);Soe("Data must be an object, but it was:",r,s);const i=[],o=au.empty();Sb(s,(l,u)=>{const h=koe(e,l,n);u=qs(u);const d=r.yc(h);if(u instanceof ez)i.push(h);else{const p=tz(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Bu(i);return new J6e(o,a,r.fieldTransforms)}function tMt(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[vX(e,s,n)],l=[r];if(i.length%2!=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(vX(e,i[p])),l.push(i[p+1]);const u=[],h=au.empty();for(let p=a.length-1;p>=0;--p)if(!s9e(u,a[p])){const m=a[p];let w=l[p];w=qs(w);const R=o.yc(m);if(w instanceof ez)u.push(m);else{const P=tz(w,R);P!=null&&(u.push(m),h.set(m,P))}}const d=new Bu(u);return new J6e(h,d,o.fieldTransforms)}function tz(t,e){if(n9e(t=qs(t)))return Soe("Unsupported field value:",e,t),t9e(t,e);if(t instanceof Z$)return function(n,s){if(!Z6e(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=tz(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=qs(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return $Dt(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Er.fromDate(n);return{timestampValue:l9(s.serializer,r)}}if(n instanceof Er){const r=new Er(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:l9(s.serializer,r)}}if(n instanceof dp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gh)return{bytesValue:_6e(s.serializer,n._byteString)};if(n instanceof Vi){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:aoe(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof fp)return function(r,i){return{mapValue:{fields:{[GUe]:{stringValue:KUe},[i9]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return soe(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Xie(n)}`)}(t,e)}function t9e(t,e){const n={};return jUe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sb(t,(s,r)=>{const i=tz(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function n9e(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Er||t instanceof dp||t instanceof gh||t instanceof Vi||t instanceof Z$||t instanceof fp)}function Soe(t,e,n){if(!n9e(n)||!UUe(n)){const s=Xie(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function vX(t,e,n){if((e=qs(e))instanceof J$)return e._internalPath;if(typeof e=="string")return koe(t,e);throw f9("Field path arguments must be of type string or ",t,!1,void 0,n)}const nMt=new RegExp("[~\\*/\\[\\]]");function koe(t,e,n){if(e.search(nMt)>=0)throw f9(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new J$(...e.split("."))._internalPath}catch{throw f9(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function f9(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Ze(Ee.INVALID_ARGUMENT,a+t+l)}function s9e(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r9e{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sMt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(i9e("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sMt extends r9e{data(){return super.data()}}function i9e(t,e){return typeof e=="string"?koe(t,e):e instanceof J$?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rMt(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iMt{convertValue(e,n="none"){switch(Aw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Sb(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[i9].arrayValue?.values?.map(s=>Ii(s.doubleValue));return new fp(n)}convertGeoPoint(e){return new dp(Ii(e.latitude),Ii(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=q$(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gD(e));default:return null}}convertTimestamp(e){const n=kw(e);return new Er(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Kr.fromString(e);Es(T6e(s),9688,{name:e});const r=new mD(s.get(1),s.get(3)),i=new ht(s.popFirst(5));return r.isEqual(n)||u_(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oMt(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class PA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gT extends r9e{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(i9e("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=gT._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}gT._jsonSchemaVersion="firestore/documentSnapshot/1.0",gT._jsonSchema={type:Fi("string",gT._jsonSchemaVersion),bundleSource:Fi("string","DocumentSnapshot"),bundleName:Fi("string"),bundle:Fi("string")};class uV extends gT{data(e={}){return super.data(e)}}class ZI{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new PA(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new uV(this._firestore,this._userDataWriter,s.key,s,new PA(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new uV(s._firestore,s._userDataWriter,o.doc.key,o.doc,new PA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new uV(s._firestore,s._userDataWriter,o.doc.key,o.doc,new PA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:aMt(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ZI._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yie.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aMt(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function p9(t){t=Od(t,Vi);const e=Od(t.firestore,sC);return GLt(Toe(e),t._key).then(n=>u9e(e,t,n))}ZI._jsonSchemaVersion="firestore/querySnapshot/1.0",ZI._jsonSchema={type:Fi("string",ZI._jsonSchemaVersion),bundleSource:Fi("string","QuerySnapshot"),bundleName:Fi("string"),bundle:Fi("string")};class o9e extends iMt{constructor(e){super(),this.firestore=e}convertBytes(e){return new gh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,n)}}function g9(t,e,n){t=Od(t,Vi);const s=Od(t.firestore,sC),r=oMt(t.converter,e,n);return Roe(s,[ZLt(e9e(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ld.none())])}function a9e(t,e,n,...s){t=Od(t,Vi);const r=Od(t.firestore,sC),i=e9e(r);let o;return o=typeof(e=qs(e))=="string"||e instanceof J$?tMt(i,"updateDoc",t._key,e,n,s):eMt(i,"updateDoc",t._key,e),Roe(r,[o.toMutation(t._key,Ld.exists(!0))])}function c9e(t){return Roe(Od(t.firestore,sC),[new roe(t._key,Ld.none())])}function l9e(t,...e){t=qs(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ybe(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ybe(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof Vi)o=Od(t.firestore,sC),a=B$(t._key.path),i={next:l=>{e[s]&&e[s](u9e(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Od(t,X$);o=Od(l.firestore,sC),a=l._query;const u=new o9e(o);i={next:h=>{e[s]&&e[s](new ZI(o,u,l,h))},error:e[s+1],complete:e[s+2]},rMt(t._query)}return function(l,u,h,d){const p=new G6e(d),m=new V6e(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>M6e(await yX(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>F6e(await yX(l),m))}}(Toe(o),a,r,i)}function Roe(t,e){return function(n,s){const r=new Sv;return n.asyncQueue.enqueueAndForget(async()=>LLt(await WLt(n),s,r)),r.promise}(Toe(t),e)}function u9e(t,e,n){const s=n.docs.get(e._key),r=new o9e(t);return new gT(t,r,e._key,s,new PA(n.hasPendingWrites,n.fromCache),e.converter)}function JP(){return new Ioe("serverTimestamp")}(function(t,e=!0){(function(n){U1=n})(Ib),Iw(new o_("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new sC(new Zxt(n.getProvider("auth-internal")),new nDt(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ze(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mD(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ch(Cwe,Iwe,t),Ch(Cwe,Iwe,"esm2020")})();var cMt="firebase",lMt="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Ch(cMt,lMt,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h9e="firebasestorage.googleapis.com",d9e="storageBucket",uMt=120*1e3,hMt=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wi extends rg{constructor(e,n,s=0){super(A8(e),`Firebase Storage: ${n} (${A8(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return A8(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gi||(gi={}));function A8(t){return"storage/"+t}function Aoe(){const t="An unknown error occurred, please check the error payload for server response.";return new wi(gi.UNKNOWN,t)}function dMt(t){return new wi(gi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function fMt(t){return new wi(gi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pMt(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wi(gi.UNAUTHENTICATED,t)}function gMt(){return new wi(gi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mMt(t){return new wi(gi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _Mt(){return new wi(gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yMt(){return new wi(gi.CANCELED,"User canceled the upload/download.")}function vMt(t){return new wi(gi.INVALID_URL,"Invalid URL '"+t+"'.")}function wMt(t){return new wi(gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bMt(){return new wi(gi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d9e+"' property when initializing the app?")}function EMt(){return new wi(gi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TMt(){return new wi(gi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CMt(t){return new wi(gi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wX(t){return new wi(gi.INVALID_ARGUMENT,t)}function f9e(){return new wi(gi.APP_DELETED,"The Firebase app was deleted.")}function IMt(t){return new wi(gi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ZP(t,e){return new wi(gi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function UR(t){throw new wi(gi.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class el{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=el.makeFromUrl(e,n)}catch{return new el(e,"")}if(s.path==="")return s;throw wMt(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},R=n===h9e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${R}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],W=q.regex.exec(e);if(W){const J=W[q.indices.bucket];let I=W[q.indices.path];I||(I=""),s=new el(J,I),q.postModify(s);break}}if(s==null)throw vMt(e);return s}}class SMt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kMt(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(u){p();return}if(P){p(),h.call(null,P,...O);return}if(l()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function R(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function RMt(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AMt(t){return t!==void 0}function PMt(t){return typeof t=="object"&&!Array.isArray(t)}function Poe(t){return typeof t=="string"||t instanceof String}function vbe(t){return Noe()&&t instanceof Blob}function Noe(){return typeof Blob<"u"}function bX(t,e,n,s){if(s<e)throw wX(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw wX(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zM(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function p9e(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var mT;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mT||(mT={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NMt(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xMt{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,R)=>{this.resolve_=w,this.reject_=R,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new PF(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===mT.NO_ERROR,l=i.getStatus();if(!a||NMt(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===mT.ABORT;s(!1,new PF(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new PF(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());AMt(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Aoe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?f9e():yMt();o(l)}else{const l=_Mt();o(l)}};this.canceled_?n(!1,new PF(!1,null,!0)):this.backoffId_=kMt(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RMt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class PF{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function DMt(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OMt(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LMt(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MMt(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function FMt(t,e,n,s,r,i,o=!0,a=!1){const l=p9e(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return LMt(h,e),DMt(h,n),OMt(h,i),MMt(h,s),new xMt(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VMt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UMt(...t){const e=VMt();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Noe())return new Blob(t);throw new wi(gi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qMt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jMt(t){if(typeof atob>"u")throw CMt("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ld={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class P8{constructor(e,n){this.data=e,this.contentType=n||null}}function g9e(t,e){switch(t){case ld.RAW:return new P8(m9e(e));case ld.BASE64:case ld.BASE64URL:return new P8(_9e(t,e));case ld.DATA_URL:return new P8($Mt(e),zMt(e))}throw Aoe()}function m9e(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function BMt(t){let e;try{e=decodeURIComponent(t)}catch{throw ZP(ld.DATA_URL,"Malformed data URL.")}return m9e(e)}function _9e(t,e){switch(t){case ld.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw ZP(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ld.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw ZP(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jMt(e)}catch(r){throw r.message.includes("polyfill")?r:ZP(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class y9e{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ZP(ld.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=HMt(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function $Mt(t){const e=new y9e(t);return e.base64?_9e(ld.BASE64,e.rest):BMt(e.rest)}function zMt(t){return new y9e(t).contentType}function HMt(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hy{constructor(e,n){let s=0,r="";vbe(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(vbe(this.data_)){const s=this.data_,r=qMt(s,e,n);return r===null?null:new Hy(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Hy(s,!0)}}static getBlob(...e){if(Noe()){const n=e.map(s=>s instanceof Hy?s.data_:s);return new Hy(UMt.apply(null,n))}else{const n=e.map(o=>Poe(o)?g9e(ld.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new Hy(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xoe(t){let e;try{e=JSON.parse(t)}catch{return null}return PMt(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WMt(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GMt(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function v9e(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KMt(t,e){return e}class Ic{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||KMt}}let NF=null;function QMt(t){return!Poe(t)||t.length<2?t:v9e(t)}function w9e(){if(NF)return NF;const t=[];t.push(new Ic("bucket")),t.push(new Ic("generation")),t.push(new Ic("metageneration")),t.push(new Ic("name","fullPath",!0));function e(i,o){return QMt(o)}const n=new Ic("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new Ic("size");return r.xform=s,t.push(r),t.push(new Ic("timeCreated")),t.push(new Ic("updated")),t.push(new Ic("md5Hash",null,!0)),t.push(new Ic("cacheControl",null,!0)),t.push(new Ic("contentDisposition",null,!0)),t.push(new Ic("contentEncoding",null,!0)),t.push(new Ic("contentLanguage",null,!0)),t.push(new Ic("contentType",null,!0)),t.push(new Ic("metadata","customMetadata",!0)),NF=t,NF}function YMt(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new el(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function XMt(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return YMt(s,t),s}function b9e(t,e,n){const s=xoe(e);return s===null?null:XMt(t,s,n)}function JMt(t,e,n,s){const r=xoe(e);if(r===null||!Poe(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=zM(h,n,s),p=p9e({alt:"media",token:a});return d+p})[0]}function ZMt(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wbe="prefixes",bbe="items";function e2t(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[wbe])for(const r of n[wbe]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new el(e,i));s.prefixes.push(o)}if(n[bbe])for(const r of n[bbe]){const i=t._makeStorageReference(new el(e,r.name));s.items.push(i)}return s}function t2t(t,e,n){const s=xoe(n);return s===null?null:e2t(t,e,s)}class nz{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Doe(t){if(!t)throw Aoe()}function n2t(t,e){function n(s,r){const i=b9e(t,r,e);return Doe(i!==null),i}return n}function s2t(t,e){function n(s,r){const i=t2t(t,e,r);return Doe(i!==null),i}return n}function r2t(t,e){function n(s,r){const i=b9e(t,r,e);return Doe(i!==null),JMt(i,r,t.host,t._protocol)}return n}function Ooe(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=gMt():r=pMt():n.getStatus()===402?r=fMt(t.bucket):n.getStatus()===403?r=mMt(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function E9e(t){const e=Ooe(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=dMt(t.path)),i.serverResponse=r.serverResponse,i}return n}function i2t(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=zM(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new nz(a,l,s2t(t,e.bucket),u);return h.urlParams=i,h.errorHandler=Ooe(e),h}function o2t(t,e,n){const s=e.fullServerUrl(),r=zM(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new nz(r,i,r2t(t,n),o);return a.errorHandler=E9e(e),a}function a2t(t,e){const n=e.fullServerUrl(),s=zM(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new nz(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=E9e(e),a}function c2t(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function l2t(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=c2t(null,e)),s}function u2t(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=l2t(e,s,r),h=ZMt(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Hy.getBlob(d,s,p);if(m===null)throw EMt();const w={name:u.fullPath},R=zM(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new nz(R,P,n2t(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=Ooe(e),M}class h2t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mT.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mT.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mT.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw UR("cannot .send() more than once");if(sg(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw UR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw UR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw UR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw UR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class d2t extends h2t{initXhr(){this.xhr_.responseType="text"}}function sz(){return new d2t}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rC{constructor(e,n){this._service=e,n instanceof el?this._location=n:this._location=el.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new rC(e,n)}get root(){const e=new el(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return v9e(this._location.path)}get storage(){return this._service}get parent(){const e=WMt(this._location.path);if(e===null)return null;const n=new el(this._location.bucket,e);return new rC(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IMt(e)}}function f2t(t,e,n){t._throwIfRoot("uploadBytes");const s=u2t(t.storage,t._location,w9e(),new Hy(e,!0),n);return t.storage.makeRequestWithTokens(s,sz).then(r=>({metadata:r,ref:t}))}function p2t(t,e,n=ld.RAW,s){t._throwIfRoot("uploadString");const r=g9e(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),f2t(t,r.data,i)}function g2t(t){const e={prefixes:[],items:[]};return T9e(t,e).then(()=>e)}async function T9e(t,e,n){const s=await m2t(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await T9e(t,e,s.nextPageToken)}function m2t(t,e){e!=null&&typeof e.maxResults=="number"&&bX("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=i2t(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,sz)}function _2t(t){t._throwIfRoot("getDownloadURL");const e=o2t(t.storage,t._location,w9e());return t.storage.makeRequestWithTokens(e,sz).then(n=>{if(n===null)throw TMt();return n})}function y2t(t){t._throwIfRoot("deleteObject");const e=a2t(t.storage,t._location);return t.storage.makeRequestWithTokens(e,sz)}function v2t(t,e){const n=GMt(t._location.path,e),s=new el(t._location.bucket,n);return new rC(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w2t(t){return/^[A-Za-z]+:\/\//.test(t)}function b2t(t,e){return new rC(t,e)}function C9e(t,e){if(t instanceof Loe){const n=t;if(n._bucket==null)throw bMt();const s=new rC(n,n._bucket);return e!=null?C9e(s,e):s}else return e!==void 0?v2t(t,e):t}function E2t(t,e){if(e&&w2t(e)){if(t instanceof Loe)return b2t(t,e);throw wX("To use ref(service, url), the first argument must be a Storage instance.")}else return C9e(t,e)}function Ebe(t,e){const n=e?.[d9e];return n==null?null:el.makeFromBucketSpec(n,t)}function T2t(t,e,n,s={}){t.host=`${e}:${n}`;const r=sg(e);r&&(R$(`https://${t.host}/b`),A$("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:Eie(i,t.app.options.projectId))}class Loe{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=h9e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uMt,this._maxUploadRetryTime=hMt,this._requests=new Set,r!=null?this._bucket=el.makeFromBucketSpec(r,this._host):this._bucket=Ebe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=el.makeFromBucketSpec(this._url,e):this._bucket=Ebe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bX("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bX("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rC(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new SMt(f9e());{const o=FMt(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Tbe="@firebase/storage",Cbe="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const I9e="storage";function S9e(t,e,n,s){return t=qs(t),p2t(t,e,n,s)}function k9e(t){return t=qs(t),g2t(t)}function R9e(t){return t=qs(t),_2t(t)}function A9e(t){return t=qs(t),y2t(t)}function P9e(t,e){return t=qs(t),E2t(t,e)}function C2t(t=x$(),e){t=qs(t);const n=LM(t,I9e).getImmediate({identifier:e}),s=bie("storage");return s&&I2t(n,...s),n}function I2t(t,e,n,s={}){T2t(t,e,n,s)}function S2t(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Loe(n,s,r,e,Ib)}function k2t(){Iw(new o_(I9e,S2t,"PUBLIC").setMultipleInstances(!0)),Ch(Tbe,Cbe,""),Ch(Tbe,Cbe,"esm2020")}k2t();var Ibe={};const Sbe="@firebase/database",kbe="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let N9e="";function R2t(t){N9e=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A2t{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),So(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:hD(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class P2t{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return j_(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const x9e=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new A2t(e)}}catch{}return new P2t},VE=x9e("localStorage"),N2t=x9e("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eS=new N$("@firebase/database"),x2t=function(){let t=1;return function(){return t++}}(),D9e=function(t){const e=tPt(t),n=new XAt;n.update(e);const s=n.digest();return wie.encodeByteArray(s)},HM=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=HM.apply(null,s):typeof s=="object"?e+=So(s):e+=s,e+=" "}return e};let eN=null,Rbe=!0;const D2t=function(t,e){Ne(!0,"Can't turn on custom loggers persistently."),eS.logLevel=bn.VERBOSE,eN=eS.log.bind(eS)},sc=function(...t){if(Rbe===!0&&(Rbe=!1,eN===null&&N2t.get("logging_enabled")===!0&&D2t()),eN){const e=HM.apply(null,t);eN(e)}},WM=function(t){return function(...e){sc(t,...e)}},EX=function(...t){const e="FIREBASE INTERNAL ERROR: "+HM(...t);eS.error(e)},d_=function(...t){const e=`FIREBASE FATAL ERROR: ${HM(...t)}`;throw eS.error(e),new Error(e)},yu=function(...t){const e="FIREBASE WARNING: "+HM(...t);eS.warn(e)},O2t=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&yu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},O9e=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},L2t=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_k="[MIN_NAME]",iC="[MAX_NAME]",$1=function(t,e){if(t===e)return 0;if(t===_k||e===iC)return-1;if(e===_k||t===iC)return 1;{const n=Abe(t),s=Abe(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},M2t=function(t,e){return t===e?0:t<e?-1:1},qR=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+So(e))},Moe=function(t){if(typeof t!="object"||t===null)return So(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=So(e[s]),n+=":",n+=Moe(t[e[s]]);return n+="}",n},L9e=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Tu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const M9e=function(t){Ne(!O9e(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},F2t=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},V2t=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function U2t(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const q2t=new RegExp("^-?(0*)\\d{1,10}$"),j2t=-2147483648,B2t=2147483647,Abe=function(t){if(q2t.test(t)){const e=Number(t);if(e>=j2t&&e<=B2t)return e}return null},z1=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw yu("Exception was thrown by user callback.",n),e},Math.floor(0))}},$2t=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tN=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z2t{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,xu(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){yu(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class H2t{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(sc("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yu(e)}}class hV{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}hV.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Foe="5",F9e="v",V9e="s",U9e="r",q9e="f",j9e=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B9e="ls",$9e="p",TX="ac",z9e="websocket",H9e="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W9e{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=VE.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&VE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function W2t(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function G9e(t,e,n){Ne(typeof e=="string","typeof type must == string"),Ne(typeof n=="object","typeof params must == object");let s;if(e===z9e)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===H9e)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);W2t(t)&&(n.ns=t.namespace);const r=[];return Tu(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G2t{constructor(){this.counters_={}}incrementCounter(e,n=1){j_(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PAt(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const N8={},x8={};function Voe(t){const e=t.toString();return N8[e]||(N8[e]=new G2t),N8[e]}function K2t(t,e){const n=t.toString();return x8[n]||(x8[n]=e()),x8[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q2t{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&z1(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pbe="start",Y2t="close",X2t="pLPCommand",J2t="pRTLPCB",K9e="id",Q9e="pw",Y9e="ser",Z2t="cb",eFt="seg",tFt="ts",nFt="d",sFt="dframe",X9e=1870,J9e=30,rFt=X9e-J9e,iFt=25e3,oFt=3e4;class vI{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WM(e),this.stats_=Voe(n),this.urlFn=l=>(this.appCheckToken&&(l[TX]=this.appCheckToken),G9e(n,H9e,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Q2t(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(oFt)),L2t(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Uoe((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Pbe)this.id=a,this.password=l;else if(o===Y2t)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Pbe]="t",s[Y9e]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Z2t]=this.scriptTagHolder.uniqueCallbackIdentifier),s[F9e]=Foe,this.transportSessionId&&(s[V9e]=this.transportSessionId),this.lastSessionId&&(s[B9e]=this.lastSessionId),this.applicationId&&(s[$9e]=this.applicationId),this.appCheckToken&&(s[TX]=this.appCheckToken),typeof location<"u"&&location.hostname&&j9e.test(location.hostname)&&(s[U9e]=q9e);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vI.forceAllow_=!0}static forceDisallow(){vI.forceDisallow_=!0}static isAvailable(){return vI.forceAllow_?!0:!vI.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!F2t()&&!V2t()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=So(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=HVe(n),r=L9e(s,rFt);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[sFt]="t",s[K9e]=e,s[Q9e]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=So(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Uoe{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=x2t(),window[X2t+this.uniqueCallbackIdentifier]=e,window[J2t+this.uniqueCallbackIdentifier]=n,this.myIFrame=Uoe.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){sc("frame writing exception"),a.stack&&sc(a.stack),sc(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||sc("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[K9e]=this.myID,e[Q9e]=this.myPW,e[Y9e]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+J9e+s.length<=X9e;){const i=this.pendingSegs.shift();s=s+"&"+eFt+r+"="+i.seg+"&"+tFt+r+"="+i.ts+"&"+nFt+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(iFt)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{sc("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aFt=16384,cFt=45e3;let m9=null;typeof MozWebSocket<"u"?m9=MozWebSocket:typeof WebSocket<"u"&&(m9=WebSocket);class Xh{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WM(this.connId),this.stats_=Voe(n),this.connURL=Xh.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[F9e]=Foe,typeof location<"u"&&location.hostname&&j9e.test(location.hostname)&&(o[U9e]=q9e),n&&(o[V9e]=n),s&&(o[B9e]=s),r&&(o[TX]=r),i&&(o[$9e]=i),G9e(e,z9e,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,VE.set("previous_websocket_failure",!0);try{let s;BAt(),this.mySock=new m9(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Xh.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&m9!==null&&!Xh.forceDisallow_}static previouslyFailed(){return VE.isInMemoryStorage||VE.get("previous_websocket_failure")===!0}markConnectionHealthy(){VE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=hD(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=So(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=L9e(n,aFt);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(cFt))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xh.responsesRequiredToBeHealthy=2;Xh.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ED{static get ALL_TRANSPORTS(){return[vI,Xh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Xh&&Xh.isAvailable();let s=n&&!Xh.previouslyFailed();if(e.webSocketOnly&&(n||yu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Xh];else{const r=this.transports_=[];for(const i of ED.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);ED.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ED.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lFt=6e4,uFt=5e3,hFt=10*1024,dFt=100*1024,D8="t",Nbe="d",fFt="s",xbe="r",pFt="e",Dbe="o",Obe="a",Lbe="n",Mbe="p",gFt="h";class mFt{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WM("c:"+this.id+":"),this.transportManager_=new ED(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=tN(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dFt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hFt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(D8 in e){const n=e[D8];n===Obe?this.upgradeIfSecondaryHealthy_():n===xbe?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Dbe&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=qR("t",e),s=qR("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Mbe,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Obe,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Lbe,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=qR("t",e),s=qR("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=qR(D8,e);if(Nbe in e){const s=e[Nbe];if(n===gFt){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Lbe){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===fFt?this.onConnectionShutdown_(s):n===xbe?this.onReset_(s):n===pFt?EX("Server Error: "+s):n===Dbe?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):EX("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Foe!==s&&yu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),tN(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lFt))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tN(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uFt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Mbe,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(VE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z9e{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eqe{constructor(e){this.allowedEvents_=e,this.listeners_={},Ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _9 extends eqe{static getInstance(){return new _9}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tie()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fbe=32,Vbe=768;let Ys=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function as(){return new Ys("")}function pn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xw(t){return t.pieces_.length-t.pieceNum_}function ar(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ys(t.pieces_,e)}function tqe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _Ft(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function nqe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function sqe(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ys(e,0)}function Ro(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Ys)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Ys(n,0)}function Sn(t){return t.pieceNum_>=t.pieces_.length}function tl(t,e){const n=pn(t),s=pn(e);if(n===null)return e;if(n===s)return tl(ar(t),ar(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function qoe(t,e){if(xw(t)!==xw(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function ud(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(xw(t)>xw(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class yFt{constructor(e,n){this.errorPrefix_=n,this.parts_=nqe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=P$(this.parts_[s]);rqe(this)}}function vFt(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=P$(e),rqe(t)}function wFt(t){const e=t.parts_.pop();t.byteLength_-=P$(e),t.parts_.length>0&&(t.byteLength_-=1)}function rqe(t){if(t.byteLength_>Vbe)throw new Error(t.errorPrefix_+"has a key path longer than "+Vbe+" bytes ("+t.byteLength_+").");if(t.parts_.length>Fbe)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Fbe+") or object contains a cycle "+dE(t))}function dE(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class joe extends eqe{static getInstance(){return new joe}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jR=1e3,bFt=300*1e3,Ube=30*1e3,EFt=1.3,TFt=3e4,CFt="server_kill",qbe=3;class Lm extends Z9e{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Lm.nextPersistentConnectionId_++,this.log_=WM("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jR,this.maxReconnectDelay_=bFt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");joe.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&_9.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(So(i)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new k$,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Lm.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&j_(e,"w")){const s=lk(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();yu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YAt(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ube)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=QAt(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+So(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):EX("Unrecognized action received from server: "+So(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=jR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>TFt&&(this.reconnectDelay_=jR),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*EFt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Lm.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){Ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?sc("getToken() completed but was canceled"):(sc("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new mFt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{yu(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(CFt)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&yu(d),l())}}}interrupt(e){sc("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){sc("Resuming connection for reason: "+e),delete this.interruptReasons_[e],WY(this.interruptReasons_)&&(this.reconnectDelay_=jR,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>Moe(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Ys(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){sc("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qbe&&(this.reconnectDelay_=Ube,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){sc("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qbe&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+N9e.replace(/\./g,"-")]=1,Tie()?e["framework.cordova"]=1:YVe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=_9.getInstance().currentlyOnline();return WY(this.interruptReasons_)&&e}}Lm.nextPersistentConnectionId_=0;Lm.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let qn=class iqe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new iqe(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rz{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new qn(_k,e),r=new qn(_k,n);return this.compare(s,r)!==0}minPost(){return qn.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let xF;class oqe extends rz{static get __EMPTY_NODE(){return xF}static set __EMPTY_NODE(e){xF=e}compare(e,n){return $1(e.name,n.name)}isDefinedOn(e){throw M1("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return qn.MIN}maxPost(){return new qn(iC,xF)}makePost(e,n){return Ne(typeof e=="string","KeyIndex indexValue must always be a string."),new qn(e,xF)}toString(){return".key"}}const tS=new oqe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DF{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class na{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??na.RED,this.left=r??hu.EMPTY_NODE,this.right=i??hu.EMPTY_NODE}copy(e,n,s,r,i){return new na(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return hu.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return hu.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,na.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,na.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}na.RED=!0;na.BLACK=!1;class IFt{copy(e,n,s,r,i){return this}insert(e,n,s){return new na(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hu{constructor(e,n=hu.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new hu(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,na.BLACK,null,null))}remove(e){return new hu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,na.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new DF(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new DF(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new DF(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new DF(this.root_,null,this.comparator_,!0,e)}}hu.EMPTY_NODE=new IFt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SFt(t,e){return $1(t.name,e.name)}function Boe(t,e){return $1(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let CX;function kFt(t){CX=t}const aqe=function(t){return typeof t=="number"?"number:"+M9e(t):"string:"+t},cqe=function(t){if(t.isLeafNode()){const e=t.val();Ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&j_(e,".sv"),"Priority must be a string or number.")}else Ne(t===CX||t.isEmpty(),"priority of unexpected type.");Ne(t===CX||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let jbe;class Go{static set __childrenNodeConstructor(e){jbe=e}static get __childrenNodeConstructor(){return jbe}constructor(e,n=Go.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),cqe(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Go(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Go.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Sn(e)?this:pn(e)===".priority"?this.priorityNode_:Go.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Go.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=pn(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Ne(s!==".priority"||xw(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Go.__childrenNodeConstructor.EMPTY_NODE.updateChild(ar(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+aqe(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=M9e(this.value_):e+=this.value_,this.lazyHash_=D9e(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Go.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Go.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Go.VALUE_TYPE_ORDER.indexOf(n),i=Go.VALUE_TYPE_ORDER.indexOf(s);return Ne(r>=0,"Unknown leaf type: "+n),Ne(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Go.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let lqe,uqe;function RFt(t){lqe=t}function AFt(t){uqe=t}class PFt extends rz{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?$1(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return qn.MIN}maxPost(){return new qn(iC,new Go("[PRIORITY-POST]",uqe))}makePost(e,n){const s=lqe(e);return new qn(n,new Go("[PRIORITY-POST]",s))}toString(){return".priority"}}const ai=new PFt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NFt=Math.log(2);class xFt{constructor(e){const n=i=>parseInt(Math.log(i)/NFt,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const y9=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new na(p,d.node,na.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),R=r(m+1,u);return d=t[m],p=n?n(d):d,new na(p,d.node,na.BLACK,w,R)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,R){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new na(q,V.node,R,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?p(P,na.BLACK):(p(P,na.BLACK),p(P,na.RED))}return h},o=new xFt(t.length),a=i(o);return new hu(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let O8;const v0={};class Tm{static get Default(){return Ne(v0&&ai,"ChildrenNode.ts has not been loaded"),O8=O8||new Tm({".priority":v0},{".priority":ai}),O8}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=lk(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hu?n:null}hasIndex(e){return j_(this.indexSet_,e.toString())}addIndex(e,n){Ne(e!==tS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(qn.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=y9(s,e.getCompare()):a=v0;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Tm(h,u)}addToIndexes(e,n){const s=K6(this.indexes_,(r,i)=>{const o=lk(this.indexSet_,i);if(Ne(o,"Missing index implementation for "+i),r===v0)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(qn.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),y9(a,o.getCompare())}else return v0;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new qn(e.name,a))),l.insert(e,e.node)}});return new Tm(s,this.indexSet_)}removeFromIndexes(e,n){const s=K6(this.indexes_,r=>{if(r===v0)return r;{const i=n.get(e.name);return i?r.remove(new qn(e.name,i)):r}});return new Tm(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let BR,en=class nI{static get EMPTY_NODE(){return BR||(BR=new nI(new hu(Boe),null,Tm.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&cqe(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||BR}updatePriority(e){return this.children_.isEmpty()?this:new nI(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?BR:n}}getChild(e){const n=pn(e);return n===null?this:this.getImmediateChild(n).getChild(ar(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new qn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?BR:this.priorityNode_;return new nI(r,o,i)}}updateChild(e,n){const s=pn(e);if(s===null)return n;{Ne(pn(e)!==".priority"||xw(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(ar(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(ai,(o,a)=>{n[o]=a.val(e),s++,i&&nI.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+aqe(this.getPriority().val())+":"),this.forEachChild(ai,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":D9e(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new qn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new qn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new qn(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,qn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,qn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===GM?-1:0}withIndex(e){if(e===tS||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new nI(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===tS||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(ai),r=n.getIterator(ai);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===tS?null:this.indexMap_.get(e.toString())}};en.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class DFt extends en{constructor(){super(new hu(Boe),en.EMPTY_NODE,Tm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return en.EMPTY_NODE}isEmpty(){return!1}}const GM=new DFt;Object.defineProperties(qn,{MIN:{value:new qn(_k,en.EMPTY_NODE)},MAX:{value:new qn(iC,GM)}});oqe.__EMPTY_NODE=en.EMPTY_NODE;Go.__childrenNodeConstructor=en;kFt(GM);AFt(GM);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OFt=!0;function aa(t,e=null){if(t===null)return en.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Go(n,aa(e))}if(!(t instanceof Array)&&OFt){const n=[];let s=!1;if(Tu(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=aa(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new qn(i,a)))}}),n.length===0)return en.EMPTY_NODE;const r=y9(n,SFt,i=>i.name,Boe);if(s){const i=y9(n,ai.getCompare());return new en(r,aa(e),new Tm({".priority":i},{".priority":ai}))}else return new en(r,aa(e),Tm.Default)}else{let n=en.EMPTY_NODE;return Tu(t,(s,r)=>{if(j_(t,s)&&s.substring(0,1)!=="."){const i=aa(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(aa(e))}}RFt(aa);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LFt extends rz{constructor(e){super(),this.indexPath_=e,Ne(!Sn(e)&&pn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?$1(e.name,n.name):i}makePost(e,n){const s=aa(e),r=en.EMPTY_NODE.updateChild(this.indexPath_,s);return new qn(n,r)}maxPost(){const e=en.EMPTY_NODE.updateChild(this.indexPath_,GM);return new qn(iC,e)}toString(){return nqe(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MFt extends rz{compare(e,n){const s=e.node.compareTo(n.node);return s===0?$1(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return qn.MIN}maxPost(){return qn.MAX}makePost(e,n){const s=aa(e);return new qn(n,s)}toString(){return".value"}}const FFt=new MFt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hqe(t){return{type:"value",snapshotNode:t}}function yk(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function TD(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function CD(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VFt(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $oe{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(TD(n,a)):Ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(yk(n,s)):o.trackChildChange(CD(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(ai,(r,i)=>{n.hasChild(r)||s.trackChildChange(TD(r,i))}),n.isLeafNode()||n.forEachChild(ai,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(CD(r,i,o))}else s.trackChildChange(yk(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?en.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ID{constructor(e){this.indexedFilter_=new $oe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ID.getStartPost_(e),this.endPost_=ID.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new qn(n,s))||(s=en.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=en.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(en.EMPTY_NODE);const i=this;return n.forEachChild(ai,(o,a)=>{i.matches(new qn(o,a))||(r=r.updateImmediateChild(o,en.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UFt{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new ID(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new qn(n,s))||(s=en.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=en.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=en.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(en.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,en.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Ne(a.numChildren()===this.limit_,"");const l=new qn(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(CD(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(TD(n,d));const w=a.updateImmediateChild(n,en.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(yk(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(TD(u.name,u.node)),i.trackChildChange(yk(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,en.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zoe{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ai}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_k}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iC}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ai}copy(){const e=new zoe;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qFt(t){return t.loadsAllData()?new $oe(t.getIndex()):t.hasLimit()?new UFt(t):new ID(t)}function Bbe(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ai?n="$priority":t.index_===FFt?n="$value":t.index_===tS?n="$key":(Ne(t.index_ instanceof LFt,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=So(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=So(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+So(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=So(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+So(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function $be(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ai&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v9 extends Z9e{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=WM("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=v9.getListenId_(e,s),a={};this.listens_[o]=a;const l=Bbe(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),lk(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=v9.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Bbe(e._queryParams),s=e._path.toString(),r=new k$;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+F1(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=hD(a.responseText)}catch{yu("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&yu("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jFt{constructor(){this.rootNode_=en.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w9(){return{value:null,children:new Map}}function dqe(t,e,n){if(Sn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=pn(e);t.children.has(s)||t.children.set(s,w9());const r=t.children.get(s);e=ar(e),dqe(r,e,n)}}function IX(t,e,n){t.value!==null?n(e,t.value):BFt(t,(s,r)=>{const i=new Ys(e.toString()+"/"+s);IX(r,i,n)})}function BFt(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Ft{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Tu(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zbe=10*1e3,zFt=30*1e3,HFt=300*1e3;class WFt{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $Ft(e);const s=zbe+(zFt-zbe)*Math.random();tN(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Tu(e,(r,i)=>{i>0&&j_(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),tN(this.reportStats_.bind(this),Math.floor(Math.random()*2*HFt))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hd;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hd||(hd={}));function fqe(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Hoe(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Woe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class b9{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=hd.ACK_USER_WRITE,this.source=fqe()}operationForChild(e){if(Sn(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ys(e));return new b9(as(),n,this.revert)}}else return Ne(pn(this.path)===e,"operationForChild called for unrelated child."),new b9(ar(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SD{constructor(e,n){this.source=e,this.path=n,this.type=hd.LISTEN_COMPLETE}operationForChild(e){return Sn(this.path)?new SD(this.source,as()):new SD(this.source,ar(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oC{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=hd.OVERWRITE}operationForChild(e){return Sn(this.path)?new oC(this.source,as(),this.snap.getImmediateChild(e)):new oC(this.source,ar(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kD{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=hd.MERGE}operationForChild(e){if(Sn(this.path)){const n=this.children.subtree(new Ys(e));return n.isEmpty()?null:n.value?new oC(this.source,as(),n.value):new kD(this.source,as(),n)}else return Ne(pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new kD(this.source,ar(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dw{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Sn(e))return this.isFullyInitialized()&&!this.filtered_;const n=pn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GFt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function KFt(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(VFt(o.childName,o.snapshotNode))}),$R(t,r,"child_removed",e,s,n),$R(t,r,"child_added",e,s,n),$R(t,r,"child_moved",i,s,n),$R(t,r,"child_changed",e,s,n),$R(t,r,"value",e,s,n),r}function $R(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>YFt(t,a,l)),o.forEach(a=>{const l=QFt(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function QFt(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YFt(t,e,n){if(e.childName==null||n.childName==null)throw M1("Should only compare child_ events.");const s=new qn(e.childName,e.snapshotNode),r=new qn(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iz(t,e){return{eventCache:t,serverCache:e}}function nN(t,e,n,s){return iz(new Dw(e,n,s),t.serverCache)}function pqe(t,e,n,s){return iz(t.eventCache,new Dw(e,n,s))}function E9(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function aC(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let L8;const XFt=()=>(L8||(L8=new hu(M2t)),L8);class yr{static fromObject(e){let n=new yr(null);return Tu(e,(s,r)=>{n=n.set(new Ys(s),r)}),n}constructor(e,n=XFt()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:as(),value:this.value};if(Sn(e))return null;{const s=pn(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(ar(e),n);return i!=null?{path:Ro(new Ys(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Sn(e))return this;{const n=pn(e),s=this.children.get(n);return s!==null?s.subtree(ar(e)):new yr(null)}}set(e,n){if(Sn(e))return new yr(n,this.children);{const s=pn(e),r=(this.children.get(s)||new yr(null)).set(ar(e),n),i=this.children.insert(s,r);return new yr(this.value,i)}}remove(e){if(Sn(e))return this.children.isEmpty()?new yr(null):new yr(null,this.children);{const n=pn(e),s=this.children.get(n);if(s){const r=s.remove(ar(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new yr(null):new yr(this.value,i)}else return this}}get(e){if(Sn(e))return this.value;{const n=pn(e),s=this.children.get(n);return s?s.get(ar(e)):null}}setTree(e,n){if(Sn(e))return n;{const s=pn(e),r=(this.children.get(s)||new yr(null)).setTree(ar(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new yr(this.value,i)}}fold(e){return this.fold_(as(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Ro(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,as(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Sn(e))return null;{const i=pn(e),o=this.children.get(i);return o?o.findOnPath_(ar(e),Ro(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,as(),n)}foreachOnPath_(e,n,s){if(Sn(e))return this;{this.value&&s(n,this.value);const r=pn(e),i=this.children.get(r);return i?i.foreachOnPath_(ar(e),Ro(n,r),s):new yr(null)}}foreach(e){this.foreach_(as(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Ro(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Md{constructor(e){this.writeTree_=e}static empty(){return new Md(new yr(null))}}function sN(t,e,n){if(Sn(e))return new Md(new yr(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=tl(r,e);return i=i.updateChild(o,n),new Md(t.writeTree_.set(r,i))}else{const r=new yr(n),i=t.writeTree_.setTree(e,r);return new Md(i)}}}function Hbe(t,e,n){let s=t;return Tu(n,(r,i)=>{s=sN(s,Ro(e,r),i)}),s}function Wbe(t,e){if(Sn(e))return Md.empty();{const n=t.writeTree_.setTree(e,new yr(null));return new Md(n)}}function SX(t,e){return QC(t,e)!=null}function QC(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(tl(n.path,e)):null}function Gbe(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ai,(s,r)=>{e.push(new qn(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new qn(s,r.value))}),e}function Rv(t,e){if(Sn(e))return t;{const n=QC(t,e);return n!=null?new Md(new yr(n)):new Md(t.writeTree_.subtree(e))}}function kX(t){return t.writeTree_.isEmpty()}function vk(t,e){return gqe(as(),t.writeTree_,e)}function gqe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Ne(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=gqe(Ro(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Ro(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oz(t,e){return vqe(e,t)}function JFt(t,e,n,s,r){Ne(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=sN(t.visibleWrites,e,n)),t.lastWriteId=s}function ZFt(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function e4t(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ne(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&t4t(a,s.path)?r=!1:ud(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return n4t(t),!0;if(s.snap)t.visibleWrites=Wbe(t.visibleWrites,s.path);else{const a=s.children;Tu(a,l=>{t.visibleWrites=Wbe(t.visibleWrites,Ro(s.path,l))})}return!0}else return!1}function t4t(t,e){if(t.snap)return ud(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ud(Ro(t.path,n),e))return!0;return!1}function n4t(t){t.visibleWrites=mqe(t.allWrites,s4t,as()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function s4t(t){return t.visible}function mqe(t,e,n){let s=Md.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)ud(n,o)?(a=tl(n,o),s=sN(s,a,i.snap)):ud(o,n)&&(a=tl(o,n),s=sN(s,as(),i.snap.getChild(a)));else if(i.children){if(ud(n,o))a=tl(n,o),s=Hbe(s,a,i.children);else if(ud(o,n))if(a=tl(o,n),Sn(a))s=Hbe(s,as(),i.children);else{const l=lk(i.children,pn(a));if(l){const u=l.getChild(ar(a));s=sN(s,as(),u)}}}else throw M1("WriteRecord should have .snap or .children")}}return s}function _qe(t,e,n,s,r){if(!s&&!r){const i=QC(t.visibleWrites,e);if(i!=null)return i;{const o=Rv(t.visibleWrites,e);if(kX(o))return n;if(n==null&&!SX(o,as()))return null;{const a=n||en.EMPTY_NODE;return vk(o,a)}}}else{const i=Rv(t.visibleWrites,e);if(!r&&kX(i))return n;if(!r&&n==null&&!SX(i,as()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(ud(u.path,e)||ud(e,u.path))},a=mqe(t.allWrites,o,e),l=n||en.EMPTY_NODE;return vk(a,l)}}}function r4t(t,e,n){let s=en.EMPTY_NODE;const r=QC(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ai,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Rv(t.visibleWrites,e);return n.forEachChild(ai,(o,a)=>{const l=vk(Rv(i,new Ys(o)),a);s=s.updateImmediateChild(o,l)}),Gbe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Rv(t.visibleWrites,e);return Gbe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function i4t(t,e,n,s,r){Ne(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Ro(e,n);if(SX(t.visibleWrites,i))return null;{const o=Rv(t.visibleWrites,i);return kX(o)?r.getChild(n):vk(o,r.getChild(n))}}function o4t(t,e,n,s){const r=Ro(e,n),i=QC(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Rv(t.visibleWrites,r);return vk(o,s.getNode().getImmediateChild(n))}else return null}function a4t(t,e){return QC(t.visibleWrites,e)}function c4t(t,e,n,s,r,i,o){let a;const l=Rv(t.visibleWrites,e),u=QC(l,as());if(u!=null)a=u;else if(n!=null)a=vk(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function l4t(){return{visibleWrites:Md.empty(),allWrites:[],lastWriteId:-1}}function T9(t,e,n,s){return _qe(t.writeTree,t.treePath,e,n,s)}function Goe(t,e){return r4t(t.writeTree,t.treePath,e)}function Kbe(t,e,n,s){return i4t(t.writeTree,t.treePath,e,n,s)}function C9(t,e){return a4t(t.writeTree,Ro(t.treePath,e))}function u4t(t,e,n,s,r,i){return c4t(t.writeTree,t.treePath,e,n,s,r,i)}function Koe(t,e,n){return o4t(t.writeTree,t.treePath,e,n)}function yqe(t,e){return vqe(Ro(t.treePath,e),t.writeTree)}function vqe(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class h4t{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ne(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,CD(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,TD(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,yk(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,CD(s,e.snapshotNode,r.oldSnap));else throw M1("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d4t{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const wqe=new d4t;class Qoe{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Dw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Koe(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:aC(this.viewCache_),i=u4t(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f4t(t){return{filter:t}}function p4t(t,e){Ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function g4t(t,e,n,s,r){const i=new h4t;let o,a;if(n.type===hd.OVERWRITE){const u=n;u.source.fromUser?o=RX(t,e,u.path,u.snap,s,r,i):(Ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Sn(u.path),o=I9(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===hd.MERGE){const u=n;u.source.fromUser?o=_4t(t,e,u.path,u.children,s,r,i):(Ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=AX(t,e,u.path,u.children,s,r,a,i))}else if(n.type===hd.ACK_USER_WRITE){const u=n;u.revert?o=w4t(t,e,u.path,s,r,i):o=y4t(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===hd.LISTEN_COMPLETE)o=v4t(t,e,n.path,s,i);else throw M1("Unknown operation type: "+n.type);const l=i.getChanges();return m4t(e,o,l),{viewCache:o,changes:l}}function m4t(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=E9(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(hqe(E9(e)))}}function bqe(t,e,n,s,r,i){const o=e.eventCache;if(C9(s,n)!=null)return e;{let a,l;if(Sn(n))if(Ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=aC(e),h=u instanceof en?u:en.EMPTY_NODE,d=Goe(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=T9(s,aC(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=pn(n);if(u===".priority"){Ne(xw(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Kbe(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=ar(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=Kbe(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=Koe(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return nN(e,a,o.isFullyInitialized()||Sn(n),t.filter.filtersNodes())}}function I9(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Sn(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=pn(n);if(!l.isCompleteForPath(n)&&xw(n)>1)return e;const w=ar(n),R=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),R):u=h.updateChild(l.getNode(),m,R,w,wqe,null)}const d=pqe(e,u,l.isFullyInitialized()||Sn(n),h.filtersNodes()),p=new Qoe(r,d,i);return bqe(t,d,n,r,p,a)}function RX(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new Qoe(r,e,i);if(Sn(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=nN(e,u,!0,t.filter.filtersNodes());else{const d=pn(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=nN(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=ar(n),m=a.getNode().getImmediateChild(d);let w;if(Sn(p))w=s;else{const R=h.getCompleteChild(d);R!=null?tqe(p)===".priority"&&R.getChild(sqe(p)).isEmpty()?w=R:w=R.updateChild(p,s):w=en.EMPTY_NODE}if(m.equals(w))l=e;else{const R=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=nN(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Qbe(t,e){return t.eventCache.isCompleteForChild(e)}function _4t(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Ro(n,l);Qbe(e,pn(h))&&(a=RX(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Ro(n,l);Qbe(e,pn(h))||(a=RX(t,a,h,u,r,i,o))}),a}function Ybe(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function AX(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Sn(n)?u=s:u=new yr(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=Ybe(t,m,p);l=I9(t,l,new Ys(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),R=Ybe(t,w,p);l=I9(t,l,new Ys(d),R,r,i,o,a)}}),l}function y4t(t,e,n,s,r,i,o){if(C9(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Sn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return I9(t,e,n,l.getNode().getChild(n),r,i,a,o);if(Sn(n)){let u=new yr(null);return l.getNode().forEachChild(tS,(h,d)=>{u=u.set(new Ys(h),d)}),AX(t,e,n,u,r,i,a,o)}else return e}else{let u=new yr(null);return s.foreach((h,d)=>{const p=Ro(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),AX(t,e,n,u,r,i,a,o)}}function v4t(t,e,n,s,r){const i=e.serverCache,o=pqe(e,i.getNode(),i.isFullyInitialized()||Sn(n),i.isFiltered());return bqe(t,o,n,s,wqe,r)}function w4t(t,e,n,s,r,i){let o;if(C9(s,n)!=null)return e;{const a=new Qoe(s,e,r),l=e.eventCache.getNode();let u;if(Sn(n)||pn(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=T9(s,aC(e));else{const d=e.serverCache.getNode();Ne(d instanceof en,"serverChildren would be complete if leaf node"),h=Goe(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=pn(n);let d=Koe(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,ar(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,en.EMPTY_NODE,ar(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=T9(s,aC(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||C9(s,as())!=null,nN(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class b4t{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new $oe(s.getIndex()),i=qFt(s);this.processor_=f4t(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(en.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(en.EMPTY_NODE,a.getNode(),null),h=new Dw(l,o.isFullyInitialized(),r.filtersNodes()),d=new Dw(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=iz(d,h),this.eventGenerator_=new GFt(this.query_)}get query(){return this.query_}}function E4t(t){return t.viewCache_.serverCache.getNode()}function T4t(t){return E9(t.viewCache_)}function C4t(t,e){const n=aC(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Sn(e)&&!n.getImmediateChild(pn(e)).isEmpty())?n.getChild(e):null}function Xbe(t){return t.eventRegistrations_.length===0}function I4t(t,e){t.eventRegistrations_.push(e)}function Jbe(t,e,n){const s=[];if(n){Ne(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function Zbe(t,e,n,s){e.type===hd.MERGE&&e.source.queryId!==null&&(Ne(aC(t.viewCache_),"We should always have a full cache before handling merges"),Ne(E9(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=g4t(t.processor_,r,e,n,s);return p4t(t.processor_,i.viewCache),Ne(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Eqe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function S4t(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ai,(r,i)=>{s.push(yk(r,i))}),n.isFullyInitialized()&&s.push(hqe(n.getNode())),Eqe(t,s,n.getNode(),e)}function Eqe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return KFt(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let S9;class Tqe{constructor(){this.views=new Map}}function k4t(t){Ne(!S9,"__referenceConstructor has already been defined"),S9=t}function R4t(){return Ne(S9,"Reference.ts has not been loaded"),S9}function A4t(t){return t.views.size===0}function Yoe(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Ne(i!=null,"SyncTree gave us an op for an invalid query."),Zbe(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(Zbe(o,e,n,s));return i}}function Cqe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=T9(n,r?s:null),l=!1;a?l=!0:s instanceof en?(a=Goe(n,s),l=!1):(a=en.EMPTY_NODE,l=!1);const u=iz(new Dw(a,l,!1),new Dw(s,r,!1));return new b4t(e,u)}return o}function P4t(t,e,n,s,r,i){const o=Cqe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),I4t(o,n),S4t(o,n)}function N4t(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Ow(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(Jbe(u,n,s)),Xbe(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(Jbe(l,n,s)),Xbe(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Ow(t)&&i.push(new(R4t())(e._repo,e._path)),{removed:i,events:o}}function Iqe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Av(t,e){let n=null;for(const s of t.views.values())n=n||C4t(s,e);return n}function Sqe(t,e){if(e._queryParams.loadsAllData())return az(t);{const n=e._queryIdentifier;return t.views.get(n)}}function kqe(t,e){return Sqe(t,e)!=null}function Ow(t){return az(t)!=null}function az(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let k9;function x4t(t){Ne(!k9,"__referenceConstructor has already been defined"),k9=t}function D4t(){return Ne(k9,"Reference.ts has not been loaded"),k9}let O4t=1;class eEe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yr(null),this.pendingWriteTree_=l4t(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rqe(t,e,n,s,r){return JFt(t.pendingWriteTree_,e,n,s,r),r?QM(t,new oC(fqe(),e,n)):[]}function UE(t,e,n=!1){const s=ZFt(t.pendingWriteTree_,e);if(e4t(t.pendingWriteTree_,e)){let r=new yr(null);return s.snap!=null?r=r.set(as(),!0):Tu(s.children,i=>{r=r.set(new Ys(i),!0)}),QM(t,new b9(s.path,r,n))}else return[]}function KM(t,e,n){return QM(t,new oC(Hoe(),e,n))}function L4t(t,e,n){const s=yr.fromObject(n);return QM(t,new kD(Hoe(),e,s))}function M4t(t,e){return QM(t,new SD(Hoe(),e))}function F4t(t,e,n){const s=Joe(t,n);if(s){const r=Zoe(s),i=r.path,o=r.queryId,a=tl(i,e),l=new SD(Woe(o),a);return eae(t,i,l)}else return[]}function R9(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||kqe(o,e))){const l=N4t(o,e,n,s);A4t(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Ow(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=q4t(p);for(let w=0;w<m.length;++w){const R=m[w],P=R.query,O=xqe(t,R);t.listenProvider_.startListening(rN(P),RD(t,P),O.hashFn,O.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(rN(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(cz(p));t.listenProvider_.stopListening(rN(p),m)}))}j4t(t,u)}return a}function Aqe(t,e,n,s){const r=Joe(t,s);if(r!=null){const i=Zoe(r),o=i.path,a=i.queryId,l=tl(o,e),u=new oC(Woe(a),l,n);return eae(t,o,u)}else return[]}function V4t(t,e,n,s){const r=Joe(t,s);if(r){const i=Zoe(r),o=i.path,a=i.queryId,l=tl(o,e),u=yr.fromObject(n),h=new kD(Woe(a),l,u);return eae(t,o,h)}else return[]}function PX(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=tl(p,r);i=i||Av(m,w),o=o||Ow(m)});let a=t.syncPointTree_.get(r);a?(o=o||Ow(a),i=i||Av(a,as())):(a=new Tqe,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=en.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=Av(m,as());w&&(i=i.updateImmediateChild(p,w))}));const u=kqe(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=cz(e);Ne(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=B4t();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=oz(t.pendingWriteTree_,r);let d=P4t(a,e,n,h,i,l);if(!u&&!o&&!s){const p=Sqe(a,e);d=d.concat($4t(t,e,p))}return d}function Xoe(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=tl(i,e),l=Av(o,a);if(l)return l});return _qe(s,e,r,n,!0)}function U4t(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=tl(u,n);s=s||Av(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Av(r,as()):(r=new Tqe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Dw(s,!0,!1):null,a=oz(t.pendingWriteTree_,e._path),l=Cqe(r,e,a,i?o.getNode():en.EMPTY_NODE,i);return T4t(l)}function QM(t,e){return Pqe(e,t.syncPointTree_,null,oz(t.pendingWriteTree_,as()))}function Pqe(t,e,n,s){if(Sn(t.path))return Nqe(t,e,n,s);{const r=e.get(as());n==null&&r!=null&&(n=Av(r,as()));let i=[];const o=pn(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=yqe(s,o);i=i.concat(Pqe(a,l,u,h))}return r&&(i=i.concat(Yoe(r,t,s,n))),i}}function Nqe(t,e,n,s){const r=e.get(as());n==null&&r!=null&&(n=Av(r,as()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=yqe(s,o),h=t.operationForChild(o);h&&(i=i.concat(Nqe(h,a,l,u)))}),r&&(i=i.concat(Yoe(r,t,s,n))),i}function xqe(t,e){const n=e.query,s=RD(t,n);return{hashFn:()=>(E4t(e)||en.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?F4t(t,n._path,s):M4t(t,n._path);{const i=U2t(r,n);return R9(t,n,null,i)}}}}function RD(t,e){const n=cz(e);return t.queryToTagMap.get(n)}function cz(t){return t._path.toString()+"$"+t._queryIdentifier}function Joe(t,e){return t.tagToQueryMap.get(e)}function Zoe(t){const e=t.indexOf("$");return Ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ys(t.substr(0,e))}}function eae(t,e,n){const s=t.syncPointTree_.get(e);Ne(s,"Missing sync point for query tag that we're tracking");const r=oz(t.pendingWriteTree_,e);return Yoe(s,n,r,null)}function q4t(t){return t.fold((e,n,s)=>{if(n&&Ow(n))return[az(n)];{let r=[];return n&&(r=Iqe(n)),Tu(s,(i,o)=>{r=r.concat(o)}),r}})}function rN(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(D4t())(t._repo,t._path):t}function j4t(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=cz(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function B4t(){return O4t++}function $4t(t,e,n){const s=e._path,r=RD(t,e),i=xqe(t,n),o=t.listenProvider_.startListening(rN(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Ne(!Ow(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!Sn(u)&&h&&Ow(h))return[az(h).query];{let p=[];return h&&(p=p.concat(Iqe(h).map(m=>m.query))),Tu(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(rN(h),RD(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tae{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new tae(n)}node(){return this.node_}}class nae{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ro(this.path_,e);return new nae(this.syncTree_,n)}node(){return Xoe(this.syncTree_,this.path_)}}const z4t=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},tEe=function(t,e,n){if(!t||typeof t!="object")return t;if(Ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return H4t(t[".sv"],e,n);if(typeof t[".sv"]=="object")return W4t(t[".sv"],e);Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},H4t=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ne(!1,"Unexpected server value: "+t)}},W4t=function(t,e,n){t.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Ne(!1,"Unexpected increment value: "+s);const r=e.node();if(Ne(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},G4t=function(t,e,n,s){return sae(e,new nae(n,t),s)},Dqe=function(t,e,n){return sae(t,new tae(e),n)};function sae(t,e,n){const s=t.getPriority().val(),r=tEe(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=tEe(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Go(a,aa(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Go(r))),o.forEachChild(ai,(a,l)=>{const u=sae(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rae{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function iae(t,e){let n=e instanceof Ys?e:new Ys(e),s=t,r=pn(n);for(;r!==null;){const i=lk(s.node.children,r)||{children:{},childCount:0};s=new rae(r,s,i),n=ar(n),r=pn(n)}return s}function H1(t){return t.node.value}function Oqe(t,e){t.node.value=e,NX(t)}function Lqe(t){return t.node.childCount>0}function K4t(t){return H1(t)===void 0&&!Lqe(t)}function lz(t,e){Tu(t.node.children,(n,s)=>{e(new rae(n,t,s))})}function Mqe(t,e,n,s){n&&e(t),lz(t,r=>{Mqe(r,e,!0)})}function Q4t(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function YM(t){return new Ys(t.parent===null?t.name:YM(t.parent)+"/"+t.name)}function NX(t){t.parent!==null&&Y4t(t.parent,t.name,t)}function Y4t(t,e,n){const s=K4t(n),r=j_(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,NX(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,NX(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const X4t=/[\[\].#$\/\u0000-\u001F\u007F]/,J4t=/[\[\].#$\u0000-\u001F\u007F]/,M8=10*1024*1024,Fqe=function(t){return typeof t=="string"&&t.length!==0&&!X4t.test(t)},Vqe=function(t){return typeof t=="string"&&t.length!==0&&!J4t.test(t)},Z4t=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vqe(t)},eVt=function(t,e,n,s){oae(Cie(t,"value"),e,n)},oae=function(t,e,n){const s=n instanceof Ys?new yFt(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+dE(s));if(typeof e=="function")throw new Error(t+"contains a function "+dE(s)+" with contents = "+e.toString());if(O9e(e))throw new Error(t+"contains "+e.toString()+" "+dE(s));if(typeof e=="string"&&e.length>M8/3&&P$(e)>M8)throw new Error(t+"contains a string greater than "+M8+" utf8 bytes "+dE(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Tu(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Fqe(o)))throw new Error(t+" contains an invalid key ("+o+") "+dE(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vFt(s,o),oae(t,a,s),wFt(s)}),r&&i)throw new Error(t+' contains ".value" child '+dE(s)+" in addition to actual children.")}},Uqe=function(t,e,n,s){if(!Vqe(n))throw new Error(Cie(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},tVt=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Uqe(t,e,n)},qqe=function(t,e){if(pn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},nVt=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Fqe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Z4t(n))throw new Error(Cie(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sVt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aae(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!qoe(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function jqe(t,e,n){aae(t,n),Bqe(t,s=>qoe(s,e))}function Bp(t,e,n){aae(t,n),Bqe(t,s=>ud(s,e)||ud(e,s))}function Bqe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(rVt(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rVt(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();eN&&sc("event: "+n.toString()),z1(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iVt="repo_interrupt",oVt=25;class aVt{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sVt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=w9(),this.transactionQueueTree_=new rae,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cVt(t,e,n){if(t.stats_=Voe(t.repoInfo_),t.forceRestClient_||$2t())t.server_=new v9(t.repoInfo_,(s,r,i,o)=>{nEe(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>sEe(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{So(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Lm(t.repoInfo_,e,(s,r,i,o)=>{nEe(t,s,r,i,o)},s=>{sEe(t,s)},s=>{uVt(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=K2t(t.repoInfo_,()=>new WFt(t.stats_,t.server_)),t.infoData_=new jFt,t.infoSyncTree_=new eEe({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=KM(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),lae(t,"connected",!1),t.serverSyncTree_=new eEe({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Bp(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function lVt(t){const e=t.infoData_.getNode(new Ys(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function cae(t){return z4t({timestamp:lVt(t)})}function nEe(t,e,n,s,r){t.dataUpdateCount++;const i=new Ys(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=K6(n,u=>aa(u));o=V4t(t.serverSyncTree_,i,l,r)}else{const l=aa(n);o=Aqe(t.serverSyncTree_,i,l,r)}else if(s){const l=K6(n,u=>aa(u));o=L4t(t.serverSyncTree_,i,l)}else{const l=aa(n);o=KM(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=hz(t,i)),Bp(t.eventQueue_,a,o)}function sEe(t,e){lae(t,"connected",e),e===!1&&fVt(t)}function uVt(t,e){Tu(e,(n,s)=>{lae(t,n,s)})}function lae(t,e,n){const s=new Ys("/.info/"+e),r=aa(n);t.infoData_.updateSnapshot(s,r);const i=KM(t.infoSyncTree_,s,r);Bp(t.eventQueue_,s,i)}function $qe(t){return t.nextWriteId_++}function hVt(t,e,n){const s=U4t(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=aa(r).withIndex(e._queryParams.getIndex());PX(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=KM(t.serverSyncTree_,e._path,i);else{const a=RD(t.serverSyncTree_,e);o=Aqe(t.serverSyncTree_,e._path,i,a)}return Bp(t.eventQueue_,e._path,o),R9(t.serverSyncTree_,e,n,null,!0),i},r=>(uz(t,"get for query "+So(e)+" failed: "+r),Promise.reject(new Error(r))))}function dVt(t,e,n,s,r){uz(t,"set",{path:e.toString(),value:n,priority:s});const i=cae(t),o=aa(n,s),a=Xoe(t.serverSyncTree_,e),l=Dqe(o,a,i),u=$qe(t),h=Rqe(t.serverSyncTree_,e,l,u,!0);aae(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||yu("set at "+e+" failed: "+p);const R=UE(t.serverSyncTree_,u,!w);Bp(t.eventQueue_,e,R),_Vt(t,r,p,m)});const d=Kqe(t,e);hz(t,d),Bp(t.eventQueue_,d,[])}function fVt(t){uz(t,"onDisconnectEvents");const e=cae(t),n=w9();IX(t.onDisconnect_,as(),(r,i)=>{const o=G4t(r,i,t.serverSyncTree_,e);dqe(n,r,o)});let s=[];IX(n,as(),(r,i)=>{s=s.concat(KM(t.serverSyncTree_,r,i));const o=Kqe(t,r);hz(t,o)}),t.onDisconnect_=w9(),Bp(t.eventQueue_,as(),s)}function pVt(t,e,n){let s;pn(e._path)===".info"?s=PX(t.infoSyncTree_,e,n):s=PX(t.serverSyncTree_,e,n),jqe(t.eventQueue_,e._path,s)}function gVt(t,e,n){let s;pn(e._path)===".info"?s=R9(t.infoSyncTree_,e,n):s=R9(t.serverSyncTree_,e,n),jqe(t.eventQueue_,e._path,s)}function mVt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(iVt)}function uz(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),sc(n,...e)}function _Vt(t,e,n,s){e&&z1(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function zqe(t,e,n){return Xoe(t.serverSyncTree_,e,n)||en.EMPTY_NODE}function uae(t,e=t.transactionQueueTree_){if(e||dz(t,e),H1(e)){const n=Wqe(t,e);Ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&yVt(t,YM(e),n)}else Lqe(e)&&lz(e,n=>{uae(t,n)})}function yVt(t,e,n){const s=n.map(u=>u.currentWriteId),r=zqe(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];Ne(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=tl(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{uz(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(UE(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();dz(t,iae(t.transactionQueueTree_,e)),uae(t,t.transactionQueueTree_),Bp(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)z1(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{yu("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}hz(t,e)}},o)}function hz(t,e){const n=Hqe(t,e),s=YM(n),r=Wqe(t,n);return vVt(t,r,s),s}function vVt(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=tl(n,a.path);let u=!1,h;if(Ne(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(UE(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=oVt)u=!0,h="maxretry",r=r.concat(UE(t.serverSyncTree_,a.currentWriteId,!0));else{const d=zqe(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){oae("transaction failed: Data returned ",p,a.path);let m=aa(p);typeof p=="object"&&p!=null&&j_(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,R=cae(t),P=Dqe(m,d,R);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=$qe(t),i.splice(i.indexOf(w),1),r=r.concat(Rqe(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(UE(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(UE(t.serverSyncTree_,a.currentWriteId,!0))}Bp(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}dz(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)z1(s[o]);uae(t,t.transactionQueueTree_)}function Hqe(t,e){let n,s=t.transactionQueueTree_;for(n=pn(e);n!==null&&H1(s)===void 0;)s=iae(s,n),e=ar(e),n=pn(e);return s}function Wqe(t,e){const n=[];return Gqe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Gqe(t,e,n){const s=H1(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);lz(e,r=>{Gqe(t,r,n)})}function dz(t,e){const n=H1(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Oqe(e,n.length>0?n:void 0)}lz(e,s=>{dz(t,s)})}function Kqe(t,e){const n=YM(Hqe(t,e)),s=iae(t.transactionQueueTree_,e);return Q4t(s,r=>{F8(t,r)}),F8(t,s),Mqe(s,r=>{F8(t,r)}),n}function F8(t,e){const n=H1(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(UE(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Oqe(e,void 0):n.length=i+1,Bp(t.eventQueue_,YM(e),r);for(let o=0;o<s.length;o++)z1(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wVt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function bVt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):yu(`Invalid query segment '${n}' in query '${t}'`)}return e}const rEe=function(t,e){const n=EVt(t),s=n.namespace;n.domain==="firebase.com"&&d_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&d_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O2t();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new W9e(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Ys(n.pathString)}},EVt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=wVt(t.substring(h,d)));const p=bVt(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TVt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+So(this.snapshot.exportVal())}}class CVt{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qqe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hae{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Sn(this._path)?null:tqe(this._path)}get ref(){return new B_(this._repo,this._path)}get _queryIdentifier(){const e=$be(this._queryParams),n=Moe(e);return n==="{}"?"default":n}get _queryObject(){return $be(this._queryParams)}isEqual(e){if(e=qs(e),!(e instanceof hae))return!1;const n=this._repo===e._repo,s=qoe(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+_Ft(this._path)}}class B_ extends hae{constructor(e,n){super(e,n,new zoe,!1)}get parent(){const e=sqe(this._path);return e===null?null:new B_(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class AD{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ys(e),s=xX(this.ref,e);return new AD(this._node.getChild(n),s,ai)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new AD(s,xX(this.ref,n),ai)))}hasChild(e){const n=new Ys(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yqe(t,e){return t=qs(t),t._checkNotDeleted("ref"),e!==void 0?xX(t._root,e):t._root}function xX(t,e){return t=qs(t),pn(t._path)===null?tVt("child","path",e):Uqe("child","path",e),new B_(t._repo,Ro(t._path,e))}function Xqe(t){return qqe("remove",t._path),dae(t,null)}function dae(t,e){t=qs(t),qqe("set",t._path),eVt("set",e,t._path);const n=new k$;return dVt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Jqe(t){t=qs(t);const e=new Qqe(()=>{}),n=new fz(e);return hVt(t._repo,t,n).then(s=>new AD(s,new B_(t._repo,t._path),t._queryParams.getIndex()))}class fz{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new TVt("value",this,new AD(e.snapshotNode,new B_(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new CVt(this,e,n):null}matches(e){return e instanceof fz?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function IVt(t,e,n,s,r){const i=new Qqe(n,void 0),o=new fz(i);return pVt(t._repo,t,o),()=>gVt(t._repo,t,o)}function Zqe(t,e,n,s){return IVt(t,"value",e)}k4t(B_);x4t(B_);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SVt="FIREBASE_DATABASE_EMULATOR_HOST",DX={};let kVt=!1;function RVt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=sg(i);t.repoInfo_=new W9e(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function AVt(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||d_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sc("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=rEe(i,r),a=o.repoInfo,l;typeof process<"u"&&Ibe&&(l=Ibe[SVt]),l?(i=`http://${l}?ns=${a.namespace}`,o=rEe(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new H2t(t.name,t.options,e);nVt("Invalid Firebase Database URL",o),Sn(o.path)||d_("Database URL must point to the root of a Firebase Database (not including a child path).");const h=NVt(a,t,u,new z2t(t,n));return new xVt(h,t)}function PVt(t,e){const n=DX[e];(!n||n[t.key]!==t)&&d_(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mVt(t),delete n[t.key]}function NVt(t,e,n,s){let r=DX[e.name];r||(r={},DX[e.name]=r);let i=r[t.toURLString()];return i&&d_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new aVt(t,kVt,n,s),r[t.toURLString()]=i,i}class xVt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(cVt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new B_(this._repo,as())),this._rootInternal}_delete(){return this._rootInternal!==null&&(PVt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&d_("Cannot call "+e+" on a deleted database.")}}function fae(t=x$(),e){const n=LM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=bie("database");s&&DVt(n,...s)}return n}function DVt(t,e,n,s={}){t=qs(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Cw(s,i.repoInfo_.emulatorOptions))return;d_("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&d_('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new hV(hV.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:Eie(s.mockUserToken,t.app.options.projectId);o=new hV(a)}sg(e)&&(R$(e),A$("Database",!0)),RVt(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OVt(t){R2t(Ib),Iw(new o_("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return AVt(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Ch(Sbe,kbe,t),Ch(Sbe,kbe,"esm2020")}Lm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Lm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};OVt();var Kb={};const go={apiKey:Kb.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Kb.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Kb.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Kb.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Kb.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Kb.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Kb.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log(" Firebase  :",{apiKey:go.apiKey?"":" ",authDomain:go.authDomain?"":" ",projectId:go.projectId?"":" ",storageBucket:go.storageBucket?"":" ",messagingSenderId:go.messagingSenderId?"":" ",appId:go.appId?"":" ",databaseURL:go.databaseURL?"":""});console.log(" Firebase   :",{apiKey:go.apiKey?`${go.apiKey.substring(0,10)}...`:"",authDomain:go.authDomain,projectId:go.projectId,databaseURL:go.databaseURL?"":""});(!go.apiKey||!go.authDomain||!go.projectId)&&console.warn(" Firebase   .   .");let Wr,ei,qE,PD,ND;go.apiKey&&go.authDomain&&go.projectId?(Wr=eUe(go),ei=Kie(Wr),qE=new Yh,PD=X6e(Wr),ND=C2t(Wr),fae(Wr)):(console.warn(" Firebase  .  (,  )    ."),ei=null,qE=null,PD=null,ND=null);const LVt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return ei},get db(){return PD},get firebaseApp(){return Wr},get googleProvider(){return qE},get storage(){return ND}},Symbol.toStringTag,{value:"Module"}));function pae(){return _u(TVe)}const fr=Vp(null),gf=Vp(!0),OF=Vp(null);let w0=null,iEe=!1;function gae(){const t=pae(),e=Wr?X6e(Wr):null;e?console.log(" Firestore  "):console.error(" Firestore  ."),Wr?console.log(" Firebase  "):console.warn(" Firebase  .     .");const n=async l=>{if(!e)throw console.log(" Firestore  ."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("    :",l.email,`( ${h+1}/${u})`);const d=Eoe(e,"users",l.uid),p=await p9(d);if(p.exists()){const m=p.data();return console.log("   :",m),await g9(d,{lastLoginAt:JP()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("    :",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],R=w.includes(l.email||"");console.log("   :",{userEmail:l.email,adminEmails:w,isAdminEmail:R});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:R?"admin":"student",createdAt:JP(),lastLoginAt:JP()};console.log("     :",P),await g9(d,P),console.log("    :",l.email);const O=await p9(d);if(O.exists())console.log("    :",O.data());else throw console.error("    :   "),new Error("   .");return{...l,role:R?"admin":"student"}}}catch(d){if(h++,console.error(` Firestore   ( ${h}/${u}):`,d),console.error("  :",d.code),console.error("  :",d.message),d.code==="permission-denied")throw console.error(" Firestore  .   ."),console.error("   :",{code:d.code,message:d.message,firebaseApp:!!Wr,db:!!e,auth:!!ei,userUid:l.uid,userEmail:l.email}),new Error("Firebase   . Firestore   Security Rules    .");if(h<u)console.log(` ${h*1e3}ms  ...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("   .   ."),new Error("    .    .")}return{...l,role:"student"}},s=async()=>{if(!gf.value){gf.value=!0,OF.value=null;try{if(!ei||!qE)throw new Error("Firebase is not configured.");const l=await Wie(ei,qE);console.log(" Google   :",l.user.email);try{if(Wr&&e)fr.value=await n(l.user),console.log("      :",fr.value.role);else{console.log(" Firebase      ."),fr.value=null,ei&&await TE(ei),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3}),gf.value=!1;return}console.log("      :",{isAuthenticated:!!fr.value,userRole:fr.value?.role,userEmail:fr.value?.email})}catch(u){console.error("      :",u),fr.value=null,ei&&await TE(ei),t.notify({type:"warning",message:"Firebase       .",timeout:5e3}),gf.value=!1;return}gf.value=!1,t.notify({type:"positive",message:" !",timeout:2e3})}catch(l){console.error(" Google   :",l),OF.value=l.message,t.notify({type:"negative",message:"   ."}),gf.value=!1}}},r=async()=>{if(console.log(" useAuth: logout  "),console.log(" useAuth: auth  :",!!ei),!ei){console.log(" useAuth: auth  ");return}try{w0&&(console.log(" useAuth: Firestore  "),w0(),w0=null),console.log(" useAuth: Firebase signOut "),await TE(ei),console.log(" useAuth: Firebase signOut "),fr.value=null,console.log(" useAuth:    "),console.log("  ")}catch(l){console.error(" useAuth:  :",l),t.notify({type:"negative",message:"   ."})}},i=()=>{if(!iEe){if(iEe=!0,console.log(" Firebase   :",{firebaseApp:!!Wr,auth:!!ei,db:!!e}),!ei){console.log(" Firebase Auth  "),gf.value=!1;return}console.log(" Firebase Auth  "),w0=jie(ei,async l=>{if(console.log(" onAuthStateChanged . :",l?l.email:""),l)if(console.log("   :",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),Wr&&e)try{fr.value=await n(l),console.log("    :",fr.value.role),console.log("    :",{isAuthenticated:!!fr.value,userRole:fr.value?.role,userEmail:fr.value?.email})}catch(u){console.error("    :",u),console.error("  :",u.code),console.error("  :",u.message),fr.value=null,ei&&await TE(ei),OF.value=u.message,t.notify({type:"warning",message:" /     .  .",timeout:5e3}),gf.value=!1;return}else console.log(" Firebase       ."),fr.value=null,ei&&await TE(ei),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3});else console.log("   "),fr.value=null,console.log("     ");gf.value=!1})}};xM(()=>{w0&&w0()});const o=()=>{console.log("   :",{user:fr.value,isAuthenticated:!!fr.value,userRole:fr.value?.role,firebaseApp:!!Wr,firestore:!!e})},a=()=>(console.log(" Firebase   :"),console.log("  - Firebase App:",!!Wr),console.log("  - Firebase Auth:",!!ei),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!qE),Wr&&console.log("  - Firebase Config:",{apiKey:Wr.options.apiKey?"":" ",authDomain:Wr.options.authDomain?"":" ",projectId:Wr.options.projectId?"":" ",storageBucket:Wr.options.storageBucket?"":" "}),{firebaseApp:!!Wr,auth:!!ei,db:!!e,googleProvider:!!qE});return{user:rt(()=>fr.value),loading:rt(()=>gf.value),error:rt(()=>OF.value),isAuthenticated:rt(()=>!!fr.value),displayName:rt(()=>fr.value?.displayName||""),email:rt(()=>fr.value?.email||""),photoURL:rt(()=>fr.value?.photoURL||""),isFirebaseConfigured:rt(()=>!!Wr),userRole:rt(()=>fr.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const MVt={id:"app"},FVt=O1({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=gae(),o=yie(),a=vie();return PM(()=>{e()}),fT([n,s,r],([l,u,h])=>{h||(console.log(`  : isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(` : ${a.path}`),i(),l?u==="admin"?(console.log(" .   ."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log(" .   ."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("    .   ."):console.log(" .   ."))}),(l,u)=>{const h=eie("router-view");return v$(),rie("div",MVt,[Ea(h)])}}}),VVt=t=>t,UVt=VVt,qVt=[{path:"/",component:()=>ur(()=>ns(()=>an(()=>import("./MainLayout-DWpWAzPm-DxBUie-I-BlRMqTDm.js"),__vite__mapDeps([44,45,46,47,48,49,50,51,52,53,54,55])),Fs([44,45,46,47,48,49,50,51,52,53,54,55])),ri([44,45,46,47,48,49,50,51,52,53,54,55,56,57])),children:[{path:"",component:()=>ur(()=>ns(()=>an(()=>import("./IndexPage-DdKp2QWP-D1s0LB9j-CI6bShkb.js"),__vite__mapDeps([56,45,46,47,54,57,52,53,58,55])),Fs([56,45,46,47,54,57,52,53,58,55])),ri([58,45,46,47,54,59,52,53,60,56,61]))},{path:"survey-results",component:()=>ur(()=>ns(()=>an(()=>import("./SurveyResults-Dr3yr6i_-DyDTVqvG-CTHBJa1h.js"),__vite__mapDeps([59,50,47,45,46,49,60,57,61])),Fs([59,50,47,45,46,49,60,57,61])),ri([62,50,47,45,46,49,63,59,64,65]))}]},{path:"/logout",component:()=>ur(()=>ns(()=>an(()=>import("./LogoutPage-4UfyfpuW-DSspP6jT-BCrATKCZ.js"),__vite__mapDeps([62,46,47,54,57,48])),Fs([62,46,47,54,57,48])),ri([66,46,47,54,59,48,67]))},{path:"/poll-result",component:()=>ur(()=>ns(()=>an(()=>import("./PollResultPage-C5no3dXq-D30XDp5c-4DUkKc-y.js"),__vite__mapDeps([63,50,47,57,61])),Fs([63,50,47,57,61])),ri([68,50,47,59,64,65,69]))},{path:"/study/:courseId",component:()=>ur(()=>ns(()=>an(()=>import("./StudentView-Yd_YbX30-DTQa4fZ0-DyVb8kZP.js"),__vite__mapDeps([64,45,46,47,49,51,48,52,53,54,50,58,57,60,61])),Fs([64,45,46,47,49,51,48,52,53,54,50,58,57,60,61])),ri([70,45,46,47,49,51,48,52,53,54,50,55,60,59,63,64,65,71])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("   :",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("    :",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ur(()=>ns(()=>an(()=>import("./ErrorNotFound-BDIBmV6S-BmzAQ02S-CYSDIbyT.js"),[]),[]),[])}],V8=UVt(function(){return IAt({scrollBehavior:()=>({left:0,top:0}),routes:qVt,history:eAt("/")})});async function jVt(t,e){const n=t(FVt);n.use(TRt,e);const s=HC(typeof V8=="function"?await V8({}):V8);return{app:n,router:s}}const OX={xs:18,sm:24,md:32,lg:38,xl:46},XM={size:String};function JM(t,e=OX){return rt(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function mae(t,e){return t!==void 0&&t()||e}function eje(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function jE(t,e){return t!==void 0?e.concat(t()):e}function _ae(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function tje(t,e,n,s,r,i){e.key=s+r;const o=Nt(t,e,n);return r===!0?f$(o,i()):o}const oEe="0 0 24 24",U8=t=>t,q8=t=>`ionicons ${t}`,nje={"mdi-":t=>`mdi ${t}`,"icon-":U8,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":q8,"ion-ios":q8,"ion-logo":q8,"iconfont ":U8,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":U8},sje={o_:"-outlined",r_:"-round",s_:"-sharp"},rje={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},BVt=new RegExp("^("+Object.keys(nje).join("|")+")"),$Vt=new RegExp("^("+Object.keys(sje).join("|")+")"),aEe=new RegExp("^("+Object.keys(rje).join("|")+")"),zVt=/^[Mm]\s?[-+]?\.?\d/,HVt=/^img:/,WVt=/^svguse:/,GVt=/^ion-/,KVt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,wk=WC({name:"QIcon",props:{...XM,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=q_(),s=JM(t),r=rt(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=rt(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(zVt.test(a)===!0){const[h,d=oEe]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,R]=p.split("@@");return Nt("path",{style:w,d:m,transform:R})})}}if(HVt.test(a)===!0)return{img:!0,src:a.substring(4)};if(WVt.test(a)===!0){const[h,d=oEe]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(BVt);if(u!==null)o=nje[u[1]](a);else if(KVt.test(a)===!0)o=a;else if(GVt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(aEe.test(a)===!0){o="notranslate material-symbols";const h=a.match(aEe);h!==null&&(a=a.substring(6),o+=rje[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match($Vt);h!==null&&(a=a.substring(2),o+=sje[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?Nt(t.tag,o,mae(e.default)):i.value.img===!0?Nt(t.tag,o,jE(e.default,[Nt("img",{src:i.value.src})])):i.value.svg===!0?Nt(t.tag,o,jE(e.default,[Nt("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?Nt(t.tag,o,jE(e.default,[Nt("svg",{viewBox:i.value.viewBox},[Nt("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),Nt(t.tag,o,jE(e.default,[i.value.content])))}}}),yae=WC({name:"QAvatar",props:{...XM,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=JM(t),s=rt(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=rt(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[Nt(wk,{name:t.icon})]:void 0;return Nt("div",{class:s.value,style:n.value},[Nt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},_ae(e.default,i))])}}}),vae={size:{type:[String,Number],default:"1em"},color:String};function wae(t){return{cSize:rt(()=>t.size in OX?`${OX[t.size]}px`:t.size),classes:rt(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const pz=WC({name:"QSpinner",props:{...vae,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=wae(t);return()=>Nt("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Nt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function bae(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function ije(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Om(t);if(e)return e.$el||e}function oje(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function QVt(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function cEe(t,e,n,s){n.modifiers.stop===!0&&T$(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=uie(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,R=`${(d-m)/2}px`,P=i?R:`${l.left-u-w}px`,O=`${(p-m)/2}px`,M=i?O:`${l.top-h-w}px`;a.className="q-ripple__inner",bae(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${R},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function lEe(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const Eae=lie({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&cEe(r,t,s,r.qKeyEvent===!0)},keystart:QVt(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&cD(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&cEe(r,t,s,!0)},300)};lEe(s,e),t.__qripple=s,hie(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&lEe(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),die(e,"main"),delete t._qripple)}}),aje={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},YVt=Object.keys(aje),Tae={align:{type:String,validator:t=>YVt.includes(t)}};function Cae(t){return rt(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${aje[e]}`})}function cje(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function Iae(t){return t.appContext.config.globalProperties.$router!==void 0}function lje(t){return t.isUnmounted===!0||t.isDeactivated===!0}function uEe(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function hEe(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function XVt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function dEe(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function JVt(t,e){return Array.isArray(t)===!0?dEe(t,e):Array.isArray(e)===!0?dEe(e,t):t===e}function ZVt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(JVt(t[n],e[n])===!1)return!1;return!0}const uje={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},hje={...uje,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function Sae({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=q_(),{props:s,proxy:r,emit:i}=n,o=Iae(n),a=rt(()=>s.disable!==!0&&s.href!==void 0),l=rt(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=rt(()=>l.value===!0?M(s.to):null),h=rt(()=>u.value!==null),d=rt(()=>a.value===!0||h.value===!0),p=rt(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=rt(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=rt(()=>{if(h.value===!1)return-1;const{matched:W}=u.value,{length:J}=W,I=W[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(hEe.bind(null,I));if(y!==-1)return y;const T=uEe(W[J-2]);return J>1&&uEe(I)===T&&v[v.length-1].path!==T?v.findIndex(hEe.bind(null,W[J-2])):y}),R=rt(()=>h.value===!0&&w.value!==-1&&XVt(r.$route.params,u.value.params)),P=rt(()=>R.value===!0&&w.value===r.$route.matched.length-1&&ZVt(r.$route.params,u.value.params)),O=rt(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":R.value===!0?` ${s.activeClass}`:"":"");function M(W){try{return r.$router.resolve(W)}catch{}return null}function V(W,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return W.preventDefault(),Promise.resolve(!1);if(W.metaKey||W.altKey||W.ctrlKey||W.shiftKey||W.button!==void 0&&W.button!==0||s.target==="_blank")return Promise.resolve(!1);W.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(W){if(h.value===!0){const J=I=>V(W,I);i("click",W,J),W.defaultPrevented!==!0&&J()}else i("click",W)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:R,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const fEe={none:0,xs:4,sm:8,md:16,lg:24,xl:32},eUt={xs:8,sm:10,md:14,lg:20,xl:24},tUt=["button","submit","reset"],nUt=/[^\s]\/[^\s]/,sUt=["flat","outline","push","unelevated"];function rUt(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const iUt={...XM,...uje,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...sUt.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Tae.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},oUt={...iUt,round:Boolean};function aUt(t){const e=JM(t,eUt),n=Cae(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=Sae({fallbackTag:"button"}),l=rt(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in fEe?fEe[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),u=rt(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=rt(()=>t.disable!==!0&&t.loading!==!0),d=rt(()=>h.value===!0?t.tabindex||0:-1),p=rt(()=>rUt(t,"standard")),m=rt(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):tUt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&nUt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=rt(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),R=rt(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:R,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:nh}=i_;let b0=null,E0=null,T0=null;const kae=WC({name:"QBtn",props:{...oUt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=q_(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=aUt(t),p=Vp(null),m=Vp(null);let w=null,R,P=null;const O=rt(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=rt(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=rt(()=>({center:t.round})),q=rt(()=>{const G=Math.max(0,Math.min(100,t.percentage));return G>0?{transition:"transform 0.6s",transform:`translateX(${G-100}%)`}:{}}),W=rt(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const G={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";G[`onTouchstart${ne}`]=y}return G}return{onClick:Ay}}),J=rt(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...W.value}));function I(G){if(p.value!==null){if(G!==void 0){if(G.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){G.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",Ay,!0),document.removeEventListener("keyup",ae,nh),p.value?.removeEventListener("blur",ae,nh)};document.addEventListener("keydown",Ay,!0),document.addEventListener("keyup",ae,nh),p.value.addEventListener("blur",ae,nh)}}h(G)}}function v(G){p.value!==null&&(n("keydown",G),cD(G,[13,32])===!0&&E0!==p.value&&(E0!==null&&E(),G.defaultPrevented!==!0&&(G.qAvoidFocus!==!0&&p.value.focus(),E0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,nh)),Ay(G)))}function y(G){p.value!==null&&(n("touchstart",G),G.defaultPrevented!==!0&&(b0!==p.value&&(b0!==null&&E(),b0=p.value,w=G.target,w.addEventListener("touchcancel",S,nh),w.addEventListener("touchend",S,nh)),R=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,R=!1},200)))}function T(G){p.value!==null&&(G.qSkipRipple=R===!0,n("mousedown",G),G.defaultPrevented!==!0&&T0!==p.value&&(T0!==null&&E(),T0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,nh)))}function S(G){if(p.value!==null&&!(G?.type==="blur"&&document.activeElement===p.value)){if(G?.type==="keyup"){if(E0===p.value&&cD(G,[13,32])===!0){const ne=new MouseEvent("click",G);ne.qKeyEvent=!0,G.defaultPrevented===!0&&aD(ne),G.cancelBubble===!0&&T$(ne),p.value.dispatchEvent(ne),Ay(G),G.qKeyEvent=!0}n("keyup",G)}E()}}function E(G){const ne=m.value;G!==!0&&(b0===p.value||T0===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),b0===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,nh),w.removeEventListener("touchend",S,nh)),b0=w=null),T0===p.value&&(document.removeEventListener("mouseup",S,nh),T0=null),E0===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,nh),E0=null),p.value?.classList.remove("q-btn--active")}function b(G){Ay(G),G.qSkipRipple=!0}return NM(()=>{E(!0)}),Object.assign(s,{click:G=>{d.value===!0&&I(G)}}),()=>{let G=[];t.icon!==void 0&&G.push(Nt(wk,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&G.push(Nt("span",{class:"block"},[t.label])),G=jE(e.default,G),t.iconRight!==void 0&&t.round===!1&&G.push(Nt(wk,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[Nt("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(Nt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Nt("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(Nt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},G)),t.loading!==null&&ne.push(Nt(cie,{name:"q-transition--fade"},()=>t.loading===!0?[Nt("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Nt(pz)])]:null)),f$(Nt(u.value,J.value,ne),[[Eae,M.value,void 0,V.value]])}}});let cUt=1,lUt=document.body;function Rae(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${cUt++}`:t,H6.globalNodes!==void 0){const s=H6.globalNodes.class;s!==void 0&&(n.className=s)}return lUt.appendChild(n),n}function dje(t){t.remove()}let uUt=0;const dV={},fV={},qh={},fje={},hUt=/^\s*$/,pje=[],dUt=[void 0,null,!0,!1,""],Aae=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],fUt=["top-left","top-right","bottom-left","bottom-right"],NA={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function gje(t,e,n){if(!t)return zR("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,dV),eC(t)===!1&&(r.type&&Object.assign(r,NA[r.type]),t={message:t}),Object.assign(r,NA[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=pz),r.spinner=HC(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:pEe(r.message)||pEe(r.caption)},r.position){if(Aae.includes(r.position)===!1)return zR("wrong position",t)}else r.position="bottom";if(dUt.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return zR("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(dV.actions)===!0?dV.actions:[]).concat(Array.isArray(NA[t.type]?.actions)===!0?NA[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=qh[r.position].value.indexOf(n.notif);qh[r.position].value[l]=r}else{const l=fV[r.meta.group];if(l===void 0){if(r.meta.uid=uUt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)qh[r.position].value.splice(Math.floor(qh[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";qh[r.position].value[u](r)}r.group!==void 0&&(fV[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(fUt.includes(r.badgePosition)===!1)return zR("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=qh[r.position].value.indexOf(l);qh[r.position].value[u]=fV[r.meta.group]=r}}const a=()=>{pUt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?zR("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});gje(u,e,s)}}}function pUt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=qh[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete fV[t.meta.group];const n=pje[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}qh[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function pEe(t){return t!=null&&hUt.test(t)!==!0}function zR(t,e){return console.error(`Notify: ${t}`,e),!1}function gUt(){return WC({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Nt("div",{class:"q-notifications"},Aae.map(t=>Nt(G1t,{key:t,class:fje[t],tag:"div",name:`q-notification--${t}`},()=>qh[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(Nt(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(Nt(wk,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(Nt(yae,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Nt("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[Nt("div",a),Nt("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(Nt("div",o,i))}const r=[Nt("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(Nt("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(Nt("div",{class:n.actionsClass},e.actions.map(i=>Nt(kae,i)))),n.badge>1&&r.push(Nt("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Nt("div",{ref:i=>{pje[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[Nt("div",{class:n.wrapperClass},r)])}))))}})}const mUt={setDefaults(t){eC(t)===!0&&Object.assign(dV,t)},registerType(t,e){eC(e)===!0&&(NA[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>gje(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Aae.forEach(s=>{qh[s]=Vp([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;fje[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=Rae("q-notify");wRt(gUt(),e).mount(n)}}},_Ut={config:{},plugins:{Notify:mUt}},yUt="/";async function vUt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:yUt})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}jVt(pVe,_Ut).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ur(()=>ns(()=>an(()=>import("./pinia-BFGcd6GC-l0KS0nH_-rCuYGOhx.js"),__vite__mapDeps([65,53])),Fs([65,53])),ri([72,53]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");vUt(t,r)})});const wUt=Object.freeze(Object.defineProperty({__proto__:null,$:W3,A:zO,B:x_,C:Vj,D:db,E:KO,F:Mj,G:VO,H:Pm,I:jL,J:Ff,K:xC,L:sL,M:PC,N:FL,O:pt,P:RC,Q:YL,R:Uj,get S(){return Zs},T:n1,U:ML,V:NC,W:ah,X:Hj,Y:ho,Z:G3,_:ur,a:t1,a$:a1,a0:LL,a1:K3,a2:fb,a3:NT,a4:pu,a5:s1,a6:qj,a7:KL,a8:tL,a9:jO,aA:XO,aB:Bj,aC:rv,aD:nB,aE:Gj,aF:BL,aG:$L,aH:tm,aI:vL,aJ:lL,aK:oL,aL:fL,aM:gL,aN:uL,aO:yL,aP:RS,aQ:cL,aR:hL,aS:c1,aT:wL,aU:mL,aV:pL,aW:hh,aX:Jd,aY:Pu,aZ:uh,a_:lh,aa:Jk,ab:Yj,ac:Qj,ad:Yd,ae:UO,af:qO,ag:_m,ah:eT,ai:eL,aj:BO,ak:e1,al:xT,am:jm,an:ZO,ao:YO,ap:qm,aq:eB,ar:bL,as:Y3,at:MC,au:FC,av:yn,aw:QO,ax:J3,ay:JO,az:zj,b:nt,b$:n$,get b0(){return jT},b1:kL,b2:MS,b3:R3,b4:FS,get b5(){return BT},b6:M3,b7:x3,b8:k3,b9:sT,bA:UC,bB:$5,bC:UB,bD:z5,bE:Zd,bF:st,bG:L_,bH:fv,bI:v1,bJ:w1,bK:bB,bL:IB,bM:sM,bN:pB,bO:vb,bP:_t,bQ:H5,bR:eg,bS:cl,bT:Pne,bU:Ire,bV:RB,bW:JL,bX:Nre,bY:ua,bZ:vne,b_:CB,ba:O3,bb:D3,bc:L3,bd:A3,be:QL,bf:WL,bg:GL,bh:Aj,bi:PT,bj:XL,bk:Qd,bl:tB,bm:$j,bn:rB,bo:Wj,bp:qL,bq:Z3,br:zL,bs:Cj,bt:P_,bu:Dj,bv:Ri,bw:Qf,bx:MO,by:Ij,bz:kj,c:Lo,c$:Ane,c0:np,c1:SB,c2:uB,c3:rM,c4:SM,c5:iu,c6:pne,c7:y1,c8:tM,c9:Ene,cA:Rre,cB:MI,cC:LB,cD:eM,cE:wB,cF:nM,cG:zS,cH:Tne,cI:OB,cJ:e$,cK:MB,cL:xne,cM:Nne,cN:uw,cO:x1,cP:D1,cQ:An,cR:l5,cS:Cre,cT:AB,cU:DB,cV:Sne,cW:xB,cX:Cne,cY:Sre,cZ:aT,c_:Pre,ca:X5,cb:XT,cc:bne,cd:G5,ce:Jg,cf:kne,cg:b1,ch:qB,ci:_1,get cj(){return mr},ck:B5,cl:Ere,cm:bre,cn:q5,co:Tre,cp:qC,cq:$S,cr:Qu,cs:oM,ct:lw,cu:xp,cv:vB,cw:mB,cx:_B,cy:Zy,cz:NB,d:bd,d$:Fo,d0:K5,d1:Q5,d2:$y,d3:a5,d4:YB,d5:KB,d6:e5,d7:n5,d8:JB,d9:o5,dA:$se,dB:Nse,dC:t$,dD:J5,dE:Z5,dF:dne,dG:BS,dH:s$,dI:Ine,dJ:Np,dK:Are,dL:xre,dM:Rne,dN:Y5,dO:kre,dP:W5,dQ:tne,dR:yb,dS:gne,dT:$i,dU:xm,dV:hB,dW:nne,dX:une,dY:Vp,dZ:Cb,d_:JFe,da:Lx,db:QB,dc:ZB,dd:dM,de:c5,df:s5,dg:t5,dh:Kh,di:Op,dj:fh,dk:Gh,dl:Wh,dm:uM,get dn(){return rk},dp:C5,dq:zx,dr:Pse,ds:Hx,get dt(){return ik},du:zse,dv:qse,dw:Ase,dx:BI,dy:Bse,dz:jse,e:WO,e$:a9e,e0:Ev,e1:zn,e2:fT,e3:d$,e4:_4e,e5:HC,e6:rt,e7:Ure,e8:ZFe,e9:_u,eA:aD,eB:PM,eC:vie,eD:iie,eE:Kre,eF:tVe,eG:Vre,eH:oie,eI:yie,eJ:pae,eK:r_,eL:NM,eM:ZT,eN:i_,eO:KI,eP:xM,eQ:jE,get eR(){return Wr},eS:fae,eT:Zqe,eU:Yqe,eV:pie,get eW(){return ND},eX:P9e,eY:S9e,get eZ(){return PD},e_:Eoe,ea:U4e,eb:WC,ec:q_,ed:Nt,ee:mae,ef:kVe,eg:CVe,eh:IVe,ei:ije,ej:bae,ek:XM,el:JM,em:tje,en:Eae,eo:wk,ep:_ae,eq:Ay,er:O1,es:rie,et:w$,eu:Ea,ev:v$,ew:kae,ex:T$,ey:Th,ez:L1,f:LO,f$:Yh,f0:JP,f1:R9e,f2:k9e,f3:A9e,f4:g9,f5:p9,f6:l9e,f7:c9e,f8:hje,f9:Sae,fA:fVe,fB:cie,fC:u$,fD:uVe,fE:pz,fF:eie,fG:Jre,fH:oje,fI:$P,fJ:Zre,fK:m$,fL:Iae,fM:gie,fN:PVe,fO:AVe,fP:gVe,fQ:oD,fR:cje,fS:S4e,fT:Rae,fU:dje,fV:yVe,fW:Tae,fX:Cae,fY:O$,fZ:Bf,f_:$f,fa:cD,fb:eje,fc:gae,fd:dae,fe:Jqe,ff:kM,fg:RM,fh:Om,fi:Xqe,fj:f$,fk:lie,fl:die,fm:vVe,fn:hie,fo:uie,fp:_Ve,fq:fie,fr:Xre,fs:Yre,ft:lje,fu:SVe,fv:eC,fw:Kie,fx:Ru,fy:L4e,fz:yae,g:nL,g0:l_,g1:zf,g2:qie,g3:Bie,g4:Gie,g5:L$,g6:Fie,g7:Nie,g8:Z6,g9:zie,ga:Mie,gb:jie,gc:Uie,gd:Sie,ge:Die,gf:Wie,gg:TE,gh:vae,gi:wae,gj:OSt,gk:LVt,h:qc,i:xj,j:Nh,k:HO,l:m1,m:AC,n:Zk,o:HL,p:ow,q:lf,r:mc,s:Xp,t:Kj,u:$O,v:X3,w:UL,x:VL,y:sB,z:Xk},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pae(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ws={},nS=[],pp=()=>{},bUt=()=>!1,gz=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nae=t=>t.startsWith("onUpdate:"),zo=Object.assign,xae=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},EUt=Object.prototype.hasOwnProperty,ys=(t,e)=>EUt.call(t,e),At=Array.isArray,sS=t=>mz(t)==="[object Map]",mje=t=>mz(t)==="[object Set]",Gt=t=>typeof t=="function",mi=t=>typeof t=="string",Rb=t=>typeof t=="symbol",Rr=t=>t!==null&&typeof t=="object",_je=t=>(Rr(t)||Gt(t))&&Gt(t.then)&&Gt(t.catch),yje=Object.prototype.toString,mz=t=>yje.call(t),TUt=t=>mz(t).slice(8,-1),vje=t=>mz(t)==="[object Object]",Dae=t=>mi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,iN=Pae(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_z=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},CUt=/-(\w)/g,Lh=_z(t=>t.replace(CUt,(e,n)=>n?n.toUpperCase():"")),IUt=/\B([A-Z])/g,YC=_z(t=>t.replace(IUt,"-$1").toLowerCase()),yz=_z(t=>t.charAt(0).toUpperCase()+t.slice(1)),j8=_z(t=>t?`on${yz(t)}`:""),Pv=(t,e)=>!Object.is(t,e),B8=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},LX=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},SUt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},kUt=t=>{const e=mi(t)?Number(t):NaN;return isNaN(e)?t:e};let gEe;const vz=()=>gEe||(gEe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wz(t){if(At(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=mi(s)?NUt(s):wz(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(mi(t)||Rr(t))return t}const RUt=/;(?![^(]*\))/g,AUt=/:([^]+)/,PUt=/\/\*[^]*?\*\//g;function NUt(t){const e={};return t.replace(PUt,"").split(RUt).forEach(n=>{if(n){const s=n.split(AUt);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function bz(t){let e="";if(mi(t))e=t;else if(At(t))for(let n=0;n<t.length;n++){const s=bz(t[n]);s&&(e+=s+" ")}else if(Rr(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const xUt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DUt=Pae(xUt);function wje(t){return!!t||t===""}const bje=t=>!!(t&&t.__v_isRef===!0),Eje=t=>mi(t)?t:t==null?"":At(t)||Rr(t)&&(t.toString===yje||!Gt(t.toString))?bje(t)?Eje(t.value):JSON.stringify(t,Tje,2):String(t),Tje=(t,e)=>bje(e)?Tje(t,e.value):sS(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[$8(s,i)+" =>"]=r,n),{})}:mje(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$8(n))}:Rb(e)?$8(e):Rr(e)&&!At(e)&&!vje(e)?String(e):e,$8=(t,e="")=>{var n;return Rb(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ba;class Cje{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ba,!e&&Ba&&(this.index=(Ba.scopes||(Ba.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ba;try{return Ba=this,e()}finally{Ba=n}}}on(){++this._on===1&&(this.prevScope=Ba,Ba=this)}off(){this._on>0&&--this._on===0&&(Ba=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function OUt(t){return new Cje(t)}function Ije(){return Ba}function LUt(t,e=!1){Ba&&Ba.cleanups.push(t)}let sr;const z8=new WeakSet;class Sje{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ba&&Ba.active&&Ba.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,z8.has(this)&&(z8.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rje(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,mEe(this),Aje(this);const e=sr,n=Fd;sr=this,Fd=!0;try{return this.fn()}finally{Pje(this),sr=e,Fd=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Mae(e);this.deps=this.depsTail=void 0,mEe(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?z8.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){MX(this)&&this.run()}get dirty(){return MX(this)}}let kje=0,oN,aN;function Rje(t,e=!1){if(t.flags|=8,e){t.next=aN,aN=t;return}t.next=oN,oN=t}function Oae(){kje++}function Lae(){if(--kje>0)return;if(aN){let e=aN;for(aN=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;oN;){let e=oN;for(oN=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Aje(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Pje(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Mae(s),MUt(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function MX(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nje(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nje(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===xD)||(t.globalVersion=xD,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!MX(t))))return;t.flags|=2;const e=t.dep,n=sr,s=Fd;sr=t,Fd=!0;try{Aje(t);const r=t.fn(t._value);(e.version===0||Pv(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{sr=n,Fd=s,Pje(t),t.flags&=-3}}function Mae(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Mae(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function MUt(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Fd=!0;const xje=[];function f_(){xje.push(Fd),Fd=!1}function p_(){const t=xje.pop();Fd=t===void 0?!0:t}function mEe(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=sr;sr=void 0;try{e()}finally{sr=n}}}let xD=0;class FUt{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fae{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!sr||!Fd||sr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==sr)n=this.activeLink=new FUt(sr,this),sr.deps?(n.prevDep=sr.depsTail,sr.depsTail.nextDep=n,sr.depsTail=n):sr.deps=sr.depsTail=n,Dje(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=sr.depsTail,n.nextDep=void 0,sr.depsTail.nextDep=n,sr.depsTail=n,sr.deps===n&&(sr.deps=s)}return n}trigger(e){this.version++,xD++,this.notify(e)}notify(e){Oae();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Lae()}}}function Dje(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Dje(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const A9=new WeakMap,_T=Symbol(""),FX=Symbol(""),DD=Symbol("");function rc(t,e,n){if(Fd&&sr){let s=A9.get(t);s||A9.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Fae),r.map=s,r.key=n),r.track()}}function om(t,e,n,s,r,i){const o=A9.get(t);if(!o){xD++;return}const a=l=>{l&&l.trigger()};if(Oae(),e==="clear")o.forEach(a);else{const l=At(t),u=l&&Dae(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===DD||!Rb(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(DD)),e){case"add":l?u&&a(o.get("length")):(a(o.get(_T)),sS(t)&&a(o.get(FX)));break;case"delete":l||(a(o.get(_T)),sS(t)&&a(o.get(FX)));break;case"set":sS(t)&&a(o.get(_T));break}}Lae()}function VUt(t,e){const n=A9.get(t);return n&&n.get(e)}function C0(t){const e=es(t);return e===t?e:(rc(e,"iterate",DD),Ih(t)?e:e.map(ma))}function Ez(t){return rc(t=es(t),"iterate",DD),t}const UUt={__proto__:null,[Symbol.iterator](){return H8(this,Symbol.iterator,ma)},concat(...t){return C0(this).concat(...t.map(e=>At(e)?C0(e):e))},entries(){return H8(this,"entries",t=>(t[1]=ma(t[1]),t))},every(t,e){return Vg(this,"every",t,e,void 0,arguments)},filter(t,e){return Vg(this,"filter",t,e,n=>n.map(ma),arguments)},find(t,e){return Vg(this,"find",t,e,ma,arguments)},findIndex(t,e){return Vg(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vg(this,"findLast",t,e,ma,arguments)},findLastIndex(t,e){return Vg(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vg(this,"forEach",t,e,void 0,arguments)},includes(...t){return W8(this,"includes",t)},indexOf(...t){return W8(this,"indexOf",t)},join(t){return C0(this).join(t)},lastIndexOf(...t){return W8(this,"lastIndexOf",t)},map(t,e){return Vg(this,"map",t,e,void 0,arguments)},pop(){return HR(this,"pop")},push(...t){return HR(this,"push",t)},reduce(t,...e){return _Ee(this,"reduce",t,e)},reduceRight(t,...e){return _Ee(this,"reduceRight",t,e)},shift(){return HR(this,"shift")},some(t,e){return Vg(this,"some",t,e,void 0,arguments)},splice(...t){return HR(this,"splice",t)},toReversed(){return C0(this).toReversed()},toSorted(t){return C0(this).toSorted(t)},toSpliced(...t){return C0(this).toSpliced(...t)},unshift(...t){return HR(this,"unshift",t)},values(){return H8(this,"values",ma)}};function H8(t,e,n){const s=Ez(t),r=s[e]();return s!==t&&!Ih(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const qUt=Array.prototype;function Vg(t,e,n,s,r,i){const o=Ez(t),a=o!==t&&!Ih(t),l=o[e];if(l!==qUt[e]){const d=l.apply(t,i);return a?ma(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,ma(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function _Ee(t,e,n,s){const r=Ez(t);let i=n;return r!==t&&(Ih(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,ma(a),l,t)}),r[e](i,...s)}function W8(t,e,n){const s=es(t);rc(s,"iterate",DD);const r=s[e](...n);return(r===-1||r===!1)&&jae(n[0])?(n[0]=es(n[0]),s[e](...n)):r}function HR(t,e,n=[]){f_(),Oae();const s=es(t)[e].apply(t,n);return Lae(),p_(),s}const jUt=Pae("__proto__,__v_isRef,__isVue"),Oje=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rb));function BUt(t){Rb(t)||(t=String(t));const e=es(this);return rc(e,"has",t),e.hasOwnProperty(t)}class Lje{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?JUt:Uje:i?Vje:Fje).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=At(e);if(!r){let l;if(o&&(l=UUt[n]))return l;if(n==="hasOwnProperty")return BUt}const a=Reflect.get(e,n,da(e)?e:s);return(Rb(n)?Oje.has(n):jUt(n))||(r||rc(e,"get",n),i)?a:da(a)?o&&Dae(n)?a:a.value:Rr(a)?r?qje(a):XC(a):a}}class Mje extends Lje{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Lw(i);if(!Ih(s)&&!Lw(s)&&(i=es(i),s=es(s)),!At(e)&&da(i)&&!da(s))return l?!1:(i.value=s,!0)}const o=At(e)&&Dae(n)?Number(n)<e.length:ys(e,n),a=Reflect.set(e,n,s,da(e)?e:r);return e===es(r)&&(o?Pv(s,i)&&om(e,"set",n,s):om(e,"add",n,s)),a}deleteProperty(e,n){const s=ys(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&om(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Rb(n)||!Oje.has(n))&&rc(e,"has",n),s}ownKeys(e){return rc(e,"iterate",At(e)?"length":_T),Reflect.ownKeys(e)}}class $Ut extends Lje{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zUt=new Mje,HUt=new $Ut,WUt=new Mje(!0),VX=t=>t,LF=t=>Reflect.getPrototypeOf(t);function GUt(t,e,n){return function(...s){const r=this.__v_raw,i=es(r),o=sS(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?VX:e?P9:ma;return!e&&rc(i,"iterate",l?FX:_T),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function MF(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function KUt(t,e){const n={get(s){const r=this.__v_raw,i=es(r),o=es(s);t||(Pv(s,o)&&rc(i,"get",s),rc(i,"get",o));const{has:a}=LF(i),l=e?VX:t?P9:ma;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&rc(es(s),"iterate",_T),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=es(r),o=es(s);return t||(Pv(s,o)&&rc(i,"has",s),rc(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=es(o),l=e?VX:t?P9:ma;return!t&&rc(a,"iterate",_T),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return zo(n,t?{add:MF("add"),set:MF("set"),delete:MF("delete"),clear:MF("clear")}:{add(s){!e&&!Ih(s)&&!Lw(s)&&(s=es(s));const r=es(this);return LF(r).has.call(r,s)||(r.add(s),om(r,"add",s,s)),this},set(s,r){!e&&!Ih(r)&&!Lw(r)&&(r=es(r));const i=es(this),{has:o,get:a}=LF(i);let l=o.call(i,s);l||(s=es(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?Pv(r,u)&&om(i,"set",s,r):om(i,"add",s,r),this},delete(s){const r=es(this),{has:i,get:o}=LF(r);let a=i.call(r,s);a||(s=es(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&om(r,"delete",s,void 0),l},clear(){const s=es(this),r=s.size!==0,i=s.clear();return r&&om(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=GUt(s,t,e)}),n}function Vae(t,e){const n=KUt(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(ys(n,r)&&r in s?n:s,r,i)}const QUt={get:Vae(!1,!1)},YUt={get:Vae(!1,!0)},XUt={get:Vae(!0,!1)},Fje=new WeakMap,Vje=new WeakMap,Uje=new WeakMap,JUt=new WeakMap;function ZUt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function e6t(t){return t.__v_skip||!Object.isExtensible(t)?0:ZUt(TUt(t))}function XC(t){return Lw(t)?t:qae(t,!1,zUt,QUt,Fje)}function Uae(t){return qae(t,!1,WUt,YUt,Vje)}function qje(t){return qae(t,!0,HUt,XUt,Uje)}function qae(t,e,n,s,r){if(!Rr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=e6t(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function yT(t){return Lw(t)?yT(t.__v_raw):!!(t&&t.__v_isReactive)}function Lw(t){return!!(t&&t.__v_isReadonly)}function Ih(t){return!!(t&&t.__v_isShallow)}function jae(t){return t?!!t.__v_raw:!1}function es(t){const e=t&&t.__v_raw;return e?es(e):t}function W1(t){return!ys(t,"__v_skip")&&Object.isExtensible(t)&&LX(t,"__v_skip",!0),t}const ma=t=>Rr(t)?XC(t):t,P9=t=>Rr(t)?qje(t):t;function da(t){return t?t.__v_isRef===!0:!1}function g_(t){return jje(t,!1)}function t6t(t){return jje(t,!0)}function jje(t,e){return da(t)?t:new n6t(t,e)}class n6t{constructor(e,n){this.dep=new Fae,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:es(e),this._value=n?e:ma(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ih(e)||Lw(e);e=s?e:es(e),Pv(e,n)&&(this._rawValue=e,this._value=s?e:ma(e),this.dep.trigger())}}function Nv(t){return da(t)?t.value:t}const s6t={get:(t,e,n)=>e==="__v_raw"?t:Nv(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return da(r)&&!da(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Bje(t){return yT(t)?t:new Proxy(t,s6t)}function r6t(t){const e=At(t)?new Array(t.length):{};for(const n in t)e[n]=o6t(t,n);return e}class i6t{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return VUt(es(this._object),this._key)}}function o6t(t,e,n){const s=t[e];return da(s)?s:new i6t(t,e,n)}class a6t{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Fae(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xD-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&sr!==this)return Rje(this,!0),!0}get value(){const e=this.dep.track();return Nje(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function c6t(t,e,n=!1){let s,r;return Gt(t)?s=t:(s=t.get,r=t.set),new a6t(s,r,n)}const FF={},N9=new WeakMap;let fE;function l6t(t,e=!1,n=fE){if(n){let s=N9.get(n);s||N9.set(n,s=[]),s.push(t)}}function u6t(t,e,n=Ws){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:Ih(q)||r===!1||r===0?am(q,1):am(q);let h,d,p,m,w=!1,R=!1;if(da(t)?(d=()=>t.value,w=Ih(t)):yT(t)?(d=()=>u(t),w=!0):At(t)?(R=!0,w=t.some(q=>yT(q)||Ih(q)),d=()=>t.map(q=>{if(da(q))return q.value;if(yT(q))return u(q);if(Gt(q))return l?l(q,2):q()})):Gt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){f_();try{p()}finally{p_()}}const q=fE;fE=h;try{return l?l(t,3,[m]):t(m)}finally{fE=q}}:d=pp,e&&r){const q=d,W=r===!0?1/0:r;d=()=>am(q(),W)}const P=Ije(),O=()=>{h.stop(),P&&P.active&&xae(P.effects,h)};if(i&&e){const q=e;e=(...W)=>{q(...W),O()}}let M=R?new Array(t.length).fill(FF):FF;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const W=h.run();if(r||w||(R?W.some((J,I)=>Pv(J,M[I])):Pv(W,M))){p&&p();const J=fE;fE=h;try{const I=[W,M===FF?void 0:R&&M[0]===FF?[]:M,m];M=W,l?l(e,3,I):e(...I)}finally{fE=J}}}else h.run()};return a&&a(V),h=new Sje(d),h.scheduler=o?()=>o(V,!1):V,m=q=>l6t(q,!1,h),p=h.onStop=()=>{const q=N9.get(h);if(q){if(l)l(q,4);else for(const W of q)W();N9.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function am(t,e=1/0,n){if(e<=0||!Rr(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,da(t))am(t.value,e,n);else if(At(t))for(let s=0;s<t.length;s++)am(t[s],e,n);else if(mje(t)||sS(t))t.forEach(s=>{am(s,e,n)});else if(vje(t)){for(const s in t)am(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&am(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ZM(t,e,n,s){try{return s?t(...s):t()}catch(r){Tz(r,e,n)}}function rf(t,e,n,s){if(Gt(t)){const r=ZM(t,e,n,s);return r&&_je(r)&&r.catch(i=>{Tz(i,e,n)}),r}if(At(t)){const r=[];for(let i=0;i<t.length;i++)r.push(rf(t[i],e,n,s));return r}}function Tz(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ws;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){f_(),ZM(i,null,10,[t,l,u]),p_();return}}h6t(t,n,r,s,o)}function h6t(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const $c=[];let Af=-1;const rS=[];let xy=null,sI=0;const $je=Promise.resolve();let x9=null;function Bae(t){const e=x9||$je;return t?e.then(this?t.bind(this):t):e}function d6t(t){let e=Af+1,n=$c.length;for(;e<n;){const s=e+n>>>1,r=$c[s],i=OD(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function $ae(t){if(!(t.flags&1)){const e=OD(t),n=$c[$c.length-1];!n||!(t.flags&2)&&e>=OD(n)?$c.push(t):$c.splice(d6t(e),0,t),t.flags|=1,zje()}}function zje(){x9||(x9=$je.then(Wje))}function f6t(t){At(t)?rS.push(...t):xy&&t.id===-1?xy.splice(sI+1,0,t):t.flags&1||(rS.push(t),t.flags|=1),zje()}function yEe(t,e,n=Af+1){for(;n<$c.length;n++){const s=$c[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;$c.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Hje(t){if(rS.length){const e=[...new Set(rS)].sort((n,s)=>OD(n)-OD(s));if(rS.length=0,xy){xy.push(...e);return}for(xy=e,sI=0;sI<xy.length;sI++){const n=xy[sI];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xy=null,sI=0}}const OD=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Wje(t){try{for(Af=0;Af<$c.length;Af++){const e=$c[Af];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ZM(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Af<$c.length;Af++){const e=$c[Af];e&&(e.flags&=-2)}Af=-1,$c.length=0,Hje(),x9=null,($c.length||rS.length)&&Wje()}}let $u=null,Gje=null;function D9(t){const e=$u;return $u=t,Gje=t&&t.type.__scopeId||null,e}function Kje(t,e=$u,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&xEe(-1);const i=D9(e);let o;try{o=t(...r)}finally{D9(i),s._d&&xEe(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function zae(t,e){if($u===null)return t;const n=Nz($u),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Ws]=e[r];i&&(Gt(i)&&(i={mounted:i,updated:i}),i.deep&&am(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Qb(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(f_(),rf(l,n,8,[t.el,a,t,e]),p_())}}const Qje=Symbol("_vte"),Yje=t=>t.__isTeleport,cN=t=>t&&(t.disabled||t.disabled===""),vEe=t=>t&&(t.defer||t.defer===""),wEe=t=>typeof SVGElement<"u"&&t instanceof SVGElement,bEe=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,UX=(t,e)=>{const n=t&&t.to;return mi(n)?e?e(n):null:n},Xje={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:R,createComment:P}}=u,O=cN(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const W=e.el=R(""),J=e.anchor=R("");m(W,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,l))},v=()=>{const y=e.target=UX(e.props,w),T=Jje(y,e,R,m);y&&(o!=="svg"&&wEe(y)?o="svg":o!=="mathml"&&bEe(y)&&(o="mathml"),O||(I(y,T),pV(e,!1)))};O&&(I(n,J),pV(e,!0)),vEe(e.props)?(e.el.__isMounted=!1,Mc(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(vEe(e.props)&&t.el.__isMounted===!1){Mc(()=>{Xje.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=cN(t.props),y=v?n:J,T=v?W:I;if(o==="svg"||wEe(J)?o="svg":(o==="mathml"||bEe(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),Qae(t,e,!0)):l||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):VF(e,n,W,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=UX(e.props,w);S&&VF(e,S,null,u,0)}else v&&VF(e,J,I,u,1);pV(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!cN(p);for(let w=0;w<a.length;w++){const R=a[w];s(R,e,n,m,!!R.dynamicChildren)}}},move:VF,hydrate:p6t};function VF(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||cN(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function p6t(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=UX(e.props,l);if(p){const m=cN(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let R=w;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")e.targetStart=R;else if(R.data==="teleport anchor"){e.targetAnchor=R,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}R=o(R)}e.targetAnchor||Jje(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}pV(e,m)}return e.anchor&&o(e.anchor)}const g6t=Xje;function pV(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Jje(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[Qje]=i,t&&(s(r,t),s(i,t)),i}const Dy=Symbol("_leaveCb"),UF=Symbol("_enterCb");function Zje(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Sz(()=>{t.isMounted=!0}),kz(()=>{t.isUnmounting=!0}),t}const sh=[Function,Array],e3e={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sh,onEnter:sh,onAfterEnter:sh,onEnterCancelled:sh,onBeforeLeave:sh,onLeave:sh,onAfterLeave:sh,onLeaveCancelled:sh,onBeforeAppear:sh,onAppear:sh,onAfterAppear:sh,onAppearCancelled:sh},t3e=t=>{const e=t.subTree;return e.component?t3e(e.component):e},m6t={name:"BaseTransition",props:e3e,setup(t,{slots:e}){const n=Ab(),s=Zje();return()=>{const r=e.default&&Hae(e.default(),!0);if(!r||!r.length)return;const i=n3e(r),o=es(t),{mode:a}=o;if(s.isLeaving)return G8(i);const l=EEe(i);if(!l)return G8(i);let u=LD(l,o,s,n,d=>u=d);l.type!==Kc&&cC(l,u);let h=n.subTree&&EEe(n.subTree);if(h&&h.type!==Kc&&!CE(l,h)&&t3e(n).type!==Kc){let d=LD(h,o,s,n);if(cC(h,d),a==="out-in"&&l.type!==Kc)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},G8(i);a==="in-out"&&l.type!==Kc?d.delayLeave=(p,m,w)=>{const R=s3e(s,h);R[String(h.key)]=h,p[Dy]=()=>{m(),p[Dy]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function n3e(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Kc){e=n;break}}return e}const _6t=m6t;function s3e(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function LD(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),W=s3e(n,t),J=(y,T)=>{y&&rf(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),At(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[Dy]&&y[Dy](!0);const S=W[q];S&&CE(t,S)&&S.el[Dy]&&S.el[Dy](),J(T,[y])},enter(y){let T=u,S=h,E=d;if(!n.isMounted)if(i)T=O||u,S=M||h,E=V||d;else return;let b=!1;const G=y[UF]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[UF]=void 0)};T?I(T,[y,G]):G()},leave(y,T){const S=String(t.key);if(y[UF]&&y[UF](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Dy]=G=>{E||(E=!0,T(),G?J(R,[y]):J(w,[y]),y[Dy]=void 0,W[S]===t&&delete W[S])};W[S]=t,m?I(m,[y,b]):b()},clone(y){const T=LD(y,e,n,s,r);return r&&r(T),T}};return v}function G8(t){if(Cz(t))return t=Mw(t),t.children=null,t}function EEe(t){if(!Cz(t))return Yje(t.type)&&t.children?n3e(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Gt(n.default))return n.default()}}function cC(t,e){t.shapeFlag&6&&t.component?(t.transition=e,cC(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hae(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ch?(o.patchFlag&128&&r++,s=s.concat(Hae(o.children,e,a))):(e||o.type!==Kc)&&s.push(a!=null?Mw(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function e2(t,e){return Gt(t)?zo({name:t.name},e,{setup:t}):t}function r3e(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function lN(t,e,n,s,r=!1){if(At(t)){t.forEach((w,R)=>lN(w,e&&(At(e)?e[R]:e),n,s,r));return}if(uN(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&lN(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Nz(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Ws?a.refs={}:a.refs,d=a.setupState,p=es(d),m=d===Ws?()=>!1:w=>ys(p,w);if(u!=null&&u!==l&&(mi(u)?(h[u]=null,m(u)&&(d[u]=null)):da(u)&&(u.value=null)),Gt(l))ZM(l,a,12,[o,h]);else{const w=mi(l),R=da(l);if(w||R){const P=()=>{if(t.f){const O=w?m(l)?d[l]:h[l]:l.value;r?At(O)&&xae(O,i):At(O)?O.includes(i)||O.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):R&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Mc(P,n)):P()}}}vz().requestIdleCallback;vz().cancelIdleCallback;const uN=t=>!!t.type.__asyncLoader,Cz=t=>t.type.__isKeepAlive;function i3e(t,e){a3e(t,"a",e)}function o3e(t,e){a3e(t,"da",e)}function a3e(t,e,n=fc){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Iz(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Cz(r.parent.vnode)&&y6t(s,e,n,r),r=r.parent}}function y6t(t,e,n,s){const r=Iz(e,t,s,!0);Rz(()=>{xae(s[e],r)},n)}function Iz(t,e,n=fc,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{f_();const a=t2(n),l=rf(e,n,t,o);return a(),p_(),l});return s?r.unshift(i):r.push(i),i}}const $_=t=>(e,n=fc)=>{(!FD||t==="sp")&&Iz(t,(...s)=>e(...s),n)},c3e=$_("bm"),Sz=$_("m"),l3e=$_("bu"),Wae=$_("u"),kz=$_("bum"),Rz=$_("um"),v6t=$_("sp"),w6t=$_("rtg"),b6t=$_("rtc");function E6t(t,e=fc){Iz("ec",t,e)}const T6t="components";function u3e(t,e){return I6t(T6t,t,!0,e)||t}const C6t=Symbol.for("v-ndc");function I6t(t,e,n=!0,s=!1){const r=$u||fc;if(r){const i=r.type;{const a=p9t(i,!1);if(a&&(a===e||a===Lh(e)||a===yz(Lh(e))))return i}const o=TEe(r[t]||i[t],e)||TEe(r.appContext[t],e);return!o&&s?i:o}}function TEe(t,e){return t&&(t[e]||t[Lh(e)]||t[yz(Lh(e))])}function S6t(t,e,n,s){let r;const i=n,o=At(t);if(o||mi(t)){const a=o&&yT(t);let l=!1,u=!1;a&&(l=!Ih(t),u=Lw(t),t=Ez(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?P9(ma(t[h])):ma(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Rr(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const qX=t=>t?x3e(t)?Nz(t):qX(t.parent):null,hN=zo(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qX(t.parent),$root:t=>qX(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>d3e(t),$forceUpdate:t=>t.f||(t.f=()=>{$ae(t.update)}),$nextTick:t=>t.n||(t.n=Bae.bind(t.proxy)),$watch:t=>K6t.bind(t)}),K8=(t,e)=>t!==Ws&&!t.__isScriptSetup&&ys(t,e),k6t={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(K8(s,e))return o[e]=1,s[e];if(r!==Ws&&ys(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&ys(u,e))return o[e]=3,i[e];if(n!==Ws&&ys(n,e))return o[e]=4,n[e];jX&&(o[e]=0)}}const h=hN[e];let d,p;if(h)return e==="$attrs"&&rc(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ws&&ys(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ys(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return K8(r,e)?(r[e]=n,!0):s!==Ws&&ys(s,e)?(s[e]=n,!0):ys(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Ws&&ys(t,o)||K8(e,o)||(a=i[0])&&ys(a,o)||ys(s,o)||ys(hN,o)||ys(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ys(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function CEe(t){return At(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let jX=!0;function R6t(t){const e=d3e(t),n=t.proxy,s=t.ctx;jX=!1,e.beforeCreate&&IEe(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:R,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:W,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:G}=e;if(u&&A6t(u,s,null),o)for(const ae in o){const oe=o[ae];Gt(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);Rr(ae)&&(t.data=XC(ae))}if(jX=!0,i)for(const ae in i){const oe=i[ae],de=Gt(oe)?oe.bind(n,n):Gt(oe.get)?oe.get.bind(n,n):pp,ct=!Gt(oe)&&Gt(oe.set)?oe.set.bind(n):pp,Ke=at({get:de,set:ct});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Qe=>Ke.value=Qe})}if(a)for(const ae in a)h3e(a[ae],s,n,ae);if(l){const ae=Gt(l)?l.call(n):l;Reflect.ownKeys(ae).forEach(oe=>{dN(oe,ae[oe])})}h&&IEe(h,t,"c");function ne(ae,oe){At(oe)?oe.forEach(de=>ae(de.bind(n))):oe&&ae(oe.bind(n))}if(ne(c3e,d),ne(Sz,p),ne(l3e,m),ne(Wae,w),ne(i3e,R),ne(o3e,P),ne(E6t,v),ne(b6t,J),ne(w6t,I),ne(kz,M),ne(Rz,q),ne(v6t,y),At(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:de=>n[oe]=de,enumerable:!0})})}else t.exposed||(t.exposed={});W&&t.render===pp&&(t.render=W),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&r3e(t)}function A6t(t,e,n=pp){At(t)&&(t=BX(t));for(const s in t){const r=t[s];let i;Rr(r)?"default"in r?i=Yu(r.from||s,r.default,!0):i=Yu(r.from||s):i=Yu(r),da(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function IEe(t,e,n){rf(At(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function h3e(t,e,n,s){let r=s.includes(".")?C3e(n,s):()=>n[s];if(mi(t)){const i=e[t];Gt(i)&&iS(r,i)}else if(Gt(t))iS(r,t.bind(n));else if(Rr(t))if(At(t))t.forEach(i=>h3e(i,e,n,s));else{const i=Gt(t.handler)?t.handler.bind(n):e[t.handler];Gt(i)&&iS(r,i,t)}}function d3e(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>O9(l,u,o,!0)),O9(l,e,o)),Rr(e)&&i.set(e,l),l}function O9(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&O9(t,i,n,!0),r&&r.forEach(o=>O9(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=P6t[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const P6t={data:SEe,props:kEe,emits:kEe,methods:xA,computed:xA,beforeCreate:Nc,created:Nc,beforeMount:Nc,mounted:Nc,beforeUpdate:Nc,updated:Nc,beforeDestroy:Nc,beforeUnmount:Nc,destroyed:Nc,unmounted:Nc,activated:Nc,deactivated:Nc,errorCaptured:Nc,serverPrefetch:Nc,components:xA,directives:xA,watch:x6t,provide:SEe,inject:N6t};function SEe(t,e){return e?t?function(){return zo(Gt(t)?t.call(this,this):t,Gt(e)?e.call(this,this):e)}:e:t}function N6t(t,e){return xA(BX(t),BX(e))}function BX(t){if(At(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Nc(t,e){return t?[...new Set([].concat(t,e))]:e}function xA(t,e){return t?zo(Object.create(null),t,e):e}function kEe(t,e){return t?At(t)&&At(e)?[...new Set([...t,...e])]:zo(Object.create(null),CEe(t),CEe(e??{})):e}function x6t(t,e){if(!t)return e;if(!e)return t;const n=zo(Object.create(null),t);for(const s in e)n[s]=Nc(t[s],e[s]);return n}function f3e(){return{app:null,config:{isNativeTag:bUt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let D6t=0;function O6t(t,e){return function(n,s=null){Gt(n)||(n=zo({},n)),s!=null&&!Rr(s)&&(s=null);const r=f3e(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:D6t++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:m9t,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&Gt(u.install)?(i.add(u),u.install(l,...h)):Gt(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||gc(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,Nz(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(rf(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=vT;vT=l;try{return u()}finally{vT=h}}};return l}}let vT=null;function dN(t,e){if(fc){let n=fc.provides;const s=fc.parent&&fc.parent.provides;s===n&&(n=fc.provides=Object.create(s)),n[t]=e}}function Yu(t,e,n=!1){const s=Ab();if(s||vT){let r=vT?vT._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Gt(e)?e.call(s&&s.proxy):e}}function L6t(){return!!(Ab()||vT)}const p3e={},g3e=()=>Object.create(p3e),m3e=t=>Object.getPrototypeOf(t)===p3e;function M6t(t,e,n,s=!1){const r={},i=g3e();t.propsDefaults=Object.create(null),_3e(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Uae(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function F6t(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=es(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(Az(t.emitsOptions,p))continue;const m=e[p];if(l)if(ys(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Lh(p);r[w]=$X(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{_3e(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!ys(e,d)&&((h=YC(d))===d||!ys(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=$X(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!ys(e,d))&&(delete i[d],u=!0)}u&&om(t.attrs,"set","")}function _3e(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(iN(l))continue;const u=e[l];let h;r&&ys(r,h=Lh(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Az(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=es(n),u=a||Ws;for(let h=0;h<i.length;h++){const d=i[h];n[d]=$X(r,l,d,u[d],t,!ys(u,d))}}return o}function $X(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=ys(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Gt(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=t2(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===YC(n))&&(s=!0))}return s}const V6t=new WeakMap;function y3e(t,e,n=!1){const s=n?V6t:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Gt(t)){const h=d=>{l=!0;const[p,m]=y3e(d,e,!0);zo(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Rr(t)&&s.set(t,nS),nS;if(At(i))for(let h=0;h<i.length;h++){const d=Lh(i[h]);REe(d)&&(o[d]=Ws)}else if(i)for(const h in i){const d=Lh(h);if(REe(d)){const p=i[h],m=o[d]=At(p)||Gt(p)?{type:p}:zo({},p),w=m.type;let R=!1,P=!0;if(At(w))for(let O=0;O<w.length;++O){const M=w[O],V=Gt(M)&&M.name;if(V==="Boolean"){R=!0;break}else V==="String"&&(P=!1)}else R=Gt(w)&&w.name==="Boolean";m[0]=R,m[1]=P,(R||ys(m,"default"))&&a.push(d)}}const u=[o,a];return Rr(t)&&s.set(t,u),u}function REe(t){return t[0]!=="$"&&!iN(t)}const Gae=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",Kae=t=>At(t)?t.map(qf):[qf(t)],U6t=(t,e,n)=>{if(e._n)return e;const s=Kje((...r)=>Kae(e(...r)),n);return s._c=!1,s},v3e=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Gae(r))continue;const i=t[r];if(Gt(i))e[r]=U6t(r,i,s);else if(i!=null){const o=Kae(i);e[r]=()=>o}}},w3e=(t,e)=>{const n=Kae(e);t.slots.default=()=>n},b3e=(t,e,n)=>{for(const s in e)(n||!Gae(s))&&(t[s]=e[s])},q6t=(t,e,n)=>{const s=t.slots=g3e();if(t.vnode.shapeFlag&32){const r=e.__;r&&LX(s,"__",r,!0);const i=e._;i?(b3e(s,e,n),n&&LX(s,"_",i,!0)):v3e(e,s)}else e&&w3e(t,e)},j6t=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Ws;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:b3e(r,e,n):(i=!e.$stable,v3e(e,r)),o=e}else e&&(w3e(t,e),o={default:1});if(i)for(const a in r)!Gae(a)&&o[a]==null&&delete r[a]},Mc=t9t;function B6t(t){return $6t(t)}function $6t(t,e){const n=vz();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=pp,insertStaticContent:w}=t,R=(k,C,A,x=null,L=null,U=null,j=void 0,H=null,$=!!C.dynamicChildren)=>{if(k===C)return;k&&!CE(k,C)&&(x=F(k),ge(k,L,U,!0),k=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Y,shapeFlag:X}=C;switch(B){case Pz:P(k,C,A,x);break;case Kc:O(k,C,A,x);break;case Y8:k==null&&M(C,A,x,j);break;case ch:E(k,C,A,x,L,U,j,H,$);break;default:X&1?W(k,C,A,x,L,U,j,H,$):X&6?b(k,C,A,x,L,U,j,H,$):(X&64||X&128)&&B.process(k,C,A,x,L,U,j,H,$,ee)}Y!=null&&L?lN(Y,k&&k.ref,U,C||k,!C):Y==null&&k&&k.ref!=null&&lN(k.ref,null,U,k,!0)},P=(k,C,A,x)=>{if(k==null)s(C.el=a(C.children),A,x);else{const L=C.el=k.el;C.children!==k.children&&u(L,C.children)}},O=(k,C,A,x)=>{k==null?s(C.el=l(C.children||""),A,x):C.el=k.el},M=(k,C,A,x)=>{[k.el,k.anchor]=w(k.children,C,A,x,k.el,k.anchor)},V=({el:k,anchor:C},A,x)=>{let L;for(;k&&k!==C;)L=p(k),s(k,A,x),k=L;s(C,A,x)},q=({el:k,anchor:C})=>{let A;for(;k&&k!==C;)A=p(k),r(k),k=A;r(C)},W=(k,C,A,x,L,U,j,H,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),k==null?J(C,A,x,L,U,j,H,$):y(k,C,L,U,j,H,$)},J=(k,C,A,x,L,U,j,H)=>{let $,B;const{props:Y,shapeFlag:X,transition:Z,dirs:te}=k;if($=k.el=o(k.type,U,Y&&Y.is,Y),X&8?h($,k.children):X&16&&v(k.children,$,null,x,L,Q8(k,U),j,H),te&&Qb(k,null,x,"created"),I($,k,k.scopeId,j,x),Y){for(const re in Y)re!=="value"&&!iN(re)&&i($,re,null,Y[re],U,x);"value"in Y&&i($,"value",null,Y.value,U),(B=Y.onVnodeBeforeMount)&&mf(B,x,k)}te&&Qb(k,null,x,"beforeMount");const ie=z6t(L,Z);ie&&Z.beforeEnter($),s($,C,A),((B=Y&&Y.onVnodeMounted)||ie||te)&&Mc(()=>{B&&mf(B,x,k),ie&&Z.enter($),te&&Qb(k,null,x,"mounted")},L)},I=(k,C,A,x,L)=>{if(A&&m(k,A),x)for(let U=0;U<x.length;U++)m(k,x[U]);if(L){let U=L.subTree;if(C===U||S3e(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(k,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(k,C,A,x,L,U,j,H,$=0)=>{for(let B=$;B<k.length;B++){const Y=k[B]=H?Oy(k[B]):qf(k[B]);R(null,Y,C,A,x,L,U,j,H)}},y=(k,C,A,x,L,U,j)=>{const H=C.el=k.el;let{patchFlag:$,dynamicChildren:B,dirs:Y}=C;$|=k.patchFlag&16;const X=k.props||Ws,Z=C.props||Ws;let te;if(A&&Yb(A,!1),(te=Z.onVnodeBeforeUpdate)&&mf(te,A,C,k),Y&&Qb(C,k,A,"beforeUpdate"),A&&Yb(A,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(H,""),B?T(k.dynamicChildren,B,H,A,x,Q8(C,L),U):j||de(k,C,H,null,A,x,Q8(C,L),U,!1),$>0){if($&16)S(H,X,Z,A,L);else if($&2&&X.class!==Z.class&&i(H,"class",null,Z.class,L),$&4&&i(H,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],fe=X[se],Se=Z[se];(Se!==fe||se==="value")&&i(H,se,fe,Se,L,A)}}$&1&&k.children!==C.children&&h(H,C.children)}else!j&&B==null&&S(H,X,Z,A,L);((te=Z.onVnodeUpdated)||Y)&&Mc(()=>{te&&mf(te,A,C,k),Y&&Qb(C,k,A,"updated")},x)},T=(k,C,A,x,L,U,j)=>{for(let H=0;H<C.length;H++){const $=k[H],B=C[H],Y=$.el&&($.type===ch||!CE($,B)||$.shapeFlag&198)?d($.el):A;R($,B,Y,null,x,L,U,j,!0)}},S=(k,C,A,x,L)=>{if(C!==A){if(C!==Ws)for(const U in C)!iN(U)&&!(U in A)&&i(k,U,C[U],null,L,x);for(const U in A){if(iN(U))continue;const j=A[U],H=C[U];j!==H&&U!=="value"&&i(k,U,H,j,L,x)}"value"in A&&i(k,"value",C.value,A.value,L)}},E=(k,C,A,x,L,U,j,H,$)=>{const B=C.el=k?k.el:a(""),Y=C.anchor=k?k.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(H=H?H.concat(te):te),k==null?(s(B,A,x),s(Y,A,x),v(C.children||[],A,Y,L,U,j,H,$)):X>0&&X&64&&Z&&k.dynamicChildren?(T(k.dynamicChildren,Z,A,L,U,j,H),(C.key!=null||L&&C===L.subTree)&&Qae(k,C,!0)):de(k,C,A,Y,L,U,j,H,$)},b=(k,C,A,x,L,U,j,H,$)=>{C.slotScopeIds=H,k==null?C.shapeFlag&512?L.ctx.activate(C,A,x,j,$):G(C,A,x,L,U,j,$):ne(k,C,$)},G=(k,C,A,x,L,U,j)=>{const H=k.component=l9t(k,x,L);if(Cz(k)&&(H.ctx.renderer=ee),u9t(H,!1,j),H.asyncDep){if(L&&L.registerDep(H,ae,j),!k.el){const $=H.subTree=gc(Kc);O(null,$,C,A),k.placeholder=$.el}}else ae(H,k,C,A,L,U,j)},ne=(k,C,A)=>{const x=C.component=k.component;if(Z6t(k,C,A))if(x.asyncDep&&!x.asyncResolved){oe(x,C,A);return}else x.next=C,x.update();else C.el=k.el,x.vnode=C},ae=(k,C,A,x,L,U,j)=>{const H=()=>{if(k.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=k;{const We=E3e(k);if(We){X&&(X.el=re.el,oe(k,X,j)),We.asyncDep.then(()=>{k.isUnmounted||H()});return}}let se=X,fe;Yb(k,!1),X?(X.el=re.el,oe(k,X,j)):X=re,Z&&B8(Z),(fe=X.props&&X.props.onVnodeBeforeUpdate)&&mf(fe,ie,X,re),Yb(k,!0);const Se=PEe(k),Ve=k.subTree;k.subTree=Se,R(Ve,Se,d(Ve.el),F(Ve),k,L,U),X.el=Se.el,se===null&&e9t(k,Se.el),te&&Mc(te,L),(fe=X.props&&X.props.onVnodeUpdated)&&Mc(()=>mf(fe,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:fe,type:Se}=k,Ve=uN(C);Yb(k,!1),ie&&B8(ie),!Ve&&(X=te&&te.onVnodeBeforeMount)&&mf(X,se,C),Yb(k,!0);{fe.ce&&fe.ce._def.shadowRoot!==!1&&fe.ce._injectChildStyle(Se);const We=k.subTree=PEe(k);R(null,We,A,x,k,L,U),C.el=We.el}if(re&&Mc(re,L),!Ve&&(X=te&&te.onVnodeMounted)){const We=C;Mc(()=>mf(X,se,We),L)}(C.shapeFlag&256||se&&uN(se.vnode)&&se.vnode.shapeFlag&256)&&k.a&&Mc(k.a,L),k.isMounted=!0,C=A=x=null}};k.scope.on();const $=k.effect=new Sje(H);k.scope.off();const B=k.update=$.run.bind($),Y=k.job=$.runIfDirty.bind($);Y.i=k,Y.id=k.uid,$.scheduler=()=>$ae(Y),Yb(k,!0),B()},oe=(k,C,A)=>{C.component=k;const x=k.vnode.props;k.vnode=C,k.next=null,F6t(k,C.props,x,A),j6t(k,C.children,A),f_(),yEe(k),p_()},de=(k,C,A,x,L,U,j,H,$=!1)=>{const B=k&&k.children,Y=k?k.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){Ke(B,X,A,x,L,U,j,H,$);return}else if(Z&256){ct(B,X,A,x,L,U,j,H,$);return}}te&8?(Y&16&&Fe(B,L,U),X!==B&&h(A,X)):Y&16?te&16?Ke(B,X,A,x,L,U,j,H,$):Fe(B,L,U,!0):(Y&8&&h(A,""),te&16&&v(X,A,x,L,U,j,H,$))},ct=(k,C,A,x,L,U,j,H,$)=>{k=k||nS,C=C||nS;const B=k.length,Y=C.length,X=Math.min(B,Y);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?Oy(C[Z]):qf(C[Z]);R(k[Z],te,A,null,L,U,j,H,$)}B>Y?Fe(k,L,U,!0,!1,X):v(C,A,x,L,U,j,H,$,X)},Ke=(k,C,A,x,L,U,j,H,$)=>{let B=0;const Y=C.length;let X=k.length-1,Z=Y-1;for(;B<=X&&B<=Z;){const te=k[B],ie=C[B]=$?Oy(C[B]):qf(C[B]);if(CE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;B++}for(;B<=X&&B<=Z;){const te=k[X],ie=C[Z]=$?Oy(C[Z]):qf(C[Z]);if(CE(te,ie))R(te,ie,A,null,L,U,j,H,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Y?C[te].el:x;for(;B<=Z;)R(null,C[B]=$?Oy(C[B]):qf(C[B]),A,ie,L,U,j,H,$),B++}}else if(B>Z)for(;B<=X;)ge(k[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const Ue=C[B]=$?Oy(C[B]):qf(C[B]);Ue.key!=null&&re.set(Ue.key,B)}let se,fe=0;const Se=Z-ie+1;let Ve=!1,We=0;const Ge=new Array(Se);for(B=0;B<Se;B++)Ge[B]=0;for(B=te;B<=X;B++){const Ue=k[B];if(fe>=Se){ge(Ue,L,U,!0);continue}let Le;if(Ue.key!=null)Le=re.get(Ue.key);else for(se=ie;se<=Z;se++)if(Ge[se-ie]===0&&CE(Ue,C[se])){Le=se;break}Le===void 0?ge(Ue,L,U,!0):(Ge[Le-ie]=B+1,Le>=We?We=Le:Ve=!0,R(Ue,C[Le],A,null,L,U,j,H,$),fe++)}const ss=Ve?H6t(Ge):nS;for(se=ss.length-1,B=Se-1;B>=0;B--){const Ue=ie+B,Le=C[Ue],rs=C[Ue+1],Pr=Ue+1<Y?rs.el||rs.placeholder:x;Ge[B]===0?R(null,Le,A,Pr,L,U,j,H,$):Ve&&(se<0||B!==ss[se]?Qe(Le,A,Pr,2):se--)}}},Qe=(k,C,A,x,L=null)=>{const{el:U,type:j,transition:H,children:$,shapeFlag:B}=k;if(B&6){Qe(k.component.subTree,C,A,x);return}if(B&128){k.suspense.move(C,A,x);return}if(B&64){j.move(k,C,A,ee);return}if(j===ch){s(U,C,A);for(let Y=0;Y<$.length;Y++)Qe($[Y],C,A,x);s(k.anchor,C,A);return}if(j===Y8){V(k,C,A);return}if(x!==2&&B&1&&H)if(x===0)H.beforeEnter(U),s(U,C,A),Mc(()=>H.enter(U),L);else{const{leave:Y,delayLeave:X,afterLeave:Z}=H,te=()=>{k.ctx.isUnmounted?r(U):s(U,C,A)},ie=()=>{Y(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,A)},ge=(k,C,A,x=!1,L=!1)=>{const{type:U,props:j,ref:H,children:$,dynamicChildren:B,shapeFlag:Y,patchFlag:X,dirs:Z,cacheIndex:te}=k;if(X===-2&&(L=!1),H!=null&&(f_(),lN(H,null,A,k,!0),p_()),te!=null&&(C.renderCache[te]=void 0),Y&256){C.ctx.deactivate(k);return}const ie=Y&1&&Z,re=!uN(k);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&mf(se,C,k),Y&6)it(k.component,A,x);else{if(Y&128){k.suspense.unmount(A,x);return}ie&&Qb(k,null,C,"beforeUnmount"),Y&64?k.type.remove(k,C,A,ee,x):B&&!B.hasOnce&&(U!==ch||X>0&&X&64)?Fe(B,C,A,!1,!0):(U===ch&&X&384||!L&&Y&16)&&Fe($,C,A),x&&he(k)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&Mc(()=>{se&&mf(se,C,k),ie&&Qb(k,null,C,"unmounted")},A)},he=k=>{const{type:C,el:A,anchor:x,transition:L}=k;if(C===ch){qt(A,x);return}if(C===Y8){q(k);return}const U=()=>{r(A),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(k.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:H}=L,$=()=>j(A,U);H?H(k.el,U,$):$()}else U()},qt=(k,C)=>{let A;for(;k!==C;)A=p(k),r(k),k=A;r(C)},it=(k,C,A)=>{const{bum:x,scope:L,job:U,subTree:j,um:H,m:$,a:B,parent:Y,slots:{__:X}}=k;AEe($),AEe(B),x&&B8(x),Y&&At(X)&&X.forEach(Z=>{Y.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ge(j,k,C,A)),H&&Mc(H,C),Mc(()=>{k.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Fe=(k,C,A,x=!1,L=!1,U=0)=>{for(let j=U;j<k.length;j++)ge(k[j],C,A,x,L)},F=k=>{if(k.shapeFlag&6)return F(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const C=p(k.anchor||k.el),A=C&&C[Qje];return A?p(A):C};let Q=!1;const K=(k,C,A)=>{k==null?C._vnode&&ge(C._vnode,null,null,!0):R(C._vnode||null,k,C,null,null,null,A),C._vnode=k,Q||(Q=!0,yEe(),Hje(),Q=!1)},ee={p:R,um:ge,m:Qe,r:he,mt:G,mc:v,pc:de,pbc:T,n:F,o:t};return{render:K,hydrate:void 0,createApp:O6t(K)}}function Q8({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Yb({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function z6t(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Qae(t,e,n=!1){const s=t.children,r=e.children;if(At(s)&&At(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Oy(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Qae(o,a)),a.type===Pz&&(a.el=o.el),a.type===Kc&&!a.el&&(a.el=o.el)}}function H6t(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function E3e(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:E3e(e)}function AEe(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const W6t=Symbol.for("v-scx"),G6t=()=>Yu(W6t);function iS(t,e,n){return T3e(t,e,n)}function T3e(t,e,n=Ws){const{immediate:s,deep:r,flush:i,once:o}=n,a=zo({},n),l=e&&s||!e&&i!=="post";let u;if(FD){if(i==="sync"){const m=G6t();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=pp,m.resume=pp,m.pause=pp,m}}const h=fc;a.call=(m,w,R)=>rf(m,h,w,R);let d=!1;i==="post"?a.scheduler=m=>{Mc(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():$ae(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=u6t(t,e,a);return FD&&(u?u.push(p):l&&p()),p}function K6t(t,e,n){const s=this.proxy,r=mi(t)?t.includes(".")?C3e(s,t):()=>s[t]:t.bind(s,s);let i;Gt(e)?i=e:(i=e.handler,n=e);const o=t2(this),a=T3e(r,i.bind(s),n);return o(),a}function C3e(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Q6t=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Lh(e)}Modifiers`]||t[`${YC(e)}Modifiers`];function Y6t(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ws;let r=n;const i=e.startsWith("update:"),o=i&&Q6t(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>mi(h)?h.trim():h)),o.number&&(r=n.map(SUt)));let a,l=s[a=j8(e)]||s[a=j8(Lh(e))];!l&&i&&(l=s[a=j8(YC(e))]),l&&rf(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,rf(u,t,6,r)}}function I3e(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Gt(t)){const l=u=>{const h=I3e(u,e,!0);h&&(a=!0,zo(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Rr(t)&&s.set(t,null),null):(At(i)?i.forEach(l=>o[l]=null):zo(o,i),Rr(t)&&s.set(t,o),o)}function Az(t,e){return!t||!gz(e)?!1:(e=e.slice(2).replace(/Once$/,""),ys(t,e[0].toLowerCase()+e.slice(1))||ys(t,YC(e))||ys(t,e))}function PEe(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:R}=t,P=D9(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,W=q;O=qf(u.call(W,q,h,d,m,p,w)),M=a}else{const q=e;O=qf(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:X6t(a)}}catch(q){fN.length=0,Tz(q,t,1),O=gc(Kc)}let V=O;if(M&&R!==!1){const q=Object.keys(M),{shapeFlag:W}=V;q.length&&W&7&&(i&&q.some(Nae)&&(M=J6t(M,i)),V=Mw(V,M,!1,!0))}return n.dirs&&(V=Mw(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&cC(V,n.transition),O=V,D9(P),O}const X6t=t=>{let e;for(const n in t)(n==="class"||n==="style"||gz(n))&&((e||(e={}))[n]=t[n]);return e},J6t=(t,e)=>{const n={};for(const s in t)(!Nae(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Z6t(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?NEe(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!Az(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?NEe(s,o,u):!0:!!o;return!1}function NEe(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Az(n,i))return!0}return!1}function e9t({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const S3e=t=>t.__isSuspense;function t9t(t,e){e&&e.pendingBranch?At(t)?e.effects.push(...t):e.effects.push(t):f6t(t)}const ch=Symbol.for("v-fgt"),Pz=Symbol.for("v-txt"),Kc=Symbol.for("v-cmt"),Y8=Symbol.for("v-stc"),fN=[];let zu=null;function Yae(t=!1){fN.push(zu=t?null:[])}function n9t(){fN.pop(),zu=fN[fN.length-1]||null}let MD=1;function xEe(t,e=!1){MD+=t,t<0&&zu&&e&&(zu.hasOnce=!0)}function k3e(t){return t.dynamicChildren=MD>0?zu||nS:null,n9t(),MD>0&&zu&&zu.push(t),t}function R3e(t,e,n,s,r,i){return k3e(Xae(t,e,n,s,r,i,!0))}function A3e(t,e,n,s,r){return k3e(gc(t,e,n,s,r,!0))}function L9(t){return t?t.__v_isVNode===!0:!1}function CE(t,e){return t.type===e.type&&t.key===e.key}const P3e=({key:t})=>t??null,gV=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?mi(t)||da(t)||Gt(t)?{i:$u,r:t,k:e,f:!!n}:t:null);function Xae(t,e=null,n=null,s=0,r=null,i=t===ch?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&P3e(e),ref:e&&gV(e),scopeId:Gje,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:$u};return a?(Jae(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=mi(n)?8:16),MD>0&&!o&&zu&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&zu.push(l),l}const gc=s9t;function s9t(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===C6t)&&(t=Kc),L9(t)){const a=Mw(t,e,!0);return n&&Jae(a,n),MD>0&&!i&&zu&&(a.shapeFlag&6?zu[zu.indexOf(t)]=a:zu.push(a)),a.patchFlag=-2,a}if(g9t(t)&&(t=t.__vccOpts),e){e=r9t(e);let{class:a,style:l}=e;a&&!mi(a)&&(e.class=bz(a)),Rr(l)&&(jae(l)&&!At(l)&&(l=zo({},l)),e.style=wz(l))}const o=mi(t)?1:S3e(t)?128:Yje(t)?64:Rr(t)?4:Gt(t)?2:0;return Xae(t,e,n,s,r,o,i,!0)}function r9t(t){return t?jae(t)||m3e(t)?zo({},t):t:null}function Mw(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?o9t(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&P3e(u),ref:e&&e.ref?n&&i?At(i)?i.concat(gV(e)):[i,gV(e)]:gV(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ch?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mw(t.ssContent),ssFallback:t.ssFallback&&Mw(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&cC(h,l.clone(h)),h}function N3e(t=" ",e=0){return gc(Pz,null,t,e)}function i9t(t="",e=!1){return e?(Yae(),A3e(Kc,null,t)):gc(Kc,null,t)}function qf(t){return t==null||typeof t=="boolean"?gc(Kc):At(t)?gc(ch,null,t.slice()):L9(t)?Oy(t):gc(Pz,null,String(t))}function Oy(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mw(t)}function Jae(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(At(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Jae(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!m3e(e)?e._ctx=$u:r===3&&$u&&($u.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Gt(e)?(e={default:e,_ctx:$u},n=32):(e=String(e),s&64?(n=16,e=[N3e(e)]):n=8);t.children=e,t.shapeFlag|=n}function o9t(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=bz([e.class,s.class]));else if(r==="style")e.style=wz([e.style,s.style]);else if(gz(r)){const i=e[r],o=s[r];o&&i!==o&&!(At(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function mf(t,e,n,s=null){rf(t,e,7,[n,s])}const a9t=f3e();let c9t=0;function l9t(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||a9t,i={uid:c9t++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Cje(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:y3e(s,r),emitsOptions:I3e(s,r),emit:null,emitted:null,propsDefaults:Ws,inheritAttrs:s.inheritAttrs,ctx:Ws,data:Ws,props:Ws,attrs:Ws,slots:Ws,refs:Ws,setupState:Ws,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Y6t.bind(null,i),t.ce&&t.ce(i),i}let fc=null;const Ab=()=>fc||$u;let M9,zX;{const t=vz(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};M9=e("__VUE_INSTANCE_SETTERS__",n=>fc=n),zX=e("__VUE_SSR_SETTERS__",n=>FD=n)}const t2=t=>{const e=fc;return M9(t),t.scope.on(),()=>{t.scope.off(),M9(e)}},DEe=()=>{fc&&fc.scope.off(),M9(null)};function x3e(t){return t.vnode.shapeFlag&4}let FD=!1;function u9t(t,e=!1,n=!1){e&&zX(e);const{props:s,children:r}=t.vnode,i=x3e(t);M6t(t,s,i,e),q6t(t,r,n||e);const o=i?h9t(t,e):void 0;return e&&zX(!1),o}function h9t(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,k6t);const{setup:s}=n;if(s){f_();const r=t.setupContext=s.length>1?f9t(t):null,i=t2(t),o=ZM(s,t,0,[t.props,r]),a=_je(o);if(p_(),i(),(a||t.sp)&&!uN(t)&&r3e(t),a){if(o.then(DEe,DEe),e)return o.then(l=>{OEe(t,l)}).catch(l=>{Tz(l,t,0)});t.asyncDep=o}else OEe(t,o)}else D3e(t)}function OEe(t,e,n){Gt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Rr(e)&&(t.setupState=Bje(e)),D3e(t)}function D3e(t,e,n){const s=t.type;t.render||(t.render=s.render||pp);{const r=t2(t);f_();try{R6t(t)}finally{p_(),r()}}}const d9t={get(t,e){return rc(t,"get",""),t[e]}};function f9t(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,d9t),slots:t.slots,emit:t.emit,expose:e}}function Nz(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Bje(W1(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hN)return hN[n](t)},has(e,n){return n in e||n in hN}})):t.proxy}function p9t(t,e=!0){return Gt(t)?t.displayName||t.name:t.name||e&&t.__name}function g9t(t){return Gt(t)&&"__vccOpts"in t}const at=(t,e)=>c6t(t,e,FD);function xt(t,e,n){const s=arguments.length;return s===2?Rr(e)&&!At(e)?L9(e)?gc(t,null,[e]):gc(t,e):gc(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&L9(n)&&(n=[n]),gc(t,e,n))}const m9t="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let HX;const LEe=typeof window<"u"&&window.trustedTypes;if(LEe)try{HX=LEe.createPolicy("vue",{createHTML:t=>t})}catch{}const O3e=HX?t=>HX.createHTML(t):t=>t,_9t="http://www.w3.org/2000/svg",y9t="http://www.w3.org/1998/Math/MathML",Yg=typeof document<"u"?document:null,MEe=Yg&&Yg.createElement("template"),v9t={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Yg.createElementNS(_9t,t):e==="mathml"?Yg.createElementNS(y9t,t):n?Yg.createElement(t,{is:n}):Yg.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Yg.createTextNode(t),createComment:t=>Yg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{MEe.innerHTML=O3e(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=MEe.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ry="transition",WR="animation",bk=Symbol("_vtc"),L3e={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},M3e=zo({},e3e,L3e),w9t=t=>(t.displayName="Transition",t.props=M3e,t),F3e=w9t((t,{slots:e})=>xt(_6t,V3e(t),e)),Xb=(t,e=[])=>{At(t)?t.forEach(n=>n(...e)):t&&t(...e)},FEe=t=>t?At(t)?t.some(e=>e.length>1):t.length>1:!1;function V3e(t){const e={};for(const E in t)E in L3e||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=b9t(r),R=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:W,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,G,ne)=>{E._enterCancelled=ne,fy(E,b?h:a),fy(E,b?u:o),G&&G()},T=(E,b)=>{E._isLeaving=!1,fy(E,d),fy(E,m),fy(E,p),b&&b()},S=E=>(b,G)=>{const ne=E?I:M,ae=()=>y(b,E,G);Xb(ne,[b,ae]),VEe(()=>{fy(b,E?l:i),Tf(b,E?h:a),FEe(ne)||UEe(b,s,R,ae)})};return zo(e,{onBeforeEnter(E){Xb(O,[E]),Tf(E,i),Tf(E,o)},onBeforeAppear(E){Xb(J,[E]),Tf(E,l),Tf(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const G=()=>T(E,b);Tf(E,d),E._enterCancelled?(Tf(E,p),WX()):(WX(),Tf(E,p)),VEe(()=>{E._isLeaving&&(fy(E,d),Tf(E,m),FEe(q)||UEe(E,s,P,G))}),Xb(q,[E,G])},onEnterCancelled(E){y(E,!1,void 0,!0),Xb(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Xb(v,[E])},onLeaveCancelled(E){T(E),Xb(W,[E])}})}function b9t(t){if(t==null)return null;if(Rr(t))return[X8(t.enter),X8(t.leave)];{const e=X8(t);return[e,e]}}function X8(t){return kUt(t)}function Tf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[bk]||(t[bk]=new Set)).add(e)}function fy(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[bk];n&&(n.delete(e),n.size||(t[bk]=void 0))}function VEe(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let E9t=0;function UEe(t,e,n,s){const r=t._endId=++E9t,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=U3e(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function U3e(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${ry}Delay`),i=s(`${ry}Duration`),o=qEe(r,i),a=s(`${WR}Delay`),l=s(`${WR}Duration`),u=qEe(a,l);let h=null,d=0,p=0;e===ry?o>0&&(h=ry,d=o,p=i.length):e===WR?u>0&&(h=WR,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?ry:WR:null,p=h?h===ry?i.length:l.length:0);const m=h===ry&&/\b(transform|all)(,|$)/.test(s(`${ry}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function qEe(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>jEe(n)+jEe(t[s])))}function jEe(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function WX(){return document.body.offsetHeight}function T9t(t,e,n){const s=t[bk];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const F9=Symbol("_vod"),q3e=Symbol("_vsh"),C9t={beforeMount(t,{value:e},{transition:n}){t[F9]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):GR(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),GR(t,!0),s.enter(t)):s.leave(t,()=>{GR(t,!1)}):GR(t,e))},beforeUnmount(t,{value:e}){GR(t,e)}};function GR(t,e){t.style.display=e?t[F9]:"none",t[q3e]=!e}const I9t=Symbol(""),S9t=/(^|;)\s*display\s*:/;function k9t(t,e,n){const s=t.style,r=mi(n);let i=!1;if(n&&!r){if(e)if(mi(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&mV(s,a,"")}else for(const o in e)n[o]==null&&mV(s,o,"");for(const o in n)o==="display"&&(i=!0),mV(s,o,n[o])}else if(r){if(e!==n){const o=s[I9t];o&&(n+=";"+o),s.cssText=n,i=S9t.test(n)}}else e&&t.removeAttribute("style");F9 in t&&(t[F9]=i?s.display:"",t[q3e]&&(s.display="none"))}const BEe=/\s*!important$/;function mV(t,e,n){if(At(n))n.forEach(s=>mV(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=R9t(t,e);BEe.test(n)?t.setProperty(YC(s),n.replace(BEe,""),"important"):t[s]=n}}const $Ee=["Webkit","Moz","ms"],J8={};function R9t(t,e){const n=J8[e];if(n)return n;let s=Lh(e);if(s!=="filter"&&s in t)return J8[e]=s;s=yz(s);for(let r=0;r<$Ee.length;r++){const i=$Ee[r]+s;if(i in t)return J8[e]=i}return e}const zEe="http://www.w3.org/1999/xlink";function HEe(t,e,n,s,r,i=DUt(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(zEe,e.slice(6,e.length)):t.setAttributeNS(zEe,e,n):n==null||i&&!wje(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Rb(n)?String(n):n)}function WEe(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?O3e(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=wje(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function A9t(t,e,n,s){t.addEventListener(e,n,s)}function P9t(t,e,n,s){t.removeEventListener(e,n,s)}const GEe=Symbol("_vei");function N9t(t,e,n,s,r=null){const i=t[GEe]||(t[GEe]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=x9t(e);if(s){const u=i[e]=L9t(s,r);A9t(t,a,u,l)}else o&&(P9t(t,a,o,l),i[e]=void 0)}}const KEe=/(?:Once|Passive|Capture)$/;function x9t(t){let e;if(KEe.test(t)){e={};let n;for(;n=t.match(KEe);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):YC(t.slice(2)),e]}let Z8=0;const D9t=Promise.resolve(),O9t=()=>Z8||(D9t.then(()=>Z8=0),Z8=Date.now());function L9t(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;rf(M9t(s,n.value),e,5,[s])};return n.value=t,n.attached=O9t(),n}function M9t(t,e){if(At(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const QEe=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,F9t=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?T9t(t,s,o):e==="style"?k9t(t,n,s):gz(e)?Nae(e)||N9t(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):V9t(t,e,s,o))?(WEe(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&HEe(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mi(s))?WEe(t,Lh(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),HEe(t,e,s,o))};function V9t(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&QEe(e)&&Gt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return QEe(e)&&mi(n)?!1:e in t}const j3e=new WeakMap,B3e=new WeakMap,V9=Symbol("_moveCb"),YEe=Symbol("_enterCb"),U9t=t=>(delete t.props.mode,t),q9t=U9t({name:"TransitionGroup",props:zo({},M3e,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ab(),s=Zje();let r,i;return Wae(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!H9t(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(B9t),r.forEach($9t);const a=r.filter(z9t);WX(),a.forEach(l=>{const u=l.el,h=u.style;Tf(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[V9]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[V9]=null,fy(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=es(t),a=V3e(o);let l=o.tag||ch;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),cC(h,LD(h,a,s,n)),j3e.set(h,h.el.getBoundingClientRect()))}i=e.default?Hae(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&cC(h,LD(h,a,s,n))}return gc(l,null,i)}}}),j9t=q9t;function B9t(t){const e=t.el;e[V9]&&e[V9](),e[YEe]&&e[YEe]()}function $9t(t){B3e.set(t,t.el.getBoundingClientRect())}function z9t(t){const e=j3e.get(t),n=B3e.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function H9t(t,e,n){const s=t.cloneNode(),r=t[bk];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=U3e(s);return i.removeChild(s),o}const W9t=["ctrl","shift","alt","meta"],G9t={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>W9t.some(n=>t[`${n}Key`]&&!e.includes(n))},K9t=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=G9t[e[o]];if(a&&a(r,e))return}return t(r,...i)})},Q9t=zo({patchProp:F9t},v9t);let XEe;function Y9t(){return XEe||(XEe=B6t(Q9t))}const $3e=(...t)=>{const e=Y9t().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=J9t(s);if(!r)return;const i=e._component;!Gt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,X9t(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function X9t(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function J9t(t){return mi(t)?document.querySelector(t):t}function n2(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function Z9t(t,e){for(const n in e)n2(t,n,e[n]);return t}const Fw=g_(!1);let GX;function eqt(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function tqt(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const z3e="ontouchstart"in window||window.navigator.maxTouchPoints>0;function nqt(t){const e=t.toLowerCase(),n=tqt(e),s=eqt(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Fw.value===!0&&(GX={is:{...r}}),z3e===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const JEe=navigator.userAgent||navigator.vendor||window.opera,sqt={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Vd={userAgent:JEe,is:nqt(JEe),has:{touch:z3e},within:{iframe:window.self!==window.top}},U9={install(t){const{$q:e}=t;Fw.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Vd),Fw.value=!1}),e.platform=XC(this)):e.platform=this}};{let t;n2(Vd.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(U9,Vd),Fw.value===!0&&(Object.assign(U9,GX,sqt),GX=null)}function G1(t){return W1(e2(t))}function H3e(t){return W1(t)}const xz=(t,e)=>{const n=XC(t);for(const s in t)n2(e,s,()=>n[s],r=>{n[s]=r});return e},Vw={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Vw,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Ek(){}function rqt(t){return t.button===0}function W3e(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function iqt(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Zae(t){t.stopPropagation()}function q9(t){t.cancelable!==!1&&t.preventDefault()}function pE(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function oqt(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",q9,Vw.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",q9,Vw.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function G3e(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Vw[r[3]])})}function K3e(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Vw[s[3]])}),t[n]=void 0)}function Q3e(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const eG=["sm","md","lg","xl"],{passive:ZEe}=Vw,aqt=xz({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Ek,setDebounce:Ek,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Vd.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{eG.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&eG.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{eG.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,ZEe),a=p>0?Q3e(this.__update,p):this.__update,s.addEventListener("resize",a,ZEe)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Fw.value===!0?e.push(h):h()}}),Fa=xz({isActive:!1,mode:!1},{__media:void 0,set(t){Fa.mode=t,t==="auto"?(Fa.__media===void 0&&(Fa.__media=window.matchMedia("(prefers-color-scheme: dark)"),Fa.__updateMedia=()=>{Fa.set("auto")},Fa.__media.addListener(Fa.__updateMedia)),t=Fa.__media.matches):Fa.__media!==void 0&&(Fa.__media.removeListener(Fa.__updateMedia),Fa.__media=void 0),Fa.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Fa.set(Fa.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function cqt(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let Y3e=!1;function lqt(t){Y3e=t.isComposing===!0}function X3e(t){return Y3e===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function j9(t,e){return X3e(t)===!0?!1:[].concat(e).includes(t.keyCode)}function J3e(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function uqt({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=J3e(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function hqt(){const{is:t}=Vd,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=J3e(t);r!==void 0&&n.add(`platform-${r}`)}}Vd.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Vd.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function dqt(t){for(const e in t)cqt(e,t[e])}const fqt={install(t){if(this.__installed!==!0){if(Fw.value===!0)hqt();else{const{$q:e}=t;e.config.brand!==void 0&&dqt(e.config.brand);const n=uqt(Vd,e.config);document.body.classList.add.apply(document.body.classList,n)}Vd.is.ios===!0&&document.body.addEventListener("touchstart",Ek),window.addEventListener("keydown",lqt,!0)}}},Z3e=()=>!0;function pqt(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function gqt(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function mqt(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Z3e;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(pqt).map(gqt)),()=>e.includes(window.location.hash)}const eBe={__history:[],add:Ek,remove:Ek,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Vd.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Z3e),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=mqt(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},eTe={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function tTe(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Ly=xz({__qLang:{}},{getLocale:tTe,set(t=eTe,e){const n={...t,rtl:t.rtl===!0,getLocale:tTe};{if(n.set=Ly.set,Ly.__langConfig===void 0||Ly.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Ly.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Ly.__qLang,Ly.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||eTe))}}),_qt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},B9=xz({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=B9.set,Object.assign(B9.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,n2(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||_qt))}}),tBe="_q_",yqt="_q_l_",vqt="_q_pc_",wqt="_q_fo_";function bqt(){}const $9={};let nBe=!1;function Eqt(){nBe=!0}function _V(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(_V(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(_V(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(_V(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function Tk(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Tqt(t){return Object.prototype.toString.call(t)==="[object Date]"}function Cqt(t){return typeof t=="number"&&isFinite(t)}const nTe=[U9,fqt,Fa,aqt,eBe,Ly,B9];function Iqt(t,e){const n=$3e(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function sTe(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function Sqt(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(tBe,n.$q),sTe(n,nTe),e.components!==void 0&&Object.values(e.components).forEach(s=>{Tk(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{Tk(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&sTe(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&nTe.includes(s)===!1)),Fw.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const kqt=function(t,e={}){const n={version:"2.18.2"};nBe===!1?(e.config!==void 0&&Object.assign($9,e.config),n.config={...$9},Eqt()):n.config=e.config||{},Sqt(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},Rqt={name:"Quasar",version:"2.18.2",install:kqt,lang:Ly,iconSet:B9};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const rI=typeof document<"u";function sBe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Aqt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sBe(t.default)}const fs=Object.assign;function tG(t,e){const n={};for(const s in e){const r=e[s];n[s]=of(r)?r.map(t):t(r)}return n}const pN=()=>{},of=Array.isArray,rBe=/#/g,Pqt=/&/g,Nqt=/\//g,xqt=/=/g,Dqt=/\?/g,iBe=/\+/g,Oqt=/%5B/g,Lqt=/%5D/g,oBe=/%5E/g,Mqt=/%60/g,aBe=/%7B/g,Fqt=/%7C/g,cBe=/%7D/g,Vqt=/%20/g;function ece(t){return encodeURI(""+t).replace(Fqt,"|").replace(Oqt,"[").replace(Lqt,"]")}function Uqt(t){return ece(t).replace(aBe,"{").replace(cBe,"}").replace(oBe,"^")}function KX(t){return ece(t).replace(iBe,"%2B").replace(Vqt,"+").replace(rBe,"%23").replace(Pqt,"%26").replace(Mqt,"`").replace(aBe,"{").replace(cBe,"}").replace(oBe,"^")}function qqt(t){return KX(t).replace(xqt,"%3D")}function jqt(t){return ece(t).replace(rBe,"%23").replace(Dqt,"%3F")}function Bqt(t){return t==null?"":jqt(t).replace(Nqt,"%2F")}function VD(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const $qt=/\/$/,zqt=t=>t.replace($qt,"");function nG(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Kqt(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:VD(o)}}function Hqt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function rTe(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Wqt(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ck(e.matched[s],n.matched[r])&&lBe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ck(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function lBe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Gqt(t[n],e[n]))return!1;return!0}function Gqt(t,e){return of(t)?iTe(t,e):of(e)?iTe(e,t):t===e}function iTe(t,e){return of(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Kqt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const iy={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var UD;(function(t){t.pop="pop",t.push="push"})(UD||(UD={}));var gN;(function(t){t.back="back",t.forward="forward",t.unknown=""})(gN||(gN={}));function Qqt(t){if(!t)if(rI){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),zqt(t)}const Yqt=/^[^#]+#/;function Xqt(t,e){return t.replace(Yqt,"#")+e}function Jqt(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Dz=()=>({left:window.scrollX,top:window.scrollY});function Zqt(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Jqt(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function oTe(t,e){return(history.state?history.state.position-e:-1)+t}const QX=new Map;function ejt(t,e){QX.set(t,e)}function tjt(t){const e=QX.get(t);return QX.delete(t),e}let njt=()=>location.protocol+"//"+location.host;function uBe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),rTe(a,"")}return rTe(n,t)+s+r}function sjt(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=uBe(t,location),w=n.value,R=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=R?p.position-R.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:UD.pop,direction:P?P>0?gN.forward:gN.back:gN.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(fs({},p.state,{scroll:Dz()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function aTe(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Dz():null}}function rjt(t){const{history:e,location:n}=window,s={value:uBe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:njt()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=fs({},e.state,aTe(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=fs({},r.value,e.state,{forward:l,scroll:Dz()});i(h.current,h,!0);const d=fs({},aTe(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function ijt(t){t=Qqt(t);const e=rjt(t),n=sjt(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=fs({location:"",base:t,go:s,createHref:Xqt.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ojt(t){return typeof t=="string"||t&&typeof t=="object"}function hBe(t){return typeof t=="string"||typeof t=="symbol"}const dBe=Symbol("");var cTe;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(cTe||(cTe={}));function Ik(t,e){return fs(new Error,{type:t,[dBe]:!0},e)}function Ug(t,e){return t instanceof Error&&dBe in t&&(e==null||!!(t.type&e))}const lTe="[^/]+?",ajt={sensitive:!1,strict:!1,start:!0,end:!0},cjt=/[.+*?^${}()[\]/\\]/g;function ljt(t,e){const n=fs({},ajt,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(cjt,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:R,optional:P,regexp:O}=p;i.push({name:w,repeatable:R,optional:P});const M=O||lTe;if(M!==lTe){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=R?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),R&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:R,optional:P}=m,O=w in u?u[w]:"";if(of(O)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=of(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function ujt(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function fBe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=ujt(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(uTe(s))return 1;if(uTe(r))return-1}return r.length-s.length}function uTe(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const hjt={type:0,value:""},djt=/[a-zA-Z0-9_]/;function fjt(t){if(!t)return[[]];if(t==="/")return[[hjt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:djt.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function pjt(t,e,n){const s=ljt(fjt(t.path),n),r=fs(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function gjt(t,e){const n=[],s=new Map;e=pTe({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,R=dTe(d);R.aliasOf=m&&m.record;const P=pTe(e,d),O=[R];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of q)O.push(dTe(fs({},R,{components:m?m.record.components:R.components,path:W,aliasOf:m?m.record:R})))}let M,V;for(const q of O){const{path:W}=q;if(p&&W[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(W&&I+W)}if(M=pjt(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!fTe(M)&&o(d.name)),pBe(M)&&l(M),R.children){const J=R.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:pN}function o(d){if(hBe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=yjt(d,n);n.splice(p,0,d),d.record.name&&!fTe(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},R,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw Ik(1,{location:d});P=m.record.name,w=fs(hTe(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&hTe(d.params,m.keys.map(V=>V.name))),R=m.stringify(w)}else if(d.path!=null)R=d.path,m=n.find(V=>V.re.test(R)),m&&(w=m.parse(R),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw Ik(1,{location:d,currentLocation:p});P=m.record.name,w=fs({},p.params,d.params),R=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:R,params:w,matched:O,meta:_jt(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function hTe(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function dTe(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:mjt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function mjt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function fTe(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _jt(t){return t.reduce((e,n)=>fs(e,n.meta),{})}function pTe(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function yjt(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;fBe(t,e[i])<0?s=i:n=i+1}const r=vjt(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function vjt(t){let e=t;for(;e=e.parent;)if(pBe(e)&&fBe(t,e)===0)return e}function pBe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function wjt(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(iBe," "),i=r.indexOf("="),o=VD(i<0?r:r.slice(0,i)),a=i<0?null:VD(r.slice(i+1));if(o in e){let l=e[o];of(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function gTe(t){let e="";for(let n in t){const s=t[n];if(n=qqt(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(of(s)?s.map(r=>r&&KX(r)):[s&&KX(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function bjt(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=of(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Ejt=Symbol(""),mTe=Symbol(""),Oz=Symbol(""),tce=Symbol(""),YX=Symbol("");function KR(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function My(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Ik(4,{from:n,to:e})):p instanceof Error?l(p):ojt(p)?l(Ik(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function sG(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(sBe(l)){const u=(l.__vccOpts||l)[e];u&&i.push(My(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Aqt(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&My(p,n,s,o,a,r)()}))}}return i}function _Te(t){const e=Yu(Oz),n=Yu(tce),s=at(()=>{const l=Nv(t.to);return e.resolve(l)}),r=at(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(Ck.bind(null,h));if(p>-1)return p;const m=yTe(l[u-2]);return u>1&&yTe(h)===m&&d[d.length-1].path!==m?d.findIndex(Ck.bind(null,l[u-2])):p}),i=at(()=>r.value>-1&&kjt(n.params,s.value.params)),o=at(()=>r.value>-1&&r.value===n.matched.length-1&&lBe(n.params,s.value.params));function a(l={}){if(Sjt(l)){const u=e[Nv(t.replace)?"replace":"push"](Nv(t.to)).catch(pN);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:at(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Tjt(t){return t.length===1?t[0]:t}const Cjt=e2({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:_Te,setup(t,{slots:e}){const n=XC(_Te(t)),{options:s}=Yu(Oz),r=at(()=>({[vTe(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[vTe(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Tjt(e.default(n));return t.custom?i:xt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Ijt=Cjt;function Sjt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function kjt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!of(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function yTe(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vTe=(t,e,n)=>t??e??n,Rjt=e2({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Yu(YX),r=at(()=>t.route||s.value),i=Yu(mTe,0),o=at(()=>{let u=Nv(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=at(()=>r.value.matched[o.value]);dN(mTe,at(()=>o.value+1)),dN(Ejt,a),dN(YX,r);const l=g_();return iS(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ck(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return wTe(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,R=xt(p,fs({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return wTe(n.default,{Component:R,route:u})||R}}});function wTe(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Ajt=Rjt;function Pjt(t){const e=gjt(t.routes,t),n=t.parseQuery||wjt,s=t.stringifyQuery||gTe,r=t.history,i=KR(),o=KR(),a=KR(),l=t6t(iy);let u=iy;rI&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=tG.bind(null,F=>""+F),d=tG.bind(null,Bqt),p=tG.bind(null,VD);function m(F,Q){let K,ee;return hBe(F)?(K=e.getRecordMatcher(F),ee=Q):ee=F,e.addRoute(ee,K)}function w(F){const Q=e.getRecordMatcher(F);Q&&e.removeRoute(Q)}function R(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Q){if(Q=fs({},Q||l.value),typeof F=="string"){const x=nG(n,F,Q.path),L=e.resolve({path:x.path},Q),U=r.createHref(x.fullPath);return fs(x,L,{params:p(L.params),hash:VD(x.hash),redirectedFrom:void 0,href:U})}let K;if(F.path!=null)K=fs({},F,{path:nG(n,F.path,Q.path).path});else{const x=fs({},F.params);for(const L in x)x[L]==null&&delete x[L];K=fs({},F,{params:d(x)}),Q.params=d(Q.params)}const ee=e.resolve(K,Q),k=F.hash||"";ee.params=h(p(ee.params));const C=Hqt(s,fs({},F,{hash:Uqt(k),path:ee.path})),A=r.createHref(C);return fs({fullPath:C,hash:k,query:s===gTe?bjt(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:A})}function M(F){return typeof F=="string"?nG(n,F,l.value.path):fs({},F)}function V(F,Q){if(u!==F)return Ik(8,{from:Q,to:F})}function q(F){return I(F)}function W(F){return q(fs(M(F),{replace:!0}))}function J(F){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let ee=typeof K=="function"?K(F):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),fs({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Q){const K=u=O(F),ee=l.value,k=F.state,C=F.force,A=F.replace===!0,x=J(K);if(x)return I(fs(M(x),{state:typeof x=="object"?fs({},k,x.state):k,force:C,replace:A}),Q||K);const L=K;L.redirectedFrom=Q;let U;return!C&&Wqt(s,ee,K)&&(U=Ik(16,{to:L,from:ee}),Qe(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Ug(j)?Ug(j,2)?j:Ke(j):de(j,L,ee)).then(j=>{if(j){if(Ug(j,2))return I(fs({replace:A},M(j.to),{state:typeof j.to=="object"?fs({},k,j.to.state):k,force:C}),Q||L)}else j=E(L,ee,!0,A,k);return S(L,ee,j),j})}function v(F,Q){const K=V(F,Q);return K?Promise.reject(K):Promise.resolve()}function y(F){const Q=qt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function T(F,Q){let K;const[ee,k,C]=Njt(F,Q);K=sG(ee.reverse(),"beforeRouteLeave",F,Q);for(const x of ee)x.leaveGuards.forEach(L=>{K.push(My(L,F,Q))});const A=v.bind(null,F,Q);return K.push(A),Fe(K).then(()=>{K=[];for(const x of i.list())K.push(My(x,F,Q));return K.push(A),Fe(K)}).then(()=>{K=sG(k,"beforeRouteUpdate",F,Q);for(const x of k)x.updateGuards.forEach(L=>{K.push(My(L,F,Q))});return K.push(A),Fe(K)}).then(()=>{K=[];for(const x of C)if(x.beforeEnter)if(of(x.beforeEnter))for(const L of x.beforeEnter)K.push(My(L,F,Q));else K.push(My(x.beforeEnter,F,Q));return K.push(A),Fe(K)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),K=sG(C,"beforeRouteEnter",F,Q,y),K.push(A),Fe(K))).then(()=>{K=[];for(const x of o.list())K.push(My(x,F,Q));return K.push(A),Fe(K)}).catch(x=>Ug(x,8)?x:Promise.reject(x))}function S(F,Q,K){a.list().forEach(ee=>y(()=>ee(F,Q,K)))}function E(F,Q,K,ee,k){const C=V(F,Q);if(C)return C;const A=Q===iy,x=rI?history.state:{};K&&(ee||A?r.replace(F.fullPath,fs({scroll:A&&x&&x.scroll},k)):r.push(F.fullPath,k)),l.value=F,Qe(F,Q,K,A),Ke()}let b;function G(){b||(b=r.listen((F,Q,K)=>{if(!it.listening)return;const ee=O(F),k=J(ee);if(k){I(fs(k,{replace:!0,force:!0}),ee).catch(pN);return}u=ee;const C=l.value;rI&&ejt(oTe(C.fullPath,K.delta),Dz()),T(ee,C).catch(A=>Ug(A,12)?A:Ug(A,2)?(I(fs(M(A.to),{force:!0}),ee).then(x=>{Ug(x,20)&&!K.delta&&K.type===UD.pop&&r.go(-1,!1)}).catch(pN),Promise.reject()):(K.delta&&r.go(-K.delta,!1),de(A,ee,C))).then(A=>{A=A||E(ee,C,!1),A&&(K.delta&&!Ug(A,8)?r.go(-K.delta,!1):K.type===UD.pop&&Ug(A,20)&&r.go(-1,!1)),S(ee,C,A)}).catch(pN)}))}let ne=KR(),ae=KR(),oe;function de(F,Q,K){Ke(F);const ee=ae.list();return ee.length?ee.forEach(k=>k(F,Q,K)):console.error(F),Promise.reject(F)}function ct(){return oe&&l.value!==iy?Promise.resolve():new Promise((F,Q)=>{ne.add([F,Q])})}function Ke(F){return oe||(oe=!F,G(),ne.list().forEach(([Q,K])=>F?K(F):Q()),ne.reset()),F}function Qe(F,Q,K,ee){const{scrollBehavior:k}=t;if(!rI||!k)return Promise.resolve();const C=!K&&tjt(oTe(F.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return Bae().then(()=>k(F,Q,C)).then(A=>A&&Zqt(A)).catch(A=>de(A,F,Q))}const ge=F=>r.go(F);let he;const qt=new Set,it={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:R,resolve:O,options:t,push:q,replace:W,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:ct,install(F){const Q=this;F.component("RouterLink",Ijt),F.component("RouterView",Ajt),F.config.globalProperties.$router=Q,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Nv(l)}),rI&&!he&&l.value===iy&&(he=!0,q(r.location).catch(k=>{}));const K={};for(const k in iy)Object.defineProperty(K,k,{get:()=>l.value[k],enumerable:!0});F.provide(Oz,Q),F.provide(tce,Uae(K)),F.provide(YX,l);const ee=F.unmount;qt.add(F),F.unmount=function(){qt.delete(F),qt.size<1&&(u=iy,b&&b(),b=null,l.value=iy,he=!1,oe=!1),ee()}}};function Fe(F){return F.reduce((Q,K)=>Q.then(()=>y(K)),Promise.resolve())}return it}function Njt(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ck(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ck(u,l))||r.push(l))}return[n,s,r]}function gBe(){return Yu(Oz)}function mBe(t){return Yu(tce)}const xjt=()=>{};var bTe={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _Be={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xe=function(t,e){if(!t)throw K1(e)},K1=function(t){return new Error("Firebase Database ("+_Be.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yBe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Djt=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yBe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Djt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new Ojt;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ojt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vBe=function(t){const e=yBe(t);return nce.encodeByteArray(e,!0)},z9=function(t){return vBe(t).replace(/\./g,"")},H9=function(t){try{return nce.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ljt(t){return wBe(void 0,t)}function wBe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mjt(n)||(t[n]=wBe(t[n],e[n]));return t}function Mjt(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fjt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vjt=()=>Fjt().__FIREBASE_DEFAULTS__,Ujt=()=>{if(typeof process>"u"||typeof bTe>"u")return;const t=bTe.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qjt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H9(t[1]);return e&&JSON.parse(e)},Lz=()=>{try{return xjt()||Vjt()||Ujt()||qjt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bBe=t=>Lz()?.emulatorHosts?.[t],sce=t=>{const e=bBe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},EBe=()=>Lz()?.config,TBe=t=>Lz()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ig(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fz(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[z9(JSON.stringify(n)),z9(JSON.stringify(o)),""].join(".")}const mN={};function jjt(){const t={prod:[],emulator:[]};for(const e of Object.keys(mN))mN[e]?t.emulator.push(e):t.prod.push(e);return t}function Bjt(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ETe=!1;function Vz(t,e){if(typeof window>"u"||typeof document>"u"||!ig(window.location.host)||mN[t]===e||mN[t]||ETe)return;mN[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=jjt().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{ETe=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=Bjt(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),R=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(R,w);const V=l();a(O,P),M.append(O,m,R,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bc(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ice(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bc())}function $jt(){const t=Lz()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zjt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hjt(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CBe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wjt(){const t=bc();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gjt(){return _Be.NODE_ADMIN===!0}function Kjt(){return!$jt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qjt(){try{return typeof indexedDB=="object"}catch{return!1}}function Yjt(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xjt="FirebaseError";class og extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Xjt,Object.setPrototypeOf(this,og.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s2.prototype.create)}}class s2{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Jjt(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new og(r,a,s)}}function Jjt(t,e){return t.replace(Zjt,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Zjt=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qD(t){return JSON.parse(t)}function Ao(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IBe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=qD(H9(i[0])||""),n=qD(H9(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},e3t=function(t){const e=IBe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},t3t=function(t){const e=IBe(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function z_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sk(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function XX(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function W9(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Uw(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(TTe(i)&&TTe(o)){if(!Uw(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function TTe(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q1(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class n3t{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function s3t(t,e){const n=new r3t(t,e);return n.subscribe.bind(n)}class r3t{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");i3t(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=rG),r.error===void 0&&(r.error=rG),r.complete===void 0&&(r.complete=rG);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i3t(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rG(){}function oce(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const o3t=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,xe(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Uz=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function js(t){return t&&t._delegate?t._delegate:t}class m_{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gE="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a3t{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Mz;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(l3t(e))try{this.getOrInitializeService({instanceIdentifier:gE})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=gE){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gE){return this.instances.has(e)}getOptions(e=gE){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:c3t(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=gE){return this.component?this.component.multipleInstances?e:gE:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c3t(t){return t===gE?void 0:t}function l3t(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class u3t{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new a3t(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var En;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(En||(En={}));const h3t={debug:En.DEBUG,verbose:En.VERBOSE,info:En.INFO,warn:En.WARN,error:En.ERROR,silent:En.SILENT},d3t=En.INFO,f3t={[En.DEBUG]:"log",[En.VERBOSE]:"log",[En.INFO]:"info",[En.WARN]:"warn",[En.ERROR]:"error"},p3t=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=f3t[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qz{constructor(e){this.name=e,this._logLevel=d3t,this._logHandler=p3t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in En))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?h3t[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,En.DEBUG,...e),this._logHandler(this,En.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,En.VERBOSE,...e),this._logHandler(this,En.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,En.INFO,...e),this._logHandler(this,En.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,En.WARN,...e),this._logHandler(this,En.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,En.ERROR,...e),this._logHandler(this,En.ERROR,...e)}}const g3t=(t,e)=>e.some(n=>t instanceof n);let CTe,ITe;function m3t(){return CTe||(CTe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _3t(){return ITe||(ITe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SBe=new WeakMap,JX=new WeakMap,kBe=new WeakMap,iG=new WeakMap,ace=new WeakMap;function y3t(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(xv(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SBe.set(n,t)}).catch(()=>{}),ace.set(e,t),e}function v3t(t){if(JX.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});JX.set(t,e)}let ZX={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return JX.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kBe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xv(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function w3t(t){ZX=t(ZX)}function b3t(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(oG(this),e,...n);return kBe.set(s,e.sort?e.sort():[e]),xv(s)}:_3t().includes(t)?function(...e){return t.apply(oG(this),e),xv(SBe.get(this))}:function(...e){return xv(t.apply(oG(this),e))}}function E3t(t){return typeof t=="function"?b3t(t):(t instanceof IDBTransaction&&v3t(t),g3t(t,m3t())?new Proxy(t,ZX):t)}function xv(t){if(t instanceof IDBRequest)return y3t(t);if(iG.has(t))return iG.get(t);const e=E3t(t);return e!==t&&(iG.set(t,e),ace.set(e,t)),e}const oG=t=>ace.get(t);function T3t(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=xv(o);return s&&o.addEventListener("upgradeneeded",l=>{s(xv(o.result),l.oldVersion,l.newVersion,xv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const C3t=["get","getKey","getAll","getAllKeys","count"],I3t=["put","add","delete","clear"],aG=new Map;function STe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(aG.get(e))return aG.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=I3t.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||C3t.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return aG.set(e,i),i}w3t(t=>({...t,get:(e,n,s)=>STe(e,n)||t.get(e,n,s),has:(e,n)=>!!STe(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S3t{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(k3t(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function k3t(t){return t.getComponent()?.type==="VERSION"}const eJ="@firebase/app",kTe="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const __=new qz("@firebase/app"),R3t="@firebase/app-compat",A3t="@firebase/analytics-compat",P3t="@firebase/analytics",N3t="@firebase/app-check-compat",x3t="@firebase/app-check",D3t="@firebase/auth",O3t="@firebase/auth-compat",L3t="@firebase/database",M3t="@firebase/data-connect",F3t="@firebase/database-compat",V3t="@firebase/functions",U3t="@firebase/functions-compat",q3t="@firebase/installations",j3t="@firebase/installations-compat",B3t="@firebase/messaging",$3t="@firebase/messaging-compat",z3t="@firebase/performance",H3t="@firebase/performance-compat",W3t="@firebase/remote-config",G3t="@firebase/remote-config-compat",K3t="@firebase/storage",Q3t="@firebase/storage-compat",Y3t="@firebase/firestore",X3t="@firebase/ai",J3t="@firebase/firestore-compat",Z3t="firebase",eBt="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tJ="[DEFAULT]",tBt={[eJ]:"fire-core",[R3t]:"fire-core-compat",[P3t]:"fire-analytics",[A3t]:"fire-analytics-compat",[x3t]:"fire-app-check",[N3t]:"fire-app-check-compat",[D3t]:"fire-auth",[O3t]:"fire-auth-compat",[L3t]:"fire-rtdb",[M3t]:"fire-data-connect",[F3t]:"fire-rtdb-compat",[V3t]:"fire-fn",[U3t]:"fire-fn-compat",[q3t]:"fire-iid",[j3t]:"fire-iid-compat",[B3t]:"fire-fcm",[$3t]:"fire-fcm-compat",[z3t]:"fire-perf",[H3t]:"fire-perf-compat",[W3t]:"fire-rc",[G3t]:"fire-rc-compat",[K3t]:"fire-gcs",[Q3t]:"fire-gcs-compat",[Y3t]:"fire-fst",[J3t]:"fire-fst-compat",[X3t]:"fire-vertex","fire-js":"fire-js",[Z3t]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G9=new Map,nBt=new Map,nJ=new Map;function RTe(t,e){try{t.container.addComponent(e)}catch(n){__.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qw(t){const e=t.name;if(nJ.has(e))return __.debug(`There were multiple attempts to register component ${e}.`),!1;nJ.set(e,t);for(const n of G9.values())RTe(n,t);for(const n of nBt.values())RTe(n,t);return!0}function r2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Du(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sBt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dv=new s2("app","Firebase",sBt);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rBt{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new m_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dv.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pb=eBt;function RBe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:tJ,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Dv.create("bad-app-name",{appName:String(r)});if(n||(n=EBe()),!n)throw Dv.create("no-options");const i=G9.get(r);if(i){if(Uw(n,i.options)&&Uw(s,i.config))return i;throw Dv.create("duplicate-app",{appName:r})}const o=new u3t(r);for(const l of nJ.values())o.addComponent(l);const a=new rBt(n,s,o);return G9.set(r,a),a}function jz(t=tJ){const e=G9.get(t);if(!e&&t===tJ&&EBe())return RBe();if(!e)throw Dv.create("no-app",{appName:t});return e}function Sh(t,e,n){let s=tBt[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),__.warn(o.join(" "));return}qw(new m_(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iBt="firebase-heartbeat-database",oBt=1,jD="firebase-heartbeat-store";let cG=null;function ABe(){return cG||(cG=T3t(iBt,oBt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jD)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dv.create("idb-open",{originalErrorMessage:t.message})})),cG}async function aBt(t){try{const e=(await ABe()).transaction(jD),n=await e.objectStore(jD).get(PBe(t));return await e.done,n}catch(e){if(e instanceof og)__.warn(e.message);else{const n=Dv.create("idb-get",{originalErrorMessage:e?.message});__.warn(n.message)}}}async function ATe(t,e){try{const n=(await ABe()).transaction(jD,"readwrite");await n.objectStore(jD).put(e,PBe(t)),await n.done}catch(n){if(n instanceof og)__.warn(n.message);else{const s=Dv.create("idb-set",{originalErrorMessage:n?.message});__.warn(s.message)}}}function PBe(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cBt=1024,lBt=30;class uBt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dBt(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=PTe();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>lBt){const s=fBt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){__.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=PTe(),{heartbeatsToSend:n,unsentEntries:s}=hBt(this._heartbeatsCache.heartbeats),r=z9(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return __.warn(e),""}}}function PTe(){return new Date().toISOString().substring(0,10)}function hBt(t,e=cBt){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),NTe(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),NTe(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class dBt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qjt()?Yjt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await aBt(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ATe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ATe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function NTe(t){return z9(JSON.stringify({version:2,heartbeats:t})).length}function fBt(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pBt(t){qw(new m_("platform-logger",e=>new S3t(e),"PRIVATE")),qw(new m_("heartbeat",e=>new uBt(e),"PRIVATE")),Sh(eJ,kTe,t),Sh(eJ,kTe,"esm2020"),Sh("fire-js","")}pBt("");function NBe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xBe=NBe,DBe=new s2("auth","Firebase",NBe());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K9=new qz("@firebase/auth");function gBt(t,...e){K9.logLevel<=En.WARN&&K9.warn(`Auth (${Pb}): ${t}`,...e)}function yV(t,...e){K9.logLevel<=En.ERROR&&K9.error(`Auth (${Pb}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $p(t,...e){throw lce(t,...e)}function Ud(t,...e){return lce(t,...e)}function cce(t,e,n){const s={...xBe(),[e]:n};return new s2("auth","Firebase",s).create(e,{appName:t.name})}function wT(t){return cce(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mBt(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&$p(t,"argument-error"),cce(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lce(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return DBe.create(t,...e)}function Mt(t,e,...n){if(!t)throw lce(e,...n)}function Cm(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yV(e),new Error(e)}function y_(t,e){t||Cm(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sJ(){return typeof self<"u"&&self.location?.href||""}function _Bt(){return xTe()==="http:"||xTe()==="https:"}function xTe(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yBt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_Bt()||Hjt()||"connection"in navigator)?navigator.onLine:!0}function vBt(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class i2{constructor(e,n){this.shortDelay=e,this.longDelay=n,y_(n>e,"Short delay should be less than long delay!"),this.isMobile=ice()||CBe()}get(){return yBt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uce(t,e){y_(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OBe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wBt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bBt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EBt=new i2(3e4,6e4);function hce(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Y1(t,e,n,s,r={}){return LBe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Q1({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return zjt()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ig(t.emulatorConfig.host)&&(u.credentials="include"),OBe.fetch()(await MBe(t,t.config.apiHost,n,a),u)})}async function LBe(t,e,n){t._canInitEmulator=!1;const s={...wBt,...e};try{const r=new CBt(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qF(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qF(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qF(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qF(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cce(t,h,u);$p(t,h)}}catch(r){if(r instanceof og)throw r;$p(t,"network-request-failed",{message:String(r)})}}async function TBt(t,e,n,s,r={}){const i=await Y1(t,e,n,s,r);return"mfaPendingCredential"in i&&$p(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function MBe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?uce(t.config,r):`${t.config.apiScheme}://${r}`;return bBt.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class CBt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ud(this.auth,"network-request-failed")),EBt.get())})}}function qF(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ud(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function IBt(t,e){return Y1(t,"POST","/v1/accounts:delete",e)}async function Q9(t,e){return Y1(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _N(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FBe(t,e=!1){const n=js(t),s=await n.getIdToken(e),r=dce(s);Mt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:_N(lG(r.auth_time)),issuedAtTime:_N(lG(r.iat)),expirationTime:_N(lG(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function lG(t){return Number(t)*1e3}function dce(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return yV("JWT malformed, contained fewer than 3 sections"),null;try{const r=H9(n);return r?JSON.parse(r):(yV("Failed to decode base64 JWT payload"),null)}catch(r){return yV("Caught error parsing JWT payload as JSON",r?.toString()),null}}function DTe(t){const e=dce(t);return Mt(e,"internal-error"),Mt(typeof e.exp<"u","internal-error"),Mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function BD(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof og&&SBt(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function SBt({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kBt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rJ{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_N(this.lastLoginAt),this.creationTime=_N(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Y9(t){const e=t.auth,n=await t.getIdToken(),s=await BD(t,Q9(e,{idToken:n}));Mt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?UBe(r.providerUserInfo):[],o=RBt(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new rJ(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function VBe(t){const e=js(t);await Y9(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RBt(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function UBe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ABt(t,e){const n=await LBe(t,{},async()=>{const s=Q1({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await MBe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&ig(t.emulatorConfig.host)&&(l.credentials="include"),OBe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PBt(t,e){return Y1(t,"POST","/v2/accounts:revokeToken",hce(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Mt(e.idToken,"internal-error"),Mt(typeof e.idToken<"u","internal-error"),Mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DTe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Mt(e.length!==0,"internal-error");const n=DTe(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await ABt(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new oS;return s&&(Mt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Mt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Mt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oS,this.toJSON())}_performRefresh(){return Cm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oy(t,e){Mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dd{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new kBt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new rJ(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await BD(this,this.stsTokenManager.getToken(this.auth,e));return Mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FBe(this,e)}reload(){return VBe(this)}_assign(e){this!==e&&(Mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dd({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Y9(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Du(this.auth.app))return Promise.reject(wT(this.auth));const e=await this.getIdToken();return await BD(this,IBt(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:R}=n;Mt(d&&R,e,"internal-error");const P=oS.fromJSON(this.name,R);Mt(typeof d=="string",e,"internal-error"),oy(s,e.name),oy(r,e.name),Mt(typeof p=="boolean",e,"internal-error"),Mt(typeof m=="boolean",e,"internal-error"),oy(i,e.name),oy(o,e.name),oy(a,e.name),oy(l,e.name),oy(u,e.name),oy(h,e.name);const O=new dd({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new oS;r.updateFromServerResponse(n);const i=new dd({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Y9(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Mt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?UBe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new oS;a.updateFromIdToken(s);const l=new dd({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new rJ(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OTe=new Map;function Im(t){y_(t instanceof Function,"Expected a class definition");let e=OTe.get(t);return e?(y_(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OTe.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qBe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qBe.type="NONE";const iJ=qBe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vV(t,e,n){return`firebase:${t}:${e}:${n}`}class aS{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=vV(this.userKey,r.apiKey,i),this.fullPersistenceKey=vV("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Q9(this.auth,{idToken:e}).catch(()=>{});return n?dd._fromGetAccountInfoResponse(this.auth,n,e):null}return dd._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new aS(Im(iJ),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Im(iJ);const o=vV(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await Q9(e,{idToken:h}).catch(()=>{});if(!p)break;d=await dd._fromGetAccountInfoResponse(e,p,h)}else d=dd._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new aS(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new aS(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LTe(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zBe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jBe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WBe(e))return"Blackberry";if(GBe(e))return"Webos";if(BBe(e))return"Safari";if((e.includes("chrome/")||$Be(e))&&!e.includes("edge/"))return"Chrome";if(HBe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function jBe(t=bc()){return/firefox\//i.test(t)}function BBe(t=bc()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $Be(t=bc()){return/crios\//i.test(t)}function zBe(t=bc()){return/iemobile/i.test(t)}function HBe(t=bc()){return/android/i.test(t)}function WBe(t=bc()){return/blackberry/i.test(t)}function GBe(t=bc()){return/webos/i.test(t)}function fce(t=bc()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NBt(t=bc()){return fce(t)&&!!window.navigator?.standalone}function xBt(){return Wjt()&&document.documentMode===10}function KBe(t=bc()){return fce(t)||HBe(t)||GBe(t)||WBe(t)||/windows phone/i.test(t)||zBe(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QBe(t,e=[]){let n;switch(t){case"Browser":n=LTe(bc());break;case"Worker":n=`${LTe(bc())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pb}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DBt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function OBt(t,e={}){return Y1(t,"GET","/v2/passwordPolicy",hce(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LBt=6;class MBt{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LBt,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FBt{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MTe(this),this.idTokenSubscription=new MTe(this),this.beforeStateQueue=new DBt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DBe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Im(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await aS.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Q9(this,{idToken:e}),s=await dd._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Du(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Y9(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vBt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Du(this.app))return Promise.reject(wT(this));const n=e?js(e):null;return n&&Mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Du(this.app)?Promise.reject(wT(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Du(this.app)?Promise.reject(wT(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Im(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OBt(this),n=new MBt(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s2("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await PBt(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Im(e)||this._popupRedirectResolver;Mt(n,this,"argument-error"),this.redirectPersistenceManager=await aS.create(this,[Im(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Mt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QBe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Du(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gBt(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bz(t){return js(t)}class MTe{constructor(e){this.auth=e,this.observer=null,this.addObserver=s3t(n=>this.observer=n)}get next(){return Mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let pce={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VBt(t){pce=t}function UBt(t){return pce.loadJS(t)}function qBt(){return pce.gapiScript}function jBt(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YBe(t,e){const n=r2(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Uw(r,e??{}))return s;$p(s,"already-initialized")}return n.initialize({options:e})}function BBt(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Im);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function XBe(t,e,n){const s=Bz(t);Mt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=JBe(e),{host:o,port:a}=$Bt(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Mt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Mt(Uw(u,s.config.emulator)&&Uw(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ig(o)?(Fz(`${i}//${o}${l}`),Vz("Auth",!0)):zBt()}function JBe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $Bt(t){const e=JBe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:FTe(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:FTe(o)}}}function FTe(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zBt(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gce{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cm("not implemented")}_getIdTokenResponse(e){return Cm("not implemented")}_linkToIdToken(e,n){return Cm("not implemented")}_getReauthenticationResolver(e){return Cm("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function cS(t,e){return TBt(t,"POST","/v1/accounts:signInWithIdp",hce(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HBt="http://localhost";class jw extends gce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$p("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new jw(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return cS(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,cS(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,cS(e,n)}buildRequest(){const e={requestUri:HBt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Q1(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mce{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o2 extends mce{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cm extends o2{constructor(){super("facebook.com")}static credential(e){return jw._fromParams({providerId:cm.PROVIDER_ID,signInMethod:cm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cm.credentialFromTaggedObject(e)}static credentialFromError(e){return cm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cm.credential(e.oauthAccessToken)}catch{return null}}}cm.FACEBOOK_SIGN_IN_METHOD="facebook.com";cm.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hf extends o2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jw._fromParams({providerId:Hf.PROVIDER_ID,signInMethod:Hf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hf.credentialFromTaggedObject(e)}static credentialFromError(e){return Hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Hf.credential(n,s)}catch{return null}}}Hf.GOOGLE_SIGN_IN_METHOD="google.com";Hf.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lm extends o2{constructor(){super("github.com")}static credential(e){return jw._fromParams({providerId:lm.PROVIDER_ID,signInMethod:lm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lm.credentialFromTaggedObject(e)}static credentialFromError(e){return lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lm.credential(e.oauthAccessToken)}catch{return null}}}lm.GITHUB_SIGN_IN_METHOD="github.com";lm.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class um extends o2{constructor(){super("twitter.com")}static credential(e,n){return jw._fromParams({providerId:um.PROVIDER_ID,signInMethod:um.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return um.credentialFromTaggedObject(e)}static credentialFromError(e){return um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return um.credential(n,s)}catch{return null}}}um.TWITTER_SIGN_IN_METHOD="twitter.com";um.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kk{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await dd._fromIdTokenResponse(e,s,r),o=VTe(s);return new kk({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=VTe(s);return new kk({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function VTe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class X9 extends og{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,X9.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new X9(e,n,s,r)}}function ZBe(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?X9._fromErrorAndOperation(t,r,e,s):r})}async function WBt(t,e,n=!1){const s=await BD(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kk._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function GBt(t,e,n=!1){const{auth:s}=t;if(Du(s.app))return Promise.reject(wT(s));const r="reauthenticate";try{const i=await BD(t,ZBe(s,r,e,t),n);Mt(i.idToken,s,"internal-error");const o=dce(i.idToken);Mt(o,s,"internal-error");const{sub:a}=o;return Mt(t.uid===a,s,"user-mismatch"),kk._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&$p(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function KBt(t,e,n=!1){if(Du(t.app))return Promise.reject(wT(t));const s="signIn",r=await ZBe(t,s,e),i=await kk._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function e5e(t,e,n,s){return js(t).onIdTokenChanged(e,n,s)}function t5e(t,e,n){return js(t).beforeAuthStateChanged(e,n)}function n5e(t,e,n,s){return js(t).onAuthStateChanged(e,n,s)}function iI(t){return js(t).signOut()}const J9="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class s5e{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(J9,"1"),this.storage.removeItem(J9),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const QBt=1e3,YBt=10;class r5e extends s5e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KBe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);xBt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,YBt):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},QBt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}r5e.type="LOCAL";const i5e=r5e;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o5e extends s5e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o5e.type="SESSION";const _ce=o5e;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XBt(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $z{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new $z(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await XBt(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$z.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yce(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JBt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=yce("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gp(){return window}function ZBt(t){gp().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a5e(){return typeof gp().WorkerGlobalScope<"u"&&typeof gp().importScripts=="function"}async function e5t(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t5t(){return navigator?.serviceWorker?.controller||null}function n5t(){return a5e()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c5e="firebaseLocalStorageDb",s5t=1,Z9="firebaseLocalStorage",l5e="fbase_key";class a2{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zz(t,e){return t.transaction([Z9],e?"readwrite":"readonly").objectStore(Z9)}function r5t(){const t=indexedDB.deleteDatabase(c5e);return new a2(t).toPromise()}function oJ(){const t=indexedDB.open(c5e,s5t);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Z9,{keyPath:l5e})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Z9)?e(s):(s.close(),await r5t(),e(await oJ()))})})}async function UTe(t,e,n){const s=zz(t,!0).put({[l5e]:e,value:n});return new a2(s).toPromise()}async function i5t(t,e){const n=zz(t,!1).get(e),s=await new a2(n).toPromise();return s===void 0?null:s.value}function qTe(t,e){const n=zz(t,!0).delete(e);return new a2(n).toPromise()}const o5t=800,a5t=3;class u5e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oJ(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>a5t)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a5e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$z._getInstance(n5t()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await e5t(),!this.activeServiceWorker)return;this.sender=new JBt(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t5t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oJ();return await UTe(e,J9,"1"),await qTe(e,J9),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UTe(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>i5t(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qTe(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=zz(r,!1).getAll();return new a2(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o5t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}u5e.type="LOCAL";const h5e=u5e;new i2(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d5e(t,e){return e?Im(e):(Mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vce extends gce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cS(e,this._buildIdpRequest())}_linkToIdToken(e,n){return cS(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return cS(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c5t(t){return KBt(t.auth,new vce(t),t.bypassAuthState)}function l5t(t){const{auth:e,user:n}=t;return Mt(n,e,"internal-error"),GBt(n,new vce(t),t.bypassAuthState)}async function u5t(t){const{auth:e,user:n}=t;return Mt(n,e,"internal-error"),WBt(n,new vce(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class f5e{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c5t;case"linkViaPopup":case"linkViaRedirect":return u5t;case"reauthViaPopup":case"reauthViaRedirect":return l5t;default:$p(this.auth,"internal-error")}}resolve(e){y_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){y_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h5t=new i2(2e3,1e4);async function p5e(t,e,n){if(Du(t.app))return Promise.reject(Ud(t,"operation-not-supported-in-this-environment"));const s=Bz(t);mBt(t,e,mce);const r=d5e(s,n);return new BE(s,"signInViaPopup",e,r).executeNotNull()}class BE extends f5e{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,BE.currentPopupAction&&BE.currentPopupAction.cancel(),BE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Mt(e,this.auth,"internal-error"),e}async onExecution(){y_(this.filter.length===1,"Popup operations only handle one event");const e=yce();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ud(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ud(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,BE.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ud(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h5t.get())};e()}}BE.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d5t="pendingRedirect",wV=new Map;class f5t extends f5e{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wV.get(this.auth._key());if(!e){try{const n=await p5t(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}wV.set(this.auth._key(),e)}return this.bypassAuthState||wV.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p5t(t,e){const n=_5t(e),s=m5t(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function g5t(t,e){wV.set(t._key(),e)}function m5t(t){return Im(t._redirectPersistence)}function _5t(t){return vV(d5t,t.config.apiKey,t.name)}async function y5t(t,e,n=!1){if(Du(t.app))return Promise.reject(wT(t));const s=Bz(t),r=d5e(s,e),i=await new f5t(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const v5t=600*1e3;class w5t{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b5t(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!g5e(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ud(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v5t&&this.cachedEventUids.clear(),this.cachedEventUids.has(jTe(e))}saveEventToCache(e){this.cachedEventUids.add(jTe(e)),this.lastProcessedEventTime=Date.now()}}function jTe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function g5e({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function b5t(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g5e(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function E5t(t,e={}){return Y1(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const T5t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C5t=/^https?/;async function I5t(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E5t(t);for(const n of e)try{if(S5t(n))return}catch{}$p(t,"unauthorized-domain")}function S5t(t){const e=sJ(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!C5t.test(n))return!1;if(T5t.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k5t=new i2(3e4,6e4);function BTe(){const t=gp().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function R5t(t){return new Promise((e,n)=>{function s(){BTe(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BTe(),n(Ud(t,"network-request-failed"))},timeout:k5t.get()})}if(gp().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gp().gapi?.load)s();else{const r=jBt("iframefcb");return gp()[r]=()=>{gapi.load?s():n(Ud(t,"network-request-failed"))},UBt(`${qBt()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw bV=null,e})}let bV=null;function A5t(t){return bV=bV||R5t(t),bV}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P5t=new i2(5e3,15e3),N5t="__/auth/iframe",x5t="emulator/auth/iframe",D5t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O5t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L5t(t){const e=t.config;Mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uce(e,x5t):`https://${t.config.authDomain}/${N5t}`,s={apiKey:e.apiKey,appName:t.name,v:Pb},r=O5t.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Q1(s).slice(1)}`}async function M5t(t){const e=await A5t(t),n=gp().gapi;return Mt(n,t,"internal-error"),e.open({where:document.body,url:L5t(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D5t,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ud(t,"network-request-failed"),a=gp().setTimeout(()=>{i(o)},P5t.get());function l(){gp().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const F5t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V5t=500,U5t=600,q5t="_blank",j5t="http://localhost";class $Te{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B5t(t,e,n,s=V5t,r=U5t){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...F5t,width:s.toString(),height:r.toString(),top:i,left:o},u=bc().toLowerCase();n&&(a=$Be(u)?q5t:n),jBe(u)&&(e=e||j5t,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(NBt(u)&&a!=="_self")return $5t(e||"",a),new $Te(null);const d=window.open(e||"",a,h);Mt(d,t,"popup-blocked");try{d.focus()}catch{}return new $Te(d)}function $5t(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z5t="__/auth/handler",H5t="emulator/auth/handler",W5t=encodeURIComponent("fac");async function zTe(t,e,n,s,r,i){Mt(t.config.authDomain,t,"auth-domain-config-required"),Mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Pb,eventId:r};if(e instanceof mce){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XX(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof o2){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${W5t}=${encodeURIComponent(l)}`:"";return`${G5t(t)}?${Q1(a).slice(1)}${u}`}function G5t({config:t}){return t.emulator?uce(t,H5t):`https://${t.authDomain}/${z5t}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uG="webStorageSupport";class K5t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_ce,this._completeRedirectFn=y5t,this._overrideRedirectResult=g5t}async _openPopup(e,n,s,r){y_(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await zTe(e,n,s,sJ(),r);return B5t(e,i,yce())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await zTe(e,n,s,sJ(),r);return ZBt(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(y_(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await M5t(e),s=new w5t(e);return n.register("authEvent",r=>(Mt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uG,{type:uG},s=>{const r=s?.[0]?.[uG];r!==void 0&&n(!!r),$p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I5t(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KBe()||BBe()||fce()}}const m5e=K5t;var HTe="@firebase/auth",WTe="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q5t{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Y5t(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X5t(t){qw(new m_("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Mt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QBe(t)},u=new FBt(s,r,i,l);return BBt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),qw(new m_("auth-internal",e=>{const n=Bz(e.getProvider("auth").getImmediate());return(s=>new Q5t(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sh(HTe,WTe,Y5t(t)),Sh(HTe,WTe,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J5t=300,Z5t=TBe("authIdTokenMaxAge")||J5t;let GTe=null;const e$t=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Z5t)return;const r=n?.token;GTe!==r&&(GTe=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function _5e(t=jz()){const e=r2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YBe(t,{popupRedirectResolver:m5e,persistence:[h5e,i5e,_ce]}),s=TBe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=e$t(i.toString());t5e(n,o,()=>o(n.currentUser)),e5e(n,a=>o(a))}}const r=bBe("auth");return r&&XBe(n,`http://${r}`),n}function t$t(){return document.getElementsByTagName("head")?.[0]??document}VBt({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ud("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",t$t().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X5t("Browser");var KTe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ov,y5e;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),G=2;G<arguments.length;G++)b[G-2]=arguments[G];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),T=T.j(E).add(u(b))):(T=T.j(y),T=T.add(u(b)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=O(this,I),R(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(R(this))return R(I)?P(this).j(P(I)):P(P(this).j(I));if(R(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,G=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*G,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*G,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(R(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(R(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=W(y),T=W(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=u(y),b=E.j(v);R(b)||0<b.l(I);)y-=T,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,y5e=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ov=o}).apply(typeof KTe<"u"?KTe:typeof self<"u"?self:typeof window<"u"?window:{});var jF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v5e,DA,w5e,EV,aJ,b5e,E5e,T5e;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jF=="object"&&jF];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var D=g++;return{value:f(D,c[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,D){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return f.prototype[N].apply(_,z)}}function R(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,D=_.length||0;c.length=N+D;for(let z=0;z<D;z++)c[N+z]=_[z]}else c.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=ct;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class G{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ct=new G,Ke=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(Qe)}};var Qe=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}de=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function it(c,f){if(he.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(W){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&it.aa.h.call(this)}}w(it,he);var Fe={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Q=0;function K(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Q,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function k(c){this.src=c,this.g={},this.h=0}k.prototype.add=function(c,f,g,_,N){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=A(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new K(f,this.src,D,!!_,N),f.fa=g,c.push(f)),f};function C(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=N)&&Array.prototype.splice.call(_,N,1),D&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function A(c,f,g,_){for(var N=0;N<c.length;++N){var D=c[N];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(c,f[D],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,D){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,le=Z(c);if(le||(c[x]=le=new k(c)),g=le.add(f,g,_,z,D),g.proxy)return g;if(_=H(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)qt||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Y(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function H(){function c(g){return f.call(c.src,c.listener,g)}const f=X;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(c,f[D],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(D=c.g[f],g=A(D,g,_,N),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=A(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])C(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Y(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Y(c){return c in L?L[c]:L[c]="on"+c}function X(c,f){if(c.da)c=!0;else{f=new it(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof k?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ge.call(this),this.i=new k(this),this.M=this,this.F=null}w(re,ge),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new he(f,c);else if(f instanceof he)f.target=f.target||c;else{var N=f;f=new he(_,c),T(f,N)}if(N=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];N=fe(z,_,!0,f)&&N}if(z=f.g=c,N=fe(z,_,!0,f)&&N,N=fe(z,_,!1,f)&&N,g)for(D=0;D<g.length;D++)z=f.g=g[D],N=fe(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function fe(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var le=z.listener,ke=z.ha||z.src;z.fa&&C(c.i,z),N=le.call(ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function Se(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ve(c){c.g=Se(()=>{c.g=null,c.i&&(c.i=!1,Ve(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class We extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(c){ge.call(this),this.h=c,this.g={}}w(Ge,ge);var ss=[];function Ue(c){J(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),Ue(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,rs=a.JSON.parse,Pr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xr(){}Xr.prototype.h=null;function ll(c){return c.h||(c.h=c.i())}function ul(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){he.call(this,"d")}w(Xi,he);function Ji(){he.call(this,"c")}w(Ji,he);var cn={},hl=null;function Nr(){return hl=hl||new re}cn.La="serverreachability";function dl(c){he.call(this,cn.La,c)}w(dl,he);function Ss(c){const f=Nr();se(f,new dl(f))}cn.STAT_EVENT="statevent";function fl(c,f){he.call(this,cn.STAT_EVENT,c),this.stat=f}w(fl,he);function Oe(c){const f=Nr();se(f,new fl(f,c))}cn.Ma="timingevent";function pl(c,f){he.call(this,cn.Ma,c),this.size=f}w(pl,he);function ks(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function lg(c,f,g,_,N,D){c.info(function(){if(c.g)if(D)for(var z="",le=D.split("&"),ke=0;ke<le.length;ke++){var ce=le[ke].split("=");if(1<ce.length){var Re=ce[0];ce=ce[1];var Me=Re.split("_");z=2<=Me.length&&Me[1]=="type"?z+(Re+"="+ce+"&"):z+(Re+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function ug(c,f,g,_,N,D,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+D+" "+z})}function Hn(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dg(c,g)+(_?" "+_:"")})}function hg(c,f){c.info(function(){return"TIMEOUT: "+f})}Rs.prototype.info=function(){};function dg(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var D=N[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Le(g)}catch{return f}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Dr(){}w(Dr,Xr),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Zi=new Dr;function jt(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var _l={},eo={};function to(c,f,g){c.L=1,c.v=Fr(gt(f)),c.m=g,c.P=!0,yl(c,null)}function yl(c,f){c.F=Date.now(),Or(c),c.A=gt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),xl(g.i,"t",_),c.C=0,g=c.j.J,c.h=new ml,c.g=Yl(c.j,g?f:null,!c.m),0<c.O&&(c.M=new We(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ss[0]=N.toString()),N=ss);for(var D=0;D<N.length;D++){var z=U(g,N[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ss(),lg(c.i,c.u,c.A,c.l,c.R,c.m)}jt.prototype.ca=function(c){c=c.target;const f=this.M;f&&mt(c)==3?f.j():this.Y(c)},jt.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mt(this.g);var f=this.g.Ba();const Kn=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Me!=4||f==7||(f==8||0>=Kn?Ss(3):Ss(2)),no(this);var g=this.g.Z();this.X=g;t:if(vl(this)){var _=Ul(this.g);c="";var N=_.length,D=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),As(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(D&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ug(this.i,this.u,this.A,this.l,this.R,Me,g),this.o){if(this.T&&!this.K){t:{if(this.g){var le,ke=this.g;if((le=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(le)){var ce=le;break t}}ce=null}if(g=ce)Hn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Oe(12),ln(this),As(this);break e}}if(this.P){g=!0;let Ye;for(;!this.J&&this.C<z.length;)if(Ye=fg(this,z),Ye==eo){Me==4&&(this.s=4,Oe(14),g=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==_l){this.s=4,Oe(15),Hn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hn(this.i,this.l,Ye,null),so(this,Ye);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)Hn(this.i,this.l,z,"[Invalid Chunked Response]"),ln(this),As(this);else if(0<z.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),lo(Re),Re.M=!0,Oe(11))}}else Hn(this.i,this.l,z,null),so(this,z);Me==4&&ln(this),this.o&&!this.J&&(Me==4?Wl(this.j,this):(this.o=!1,Or(this)))}else Pg(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),ln(this),As(this)}}}catch{}finally{}};function vl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fg(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?eo:(g=Number(f.substring(g,_)),isNaN(g)?_l:(_+=1,_+g>f.length?eo:(f=f.slice(_,_+g),c.C=_+g,f)))}jt.prototype.cancel=function(){this.J=!0,ln(this)};function Or(c){c.S=Date.now()+c.I,wl(c,c.I)}function wl(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ks(p(c.ba,c),f)}function no(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hg(this.i,this.A),this.L!=2&&(Ss(),Oe(17)),ln(this),this.s=2,As(this)):wl(this,this.S-c)};function As(c){c.j.G==0||c.J||Wl(c.j,c)}function ln(c){no(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ue(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function so(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ro(g.h,c))){if(!c.K&&ro(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$r(g),jr(g);else break e;co(g),Oe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=ks(p(g.Za,g),6e3));if(1>=Tl(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hn(g,11)}else if((c.K||g.g==c)&&$r(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ce=N[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Re=ce[3];Re!=null&&(g.la=Re,g.j.info("VER="+g.la));const Me=ce[4];Me!=null&&(g.Aa=Me,g.j.info("SVER="+g.Aa));const Kn=ce[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(_=1.5*Kn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ye=c.g;if(Ye){const Hr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var D=_.h;D.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(io(D,D.h),D.h=null))}if(_.D){const uo=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(_.ya=uo,ue(_.I,_.D,uo))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=Ql(_,_.J?_.ia:null,_.W),z.K){Cl(_.h,z);var le=z,ke=_.L;ke&&(le.I=ke),le.B&&(no(le),Or(le)),_.g=z}else zl(_);0<g.i.length&&Br(g)}else ce[0]!="stop"&&ce[0]!="close"||hn(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?hn(g,7):ao(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ss(4)}catch{}}var pg=class{constructor(c,f){this.g=c,this.map=f}};function bl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tl(c){return c.h?1:c.g?c.g.size:0}function ro(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function io(c,f){c.g?c.g.add(f):c.h=f}function Cl(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return R(c.i)}function gg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function mg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function Sl(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=mg(c),_=gg(c),N=_.length,D=0;D<N;D++)f.call(void 0,_[D],g&&g[D],c)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var D=c[g].substring(0,_);N=c[g].substring(_+1)}else D=c[g];f(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof un){this.h=c.h,Lr(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var f=c.i,g=new xs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Rl(this,g),this.m=c.m}else c&&(f=String(c).match(kl))?(this.h=!1,Lr(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Mr(this,f[4]),this.l=Ps(f[5]||"",!0),Rl(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}un.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ns(f,Al,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ns(f,Al,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ns(g,g.charAt(0)=="/"?wg:vg,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ns(g,Eg)),c.join("")};function gt(c){return new un(c)}function Lr(c,f,g){c.j=g?Ps(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Rl(c,f,g){f instanceof xs?(c.i=f,Tg(c.i,c.h)):(g||(f=Ns(f,bg)),c.i=new xs(f,c.h))}function ue(c,f,g){c.i.set(f,g)}function Fr(c){return ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ps(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ns(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,yg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,vg=/[#\?:]/g,wg=/[#\?]/g,bg=/[#\?@]/g,Eg=/#/g;function xs(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&_g(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xs.prototype,t.add=function(c,f){Bt(this),this.i=null,c=Wn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Pl(c,f){Bt(c),f=Wn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nl(c,f){return Bt(c),f=Wn(c,f),c.g.has(f)}t.forEach=function(c,f){Bt(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){Bt(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let D=0;D<N.length;D++)g.push(f[_])}return g},t.V=function(c){Bt(this);let f=[];if(typeof c=="string")Nl(this,c)&&(f=f.concat(this.g.get(Wn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Bt(this),this.i=null,c=Wn(this,c),Nl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xl(c,f,g){Pl(c,f),0<g.length&&(c.i=null,c.g.set(Wn(c,f),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=D;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function Wn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Tg(c,f){f&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(Pl(this,_),xl(this,N,g))},c)),c.j=f}function Cg(c,f){const g=new Rs;if(a.Image){const _=new Image;_.onload=m($t,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m($t,g,"TestLoadImage: error",!1,f,_),_.onabort=m($t,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m($t,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ig(c,f){const g=new Rs,_=new AbortController,N=setTimeout(()=>{_.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(D=>{clearTimeout(N),D.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),$t(g,"TestPingServer: error",!1,f)})}function $t(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Sg(){this.g=new Pr}function kg(c,f,g){const _=g||"";try{Sl(c,function(N,D){let z=N;u(N)&&(z=Le(N)),f.push(_+D+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vr,Xr),Vr.prototype.g=function(){return new Ur(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ur(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ur,re),t=Ur.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ds(this):Os(this),this.readyState==3&&Dl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let f="";return J(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function oo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ol(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ue(c,f,g))}function pe(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pe,re);var Rg=/^https?$/i,Ag=["POST","PUT"];t=pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ll(this.o):ll(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(D){Ll(this,D);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Ll(this,D)}};function Ll(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Ml(c),qr(c)}function Ml(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mt(c)!=4||c.Z()!=2)){if(c.u&&mt(c)==4)Se(c.Ea,0,c);else if(se(c,"readystatechange"),mt(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(kl)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Rg.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var D=2<mt(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Ml(c)}}finally{qr(c)}}}}function qr(c,f){if(c.g){Vl(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Vl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rs(f)}};function Ul(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pg(c){const f={};c=(c.g&&2<=mt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[N]||[];f[N]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function ql(c){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bl(c&&c.concurrentRequestLimit),this.Da=new Sg,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ql.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Oe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Ql(this,null,this.W),Br(this)};function ao(c){if(jl(c),c.G==3){var f=c.U++,g=gt(c.I);if(ue(g,"SID",c.K),ue(g,"RID",f),ue(g,"TYPE","terminate"),Ms(c,g),f=new jt(c,c.j,f),f.L=2,f.v=Fr(gt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Or(f)}Kl(c)}function jr(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function jl(c){jr(c),c.u&&(a.clearTimeout(c.u),c.u=null),$r(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Br(c){if(!El(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.B=0}}function Ng(c,f){return Tl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ks(p(c.Ga,c,f),Gl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new jt(this,this.j,c);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(N.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$l(this,N,f),g=gt(this.I),ue(g,"RID",c),ue(g,"CVER",22),this.D&&ue(g,"X-HTTP-Session-Id",this.D),Ms(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(Ol(D)))+"&"+f:this.m&&oo(g,this.m,D)),io(this.h,N),this.Ua&&ue(g,"TYPE","init"),this.P?(ue(g,"$req",f),ue(g,"SID","null"),N.T=!0,to(N,g,null)):to(N,g,f),this.G=2}}else this.G==3&&(c?Bl(this,c):this.i.length==0||El(this.h)||Bl(this))};function Bl(c,f){var g;f?g=f.l:g=c.U++;const _=gt(c.I);ue(_,"SID",c.K),ue(_,"RID",g),ue(_,"AID",c.T),Ms(c,_),c.m&&c.o&&oo(_,c.m,c.o),g=new jt(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$l(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),io(c.h,g),to(g,_,f)}function Ms(c,f){c.H&&J(c.H,function(g,_){ue(f,_,g)}),c.l&&Sl({},function(g,_){ue(f,_,g)})}function $l(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=N[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let le=!0;for(let ke=0;ke<g;ke++){let ce=N[ke].g;const Re=N[ke].map;if(ce-=D,0>ce)D=Math.max(0,N[ke].g-100),le=!1;else try{kg(Re,z,"req"+ce+"_")}catch{_&&_(Re)}}if(le){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function zl(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ks(p(c.Fa,c),Gl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ks(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),jr(this),Hl(this))};function lo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hl(c){c.g=new jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=gt(c.qa);ue(f,"RID","rpc"),ue(f,"SID",c.K),ue(f,"AID",c.T),ue(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ue(f,"TO",c.ja),ue(f,"TYPE","xmlhttp"),Ms(c,f),c.m&&c.o&&oo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Fr(gt(f)),g.m=null,g.P=!0,yl(g,c)}t.Za=function(){this.C!=null&&(this.C=null,jr(this),co(this),Oe(19))};function $r(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Wl(c,f){var g=null;if(c.g==f){$r(c),lo(c),c.g=null;var _=2}else if(ro(c.h,f))g=f.D,Cl(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Nr(),se(_,new pl(_,g)),Br(c)}else zl(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&Ng(c,f)||_==2&&co(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:hn(c,5);break;case 4:hn(c,10);break;case 3:hn(c,6);break;default:hn(c,2)}}}function Gl(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function hn(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new un(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lr(_,"https"),Fr(_),N?Cg(_.toString(),g):Ig(_.toString(),g)}else Oe(2);c.G=0,c.l&&c.l.sa(f),Kl(c),jl(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const f=Il(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ql(c,f,g){var _=g instanceof un?gt(g):new un(g);if(_.g!="")f&&(_.g=f+"."+_.g),Mr(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var D=new un(null);_&&Lr(D,_),f&&(D.g=f),N&&Mr(D,N),g&&(D.l=g),_=D}return g=c.D,f=c.ya,g&&f&&ue(_,g,f),ue(_,"VER",c.la),Ms(c,_),_}function Yl(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new pe(new Vr({eb:g})):new pe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(c,f){return new qe(c,f)};function qe(c,f){re.call(this),this.g=new ql(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gn(this)}w(qe,re),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){ao(this.g)},qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Le(c),c=g);f.i.push(new pg(f.Ya++,c)),f.G==3&&Br(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,qe.aa.N.call(this)};function Jl(c){Xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(Jl,Xi);function Zl(){Ji.call(this),this.status=1}w(Zl,Ji);function Gn(c){this.g=c}w(Gn,Xl),Gn.prototype.ua=function(){se(this.g,"a")},Gn.prototype.ta=function(c){se(this.g,new Jl(c))},Gn.prototype.sa=function(c){se(this.g,new Zl)},Gn.prototype.ra=function(){se(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,T5e=function(){return new zr},E5e=function(){return Nr()},b5e=cn,aJ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,EV=xr,gl.COMPLETE="complete",w5e=gl,ul.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",re.prototype.listen=re.prototype.K,DA=ul,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,v5e=pe}).apply(typeof jF<"u"?jF:typeof self<"u"?self:typeof window<"u"?window:{});const QTe="@firebase/firestore",YTe="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ga{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ga.UNAUTHENTICATED=new Ga(null),Ga.GOOGLE_CREDENTIALS=new Ga("google-credentials-uid"),Ga.FIRST_PARTY=new Ga("first-party-uid"),Ga.MOCK_USER=new Ga("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let X1="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lC=new qz("@firebase/firestore");function oI(){return lC.logLevel}function ze(t,...e){if(lC.logLevel<=En.DEBUG){const n=e.map(wce);lC.debug(`Firestore (${X1}): ${t}`,...n)}}function v_(t,...e){if(lC.logLevel<=En.ERROR){const n=e.map(wce);lC.error(`Firestore (${X1}): ${t}`,...n)}}function Rk(t,...e){if(lC.logLevel<=En.WARN){const n=e.map(wce);lC.warn(`Firestore (${X1}): ${t}`,...n)}}function wce(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ct(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,C5e(t,s,n)}function C5e(t,e,n){let s=`FIRESTORE (${X1}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw v_(s),new Error(s)}function Ts(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||C5e(e,r,s)}function Jt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends og{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lv{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I5e{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ga.UNAUTHENTICATED))}shutdown(){}}class s$t{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r$t{constructor(e){this.t=e,this.currentUser=Ga.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ts(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Lv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lv,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lv)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ts(typeof s.accessToken=="string",31837,{l:s}),new I5e(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ts(e===null||typeof e=="string",2055,{h:e}),new Ga(e)}}class i$t{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ga.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o$t{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new i$t(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ga.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XTe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a$t{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Du(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ts(this.o===void 0,3512);const s=i=>{i.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new XTe(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ts(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new XTe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function c$t(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bce{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=c$t(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Dn(t,e){return t<e?-1:t>e?1:0}function cJ(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return hG(r)===hG(i)?Dn(r,i):hG(r)?1:-1}return Dn(t.length,e.length)}const l$t=55296,u$t=57343;function hG(t){const e=t.charCodeAt(0);return e>=l$t&&e<=u$t}function Ak(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JTe="__name__";class Of{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ct(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ct(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Of.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Of?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Of.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Dn(e.length,n.length)}static compareSegments(e,n){const s=Of.isNumericId(e),r=Of.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Of.extractNumericId(e).compare(Of.extractNumericId(n)):cJ(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ov.fromString(e.substring(4,e.length-2))}}class Qr extends Of{construct(e,n,s){return new Qr(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new et(Te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Qr(n)}static emptyPath(){return new Qr([])}}const h$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wa extends Of{construct(e,n,s){return new wa(e,n,s)}static isValidIdentifier(e){return h$t.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wa.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===JTe}static keyField(){return new wa([JTe])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new et(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new et(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new et(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wa(n)}static emptyPath(){return new wa([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dt{constructor(e){this.path=e}static fromPath(e){return new dt(Qr.fromString(e))}static fromName(e){return new dt(Qr.fromString(e).popFirst(5))}static empty(){return new dt(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new Qr(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function d$t(t,e,n){if(!n)throw new et(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f$t(t,e,n,s){if(e===!0&&s===!0)throw new et(Te.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZTe(t){if(!dt.isDocumentKey(t))throw new et(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S5e(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ece(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ct(12329,{type:typeof t})}function qd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ece(t);throw new et(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ui(t,e){const n={typeString:t};return e&&(n.value=e),n}function c2(t,e){if(!S5e(t))throw new et(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new et(Te.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eCe=-62135596800,tCe=1e6;class Tr{static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*tCe);return new Tr(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eCe)throw new et(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tCe}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(c2(e,Tr._jsonSchema))return new Tr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eCe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tr._jsonSchemaVersion="firestore/timestamp/1.0",Tr._jsonSchema={type:Ui("string",Tr._jsonSchemaVersion),seconds:Ui("number"),nanoseconds:Ui("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let on=class TV{static fromTimestamp(e){return new TV(e)}static min(){return new TV(new Tr(0,0))}static max(){return new TV(new Tr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $D=-1;function p$t(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=on.fromTimestamp(s===1e9?new Tr(n+1,0):new Tr(n,s));return new Bw(r,dt.empty(),e)}function g$t(t){return new Bw(t.readTime,t.key,$D)}class Bw{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Bw(on.min(),dt.empty(),$D)}static max(){return new Bw(on.max(),dt.empty(),$D)}}function m$t(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=dt.comparator(t.documentKey,e.documentKey),n!==0?n:Dn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function J1(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==_$t)throw t;ze("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,s)=>{n(e)})}static reject(e){return new ye((n,s)=>{s(e)})}static waitFor(e){return new ye((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=ye.resolve(!1);for(const s of e)n=n.next(r=>r?ye.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new ye((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new ye((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function v$t(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Z1(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hz{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hz.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tce=-1;function Wz(t){return t==null}function eq(t){return t===0&&1/t==-1/0}function w$t(t){return typeof t=="number"&&Number.isInteger(t)&&!eq(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k5e="";function b$t(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nCe(e)),e=E$t(t.get(n),e);return nCe(e)}function E$t(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case k5e:n+="";break;default:n+=i}}return n}function nCe(t){return t+k5e+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sCe(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nb(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R5e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Gi=class lJ{constructor(e,n){this.comparator=e,this.root=n||Mv.EMPTY}insert(e,n){return new lJ(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mv.BLACK,null,null))}remove(e){return new lJ(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mv.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new BF(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new BF(this.root,e,this.comparator,!1)}getReverseIterator(){return new BF(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new BF(this.root,e,this.comparator,!0)}},BF=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Mv=class Hg{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Hg.RED,this.left=r??Hg.EMPTY,this.right=i??Hg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Hg(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Hg.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ct(27949);return e+(this.isRed()?0:1)}};Mv.EMPTY=null,Mv.RED=!0,Mv.BLACK=!1;Mv.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new Mv(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uo{constructor(e){this.comparator=e,this.data=new Gi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rCe(this.data.getIterator())}getIteratorFrom(e){return new rCe(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Uo(this.comparator);return n.data=e,n}}class rCe{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hu{constructor(e){this.fields=e,e.sort(wa.comparator)}static empty(){return new Hu([])}unionWith(e){let n=new Uo(wa.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Hu(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ak(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A5e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ka{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new A5e("Invalid base64 string: "+r):r}}(e);return new ka(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new ka(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ka.EMPTY_BYTE_STRING=new ka("");const T$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $w(t){if(Ts(!!t,39018),typeof t=="string"){let e=0;const n=T$t.exec(t);if(Ts(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Si(t.seconds),nanos:Si(t.nanos)}}function Si(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zw(t){return typeof t=="string"?ka.fromBase64String(t):ka.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const P5e="server_timestamp",N5e="__type__",x5e="__previous_value__",D5e="__local_write_time__";function Cce(t){return(t?.mapValue?.fields||{})[N5e]?.stringValue===P5e}function Gz(t){const e=t.mapValue.fields[x5e];return Cce(e)?Gz(e):e}function zD(t){const e=$w(t.mapValue.fields[D5e].timestampValue);return new Tr(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C$t{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const tq="(default)";class HD{constructor(e,n){this.projectId=e,this.database=n||tq}static empty(){return new HD("","")}get isDefaultDatabase(){return this.database===tq}isEqual(e){return e instanceof HD&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const O5e="__type__",I$t="__max__",$F={mapValue:{}},L5e="__vector__",nq="value";function Hw(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cce(t)?4:k$t(t)?9007199254740991:S$t(t)?10:11:Ct(28295,{value:t})}function zp(t,e){if(t===e)return!0;const n=Hw(t);if(n!==Hw(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zD(t).isEqual(zD(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=$w(s.timestampValue),o=$w(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return zw(s.bytesValue).isEqual(zw(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Si(s.geoPointValue.latitude)===Si(r.geoPointValue.latitude)&&Si(s.geoPointValue.longitude)===Si(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Si(s.integerValue)===Si(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Si(s.doubleValue),o=Si(r.doubleValue);return i===o?eq(i)===eq(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Ak(t.arrayValue.values||[],e.arrayValue.values||[],zp);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(sCe(i)!==sCe(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!zp(i[a],o[a])))return!1;return!0}(t,e);default:return Ct(52216,{left:t})}}function WD(t,e){return(t.values||[]).find(n=>zp(n,e))!==void 0}function Pk(t,e){if(t===e)return 0;const n=Hw(t),s=Hw(e);if(n!==s)return Dn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Si(r.integerValue||r.doubleValue),a=Si(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return iCe(t.timestampValue,e.timestampValue);case 4:return iCe(zD(t),zD(e));case 5:return cJ(t.stringValue,e.stringValue);case 6:return function(r,i){const o=zw(r),a=zw(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Dn(o[l],a[l]);if(u!==0)return u}return Dn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Dn(Si(r.latitude),Si(i.latitude));return o!==0?o:Dn(Si(r.longitude),Si(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oCe(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[nq]?.arrayValue,u=a[nq]?.arrayValue,h=Dn(l?.values?.length||0,u?.values?.length||0);return h!==0?h:oCe(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===$F.mapValue&&i===$F.mapValue)return 0;if(r===$F.mapValue)return 1;if(i===$F.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=cJ(a[h],u[h]);if(d!==0)return d;const p=Pk(o[a[h]],l[u[h]]);if(p!==0)return p}return Dn(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Ct(23264,{he:n})}}function iCe(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dn(t,e);const n=$w(t),s=$w(e),r=Dn(n.seconds,s.seconds);return r!==0?r:Dn(n.nanos,s.nanos)}function oCe(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Pk(n[r],s[r]);if(i)return i}return Dn(n.length,s.length)}function Nk(t){return uJ(t)}function uJ(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=$w(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return zw(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return dt.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=uJ(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${uJ(e.fields[i])}`;return s+"}"}(t.mapValue):Ct(61005,{value:t})}function CV(t){switch(Hw(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gz(t);return e?16+CV(e):16;case 5:return 2*t.stringValue.length;case 6:return zw(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+CV(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Nb(n.fields,(r,i)=>{s+=r.length+CV(i)}),s}(t.mapValue);default:throw Ct(13486,{value:t})}}function hJ(t){return!!t&&"integerValue"in t}function Ice(t){return!!t&&"arrayValue"in t}function aCe(t){return!!t&&"nullValue"in t}function cCe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function IV(t){return!!t&&"mapValue"in t}function S$t(t){return(t?.mapValue?.fields||{})[O5e]?.stringValue===L5e}function yN(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Nb(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=yN(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yN(t.arrayValue.values[n]);return e}return{...t}}function k$t(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===I$t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cu{constructor(e){this.value=e}static empty(){return new cu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!IV(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yN(n)}setAll(e){let n=wa.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=yN(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());IV(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zp(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];IV(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Nb(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new cu(yN(this.value))}}function M5e(t){const e=[];return Nb(t.fields,(n,s)=>{const r=new wa([n]);if(IV(s)){const i=M5e(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Hu(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ic{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ic(e,0,on.min(),on.min(),on.min(),cu.empty(),0)}static newFoundDocument(e,n,s,r){return new ic(e,1,n,on.min(),s,r,0)}static newNoDocument(e,n){return new ic(e,2,n,on.min(),on.min(),cu.empty(),0)}static newUnknownDocument(e,n){return new ic(e,3,n,on.min(),on.min(),cu.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(on.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=on.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ic&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ic(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sq{constructor(e,n){this.position=e,this.inclusive=n}}function lCe(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=dt.comparator(dt.fromName(o.referenceValue),n.key):s=Pk(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function uCe(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zp(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rq{constructor(e,n="asc"){this.field=e,this.dir=n}}function R$t(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F5e{}class Po extends F5e{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new P$t(e,n,s):n==="array-contains"?new D$t(e,s):n==="in"?new O$t(e,s):n==="not-in"?new L$t(e,s):n==="array-contains-any"?new M$t(e,s):new Po(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new N$t(e,s):new x$t(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pk(n,this.value)):n!==null&&Hw(this.value)===Hw(n)&&this.matchesComparison(Pk(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hp extends F5e{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Hp(e,n)}matches(e){return V5e(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function V5e(t){return t.op==="and"}function U5e(t){return A$t(t)&&V5e(t)}function A$t(t){for(const e of t.filters)if(e instanceof Hp)return!1;return!0}function dJ(t){if(t instanceof Po)return t.field.canonicalString()+t.op.toString()+Nk(t.value);if(U5e(t))return t.filters.map(e=>dJ(e)).join(",");{const e=t.filters.map(n=>dJ(n)).join(",");return`${t.op}(${e})`}}function q5e(t,e){return t instanceof Po?function(n,s){return s instanceof Po&&n.op===s.op&&n.field.isEqual(s.field)&&zp(n.value,s.value)}(t,e):t instanceof Hp?function(n,s){return s instanceof Hp&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&q5e(i,s.filters[o]),!0):!1}(t,e):void Ct(19439)}function j5e(t){return t instanceof Po?function(e){return`${e.field.canonicalString()} ${e.op} ${Nk(e.value)}`}(t):t instanceof Hp?function(e){return e.op.toString()+" {"+e.getFilters().map(j5e).join(" ,")+"}"}(t):"Filter"}class P$t extends Po{constructor(e,n,s){super(e,n,s),this.key=dt.fromName(s.referenceValue)}matches(e){const n=dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class N$t extends Po{constructor(e,n){super(e,"in",n),this.keys=B5e("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x$t extends Po{constructor(e,n){super(e,"not-in",n),this.keys=B5e("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B5e(t,e){return(e.arrayValue?.values||[]).map(n=>dt.fromName(n.referenceValue))}class D$t extends Po{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ice(n)&&WD(n.arrayValue,this.value)}}class O$t extends Po{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&WD(this.value.arrayValue,n)}}class L$t extends Po{constructor(e,n){super(e,"not-in",n)}matches(e){if(WD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!WD(this.value.arrayValue,n)}}class M$t extends Po{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ice(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>WD(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F$t{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function hCe(t,e=null,n=[],s=[],r=null,i=null,o=null){return new F$t(t,e,n,s,r,i,o)}function Sce(t){const e=Jt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>dJ(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Wz(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Nk(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Nk(s)).join(",")),e.Te=n}return e.Te}function kce(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R$t(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!q5e(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uCe(t.startAt,e.startAt)&&uCe(t.endAt,e.endAt)}function fJ(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kz{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function V$t(t,e,n,s,r,i,o,a){return new Kz(t,e,n,s,r,i,o,a)}function Qz(t){return new Kz(t)}function dCe(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function U$t(t){return t.collectionGroup!==null}function vN(t){const e=Jt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new Uo(wa.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new rq(r,s))}),n.has(wa.keyField().canonicalString())||e.Ie.push(new rq(wa.keyField(),s))}return e.Ie}function mp(t){const e=Jt(t);return e.Ee||(e.Ee=q$t(e,vN(t))),e.Ee}function q$t(t,e){if(t.limitType==="F")return hCe(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new rq(r.field,i)});const n=t.endAt?new sq(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new sq(t.startAt.position,t.startAt.inclusive):null;return hCe(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function pJ(t,e,n){return new Kz(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yz(t,e){return kce(mp(t),mp(e))&&t.limitType===e.limitType}function $5e(t){return`${Sce(mp(t))}|lt:${t.limitType}`}function aI(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>j5e(s)).join(", ")}]`),Wz(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Nk(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Nk(s)).join(",")),`Target(${n})`}(mp(t))}; limitType=${t.limitType})`}function Xz(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):dt.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of vN(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=lCe(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,vN(n),s)||n.endAt&&!function(r,i,o){const a=lCe(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,vN(n),s))}(t,e)}function j$t(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function z5e(t){return(e,n)=>{let s=!1;for(const r of vN(t)){const i=B$t(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function B$t(t,e,n){const s=t.field.isKeyField()?dt.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Pk(a,l):Ct(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Ct(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JC{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Nb(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return R5e(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $$t=new Gi(dt.comparator);function w_(){return $$t}const H5e=new Gi(dt.comparator);function OA(...t){let e=H5e;for(const n of t)e=e.insert(n.key,n);return e}function W5e(t){let e=H5e;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function $E(){return wN()}function G5e(){return wN()}function wN(){return new JC(t=>t.toString(),(t,e)=>t.isEqual(e))}const z$t=new Gi(dt.comparator),H$t=new Uo(dt.comparator);function jn(...t){let e=H$t;for(const n of t)e=e.add(n);return e}const W$t=new Uo(Dn);function G$t(){return W$t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rce(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eq(e)?"-0":e}}function K5e(t){return{integerValue:""+t}}function K$t(t,e){return w$t(e)?K5e(e):Rce(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jz{constructor(){this._=void 0}}function Q$t(t,e,n){return t instanceof GD?function(s,r){const i={fields:{[N5e]:{stringValue:P5e},[D5e]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Cce(r)&&(r=Gz(r)),r&&(i.fields[x5e]=r),{mapValue:i}}(n,e):t instanceof KD?Y5e(t,e):t instanceof QD?X5e(t,e):function(s,r){const i=Q5e(s,r),o=fCe(i)+fCe(s.Ae);return hJ(i)&&hJ(s.Ae)?K5e(o):Rce(s.serializer,o)}(t,e)}function Y$t(t,e,n){return t instanceof KD?Y5e(t,e):t instanceof QD?X5e(t,e):n}function Q5e(t,e){return t instanceof iq?function(n){return hJ(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class GD extends Jz{}class KD extends Jz{constructor(e){super(),this.elements=e}}function Y5e(t,e){const n=J5e(e);for(const s of t.elements)n.some(r=>zp(r,s))||n.push(s);return{arrayValue:{values:n}}}class QD extends Jz{constructor(e){super(),this.elements=e}}function X5e(t,e){let n=J5e(e);for(const s of t.elements)n=n.filter(r=>!zp(r,s));return{arrayValue:{values:n}}}class iq extends Jz{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fCe(t){return Si(t.integerValue||t.doubleValue)}function J5e(t){return Ice(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class X$t{constructor(e,n){this.field=e,this.transform=n}}function J$t(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof KD&&s instanceof KD||n instanceof QD&&s instanceof QD?Ak(n.elements,s.elements,zp):n instanceof iq&&s instanceof iq?zp(n.Ae,s.Ae):n instanceof GD&&s instanceof GD}(t.transform,e.transform)}class Z$t{constructor(e,n){this.version=e,this.transformResults=n}}class jd{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new jd}static exists(e){return new jd(void 0,e)}static updateTime(e){return new jd(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function SV(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zz{}function Z5e(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ace(t.key,jd.none()):new l2(t.key,t.data,jd.none());{const n=t.data,s=cu.empty();let r=new Uo(wa.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new xb(t.key,s,new Hu(r.toArray()),jd.none())}}function ezt(t,e,n){t instanceof l2?function(s,r,i){const o=s.value.clone(),a=gCe(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof xb?function(s,r,i){if(!SV(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=gCe(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(e$e(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function bN(t,e,n,s){return t instanceof l2?function(r,i,o,a){if(!SV(r.precondition,i))return o;const l=r.value.clone(),u=mCe(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof xb?function(r,i,o,a){if(!SV(r.precondition,i))return o;const l=mCe(r.fieldTransforms,a,i),u=i.data;return u.setAll(e$e(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return SV(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function tzt(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Q5e(s.transform,r||null);i!=null&&(n===null&&(n=cu.empty()),n.set(s.field,i))}return n||null}function pCe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Ak(n,s,(r,i)=>J$t(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class l2 extends Zz{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class xb extends Zz{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function e$e(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function gCe(t,e,n){const s=new Map;Ts(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Y$t(o,a,n[r]))}return s}function mCe(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Q$t(i,o,e))}return s}class Ace extends Zz{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nzt extends Zz{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class szt{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&ezt(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=bN(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=bN(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=G5e();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Z5e(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(on.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),jn())}isEqual(e){return this.batchId===e.batchId&&Ak(this.mutations,e.mutations,(n,s)=>pCe(n,s))&&Ak(this.baseMutations,e.baseMutations,(n,s)=>pCe(n,s))}}class Pce{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Ts(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return z$t}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Pce(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rzt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class izt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xi,Jn;function ozt(t){switch(t){case Te.OK:return Ct(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return Ct(15467,{code:t})}}function t$e(t){if(t===void 0)return v_("GRPC error has no .code"),Te.UNKNOWN;switch(t){case xi.OK:return Te.OK;case xi.CANCELLED:return Te.CANCELLED;case xi.UNKNOWN:return Te.UNKNOWN;case xi.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case xi.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case xi.INTERNAL:return Te.INTERNAL;case xi.UNAVAILABLE:return Te.UNAVAILABLE;case xi.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case xi.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case xi.NOT_FOUND:return Te.NOT_FOUND;case xi.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case xi.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case xi.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case xi.ABORTED:return Te.ABORTED;case xi.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case xi.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case xi.DATA_LOSS:return Te.DATA_LOSS;default:return Ct(39323,{code:t})}}(Jn=xi||(xi={}))[Jn.OK=0]="OK",Jn[Jn.CANCELLED=1]="CANCELLED",Jn[Jn.UNKNOWN=2]="UNKNOWN",Jn[Jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jn[Jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jn[Jn.NOT_FOUND=5]="NOT_FOUND",Jn[Jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jn[Jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jn[Jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jn[Jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jn[Jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jn[Jn.ABORTED=10]="ABORTED",Jn[Jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jn[Jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jn[Jn.INTERNAL=13]="INTERNAL",Jn[Jn.UNAVAILABLE=14]="UNAVAILABLE",Jn[Jn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function azt(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const czt=new Ov([4294967295,4294967295],0);function _Ce(t){const e=azt().encode(t),n=new y5e;return n.update(e),new Uint8Array(n.digest())}function yCe(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ov([n,s],0),new Ov([r,i],0)]}class Nce{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new LA(`Invalid padding: ${n}`);if(s<0)throw new LA(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new LA(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new LA(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ov.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ov.fromNumber(s)));return r.compare(czt)===1&&(r=new Ov([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_Ce(e),[s,r]=yCe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nce(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=_Ce(e),[s,r]=yCe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class LA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eH{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,u2.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new eH(on.min(),r,new Gi(Dn),w_(),jn())}}class u2{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new u2(s,n,jn(),jn(),jn())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kV{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class n$e{constructor(e,n){this.targetId=e,this.Ce=n}}class s$e{constructor(e,n,s=ka.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class vCe{constructor(){this.ve=0,this.Fe=wCe(),this.Me=ka.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jn(),n=jn(),s=jn();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Ct(38017,{changeType:i})}}),new u2(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=wCe()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ts(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lzt{constructor(e){this.Ge=e,this.ze=new Map,this.je=w_(),this.Je=zF(),this.He=zF(),this.Ye=new Gi(Dn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ct(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(fJ(i))if(s===0){const o=new dt(i.path);this.et(n,o,ic.newNoDocument(o,on.min()))}else Ts(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=zw(s).toUint8Array()}catch(l){if(l instanceof A5e)return Rk("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Nce(o,r,i)}catch(l){return Rk(l instanceof LA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&fJ(a.target)){const l=new dt(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ic.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=jn();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new eH(e,n,this.Ye,this.je,s);return this.je=w_(),this.Je=zF(),this.He=zF(),this.Ye=new Gi(Dn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new vCe,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Uo(Dn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Uo(Dn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vCe),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zF(){return new Gi(dt.comparator)}function wCe(){return new Gi(dt.comparator)}const uzt={asc:"ASCENDING",desc:"DESCENDING"},hzt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dzt={and:"AND",or:"OR"};class fzt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gJ(t,e){return t.useProto3Json||Wz(e)?e:{value:e}}function oq(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r$e(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pzt(t,e){return oq(t,e.toTimestamp())}function _p(t){return Ts(!!t,49232),on.fromTimestamp(function(e){const n=$w(e);return new Tr(n.seconds,n.nanos)}(t))}function xce(t,e){return mJ(t,e).canonicalString()}function mJ(t,e){const n=function(s){return new Qr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function i$e(t){const e=Qr.fromString(t);return Ts(u$e(e),10190,{key:e.toString()}),e}function _J(t,e){return xce(t.databaseId,e.path)}function dG(t,e){const n=i$e(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new dt(a$e(n))}function o$e(t,e){return xce(t.databaseId,e)}function gzt(t){const e=i$e(t);return e.length===4?Qr.emptyPath():a$e(e)}function yJ(t){return new Qr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function a$e(t){return Ts(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bCe(t,e,n){return{name:_J(t,e),fields:n.value.mapValue.fields}}function mzt(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Ct(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(Ts(u===void 0||typeof u=="string",58123),ka.fromBase64String(u||"")):(Ts(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ka.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?Te.UNKNOWN:t$e(l.code);return new et(u,l.message||"")}(o);n=new s$e(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=dG(t,s.document.name),i=_p(s.document.updateTime),o=s.document.createTime?_p(s.document.createTime):on.min(),a=new cu({mapValue:{fields:s.document.fields}}),l=ic.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new kV(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=dG(t,s.document),i=s.readTime?_p(s.readTime):on.min(),o=ic.newNoDocument(r,i),a=s.removedTargetIds||[];n=new kV([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=dG(t,s.document),i=s.removedTargetIds||[];n=new kV([],i,r,null)}else{if(!("filter"in e))return Ct(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new izt(r,i),a=s.targetId;n=new n$e(a,o)}}return n}function _zt(t,e){let n;if(e instanceof l2)n={update:bCe(t,e.key,e.value)};else if(e instanceof Ace)n={delete:_J(t,e.key)};else if(e instanceof xb)n={update:bCe(t,e.key,e.data),updateMask:Szt(e.fieldMask)};else{if(!(e instanceof nzt))return Ct(16599,{Vt:e.type});n={verify:_J(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof GD)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof KD)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof QD)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof iq)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Ct(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:pzt(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Ct(27497)}(t,e.precondition)),n}function yzt(t,e){return t&&t.length>0?(Ts(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?_p(s.updateTime):_p(r);return i.isEqual(on.min())&&(i=_p(r)),new Z$t(i,s.transformResults||[])}(n,e))):[]}function vzt(t,e){return{documents:[o$e(t,e.path)]}}function wzt(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=o$e(t,r);const i=function(l){if(l.length!==0)return l$e(Hp.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:cI(h.field),direction:Tzt(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gJ(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function bzt(t){let e=gzt(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Ts(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=c$e(h);return d instanceof Hp&&U5e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new rq(lI(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Wz(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new sq(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new sq(p,d)}(n.endAt)),V$t(e,r,o,i,a,"F",l,u)}function Ezt(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function c$e(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=lI(e.unaryFilter.field);return Po.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=lI(e.unaryFilter.field);return Po.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lI(e.unaryFilter.field);return Po.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lI(e.unaryFilter.field);return Po.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}}(t):t.fieldFilter!==void 0?function(e){return Po.create(lI(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Hp.create(e.compositeFilter.filters.map(n=>c$e(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}}(e.compositeFilter.op))}(t):Ct(30097,{filter:t})}function Tzt(t){return uzt[t]}function Czt(t){return hzt[t]}function Izt(t){return dzt[t]}function cI(t){return{fieldPath:t.canonicalString()}}function lI(t){return wa.fromServerFormat(t.fieldPath)}function l$e(t){return t instanceof Po?function(e){if(e.op==="=="){if(cCe(e.value))return{unaryFilter:{field:cI(e.field),op:"IS_NAN"}};if(aCe(e.value))return{unaryFilter:{field:cI(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(cCe(e.value))return{unaryFilter:{field:cI(e.field),op:"IS_NOT_NAN"}};if(aCe(e.value))return{unaryFilter:{field:cI(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cI(e.field),op:Czt(e.op),value:e.value}}}(t):t instanceof Hp?function(e){const n=e.getFilters().map(s=>l$e(s));return n.length===1?n[0]:{compositeFilter:{op:Izt(e.op),filters:n}}}(t):Ct(54877,{filter:t})}function Szt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function u$e(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tv{constructor(e,n,s,r,i=on.min(),o=on.min(),a=ka.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kzt{constructor(e){this.yt=e}}function Rzt(t){const e=bzt({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pJ(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Azt{constructor(){this.Cn=new Pzt}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(Bw.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(Bw.min())}updateCollectionGroup(e,n,s){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class Pzt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Uo(Qr.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Uo(Qr.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ECe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h$e=41943040;class su{static withCacheSize(e){return new su(e,su.DEFAULT_COLLECTION_PERCENTILE,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/su.DEFAULT_COLLECTION_PERCENTILE=10,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,su.DEFAULT=new su(h$e,su.DEFAULT_COLLECTION_PERCENTILE,su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),su.DISABLED=new su(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xk{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xk(0)}static cr(){return new xk(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const TCe="LruGarbageCollector",Nzt=1048576;function CCe([t,e],[n,s]){const r=Dn(t,n);return r===0?Dn(e,s):r}class xzt{constructor(e){this.Ir=e,this.buffer=new Uo(CCe),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();CCe(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Dzt{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(TCe,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Z1(n)?ze(TCe,"Ignoring IndexedDB error during garbage collection: ",n):await J1(n)}await this.Vr(3e5)})}}class Ozt{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(Hz.ce);const s=new xzt(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(ECe)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ECe):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),oI()<=En.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function Lzt(t,e){return new Ozt(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mzt{constructor(){this.changes=new JC(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ic.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ye.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fzt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vzt{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&bN(s.mutation,r,Hu.empty(),Tr.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,jn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=jn()){const r=$E();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=OA();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=$E();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,jn()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=w_();const o=wN(),a=function(){return wN()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof xb)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),bN(h.mutation,u,h.mutation.getFieldMask(),Tr.now())):o.set(u.key,Hu.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new Fzt(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=wN();let r=new Gi((o,a)=>o-a),i=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Hu.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||jn()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=G5e();h.forEach(p=>{if(!i.has(p)){const m=Z5e(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ye.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return dt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):U$t(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ye.resolve($E());let a=$D,l=i;return o.next(u=>ye.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ye.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,jn())).next(h=>({batchId:a,changes:W5e(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new dt(n)).next(s=>{let r=OA();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=OA();return this.indexManager.getCollectionParents(e,i).next(a=>ye.forEach(a,l=>{const u=function(h,d){return new Kz(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ic.newInvalidDocument(h)))});let a=OA();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&bN(h.mutation,u,Hu.empty(),Tr.now()),Xz(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uzt{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ye.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_p(s.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Rzt(s.bundledQuery),readTime:_p(s.readTime)}}(n)),ye.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qzt{constructor(){this.overlays=new Gi(dt.comparator),this.qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const s=$E();return ye.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ye.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ye.resolve()}getOverlaysForCollection(e,n,s){const r=$E(),i=n.length+1,o=new dt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return ye.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Gi((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=$E(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=$E(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return ye.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new rzt(n,s));let i=this.qr.get(n);i===void 0&&(i=jn(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jzt{constructor(){this.sessionToken=ka.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dce{constructor(){this.Qr=new Uo(Zo.$r),this.Ur=new Uo(Zo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Zo(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Zo(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new dt(new Qr([])),s=new Zo(n,e),r=new Zo(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new dt(new Qr([])),s=new Zo(n,e),r=new Zo(n,e+1);let i=jn();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Zo(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Zo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return dt.comparator(e.key,n.key)||Dn(e.Yr,n.Yr)}static Kr(e,n){return Dn(e.Yr,n.Yr)||dt.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bzt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Uo(Zo.$r)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new szt(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Zo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(o)}lookupMutationBatch(e,n){return ye.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ye.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?Tce:this.tr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Zo(n,0),r=new Zo(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ye.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Uo(Dn);return n.forEach(r=>{const i=new Zo(r,0),o=new Zo(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ye.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;dt.isDocumentKey(i)||(i=i.child(""));const o=new Zo(new dt(i),0);let a=new Uo(Dn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),ye.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ts(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ye.forEach(n.mutations,r=>{const i=new Zo(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Zo(n,0),r=this.Zr.firstAfterOrEqual(s);return ye.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $zt{constructor(e){this.ri=e,this.docs=function(){return new Gi(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ye.resolve(s?s.document.mutableCopy():ic.newInvalidDocument(n))}getEntries(e,n){let s=w_();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():ic.newInvalidDocument(r))}),ye.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=w_();const o=n.path,a=new dt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||m$t(g$t(h),s)<=0||(r.has(h.key)||Xz(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Ct(9500)}ii(e,n){return ye.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new zzt(this)}getSize(e){return ye.resolve(this.size)}}class zzt extends Mzt{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ye.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hzt{constructor(e){this.persistence=e,this.si=new JC(n=>Sce(n),kce),this.lastRemoteSnapshotVersion=on.min(),this.highestTargetId=0,this.oi=0,this._i=new Dce,this.targetCount=0,this.ai=xk.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ye.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xk(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Pr(n),ye.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ye.waitFor(i).next(()=>r)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ye.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ye.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ye.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ye.resolve(s)}containsKey(e,n){return ye.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d$e{constructor(e,n){this.ui={},this.overlays={},this.ci=new Hz(0),this.li=!1,this.li=!0,this.hi=new jzt,this.referenceDelegate=e(this),this.Pi=new Hzt(this),this.indexManager=new Azt,this.remoteDocumentCache=function(s){return new $zt(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new kzt(n),this.Ii=new Uzt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qzt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Bzt(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ze("MemoryPersistence","Starting transaction:",e);const r=new Wzt(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ye.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Wzt extends y$t{constructor(e){super(),this.currentSequenceNumber=e}}class Oce{constructor(e){this.persistence=e,this.Ri=new Dce,this.Vi=null}static mi(e){return new Oce(e)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ye.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.fi,s=>{const r=dt.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,on.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ye.or([()=>ye.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class aq{constructor(e,n){this.persistence=e,this.pi=new JC(s=>b$t(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Lzt(this,n)}static mi(e,n){return new aq(e,n)}Ei(){}di(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ye.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ye.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,on.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=CV(e.data.value)),n}br(e,n,s){return ye.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ye.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lce{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=jn(),r=jn();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lce(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gzt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kzt{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Kjt()?8:v$t(bc())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Gzt;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(oI()<=En.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",aI(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ye.resolve()):(oI()<=En.DEBUG&&ze("QueryEngine","Query:",aI(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(oI()<=En.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",aI(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mp(n))):ye.resolve())}ys(e,n){if(dCe(n))return ye.resolve(null);let s=mp(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=pJ(n,null,"F"),s=mp(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=jn(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,pJ(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return dCe(n)||r.isEqual(on.min())?ye.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ye.resolve(null):(oI()<=En.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aI(n)),this.vs(e,o,n,p$t(r,$D)).next(a=>a))})}Ds(e,n){let s=new Uo(z5e(e));return n.forEach((r,i)=>{Xz(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return oI()<=En.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",aI(n)),this.ps.getDocumentsMatchingQuery(e,n,Bw.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mce="LocalStore",Qzt=3e8;class Yzt{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Gi(Dn),this.xs=new JC(i=>Sce(i),kce),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vzt(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Xzt(t,e,n,s){return new Yzt(t,e,n,s)}async function f$e(t,e){const n=Jt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=jn();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function Jzt(t,e){const n=Jt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=ye.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const R=l.docVersions.get(m);Ts(R!==null,48541),w.version.compareTo(R)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=jn();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function p$e(t){const e=Jt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Zzt(t,e){const n=Jt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ka.EMPTY_BYTE_STRING,on.min()).withLastLimboFreeSnapshotVersion(on.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,R,P){return w.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Qzt?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=w_(),u=jn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(eHt(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(on.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ye.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function eHt(t,e,n){let s=jn(),r=jn();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=w_();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(on.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ze(Mce,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function tHt(t,e){const n=Jt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Tce),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nHt(t,e){const n=Jt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ye.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new tv(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function vJ(t,e,n){const s=Jt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Z1(o))throw o;ze(Mce,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ICe(t,e,n){const s=Jt(t);let r=on.min(),i=jn();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=Jt(a),d=h.xs.get(u);return d!==void 0?ye.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,mp(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:on.min(),n?i:jn())).next(a=>(sHt(s,j$t(e),a),{documents:a,Qs:i})))}function sHt(t,e,n){let s=t.Os.get(e)||on.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class SCe{constructor(){this.activeTargetIds=G$t()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rHt{constructor(){this.Mo=new SCe,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new SCe,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iHt{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kCe="ConnectivityMonitor";class RCe{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(kCe,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(kCe,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let HF=null;function wJ(){return HF===null?HF=function(){return 268435456+Math.round(2147483648*Math.random())}():HF++,"0x"+HF.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fG="RestConnection",oHt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aHt{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===tq?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=wJ(),a=this.zo(e,n.toUriEncodedString());ze(fG,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=ig(u);return this.Jo(e,a,l,s,h).then(d=>(ze(fG,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Rk(fG,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+X1}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=oHt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cHt{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xa="WebChannelConnection";class lHt extends aHt{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=wJ();return new Promise((a,l)=>{const u=new v5e;u.setWithCredentials(!0),u.listenOnce(w5e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case EV.NO_ERROR:const d=u.getResponseJson();ze(xa,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case EV.TIMEOUT:ze(xa,`RPC '${e}' ${o} timed out`),l(new et(Te.DEADLINE_EXCEEDED,"Request time out"));break;case EV.HTTP_ERROR:const p=u.getStatus();if(ze(xa,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const R=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(O)>=0?O:Te.UNKNOWN}(w.status);l(new et(R,w.message))}else l(new et(Te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new et(Te.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ze(xa,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);ze(xa,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=wJ(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T5e(),a=E5e(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");ze(xa,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new cHt({Yo:P=>{m?ze(xa,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(ze(xa,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),ze(xa,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),R=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return R(d,DA.EventType.OPEN,()=>{m||(ze(xa,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),R(d,DA.EventType.CLOSE,()=>{m||(m=!0,ze(xa,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),R(d,DA.EventType.ERROR,P=>{m||(m=!0,Rk(xa,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new et(Te.UNAVAILABLE,"The operation could not be completed")))}),R(d,DA.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];Ts(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){ze(xa,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let W=function(I){const v=xi[I];if(v!==void 0)return t$e(v)}(q),J=V.message;W===void 0&&(W=Te.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new et(W,J)),d.close()}else ze(xa,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),R(a,b5e.STAT_EVENT,P=>{P.stat===aJ.PROXY?ze(xa,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===aJ.NOPROXY&&ze(xa,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function pG(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tH(t){return new fzt(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class g$e{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ACe="PersistentStream";class m$e{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g$e(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(v_(n.toString()),v_("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new et(Te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ze(ACe,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ze(ACe,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uHt extends m$e{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mzt(this.serializer,e),s=function(r){if(!("targetChange"in r))return on.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?on.min():i.readTime?_p(i.readTime):on.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=yJ(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=fJ(a)?{documents:vzt(r,a)}:{query:wzt(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=r$e(r,i.resumeToken);const l=gJ(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(on.min())>0){o.readTime=oq(r,i.snapshotVersion.toTimestamp());const l=gJ(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=Ezt(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=yJ(this.serializer),n.removeTarget=e,this.q_(n)}}class hHt extends m$e{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ts(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ts(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ts(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yzt(e.writeResults,e.commitTime),s=_p(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=yJ(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>_zt(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dHt{}class fHt extends dHt{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new et(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,mJ(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new et(Te.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,mJ(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new et(Te.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class pHt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(v_(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uC="RemoteStore";class gHt{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{ZC(this)&&(ze(uC,"Restarting streams for network reachability change."),await async function(a){const l=Jt(a);l.Ea.add(4),await h2(l),l.Ra.set("Unknown"),l.Ea.delete(4),await nH(l)}(this))})}),this.Ra=new pHt(s,r)}}async function nH(t){if(ZC(t))for(const e of t.da)await e(!0)}async function h2(t){for(const e of t.da)await e(!1)}function _$e(t,e){const n=Jt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qce(n)?Uce(n):eR(n).O_()&&Vce(n,e))}function Fce(t,e){const n=Jt(t),s=eR(n);n.Ia.delete(e),s.O_()&&y$e(n,e),n.Ia.size===0&&(s.O_()?s.L_():ZC(n)&&n.Ra.set("Unknown"))}function Vce(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(on.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eR(t).Y_(e)}function y$e(t,e){t.Va.Ue(e),eR(t).Z_(e)}function Uce(t){t.Va=new lzt({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),eR(t).start(),t.Ra.ua()}function qce(t){return ZC(t)&&!eR(t).x_()&&t.Ia.size>0}function ZC(t){return Jt(t).Ea.size===0}function v$e(t){t.Va=void 0}async function mHt(t){t.Ra.set("Online")}async function _Ht(t){t.Ia.forEach((e,n)=>{Vce(t,e)})}async function yHt(t,e){v$e(t),qce(t)?(t.Ra.ha(e),Uce(t)):t.Ra.set("Unknown")}async function vHt(t,e,n){if(t.Ra.set("Online"),e instanceof s$e&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){ze(uC,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await cq(t,s)}else if(e instanceof kV?t.Va.Ze(e):e instanceof n$e?t.Va.st(e):t.Va.tt(e),!n.isEqual(on.min()))try{const s=await p$e(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(ka.EMPTY_BYTE_STRING,u.snapshotVersion)),y$e(r,a);const h=new tv(u.target,a,l,u.sequenceNumber);Vce(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){ze(uC,"Failed to raise snapshot:",s),await cq(t,s)}}async function cq(t,e,n){if(!Z1(e))throw e;t.Ea.add(1),await h2(t),t.Ra.set("Offline"),n||(n=()=>p$e(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ze(uC,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await nH(t)})}function w$e(t,e){return e().catch(n=>cq(t,n,e))}async function sH(t){const e=Jt(t),n=Ww(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tce;for(;wHt(e);)try{const r=await tHt(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,bHt(e,r)}catch(r){await cq(e,r)}b$e(e)&&E$e(e)}function wHt(t){return ZC(t)&&t.Ta.length<10}function bHt(t,e){t.Ta.push(e);const n=Ww(t);n.O_()&&n.X_&&n.ea(e.mutations)}function b$e(t){return ZC(t)&&!Ww(t).x_()&&t.Ta.length>0}function E$e(t){Ww(t).start()}async function EHt(t){Ww(t).ra()}async function THt(t){const e=Ww(t);for(const n of t.Ta)e.ea(n.mutations)}async function CHt(t,e,n){const s=t.Ta.shift(),r=Pce.from(s,e,n);await w$e(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await sH(t)}async function IHt(t,e){e&&Ww(t).X_&&await async function(n,s){if(function(r){return ozt(r)&&r!==Te.ABORTED}(s.code)){const r=n.Ta.shift();Ww(n).B_(),await w$e(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await sH(n)}}(t,e),b$e(t)&&E$e(t)}async function PCe(t,e){const n=Jt(t);n.asyncQueue.verifyOperationInProgress(),ze(uC,"RemoteStore received new credentials");const s=ZC(n);n.Ea.add(3),await h2(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nH(n)}async function SHt(t,e){const n=Jt(t);e?(n.Ea.delete(2),await nH(n)):e||(n.Ea.add(2),await h2(n),n.Ra.set("Unknown"))}function eR(t){return t.ma||(t.ma=function(e,n,s){const r=Jt(e);return r.sa(),new uHt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:mHt.bind(null,t),t_:_Ht.bind(null,t),r_:yHt.bind(null,t),H_:vHt.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qce(t)?Uce(t):t.Ra.set("Unknown")):(await t.ma.stop(),v$e(t))})),t.ma}function Ww(t){return t.fa||(t.fa=function(e,n,s){const r=Jt(e);return r.sa(),new hHt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EHt.bind(null,t),r_:IHt.bind(null,t),ta:THt.bind(null,t),na:CHt.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await sH(t)):(await t.fa.stop(),t.Ta.length>0&&(ze(uC,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jce{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Lv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new jce(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bce(t,e){if(v_("AsyncQueue",`${e}: ${t}`),Z1(t))return new et(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lS{static emptySet(e){return new lS(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||dt.comparator(n.key,s.key):(n,s)=>dt.comparator(n.key,s.key),this.keyedMap=OA(),this.sortedSet=new Gi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lS)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new lS;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NCe{constructor(){this.ga=new Gi(dt.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ct(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Dk{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Dk(e,n,lS.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yz(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kHt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class RHt{constructor(){this.queries=xCe(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Jt(e),r=s.queries;s.queries=xCe(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new et(Te.ABORTED,"Firestore shutting down"))}}function xCe(){return new JC(t=>$5e(t),Yz)}async function T$e(t,e){const n=Jt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new kHt,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Bce(o,`Initialization of query '${aI(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&$ce(n)}async function C$e(t,e){const n=Jt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function AHt(t,e){const n=Jt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&$ce(n)}function PHt(t,e,n){const s=Jt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function $ce(t){t.Ca.forEach(e=>{e.next()})}var bJ,DCe;(DCe=bJ||(bJ={})).Ma="default",DCe.Cache="cache";class I$e{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Dk(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bJ.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S$e{constructor(e){this.key=e}}class k$e{constructor(e){this.key=e}}class NHt{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=z5e(e),this.tu=new lS(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new NCe,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=Xz(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==R&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:R})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Dk(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NCe,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jn(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new k$e(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new S$e(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=jn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dk.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zce="SyncEngine";class xHt{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class DHt{constructor(e){this.key=e,this.hu=!1}}class OHt{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new JC(a=>$5e(a),Yz),this.Iu=new Map,this.Eu=new Set,this.du=new Gi(dt.comparator),this.Au=new Map,this.Ru=new Dce,this.Vu={},this.mu=new Map,this.fu=xk.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LHt(t,e,n=!0){const s=D$e(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await R$e(s,e,n,!0),r}async function MHt(t,e){const n=D$e(t);await R$e(n,e,!0,!1)}async function R$e(t,e,n,s){const r=await nHt(t.localStore,mp(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await FHt(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&_$e(t.remoteStore,r),a}async function FHt(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,R,P,O){let M=R.view.ru(P);M.Cs&&(M=await ICe(w.localStore,R.query,!1).then(({documents:J})=>R.view.ru(J,M)));const V=O&&O.targetChanges.get(R.targetId),q=O&&O.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(M,w.isPrimaryClient,V,q);return LCe(w,R.targetId,W.au),W.snapshot}(t,d,p,m);const i=await ICe(t.localStore,e,!0),o=new NHt(e,i.Qs),a=o.ru(i.documents),l=u2.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);LCe(t,n,u.au);const h=new xHt(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function VHt(t,e,n){const s=Jt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!Yz(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await vJ(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Fce(s.remoteStore,r.targetId),EJ(s,r.targetId)}).catch(J1)):(EJ(s,r.targetId),await vJ(s.localStore,r.targetId,!0))}async function UHt(t,e){const n=Jt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Fce(n.remoteStore,s.targetId))}async function qHt(t,e,n){const s=GHt(t);try{const r=await function(i,o){const a=Jt(i),l=Tr.now(),u=o.reduce((p,m)=>p.add(m.key),jn());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=w_(),w=jn();return a.Ns.getEntries(p,u).next(R=>{m=R,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(R=>{h=R;const P=[];for(const O of o){const M=tzt(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new xb(O.key,M,M5e(M.value.mapValue),jd.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(R=>{d=R;const P=R.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,R.batchId,P)})}).then(()=>({batchId:d.batchId,changes:W5e(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new Gi(Dn)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await d2(s,r.changes),await sH(s.remoteStore)}catch(r){const i=Bce(r,"Failed to persist write");n.reject(i)}}async function A$e(t,e){const n=Jt(t);try{const s=await Zzt(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Ts(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Ts(o.hu,14607):r.removedDocuments.size>0&&(Ts(o.hu,42227),o.hu=!1))}),await d2(n,s,e)}catch(s){await J1(s)}}function OCe(t,e,n){const s=Jt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Jt(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&$ce(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function jHt(t,e,n){const s=Jt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Gi(dt.comparator);o=o.insert(i,ic.newNoDocument(i,on.min()));const a=jn().add(i),l=new eH(on.min(),new Map,new Gi(Dn),o,a);await A$e(s,l),s.du=s.du.remove(i),s.Au.delete(e),Hce(s)}else await vJ(s.localStore,e,!1).then(()=>EJ(s,e,n)).catch(J1)}async function BHt(t,e){const n=Jt(t),s=e.batch.batchId;try{const r=await Jzt(n.localStore,e);N$e(n,s,null),P$e(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await d2(n,r)}catch(r){await J1(r)}}async function $Ht(t,e,n){const s=Jt(t);try{const r=await function(i,o){const a=Jt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(Ts(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);N$e(s,e,n),P$e(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await d2(s,r)}catch(r){await J1(r)}}function P$e(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function N$e(t,e,n){const s=Jt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function EJ(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||x$e(t,s)})}function x$e(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fce(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Hce(t))}function LCe(t,e,n){for(const s of n)s instanceof S$e?(t.Ru.addReference(s.key,e),zHt(t,s)):s instanceof k$e?(ze(zce,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||x$e(t,s.key)):Ct(19791,{wu:s})}function zHt(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ze(zce,"New document in limbo: "+n),t.Eu.add(s),Hce(t))}function Hce(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new dt(Qr.fromString(e)),s=t.fu.next();t.Au.set(s,new DHt(n)),t.du=t.du.insert(n,s),_$e(t.remoteStore,new tv(mp(Qz(n.path)),s,"TargetPurposeLimboResolution",Hz.ce))}}async function d2(t,e,n){const s=Jt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Lce.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=Jt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ye.forEach(l,d=>ye.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>ye.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!Z1(h))throw h;ze(Mce,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function HHt(t,e){const n=Jt(t);if(!n.currentUser.isEqual(e)){ze(zce,"User change. New user:",e.toKey());const s=await f$e(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new et(Te.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await d2(n,s.Ls)}}function WHt(t,e){const n=Jt(t),s=n.Au.get(e);if(s&&s.hu)return jn().add(s.key);{let r=jn();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function D$e(t){const e=Jt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=A$e.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WHt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jHt.bind(null,e),e.Pu.H_=AHt.bind(null,e.eventManager),e.Pu.yu=PHt.bind(null,e.eventManager),e}function GHt(t){const e=Jt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BHt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$Ht.bind(null,e),e}class lq{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tH(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Xzt(this.persistence,new Kzt,e.initialUser,this.serializer)}Cu(e){return new d$e(Oce.mi,this.serializer)}Du(e){return new rHt}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lq.provider={build:()=>new lq};class KHt extends lq{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ts(this.persistence.referenceDelegate instanceof aq,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Dzt(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?su.withCacheSize(this.cacheSizeBytes):su.DEFAULT;return new d$e(s=>aq.mi(s,n),this.serializer)}}class TJ{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>OCe(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=HHt.bind(null,this.syncEngine),await SHt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RHt}()}createDatastore(e){const n=tH(e.databaseInfo.databaseId),s=function(r){return new lHt(r)}(e.databaseInfo);return function(r,i,o,a){return new fHt(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new gHt(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>OCe(this.syncEngine,n,0),function(){return RCe.v()?new RCe:new iHt}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new OHt(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Jt(e);ze(uC,"RemoteStore shutting down."),n.Ea.add(5),await h2(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}TJ.provider={build:()=>new TJ};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O$e{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):v_("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gw="FirestoreClient";class QHt{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ga.UNAUTHENTICATED,this.clientId=bce.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ze(Gw,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ze(Gw,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Bce(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function gG(t,e){t.asyncQueue.verifyOperationInProgress(),ze(Gw,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await f$e(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function MCe(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YHt(t);ze(Gw,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>PCe(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>PCe(e.remoteStore,r)),t._onlineComponents=e}async function YHt(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ze(Gw,"Using user provided OfflineComponentProvider");try{await gG(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Te.FAILED_PRECONDITION||s.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Rk("Error using user provided cache. Falling back to memory cache: "+n),await gG(t,new lq)}}else ze(Gw,"Using default OfflineComponentProvider"),await gG(t,new KHt(void 0));return t._offlineComponents}async function L$e(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ze(Gw,"Using user provided OnlineComponentProvider"),await MCe(t,t._uninitializedComponentsProvider._online)):(ze(Gw,"Using default OnlineComponentProvider"),await MCe(t,new TJ))),t._onlineComponents}function XHt(t){return L$e(t).then(e=>e.syncEngine)}async function CJ(t){const e=await L$e(t),n=e.eventManager;return n.onListen=LHt.bind(null,e.syncEngine),n.onUnlisten=VHt.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MHt.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UHt.bind(null,e.syncEngine),n}function JHt(t,e,n={}){const s=new Lv;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new O$e({next:d=>{u.Nu(),i.enqueueAndForget(()=>C$e(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new et(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new et(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new I$e(Qz(o.path),u,{includeMetadataChanges:!0,qa:!0});return T$e(r,h)}(await CJ(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M$e(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FCe=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const F$e="firestore.googleapis.com",VCe=!0;class UCe{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F$e,this.ssl=VCe}else this.host=e.host,this.ssl=e.ssl??VCe;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h$e;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nzt)throw new et(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f$t("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M$e(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new et(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wce{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UCe({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UCe(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new n$t;switch(n.type){case"firstParty":return new o$t(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new et(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=FCe.get(e);n&&(ze("ComponentProvider","Removing Datastore"),FCe.delete(e),n.terminate())}(this),Promise.resolve()}}function ZHt(t,e,n,s={}){t=qd(t,Wce);const r=ig(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(Fz(`https://${a}`),Vz("Firestore",!0)),i.host!==F$e&&i.host!==a&&Rk("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Uw(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ga.MOCK_USER;else{u=rce(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new et(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ga(d)}t._authCredentials=new s$t(new I5e(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rH{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rH(this.firestore,e,this._query)}}class qi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new YD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qi(this.firestore,e,this._key)}toJSON(){return{type:qi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(c2(n,qi._jsonSchema))return new qi(e,s||null,new dt(Qr.fromString(n.referencePath)))}}qi._jsonSchemaVersion="firestore/documentReference/1.0",qi._jsonSchema={type:Ui("string",qi._jsonSchemaVersion),referencePath:Ui("string")};class YD extends rH{constructor(e,n,s){super(e,n,Qz(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qi(this.firestore,null,new dt(e))}withConverter(e){return new YD(this.firestore,e,this._path)}}function V$e(t,e,...n){if(t=js(t),arguments.length===1&&(e=bce.newId()),d$t("doc","path",e),t instanceof Wce){const s=Qr.fromString(e,...n);return ZTe(s),new qi(t,null,new dt(s))}{if(!(t instanceof qi||t instanceof YD))throw new et(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Qr.fromString(e,...n));return ZTe(s),new qi(t.firestore,t instanceof YD?t.converter:null,new dt(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qCe="AsyncQueue";class jCe{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g$e(this,"async_queue_retry"),this._c=()=>{const s=pG();s&&ze(qCe,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=pG();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=pG();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Lv;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Z1(e))throw e;ze(qCe,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,v_("INTERNAL UNHANDLED ERROR: ",BCe(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=jce.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&Ct(47125,{Pc:BCe(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function BCe(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ce(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class hC extends Wce{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new jCe,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jCe(e),this._firestoreClient=void 0,await e}}}function U$e(t,e){const n=typeof t=="object"?t:jz(),s=typeof t=="string"?t:tq,r=r2(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=sce("firestore");i&&ZHt(r,...i)}return r}function Gce(t){if(t._terminated)throw new et(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||e7t(t),t._firestoreClient}function e7t(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new C$t(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,M$e(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new QHt(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mh(ka.fromBase64String(e))}catch(n){throw new et(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mh(ka.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(c2(e,mh._jsonSchema))return mh.fromBase64String(e.bytes)}}mh._jsonSchemaVersion="firestore/bytes/1.0",mh._jsonSchema={type:Ui("string",mh._jsonSchemaVersion),bytes:Ui("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iH{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wa(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oH{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yp._jsonSchemaVersion}}static fromJSON(e){if(c2(e,yp._jsonSchema))return new yp(e.latitude,e.longitude)}}yp._jsonSchemaVersion="firestore/geoPoint/1.0",yp._jsonSchema={type:Ui("string",yp._jsonSchemaVersion),latitude:Ui("number"),longitude:Ui("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(c2(e,vp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new vp(e.vectorValues);throw new et(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vp._jsonSchemaVersion="firestore/vectorValue/1.0",vp._jsonSchema={type:Ui("string",vp._jsonSchemaVersion),vectorValues:Ui("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const t7t=/^__.*__$/;class n7t{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xb(e,this.data,this.fieldMask,n,this.fieldTransforms):new l2(e,this.data,n,this.fieldTransforms)}}class q$e{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xb(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j$e(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:t})}}class Kce{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kce({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uq(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(j$e(this.Ac)&&t7t.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s7t{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||tH(e)}Cc(e,n,s,r=!1){return new Kce({Ac:e,methodName:n,Dc:s,path:wa.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function B$e(t){const e=t._freezeSettings(),n=tH(t._databaseId);return new s7t(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r7t(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Yce("Data must be an object, but it was:",o,s);const a=$$e(s,o);let l,u;if(i.merge)l=new Hu(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=IJ(e,d,n);if(!o.contains(p))throw new et(Te.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);H$e(h,p)||h.push(p)}l=new Hu(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new n7t(new cu(a),l,u)}class aH extends oH{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aH}}class Qce extends oH{_toFieldTransform(e){return new X$t(e.path,new GD)}isEqual(e){return e instanceof Qce}}function i7t(t,e,n,s){const r=t.Cc(1,e,n);Yce("Data must be an object, but it was:",r,s);const i=[],o=cu.empty();Nb(s,(l,u)=>{const h=Xce(e,l,n);u=js(u);const d=r.yc(h);if(u instanceof aH)i.push(h);else{const p=cH(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Hu(i);return new q$e(o,a,r.fieldTransforms)}function o7t(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[IJ(e,s,n)],l=[r];if(i.length%2!=0)throw new et(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(IJ(e,i[p])),l.push(i[p+1]);const u=[],h=cu.empty();for(let p=a.length-1;p>=0;--p)if(!H$e(u,a[p])){const m=a[p];let w=l[p];w=js(w);const R=o.yc(m);if(w instanceof aH)u.push(m);else{const P=cH(w,R);P!=null&&(u.push(m),h.set(m,P))}}const d=new Hu(u);return new q$e(h,d,o.fieldTransforms)}function cH(t,e){if(z$e(t=js(t)))return Yce("Unsupported field value:",e,t),$$e(t,e);if(t instanceof oH)return function(n,s){if(!j$e(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=cH(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=js(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return K$t(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Tr.fromDate(n);return{timestampValue:oq(s.serializer,r)}}if(n instanceof Tr){const r=new Tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:oq(s.serializer,r)}}if(n instanceof yp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof mh)return{bytesValue:r$e(s.serializer,n._byteString)};if(n instanceof qi){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:xce(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof vp)return function(r,i){return{mapValue:{fields:{[O5e]:{stringValue:L5e},[nq]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return Rce(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Ece(n)}`)}(t,e)}function $$e(t,e){const n={};return R5e(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nb(t,(s,r)=>{const i=cH(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function z$e(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tr||t instanceof yp||t instanceof mh||t instanceof qi||t instanceof oH||t instanceof vp)}function Yce(t,e,n){if(!z$e(n)||!S5e(n)){const s=Ece(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function IJ(t,e,n){if((e=js(e))instanceof iH)return e._internalPath;if(typeof e=="string")return Xce(t,e);throw uq("Field path arguments must be of type string or ",t,!1,void 0,n)}const a7t=new RegExp("[~\\*/\\[\\]]");function Xce(t,e,n){if(e.search(a7t)>=0)throw uq(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iH(...e.split("."))._internalPath}catch{throw uq(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uq(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new et(Te.INVALID_ARGUMENT,a+t+l)}function H$e(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W$e{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c7t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(G$e("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c7t extends W$e{data(){return super.data()}}function G$e(t,e){return typeof e=="string"?Xce(t,e):e instanceof iH?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function l7t(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u7t{convertValue(e,n="none"){switch(Hw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ct(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Nb(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[nq].arrayValue?.values?.map(s=>Si(s.doubleValue));return new vp(n)}convertGeoPoint(e){return new yp(Si(e.latitude),Si(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Gz(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(zD(e));default:return null}}convertTimestamp(e){const n=$w(e);return new Tr(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qr.fromString(e);Ts(u$e(s),9688,{name:e});const r=new HD(s.get(1),s.get(3)),i=new dt(s.popFirst(5));return r.isEqual(n)||v_(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function h7t(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class MA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bT extends W$e{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new RV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(G$e("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bT._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}bT._jsonSchemaVersion="firestore/documentSnapshot/1.0",bT._jsonSchema={type:Ui("string",bT._jsonSchemaVersion),bundleSource:Ui("string","DocumentSnapshot"),bundleName:Ui("string"),bundle:Ui("string")};class RV extends bT{data(e={}){return super.data(e)}}class uS{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new MA(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new RV(this._firestore,this._userDataWriter,s.key,s,new MA(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new RV(s._firestore,s._userDataWriter,o.doc.key,o.doc,new MA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new RV(s._firestore,s._userDataWriter,o.doc.key,o.doc,new MA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:d7t(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uS._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bce.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d7t(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SJ(t){t=qd(t,qi);const e=qd(t.firestore,hC);return JHt(Gce(e),t._key).then(n=>Q$e(e,t,n))}uS._jsonSchemaVersion="firestore/querySnapshot/1.0",uS._jsonSchema={type:Ui("string",uS._jsonSchemaVersion),bundleSource:Ui("string","QuerySnapshot"),bundleName:Ui("string"),bundle:Ui("string")};class K$e extends u7t{constructor(e){super(),this.firestore=e}convertBytes(e){return new mh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qi(this.firestore,null,n)}}function kJ(t,e,n){t=qd(t,qi);const s=qd(t.firestore,hC),r=h7t(t.converter,e,n);return Jce(s,[r7t(B$e(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,jd.none())])}function f7t(t,e,n,...s){t=qd(t,qi);const r=qd(t.firestore,hC),i=B$e(r);let o;return o=typeof(e=js(e))=="string"||e instanceof iH?o7t(i,"updateDoc",t._key,e,n,s):i7t(i,"updateDoc",t._key,e),Jce(r,[o.toMutation(t._key,jd.exists(!0))])}function p7t(t){return Jce(qd(t.firestore,hC),[new Ace(t._key,jd.none())])}function g7t(t,...e){t=js(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$Ce(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($Ce(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof qi)o=qd(t.firestore,hC),a=Qz(t._key.path),i={next:l=>{e[s]&&e[s](Q$e(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=qd(t,rH);o=qd(l.firestore,hC),a=l._query;const u=new K$e(o);i={next:h=>{e[s]&&e[s](new uS(o,u,l,h))},error:e[s+1],complete:e[s+2]},l7t(t._query)}return function(l,u,h,d){const p=new O$e(d),m=new I$e(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>T$e(await CJ(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>C$e(await CJ(l),m))}}(Gce(o),a,r,i)}function Jce(t,e){return function(n,s){const r=new Lv;return n.asyncQueue.enqueueAndForget(async()=>qHt(await XHt(n),s,r)),r.promise}(Gce(t),e)}function Q$e(t,e,n){const s=n.docs.get(e._key),r=new K$e(t);return new bT(t,r,e._key,s,new MA(n.hasPendingWrites,n.fromCache),e.converter)}function AV(){return new Qce("serverTimestamp")}(function(t,e=!0){(function(n){X1=n})(Pb),qw(new m_("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new hC(new r$t(n.getProvider("auth-internal")),new a$t(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new et(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new HD(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Sh(QTe,YTe,t),Sh(QTe,YTe,"esm2020")})();var m7t="firebase",_7t="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Sh(m7t,_7t,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Y$e="firebasestorage.googleapis.com",X$e="storageBucket",y7t=120*1e3,v7t=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bi extends og{constructor(e,n,s=0){super(mG(e),`Firebase Storage: ${n} (${mG(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mG(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _i;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_i||(_i={}));function mG(t){return"storage/"+t}function Zce(){const t="An unknown error occurred, please check the error payload for server response.";return new bi(_i.UNKNOWN,t)}function w7t(t){return new bi(_i.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function b7t(t){return new bi(_i.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E7t(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bi(_i.UNAUTHENTICATED,t)}function T7t(){return new bi(_i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C7t(t){return new bi(_i.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function I7t(){return new bi(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S7t(){return new bi(_i.CANCELED,"User canceled the upload/download.")}function k7t(t){return new bi(_i.INVALID_URL,"Invalid URL '"+t+"'.")}function R7t(t){return new bi(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function A7t(){return new bi(_i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+X$e+"' property when initializing the app?")}function P7t(){return new bi(_i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function N7t(){return new bi(_i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function x7t(t){return new bi(_i.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function RJ(t){return new bi(_i.INVALID_ARGUMENT,t)}function J$e(){return new bi(_i.APP_DELETED,"The Firebase app was deleted.")}function D7t(t){return new bi(_i.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function EN(t,e){return new bi(_i.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function QR(t){throw new bi(_i.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nl{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=nl.makeFromUrl(e,n)}catch{return new nl(e,"")}if(s.path==="")return s;throw R7t(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},R=n===Y$e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${R}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],W=q.regex.exec(e);if(W){const J=W[q.indices.bucket];let I=W[q.indices.path];I||(I=""),s=new nl(J,I),q.postModify(s);break}}if(s==null)throw k7t(e);return s}}class O7t{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L7t(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(u){p();return}if(P){p(),h.call(null,P,...O);return}if(l()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function R(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function M7t(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F7t(t){return t!==void 0}function V7t(t){return typeof t=="object"&&!Array.isArray(t)}function ele(t){return typeof t=="string"||t instanceof String}function zCe(t){return tle()&&t instanceof Blob}function tle(){return typeof Blob<"u"}function AJ(t,e,n,s){if(s<e)throw RJ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw RJ(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f2(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Z$e(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var ET;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ET||(ET={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U7t(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class q7t{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,R)=>{this.resolve_=w,this.reject_=R,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new WF(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ET.NO_ERROR,l=i.getStatus();if(!a||U7t(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ET.ABORT;s(!1,new WF(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new WF(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());F7t(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Zce();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?J$e():S7t();o(l)}else{const l=I7t();o(l)}};this.canceled_?n(!1,new WF(!1,null,!0)):this.backoffId_=L7t(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&M7t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class WF{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function j7t(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function B7t(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $7t(t,e){e&&(t["X-Firebase-GMPID"]=e)}function z7t(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function H7t(t,e,n,s,r,i,o=!0,a=!1){const l=Z$e(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return $7t(h,e),j7t(h,n),B7t(h,i),z7t(h,s),new q7t(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function W7t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function G7t(...t){const e=W7t();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(tle())return new Blob(t);throw new bi(_i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function K7t(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q7t(t){if(typeof atob>"u")throw x7t("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _G{constructor(e,n){this.data=e,this.contentType=n||null}}function eze(t,e){switch(t){case fd.RAW:return new _G(tze(e));case fd.BASE64:case fd.BASE64URL:return new _G(nze(t,e));case fd.DATA_URL:return new _G(X7t(e),J7t(e))}throw Zce()}function tze(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Y7t(t){let e;try{e=decodeURIComponent(t)}catch{throw EN(fd.DATA_URL,"Malformed data URL.")}return tze(e)}function nze(t,e){switch(t){case fd.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw EN(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case fd.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw EN(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Q7t(e)}catch(r){throw r.message.includes("polyfill")?r:EN(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class sze{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw EN(fd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=Z7t(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function X7t(t){const e=new sze(t);return e.base64?nze(fd.BASE64,e.rest):Y7t(e.rest)}function J7t(t){return new sze(t).contentType}function Z7t(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wy{constructor(e,n){let s=0,r="";zCe(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(zCe(this.data_)){const s=this.data_,r=K7t(s,e,n);return r===null?null:new Wy(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Wy(s,!0)}}static getBlob(...e){if(tle()){const n=e.map(s=>s instanceof Wy?s.data_:s);return new Wy(G7t.apply(null,n))}else{const n=e.map(o=>ele(o)?eze(fd.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new Wy(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nle(t){let e;try{e=JSON.parse(t)}catch{return null}return V7t(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eWt(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tWt(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function rze(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nWt(t,e){return e}class Sc{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||nWt}}let GF=null;function sWt(t){return!ele(t)||t.length<2?t:rze(t)}function ize(){if(GF)return GF;const t=[];t.push(new Sc("bucket")),t.push(new Sc("generation")),t.push(new Sc("metageneration")),t.push(new Sc("name","fullPath",!0));function e(i,o){return sWt(o)}const n=new Sc("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new Sc("size");return r.xform=s,t.push(r),t.push(new Sc("timeCreated")),t.push(new Sc("updated")),t.push(new Sc("md5Hash",null,!0)),t.push(new Sc("cacheControl",null,!0)),t.push(new Sc("contentDisposition",null,!0)),t.push(new Sc("contentEncoding",null,!0)),t.push(new Sc("contentLanguage",null,!0)),t.push(new Sc("contentType",null,!0)),t.push(new Sc("metadata","customMetadata",!0)),GF=t,GF}function rWt(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new nl(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function iWt(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return rWt(s,t),s}function oze(t,e,n){const s=nle(e);return s===null?null:iWt(t,s,n)}function oWt(t,e,n,s){const r=nle(e);if(r===null||!ele(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=f2(h,n,s),p=Z$e({alt:"media",token:a});return d+p})[0]}function aWt(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HCe="prefixes",WCe="items";function cWt(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[HCe])for(const r of n[HCe]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new nl(e,i));s.prefixes.push(o)}if(n[WCe])for(const r of n[WCe]){const i=t._makeStorageReference(new nl(e,r.name));s.items.push(i)}return s}function lWt(t,e,n){const s=nle(n);return s===null?null:cWt(t,e,s)}class lH{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sle(t){if(!t)throw Zce()}function uWt(t,e){function n(s,r){const i=oze(t,r,e);return sle(i!==null),i}return n}function hWt(t,e){function n(s,r){const i=lWt(t,e,r);return sle(i!==null),i}return n}function dWt(t,e){function n(s,r){const i=oze(t,r,e);return sle(i!==null),oWt(i,r,t.host,t._protocol)}return n}function rle(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=T7t():r=E7t():n.getStatus()===402?r=b7t(t.bucket):n.getStatus()===403?r=C7t(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function aze(t){const e=rle(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=w7t(t.path)),i.serverResponse=r.serverResponse,i}return n}function fWt(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=f2(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new lH(a,l,hWt(t,e.bucket),u);return h.urlParams=i,h.errorHandler=rle(e),h}function pWt(t,e,n){const s=e.fullServerUrl(),r=f2(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new lH(r,i,dWt(t,n),o);return a.errorHandler=aze(e),a}function gWt(t,e){const n=e.fullServerUrl(),s=f2(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new lH(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=aze(e),a}function mWt(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function _Wt(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=mWt(null,e)),s}function yWt(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=_Wt(e,s,r),h=aWt(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Wy.getBlob(d,s,p);if(m===null)throw P7t();const w={name:u.fullPath},R=f2(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new lH(R,P,uWt(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=rle(e),M}class vWt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ET.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ET.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ET.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw QR("cannot .send() more than once");if(ig(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw QR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw QR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw QR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw QR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wWt extends vWt{initXhr(){this.xhr_.responseType="text"}}function uH(){return new wWt}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dC{constructor(e,n){this._service=e,n instanceof nl?this._location=n:this._location=nl.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new dC(e,n)}get root(){const e=new nl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rze(this._location.path)}get storage(){return this._service}get parent(){const e=eWt(this._location.path);if(e===null)return null;const n=new nl(this._location.bucket,e);return new dC(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw D7t(e)}}function bWt(t,e,n){t._throwIfRoot("uploadBytes");const s=yWt(t.storage,t._location,ize(),new Wy(e,!0),n);return t.storage.makeRequestWithTokens(s,uH).then(r=>({metadata:r,ref:t}))}function EWt(t,e,n=fd.RAW,s){t._throwIfRoot("uploadString");const r=eze(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),bWt(t,r.data,i)}function TWt(t){const e={prefixes:[],items:[]};return cze(t,e).then(()=>e)}async function cze(t,e,n){const s=await CWt(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await cze(t,e,s.nextPageToken)}function CWt(t,e){e!=null&&typeof e.maxResults=="number"&&AJ("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=fWt(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,uH)}function IWt(t){t._throwIfRoot("getDownloadURL");const e=pWt(t.storage,t._location,ize());return t.storage.makeRequestWithTokens(e,uH).then(n=>{if(n===null)throw N7t();return n})}function SWt(t){t._throwIfRoot("deleteObject");const e=gWt(t.storage,t._location);return t.storage.makeRequestWithTokens(e,uH)}function kWt(t,e){const n=tWt(t._location.path,e),s=new nl(t._location.bucket,n);return new dC(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RWt(t){return/^[A-Za-z]+:\/\//.test(t)}function AWt(t,e){return new dC(t,e)}function lze(t,e){if(t instanceof ile){const n=t;if(n._bucket==null)throw A7t();const s=new dC(n,n._bucket);return e!=null?lze(s,e):s}else return e!==void 0?kWt(t,e):t}function PWt(t,e){if(e&&RWt(e)){if(t instanceof ile)return AWt(t,e);throw RJ("To use ref(service, url), the first argument must be a Storage instance.")}else return lze(t,e)}function GCe(t,e){const n=e?.[X$e];return n==null?null:nl.makeFromBucketSpec(n,t)}function NWt(t,e,n,s={}){t.host=`${e}:${n}`;const r=ig(e);r&&(Fz(`https://${t.host}/b`),Vz("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:rce(i,t.app.options.projectId))}class ile{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Y$e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y7t,this._maxUploadRetryTime=v7t,this._requests=new Set,r!=null?this._bucket=nl.makeFromBucketSpec(r,this._host):this._bucket=GCe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nl.makeFromBucketSpec(this._url,e):this._bucket=GCe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AJ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AJ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Du(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new dC(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new O7t(J$e());{const o=H7t(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const KCe="@firebase/storage",QCe="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uze="storage";function xWt(t,e,n,s){return t=js(t),EWt(t,e,n,s)}function DWt(t){return t=js(t),TWt(t)}function OWt(t){return t=js(t),IWt(t)}function LWt(t){return t=js(t),SWt(t)}function MWt(t,e){return t=js(t),PWt(t,e)}function FWt(t=jz(),e){t=js(t);const n=r2(t,uze).getImmediate({identifier:e}),s=sce("storage");return s&&VWt(n,...s),n}function VWt(t,e,n,s={}){NWt(t,e,n,s)}function UWt(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ile(n,s,r,e,Pb)}function qWt(){qw(new m_(uze,UWt,"PUBLIC").setMultipleInstances(!0)),Sh(KCe,QCe,""),Sh(KCe,QCe,"esm2020")}qWt();var YCe={};const XCe="@firebase/database",JCe="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let hze="";function jWt(t){hze=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BWt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ao(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:qD(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Wt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return z_(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dze=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new BWt(e)}}catch{}return new $Wt},zE=dze("localStorage"),zWt=dze("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hS=new qz("@firebase/database"),HWt=function(){let t=1;return function(){return t++}}(),fze=function(t){const e=o3t(t),n=new n3t;n.update(e);const s=n.digest();return nce.encodeByteArray(s)},p2=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=p2.apply(null,s):typeof s=="object"?e+=Ao(s):e+=s,e+=" "}return e};let TN=null,ZCe=!0;const WWt=function(t,e){xe(!0,"Can't turn on custom loggers persistently."),hS.logLevel=En.VERBOSE,TN=hS.log.bind(hS)},oc=function(...t){if(ZCe===!0&&(ZCe=!1,TN===null&&zWt.get("logging_enabled")===!0&&WWt()),TN){const e=p2.apply(null,t);TN(e)}},g2=function(t){return function(...e){oc(t,...e)}},PJ=function(...t){const e="FIREBASE INTERNAL ERROR: "+p2(...t);hS.error(e)},b_=function(...t){const e=`FIREBASE FATAL ERROR: ${p2(...t)}`;throw hS.error(e),new Error(e)},vu=function(...t){const e="FIREBASE WARNING: "+p2(...t);hS.warn(e)},GWt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pze=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},KWt=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ok="[MIN_NAME]",fC="[MAX_NAME]",tR=function(t,e){if(t===e)return 0;if(t===Ok||e===fC)return-1;if(e===Ok||t===fC)return 1;{const n=e0e(t),s=e0e(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},QWt=function(t,e){return t===e?0:t<e?-1:1},YR=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ao(e))},ole=function(t){if(typeof t!="object"||t===null)return Ao(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ao(e[s]),n+=":",n+=ole(t[e[s]]);return n+="}",n},gze=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Cu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const mze=function(t){xe(!pze(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},YWt=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},XWt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function JWt(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const ZWt=new RegExp("^-?(0*)\\d{1,10}$"),e8t=-2147483648,t8t=2147483647,e0e=function(t){if(ZWt.test(t)){const e=Number(t);if(e>=e8t&&e<=t8t)return e}return null},nR=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vu("Exception was thrown by user callback.",n),e},Math.floor(0))}},n8t=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},CN=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class s8t{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Du(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){vu(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r8t{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(oc("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vu(e)}}class PV{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}PV.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ale="5",_ze="v",yze="s",vze="r",wze="f",bze=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Eze="ls",Tze="p",NJ="ac",Cze="websocket",Ize="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sze{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zE.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function i8t(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kze(t,e,n){xe(typeof e=="string","typeof type must == string"),xe(typeof n=="object","typeof params must == object");let s;if(e===Cze)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ize)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);i8t(t)&&(n.ns=t.namespace);const r=[];return Cu(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o8t{constructor(){this.counters_={}}incrementCounter(e,n=1){z_(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ljt(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yG={},vG={};function cle(t){const e=t.toString();return yG[e]||(yG[e]=new o8t),yG[e]}function a8t(t,e){const n=t.toString();return vG[n]||(vG[n]=e()),vG[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c8t{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&nR(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const t0e="start",l8t="close",u8t="pLPCommand",h8t="pRTLPCB",Rze="id",Aze="pw",Pze="ser",d8t="cb",f8t="seg",p8t="ts",g8t="d",m8t="dframe",Nze=1870,xze=30,_8t=Nze-xze,y8t=25e3,v8t=3e4;class wI{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=g2(e),this.stats_=cle(n),this.urlFn=l=>(this.appCheckToken&&(l[NJ]=this.appCheckToken),kze(n,Ize,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new c8t(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(v8t)),KWt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lle((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===t0e)this.id=a,this.password=l;else if(o===l8t)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[t0e]="t",s[Pze]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[d8t]=this.scriptTagHolder.uniqueCallbackIdentifier),s[_ze]=ale,this.transportSessionId&&(s[yze]=this.transportSessionId),this.lastSessionId&&(s[Eze]=this.lastSessionId),this.applicationId&&(s[Tze]=this.applicationId),this.appCheckToken&&(s[NJ]=this.appCheckToken),typeof location<"u"&&location.hostname&&bze.test(location.hostname)&&(s[vze]=wze);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wI.forceAllow_=!0}static forceDisallow(){wI.forceDisallow_=!0}static isAvailable(){return wI.forceAllow_?!0:!wI.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!YWt()&&!XWt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ao(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=vBe(n),r=gze(s,_8t);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[m8t]="t",s[Rze]=e,s[Aze]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ao(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class lle{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=HWt(),window[u8t+this.uniqueCallbackIdentifier]=e,window[h8t+this.uniqueCallbackIdentifier]=n,this.myIFrame=lle.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){oc("frame writing exception"),a.stack&&oc(a.stack),oc(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||oc("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Rze]=this.myID,e[Aze]=this.myPW,e[Pze]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xze+s.length<=Nze;){const i=this.pendingSegs.shift();s=s+"&"+f8t+r+"="+i.seg+"&"+p8t+r+"="+i.ts+"&"+g8t+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(y8t)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{oc("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const w8t=16384,b8t=45e3;let hq=null;typeof MozWebSocket<"u"?hq=MozWebSocket:typeof WebSocket<"u"&&(hq=WebSocket);class Jh{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=g2(this.connId),this.stats_=cle(n),this.connURL=Jh.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[_ze]=ale,typeof location<"u"&&location.hostname&&bze.test(location.hostname)&&(o[vze]=wze),n&&(o[yze]=n),s&&(o[Eze]=s),r&&(o[NJ]=r),i&&(o[Tze]=i),kze(e,Cze,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zE.set("previous_websocket_failure",!0);try{let s;Gjt(),this.mySock=new hq(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Jh.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&hq!==null&&!Jh.forceDisallow_}static previouslyFailed(){return zE.isInMemoryStorage||zE.get("previous_websocket_failure")===!0}markConnectionHealthy(){zE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=qD(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(xe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ao(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=gze(n,w8t);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b8t))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jh.responsesRequiredToBeHealthy=2;Jh.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XD{static get ALL_TRANSPORTS(){return[wI,Jh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Jh&&Jh.isAvailable();let s=n&&!Jh.previouslyFailed();if(e.webSocketOnly&&(n||vu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Jh];else{const r=this.transports_=[];for(const i of XD.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);XD.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}XD.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const E8t=6e4,T8t=5e3,C8t=10*1024,I8t=100*1024,wG="t",n0e="d",S8t="s",s0e="r",k8t="e",r0e="o",i0e="a",o0e="n",a0e="p",R8t="h";class A8t{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=g2("c:"+this.id+":"),this.transportManager_=new XD(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=CN(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>I8t?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>C8t?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wG in e){const n=e[wG];n===i0e?this.upgradeIfSecondaryHealthy_():n===s0e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===r0e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=YR("t",e),s=YR("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:a0e,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:i0e,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:o0e,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=YR("t",e),s=YR("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=YR(wG,e);if(n0e in e){const s=e[n0e];if(n===R8t){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===o0e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===S8t?this.onConnectionShutdown_(s):n===s0e?this.onReset_(s):n===k8t?PJ("Server Error: "+s):n===r0e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PJ("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ale!==s&&vu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),CN(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(E8t))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):CN(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(T8t))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:a0e,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dze{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oze{constructor(e){this.allowedEvents_=e,this.listeners_={},xe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){xe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dq extends Oze{static getInstance(){return new dq}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ice()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return xe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c0e=32,l0e=768;class Xs{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function cs(){return new Xs("")}function gn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Kw(t){return t.pieces_.length-t.pieceNum_}function cr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Xs(t.pieces_,e)}function Lze(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function P8t(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Mze(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Fze(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Xs(e,0)}function No(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Xs)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Xs(n,0)}function kn(t){return t.pieceNum_>=t.pieces_.length}function sl(t,e){const n=gn(t),s=gn(e);if(n===null)return e;if(n===s)return sl(cr(t),cr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ule(t,e){if(Kw(t)!==Kw(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function pd(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Kw(t)>Kw(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class N8t{constructor(e,n){this.errorPrefix_=n,this.parts_=Mze(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Uz(this.parts_[s]);Vze(this)}}function x8t(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Uz(e),Vze(t)}function D8t(t){const e=t.parts_.pop();t.byteLength_-=Uz(e),t.parts_.length>0&&(t.byteLength_-=1)}function Vze(t){if(t.byteLength_>l0e)throw new Error(t.errorPrefix_+"has a key path longer than "+l0e+" bytes ("+t.byteLength_+").");if(t.parts_.length>c0e)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+c0e+") or object contains a cycle "+mE(t))}function mE(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hle extends Oze{static getInstance(){return new hle}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return xe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const XR=1e3,O8t=300*1e3,u0e=30*1e3,L8t=1.3,M8t=3e4,F8t="server_kill",h0e=3;class Mm extends Dze{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Mm.nextPersistentConnectionId_++,this.log_=g2("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=XR,this.maxReconnectDelay_=O8t,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hle.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dq.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(Ao(i)),xe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new Mz,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Mm.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&z_(e,"w")){const s=Sk(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();vu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||t3t(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=u0e)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=e3t(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),xe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ao(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):PJ("Unrecognized action received from server: "+Ao(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){xe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=XR,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=XR,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>M8t&&(this.reconnectDelay_=XR),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*L8t)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Mm.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){xe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?oc("getToken() completed but was canceled"):(oc("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new A8t(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{vu(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(F8t)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&vu(d),l())}}}interrupt(e){oc("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){oc("Resuming connection for reason: "+e),delete this.interruptReasons_[e],XX(this.interruptReasons_)&&(this.reconnectDelay_=XR,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>ole(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Xs(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){oc("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=h0e&&(this.reconnectDelay_=u0e,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){oc("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=h0e&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+hze.replace(/\./g,"-")]=1,ice()?e["framework.cordova"]=1:CBe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dq.getInstance().currentlyOnline();return XX(this.interruptReasons_)&&e}}Mm.nextPersistentConnectionId_=0;Mm.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Bn=class Uze{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Uze(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hH{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Bn(Ok,e),r=new Bn(Ok,n);return this.compare(s,r)!==0}minPost(){return Bn.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let KF;class qze extends hH{static get __EMPTY_NODE(){return KF}static set __EMPTY_NODE(e){KF=e}compare(e,n){return tR(e.name,n.name)}isDefinedOn(e){throw K1("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Bn.MIN}maxPost(){return new Bn(fC,KF)}makePost(e,n){return xe(typeof e=="string","KeyIndex indexValue must always be a string."),new Bn(e,KF)}toString(){return".key"}}const dS=new qze;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QF{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class sa{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??sa.RED,this.left=r??du.EMPTY_NODE,this.right=i??du.EMPTY_NODE}copy(e,n,s,r,i){return new sa(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return du.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return du.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,sa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,sa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}sa.RED=!0;sa.BLACK=!1;class V8t{copy(e,n,s,r,i){return this}insert(e,n,s){return new sa(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class du{constructor(e,n=du.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new du(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,sa.BLACK,null,null))}remove(e){return new du(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sa.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new QF(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new QF(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new QF(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new QF(this.root_,null,this.comparator_,!0,e)}}du.EMPTY_NODE=new V8t;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function U8t(t,e){return tR(t.name,e.name)}function dle(t,e){return tR(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let xJ;function q8t(t){xJ=t}const jze=function(t){return typeof t=="number"?"number:"+mze(t):"string:"+t},Bze=function(t){if(t.isLeafNode()){const e=t.val();xe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&z_(e,".sv"),"Priority must be a string or number.")}else xe(t===xJ||t.isEmpty(),"priority of unexpected type.");xe(t===xJ||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let d0e;class Ko{static set __childrenNodeConstructor(e){d0e=e}static get __childrenNodeConstructor(){return d0e}constructor(e,n=Ko.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,xe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bze(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ko(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ko.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return kn(e)?this:gn(e)===".priority"?this.priorityNode_:Ko.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ko.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=gn(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(xe(s!==".priority"||Kw(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ko.__childrenNodeConstructor.EMPTY_NODE.updateChild(cr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jze(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=mze(this.value_):e+=this.value_,this.lazyHash_=fze(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ko.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ko.__childrenNodeConstructor?-1:(xe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Ko.VALUE_TYPE_ORDER.indexOf(n),i=Ko.VALUE_TYPE_ORDER.indexOf(s);return xe(r>=0,"Unknown leaf type: "+n),xe(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ko.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let $ze,zze;function j8t(t){$ze=t}function B8t(t){zze=t}class $8t extends hH{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?tR(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Bn.MIN}maxPost(){return new Bn(fC,new Ko("[PRIORITY-POST]",zze))}makePost(e,n){const s=$ze(e);return new Bn(n,new Ko("[PRIORITY-POST]",s))}toString(){return".priority"}}const ci=new $8t;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z8t=Math.log(2);class H8t{constructor(e){const n=i=>parseInt(Math.log(i)/z8t,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fq=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new sa(p,d.node,sa.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),R=r(m+1,u);return d=t[m],p=n?n(d):d,new sa(p,d.node,sa.BLACK,w,R)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,R){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new sa(q,V.node,R,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?p(P,sa.BLACK):(p(P,sa.BLACK),p(P,sa.RED))}return h},o=new H8t(t.length),a=i(o);return new du(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let bG;const I0={};class Sm{static get Default(){return xe(I0&&ci,"ChildrenNode.ts has not been loaded"),bG=bG||new Sm({".priority":I0},{".priority":ci}),bG}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Sk(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof du?n:null}hasIndex(e){return z_(this.indexSet_,e.toString())}addIndex(e,n){xe(e!==dS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Bn.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=fq(s,e.getCompare()):a=I0;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Sm(h,u)}addToIndexes(e,n){const s=W9(this.indexes_,(r,i)=>{const o=Sk(this.indexSet_,i);if(xe(o,"Missing index implementation for "+i),r===I0)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Bn.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),fq(a,o.getCompare())}else return I0;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Bn(e.name,a))),l.insert(e,e.node)}});return new Sm(s,this.indexSet_)}removeFromIndexes(e,n){const s=W9(this.indexes_,r=>{if(r===I0)return r;{const i=n.get(e.name);return i?r.remove(new Bn(e.name,i)):r}});return new Sm(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let JR,tn=class uI{static get EMPTY_NODE(){return JR||(JR=new uI(new du(dle),null,Sm.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Bze(this.priorityNode_),this.children_.isEmpty()&&xe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||JR}updatePriority(e){return this.children_.isEmpty()?this:new uI(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?JR:n}}getChild(e){const n=gn(e);return n===null?this:this.getImmediateChild(n).getChild(cr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(xe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Bn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?JR:this.priorityNode_;return new uI(r,o,i)}}updateChild(e,n){const s=gn(e);if(s===null)return n;{xe(gn(e)!==".priority"||Kw(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(cr(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(ci,(o,a)=>{n[o]=a.val(e),s++,i&&uI.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jze(this.getPriority().val())+":"),this.forEachChild(ci,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":fze(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Bn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Bn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Bn(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Bn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Bn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===m2?-1:0}withIndex(e){if(e===dS||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new uI(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===dS||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(ci),r=n.getIterator(ci);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===dS?null:this.indexMap_.get(e.toString())}};tn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class W8t extends tn{constructor(){super(new du(dle),tn.EMPTY_NODE,Sm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}}const m2=new W8t;Object.defineProperties(Bn,{MIN:{value:new Bn(Ok,tn.EMPTY_NODE)},MAX:{value:new Bn(fC,m2)}});qze.__EMPTY_NODE=tn.EMPTY_NODE;Ko.__childrenNodeConstructor=tn;q8t(m2);B8t(m2);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G8t=!0;function ca(t,e=null){if(t===null)return tn.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),xe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ko(n,ca(e))}if(!(t instanceof Array)&&G8t){const n=[];let s=!1;if(Cu(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=ca(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new Bn(i,a)))}}),n.length===0)return tn.EMPTY_NODE;const r=fq(n,U8t,i=>i.name,dle);if(s){const i=fq(n,ci.getCompare());return new tn(r,ca(e),new Sm({".priority":i},{".priority":ci}))}else return new tn(r,ca(e),Sm.Default)}else{let n=tn.EMPTY_NODE;return Cu(t,(s,r)=>{if(z_(t,s)&&s.substring(0,1)!=="."){const i=ca(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(ca(e))}}j8t(ca);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K8t extends hH{constructor(e){super(),this.indexPath_=e,xe(!kn(e)&&gn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?tR(e.name,n.name):i}makePost(e,n){const s=ca(e),r=tn.EMPTY_NODE.updateChild(this.indexPath_,s);return new Bn(n,r)}maxPost(){const e=tn.EMPTY_NODE.updateChild(this.indexPath_,m2);return new Bn(fC,e)}toString(){return Mze(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q8t extends hH{compare(e,n){const s=e.node.compareTo(n.node);return s===0?tR(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Bn.MIN}maxPost(){return Bn.MAX}makePost(e,n){const s=ca(e);return new Bn(n,s)}toString(){return".value"}}const Y8t=new Q8t;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hze(t){return{type:"value",snapshotNode:t}}function Lk(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function JD(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ZD(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function X8t(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fle{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){xe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(JD(n,a)):xe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Lk(n,s)):o.trackChildChange(ZD(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(ci,(r,i)=>{n.hasChild(r)||s.trackChildChange(JD(r,i))}),n.isLeafNode()||n.forEachChild(ci,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(ZD(r,i,o))}else s.trackChildChange(Lk(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?tn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eO{constructor(e){this.indexedFilter_=new fle(e.getIndex()),this.index_=e.getIndex(),this.startPost_=eO.getStartPost_(e),this.endPost_=eO.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Bn(n,s))||(s=tn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=tn.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(tn.EMPTY_NODE);const i=this;return n.forEachChild(ci,(o,a)=>{i.matches(new Bn(o,a))||(r=r.updateImmediateChild(o,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J8t{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new eO(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Bn(n,s))||(s=tn.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=tn.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=tn.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(tn.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;xe(a.numChildren()===this.limit_,"");const l=new Bn(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(ZD(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(JD(n,d));const w=a.updateImmediateChild(n,tn.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(Lk(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(JD(u.name,u.node)),i.trackChildChange(Lk(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,tn.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ple{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ci}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return xe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ok}hasEnd(){return this.endSet_}getIndexEndValue(){return xe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fC}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return xe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ci}copy(){const e=new ple;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Z8t(t){return t.loadsAllData()?new fle(t.getIndex()):t.hasLimit()?new J8t(t):new eO(t)}function f0e(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ci?n="$priority":t.index_===Y8t?n="$value":t.index_===dS?n="$key":(xe(t.index_ instanceof K8t,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ao(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ao(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ao(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ao(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ao(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function p0e(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ci&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pq extends Dze{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(xe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=g2("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=pq.getListenId_(e,s),a={};this.listens_[o]=a;const l=f0e(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),Sk(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=pq.getListenId_(e,n);delete this.listens_[s]}get(e){const n=f0e(e._queryParams),s=e._path.toString(),r=new Mz;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Q1(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=qD(a.responseText)}catch{vu("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&vu("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eGt{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gq(){return{value:null,children:new Map}}function Wze(t,e,n){if(kn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=gn(e);t.children.has(s)||t.children.set(s,gq());const r=t.children.get(s);e=cr(e),Wze(r,e,n)}}function DJ(t,e,n){t.value!==null?n(e,t.value):tGt(t,(s,r)=>{const i=new Xs(e.toString()+"/"+s);DJ(r,i,n)})}function tGt(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nGt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Cu(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g0e=10*1e3,sGt=30*1e3,rGt=300*1e3;class iGt{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new nGt(e);const s=g0e+(sGt-g0e)*Math.random();CN(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Cu(e,(r,i)=>{i>0&&z_(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),CN(this.reportStats_.bind(this),Math.floor(Math.random()*2*rGt))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gd;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(gd||(gd={}));function Gze(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gle(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mle(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mq{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=gd.ACK_USER_WRITE,this.source=Gze()}operationForChild(e){if(kn(this.path)){if(this.affectedTree.value!=null)return xe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Xs(e));return new mq(cs(),n,this.revert)}}else return xe(gn(this.path)===e,"operationForChild called for unrelated child."),new mq(cr(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tO{constructor(e,n){this.source=e,this.path=n,this.type=gd.LISTEN_COMPLETE}operationForChild(e){return kn(this.path)?new tO(this.source,cs()):new tO(this.source,cr(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pC{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=gd.OVERWRITE}operationForChild(e){return kn(this.path)?new pC(this.source,cs(),this.snap.getImmediateChild(e)):new pC(this.source,cr(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nO{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=gd.MERGE}operationForChild(e){if(kn(this.path)){const n=this.children.subtree(new Xs(e));return n.isEmpty()?null:n.value?new pC(this.source,cs(),n.value):new nO(this.source,cs(),n)}else return xe(gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nO(this.source,cr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qw{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kn(e))return this.isFullyInitialized()&&!this.filtered_;const n=gn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oGt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aGt(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(X8t(o.childName,o.snapshotNode))}),ZR(t,r,"child_removed",e,s,n),ZR(t,r,"child_added",e,s,n),ZR(t,r,"child_moved",i,s,n),ZR(t,r,"child_changed",e,s,n),ZR(t,r,"value",e,s,n),r}function ZR(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>lGt(t,a,l)),o.forEach(a=>{const l=cGt(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function cGt(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function lGt(t,e,n){if(e.childName==null||n.childName==null)throw K1("Should only compare child_ events.");const s=new Bn(e.childName,e.snapshotNode),r=new Bn(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dH(t,e){return{eventCache:t,serverCache:e}}function IN(t,e,n,s){return dH(new Qw(e,n,s),t.serverCache)}function Kze(t,e,n,s){return dH(t.eventCache,new Qw(e,n,s))}function _q(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function gC(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let EG;const uGt=()=>(EG||(EG=new du(QWt)),EG);class vr{static fromObject(e){let n=new vr(null);return Cu(e,(s,r)=>{n=n.set(new Xs(s),r)}),n}constructor(e,n=uGt()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:cs(),value:this.value};if(kn(e))return null;{const s=gn(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(cr(e),n);return i!=null?{path:No(new Xs(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(kn(e))return this;{const n=gn(e),s=this.children.get(n);return s!==null?s.subtree(cr(e)):new vr(null)}}set(e,n){if(kn(e))return new vr(n,this.children);{const s=gn(e),r=(this.children.get(s)||new vr(null)).set(cr(e),n),i=this.children.insert(s,r);return new vr(this.value,i)}}remove(e){if(kn(e))return this.children.isEmpty()?new vr(null):new vr(null,this.children);{const n=gn(e),s=this.children.get(n);if(s){const r=s.remove(cr(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new vr(null):new vr(this.value,i)}else return this}}get(e){if(kn(e))return this.value;{const n=gn(e),s=this.children.get(n);return s?s.get(cr(e)):null}}setTree(e,n){if(kn(e))return n;{const s=gn(e),r=(this.children.get(s)||new vr(null)).setTree(cr(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new vr(this.value,i)}}fold(e){return this.fold_(cs(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(No(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,cs(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(kn(e))return null;{const i=gn(e),o=this.children.get(i);return o?o.findOnPath_(cr(e),No(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,cs(),n)}foreachOnPath_(e,n,s){if(kn(e))return this;{this.value&&s(n,this.value);const r=gn(e),i=this.children.get(r);return i?i.foreachOnPath_(cr(e),No(n,r),s):new vr(null)}}foreach(e){this.foreach_(cs(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(No(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bd{constructor(e){this.writeTree_=e}static empty(){return new Bd(new vr(null))}}function SN(t,e,n){if(kn(e))return new Bd(new vr(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=sl(r,e);return i=i.updateChild(o,n),new Bd(t.writeTree_.set(r,i))}else{const r=new vr(n),i=t.writeTree_.setTree(e,r);return new Bd(i)}}}function m0e(t,e,n){let s=t;return Cu(n,(r,i)=>{s=SN(s,No(e,r),i)}),s}function _0e(t,e){if(kn(e))return Bd.empty();{const n=t.writeTree_.setTree(e,new vr(null));return new Bd(n)}}function OJ(t,e){return e0(t,e)!=null}function e0(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(sl(n.path,e)):null}function y0e(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ci,(s,r)=>{e.push(new Bn(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Bn(s,r.value))}),e}function Fv(t,e){if(kn(e))return t;{const n=e0(t,e);return n!=null?new Bd(new vr(n)):new Bd(t.writeTree_.subtree(e))}}function LJ(t){return t.writeTree_.isEmpty()}function Mk(t,e){return Qze(cs(),t.writeTree_,e)}function Qze(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(xe(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=Qze(No(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(No(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fH(t,e){return Zze(e,t)}function hGt(t,e,n,s,r){xe(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=SN(t.visibleWrites,e,n)),t.lastWriteId=s}function dGt(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function fGt(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);xe(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&pGt(a,s.path)?r=!1:pd(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return gGt(t),!0;if(s.snap)t.visibleWrites=_0e(t.visibleWrites,s.path);else{const a=s.children;Cu(a,l=>{t.visibleWrites=_0e(t.visibleWrites,No(s.path,l))})}return!0}else return!1}function pGt(t,e){if(t.snap)return pd(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pd(No(t.path,n),e))return!0;return!1}function gGt(t){t.visibleWrites=Yze(t.allWrites,mGt,cs()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mGt(t){return t.visible}function Yze(t,e,n){let s=Bd.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)pd(n,o)?(a=sl(n,o),s=SN(s,a,i.snap)):pd(o,n)&&(a=sl(o,n),s=SN(s,cs(),i.snap.getChild(a)));else if(i.children){if(pd(n,o))a=sl(n,o),s=m0e(s,a,i.children);else if(pd(o,n))if(a=sl(o,n),kn(a))s=m0e(s,cs(),i.children);else{const l=Sk(i.children,gn(a));if(l){const u=l.getChild(cr(a));s=SN(s,cs(),u)}}}else throw K1("WriteRecord should have .snap or .children")}}return s}function Xze(t,e,n,s,r){if(!s&&!r){const i=e0(t.visibleWrites,e);if(i!=null)return i;{const o=Fv(t.visibleWrites,e);if(LJ(o))return n;if(n==null&&!OJ(o,cs()))return null;{const a=n||tn.EMPTY_NODE;return Mk(o,a)}}}else{const i=Fv(t.visibleWrites,e);if(!r&&LJ(i))return n;if(!r&&n==null&&!OJ(i,cs()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(pd(u.path,e)||pd(e,u.path))},a=Yze(t.allWrites,o,e),l=n||tn.EMPTY_NODE;return Mk(a,l)}}}function _Gt(t,e,n){let s=tn.EMPTY_NODE;const r=e0(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ci,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Fv(t.visibleWrites,e);return n.forEachChild(ci,(o,a)=>{const l=Mk(Fv(i,new Xs(o)),a);s=s.updateImmediateChild(o,l)}),y0e(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Fv(t.visibleWrites,e);return y0e(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function yGt(t,e,n,s,r){xe(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=No(e,n);if(OJ(t.visibleWrites,i))return null;{const o=Fv(t.visibleWrites,i);return LJ(o)?r.getChild(n):Mk(o,r.getChild(n))}}function vGt(t,e,n,s){const r=No(e,n),i=e0(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Fv(t.visibleWrites,r);return Mk(o,s.getNode().getImmediateChild(n))}else return null}function wGt(t,e){return e0(t.visibleWrites,e)}function bGt(t,e,n,s,r,i,o){let a;const l=Fv(t.visibleWrites,e),u=e0(l,cs());if(u!=null)a=u;else if(n!=null)a=Mk(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function EGt(){return{visibleWrites:Bd.empty(),allWrites:[],lastWriteId:-1}}function yq(t,e,n,s){return Xze(t.writeTree,t.treePath,e,n,s)}function _le(t,e){return _Gt(t.writeTree,t.treePath,e)}function v0e(t,e,n,s){return yGt(t.writeTree,t.treePath,e,n,s)}function vq(t,e){return wGt(t.writeTree,No(t.treePath,e))}function TGt(t,e,n,s,r,i){return bGt(t.writeTree,t.treePath,e,n,s,r,i)}function yle(t,e,n){return vGt(t.writeTree,t.treePath,e,n)}function Jze(t,e){return Zze(No(t.treePath,e),t.writeTree)}function Zze(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CGt{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;xe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),xe(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,ZD(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,JD(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,Lk(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,ZD(s,e.snapshotNode,r.oldSnap));else throw K1("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IGt{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const eHe=new IGt;class vle{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Qw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yle(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:gC(this.viewCache_),i=TGt(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SGt(t){return{filter:t}}function kGt(t,e){xe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),xe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function RGt(t,e,n,s,r){const i=new CGt;let o,a;if(n.type===gd.OVERWRITE){const u=n;u.source.fromUser?o=MJ(t,e,u.path,u.snap,s,r,i):(xe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!kn(u.path),o=wq(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===gd.MERGE){const u=n;u.source.fromUser?o=PGt(t,e,u.path,u.children,s,r,i):(xe(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=FJ(t,e,u.path,u.children,s,r,a,i))}else if(n.type===gd.ACK_USER_WRITE){const u=n;u.revert?o=DGt(t,e,u.path,s,r,i):o=NGt(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===gd.LISTEN_COMPLETE)o=xGt(t,e,n.path,s,i);else throw K1("Unknown operation type: "+n.type);const l=i.getChanges();return AGt(e,o,l),{viewCache:o,changes:l}}function AGt(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=_q(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(Hze(_q(e)))}}function tHe(t,e,n,s,r,i){const o=e.eventCache;if(vq(s,n)!=null)return e;{let a,l;if(kn(n))if(xe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=gC(e),h=u instanceof tn?u:tn.EMPTY_NODE,d=_le(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=yq(s,gC(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=gn(n);if(u===".priority"){xe(Kw(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=v0e(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=cr(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=v0e(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=yle(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return IN(e,a,o.isFullyInitialized()||kn(n),t.filter.filtersNodes())}}function wq(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(kn(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=gn(n);if(!l.isCompleteForPath(n)&&Kw(n)>1)return e;const w=cr(n),R=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),R):u=h.updateChild(l.getNode(),m,R,w,eHe,null)}const d=Kze(e,u,l.isFullyInitialized()||kn(n),h.filtersNodes()),p=new vle(r,d,i);return tHe(t,d,n,r,p,a)}function MJ(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new vle(r,e,i);if(kn(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=IN(e,u,!0,t.filter.filtersNodes());else{const d=gn(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=IN(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=cr(n),m=a.getNode().getImmediateChild(d);let w;if(kn(p))w=s;else{const R=h.getCompleteChild(d);R!=null?Lze(p)===".priority"&&R.getChild(Fze(p)).isEmpty()?w=R:w=R.updateChild(p,s):w=tn.EMPTY_NODE}if(m.equals(w))l=e;else{const R=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=IN(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function w0e(t,e){return t.eventCache.isCompleteForChild(e)}function PGt(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=No(n,l);w0e(e,gn(h))&&(a=MJ(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=No(n,l);w0e(e,gn(h))||(a=MJ(t,a,h,u,r,i,o))}),a}function b0e(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function FJ(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;kn(n)?u=s:u=new vr(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=b0e(t,m,p);l=wq(t,l,new Xs(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),R=b0e(t,w,p);l=wq(t,l,new Xs(d),R,r,i,o,a)}}),l}function NGt(t,e,n,s,r,i,o){if(vq(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(kn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return wq(t,e,n,l.getNode().getChild(n),r,i,a,o);if(kn(n)){let u=new vr(null);return l.getNode().forEachChild(dS,(h,d)=>{u=u.set(new Xs(h),d)}),FJ(t,e,n,u,r,i,a,o)}else return e}else{let u=new vr(null);return s.foreach((h,d)=>{const p=No(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),FJ(t,e,n,u,r,i,a,o)}}function xGt(t,e,n,s,r){const i=e.serverCache,o=Kze(e,i.getNode(),i.isFullyInitialized()||kn(n),i.isFiltered());return tHe(t,o,n,s,eHe,r)}function DGt(t,e,n,s,r,i){let o;if(vq(s,n)!=null)return e;{const a=new vle(s,e,r),l=e.eventCache.getNode();let u;if(kn(n)||gn(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=yq(s,gC(e));else{const d=e.serverCache.getNode();xe(d instanceof tn,"serverChildren would be complete if leaf node"),h=_le(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=gn(n);let d=yle(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,cr(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,tn.EMPTY_NODE,cr(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yq(s,gC(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||vq(s,cs())!=null,IN(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OGt{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new fle(s.getIndex()),i=Z8t(s);this.processor_=SGt(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(tn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(tn.EMPTY_NODE,a.getNode(),null),h=new Qw(l,o.isFullyInitialized(),r.filtersNodes()),d=new Qw(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=dH(d,h),this.eventGenerator_=new oGt(this.query_)}get query(){return this.query_}}function LGt(t){return t.viewCache_.serverCache.getNode()}function MGt(t){return _q(t.viewCache_)}function FGt(t,e){const n=gC(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!kn(e)&&!n.getImmediateChild(gn(e)).isEmpty())?n.getChild(e):null}function E0e(t){return t.eventRegistrations_.length===0}function VGt(t,e){t.eventRegistrations_.push(e)}function T0e(t,e,n){const s=[];if(n){xe(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function C0e(t,e,n,s){e.type===gd.MERGE&&e.source.queryId!==null&&(xe(gC(t.viewCache_),"We should always have a full cache before handling merges"),xe(_q(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=RGt(t.processor_,r,e,n,s);return kGt(t.processor_,i.viewCache),xe(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,nHe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function UGt(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ci,(r,i)=>{s.push(Lk(r,i))}),n.isFullyInitialized()&&s.push(Hze(n.getNode())),nHe(t,s,n.getNode(),e)}function nHe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return aGt(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let bq;class sHe{constructor(){this.views=new Map}}function qGt(t){xe(!bq,"__referenceConstructor has already been defined"),bq=t}function jGt(){return xe(bq,"Reference.ts has not been loaded"),bq}function BGt(t){return t.views.size===0}function wle(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return xe(i!=null,"SyncTree gave us an op for an invalid query."),C0e(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(C0e(o,e,n,s));return i}}function rHe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=yq(n,r?s:null),l=!1;a?l=!0:s instanceof tn?(a=_le(n,s),l=!1):(a=tn.EMPTY_NODE,l=!1);const u=dH(new Qw(a,l,!1),new Qw(s,r,!1));return new OGt(e,u)}return o}function $Gt(t,e,n,s,r,i){const o=rHe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),VGt(o,n),UGt(o,n)}function zGt(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Yw(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(T0e(u,n,s)),E0e(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(T0e(l,n,s)),E0e(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Yw(t)&&i.push(new(jGt())(e._repo,e._path)),{removed:i,events:o}}function iHe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Vv(t,e){let n=null;for(const s of t.views.values())n=n||FGt(s,e);return n}function oHe(t,e){if(e._queryParams.loadsAllData())return pH(t);{const n=e._queryIdentifier;return t.views.get(n)}}function aHe(t,e){return oHe(t,e)!=null}function Yw(t){return pH(t)!=null}function pH(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Eq;function HGt(t){xe(!Eq,"__referenceConstructor has already been defined"),Eq=t}function WGt(){return xe(Eq,"Reference.ts has not been loaded"),Eq}let GGt=1;class I0e{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vr(null),this.pendingWriteTree_=EGt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function cHe(t,e,n,s,r){return hGt(t.pendingWriteTree_,e,n,s,r),r?y2(t,new pC(Gze(),e,n)):[]}function HE(t,e,n=!1){const s=dGt(t.pendingWriteTree_,e);if(fGt(t.pendingWriteTree_,e)){let r=new vr(null);return s.snap!=null?r=r.set(cs(),!0):Cu(s.children,i=>{r=r.set(new Xs(i),!0)}),y2(t,new mq(s.path,r,n))}else return[]}function _2(t,e,n){return y2(t,new pC(gle(),e,n))}function KGt(t,e,n){const s=vr.fromObject(n);return y2(t,new nO(gle(),e,s))}function QGt(t,e){return y2(t,new tO(gle(),e))}function YGt(t,e,n){const s=Ele(t,n);if(s){const r=Tle(s),i=r.path,o=r.queryId,a=sl(i,e),l=new tO(mle(o),a);return Cle(t,i,l)}else return[]}function Tq(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||aHe(o,e))){const l=zGt(o,e,n,s);BGt(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Yw(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=ZGt(p);for(let w=0;w<m.length;++w){const R=m[w],P=R.query,O=dHe(t,R);t.listenProvider_.startListening(kN(P),sO(t,P),O.hashFn,O.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(kN(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(gH(p));t.listenProvider_.stopListening(kN(p),m)}))}eKt(t,u)}return a}function lHe(t,e,n,s){const r=Ele(t,s);if(r!=null){const i=Tle(r),o=i.path,a=i.queryId,l=sl(o,e),u=new pC(mle(a),l,n);return Cle(t,o,u)}else return[]}function XGt(t,e,n,s){const r=Ele(t,s);if(r){const i=Tle(r),o=i.path,a=i.queryId,l=sl(o,e),u=vr.fromObject(n),h=new nO(mle(a),l,u);return Cle(t,o,h)}else return[]}function VJ(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=sl(p,r);i=i||Vv(m,w),o=o||Yw(m)});let a=t.syncPointTree_.get(r);a?(o=o||Yw(a),i=i||Vv(a,cs())):(a=new sHe,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=tn.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=Vv(m,cs());w&&(i=i.updateImmediateChild(p,w))}));const u=aHe(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=gH(e);xe(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=tKt();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=fH(t.pendingWriteTree_,r);let d=$Gt(a,e,n,h,i,l);if(!u&&!o&&!s){const p=oHe(a,e);d=d.concat(nKt(t,e,p))}return d}function ble(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=sl(i,e),l=Vv(o,a);if(l)return l});return Xze(s,e,r,n,!0)}function JGt(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=sl(u,n);s=s||Vv(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Vv(r,cs()):(r=new sHe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Qw(s,!0,!1):null,a=fH(t.pendingWriteTree_,e._path),l=rHe(r,e,a,i?o.getNode():tn.EMPTY_NODE,i);return MGt(l)}function y2(t,e){return uHe(e,t.syncPointTree_,null,fH(t.pendingWriteTree_,cs()))}function uHe(t,e,n,s){if(kn(t.path))return hHe(t,e,n,s);{const r=e.get(cs());n==null&&r!=null&&(n=Vv(r,cs()));let i=[];const o=gn(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=Jze(s,o);i=i.concat(uHe(a,l,u,h))}return r&&(i=i.concat(wle(r,t,s,n))),i}}function hHe(t,e,n,s){const r=e.get(cs());n==null&&r!=null&&(n=Vv(r,cs()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Jze(s,o),h=t.operationForChild(o);h&&(i=i.concat(hHe(h,a,l,u)))}),r&&(i=i.concat(wle(r,t,s,n))),i}function dHe(t,e){const n=e.query,s=sO(t,n);return{hashFn:()=>(LGt(e)||tn.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?YGt(t,n._path,s):QGt(t,n._path);{const i=JWt(r,n);return Tq(t,n,null,i)}}}}function sO(t,e){const n=gH(e);return t.queryToTagMap.get(n)}function gH(t){return t._path.toString()+"$"+t._queryIdentifier}function Ele(t,e){return t.tagToQueryMap.get(e)}function Tle(t){const e=t.indexOf("$");return xe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xs(t.substr(0,e))}}function Cle(t,e,n){const s=t.syncPointTree_.get(e);xe(s,"Missing sync point for query tag that we're tracking");const r=fH(t.pendingWriteTree_,e);return wle(s,n,r,null)}function ZGt(t){return t.fold((e,n,s)=>{if(n&&Yw(n))return[pH(n)];{let r=[];return n&&(r=iHe(n)),Cu(s,(i,o)=>{r=r.concat(o)}),r}})}function kN(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(WGt())(t._repo,t._path):t}function eKt(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=gH(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function tKt(){return GGt++}function nKt(t,e,n){const s=e._path,r=sO(t,e),i=dHe(t,n),o=t.listenProvider_.startListening(kN(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)xe(!Yw(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!kn(u)&&h&&Yw(h))return[pH(h).query];{let p=[];return h&&(p=p.concat(iHe(h).map(m=>m.query))),Cu(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(kN(h),sO(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ile{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ile(n)}node(){return this.node_}}class Sle{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=No(this.path_,e);return new Sle(this.syncTree_,n)}node(){return ble(this.syncTree_,this.path_)}}const sKt=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},S0e=function(t,e,n){if(!t||typeof t!="object")return t;if(xe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return rKt(t[".sv"],e,n);if(typeof t[".sv"]=="object")return iKt(t[".sv"],e);xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},rKt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:xe(!1,"Unexpected server value: "+t)}},iKt=function(t,e,n){t.hasOwnProperty("increment")||xe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&xe(!1,"Unexpected increment value: "+s);const r=e.node();if(xe(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},oKt=function(t,e,n,s){return kle(e,new Sle(n,t),s)},fHe=function(t,e,n){return kle(t,new Ile(e),n)};function kle(t,e,n){const s=t.getPriority().val(),r=S0e(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=S0e(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Ko(a,ca(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Ko(r))),o.forEachChild(ci,(a,l)=>{const u=kle(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rle{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Ale(t,e){let n=e instanceof Xs?e:new Xs(e),s=t,r=gn(n);for(;r!==null;){const i=Sk(s.node.children,r)||{children:{},childCount:0};s=new Rle(r,s,i),n=cr(n),r=gn(n)}return s}function sR(t){return t.node.value}function pHe(t,e){t.node.value=e,UJ(t)}function gHe(t){return t.node.childCount>0}function aKt(t){return sR(t)===void 0&&!gHe(t)}function mH(t,e){Cu(t.node.children,(n,s)=>{e(new Rle(n,t,s))})}function mHe(t,e,n,s){n&&e(t),mH(t,r=>{mHe(r,e,!0)})}function cKt(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function v2(t){return new Xs(t.parent===null?t.name:v2(t.parent)+"/"+t.name)}function UJ(t){t.parent!==null&&lKt(t.parent,t.name,t)}function lKt(t,e,n){const s=aKt(n),r=z_(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,UJ(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,UJ(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uKt=/[\[\].#$\/\u0000-\u001F\u007F]/,hKt=/[\[\].#$\u0000-\u001F\u007F]/,TG=10*1024*1024,_He=function(t){return typeof t=="string"&&t.length!==0&&!uKt.test(t)},yHe=function(t){return typeof t=="string"&&t.length!==0&&!hKt.test(t)},dKt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yHe(t)},fKt=function(t,e,n,s){Ple(oce(t,"value"),e,n)},Ple=function(t,e,n){const s=n instanceof Xs?new N8t(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mE(s));if(typeof e=="function")throw new Error(t+"contains a function "+mE(s)+" with contents = "+e.toString());if(pze(e))throw new Error(t+"contains "+e.toString()+" "+mE(s));if(typeof e=="string"&&e.length>TG/3&&Uz(e)>TG)throw new Error(t+"contains a string greater than "+TG+" utf8 bytes "+mE(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Cu(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!_He(o)))throw new Error(t+" contains an invalid key ("+o+") "+mE(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);x8t(s,o),Ple(t,a,s),D8t(s)}),r&&i)throw new Error(t+' contains ".value" child '+mE(s)+" in addition to actual children.")}},vHe=function(t,e,n,s){if(!yHe(n))throw new Error(oce(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},pKt=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vHe(t,e,n)},wHe=function(t,e){if(gn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gKt=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_He(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!dKt(n))throw new Error(oce(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mKt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Nle(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!ule(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function bHe(t,e,n){Nle(t,n),EHe(t,s=>ule(s,e))}function Wp(t,e,n){Nle(t,n),EHe(t,s=>pd(s,e)||pd(e,s))}function EHe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(_Kt(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _Kt(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();TN&&oc("event: "+n.toString()),nR(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yKt="repo_interrupt",vKt=25;class wKt{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mKt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gq(),this.transactionQueueTree_=new Rle,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bKt(t,e,n){if(t.stats_=cle(t.repoInfo_),t.forceRestClient_||n8t())t.server_=new pq(t.repoInfo_,(s,r,i,o)=>{k0e(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>R0e(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ao(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Mm(t.repoInfo_,e,(s,r,i,o)=>{k0e(t,s,r,i,o)},s=>{R0e(t,s)},s=>{TKt(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=a8t(t.repoInfo_,()=>new iGt(t.stats_,t.server_)),t.infoData_=new eGt,t.infoSyncTree_=new I0e({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=_2(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Dle(t,"connected",!1),t.serverSyncTree_=new I0e({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Wp(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function EKt(t){const e=t.infoData_.getNode(new Xs(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function xle(t){return sKt({timestamp:EKt(t)})}function k0e(t,e,n,s,r){t.dataUpdateCount++;const i=new Xs(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=W9(n,u=>ca(u));o=XGt(t.serverSyncTree_,i,l,r)}else{const l=ca(n);o=lHe(t.serverSyncTree_,i,l,r)}else if(s){const l=W9(n,u=>ca(u));o=KGt(t.serverSyncTree_,i,l)}else{const l=ca(n);o=_2(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=yH(t,i)),Wp(t.eventQueue_,a,o)}function R0e(t,e){Dle(t,"connected",e),e===!1&&SKt(t)}function TKt(t,e){Cu(e,(n,s)=>{Dle(t,n,s)})}function Dle(t,e,n){const s=new Xs("/.info/"+e),r=ca(n);t.infoData_.updateSnapshot(s,r);const i=_2(t.infoSyncTree_,s,r);Wp(t.eventQueue_,s,i)}function THe(t){return t.nextWriteId_++}function CKt(t,e,n){const s=JGt(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=ca(r).withIndex(e._queryParams.getIndex());VJ(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=_2(t.serverSyncTree_,e._path,i);else{const a=sO(t.serverSyncTree_,e);o=lHe(t.serverSyncTree_,e._path,i,a)}return Wp(t.eventQueue_,e._path,o),Tq(t.serverSyncTree_,e,n,null,!0),i},r=>(_H(t,"get for query "+Ao(e)+" failed: "+r),Promise.reject(new Error(r))))}function IKt(t,e,n,s,r){_H(t,"set",{path:e.toString(),value:n,priority:s});const i=xle(t),o=ca(n,s),a=ble(t.serverSyncTree_,e),l=fHe(o,a,i),u=THe(t),h=cHe(t.serverSyncTree_,e,l,u,!0);Nle(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||vu("set at "+e+" failed: "+p);const R=HE(t.serverSyncTree_,u,!w);Wp(t.eventQueue_,e,R),PKt(t,r,p,m)});const d=RHe(t,e);yH(t,d),Wp(t.eventQueue_,d,[])}function SKt(t){_H(t,"onDisconnectEvents");const e=xle(t),n=gq();DJ(t.onDisconnect_,cs(),(r,i)=>{const o=oKt(r,i,t.serverSyncTree_,e);Wze(n,r,o)});let s=[];DJ(n,cs(),(r,i)=>{s=s.concat(_2(t.serverSyncTree_,r,i));const o=RHe(t,r);yH(t,o)}),t.onDisconnect_=gq(),Wp(t.eventQueue_,cs(),s)}function kKt(t,e,n){let s;gn(e._path)===".info"?s=VJ(t.infoSyncTree_,e,n):s=VJ(t.serverSyncTree_,e,n),bHe(t.eventQueue_,e._path,s)}function RKt(t,e,n){let s;gn(e._path)===".info"?s=Tq(t.infoSyncTree_,e,n):s=Tq(t.serverSyncTree_,e,n),bHe(t.eventQueue_,e._path,s)}function AKt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(yKt)}function _H(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),oc(n,...e)}function PKt(t,e,n,s){e&&nR(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function CHe(t,e,n){return ble(t.serverSyncTree_,e,n)||tn.EMPTY_NODE}function Ole(t,e=t.transactionQueueTree_){if(e||vH(t,e),sR(e)){const n=SHe(t,e);xe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&NKt(t,v2(e),n)}else gHe(e)&&mH(e,n=>{Ole(t,n)})}function NKt(t,e,n){const s=n.map(u=>u.currentWriteId),r=CHe(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];xe(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=sl(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{_H(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(HE(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();vH(t,Ale(t.transactionQueueTree_,e)),Ole(t,t.transactionQueueTree_),Wp(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)nR(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{vu("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}yH(t,e)}},o)}function yH(t,e){const n=IHe(t,e),s=v2(n),r=SHe(t,n);return xKt(t,r,s),s}function xKt(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=sl(n,a.path);let u=!1,h;if(xe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(HE(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=vKt)u=!0,h="maxretry",r=r.concat(HE(t.serverSyncTree_,a.currentWriteId,!0));else{const d=CHe(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){Ple("transaction failed: Data returned ",p,a.path);let m=ca(p);typeof p=="object"&&p!=null&&z_(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,R=xle(t),P=fHe(m,d,R);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=THe(t),i.splice(i.indexOf(w),1),r=r.concat(cHe(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(HE(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(HE(t.serverSyncTree_,a.currentWriteId,!0))}Wp(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}vH(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)nR(s[o]);Ole(t,t.transactionQueueTree_)}function IHe(t,e){let n,s=t.transactionQueueTree_;for(n=gn(e);n!==null&&sR(s)===void 0;)s=Ale(s,n),e=cr(e),n=gn(e);return s}function SHe(t,e){const n=[];return kHe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function kHe(t,e,n){const s=sR(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);mH(e,r=>{kHe(t,r,n)})}function vH(t,e){const n=sR(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,pHe(e,n.length>0?n:void 0)}mH(e,s=>{vH(t,s)})}function RHe(t,e){const n=v2(IHe(t,e)),s=Ale(t.transactionQueueTree_,e);return cKt(s,r=>{CG(t,r)}),CG(t,s),mHe(s,r=>{CG(t,r)}),n}function CG(t,e){const n=sR(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(xe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(xe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(HE(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?pHe(e,void 0):n.length=i+1,Wp(t.eventQueue_,v2(e),r);for(let o=0;o<s.length;o++)nR(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DKt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function OKt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):vu(`Invalid query segment '${n}' in query '${t}'`)}return e}const A0e=function(t,e){const n=LKt(t),s=n.namespace;n.domain==="firebase.com"&&b_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&b_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||GWt();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Sze(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Xs(n.pathString)}},LKt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=DKt(t.substring(h,d)));const p=OKt(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MKt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ao(this.snapshot.exportVal())}}class FKt{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AHe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return xe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lle{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return kn(this._path)?null:Lze(this._path)}get ref(){return new H_(this._repo,this._path)}get _queryIdentifier(){const e=p0e(this._queryParams),n=ole(e);return n==="{}"?"default":n}get _queryObject(){return p0e(this._queryParams)}isEqual(e){if(e=js(e),!(e instanceof Lle))return!1;const n=this._repo===e._repo,s=ule(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+P8t(this._path)}}class H_ extends Lle{constructor(e,n){super(e,n,new ple,!1)}get parent(){const e=Fze(this._path);return e===null?null:new H_(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class rO{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Xs(e),s=qJ(this.ref,e);return new rO(this._node.getChild(n),s,ci)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new rO(s,qJ(this.ref,n),ci)))}hasChild(e){const n=new Xs(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function VKt(t,e){return t=js(t),t._checkNotDeleted("ref"),e!==void 0?qJ(t._root,e):t._root}function qJ(t,e){return t=js(t),gn(t._path)===null?pKt("child","path",e):vHe("child","path",e),new H_(t._repo,No(t._path,e))}function UKt(t){return wHe("remove",t._path),PHe(t,null)}function PHe(t,e){t=js(t),wHe("set",t._path),fKt("set",e,t._path);const n=new Mz;return IKt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function qKt(t){t=js(t);const e=new AHe(()=>{}),n=new wH(e);return CKt(t._repo,t,n).then(s=>new rO(s,new H_(t._repo,t._path),t._queryParams.getIndex()))}class wH{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new MKt("value",this,new rO(e.snapshotNode,new H_(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new FKt(this,e,n):null}matches(e){return e instanceof wH?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function jKt(t,e,n,s,r){const i=new AHe(n,void 0),o=new wH(i);return kKt(t._repo,t,o),()=>RKt(t._repo,t,o)}function BKt(t,e,n,s){return jKt(t,"value",e)}qGt(H_);HGt(H_);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $Kt="FIREBASE_DATABASE_EMULATOR_HOST",jJ={};let zKt=!1;function HKt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=ig(i);t.repoInfo_=new Sze(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function WKt(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||b_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oc("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=A0e(i,r),a=o.repoInfo,l;typeof process<"u"&&YCe&&(l=YCe[$Kt]),l?(i=`http://${l}?ns=${a.namespace}`,o=A0e(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new r8t(t.name,t.options,e);gKt("Invalid Firebase Database URL",o),kn(o.path)||b_("Database URL must point to the root of a Firebase Database (not including a child path).");const h=KKt(a,t,u,new s8t(t,n));return new QKt(h,t)}function GKt(t,e){const n=jJ[e];(!n||n[t.key]!==t)&&b_(`Database ${e}(${t.repoInfo_}) has already been deleted.`),AKt(t),delete n[t.key]}function KKt(t,e,n,s){let r=jJ[e.name];r||(r={},jJ[e.name]=r);let i=r[t.toURLString()];return i&&b_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new wKt(t,zKt,n,s),r[t.toURLString()]=i,i}class QKt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bKt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new H_(this._repo,cs())),this._rootInternal}_delete(){return this._rootInternal!==null&&(GKt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&b_("Cannot call "+e+" on a deleted database.")}}function NHe(t=jz(),e){const n=r2(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=sce("database");s&&YKt(n,...s)}return n}function YKt(t,e,n,s={}){t=js(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Uw(s,i.repoInfo_.emulatorOptions))return;b_("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&b_('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new PV(PV.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:rce(s.mockUserToken,t.app.options.projectId);o=new PV(a)}ig(e)&&(Fz(e),Vz("Database",!0)),HKt(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XKt(t){jWt(Pb),qw(new m_("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return WKt(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Sh(XCe,JCe,t),Sh(XCe,JCe,"esm2020")}Mm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};XKt();var Jb={};const mo={apiKey:Jb.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Jb.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Jb.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Jb.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Jb.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Jb.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Jb.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log(" Firebase  :",{apiKey:mo.apiKey?"":" ",authDomain:mo.authDomain?"":" ",projectId:mo.projectId?"":" ",storageBucket:mo.storageBucket?"":" ",messagingSenderId:mo.messagingSenderId?"":" ",appId:mo.appId?"":" ",databaseURL:mo.databaseURL?"":""});console.log(" Firebase   :",{apiKey:mo.apiKey?`${mo.apiKey.substring(0,10)}...`:"",authDomain:mo.authDomain,projectId:mo.projectId,databaseURL:mo.databaseURL?"":""});(!mo.apiKey||!mo.authDomain||!mo.projectId)&&console.warn(" Firebase   .   .");let Gr,ti,WE,Cq,Iq;mo.apiKey&&mo.authDomain&&mo.projectId?(Gr=RBe(mo),ti=_5e(Gr),WE=new Hf,Cq=U$e(Gr),Iq=FWt(Gr),NHe(Gr)):(console.warn(" Firebase  .  (,  )    ."),ti=null,WE=null,Cq=null,Iq=null);const JKt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return ti},get db(){return Cq},get firebaseApp(){return Gr},get googleProvider(){return WE},get storage(){return Iq}},Symbol.toStringTag,{value:"Module"}));function xHe(){return Yu(tBe)}const pr=g_(null),_f=g_(!0),YF=g_(null);let S0=null,P0e=!1;function DHe(){const t=xHe(),e=Gr?U$e(Gr):null;e?console.log(" Firestore  "):console.error(" Firestore  ."),Gr?console.log(" Firebase  "):console.warn(" Firebase  .     .");const n=async l=>{if(!e)throw console.log(" Firestore  ."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("    :",l.email,`( ${h+1}/${u})`);const d=V$e(e,"users",l.uid),p=await SJ(d);if(p.exists()){const m=p.data();return console.log("   :",m),await kJ(d,{lastLoginAt:AV()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("    :",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],R=w.includes(l.email||"");console.log("   :",{userEmail:l.email,adminEmails:w,isAdminEmail:R});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:R?"admin":"student",createdAt:AV(),lastLoginAt:AV()};console.log("     :",P),await kJ(d,P),console.log("    :",l.email);const O=await SJ(d);if(O.exists())console.log("    :",O.data());else throw console.error("    :   "),new Error("   .");return{...l,role:R?"admin":"student"}}}catch(d){if(h++,console.error(` Firestore   ( ${h}/${u}):`,d),console.error("  :",d.code),console.error("  :",d.message),d.code==="permission-denied")throw console.error(" Firestore  .   ."),console.error("   :",{code:d.code,message:d.message,firebaseApp:!!Gr,db:!!e,auth:!!ti,userUid:l.uid,userEmail:l.email}),new Error("Firebase   . Firestore   Security Rules    .");if(h<u)console.log(` ${h*1e3}ms  ...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("   .   ."),new Error("    .    .")}return{...l,role:"student"}},s=async()=>{if(!_f.value){_f.value=!0,YF.value=null;try{if(!ti||!WE)throw new Error("Firebase is not configured.");const l=await p5e(ti,WE);console.log(" Google   :",l.user.email);try{if(Gr&&e)pr.value=await n(l.user),console.log("      :",pr.value.role);else{console.log(" Firebase      ."),pr.value=null,ti&&await iI(ti),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3}),_f.value=!1;return}console.log("      :",{isAuthenticated:!!pr.value,userRole:pr.value?.role,userEmail:pr.value?.email})}catch(u){console.error("      :",u),pr.value=null,ti&&await iI(ti),t.notify({type:"warning",message:"Firebase       .",timeout:5e3}),_f.value=!1;return}_f.value=!1,t.notify({type:"positive",message:" !",timeout:2e3})}catch(l){console.error(" Google   :",l),YF.value=l.message,t.notify({type:"negative",message:"   ."}),_f.value=!1}}},r=async()=>{if(console.log(" useAuth: logout  "),console.log(" useAuth: auth  :",!!ti),!ti){console.log(" useAuth: auth  ");return}try{S0&&(console.log(" useAuth: Firestore  "),S0(),S0=null),console.log(" useAuth: Firebase signOut "),await iI(ti),console.log(" useAuth: Firebase signOut "),pr.value=null,console.log(" useAuth:    "),console.log("  ")}catch(l){console.error(" useAuth:  :",l),t.notify({type:"negative",message:"   ."})}},i=()=>{if(!P0e){if(P0e=!0,console.log(" Firebase   :",{firebaseApp:!!Gr,auth:!!ti,db:!!e}),!ti){console.log(" Firebase Auth  "),_f.value=!1;return}console.log(" Firebase Auth  "),S0=n5e(ti,async l=>{if(console.log(" onAuthStateChanged . :",l?l.email:""),l)if(console.log("   :",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),Gr&&e)try{pr.value=await n(l),console.log("    :",pr.value.role),console.log("    :",{isAuthenticated:!!pr.value,userRole:pr.value?.role,userEmail:pr.value?.email})}catch(u){console.error("    :",u),console.error("  :",u.code),console.error("  :",u.message),pr.value=null,ti&&await iI(ti),YF.value=u.message,t.notify({type:"warning",message:" /     .  .",timeout:5e3}),_f.value=!1;return}else console.log(" Firebase       ."),pr.value=null,ti&&await iI(ti),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3});else console.log("   "),pr.value=null,console.log("     ");_f.value=!1})}};Rz(()=>{S0&&S0()});const o=()=>{console.log("   :",{user:pr.value,isAuthenticated:!!pr.value,userRole:pr.value?.role,firebaseApp:!!Gr,firestore:!!e})},a=()=>(console.log(" Firebase   :"),console.log("  - Firebase App:",!!Gr),console.log("  - Firebase Auth:",!!ti),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!WE),Gr&&console.log("  - Firebase Config:",{apiKey:Gr.options.apiKey?"":" ",authDomain:Gr.options.authDomain?"":" ",projectId:Gr.options.projectId?"":" ",storageBucket:Gr.options.storageBucket?"":" "}),{firebaseApp:!!Gr,auth:!!ti,db:!!e,googleProvider:!!WE});return{user:at(()=>pr.value),loading:at(()=>_f.value),error:at(()=>YF.value),isAuthenticated:at(()=>!!pr.value),displayName:at(()=>pr.value?.displayName||""),email:at(()=>pr.value?.email||""),photoURL:at(()=>pr.value?.photoURL||""),isFirebaseConfigured:at(()=>!!Gr),userRole:at(()=>pr.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const ZKt={id:"app"},eQt=e2({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=DHe(),o=gBe(),a=mBe();return Sz(()=>{e()}),iS([n,s,r],([l,u,h])=>{h||(console.log(`  : isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(` : ${a.path}`),i(),l?u==="admin"?(console.log(" .   ."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log(" .   ."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("    .   ."):console.log(" .   ."))}),(l,u)=>{const h=u3e("router-view");return Yae(),R3e("div",ZKt,[gc(h)])}}}),tQt=t=>t,nQt=tQt,sQt=[{path:"/",component:()=>ns(()=>an(()=>import("./MainLayout-CDS1Q2ag-EoSf4LPx.js"),__vite__mapDeps([66,67,68,69,70,71,72,73,74,75,76,77])),Fs([66,67,68,69,70,71,72,73,74,75,76,77,78,79])),children:[{path:"",component:()=>ns(()=>an(()=>import("./IndexPage-BBOp0ox0-CfFvH8gD.js"),__vite__mapDeps([78,67,68,69,76,79,74,75,80,77])),Fs([80,67,68,69,76,81,74,75,82,78,83]))},{path:"survey-results",component:()=>ns(()=>an(()=>import("./SurveyResults-CG0MlidS-DDVuI0Ks.js"),__vite__mapDeps([81,72,69,67,68,71,82,79,83])),Fs([84,72,69,67,68,71,85,81,86,87]))}]},{path:"/logout",component:()=>ns(()=>an(()=>import("./LogoutPage-Ds-LyEnk-1tM6zPDQ.js"),__vite__mapDeps([84,68,69,76,79,70])),Fs([88,68,69,76,81,70,89]))},{path:"/poll-result",component:()=>ns(()=>an(()=>import("./PollResultPage-D9Rdlzlq-Co8gmnv_.js"),__vite__mapDeps([85,72,69,79,83])),Fs([90,72,69,81,86,87,91]))},{path:"/study/:courseId",component:()=>ns(()=>an(()=>import("./StudentView-BxnDG6Z3-BEmyfOuL.js"),__vite__mapDeps([86,67,68,69,71,73,70,74,75,76,72,80,79,82,83])),Fs([92,67,68,69,71,73,70,74,75,76,72,77,82,81,85,86,87,93])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("   :",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("    :",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ns(()=>an(()=>import("./ErrorNotFound-Y0LrvkS8-B_if0ZIF.js"),[]),[])}],IG=nQt(function(){return Pjt({scrollBehavior:()=>({left:0,top:0}),routes:sQt,history:ijt("/")})});async function rQt(t,e){const n=t(eQt);n.use(Rqt,e);const s=W1(typeof IG=="function"?await IG({}):IG);return{app:n,router:s}}const BJ={xs:18,sm:24,md:32,lg:38,xl:46},bH={size:String};function EH(t,e=BJ){return at(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function OHe(t,e){return t!==void 0&&t()||e}function iQt(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function bI(t,e){return t!==void 0?e.concat(t()):e}function LHe(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function oQt(t,e,n,s,r,i){e.key=s+r;const o=xt(t,e,n);return r===!0?zae(o,i()):o}const N0e="0 0 24 24",SG=t=>t,kG=t=>`ionicons ${t}`,MHe={"mdi-":t=>`mdi ${t}`,"icon-":SG,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":kG,"ion-ios":kG,"ion-logo":kG,"iconfont ":SG,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":SG},FHe={o_:"-outlined",r_:"-round",s_:"-sharp"},VHe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},aQt=new RegExp("^("+Object.keys(MHe).join("|")+")"),cQt=new RegExp("^("+Object.keys(FHe).join("|")+")"),x0e=new RegExp("^("+Object.keys(VHe).join("|")+")"),lQt=/^[Mm]\s?[-+]?\.?\d/,uQt=/^img:/,hQt=/^svguse:/,dQt=/^ion-/,fQt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,iO=G1({name:"QIcon",props:{...bH,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Ab(),s=EH(t),r=at(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=at(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(lQt.test(a)===!0){const[h,d=N0e]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,R]=p.split("@@");return xt("path",{style:w,d:m,transform:R})})}}if(uQt.test(a)===!0)return{img:!0,src:a.substring(4)};if(hQt.test(a)===!0){const[h,d=N0e]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(aQt);if(u!==null)o=MHe[u[1]](a);else if(fQt.test(a)===!0)o=a;else if(dQt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(x0e.test(a)===!0){o="notranslate material-symbols";const h=a.match(x0e);h!==null&&(a=a.substring(6),o+=VHe[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(cQt);h!==null&&(a=a.substring(2),o+=FHe[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?xt(t.tag,o,OHe(e.default)):i.value.img===!0?xt(t.tag,o,bI(e.default,[xt("img",{src:i.value.src})])):i.value.svg===!0?xt(t.tag,o,bI(e.default,[xt("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?xt(t.tag,o,bI(e.default,[xt("svg",{viewBox:i.value.viewBox},[xt("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),xt(t.tag,o,bI(e.default,[i.value.content])))}}}),UHe=G1({name:"QAvatar",props:{...bH,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=EH(t),s=at(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=at(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[xt(iO,{name:t.icon})]:void 0;return xt("div",{class:s.value,style:n.value},[xt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},LHe(e.default,i))])}}}),qHe={size:{type:[String,Number],default:"1em"},color:String};function jHe(t){return{cSize:at(()=>t.size in BJ?`${BJ[t.size]}px`:t.size),classes:at(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const Mle=G1({name:"QSpinner",props:{...qHe,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=jHe(t);return()=>xt("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[xt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function BHe(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function pQt(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Nv(t);if(e)return e.$el||e}function gQt(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function mQt(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function D0e(t,e,n,s){n.modifiers.stop===!0&&Zae(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=W3e(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,R=`${(d-m)/2}px`,P=i?R:`${l.left-u-w}px`,O=`${(p-m)/2}px`,M=i?O:`${l.top-h-w}px`;a.className="q-ripple__inner",BHe(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${R},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function O0e(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const $He=H3e({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&D0e(r,t,s,r.qKeyEvent===!0)},keystart:mQt(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&j9(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&D0e(r,t,s,!0)},300)};O0e(s,e),t.__qripple=s,G3e(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&O0e(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),K3e(e,"main"),delete t._qripple)}}),zHe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},_Qt=Object.keys(zHe),HHe={align:{type:String,validator:t=>_Qt.includes(t)}};function WHe(t){return at(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${zHe[e]}`})}function yQt(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function GHe(t){return t.appContext.config.globalProperties.$router!==void 0}function vQt(t){return t.isUnmounted===!0||t.isDeactivated===!0}function L0e(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function M0e(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function wQt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function F0e(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function bQt(t,e){return Array.isArray(t)===!0?F0e(t,e):Array.isArray(e)===!0?F0e(e,t):t===e}function EQt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(bQt(t[n],e[n])===!1)return!1;return!0}const KHe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},TQt={...KHe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function QHe({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=Ab(),{props:s,proxy:r,emit:i}=n,o=GHe(n),a=at(()=>s.disable!==!0&&s.href!==void 0),l=at(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=at(()=>l.value===!0?M(s.to):null),h=at(()=>u.value!==null),d=at(()=>a.value===!0||h.value===!0),p=at(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=at(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=at(()=>{if(h.value===!1)return-1;const{matched:W}=u.value,{length:J}=W,I=W[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(M0e.bind(null,I));if(y!==-1)return y;const T=L0e(W[J-2]);return J>1&&L0e(I)===T&&v[v.length-1].path!==T?v.findIndex(M0e.bind(null,W[J-2])):y}),R=at(()=>h.value===!0&&w.value!==-1&&wQt(r.$route.params,u.value.params)),P=at(()=>R.value===!0&&w.value===r.$route.matched.length-1&&EQt(r.$route.params,u.value.params)),O=at(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":R.value===!0?` ${s.activeClass}`:"":"");function M(W){try{return r.$router.resolve(W)}catch{}return null}function V(W,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return W.preventDefault(),Promise.resolve(!1);if(W.metaKey||W.altKey||W.ctrlKey||W.shiftKey||W.button!==void 0&&W.button!==0||s.target==="_blank")return Promise.resolve(!1);W.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(W){if(h.value===!0){const J=I=>V(W,I);i("click",W,J),W.defaultPrevented!==!0&&J()}else i("click",W)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:R,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const V0e={none:0,xs:4,sm:8,md:16,lg:24,xl:32},CQt={xs:8,sm:10,md:14,lg:20,xl:24},IQt=["button","submit","reset"],SQt=/[^\s]\/[^\s]/,kQt=["flat","outline","push","unelevated"];function RQt(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const AQt={...bH,...KHe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...kQt.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...HHe.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},PQt={...AQt,round:Boolean};function NQt(t){const e=EH(t,CQt),n=WHe(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=QHe({fallbackTag:"button"}),l=at(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in V0e?V0e[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),u=at(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=at(()=>t.disable!==!0&&t.loading!==!0),d=at(()=>h.value===!0?t.tabindex||0:-1),p=at(()=>RQt(t,"standard")),m=at(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):IQt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&SQt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=at(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),R=at(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:R,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:rh}=Vw;let k0=null,R0=null,A0=null;const YHe=G1({name:"QBtn",props:{...PQt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=Ab(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=NQt(t),p=g_(null),m=g_(null);let w=null,R,P=null;const O=at(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=at(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=at(()=>({center:t.round})),q=at(()=>{const G=Math.max(0,Math.min(100,t.percentage));return G>0?{transition:"transform 0.6s",transform:`translateX(${G-100}%)`}:{}}),W=at(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const G={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";G[`onTouchstart${ne}`]=y}return G}return{onClick:pE}}),J=at(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...W.value}));function I(G){if(p.value!==null){if(G!==void 0){if(G.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){G.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",pE,!0),document.removeEventListener("keyup",ae,rh),p.value?.removeEventListener("blur",ae,rh)};document.addEventListener("keydown",pE,!0),document.addEventListener("keyup",ae,rh),p.value.addEventListener("blur",ae,rh)}}h(G)}}function v(G){p.value!==null&&(n("keydown",G),j9(G,[13,32])===!0&&R0!==p.value&&(R0!==null&&E(),G.defaultPrevented!==!0&&(G.qAvoidFocus!==!0&&p.value.focus(),R0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,rh)),pE(G)))}function y(G){p.value!==null&&(n("touchstart",G),G.defaultPrevented!==!0&&(k0!==p.value&&(k0!==null&&E(),k0=p.value,w=G.target,w.addEventListener("touchcancel",S,rh),w.addEventListener("touchend",S,rh)),R=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,R=!1},200)))}function T(G){p.value!==null&&(G.qSkipRipple=R===!0,n("mousedown",G),G.defaultPrevented!==!0&&A0!==p.value&&(A0!==null&&E(),A0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,rh)))}function S(G){if(p.value!==null&&!(G?.type==="blur"&&document.activeElement===p.value)){if(G?.type==="keyup"){if(R0===p.value&&j9(G,[13,32])===!0){const ne=new MouseEvent("click",G);ne.qKeyEvent=!0,G.defaultPrevented===!0&&q9(ne),G.cancelBubble===!0&&Zae(ne),p.value.dispatchEvent(ne),pE(G),G.qKeyEvent=!0}n("keyup",G)}E()}}function E(G){const ne=m.value;G!==!0&&(k0===p.value||A0===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),k0===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,rh),w.removeEventListener("touchend",S,rh)),k0=w=null),A0===p.value&&(document.removeEventListener("mouseup",S,rh),A0=null),R0===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,rh),R0=null),p.value?.classList.remove("q-btn--active")}function b(G){pE(G),G.qSkipRipple=!0}return kz(()=>{E(!0)}),Object.assign(s,{click:G=>{d.value===!0&&I(G)}}),()=>{let G=[];t.icon!==void 0&&G.push(xt(iO,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&G.push(xt("span",{class:"block"},[t.label])),G=bI(e.default,G),t.iconRight!==void 0&&t.round===!1&&G.push(xt(iO,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[xt("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(xt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[xt("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(xt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},G)),t.loading!==null&&ne.push(xt(F3e,{name:"q-transition--fade"},()=>t.loading===!0?[xt("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[xt(Mle)])]:null)),zae(xt(u.value,J.value,ne),[[$He,M.value,void 0,V.value]])}}});let xQt=1,DQt=document.body;function XHe(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${xQt++}`:t,$9.globalNodes!==void 0){const s=$9.globalNodes.class;s!==void 0&&(n.className=s)}return DQt.appendChild(n),n}function OQt(t){t.remove()}let LQt=0;const NV={},xV={},jh={},JHe={},MQt=/^\s*$/,ZHe=[],FQt=[void 0,null,!0,!1,""],Fle=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],VQt=["top-left","top-right","bottom-left","bottom-right"],FA={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function e7e(t,e,n){if(!t)return eA("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,NV),Tk(t)===!1&&(r.type&&Object.assign(r,FA[r.type]),t={message:t}),Object.assign(r,FA[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=Mle),r.spinner=W1(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:U0e(r.message)||U0e(r.caption)},r.position){if(Fle.includes(r.position)===!1)return eA("wrong position",t)}else r.position="bottom";if(FQt.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return eA("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(NV.actions)===!0?NV.actions:[]).concat(Array.isArray(FA[t.type]?.actions)===!0?FA[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=jh[r.position].value.indexOf(n.notif);jh[r.position].value[l]=r}else{const l=xV[r.meta.group];if(l===void 0){if(r.meta.uid=LQt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)jh[r.position].value.splice(Math.floor(jh[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";jh[r.position].value[u](r)}r.group!==void 0&&(xV[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(VQt.includes(r.badgePosition)===!1)return eA("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=jh[r.position].value.indexOf(l);jh[r.position].value[u]=xV[r.meta.group]=r}}const a=()=>{UQt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?eA("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});e7e(u,e,s)}}}function UQt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=jh[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete xV[t.meta.group];const n=ZHe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}jh[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function U0e(t){return t!=null&&MQt.test(t)!==!0}function eA(t,e){return console.error(`Notify: ${t}`,e),!1}function qQt(){return G1({name:"QNotifications",devtools:{hide:!0},setup(){return()=>xt("div",{class:"q-notifications"},Fle.map(t=>xt(j9t,{key:t,class:JHe[t],tag:"div",name:`q-notification--${t}`},()=>jh[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(xt(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(xt(iO,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(xt(UHe,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>xt("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[xt("div",a),xt("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(xt("div",o,i))}const r=[xt("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(xt("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(xt("div",{class:n.actionsClass},e.actions.map(i=>xt(YHe,i)))),n.badge>1&&r.push(xt("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),xt("div",{ref:i=>{ZHe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[xt("div",{class:n.wrapperClass},r)])}))))}})}const jQt={setDefaults(t){Tk(t)===!0&&Object.assign(NV,t)},registerType(t,e){Tk(e)===!0&&(FA[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>e7e(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Fle.forEach(s=>{jh[s]=g_([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;JHe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=XHe("q-notify");Iqt(qQt(),e).mount(n)}}},BQt={config:{},plugins:{Notify:jQt}},$Qt="/";async function zQt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:$Qt})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}rQt($3e,BQt).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ns(()=>an(()=>import("./pinia-Cp8Yfd-4-C3eM6ioE.js"),__vite__mapDeps([87,75])),Fs([94,75]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");zQt(t,r)})});const kdn=Object.freeze(Object.defineProperty({__proto__:null,$:NC,A:xC,B:PC,C:FL,D:sL,E:RC,F:Mj,G:t1,H:ah,I:VL,J:mc,K:sB,L:bd,M:X3,N:nt,O:ho,P:Ff,Q:n1,R:nL,S:UL,T:ML,U:Nh,get V(){return Zs},W:Vj,X:ur,Y:ns,Z:G3,_:xj,a:HO,a$:lh,a0:W3,a1:LL,a2:K3,a3:fb,a4:NT,a5:pu,a6:s1,a7:qj,a8:KL,a9:tL,aA:zj,aB:XO,aC:Bj,aD:rv,aE:nB,aF:Gj,aG:BL,aH:$L,aI:tm,aJ:vL,aK:lL,aL:oL,aM:fL,aN:gL,aO:uL,aP:yL,aQ:RS,aR:cL,aS:hL,aT:c1,aU:wL,aV:mL,aW:pL,aX:hh,aY:Jd,aZ:Pu,a_:uh,aa:jO,ab:Jk,ac:Yj,ad:Qj,ae:Yd,af:UO,ag:qO,ah:_m,ai:eT,aj:eL,ak:BO,al:e1,am:xT,an:jm,ao:ZO,ap:YO,aq:qm,ar:eB,as:bL,at:Y3,au:MC,av:FC,aw:yn,ax:QO,ay:J3,az:JO,b:Lo,b$:y1,b0:a1,get b1(){return jT},b2:kL,b3:MS,b4:R3,b5:FS,get b6(){return BT},b7:M3,b8:x3,b9:k3,bA:kj,bB:UC,bC:$5,bD:UB,bE:z5,bF:Zd,bG:st,bH:L_,bI:fv,bJ:v1,bK:w1,bL:bB,bM:IB,bN:sM,bO:pB,bP:ua,bQ:vne,bR:vb,bS:CB,bT:n$,bU:np,bV:SB,bW:uB,bX:rM,bY:SM,bZ:iu,b_:pne,ba:sT,bb:O3,bc:D3,bd:L3,be:A3,bf:QL,bg:WL,bh:GL,bi:Aj,bj:PT,bk:XL,bl:Qd,bm:tB,bn:$j,bo:rB,bp:Wj,bq:qL,br:Z3,bs:zL,bt:Cj,bu:P_,bv:Dj,bw:Ri,bx:Qf,by:MO,bz:Ij,c:YL,c$:Pre,c0:tM,c1:Ene,c2:X5,c3:XT,c4:eg,c5:cl,c6:Pne,c7:kne,c8:Ire,c9:_t,cA:Nne,cB:xp,cC:mB,cD:_B,cE:Zy,cF:MI,cG:LB,cH:wB,cI:nM,cJ:zS,cK:uw,cL:OB,cM:NB,cN:lw,cO:Rre,cP:l5,cQ:Cre,cR:x1,cS:D1,cT:An,cU:AB,cV:Sre,cW:DB,cX:Sne,cY:xB,cZ:Cne,c_:aT,ca:H5,cb:Nre,cc:JL,cd:bne,ce:RB,cf:G5,cg:Jg,ch:b1,ci:qB,cj:_1,get ck(){return mr},cl:B5,cm:Ere,cn:bre,co:q5,cp:Tre,cq:qC,cr:$S,cs:Qu,ct:oM,cu:Tne,cv:e$,cw:MB,cx:vB,cy:eM,cz:xne,d:LO,d$:yie,d0:Ane,d1:K5,d2:Q5,d3:$y,d4:a5,d5:YB,d6:KB,d7:e5,d8:n5,d9:JB,dA:jse,dB:$se,dC:Nse,dD:t$,dE:J5,dF:Z5,dG:dne,dH:BS,dI:s$,dJ:Np,dK:Are,dL:Ine,dM:xre,dN:Rne,dO:W5,dP:kre,dQ:Y5,dR:tne,dS:yb,dT:gne,dU:$i,dV:xm,dW:hB,dX:nne,dY:une,dZ:O1,d_:pae,da:o5,db:Lx,dc:QB,dd:ZB,de:dM,df:c5,dg:s5,dh:t5,di:Kh,dj:Op,dk:fh,dl:Gh,dm:Wh,dn:uM,get dp(){return rk},dq:C5,dr:zx,ds:Pse,dt:Hx,get du(){return ik},dv:zse,dw:qse,dx:Ase,dy:BI,dz:Bse,e:m1,e$:pie,e0:gae,e1:Vp,e2:rt,e3:Cb,e4:fT,e5:PM,e6:NM,e7:eie,e8:iie,e9:v$,eA:wk,eB:uVe,eC:yae,eD:Ay,eE:CVe,eF:xM,eG:vie,eH:kM,get eI(){return Wr},eJ:fae,eK:Xqe,eL:Yqe,eM:dae,eN:Jqe,eO:L1,eP:aD,eQ:Th,eR:T$,eS:ZT,eT:i_,eU:Jre,eV:Yre,eW:Xre,eX:jE,eY:uie,eZ:oje,e_:$P,ea:Kre,eb:WC,ec:Nt,ed:mae,ee:q_,ef:_u,eg:kVe,eh:eje,ei:cie,ej:u$,ek:hje,el:Ea,em:tVe,en:rie,eo:kae,ep:Om,eq:oie,er:Vre,es:w$,et:pz,eu:Ru,ev:L4e,ew:RM,ex:f$,ey:fVe,ez:Eae,f:x_,f$:Tae,f0:d$,f1:Zre,f2:m$,f3:cD,f4:gVe,f5:fie,f6:Iae,f7:gie,f8:PVe,f9:AVe,fA:Nie,fB:Fie,fC:L$,fD:Gie,fE:Bie,fF:qie,fG:zf,fH:l_,fI:Yh,fJ:$f,fK:Bf,fL:O$,get fM(){return PD},fN:Eoe,fO:p9,fP:c9e,fQ:g9,get fR(){return ND},fS:P9e,fT:S9e,fU:a9e,fV:JP,fW:R9e,fX:k9e,fY:A9e,fZ:l9e,f_:Sae,fa:eC,fb:XM,fc:JM,fd:zn,fe:Kie,ff:Zqe,fg:lie,fh:die,fi:vVe,fj:hie,fk:_Ve,fl:tje,fm:KI,fn:lje,fo:SVe,fp:vae,fq:wae,fr:TE,fs:Wie,ft:Die,fu:Sie,fv:Uie,fw:jie,fx:Mie,fy:zie,fz:Z6,g:Xp,g$:A3e,g0:Cae,g1:S4e,g2:oD,g3:Rae,g4:yVe,g5:r_,g6:cje,g7:dje,g8:IVe,g9:bae,gA:Ab,gB:xt,gC:OHe,gD:bqt,gE:yqt,gF:vqt,gG:pQt,gH:BHe,gI:bH,gJ:EH,gK:oQt,gL:$He,gM:iO,gN:LHe,gO:pE,gP:e2,gQ:R3e,gR:Xae,gS:gc,gT:Yae,gU:YHe,gV:Zae,gW:Vd,gX:n2,gY:q9,gZ:Sz,g_:mBe,ga:ije,gb:_ae,gc:JFe,gd:HC,ge:U4e,gf:Fo,gg:Ev,gh:Ure,gi:ZFe,gj:_4e,gk:g_,gl:XC,gm:OUt,gn:da,go:yT,gp:es,gq:iS,gr:Bae,gs:r6t,gt:W1,gu:at,gv:Ije,gw:LUt,gx:Yu,gy:L6t,gz:G1,h:qc,h$:C9t,h0:Kje,h1:i9t,h2:Eje,h3:N3e,h4:gBe,h5:xHe,h6:Fw,h7:kz,h8:Ek,h9:Vw,hA:DHe,hB:PHe,hC:qKt,hD:wz,hE:bz,hF:Nv,hG:UKt,hH:zae,hI:H3e,hJ:K3e,hK:oqt,hL:G3e,hM:W3e,hN:rqt,hO:Q3e,hP:o3e,hQ:i3e,hR:vQt,hS:wqt,hT:Tk,hU:_5e,hV:ch,hW:S6t,hX:UHe,hY:K9t,hZ:F3e,h_:Uae,ha:dN,hb:Rz,hc:bI,get hd(){return Gr},he:NHe,hf:BKt,hg:VKt,hh:X3e,get hi(){return Iq},hj:MWt,hk:xWt,get hl(){return Cq},hm:V$e,hn:f7t,ho:AV,hp:OWt,hq:DWt,hr:LWt,hs:kJ,ht:SJ,hu:g7t,hv:p7t,hw:TQt,hx:QHe,hy:j9,hz:iQt,i:AC,i0:Mle,i1:u3e,i2:c3e,i3:gQt,i4:_V,i5:l3e,i6:Wae,i7:GHe,i8:eBe,i9:Cqt,iA:YBe,iB:n5e,iC:e5e,iD:xBe,iE:VBe,iF:p5e,iG:iI,iH:qHe,iI:jHe,iJ:wUt,iK:JKt,ia:Tqt,ib:Z9t,ic:U9,id:yQt,ie:g6t,ig:XHe,ih:OQt,ii:iqt,ij:HHe,ik:WHe,il:gce,im:cm,io:lm,ip:Hf,iq:jw,ir:um,is:t5e,it:i5e,iu:m5e,iv:_ce,iw:XBe,ix:FBe,iy:iJ,iz:h5e,j:Zk,k:Uj,l:ow,m:WO,n:lf,o:Kj,p:zO,q:db,r:VO,s:Hj,t:pt,u:$O,v:Pm,w:Xk,x:HL,y:KO,z:jL},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vle(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Gs={},fS=[],wp=()=>{},HQt=()=>!1,TH=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ule=t=>t.startsWith("onUpdate:"),Ho=Object.assign,qle=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WQt=Object.prototype.hasOwnProperty,vs=(t,e)=>WQt.call(t,e),Pt=Array.isArray,pS=t=>CH(t)==="[object Map]",t7e=t=>CH(t)==="[object Set]",Kt=t=>typeof t=="function",yi=t=>typeof t=="string",Db=t=>typeof t=="symbol",Ar=t=>t!==null&&typeof t=="object",n7e=t=>(Ar(t)||Kt(t))&&Kt(t.then)&&Kt(t.catch),s7e=Object.prototype.toString,CH=t=>s7e.call(t),GQt=t=>CH(t).slice(8,-1),r7e=t=>CH(t)==="[object Object]",jle=t=>yi(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,RN=Vle(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),IH=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},KQt=/-(\w)/g,Mh=IH(t=>t.replace(KQt,(e,n)=>n?n.toUpperCase():"")),QQt=/\B([A-Z])/g,t0=IH(t=>t.replace(QQt,"-$1").toLowerCase()),SH=IH(t=>t.charAt(0).toUpperCase()+t.slice(1)),RG=IH(t=>t?`on${SH(t)}`:""),Uv=(t,e)=>!Object.is(t,e),AG=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$J=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},YQt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},XQt=t=>{const e=yi(t)?Number(t):NaN;return isNaN(e)?t:e};let q0e;const kH=()=>q0e||(q0e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ble(t){if(Pt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=yi(s)?tYt(s):Ble(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(yi(t)||Ar(t))return t}const JQt=/;(?![^(]*\))/g,ZQt=/:([^]+)/,eYt=/\/\*[^]*?\*\//g;function tYt(t){const e={};return t.replace(eYt,"").split(JQt).forEach(n=>{if(n){const s=n.split(ZQt);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function $le(t){let e="";if(yi(t))e=t;else if(Pt(t))for(let n=0;n<t.length;n++){const s=$le(t[n]);s&&(e+=s+" ")}else if(Ar(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const nYt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sYt=Vle(nYt);function i7e(t){return!!t||t===""}const o7e=t=>!!(t&&t.__v_isRef===!0),rYt=t=>yi(t)?t:t==null?"":Pt(t)||Ar(t)&&(t.toString===s7e||!Kt(t.toString))?o7e(t)?rYt(t.value):JSON.stringify(t,a7e,2):String(t),a7e=(t,e)=>o7e(e)?a7e(t,e.value):pS(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[PG(s,i)+" =>"]=r,n),{})}:t7e(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>PG(n))}:Db(e)?PG(e):Ar(e)&&!Pt(e)&&!r7e(e)?String(e):e,PG=(t,e="")=>{var n;return Db(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $a;class c7e{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=$a,!e&&$a&&(this.index=($a.scopes||($a.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=$a;try{return $a=this,e()}finally{$a=n}}}on(){++this._on===1&&(this.prevScope=$a,$a=this)}off(){this._on>0&&--this._on===0&&($a=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Rdn(t){return new c7e(t)}function iYt(){return $a}function Adn(t,e=!1){$a&&$a.cleanups.push(t)}let rr;const NG=new WeakSet;class l7e{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,$a&&$a.active&&$a.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,NG.has(this)&&(NG.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||h7e(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,j0e(this),d7e(this);const e=rr,n=$d;rr=this,$d=!0;try{return this.fn()}finally{f7e(this),rr=e,$d=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Wle(e);this.deps=this.depsTail=void 0,j0e(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?NG.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){zJ(this)&&this.run()}get dirty(){return zJ(this)}}let u7e=0,AN,PN;function h7e(t,e=!1){if(t.flags|=8,e){t.next=PN,PN=t;return}t.next=AN,AN=t}function zle(){u7e++}function Hle(){if(--u7e>0)return;if(PN){let e=PN;for(PN=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;AN;){let e=AN;for(AN=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function d7e(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function f7e(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Wle(s),oYt(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function zJ(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(p7e(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function p7e(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===oO)||(t.globalVersion=oO,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!zJ(t))))return;t.flags|=2;const e=t.dep,n=rr,s=$d;rr=t,$d=!0;try{d7e(t);const r=t.fn(t._value);(e.version===0||Uv(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{rr=n,$d=s,f7e(t),t.flags&=-3}}function Wle(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Wle(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function oYt(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let $d=!0;const g7e=[];function E_(){g7e.push($d),$d=!1}function T_(){const t=g7e.pop();$d=t===void 0?!0:t}function j0e(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=rr;rr=void 0;try{e()}finally{rr=n}}}let oO=0;class aYt{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Gle{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!rr||!$d||rr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==rr)n=this.activeLink=new aYt(rr,this),rr.deps?(n.prevDep=rr.depsTail,rr.depsTail.nextDep=n,rr.depsTail=n):rr.deps=rr.depsTail=n,m7e(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=rr.depsTail,n.nextDep=void 0,rr.depsTail.nextDep=n,rr.depsTail=n,rr.deps===n&&(rr.deps=s)}return n}trigger(e){this.version++,oO++,this.notify(e)}notify(e){zle();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Hle()}}}function m7e(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)m7e(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Sq=new WeakMap,TT=Symbol(""),HJ=Symbol(""),aO=Symbol("");function ac(t,e,n){if($d&&rr){let s=Sq.get(t);s||Sq.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Gle),r.map=s,r.key=n),r.track()}}function hm(t,e,n,s,r,i){const o=Sq.get(t);if(!o){oO++;return}const a=l=>{l&&l.trigger()};if(zle(),e==="clear")o.forEach(a);else{const l=Pt(t),u=l&&jle(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===aO||!Db(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(aO)),e){case"add":l?u&&a(o.get("length")):(a(o.get(TT)),pS(t)&&a(o.get(HJ)));break;case"delete":l||(a(o.get(TT)),pS(t)&&a(o.get(HJ)));break;case"set":pS(t)&&a(o.get(TT));break}}Hle()}function cYt(t,e){const n=Sq.get(t);return n&&n.get(e)}function P0(t){const e=ts(t);return e===t?e:(ac(e,"iterate",aO),kh(t)?e:e.map(_a))}function RH(t){return ac(t=ts(t),"iterate",aO),t}const lYt={__proto__:null,[Symbol.iterator](){return xG(this,Symbol.iterator,_a)},concat(...t){return P0(this).concat(...t.map(e=>Pt(e)?P0(e):e))},entries(){return xG(this,"entries",t=>(t[1]=_a(t[1]),t))},every(t,e){return qg(this,"every",t,e,void 0,arguments)},filter(t,e){return qg(this,"filter",t,e,n=>n.map(_a),arguments)},find(t,e){return qg(this,"find",t,e,_a,arguments)},findIndex(t,e){return qg(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qg(this,"findLast",t,e,_a,arguments)},findLastIndex(t,e){return qg(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qg(this,"forEach",t,e,void 0,arguments)},includes(...t){return DG(this,"includes",t)},indexOf(...t){return DG(this,"indexOf",t)},join(t){return P0(this).join(t)},lastIndexOf(...t){return DG(this,"lastIndexOf",t)},map(t,e){return qg(this,"map",t,e,void 0,arguments)},pop(){return tA(this,"pop")},push(...t){return tA(this,"push",t)},reduce(t,...e){return B0e(this,"reduce",t,e)},reduceRight(t,...e){return B0e(this,"reduceRight",t,e)},shift(){return tA(this,"shift")},some(t,e){return qg(this,"some",t,e,void 0,arguments)},splice(...t){return tA(this,"splice",t)},toReversed(){return P0(this).toReversed()},toSorted(t){return P0(this).toSorted(t)},toSpliced(...t){return P0(this).toSpliced(...t)},unshift(...t){return tA(this,"unshift",t)},values(){return xG(this,"values",_a)}};function xG(t,e,n){const s=RH(t),r=s[e]();return s!==t&&!kh(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const uYt=Array.prototype;function qg(t,e,n,s,r,i){const o=RH(t),a=o!==t&&!kh(t),l=o[e];if(l!==uYt[e]){const d=l.apply(t,i);return a?_a(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,_a(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function B0e(t,e,n,s){const r=RH(t);let i=n;return r!==t&&(kh(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,_a(a),l,t)}),r[e](i,...s)}function DG(t,e,n){const s=ts(t);ac(s,"iterate",aO);const r=s[e](...n);return(r===-1||r===!1)&&Yle(n[0])?(n[0]=ts(n[0]),s[e](...n)):r}function tA(t,e,n=[]){E_(),zle();const s=ts(t)[e].apply(t,n);return Hle(),T_(),s}const hYt=Vle("__proto__,__v_isRef,__isVue"),_7e=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Db));function dYt(t){Db(t)||(t=String(t));const e=ts(this);return ac(e,"has",t),e.hasOwnProperty(t)}class y7e{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?EYt:E7e:i?b7e:w7e).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Pt(e);if(!r){let l;if(o&&(l=lYt[n]))return l;if(n==="hasOwnProperty")return dYt}const a=Reflect.get(e,n,Ta(e)?e:s);return(Db(n)?_7e.has(n):hYt(n))||(r||ac(e,"get",n),i)?a:Ta(a)?o&&jle(n)?a:a.value:Ar(a)?r?C7e(a):rR(a):a}}class v7e extends y7e{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Xw(i);if(!kh(s)&&!Xw(s)&&(i=ts(i),s=ts(s)),!Pt(e)&&Ta(i)&&!Ta(s))return l?!1:(i.value=s,!0)}const o=Pt(e)&&jle(n)?Number(n)<e.length:vs(e,n),a=Reflect.set(e,n,s,Ta(e)?e:r);return e===ts(r)&&(o?Uv(s,i)&&hm(e,"set",n,s):hm(e,"add",n,s)),a}deleteProperty(e,n){const s=vs(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&hm(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Db(n)||!_7e.has(n))&&ac(e,"has",n),s}ownKeys(e){return ac(e,"iterate",Pt(e)?"length":TT),Reflect.ownKeys(e)}}class fYt extends y7e{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const pYt=new v7e,gYt=new fYt,mYt=new v7e(!0);const WJ=t=>t,XF=t=>Reflect.getPrototypeOf(t);function _Yt(t,e,n){return function(...s){const r=this.__v_raw,i=ts(r),o=pS(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?WJ:e?kq:_a;return!e&&ac(i,"iterate",l?HJ:TT),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function JF(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function yYt(t,e){const n={get(r){const i=this.__v_raw,o=ts(i),a=ts(r);t||(Uv(r,a)&&ac(o,"get",r),ac(o,"get",a));const{has:l}=XF(o),u=e?WJ:t?kq:_a;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&ac(ts(r),"iterate",TT),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=ts(i),a=ts(r);return t||(Uv(r,a)&&ac(o,"has",r),ac(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=ts(a),u=e?WJ:t?kq:_a;return!t&&ac(l,"iterate",TT),a.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return Ho(n,t?{add:JF("add"),set:JF("set"),delete:JF("delete"),clear:JF("clear")}:{add(r){!e&&!kh(r)&&!Xw(r)&&(r=ts(r));const i=ts(this);return XF(i).has.call(i,r)||(i.add(r),hm(i,"add",r,r)),this},set(r,i){!e&&!kh(i)&&!Xw(i)&&(i=ts(i));const o=ts(this),{has:a,get:l}=XF(o);let u=a.call(o,r);u||(r=ts(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?Uv(i,h)&&hm(o,"set",r,i):hm(o,"add",r,i),this},delete(r){const i=ts(this),{has:o,get:a}=XF(i);let l=o.call(i,r);l||(r=ts(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&hm(i,"delete",r,void 0),u},clear(){const r=ts(this),i=r.size!==0,o=r.clear();return i&&hm(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=_Yt(r,t,e)}),n}function Kle(t,e){const n=yYt(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(vs(n,r)&&r in s?n:s,r,i)}const vYt={get:Kle(!1,!1)},wYt={get:Kle(!1,!0)},bYt={get:Kle(!0,!1)};const w7e=new WeakMap,b7e=new WeakMap,E7e=new WeakMap,EYt=new WeakMap;function TYt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CYt(t){return t.__v_skip||!Object.isExtensible(t)?0:TYt(GQt(t))}function rR(t){return Xw(t)?t:Qle(t,!1,pYt,vYt,w7e)}function T7e(t){return Qle(t,!1,mYt,wYt,b7e)}function C7e(t){return Qle(t,!0,gYt,bYt,E7e)}function Qle(t,e,n,s,r){if(!Ar(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=CYt(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function gS(t){return Xw(t)?gS(t.__v_raw):!!(t&&t.__v_isReactive)}function Xw(t){return!!(t&&t.__v_isReadonly)}function kh(t){return!!(t&&t.__v_isShallow)}function Yle(t){return t?!!t.__v_raw:!1}function ts(t){const e=t&&t.__v_raw;return e?ts(e):t}function w2(t){return!vs(t,"__v_skip")&&Object.isExtensible(t)&&$J(t,"__v_skip",!0),t}const _a=t=>Ar(t)?rR(t):t,kq=t=>Ar(t)?C7e(t):t;function Ta(t){return t?t.__v_isRef===!0:!1}function Jw(t){return I7e(t,!1)}function IYt(t){return I7e(t,!0)}function I7e(t,e){return Ta(t)?t:new SYt(t,e)}class SYt{constructor(e,n){this.dep=new Gle,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ts(e),this._value=n?e:_a(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||kh(e)||Xw(e);e=s?e:ts(e),Uv(e,n)&&(this._rawValue=e,this._value=s?e:_a(e),this.dep.trigger())}}function CT(t){return Ta(t)?t.value:t}const kYt={get:(t,e,n)=>e==="__v_raw"?t:CT(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ta(r)&&!Ta(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function S7e(t){return gS(t)?t:new Proxy(t,kYt)}function Pdn(t){const e=Pt(t)?new Array(t.length):{};for(const n in t)e[n]=AYt(t,n);return e}class RYt{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return cYt(ts(this._object),this._key)}}function AYt(t,e,n){const s=t[e];return Ta(s)?s:new RYt(t,e,n)}class PYt{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Gle(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=oO-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&rr!==this)return h7e(this,!0),!0}get value(){const e=this.dep.track();return p7e(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function NYt(t,e,n=!1){let s,r;return Kt(t)?s=t:(s=t.get,r=t.set),new PYt(s,r,n)}const ZF={},Rq=new WeakMap;let _E;function xYt(t,e=!1,n=_E){if(n){let s=Rq.get(n);s||Rq.set(n,s=[]),s.push(t)}}function DYt(t,e,n=Gs){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:kh(q)||r===!1||r===0?dm(q,1):dm(q);let h,d,p,m,w=!1,R=!1;if(Ta(t)?(d=()=>t.value,w=kh(t)):gS(t)?(d=()=>u(t),w=!0):Pt(t)?(R=!0,w=t.some(q=>gS(q)||kh(q)),d=()=>t.map(q=>{if(Ta(q))return q.value;if(gS(q))return u(q);if(Kt(q))return l?l(q,2):q()})):Kt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){E_();try{p()}finally{T_()}}const q=_E;_E=h;try{return l?l(t,3,[m]):t(m)}finally{_E=q}}:d=wp,e&&r){const q=d,W=r===!0?1/0:r;d=()=>dm(q(),W)}const P=iYt(),O=()=>{h.stop(),P&&P.active&&qle(P.effects,h)};if(i&&e){const q=e;e=(...W)=>{q(...W),O()}}let M=R?new Array(t.length).fill(ZF):ZF;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const W=h.run();if(r||w||(R?W.some((J,I)=>Uv(J,M[I])):Uv(W,M))){p&&p();const J=_E;_E=h;try{const I=[W,M===ZF?void 0:R&&M[0]===ZF?[]:M,m];M=W,l?l(e,3,I):e(...I)}finally{_E=J}}}else h.run()};return a&&a(V),h=new l7e(d),h.scheduler=o?()=>o(V,!1):V,m=q=>xYt(q,!1,h),p=h.onStop=()=>{const q=Rq.get(h);if(q){if(l)l(q,4);else for(const W of q)W();Rq.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function dm(t,e=1/0,n){if(e<=0||!Ar(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ta(t))dm(t.value,e,n);else if(Pt(t))for(let s=0;s<t.length;s++)dm(t[s],e,n);else if(t7e(t)||pS(t))t.forEach(s=>{dm(s,e,n)});else if(r7e(t)){for(const s in t)dm(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&dm(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function b2(t,e,n,s){try{return s?t(...s):t()}catch(r){AH(r,e,n)}}function af(t,e,n,s){if(Kt(t)){const r=b2(t,e,n,s);return r&&n7e(r)&&r.catch(i=>{AH(i,e,n)}),r}if(Pt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(af(t[i],e,n,s));return r}}function AH(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Gs;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){E_(),b2(i,null,10,[t,l,u]),T_();return}}OYt(t,n,r,s,o)}function OYt(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const zc=[];let Pf=-1;const mS=[];let Fy=null,hI=0;const k7e=Promise.resolve();let Aq=null;function R7e(t){const e=Aq||k7e;return t?e.then(this?t.bind(this):t):e}function LYt(t){let e=Pf+1,n=zc.length;for(;e<n;){const s=e+n>>>1,r=zc[s],i=cO(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Xle(t){if(!(t.flags&1)){const e=cO(t),n=zc[zc.length-1];!n||!(t.flags&2)&&e>=cO(n)?zc.push(t):zc.splice(LYt(e),0,t),t.flags|=1,A7e()}}function A7e(){Aq||(Aq=k7e.then(N7e))}function MYt(t){Pt(t)?mS.push(...t):Fy&&t.id===-1?Fy.splice(hI+1,0,t):t.flags&1||(mS.push(t),t.flags|=1),A7e()}function $0e(t,e,n=Pf+1){for(;n<zc.length;n++){const s=zc[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;zc.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function P7e(t){if(mS.length){const e=[...new Set(mS)].sort((n,s)=>cO(n)-cO(s));if(mS.length=0,Fy){Fy.push(...e);return}for(Fy=e,hI=0;hI<Fy.length;hI++){const n=Fy[hI];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Fy=null,hI=0}}const cO=t=>t.id==null?t.flags&2?-1:1/0:t.id;function N7e(t){try{for(Pf=0;Pf<zc.length;Pf++){const e=zc[Pf];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),b2(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Pf<zc.length;Pf++){const e=zc[Pf];e&&(e.flags&=-2)}Pf=-1,zc.length=0,P7e(),Aq=null,(zc.length||mS.length)&&N7e()}}let Wu=null,x7e=null;function Pq(t){const e=Wu;return Wu=t,x7e=t&&t.type.__scopeId||null,e}function FYt(t,e=Wu,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&sIe(-1);const i=Pq(e);let o;try{o=t(...r)}finally{Pq(i),s._d&&sIe(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function D7e(t,e){if(Wu===null)return t;const n=LH(Wu),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Gs]=e[r];i&&(Kt(i)&&(i={mounted:i,updated:i}),i.deep&&dm(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Zb(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(E_(),af(l,n,8,[t.el,a,t,e]),T_())}}const O7e=Symbol("_vte"),L7e=t=>t.__isTeleport,NN=t=>t&&(t.disabled||t.disabled===""),z0e=t=>t&&(t.defer||t.defer===""),H0e=t=>typeof SVGElement<"u"&&t instanceof SVGElement,W0e=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,GJ=(t,e)=>{const n=t&&t.to;return yi(n)?e?e(n):null:n},M7e={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:R,createComment:P}}=u,O=NN(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const W=e.el=R(""),J=e.anchor=R("");m(W,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,l))},v=()=>{const y=e.target=GJ(e.props,w),T=F7e(y,e,R,m);y&&(o!=="svg"&&H0e(y)?o="svg":o!=="mathml"&&W0e(y)&&(o="mathml"),O||(I(y,T),DV(e,!1)))};O&&(I(n,J),DV(e,!0)),z0e(e.props)?(e.el.__isMounted=!1,Fc(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(z0e(e.props)&&t.el.__isMounted===!1){Fc(()=>{M7e.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=NN(t.props),y=v?n:J,T=v?W:I;if(o==="svg"||H0e(J)?o="svg":(o==="mathml"||W0e(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),rue(t,e,!0)):l||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):e4(e,n,W,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=GJ(e.props,w);S&&e4(e,S,null,u,0)}else v&&e4(e,J,I,u,1);DV(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!NN(p);for(let w=0;w<a.length;w++){const R=a[w];s(R,e,n,m,!!R.dynamicChildren)}}},move:e4,hydrate:VYt};function e4(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||NN(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function VYt(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=GJ(e.props,l);if(p){const m=NN(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let R=w;for(;R;){if(R&&R.nodeType===8){if(R.data==="teleport start anchor")e.targetStart=R;else if(R.data==="teleport anchor"){e.targetAnchor=R,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}R=o(R)}e.targetAnchor||F7e(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}DV(e,m)}return e.anchor&&o(e.anchor)}const Ndn=M7e;function DV(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function F7e(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[O7e]=i,t&&(s(r,t),s(i,t)),i}const Vy=Symbol("_leaveCb"),t4=Symbol("_enterCb");function V7e(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Zle(()=>{t.isMounted=!0}),eue(()=>{t.isUnmounting=!0}),t}const ih=[Function,Array],U7e={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ih,onEnter:ih,onAfterEnter:ih,onEnterCancelled:ih,onBeforeLeave:ih,onLeave:ih,onAfterLeave:ih,onLeaveCancelled:ih,onBeforeAppear:ih,onAppear:ih,onAfterAppear:ih,onAppearCancelled:ih},q7e=t=>{const e=t.subTree;return e.component?q7e(e.component):e},UYt={name:"BaseTransition",props:U7e,setup(t,{slots:e}){const n=n0(),s=V7e();return()=>{const r=e.default&&Jle(e.default(),!0);if(!r||!r.length)return;const i=j7e(r),o=ts(t),{mode:a}=o;if(s.isLeaving)return OG(i);const l=G0e(i);if(!l)return OG(i);let u=lO(l,o,s,n,d=>u=d);l.type!==Qc&&mC(l,u);let h=n.subTree&&G0e(n.subTree);if(h&&h.type!==Qc&&!IE(l,h)&&q7e(n).type!==Qc){let d=lO(h,o,s,n);if(mC(h,d),a==="out-in"&&l.type!==Qc)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},OG(i);a==="in-out"&&l.type!==Qc?d.delayLeave=(p,m,w)=>{const R=B7e(s,h);R[String(h.key)]=h,p[Vy]=()=>{m(),p[Vy]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function j7e(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Qc){e=n;break}}return e}const qYt=UYt;function B7e(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function lO(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:R,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),W=B7e(n,t),J=(y,T)=>{y&&af(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),Pt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[Vy]&&y[Vy](!0);const S=W[q];S&&IE(t,S)&&S.el[Vy]&&S.el[Vy](),J(T,[y])},enter(y){let T=u,S=h,E=d;if(!n.isMounted)if(i)T=O||u,S=M||h,E=V||d;else return;let b=!1;const G=y[t4]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[t4]=void 0)};T?I(T,[y,G]):G()},leave(y,T){const S=String(t.key);if(y[t4]&&y[t4](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Vy]=G=>{E||(E=!0,T(),G?J(R,[y]):J(w,[y]),y[Vy]=void 0,W[S]===t&&delete W[S])};W[S]=t,m?I(m,[y,b]):b()},clone(y){const T=lO(y,e,n,s,r);return r&&r(T),T}};return v}function OG(t){if(NH(t))return t=Zw(t),t.children=null,t}function G0e(t){if(!NH(t))return L7e(t.type)&&t.children?j7e(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Kt(n.default))return n.default()}}function mC(t,e){t.shapeFlag&6&&t.component?(t.transition=e,mC(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Jle(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===$h?(o.patchFlag&128&&r++,s=s.concat(Jle(o.children,e,a))):(e||o.type!==Qc)&&s.push(a!=null?Zw(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function PH(t,e){return Kt(t)?Ho({name:t.name},e,{setup:t}):t}function $7e(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xN(t,e,n,s,r=!1){if(Pt(t)){t.forEach((w,R)=>xN(w,e&&(Pt(e)?e[R]:e),n,s,r));return}if(DN(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&xN(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?LH(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Gs?a.refs={}:a.refs,d=a.setupState,p=ts(d),m=d===Gs?()=>!1:w=>vs(p,w);if(u!=null&&u!==l&&(yi(u)?(h[u]=null,m(u)&&(d[u]=null)):Ta(u)&&(u.value=null)),Kt(l))b2(l,a,12,[o,h]);else{const w=yi(l),R=Ta(l);if(w||R){const P=()=>{if(t.f){const O=w?m(l)?d[l]:h[l]:l.value;r?Pt(O)&&qle(O,i):Pt(O)?O.includes(i)||O.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):R&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,Fc(P,n)):P()}}}kH().requestIdleCallback;kH().cancelIdleCallback;const DN=t=>!!t.type.__asyncLoader,NH=t=>t.type.__isKeepAlive;function jYt(t,e){z7e(t,"a",e)}function BYt(t,e){z7e(t,"da",e)}function z7e(t,e,n=pc){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(xH(e,s,n),n){let r=n.parent;for(;r&&r.parent;)NH(r.parent.vnode)&&$Yt(s,e,n,r),r=r.parent}}function $Yt(t,e,n,s){const r=xH(e,t,s,!0);tue(()=>{qle(s[e],r)},n)}function xH(t,e,n=pc,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{E_();const a=E2(n),l=af(e,n,t,o);return a(),T_(),l});return s?r.unshift(i):r.push(i),i}}const W_=t=>(e,n=pc)=>{(!hO||t==="sp")&&xH(t,(...s)=>e(...s),n)},zYt=W_("bm"),Zle=W_("m"),HYt=W_("bu"),H7e=W_("u"),eue=W_("bum"),tue=W_("um"),WYt=W_("sp"),GYt=W_("rtg"),KYt=W_("rtc");function QYt(t,e=pc){xH("ec",t,e)}const YYt="components";function XYt(t,e){return ZYt(YYt,t,!0,e)||t}const JYt=Symbol.for("v-ndc");function ZYt(t,e,n=!0,s=!1){const r=Wu||pc;if(r){const i=r.type;{const a=BXt(i,!1);if(a&&(a===e||a===Mh(e)||a===SH(Mh(e))))return i}const o=K0e(r[t]||i[t],e)||K0e(r.appContext[t],e);return!o&&s?i:o}}function K0e(t,e){return t&&(t[e]||t[Mh(e)]||t[SH(Mh(e))])}function xdn(t,e,n,s){let r;const i=n,o=Pt(t);if(o||yi(t)){const a=o&&gS(t);let l=!1,u=!1;a&&(l=!kh(t),u=Xw(t),t=RH(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?kq(_a(t[h])):_a(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ar(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const KJ=t=>t?dWe(t)?LH(t):KJ(t.parent):null,ON=Ho(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>KJ(t.parent),$root:t=>KJ(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>G7e(t),$forceUpdate:t=>t.f||(t.f=()=>{Xle(t.update)}),$nextTick:t=>t.n||(t.n=R7e.bind(t.proxy)),$watch:t=>wXt.bind(t)}),LG=(t,e)=>t!==Gs&&!t.__isScriptSetup&&vs(t,e),eXt={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(LG(s,e))return o[e]=1,s[e];if(r!==Gs&&vs(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&vs(u,e))return o[e]=3,i[e];if(n!==Gs&&vs(n,e))return o[e]=4,n[e];QJ&&(o[e]=0)}}const h=ON[e];let d,p;if(h)return e==="$attrs"&&ac(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Gs&&vs(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,vs(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return LG(r,e)?(r[e]=n,!0):s!==Gs&&vs(s,e)?(s[e]=n,!0):vs(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==Gs&&vs(t,o)||LG(e,o)||(a=i[0])&&vs(a,o)||vs(s,o)||vs(ON,o)||vs(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:vs(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Q0e(t){return Pt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let QJ=!0;function tXt(t){const e=G7e(t),n=t.proxy,s=t.ctx;QJ=!1,e.beforeCreate&&Y0e(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:R,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:W,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:G}=e;if(u&&nXt(u,s,null),o)for(const oe in o){const de=o[oe];Kt(de)&&(s[oe]=de.bind(n))}if(r){const oe=r.call(n,n);Ar(oe)&&(t.data=rR(oe))}if(QJ=!0,i)for(const oe in i){const de=i[oe],ct=Kt(de)?de.bind(n,n):Kt(de.get)?de.get.bind(n,n):wp,Ke=!Kt(de)&&Kt(de.set)?de.set.bind(n):wp,Qe=ot({get:ct,set:Ke});Object.defineProperty(s,oe,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:ge=>Qe.value=ge})}if(a)for(const oe in a)W7e(a[oe],s,n,oe);if(l){const oe=Kt(l)?l.call(n):l;Reflect.ownKeys(oe).forEach(de=>{OV(de,oe[de])})}h&&Y0e(h,t,"c");function ae(oe,de){Pt(de)?de.forEach(ct=>oe(ct.bind(n))):de&&oe(de.bind(n))}if(ae(zYt,d),ae(Zle,p),ae(HYt,m),ae(H7e,w),ae(jYt,R),ae(BYt,P),ae(QYt,v),ae(KYt,J),ae(GYt,I),ae(eue,M),ae(tue,q),ae(WYt,y),Pt(T))if(T.length){const oe=t.exposed||(t.exposed={});T.forEach(de=>{Object.defineProperty(oe,de,{get:()=>n[de],set:ct=>n[de]=ct,enumerable:!0})})}else t.exposed||(t.exposed={});W&&t.render===wp&&(t.render=W),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&$7e(t)}function nXt(t,e,n=wp){Pt(t)&&(t=YJ(t));for(const s in t){const r=t[s];let i;Ar(r)?"default"in r?i=Rh(r.from||s,r.default,!0):i=Rh(r.from||s):i=Rh(r),Ta(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Y0e(t,e,n){af(Pt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function W7e(t,e,n,s){let r=s.includes(".")?iWe(n,s):()=>n[s];if(yi(t)){const i=e[t];Kt(i)&&LN(r,i)}else if(Kt(t))LN(r,t.bind(n));else if(Ar(t))if(Pt(t))t.forEach(i=>W7e(i,e,n,s));else{const i=Kt(t.handler)?t.handler.bind(n):e[t.handler];Kt(i)&&LN(r,i,t)}}function G7e(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Nq(l,u,o,!0)),Nq(l,e,o)),Ar(e)&&i.set(e,l),l}function Nq(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Nq(t,i,n,!0),r&&r.forEach(o=>Nq(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=sXt[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const sXt={data:X0e,props:J0e,emits:J0e,methods:VA,computed:VA,beforeCreate:xc,created:xc,beforeMount:xc,mounted:xc,beforeUpdate:xc,updated:xc,beforeDestroy:xc,beforeUnmount:xc,destroyed:xc,unmounted:xc,activated:xc,deactivated:xc,errorCaptured:xc,serverPrefetch:xc,components:VA,directives:VA,watch:iXt,provide:X0e,inject:rXt};function X0e(t,e){return e?t?function(){return Ho(Kt(t)?t.call(this,this):t,Kt(e)?e.call(this,this):e)}:e:t}function rXt(t,e){return VA(YJ(t),YJ(e))}function YJ(t){if(Pt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xc(t,e){return t?[...new Set([].concat(t,e))]:e}function VA(t,e){return t?Ho(Object.create(null),t,e):e}function J0e(t,e){return t?Pt(t)&&Pt(e)?[...new Set([...t,...e])]:Ho(Object.create(null),Q0e(t),Q0e(e??{})):e}function iXt(t,e){if(!t)return e;if(!e)return t;const n=Ho(Object.create(null),t);for(const s in e)n[s]=xc(t[s],e[s]);return n}function K7e(){return{app:null,config:{isNativeTag:HQt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oXt=0;function aXt(t,e){return function(s,r=null){Kt(s)||(s=Ho({},s)),r!=null&&!Ar(r)&&(r=null);const i=K7e(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:oXt++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:zXt,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Kt(h.install)?(o.add(h),h.install(u,...d)):Kt(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,p){if(!l){const m=u._ceVNode||rl(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,h,p),l=!0,u._container=h,h.__vue_app__=u,LH(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(af(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=IT;IT=u;try{return h()}finally{IT=d}}};return u}}let IT=null;function OV(t,e){if(pc){let n=pc.provides;const s=pc.parent&&pc.parent.provides;s===n&&(n=pc.provides=Object.create(s)),n[t]=e}}function Rh(t,e,n=!1){const s=n0();if(s||IT){let r=IT?IT._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Kt(e)?e.call(s&&s.proxy):e}}function Ddn(){return!!(n0()||IT)}const Q7e={},Y7e=()=>Object.create(Q7e),X7e=t=>Object.getPrototypeOf(t)===Q7e;function cXt(t,e,n,s=!1){const r={},i=Y7e();t.propsDefaults=Object.create(null),J7e(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:T7e(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function lXt(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=ts(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(DH(t.emitsOptions,p))continue;const m=e[p];if(l)if(vs(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Mh(p);r[w]=XJ(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{J7e(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!vs(e,d)&&((h=t0(d))===d||!vs(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=XJ(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!vs(e,d))&&(delete i[d],u=!0)}u&&hm(t.attrs,"set","")}function J7e(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(RN(l))continue;const u=e[l];let h;r&&vs(r,h=Mh(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:DH(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=ts(n),u=a||Gs;for(let h=0;h<i.length;h++){const d=i[h];n[d]=XJ(r,l,d,u[d],t,!vs(u,d))}}return o}function XJ(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=vs(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Kt(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=E2(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===t0(n))&&(s=!0))}return s}const uXt=new WeakMap;function Z7e(t,e,n=!1){const s=n?uXt:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Kt(t)){const h=d=>{l=!0;const[p,m]=Z7e(d,e,!0);Ho(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ar(t)&&s.set(t,fS),fS;if(Pt(i))for(let h=0;h<i.length;h++){const d=Mh(i[h]);Z0e(d)&&(o[d]=Gs)}else if(i)for(const h in i){const d=Mh(h);if(Z0e(d)){const p=i[h],m=o[d]=Pt(p)||Kt(p)?{type:p}:Ho({},p),w=m.type;let R=!1,P=!0;if(Pt(w))for(let O=0;O<w.length;++O){const M=w[O],V=Kt(M)&&M.name;if(V==="Boolean"){R=!0;break}else V==="String"&&(P=!1)}else R=Kt(w)&&w.name==="Boolean";m[0]=R,m[1]=P,(R||vs(m,"default"))&&a.push(d)}}const u=[o,a];return Ar(t)&&s.set(t,u),u}function Z0e(t){return t[0]!=="$"&&!RN(t)}const nue=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",sue=t=>Pt(t)?t.map(jf):[jf(t)],hXt=(t,e,n)=>{if(e._n)return e;const s=FYt((...r)=>sue(e(...r)),n);return s._c=!1,s},eWe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(nue(r))continue;const i=t[r];if(Kt(i))e[r]=hXt(r,i,s);else if(i!=null){const o=sue(i);e[r]=()=>o}}},tWe=(t,e)=>{const n=sue(e);t.slots.default=()=>n},nWe=(t,e,n)=>{for(const s in e)(n||!nue(s))&&(t[s]=e[s])},dXt=(t,e,n)=>{const s=t.slots=Y7e();if(t.vnode.shapeFlag&32){const r=e.__;r&&$J(s,"__",r,!0);const i=e._;i?(nWe(s,e,n),n&&$J(s,"_",i,!0)):eWe(e,s)}else e&&tWe(t,e)},fXt=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Gs;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:nWe(r,e,n):(i=!e.$stable,eWe(e,r)),o=e}else e&&(tWe(t,e),o={default:1});if(i)for(const a in r)!nue(a)&&o[a]==null&&delete r[a]},Fc=kXt;function pXt(t){return gXt(t)}function gXt(t,e){const n=kH();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=wp,insertStaticContent:w}=t,R=(C,A,x,L=null,U=null,j=null,H=void 0,$=null,B=!!A.dynamicChildren)=>{if(C===A)return;C&&!IE(C,A)&&(L=F(C),ge(C,U,j,!0),C=null),A.patchFlag===-2&&(B=!1,A.dynamicChildren=null);const{type:Y,ref:X,shapeFlag:Z}=A;switch(Y){case OH:P(C,A,x,L);break;case Qc:O(C,A,x,L);break;case FG:C==null&&M(A,x,L,H);break;case $h:E(C,A,x,L,U,j,H,$,B);break;default:Z&1?W(C,A,x,L,U,j,H,$,B):Z&6?b(C,A,x,L,U,j,H,$,B):(Z&64||Z&128)&&Y.process(C,A,x,L,U,j,H,$,B,ee)}X!=null&&U?xN(X,C&&C.ref,j,A||C,!A):X==null&&C&&C.ref!=null&&xN(C.ref,null,j,C,!0)},P=(C,A,x,L)=>{if(C==null)s(A.el=a(A.children),x,L);else{const U=A.el=C.el;A.children!==C.children&&u(U,A.children)}},O=(C,A,x,L)=>{C==null?s(A.el=l(A.children||""),x,L):A.el=C.el},M=(C,A,x,L)=>{[C.el,C.anchor]=w(C.children,A,x,L,C.el,C.anchor)},V=({el:C,anchor:A},x,L)=>{let U;for(;C&&C!==A;)U=p(C),s(C,x,L),C=U;s(A,x,L)},q=({el:C,anchor:A})=>{let x;for(;C&&C!==A;)x=p(C),r(C),C=x;r(A)},W=(C,A,x,L,U,j,H,$,B)=>{A.type==="svg"?H="svg":A.type==="math"&&(H="mathml"),C==null?J(A,x,L,U,j,H,$,B):y(C,A,U,j,H,$,B)},J=(C,A,x,L,U,j,H,$)=>{let B,Y;const{props:X,shapeFlag:Z,transition:te,dirs:ie}=C;if(B=C.el=o(C.type,j,X&&X.is,X),Z&8?h(B,C.children):Z&16&&v(C.children,B,null,L,U,MG(C,j),H,$),ie&&Zb(C,null,L,"created"),I(B,C,C.scopeId,H,L),X){for(const se in X)se!=="value"&&!RN(se)&&i(B,se,null,X[se],j,L);"value"in X&&i(B,"value",null,X.value,j),(Y=X.onVnodeBeforeMount)&&yf(Y,L,C)}ie&&Zb(C,null,L,"beforeMount");const re=mXt(U,te);re&&te.beforeEnter(B),s(B,A,x),((Y=X&&X.onVnodeMounted)||re||ie)&&Fc(()=>{Y&&yf(Y,L,C),re&&te.enter(B),ie&&Zb(C,null,L,"mounted")},U)},I=(C,A,x,L,U)=>{if(x&&m(C,x),L)for(let j=0;j<L.length;j++)m(C,L[j]);if(U){let j=U.subTree;if(A===j||aWe(j.type)&&(j.ssContent===A||j.ssFallback===A)){const H=U.vnode;I(C,H,H.scopeId,H.slotScopeIds,U.parent)}}},v=(C,A,x,L,U,j,H,$,B=0)=>{for(let Y=B;Y<C.length;Y++){const X=C[Y]=$?Uy(C[Y]):jf(C[Y]);R(null,X,A,x,L,U,j,H,$)}},y=(C,A,x,L,U,j,H)=>{const $=A.el=C.el;let{patchFlag:B,dynamicChildren:Y,dirs:X}=A;B|=C.patchFlag&16;const Z=C.props||Gs,te=A.props||Gs;let ie;if(x&&eE(x,!1),(ie=te.onVnodeBeforeUpdate)&&yf(ie,x,A,C),X&&Zb(A,C,x,"beforeUpdate"),x&&eE(x,!0),(Z.innerHTML&&te.innerHTML==null||Z.textContent&&te.textContent==null)&&h($,""),Y?T(C.dynamicChildren,Y,$,x,L,MG(A,U),j):H||de(C,A,$,null,x,L,MG(A,U),j,!1),B>0){if(B&16)S($,Z,te,x,U);else if(B&2&&Z.class!==te.class&&i($,"class",null,te.class,U),B&4&&i($,"style",Z.style,te.style,U),B&8){const re=A.dynamicProps;for(let se=0;se<re.length;se++){const fe=re[se],Se=Z[fe],Ve=te[fe];(Ve!==Se||fe==="value")&&i($,fe,Se,Ve,U,x)}}B&1&&C.children!==A.children&&h($,A.children)}else!H&&Y==null&&S($,Z,te,x,U);((ie=te.onVnodeUpdated)||X)&&Fc(()=>{ie&&yf(ie,x,A,C),X&&Zb(A,C,x,"updated")},L)},T=(C,A,x,L,U,j,H)=>{for(let $=0;$<A.length;$++){const B=C[$],Y=A[$],X=B.el&&(B.type===$h||!IE(B,Y)||B.shapeFlag&198)?d(B.el):x;R(B,Y,X,null,L,U,j,H,!0)}},S=(C,A,x,L,U)=>{if(A!==x){if(A!==Gs)for(const j in A)!RN(j)&&!(j in x)&&i(C,j,A[j],null,U,L);for(const j in x){if(RN(j))continue;const H=x[j],$=A[j];H!==$&&j!=="value"&&i(C,j,$,H,U,L)}"value"in x&&i(C,"value",A.value,x.value,U)}},E=(C,A,x,L,U,j,H,$,B)=>{const Y=A.el=C?C.el:a(""),X=A.anchor=C?C.anchor:a("");let{patchFlag:Z,dynamicChildren:te,slotScopeIds:ie}=A;ie&&($=$?$.concat(ie):ie),C==null?(s(Y,x,L),s(X,x,L),v(A.children||[],x,X,U,j,H,$,B)):Z>0&&Z&64&&te&&C.dynamicChildren?(T(C.dynamicChildren,te,x,U,j,H,$),(A.key!=null||U&&A===U.subTree)&&rue(C,A,!0)):de(C,A,x,X,U,j,H,$,B)},b=(C,A,x,L,U,j,H,$,B)=>{A.slotScopeIds=$,C==null?A.shapeFlag&512?U.ctx.activate(A,x,L,H,B):G(A,x,L,U,j,H,B):ne(C,A,B)},G=(C,A,x,L,U,j,H)=>{const $=C.component=FXt(C,L,U);if(NH(C)&&($.ctx.renderer=ee),VXt($,!1,H),$.asyncDep){if(U&&U.registerDep($,ae,H),!C.el){const B=$.subTree=rl(Qc);O(null,B,A,x),C.placeholder=B.el}}else ae($,C,A,x,U,j,H)},ne=(C,A,x)=>{const L=A.component=C.component;if(IXt(C,A,x))if(L.asyncDep&&!L.asyncResolved){oe(L,A,x);return}else L.next=A,L.update();else A.el=C.el,L.vnode=A},ae=(C,A,x,L,U,j,H)=>{const $=()=>{if(C.isMounted){let{next:Z,bu:te,u:ie,parent:re,vnode:se}=C;{const Ge=sWe(C);if(Ge){Z&&(Z.el=se.el,oe(C,Z,H)),Ge.asyncDep.then(()=>{C.isUnmounted||$()});return}}let fe=Z,Se;eE(C,!1),Z?(Z.el=se.el,oe(C,Z,H)):Z=se,te&&AG(te),(Se=Z.props&&Z.props.onVnodeBeforeUpdate)&&yf(Se,re,Z,se),eE(C,!0);const Ve=tIe(C),We=C.subTree;C.subTree=Ve,R(We,Ve,d(We.el),F(We),C,U,j),Z.el=Ve.el,fe===null&&SXt(C,Ve.el),ie&&Fc(ie,U),(Se=Z.props&&Z.props.onVnodeUpdated)&&Fc(()=>yf(Se,re,Z,se),U)}else{let Z;const{el:te,props:ie}=A,{bm:re,m:se,parent:fe,root:Se,type:Ve}=C,We=DN(A);eE(C,!1),re&&AG(re),!We&&(Z=ie&&ie.onVnodeBeforeMount)&&yf(Z,fe,A),eE(C,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(Ve);const Ge=C.subTree=tIe(C);R(null,Ge,x,L,C,U,j),A.el=Ge.el}if(se&&Fc(se,U),!We&&(Z=ie&&ie.onVnodeMounted)){const Ge=A;Fc(()=>yf(Z,fe,Ge),U)}(A.shapeFlag&256||fe&&DN(fe.vnode)&&fe.vnode.shapeFlag&256)&&C.a&&Fc(C.a,U),C.isMounted=!0,A=x=L=null}};C.scope.on();const B=C.effect=new l7e($);C.scope.off();const Y=C.update=B.run.bind(B),X=C.job=B.runIfDirty.bind(B);X.i=C,X.id=C.uid,B.scheduler=()=>Xle(X),eE(C,!0),Y()},oe=(C,A,x)=>{A.component=C;const L=C.vnode.props;C.vnode=A,C.next=null,lXt(C,A.props,L,x),fXt(C,A.children,x),E_(),$0e(C),T_()},de=(C,A,x,L,U,j,H,$,B=!1)=>{const Y=C&&C.children,X=C?C.shapeFlag:0,Z=A.children,{patchFlag:te,shapeFlag:ie}=A;if(te>0){if(te&128){Ke(Y,Z,x,L,U,j,H,$,B);return}else if(te&256){ct(Y,Z,x,L,U,j,H,$,B);return}}ie&8?(X&16&&Fe(Y,U,j),Z!==Y&&h(x,Z)):X&16?ie&16?Ke(Y,Z,x,L,U,j,H,$,B):Fe(Y,U,j,!0):(X&8&&h(x,""),ie&16&&v(Z,x,L,U,j,H,$,B))},ct=(C,A,x,L,U,j,H,$,B)=>{C=C||fS,A=A||fS;const Y=C.length,X=A.length,Z=Math.min(Y,X);let te;for(te=0;te<Z;te++){const ie=A[te]=B?Uy(A[te]):jf(A[te]);R(C[te],ie,x,null,U,j,H,$,B)}Y>X?Fe(C,U,j,!0,!1,Z):v(A,x,L,U,j,H,$,B,Z)},Ke=(C,A,x,L,U,j,H,$,B)=>{let Y=0;const X=A.length;let Z=C.length-1,te=X-1;for(;Y<=Z&&Y<=te;){const ie=C[Y],re=A[Y]=B?Uy(A[Y]):jf(A[Y]);if(IE(ie,re))R(ie,re,x,null,U,j,H,$,B);else break;Y++}for(;Y<=Z&&Y<=te;){const ie=C[Z],re=A[te]=B?Uy(A[te]):jf(A[te]);if(IE(ie,re))R(ie,re,x,null,U,j,H,$,B);else break;Z--,te--}if(Y>Z){if(Y<=te){const ie=te+1,re=ie<X?A[ie].el:L;for(;Y<=te;)R(null,A[Y]=B?Uy(A[Y]):jf(A[Y]),x,re,U,j,H,$,B),Y++}}else if(Y>te)for(;Y<=Z;)ge(C[Y],U,j,!0),Y++;else{const ie=Y,re=Y,se=new Map;for(Y=re;Y<=te;Y++){const Le=A[Y]=B?Uy(A[Y]):jf(A[Y]);Le.key!=null&&se.set(Le.key,Y)}let fe,Se=0;const Ve=te-re+1;let We=!1,Ge=0;const ss=new Array(Ve);for(Y=0;Y<Ve;Y++)ss[Y]=0;for(Y=ie;Y<=Z;Y++){const Le=C[Y];if(Se>=Ve){ge(Le,U,j,!0);continue}let rs;if(Le.key!=null)rs=se.get(Le.key);else for(fe=re;fe<=te;fe++)if(ss[fe-re]===0&&IE(Le,A[fe])){rs=fe;break}rs===void 0?ge(Le,U,j,!0):(ss[rs-re]=Y+1,rs>=Ge?Ge=rs:We=!0,R(Le,A[rs],x,null,U,j,H,$,B),Se++)}const Ue=We?_Xt(ss):fS;for(fe=Ue.length-1,Y=Ve-1;Y>=0;Y--){const Le=re+Y,rs=A[Le],Pr=A[Le+1],Xr=Le+1<X?Pr.el||Pr.placeholder:L;ss[Y]===0?R(null,rs,x,Xr,U,j,H,$,B):We&&(fe<0||Y!==Ue[fe]?Qe(rs,x,Xr,2):fe--)}}},Qe=(C,A,x,L,U=null)=>{const{el:j,type:H,transition:$,children:B,shapeFlag:Y}=C;if(Y&6){Qe(C.component.subTree,A,x,L);return}if(Y&128){C.suspense.move(A,x,L);return}if(Y&64){H.move(C,A,x,ee);return}if(H===$h){s(j,A,x);for(let Z=0;Z<B.length;Z++)Qe(B[Z],A,x,L);s(C.anchor,A,x);return}if(H===FG){V(C,A,x);return}if(L!==2&&Y&1&&$)if(L===0)$.beforeEnter(j),s(j,A,x),Fc(()=>$.enter(j),U);else{const{leave:Z,delayLeave:te,afterLeave:ie}=$,re=()=>{C.ctx.isUnmounted?r(j):s(j,A,x)},se=()=>{Z(j,()=>{re(),ie&&ie()})};te?te(j,re,se):se()}else s(j,A,x)},ge=(C,A,x,L=!1,U=!1)=>{const{type:j,props:H,ref:$,children:B,dynamicChildren:Y,shapeFlag:X,patchFlag:Z,dirs:te,cacheIndex:ie}=C;if(Z===-2&&(U=!1),$!=null&&(E_(),xN($,null,x,C,!0),T_()),ie!=null&&(A.renderCache[ie]=void 0),X&256){A.ctx.deactivate(C);return}const re=X&1&&te,se=!DN(C);let fe;if(se&&(fe=H&&H.onVnodeBeforeUnmount)&&yf(fe,A,C),X&6)it(C.component,x,L);else{if(X&128){C.suspense.unmount(x,L);return}re&&Zb(C,null,A,"beforeUnmount"),X&64?C.type.remove(C,A,x,ee,L):Y&&!Y.hasOnce&&(j!==$h||Z>0&&Z&64)?Fe(Y,A,x,!1,!0):(j===$h&&Z&384||!U&&X&16)&&Fe(B,A,x),L&&he(C)}(se&&(fe=H&&H.onVnodeUnmounted)||re)&&Fc(()=>{fe&&yf(fe,A,C),re&&Zb(C,null,A,"unmounted")},x)},he=C=>{const{type:A,el:x,anchor:L,transition:U}=C;if(A===$h){qt(x,L);return}if(A===FG){q(C);return}const j=()=>{r(x),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(C.shapeFlag&1&&U&&!U.persisted){const{leave:H,delayLeave:$}=U,B=()=>H(x,j);$?$(C.el,j,B):B()}else j()},qt=(C,A)=>{let x;for(;C!==A;)x=p(C),r(C),C=x;r(A)},it=(C,A,x)=>{const{bum:L,scope:U,job:j,subTree:H,um:$,m:B,a:Y,parent:X,slots:{__:Z}}=C;eIe(B),eIe(Y),L&&AG(L),X&&Pt(Z)&&Z.forEach(te=>{X.renderCache[te]=void 0}),U.stop(),j&&(j.flags|=8,ge(H,C,A,x)),$&&Fc($,A),Fc(()=>{C.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},Fe=(C,A,x,L=!1,U=!1,j=0)=>{for(let H=j;H<C.length;H++)ge(C[H],A,x,L,U)},F=C=>{if(C.shapeFlag&6)return F(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const A=p(C.anchor||C.el),x=A&&A[O7e];return x?p(x):A};let Q=!1;const K=(C,A,x)=>{C==null?A._vnode&&ge(A._vnode,null,null,!0):R(A._vnode||null,C,A,null,null,null,x),A._vnode=C,Q||(Q=!0,$0e(),P7e(),Q=!1)},ee={p:R,um:ge,m:Qe,r:he,mt:G,mc:v,pc:de,pbc:T,n:F,o:t};return{render:K,hydrate:void 0,createApp:aXt(K)}}function MG({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function eE({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mXt(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function rue(t,e,n=!1){const s=t.children,r=e.children;if(Pt(s)&&Pt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Uy(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&rue(o,a)),a.type===OH&&(a.el=o.el),a.type===Qc&&!a.el&&(a.el=o.el)}}function _Xt(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function sWe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:sWe(e)}function eIe(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const yXt=Symbol.for("v-scx"),vXt=()=>Rh(yXt);function LN(t,e,n){return rWe(t,e,n)}function rWe(t,e,n=Gs){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ho({},n),l=e&&s||!e&&i!=="post";let u;if(hO){if(i==="sync"){const m=vXt();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=wp,m.resume=wp,m.pause=wp,m}}const h=pc;a.call=(m,w,R)=>af(m,h,w,R);let d=!1;i==="post"?a.scheduler=m=>{Fc(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():Xle(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=DYt(t,e,a);return hO&&(u?u.push(p):l&&p()),p}function wXt(t,e,n){const s=this.proxy,r=yi(t)?t.includes(".")?iWe(s,t):()=>s[t]:t.bind(s,s);let i;Kt(e)?i=e:(i=e.handler,n=e);const o=E2(this),a=rWe(r,i.bind(s),n);return o(),a}function iWe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const bXt=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Mh(e)}Modifiers`]||t[`${t0(e)}Modifiers`];function EXt(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Gs;let r=n;const i=e.startsWith("update:"),o=i&&bXt(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>yi(h)?h.trim():h)),o.number&&(r=n.map(YQt)));let a,l=s[a=RG(e)]||s[a=RG(Mh(e))];!l&&i&&(l=s[a=RG(t0(e))]),l&&af(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,af(u,t,6,r)}}function oWe(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Kt(t)){const l=u=>{const h=oWe(u,e,!0);h&&(a=!0,Ho(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ar(t)&&s.set(t,null),null):(Pt(i)?i.forEach(l=>o[l]=null):Ho(o,i),Ar(t)&&s.set(t,o),o)}function DH(t,e){return!t||!TH(e)?!1:(e=e.slice(2).replace(/Once$/,""),vs(t,e[0].toLowerCase()+e.slice(1))||vs(t,t0(e))||vs(t,e))}function tIe(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:R}=t,P=Pq(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,W=q;O=jf(u.call(W,q,h,d,m,p,w)),M=a}else{const q=e;O=jf(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:TXt(a)}}catch(q){MN.length=0,AH(q,t,1),O=rl(Qc)}let V=O;if(M&&R!==!1){const q=Object.keys(M),{shapeFlag:W}=V;q.length&&W&7&&(i&&q.some(Ule)&&(M=CXt(M,i)),V=Zw(V,M,!1,!0))}return n.dirs&&(V=Zw(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&mC(V,n.transition),O=V,Pq(P),O}const TXt=t=>{let e;for(const n in t)(n==="class"||n==="style"||TH(n))&&((e||(e={}))[n]=t[n]);return e},CXt=(t,e)=>{const n={};for(const s in t)(!Ule(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function IXt(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?nIe(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!DH(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?nIe(s,o,u):!0:!!o;return!1}function nIe(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!DH(n,i))return!0}return!1}function SXt({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const aWe=t=>t.__isSuspense;function kXt(t,e){e&&e.pendingBranch?Pt(t)?e.effects.push(...t):e.effects.push(t):MYt(t)}const $h=Symbol.for("v-fgt"),OH=Symbol.for("v-txt"),Qc=Symbol.for("v-cmt"),FG=Symbol.for("v-stc"),MN=[];let Gu=null;function cWe(t=!1){MN.push(Gu=t?null:[])}function RXt(){MN.pop(),Gu=MN[MN.length-1]||null}let uO=1;function sIe(t,e=!1){uO+=t,t<0&&Gu&&e&&(Gu.hasOnce=!0)}function lWe(t){return t.dynamicChildren=uO>0?Gu||fS:null,RXt(),uO>0&&Gu&&Gu.push(t),t}function AXt(t,e,n,s,r,i){return lWe(hWe(t,e,n,s,r,i,!0))}function PXt(t,e,n,s,r){return lWe(rl(t,e,n,s,r,!0))}function xq(t){return t?t.__v_isVNode===!0:!1}function IE(t,e){return t.type===e.type&&t.key===e.key}const uWe=({key:t})=>t??null,LV=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?yi(t)||Ta(t)||Kt(t)?{i:Wu,r:t,k:e,f:!!n}:t:null);function hWe(t,e=null,n=null,s=0,r=null,i=t===$h?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&uWe(e),ref:e&&LV(e),scopeId:x7e,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Wu};return a?(iue(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=yi(n)?8:16),uO>0&&!o&&Gu&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Gu.push(l),l}const rl=NXt;function NXt(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===JYt)&&(t=Qc),xq(t)){const a=Zw(t,e,!0);return n&&iue(a,n),uO>0&&!i&&Gu&&(a.shapeFlag&6?Gu[Gu.indexOf(t)]=a:Gu.push(a)),a.patchFlag=-2,a}if($Xt(t)&&(t=t.__vccOpts),e){e=xXt(e);let{class:a,style:l}=e;a&&!yi(a)&&(e.class=$le(a)),Ar(l)&&(Yle(l)&&!Pt(l)&&(l=Ho({},l)),e.style=Ble(l))}const o=yi(t)?1:aWe(t)?128:L7e(t)?64:Ar(t)?4:Kt(t)?2:0;return hWe(t,e,n,s,r,o,i,!0)}function xXt(t){return t?Yle(t)||X7e(t)?Ho({},t):t:null}function Zw(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?OXt(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&uWe(u),ref:e&&e.ref?n&&i?Pt(i)?i.concat(LV(e)):[i,LV(e)]:LV(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==$h?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zw(t.ssContent),ssFallback:t.ssFallback&&Zw(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&mC(h,l.clone(h)),h}function DXt(t=" ",e=0){return rl(OH,null,t,e)}function Odn(t="",e=!1){return e?(cWe(),PXt(Qc,null,t)):rl(Qc,null,t)}function jf(t){return t==null||typeof t=="boolean"?rl(Qc):Pt(t)?rl($h,null,t.slice()):xq(t)?Uy(t):rl(OH,null,String(t))}function Uy(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zw(t)}function iue(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Pt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),iue(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!X7e(e)?e._ctx=Wu:r===3&&Wu&&(Wu.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Kt(e)?(e={default:e,_ctx:Wu},n=32):(e=String(e),s&64?(n=16,e=[DXt(e)]):n=8);t.children=e,t.shapeFlag|=n}function OXt(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=$le([e.class,s.class]));else if(r==="style")e.style=Ble([e.style,s.style]);else if(TH(r)){const i=e[r],o=s[r];o&&i!==o&&!(Pt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function yf(t,e,n,s=null){af(t,e,7,[n,s])}const LXt=K7e();let MXt=0;function FXt(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||LXt,i={uid:MXt++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c7e(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Z7e(s,r),emitsOptions:oWe(s,r),emit:null,emitted:null,propsDefaults:Gs,inheritAttrs:s.inheritAttrs,ctx:Gs,data:Gs,props:Gs,attrs:Gs,slots:Gs,refs:Gs,setupState:Gs,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=EXt.bind(null,i),t.ce&&t.ce(i),i}let pc=null;const n0=()=>pc||Wu;let Dq,JJ;{const t=kH(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Dq=e("__VUE_INSTANCE_SETTERS__",n=>pc=n),JJ=e("__VUE_SSR_SETTERS__",n=>hO=n)}const E2=t=>{const e=pc;return Dq(t),t.scope.on(),()=>{t.scope.off(),Dq(e)}},rIe=()=>{pc&&pc.scope.off(),Dq(null)};function dWe(t){return t.vnode.shapeFlag&4}let hO=!1;function VXt(t,e=!1,n=!1){e&&JJ(e);const{props:s,children:r}=t.vnode,i=dWe(t);cXt(t,s,i,e),dXt(t,r,n||e);const o=i?UXt(t,e):void 0;return e&&JJ(!1),o}function UXt(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,eXt);const{setup:s}=n;if(s){E_();const r=t.setupContext=s.length>1?jXt(t):null,i=E2(t),o=b2(s,t,0,[t.props,r]),a=n7e(o);if(T_(),i(),(a||t.sp)&&!DN(t)&&$7e(t),a){if(o.then(rIe,rIe),e)return o.then(l=>{iIe(t,l)}).catch(l=>{AH(l,t,0)});t.asyncDep=o}else iIe(t,o)}else fWe(t)}function iIe(t,e,n){Kt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ar(e)&&(t.setupState=S7e(e)),fWe(t)}function fWe(t,e,n){const s=t.type;t.render||(t.render=s.render||wp);{const r=E2(t);E_();try{tXt(t)}finally{T_(),r()}}}const qXt={get(t,e){return ac(t,"get",""),t[e]}};function jXt(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,qXt),slots:t.slots,emit:t.emit,expose:e}}function LH(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(S7e(w2(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ON)return ON[n](t)},has(e,n){return n in e||n in ON}})):t.proxy}function BXt(t,e=!0){return Kt(t)?t.displayName||t.name:t.name||e&&t.__name}function $Xt(t){return Kt(t)&&"__vccOpts"in t}const ot=(t,e)=>NYt(t,e,hO);function Vt(t,e,n){const s=arguments.length;return s===2?Ar(e)&&!Pt(e)?xq(e)?rl(t,null,[e]):rl(t,e):rl(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&xq(n)&&(n=[n]),rl(t,e,n))}const zXt="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ZJ;const oIe=typeof window<"u"&&window.trustedTypes;if(oIe)try{ZJ=oIe.createPolicy("vue",{createHTML:t=>t})}catch{}const pWe=ZJ?t=>ZJ.createHTML(t):t=>t,HXt="http://www.w3.org/2000/svg",WXt="http://www.w3.org/1998/Math/MathML",Xg=typeof document<"u"?document:null,aIe=Xg&&Xg.createElement("template"),GXt={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Xg.createElementNS(HXt,t):e==="mathml"?Xg.createElementNS(WXt,t):n?Xg.createElement(t,{is:n}):Xg.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Xg.createTextNode(t),createComment:t=>Xg.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xg.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{aIe.innerHTML=pWe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=aIe.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ay="transition",nA="animation",Fk=Symbol("_vtc"),gWe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},mWe=Ho({},U7e,gWe),KXt=t=>(t.displayName="Transition",t.props=mWe,t),QXt=KXt((t,{slots:e})=>Vt(qYt,_We(t),e)),tE=(t,e=[])=>{Pt(t)?t.forEach(n=>n(...e)):t&&t(...e)},cIe=t=>t?Pt(t)?t.some(e=>e.length>1):t.length>1:!1;function _We(t){const e={};for(const E in t)E in gWe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=YXt(r),R=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:W,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,G,ne)=>{E._enterCancelled=ne,py(E,b?h:a),py(E,b?u:o),G&&G()},T=(E,b)=>{E._isLeaving=!1,py(E,d),py(E,m),py(E,p),b&&b()},S=E=>(b,G)=>{const ne=E?I:M,ae=()=>y(b,E,G);tE(ne,[b,ae]),lIe(()=>{py(b,E?l:i),Cf(b,E?h:a),cIe(ne)||uIe(b,s,R,ae)})};return Ho(e,{onBeforeEnter(E){tE(O,[E]),Cf(E,i),Cf(E,o)},onBeforeAppear(E){tE(J,[E]),Cf(E,l),Cf(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const G=()=>T(E,b);Cf(E,d),E._enterCancelled?(Cf(E,p),eZ()):(eZ(),Cf(E,p)),lIe(()=>{E._isLeaving&&(py(E,d),Cf(E,m),cIe(q)||uIe(E,s,P,G))}),tE(q,[E,G])},onEnterCancelled(E){y(E,!1,void 0,!0),tE(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),tE(v,[E])},onLeaveCancelled(E){T(E),tE(W,[E])}})}function YXt(t){if(t==null)return null;if(Ar(t))return[VG(t.enter),VG(t.leave)];{const e=VG(t);return[e,e]}}function VG(t){return XQt(t)}function Cf(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Fk]||(t[Fk]=new Set)).add(e)}function py(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Fk];n&&(n.delete(e),n.size||(t[Fk]=void 0))}function lIe(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let XXt=0;function uIe(t,e,n,s){const r=t._endId=++XXt,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=yWe(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function yWe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${ay}Delay`),i=s(`${ay}Duration`),o=hIe(r,i),a=s(`${nA}Delay`),l=s(`${nA}Duration`),u=hIe(a,l);let h=null,d=0,p=0;e===ay?o>0&&(h=ay,d=o,p=i.length):e===nA?u>0&&(h=nA,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?ay:nA:null,p=h?h===ay?i.length:l.length:0);const m=h===ay&&/\b(transform|all)(,|$)/.test(s(`${ay}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function hIe(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>dIe(n)+dIe(t[s])))}function dIe(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function eZ(){return document.body.offsetHeight}function JXt(t,e,n){const s=t[Fk];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Oq=Symbol("_vod"),vWe=Symbol("_vsh"),Ldn={beforeMount(t,{value:e},{transition:n}){t[Oq]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):sA(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),sA(t,!0),s.enter(t)):s.leave(t,()=>{sA(t,!1)}):sA(t,e))},beforeUnmount(t,{value:e}){sA(t,e)}};function sA(t,e){t.style.display=e?t[Oq]:"none",t[vWe]=!e}const ZXt=Symbol(""),eJt=/(^|;)\s*display\s*:/;function tJt(t,e,n){const s=t.style,r=yi(n);let i=!1;if(n&&!r){if(e)if(yi(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&MV(s,a,"")}else for(const o in e)n[o]==null&&MV(s,o,"");for(const o in n)o==="display"&&(i=!0),MV(s,o,n[o])}else if(r){if(e!==n){const o=s[ZXt];o&&(n+=";"+o),s.cssText=n,i=eJt.test(n)}}else e&&t.removeAttribute("style");Oq in t&&(t[Oq]=i?s.display:"",t[vWe]&&(s.display="none"))}const fIe=/\s*!important$/;function MV(t,e,n){if(Pt(n))n.forEach(s=>MV(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=nJt(t,e);fIe.test(n)?t.setProperty(t0(s),n.replace(fIe,""),"important"):t[s]=n}}const pIe=["Webkit","Moz","ms"],UG={};function nJt(t,e){const n=UG[e];if(n)return n;let s=Mh(e);if(s!=="filter"&&s in t)return UG[e]=s;s=SH(s);for(let r=0;r<pIe.length;r++){const i=pIe[r]+s;if(i in t)return UG[e]=i}return e}const gIe="http://www.w3.org/1999/xlink";function mIe(t,e,n,s,r,i=sYt(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(gIe,e.slice(6,e.length)):t.setAttributeNS(gIe,e,n):n==null||i&&!i7e(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Db(n)?String(n):n)}function _Ie(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?pWe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=i7e(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function sJt(t,e,n,s){t.addEventListener(e,n,s)}function rJt(t,e,n,s){t.removeEventListener(e,n,s)}const yIe=Symbol("_vei");function iJt(t,e,n,s,r=null){const i=t[yIe]||(t[yIe]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=oJt(e);if(s){const u=i[e]=lJt(s,r);sJt(t,a,u,l)}else o&&(rJt(t,a,o,l),i[e]=void 0)}}const vIe=/(?:Once|Passive|Capture)$/;function oJt(t){let e;if(vIe.test(t)){e={};let s;for(;s=t.match(vIe);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):t0(t.slice(2)),e]}let qG=0;const aJt=Promise.resolve(),cJt=()=>qG||(aJt.then(()=>qG=0),qG=Date.now());function lJt(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;af(uJt(s,n.value),e,5,[s])};return n.value=t,n.attached=cJt(),n}function uJt(t,e){if(Pt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const wIe=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,hJt=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?JXt(t,s,o):e==="style"?tJt(t,n,s):TH(e)?Ule(e)||iJt(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):dJt(t,e,s,o))?(_Ie(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&mIe(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!yi(s))?_Ie(t,Mh(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),mIe(t,e,s,o))};function dJt(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&wIe(e)&&Kt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return wIe(e)&&yi(n)?!1:e in t}const wWe=new WeakMap,bWe=new WeakMap,Lq=Symbol("_moveCb"),bIe=Symbol("_enterCb"),fJt=t=>(delete t.props.mode,t),pJt=fJt({name:"TransitionGroup",props:Ho({},mWe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=n0(),s=V7e();let r,i;return H7e(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!vJt(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(mJt),r.forEach(_Jt);const a=r.filter(yJt);eZ(),a.forEach(l=>{const u=l.el,h=u.style;Cf(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[Lq]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[Lq]=null,py(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=ts(t),a=_We(o);let l=o.tag||$h;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),mC(h,lO(h,a,s,n)),wWe.set(h,h.el.getBoundingClientRect()))}i=e.default?Jle(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&mC(h,lO(h,a,s,n))}return rl(l,null,i)}}}),gJt=pJt;function mJt(t){const e=t.el;e[Lq]&&e[Lq](),e[bIe]&&e[bIe]()}function _Jt(t){bWe.set(t,t.el.getBoundingClientRect())}function yJt(t){const e=wWe.get(t),n=bWe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function vJt(t,e,n){const s=t.cloneNode(),r=t[Fk];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=yWe(s);return i.removeChild(s),o}const wJt=["ctrl","shift","alt","meta"],bJt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>wJt.some(n=>t[`${n}Key`]&&!e.includes(n))},Mdn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=bJt[e[o]];if(a&&a(r,e))return}return t(r,...i)})},EJt=Ho({patchProp:hJt},GXt);let EIe;function TJt(){return EIe||(EIe=pXt(EJt))}const EWe=(...t)=>{const e=TJt().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=IJt(s);if(!r)return;const i=e._component;!Kt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,CJt(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function CJt(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function IJt(t){return yi(t)?document.querySelector(t):t}function MH(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function Fdn(t,e){for(const n in e)MH(t,n,e[n]);return t}const _C=Jw(!1);let tZ;function SJt(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function kJt(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const TWe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function RJt(t){const e=t.toLowerCase(),n=kJt(e),s=SJt(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),_C.value===!0&&(tZ={is:{...r}}),TWe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const TIe=navigator.userAgent||navigator.vendor||window.opera,AJt={has:{touch:!1,webStorage:!1},within:{iframe:!1}},bp={userAgent:TIe,is:RJt(TIe),has:{touch:TWe},within:{iframe:window.self!==window.top}},nZ={install(t){const{$q:e}=t;_C.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,bp),_C.value=!1}),e.platform=rR(this)):e.platform=this}};{let t;MH(bp.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(nZ,bp),_C.value===!0&&(Object.assign(nZ,tZ,AJt),tZ=null)}function T2(t){return w2(PH(t))}function PJt(t){return w2(t)}const FH=(t,e)=>{const n=rR(t);for(const s in t)MH(e,s,()=>n[s],r=>{n[s]=r});return e},yC={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(yC,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function dO(){}function Vdn(t){return t.button===0}function NJt(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Udn(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function CWe(t){t.stopPropagation()}function sZ(t){t.cancelable!==!1&&t.preventDefault()}function N0(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function qdn(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",sZ,yC.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",sZ,yC.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function xJt(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],yC[r[3]])})}function DJt(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],yC[s[3]])}),t[n]=void 0)}function OJt(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const jG=["sm","md","lg","xl"],{passive:CIe}=yC,LJt=FH({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:dO,setDebounce:dO,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||bp.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{jG.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&jG.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{jG.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,CIe),a=p>0?OJt(this.__update,p):this.__update,s.addEventListener("resize",a,CIe)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};_C.value===!0?e.push(h):h()}}),Va=FH({isActive:!1,mode:!1},{__media:void 0,set(t){Va.mode=t,t==="auto"?(Va.__media===void 0&&(Va.__media=window.matchMedia("(prefers-color-scheme: dark)"),Va.__updateMedia=()=>{Va.set("auto")},Va.__media.addListener(Va.__updateMedia)),t=Va.__media.matches):Va.__media!==void 0&&(Va.__media.removeListener(Va.__updateMedia),Va.__media=void 0),Va.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Va.set(Va.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function MJt(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let IWe=!1;function FJt(t){IWe=t.isComposing===!0}function VJt(t){return IWe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function rZ(t,e){return VJt(t)===!0?!1:[].concat(e).includes(t.keyCode)}function SWe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function UJt({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=SWe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function qJt(){const{is:t}=bp,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=SWe(t);r!==void 0&&n.add(`platform-${r}`)}}bp.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),bp.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function jJt(t){for(const e in t)MJt(e,t[e])}const BJt={install(t){if(this.__installed!==!0){if(_C.value===!0)qJt();else{const{$q:e}=t;e.config.brand!==void 0&&jJt(e.config.brand);const n=UJt(bp,e.config);document.body.classList.add.apply(document.body.classList,n)}bp.is.ios===!0&&document.body.addEventListener("touchstart",dO),window.addEventListener("keydown",FJt,!0)}}},kWe=()=>!0;function $Jt(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function zJt(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function HJt(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return kWe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter($Jt).map(zJt)),()=>e.includes(window.location.hash)}const WJt={__history:[],add:dO,remove:dO,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=bp.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=kWe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=HJt(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},IIe={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function SIe(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const qy=FH({__qLang:{}},{getLocale:SIe,set(t=IIe,e){const n={...t,rtl:t.rtl===!0,getLocale:SIe};{if(n.set=qy.set,qy.__langConfig===void 0||qy.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(qy.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=qy.__qLang,qy.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||IIe))}}),GJt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Mq=FH({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=Mq.set,Object.assign(Mq.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,MH(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||GJt))}}),RWe="_q_",jdn="_q_l_",Bdn="_q_pc_",$dn="_q_fo_";function zdn(){}const Fq={};let AWe=!1;function KJt(){AWe=!0}function BG(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(BG(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(BG(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(BG(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function fO(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Hdn(t){return Object.prototype.toString.call(t)==="[object Date]"}function Wdn(t){return typeof t=="number"&&isFinite(t)}const kIe=[nZ,BJt,Va,LJt,WJt,qy,Mq];function QJt(t,e){const n=EWe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function RIe(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function YJt(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(RWe,n.$q),RIe(n,kIe),e.components!==void 0&&Object.values(e.components).forEach(s=>{fO(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{fO(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&RIe(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&kIe.includes(s)===!1)),_C.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const XJt=function(t,e={}){const n={version:"2.18.2"};AWe===!1?(e.config!==void 0&&Object.assign(Fq,e.config),n.config={...Fq},KJt()):n.config=e.config||{},YJt(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},JJt={name:"Quasar",version:"2.18.2",install:XJt,lang:qy,iconSet:Mq};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const dI=typeof document<"u";function PWe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ZJt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&PWe(t.default)}const ps=Object.assign;function $G(t,e){const n={};for(const s in e){const r=e[s];n[s]=cf(r)?r.map(t):t(r)}return n}const FN=()=>{},cf=Array.isArray,NWe=/#/g,eZt=/&/g,tZt=/\//g,nZt=/=/g,sZt=/\?/g,xWe=/\+/g,rZt=/%5B/g,iZt=/%5D/g,DWe=/%5E/g,oZt=/%60/g,OWe=/%7B/g,aZt=/%7C/g,LWe=/%7D/g,cZt=/%20/g;function oue(t){return encodeURI(""+t).replace(aZt,"|").replace(rZt,"[").replace(iZt,"]")}function lZt(t){return oue(t).replace(OWe,"{").replace(LWe,"}").replace(DWe,"^")}function iZ(t){return oue(t).replace(xWe,"%2B").replace(cZt,"+").replace(NWe,"%23").replace(eZt,"%26").replace(oZt,"`").replace(OWe,"{").replace(LWe,"}").replace(DWe,"^")}function uZt(t){return iZ(t).replace(nZt,"%3D")}function hZt(t){return oue(t).replace(NWe,"%23").replace(sZt,"%3F")}function dZt(t){return t==null?"":hZt(t).replace(tZt,"%2F")}function pO(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const fZt=/\/$/,pZt=t=>t.replace(fZt,"");function zG(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=yZt(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:pO(o)}}function gZt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function AIe(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function mZt(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Vk(e.matched[s],n.matched[r])&&MWe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Vk(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function MWe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!_Zt(t[n],e[n]))return!1;return!0}function _Zt(t,e){return cf(t)?PIe(t,e):cf(e)?PIe(e,t):t===e}function PIe(t,e){return cf(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function yZt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const cy={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gO;(function(t){t.pop="pop",t.push="push"})(gO||(gO={}));var VN;(function(t){t.back="back",t.forward="forward",t.unknown=""})(VN||(VN={}));function vZt(t){if(!t)if(dI){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),pZt(t)}const wZt=/^[^#]+#/;function bZt(t,e){return t.replace(wZt,"#")+e}function EZt(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const VH=()=>({left:window.scrollX,top:window.scrollY});function TZt(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=EZt(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function NIe(t,e){return(history.state?history.state.position-e:-1)+t}const oZ=new Map;function CZt(t,e){oZ.set(t,e)}function IZt(t){const e=oZ.get(t);return oZ.delete(t),e}let SZt=()=>location.protocol+"//"+location.host;function FWe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),AIe(l,"")}return AIe(n,t)+s+r}function kZt(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=FWe(t,location),w=n.value,R=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=R?p.position-R.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:gO.pop,direction:P?P>0?VN.forward:VN.back:VN.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(ps({},p.state,{scroll:VH()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function xIe(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?VH():null}}function RZt(t){const{history:e,location:n}=window,s={value:FWe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:SZt()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=ps({},e.state,xIe(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=ps({},r.value,e.state,{forward:l,scroll:VH()});i(h.current,h,!0);const d=ps({},xIe(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function AZt(t){t=vZt(t);const e=RZt(t),n=kZt(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=ps({location:"",base:t,go:s,createHref:bZt.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function PZt(t){return typeof t=="string"||t&&typeof t=="object"}function VWe(t){return typeof t=="string"||typeof t=="symbol"}const UWe=Symbol("");var DIe;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(DIe||(DIe={}));function Uk(t,e){return ps(new Error,{type:t,[UWe]:!0},e)}function jg(t,e){return t instanceof Error&&UWe in t&&(e==null||!!(t.type&e))}const OIe="[^/]+?",NZt={sensitive:!1,strict:!1,start:!0,end:!0},xZt=/[.+*?^${}()[\]/\\]/g;function DZt(t,e){const n=ps({},NZt,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(xZt,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:R,optional:P,regexp:O}=p;i.push({name:w,repeatable:R,optional:P});const M=O||OIe;if(M!==OIe){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=R?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),R&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:R,optional:P}=m,O=w in u?u[w]:"";if(cf(O)&&!R)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=cf(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function OZt(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function qWe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=OZt(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(LIe(s))return 1;if(LIe(r))return-1}return r.length-s.length}function LIe(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const LZt={type:0,value:""},MZt=/[a-zA-Z0-9_]/;function FZt(t){if(!t)return[[]];if(t==="/")return[[LZt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:MZt.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function VZt(t,e,n){const s=DZt(FZt(t.path),n),r=ps(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function UZt(t,e){const n=[],s=new Map;e=UIe({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,R=FIe(d);R.aliasOf=m&&m.record;const P=UIe(e,d),O=[R];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const W of q)O.push(FIe(ps({},R,{components:m?m.record.components:R.components,path:W,aliasOf:m?m.record:R})))}let M,V;for(const q of O){const{path:W}=q;if(p&&W[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(W&&I+W)}if(M=VZt(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!VIe(M)&&o(d.name)),jWe(M)&&l(M),R.children){const J=R.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:FN}function o(d){if(VWe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=BZt(d,n);n.splice(p,0,d),d.record.name&&!VIe(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},R,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw Uk(1,{location:d});P=m.record.name,w=ps(MIe(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&MIe(d.params,m.keys.map(V=>V.name))),R=m.stringify(w)}else if(d.path!=null)R=d.path,m=n.find(V=>V.re.test(R)),m&&(w=m.parse(R),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw Uk(1,{location:d,currentLocation:p});P=m.record.name,w=ps({},p.params,d.params),R=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:R,params:w,matched:O,meta:jZt(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function MIe(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function FIe(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:qZt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function qZt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function VIe(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jZt(t){return t.reduce((e,n)=>ps(e,n.meta),{})}function UIe(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function BZt(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;qWe(t,e[i])<0?s=i:n=i+1}const r=$Zt(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function $Zt(t){let e=t;for(;e=e.parent;)if(jWe(e)&&qWe(t,e)===0)return e}function jWe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function zZt(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(xWe," "),o=i.indexOf("="),a=pO(o<0?i:i.slice(0,o)),l=o<0?null:pO(i.slice(o+1));if(a in e){let u=e[a];cf(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function qIe(t){let e="";for(let n in t){const s=t[n];if(n=uZt(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(cf(s)?s.map(i=>i&&iZ(i)):[s&&iZ(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function HZt(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=cf(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const WZt=Symbol(""),jIe=Symbol(""),UH=Symbol(""),aue=Symbol(""),aZ=Symbol("");function rA(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function jy(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Uk(4,{from:n,to:e})):p instanceof Error?l(p):PZt(p)?l(Uk(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function HG(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(PWe(l)){const h=(l.__vccOpts||l)[e];h&&i.push(jy(h,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=ZJt(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const m=(d.__vccOpts||d)[e];return m&&jy(m,n,s,o,a,r)()}))}}return i}function BIe(t){const e=Rh(UH),n=Rh(aue),s=ot(()=>{const l=CT(t.to);return e.resolve(l)}),r=ot(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(Vk.bind(null,h));if(p>-1)return p;const m=$Ie(l[u-2]);return u>1&&$Ie(h)===m&&d[d.length-1].path!==m?d.findIndex(Vk.bind(null,l[u-2])):p}),i=ot(()=>r.value>-1&&XZt(n.params,s.value.params)),o=ot(()=>r.value>-1&&r.value===n.matched.length-1&&MWe(n.params,s.value.params));function a(l={}){if(YZt(l)){const u=e[CT(t.replace)?"replace":"push"](CT(t.to)).catch(FN);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:ot(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function GZt(t){return t.length===1?t[0]:t}const KZt=PH({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:BIe,setup(t,{slots:e}){const n=rR(BIe(t)),{options:s}=Rh(UH),r=ot(()=>({[zIe(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[zIe(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&GZt(e.default(n));return t.custom?i:Vt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),QZt=KZt;function YZt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function XZt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!cf(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function $Ie(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const zIe=(t,e,n)=>t??e??n,JZt=PH({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Rh(aZ),r=ot(()=>t.route||s.value),i=Rh(jIe,0),o=ot(()=>{let u=CT(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=ot(()=>r.value.matched[o.value]);OV(jIe,ot(()=>o.value+1)),OV(WZt,a),OV(aZ,r);const l=Jw();return LN(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Vk(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(R=>R(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return HIe(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,P=Vt(p,ps({},w,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return HIe(n.default,{Component:P,route:u})||P}}});function HIe(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const ZZt=JZt;function een(t){const e=UZt(t.routes,t),n=t.parseQuery||zZt,s=t.stringifyQuery||qIe,r=t.history,i=rA(),o=rA(),a=rA(),l=IYt(cy);let u=cy;dI&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=$G.bind(null,F=>""+F),d=$G.bind(null,dZt),p=$G.bind(null,pO);function m(F,Q){let K,ee;return VWe(F)?(K=e.getRecordMatcher(F),ee=Q):ee=F,e.addRoute(ee,K)}function w(F){const Q=e.getRecordMatcher(F);Q&&e.removeRoute(Q)}function R(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Q){if(Q=ps({},Q||l.value),typeof F=="string"){const x=zG(n,F,Q.path),L=e.resolve({path:x.path},Q),U=r.createHref(x.fullPath);return ps(x,L,{params:p(L.params),hash:pO(x.hash),redirectedFrom:void 0,href:U})}let K;if(F.path!=null)K=ps({},F,{path:zG(n,F.path,Q.path).path});else{const x=ps({},F.params);for(const L in x)x[L]==null&&delete x[L];K=ps({},F,{params:d(x)}),Q.params=d(Q.params)}const ee=e.resolve(K,Q),k=F.hash||"";ee.params=h(p(ee.params));const C=gZt(s,ps({},F,{hash:lZt(k),path:ee.path})),A=r.createHref(C);return ps({fullPath:C,hash:k,query:s===qIe?HZt(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:A})}function M(F){return typeof F=="string"?zG(n,F,l.value.path):ps({},F)}function V(F,Q){if(u!==F)return Uk(8,{from:Q,to:F})}function q(F){return I(F)}function W(F){return q(ps(M(F),{replace:!0}))}function J(F){const Q=F.matched[F.matched.length-1];if(Q&&Q.redirect){const{redirect:K}=Q;let ee=typeof K=="function"?K(F):K;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),ps({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Q){const K=u=O(F),ee=l.value,k=F.state,C=F.force,A=F.replace===!0,x=J(K);if(x)return I(ps(M(x),{state:typeof x=="object"?ps({},k,x.state):k,force:C,replace:A}),Q||K);const L=K;L.redirectedFrom=Q;let U;return!C&&mZt(s,ee,K)&&(U=Uk(16,{to:L,from:ee}),Qe(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>jg(j)?jg(j,2)?j:Ke(j):de(j,L,ee)).then(j=>{if(j){if(jg(j,2))return I(ps({replace:A},M(j.to),{state:typeof j.to=="object"?ps({},k,j.to.state):k,force:C}),Q||L)}else j=E(L,ee,!0,A,k);return S(L,ee,j),j})}function v(F,Q){const K=V(F,Q);return K?Promise.reject(K):Promise.resolve()}function y(F){const Q=qt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(F):F()}function T(F,Q){let K;const[ee,k,C]=ten(F,Q);K=HG(ee.reverse(),"beforeRouteLeave",F,Q);for(const x of ee)x.leaveGuards.forEach(L=>{K.push(jy(L,F,Q))});const A=v.bind(null,F,Q);return K.push(A),Fe(K).then(()=>{K=[];for(const x of i.list())K.push(jy(x,F,Q));return K.push(A),Fe(K)}).then(()=>{K=HG(k,"beforeRouteUpdate",F,Q);for(const x of k)x.updateGuards.forEach(L=>{K.push(jy(L,F,Q))});return K.push(A),Fe(K)}).then(()=>{K=[];for(const x of C)if(x.beforeEnter)if(cf(x.beforeEnter))for(const L of x.beforeEnter)K.push(jy(L,F,Q));else K.push(jy(x.beforeEnter,F,Q));return K.push(A),Fe(K)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),K=HG(C,"beforeRouteEnter",F,Q,y),K.push(A),Fe(K))).then(()=>{K=[];for(const x of o.list())K.push(jy(x,F,Q));return K.push(A),Fe(K)}).catch(x=>jg(x,8)?x:Promise.reject(x))}function S(F,Q,K){a.list().forEach(ee=>y(()=>ee(F,Q,K)))}function E(F,Q,K,ee,k){const C=V(F,Q);if(C)return C;const A=Q===cy,x=dI?history.state:{};K&&(ee||A?r.replace(F.fullPath,ps({scroll:A&&x&&x.scroll},k)):r.push(F.fullPath,k)),l.value=F,Qe(F,Q,K,A),Ke()}let b;function G(){b||(b=r.listen((F,Q,K)=>{if(!it.listening)return;const ee=O(F),k=J(ee);if(k){I(ps(k,{replace:!0,force:!0}),ee).catch(FN);return}u=ee;const C=l.value;dI&&CZt(NIe(C.fullPath,K.delta),VH()),T(ee,C).catch(A=>jg(A,12)?A:jg(A,2)?(I(ps(M(A.to),{force:!0}),ee).then(x=>{jg(x,20)&&!K.delta&&K.type===gO.pop&&r.go(-1,!1)}).catch(FN),Promise.reject()):(K.delta&&r.go(-K.delta,!1),de(A,ee,C))).then(A=>{A=A||E(ee,C,!1),A&&(K.delta&&!jg(A,8)?r.go(-K.delta,!1):K.type===gO.pop&&jg(A,20)&&r.go(-1,!1)),S(ee,C,A)}).catch(FN)}))}let ne=rA(),ae=rA(),oe;function de(F,Q,K){Ke(F);const ee=ae.list();return ee.length?ee.forEach(k=>k(F,Q,K)):console.error(F),Promise.reject(F)}function ct(){return oe&&l.value!==cy?Promise.resolve():new Promise((F,Q)=>{ne.add([F,Q])})}function Ke(F){return oe||(oe=!F,G(),ne.list().forEach(([Q,K])=>F?K(F):Q()),ne.reset()),F}function Qe(F,Q,K,ee){const{scrollBehavior:k}=t;if(!dI||!k)return Promise.resolve();const C=!K&&IZt(NIe(F.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return R7e().then(()=>k(F,Q,C)).then(A=>A&&TZt(A)).catch(A=>de(A,F,Q))}const ge=F=>r.go(F);let he;const qt=new Set,it={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:R,resolve:O,options:t,push:q,replace:W,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:ct,install(F){const Q=this;F.component("RouterLink",QZt),F.component("RouterView",ZZt),F.config.globalProperties.$router=Q,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>CT(l)}),dI&&!he&&l.value===cy&&(he=!0,q(r.location).catch(k=>{}));const K={};for(const k in cy)Object.defineProperty(K,k,{get:()=>l.value[k],enumerable:!0});F.provide(UH,Q),F.provide(aue,T7e(K)),F.provide(aZ,l);const ee=F.unmount;qt.add(F),F.unmount=function(){qt.delete(F),qt.size<1&&(u=cy,b&&b(),b=null,l.value=cy,he=!1,oe=!1),ee()}}};function Fe(F){return F.reduce((Q,K)=>Q.then(()=>y(K)),Promise.resolve())}return it}function ten(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Vk(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Vk(u,l))||r.push(l))}return[n,s,r]}function nen(){return Rh(UH)}function sen(t){return Rh(aue)}const ren=()=>{};var WIe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BWe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=function(t,e){if(!t)throw iR(e)},iR=function(t){return new Error("Firebase Database ("+BWe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $We=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ien=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},cue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($We(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ien(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||d==null)throw new oen;const p=i<<2|a>>4;if(s.push(p),u!==64){const m=a<<4&240|u>>2;if(s.push(m),d!==64){const w=u<<6&192|d;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oen extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zWe=function(t){const e=$We(t);return cue.encodeByteArray(e,!0)},Vq=function(t){return zWe(t).replace(/\./g,"")},Uq=function(t){try{return cue.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aen(t){return HWe(void 0,t)}function HWe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!cen(n)||(t[n]=HWe(t[n],e[n]));return t}function cen(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function len(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uen=()=>len().__FIREBASE_DEFAULTS__,hen=()=>{if(typeof process>"u"||typeof WIe>"u")return;const t=WIe.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},den=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uq(t[1]);return e&&JSON.parse(e)},qH=()=>{try{return ren()||uen()||hen()||den()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WWe=t=>qH()?.emulatorHosts?.[t],lue=t=>{const e=WWe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},GWe=()=>qH()?.config,KWe=t=>qH()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BH(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uue(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Vq(JSON.stringify(n)),Vq(JSON.stringify(o)),""].join(".")}const UN={};function fen(){const t={prod:[],emulator:[]};for(const e of Object.keys(UN))UN[e]?t.emulator.push(e):t.prod.push(e);return t}function pen(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let GIe=!1;function $H(t,e){if(typeof window>"u"||typeof document>"u"||!ag(window.location.host)||UN[t]===e||UN[t]||GIe)return;UN[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=fen().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{GIe=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=pen(s),m=n("text"),w=document.getElementById(m)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),O=n("preprendIcon"),M=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const V=p.element;a(V),h(P,R);const q=u();l(M,O),V.append(M,w,P,q),document.body.appendChild(V)}i?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ec())}function gen(){const t=qH()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function men(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _en(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QWe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yen(){const t=Ec();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ven(){return BWe.NODE_ADMIN===!0}function wen(){return!gen()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ben(){try{return typeof indexedDB=="object"}catch{return!1}}function Een(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ten="FirebaseError";class cg extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ten,Object.setPrototypeOf(this,cg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C2.prototype.create)}}class C2{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Cen(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new cg(r,a,s)}}function Cen(t,e){return t.replace(Ien,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Ien=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){return JSON.parse(t)}function xo(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YWe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=mO(Uq(i[0])||""),n=mO(Uq(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Sen=function(t){const e=YWe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ken=function(t){const e=YWe(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qk(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function cZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qq(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function eb(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(KIe(i)&&KIe(o)){if(!eb(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function KIe(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ren{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function Aen(t,e){const n=new Pen(t,e);return n.subscribe.bind(n)}class Pen{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Nen(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=WG),r.error===void 0&&(r.error=WG),r.complete===void 0&&(r.complete=WG);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nen(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function WG(){}function due(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xen=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,De(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},zH=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){return t&&t._delegate?t._delegate:t}class C_{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Den{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new jH;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Len(e))try{this.getOrInitializeService({instanceIdentifier:yE})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=yE){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yE){return this.instances.has(e)}getOptions(e=yE){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Oen(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yE){return this.component?this.component.multipleInstances?e:yE:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Oen(t){return t===yE?void 0:t}function Len(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Men{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Den(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tn||(Tn={}));const Fen={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},Ven=Tn.INFO,Uen={[Tn.DEBUG]:"log",[Tn.VERBOSE]:"log",[Tn.INFO]:"info",[Tn.WARN]:"warn",[Tn.ERROR]:"error"},qen=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Uen[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HH{constructor(e){this.name=e,this._logLevel=Ven,this._logHandler=qen,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fen[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tn.DEBUG,...e),this._logHandler(this,Tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tn.VERBOSE,...e),this._logHandler(this,Tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tn.INFO,...e),this._logHandler(this,Tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tn.WARN,...e),this._logHandler(this,Tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tn.ERROR,...e),this._logHandler(this,Tn.ERROR,...e)}}const jen=(t,e)=>e.some(n=>t instanceof n);let QIe,YIe;function Ben(){return QIe||(QIe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $en(){return YIe||(YIe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XWe=new WeakMap,lZ=new WeakMap,JWe=new WeakMap,GG=new WeakMap,fue=new WeakMap;function zen(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qv(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XWe.set(n,t)}).catch(()=>{}),fue.set(e,t),e}function Hen(t){if(lZ.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});lZ.set(t,e)}let uZ={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lZ.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JWe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qv(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wen(t){uZ=t(uZ)}function Gen(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(KG(this),e,...n);return JWe.set(s,e.sort?e.sort():[e]),qv(s)}:$en().includes(t)?function(...e){return t.apply(KG(this),e),qv(XWe.get(this))}:function(...e){return qv(t.apply(KG(this),e))}}function Ken(t){return typeof t=="function"?Gen(t):(t instanceof IDBTransaction&&Hen(t),jen(t,Ben())?new Proxy(t,uZ):t)}function qv(t){if(t instanceof IDBRequest)return zen(t);if(GG.has(t))return GG.get(t);const e=Ken(t);return e!==t&&(GG.set(t,e),fue.set(e,t)),e}const KG=t=>fue.get(t);function Qen(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=qv(o);return s&&o.addEventListener("upgradeneeded",l=>{s(qv(o.result),l.oldVersion,l.newVersion,qv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Yen=["get","getKey","getAll","getAllKeys","count"],Xen=["put","add","delete","clear"],QG=new Map;function XIe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(QG.get(e))return QG.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Xen.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Yen.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return QG.set(e,i),i}Wen(t=>({...t,get:(e,n,s)=>XIe(e,n)||t.get(e,n,s),has:(e,n)=>!!XIe(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jen{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zen(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Zen(t){return t.getComponent()?.type==="VERSION"}const hZ="@firebase/app",JIe="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new HH("@firebase/app"),etn="@firebase/app-compat",ttn="@firebase/analytics-compat",ntn="@firebase/analytics",stn="@firebase/app-check-compat",rtn="@firebase/app-check",itn="@firebase/auth",otn="@firebase/auth-compat",atn="@firebase/database",ctn="@firebase/data-connect",ltn="@firebase/database-compat",utn="@firebase/functions",htn="@firebase/functions-compat",dtn="@firebase/installations",ftn="@firebase/installations-compat",ptn="@firebase/messaging",gtn="@firebase/messaging-compat",mtn="@firebase/performance",_tn="@firebase/performance-compat",ytn="@firebase/remote-config",vtn="@firebase/remote-config-compat",wtn="@firebase/storage",btn="@firebase/storage-compat",Etn="@firebase/firestore",Ttn="@firebase/ai",Ctn="@firebase/firestore-compat",Itn="firebase",Stn="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ="[DEFAULT]",ktn={[hZ]:"fire-core",[etn]:"fire-core-compat",[ntn]:"fire-analytics",[ttn]:"fire-analytics-compat",[rtn]:"fire-app-check",[stn]:"fire-app-check-compat",[itn]:"fire-auth",[otn]:"fire-auth-compat",[atn]:"fire-rtdb",[ctn]:"fire-data-connect",[ltn]:"fire-rtdb-compat",[utn]:"fire-fn",[htn]:"fire-fn-compat",[dtn]:"fire-iid",[ftn]:"fire-iid-compat",[ptn]:"fire-fcm",[gtn]:"fire-fcm-compat",[mtn]:"fire-perf",[_tn]:"fire-perf-compat",[ytn]:"fire-rc",[vtn]:"fire-rc-compat",[wtn]:"fire-gcs",[btn]:"fire-gcs-compat",[Etn]:"fire-fst",[Ctn]:"fire-fst-compat",[Ttn]:"fire-vertex","fire-js":"fire-js",[Itn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=new Map,Rtn=new Map,fZ=new Map;function ZIe(t,e){try{t.container.addComponent(e)}catch(n){I_.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tb(t){const e=t.name;if(fZ.has(e))return I_.debug(`There were multiple attempts to register component ${e}.`),!1;fZ.set(e,t);for(const n of jq.values())ZIe(n,t);for(const n of Rtn.values())ZIe(n,t);return!0}function I2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ou(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Atn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jv=new C2("app","Firebase",Atn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ptn{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new C_("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jv.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=Stn;function ZWe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:dZ,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw jv.create("bad-app-name",{appName:String(r)});if(n||(n=GWe()),!n)throw jv.create("no-options");const i=jq.get(r);if(i){if(eb(n,i.options)&&eb(s,i.config))return i;throw jv.create("duplicate-app",{appName:r})}const o=new Men(r);for(const l of fZ.values())o.addComponent(l);const a=new Ptn(n,s,o);return jq.set(r,a),a}function WH(t=dZ){const e=jq.get(t);if(!e&&t===dZ&&GWe())return ZWe();if(!e)throw jv.create("no-app",{appName:t});return e}function Ah(t,e,n){let s=ktn[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),I_.warn(o.join(" "));return}tb(new C_(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ntn="firebase-heartbeat-database",xtn=1,_O="firebase-heartbeat-store";let YG=null;function e8e(){return YG||(YG=Qen(Ntn,xtn,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_O)}catch(n){console.warn(n)}}}}).catch(t=>{throw jv.create("idb-open",{originalErrorMessage:t.message})})),YG}async function Dtn(t){try{const n=(await e8e()).transaction(_O),s=await n.objectStore(_O).get(t8e(t));return await n.done,s}catch(e){if(e instanceof cg)I_.warn(e.message);else{const n=jv.create("idb-get",{originalErrorMessage:e?.message});I_.warn(n.message)}}}async function eSe(t,e){try{const s=(await e8e()).transaction(_O,"readwrite");await s.objectStore(_O).put(e,t8e(t)),await s.done}catch(n){if(n instanceof cg)I_.warn(n.message);else{const s=jv.create("idb-set",{originalErrorMessage:n?.message});I_.warn(s.message)}}}function t8e(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Otn=1024,Ltn=30;class Mtn{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vtn(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tSe();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Ltn){const r=Utn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){I_.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tSe(),{heartbeatsToSend:n,unsentEntries:s}=Ftn(this._heartbeatsCache.heartbeats),r=Vq(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return I_.warn(e),""}}}function tSe(){return new Date().toISOString().substring(0,10)}function Ftn(t,e=Otn){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),nSe(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),nSe(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Vtn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ben()?Een().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Dtn(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return eSe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return eSe(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nSe(t){return Vq(JSON.stringify({version:2,heartbeats:t})).length}function Utn(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qtn(t){tb(new C_("platform-logger",e=>new Jen(e),"PRIVATE")),tb(new C_("heartbeat",e=>new Mtn(e),"PRIVATE")),Ah(hZ,JIe,t),Ah(hZ,JIe,"esm2020"),Ah("fire-js","")}qtn("");function n8e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jtn=n8e,s8e=new C2("auth","Firebase",n8e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=new HH("@firebase/auth");function Btn(t,...e){Bq.logLevel<=Tn.WARN&&Bq.warn(`Auth (${Ob}): ${t}`,...e)}function FV(t,...e){Bq.logLevel<=Tn.ERROR&&Bq.error(`Auth (${Ob}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,...e){throw gue(t,...e)}function zd(t,...e){return gue(t,...e)}function pue(t,e,n){const s={...jtn(),[e]:n};return new C2("auth","Firebase",s).create(e,{appName:t.name})}function ST(t){return pue(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $tn(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Gp(t,"argument-error"),pue(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gue(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return s8e.create(t,...e)}function Ft(t,e,...n){if(!t)throw gue(e,...n)}function km(t){const e="INTERNAL ASSERTION FAILED: "+t;throw FV(e),new Error(e)}function S_(t,e){t||km(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(){return typeof self<"u"&&self.location?.href||""}function ztn(){return sSe()==="http:"||sSe()==="https:"}function sSe(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Htn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ztn()||_en()||"connection"in navigator)?navigator.onLine:!0}function Wtn(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n){this.shortDelay=e,this.longDelay=n,S_(n>e,"Short delay should be less than long delay!"),this.isMobile=hue()||QWe()}get(){return Htn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mue(t,e){S_(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8e{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;km("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;km("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;km("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gtn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ktn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qtn=new S2(3e4,6e4);function _ue(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function aR(t,e,n,s,r={}){return i8e(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=oR({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return men()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ag(t.emulatorConfig.host)&&(u.credentials="include"),r8e.fetch()(await o8e(t,t.config.apiHost,n,a),u)})}async function i8e(t,e,n){t._canInitEmulator=!1;const s={...Gtn,...e};try{const r=new Xtn(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw n4(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw n4(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw n4(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw n4(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw pue(t,h,u);Gp(t,h)}}catch(r){if(r instanceof cg)throw r;Gp(t,"network-request-failed",{message:String(r)})}}async function Ytn(t,e,n,s,r={}){const i=await aR(t,e,n,s,r);return"mfaPendingCredential"in i&&Gp(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function o8e(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?mue(t.config,r):`${t.config.apiScheme}://${r}`;return Ktn.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Xtn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zd(this.auth,"network-request-failed")),Qtn.get())})}}function n4(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=zd(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jtn(t,e){return aR(t,"POST","/v1/accounts:delete",e)}async function $q(t,e){return aR(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ztn(t,e=!1){const n=Bs(t),s=await n.getIdToken(e),r=yue(s);Ft(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:qN(XG(r.auth_time)),issuedAtTime:qN(XG(r.iat)),expirationTime:qN(XG(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function XG(t){return Number(t)*1e3}function yue(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return FV("JWT malformed, contained fewer than 3 sections"),null;try{const r=Uq(n);return r?JSON.parse(r):(FV("Failed to decode base64 JWT payload"),null)}catch(r){return FV("Caught error parsing JWT payload as JSON",r?.toString()),null}}function rSe(t){const e=yue(t);return Ft(e,"internal-error"),Ft(typeof e.exp<"u","internal-error"),Ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof cg&&enn(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function enn({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tnn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qN(this.lastLoginAt),this.creationTime=qN(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t){const e=t.auth,n=await t.getIdToken(),s=await yO(t,$q(e,{idToken:n}));Ft(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?a8e(r.providerUserInfo):[],o=snn(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new gZ(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function nnn(t){const e=Bs(t);await zq(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function snn(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function a8e(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rnn(t,e){const n=await i8e(t,{},async()=>{const s=oR({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await o8e(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&ag(t.emulatorConfig.host)&&(l.credentials="include"),r8e.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function inn(t,e){return aR(t,"POST","/v2/accounts:revokeToken",_ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ft(e.idToken,"internal-error"),Ft(typeof e.idToken<"u","internal-error"),Ft(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rSe(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ft(e.length!==0,"internal-error");const n=rSe(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await rnn(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new _S;return s&&(Ft(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ft(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ft(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _S,this.toJSON())}_performRefresh(){return km("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){Ft(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class md{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new tnn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new gZ(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await yO(this,this.stsTokenManager.getToken(this.auth,e));return Ft(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ztn(this,e)}reload(){return nnn(this)}_assign(e){this!==e&&(Ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new md({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await zq(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ou(this.auth.app))return Promise.reject(ST(this.auth));const e=await this.getIdToken();return await yO(this,Jtn(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:R}=n;Ft(d&&R,e,"internal-error");const P=_S.fromJSON(this.name,R);Ft(typeof d=="string",e,"internal-error"),ly(s,e.name),ly(r,e.name),Ft(typeof p=="boolean",e,"internal-error"),Ft(typeof m=="boolean",e,"internal-error"),ly(i,e.name),ly(o,e.name),ly(a,e.name),ly(l,e.name),ly(u,e.name),ly(h,e.name);const O=new md({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),l&&(O._redirectEventId=l),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new _S;r.updateFromServerResponse(n);const i=new md({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await zq(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ft(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?a8e(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new _S;a.updateFromIdToken(s);const l=new md({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gZ(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iSe=new Map;function Rm(t){S_(t instanceof Function,"Expected a class definition");let e=iSe.get(t);return e?(S_(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iSe.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}c8e.type="NONE";const oSe=c8e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t,e,n){return`firebase:${t}:${e}:${n}`}class yS{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=VV(this.userKey,r.apiKey,i),this.fullPersistenceKey=VV("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $q(this.auth,{idToken:e}).catch(()=>{});return n?md._fromGetAccountInfoResponse(this.auth,n,e):null}return md._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new yS(Rm(oSe),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Rm(oSe);const o=VV(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await $q(e,{idToken:h}).catch(()=>{});if(!p)break;d=await md._fromGetAccountInfoResponse(e,p,h)}else d=md._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new yS(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new yS(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aSe(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d8e(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l8e(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p8e(e))return"Blackberry";if(g8e(e))return"Webos";if(u8e(e))return"Safari";if((e.includes("chrome/")||h8e(e))&&!e.includes("edge/"))return"Chrome";if(f8e(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function l8e(t=Ec()){return/firefox\//i.test(t)}function u8e(t=Ec()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h8e(t=Ec()){return/crios\//i.test(t)}function d8e(t=Ec()){return/iemobile/i.test(t)}function f8e(t=Ec()){return/android/i.test(t)}function p8e(t=Ec()){return/blackberry/i.test(t)}function g8e(t=Ec()){return/webos/i.test(t)}function vue(t=Ec()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function onn(t=Ec()){return vue(t)&&!!window.navigator?.standalone}function ann(){return yen()&&document.documentMode===10}function m8e(t=Ec()){return vue(t)||f8e(t)||g8e(t)||p8e(t)||/windows phone/i.test(t)||d8e(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8e(t,e=[]){let n;switch(t){case"Browser":n=aSe(Ec());break;case"Worker":n=`${aSe(Ec())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ob}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cnn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lnn(t,e={}){return aR(t,"GET","/v2/passwordPolicy",_ue(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const unn=6;class hnn{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??unn,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dnn{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cSe(this),this.idTokenSubscription=new cSe(this),this.beforeStateQueue=new cnn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=s8e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rm(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yS.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $q(this,{idToken:e}),s=await md._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ou(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zq(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wtn()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ou(this.app))return Promise.reject(ST(this));const n=e?Bs(e):null;return n&&Ft(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ou(this.app)?Promise.reject(ST(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ou(this.app)?Promise.reject(ST(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rm(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lnn(this),n=new hnn(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new C2("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await inn(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rm(e)||this._popupRedirectResolver;Ft(n,this,"argument-error"),this.redirectPersistenceManager=await yS.create(this,[Rm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ft(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_8e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ou(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Btn(`Error while retrieving App Check token: ${e.error}`),e?.token}}function GH(t){return Bs(t)}class cSe{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aen(n=>this.observer=n)}get next(){return Ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wue={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fnn(t){wue=t}function pnn(t){return wue.loadJS(t)}function gnn(){return wue.gapiScript}function mnn(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _nn(t,e){const n=I2(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(eb(i,e??{}))return r;Gp(r,"already-initialized")}return n.initialize({options:e})}function ynn(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Rm);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function vnn(t,e,n){const s=GH(t);Ft(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=y8e(e),{host:o,port:a}=wnn(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ft(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ft(eb(u,s.config.emulator)&&eb(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ag(o)?(BH(`${i}//${o}${l}`),$H("Auth",!0)):bnn()}function y8e(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wnn(t){const e=y8e(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:lSe(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:lSe(o)}}}function lSe(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bnn(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8e{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return km("not implemented")}_getIdTokenResponse(e){return km("not implemented")}_linkToIdToken(e,n){return km("not implemented")}_getReauthenticationResolver(e){return km("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t,e){return Ytn(t,"POST","/v1/accounts:signInWithIdp",_ue(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Enn="http://localhost";class vC extends v8e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vC(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gp("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new vC(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vS(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,vS(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vS(e,n)}buildRequest(){const e={requestUri:Enn,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oR(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends bue{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends k2{constructor(){super("facebook.com")}static credential(e){return vC._fromParams({providerId:Gy.PROVIDER_ID,signInMethod:Gy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gy.credentialFromTaggedObject(e)}static credentialFromError(e){return Gy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gy.credential(e.oauthAccessToken)}catch{return null}}}Gy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends k2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vC._fromParams({providerId:fm.PROVIDER_ID,signInMethod:fm.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fm.credentialFromTaggedObject(e)}static credentialFromError(e){return fm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fm.credential(n,s)}catch{return null}}}fm.GOOGLE_SIGN_IN_METHOD="google.com";fm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky extends k2{constructor(){super("github.com")}static credential(e){return vC._fromParams({providerId:Ky.PROVIDER_ID,signInMethod:Ky.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ky.credentialFromTaggedObject(e)}static credentialFromError(e){return Ky.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ky.credential(e.oauthAccessToken)}catch{return null}}}Ky.GITHUB_SIGN_IN_METHOD="github.com";Ky.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends k2{constructor(){super("twitter.com")}static credential(e,n){return vC._fromParams({providerId:Qy.PROVIDER_ID,signInMethod:Qy.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qy.credentialFromTaggedObject(e)}static credentialFromError(e){return Qy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Qy.credential(n,s)}catch{return null}}}Qy.TWITTER_SIGN_IN_METHOD="twitter.com";Qy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await md._fromIdTokenResponse(e,s,r),o=uSe(s);return new jk({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=uSe(s);return new jk({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function uSe(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq extends cg{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Hq.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Hq(e,n,s,r)}}function w8e(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hq._fromErrorAndOperation(t,i,e,s):i})}async function Tnn(t,e,n=!1){const s=await yO(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jk._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cnn(t,e,n=!1){const{auth:s}=t;if(Ou(s.app))return Promise.reject(ST(s));const r="reauthenticate";try{const i=await yO(t,w8e(s,r,e,t),n);Ft(i.idToken,s,"internal-error");const o=yue(i.idToken);Ft(o,s,"internal-error");const{sub:a}=o;return Ft(t.uid===a,s,"user-mismatch"),jk._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Gp(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Inn(t,e,n=!1){if(Ou(t.app))return Promise.reject(ST(t));const s="signIn",r=await w8e(t,s,e),i=await jk._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function Snn(t,e,n,s){return Bs(t).onIdTokenChanged(e,n,s)}function knn(t,e,n){return Bs(t).beforeAuthStateChanged(e,n)}function Rnn(t,e,n,s){return Bs(t).onAuthStateChanged(e,n,s)}function iA(t){return Bs(t).signOut()}const Wq="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8e{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wq,"1"),this.storage.removeItem(Wq),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ann=1e3,Pnn=10;class E8e extends b8e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m8e(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);ann()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Pnn):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Ann)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E8e.type="LOCAL";const Nnn=E8e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8e extends b8e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}T8e.type="SESSION";const C8e=T8e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xnn(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new KH(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await xnn(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}KH.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eue(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dnn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Eue("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){return window}function Onn(t){Ep().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8e(){return typeof Ep().WorkerGlobalScope<"u"&&typeof Ep().importScripts=="function"}async function Lnn(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mnn(){return navigator?.serviceWorker?.controller||null}function Fnn(){return I8e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8e="firebaseLocalStorageDb",Vnn=1,Gq="firebaseLocalStorage",k8e="fbase_key";class R2{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function QH(t,e){return t.transaction([Gq],e?"readwrite":"readonly").objectStore(Gq)}function Unn(){const t=indexedDB.deleteDatabase(S8e);return new R2(t).toPromise()}function mZ(){const t=indexedDB.open(S8e,Vnn);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Gq,{keyPath:k8e})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Gq)?e(s):(s.close(),await Unn(),e(await mZ()))})})}async function hSe(t,e,n){const s=QH(t,!0).put({[k8e]:e,value:n});return new R2(s).toPromise()}async function qnn(t,e){const n=QH(t,!1).get(e),s=await new R2(n).toPromise();return s===void 0?null:s.value}function dSe(t,e){const n=QH(t,!0).delete(e);return new R2(n).toPromise()}const jnn=800,Bnn=3;class R8e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mZ(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Bnn)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I8e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KH._getInstance(Fnn()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Lnn(),!this.activeServiceWorker)return;this.sender=new Dnn(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mnn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mZ();return await hSe(e,Wq,"1"),await dSe(e,Wq),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>hSe(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>qnn(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dSe(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=QH(r,!1).getAll();return new R2(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jnn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R8e.type="LOCAL";const $nn=R8e;new S2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8e(t,e){return e?Rm(e):(Ft(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue extends v8e{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vS(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vS(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vS(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function znn(t){return Inn(t.auth,new Tue(t),t.bypassAuthState)}function Hnn(t){const{auth:e,user:n}=t;return Ft(n,e,"internal-error"),Cnn(n,new Tue(t),t.bypassAuthState)}async function Wnn(t){const{auth:e,user:n}=t;return Ft(n,e,"internal-error"),Tnn(n,new Tue(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8e{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return znn;case"linkViaPopup":case"linkViaRedirect":return Wnn;case"reauthViaPopup":case"reauthViaRedirect":return Hnn;default:Gp(this.auth,"internal-error")}}resolve(e){S_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){S_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gnn=new S2(2e3,1e4);async function Knn(t,e,n){if(Ou(t.app))return Promise.reject(zd(t,"operation-not-supported-in-this-environment"));const s=GH(t);$tn(t,e,bue);const r=A8e(s,n);return new GE(s,"signInViaPopup",e,r).executeNotNull()}class GE extends P8e{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,GE.currentPopupAction&&GE.currentPopupAction.cancel(),GE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ft(e,this.auth,"internal-error"),e}async onExecution(){S_(this.filter.length===1,"Popup operations only handle one event");const e=Eue();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(zd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,GE.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gnn.get())};e()}}GE.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qnn="pendingRedirect",UV=new Map;class Ynn extends P8e{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=UV.get(this.auth._key());if(!e){try{const s=await Xnn(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}UV.set(this.auth._key(),e)}return this.bypassAuthState||UV.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xnn(t,e){const n=esn(e),s=Znn(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Jnn(t,e){UV.set(t._key(),e)}function Znn(t){return Rm(t._redirectPersistence)}function esn(t){return VV(Qnn,t.config.apiKey,t.name)}async function tsn(t,e,n=!1){if(Ou(t.app))return Promise.reject(ST(t));const s=GH(t),r=A8e(s,e),o=await new Ynn(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nsn=600*1e3;class ssn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rsn(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!N8e(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(zd(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nsn&&this.cachedEventUids.clear(),this.cachedEventUids.has(fSe(e))}saveEventToCache(e){this.cachedEventUids.add(fSe(e)),this.lastProcessedEventTime=Date.now()}}function fSe(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function N8e({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function rsn(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N8e(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function isn(t,e={}){return aR(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const osn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,asn=/^https?/;async function csn(t){if(t.config.emulator)return;const{authorizedDomains:e}=await isn(t);for(const n of e)try{if(lsn(n))return}catch{}Gp(t,"unauthorized-domain")}function lsn(t){const e=pZ(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!asn.test(n))return!1;if(osn.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const usn=new S2(3e4,6e4);function pSe(){const t=Ep().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hsn(t){return new Promise((e,n)=>{function s(){pSe(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pSe(),n(zd(t,"network-request-failed"))},timeout:usn.get()})}if(Ep().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ep().gapi?.load)s();else{const r=mnn("iframefcb");return Ep()[r]=()=>{gapi.load?s():n(zd(t,"network-request-failed"))},pnn(`${gnn()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw qV=null,e})}let qV=null;function dsn(t){return qV=qV||hsn(t),qV}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fsn=new S2(5e3,15e3),psn="__/auth/iframe",gsn="emulator/auth/iframe",msn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_sn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ysn(t){const e=t.config;Ft(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mue(e,gsn):`https://${t.config.authDomain}/${psn}`,s={apiKey:e.apiKey,appName:t.name,v:Ob},r=_sn.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${oR(s).slice(1)}`}async function vsn(t){const e=await dsn(t),n=Ep().gapi;return Ft(n,t,"internal-error"),e.open({where:document.body,url:ysn(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:msn,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=zd(t,"network-request-failed"),a=Ep().setTimeout(()=>{i(o)},fsn.get());function l(){Ep().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wsn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bsn=500,Esn=600,Tsn="_blank",Csn="http://localhost";class gSe{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Isn(t,e,n,s=bsn,r=Esn){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...wsn,width:s.toString(),height:r.toString(),top:i,left:o},u=Ec().toLowerCase();n&&(a=h8e(u)?Tsn:n),l8e(u)&&(e=e||Csn,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(onn(u)&&a!=="_self")return Ssn(e||"",a),new gSe(null);const d=window.open(e||"",a,h);Ft(d,t,"popup-blocked");try{d.focus()}catch{}return new gSe(d)}function Ssn(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ksn="__/auth/handler",Rsn="emulator/auth/handler",Asn=encodeURIComponent("fac");async function mSe(t,e,n,s,r,i){Ft(t.config.authDomain,t,"auth-domain-config-required"),Ft(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ob,eventId:r};if(e instanceof bue){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof k2){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${Asn}=${encodeURIComponent(l)}`:"";return`${Psn(t)}?${oR(a).slice(1)}${u}`}function Psn({config:t}){return t.emulator?mue(t,Rsn):`https://${t.authDomain}/${ksn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="webStorageSupport";class Nsn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C8e,this._completeRedirectFn=tsn,this._overrideRedirectResult=Jnn}async _openPopup(e,n,s,r){S_(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await mSe(e,n,s,pZ(),r);return Isn(e,i,Eue())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await mSe(e,n,s,pZ(),r);return Onn(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(S_(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await vsn(e),s=new ssn(e);return n.register("authEvent",r=>(Ft(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(JG,{type:JG},r=>{const i=r?.[0]?.[JG];i!==void 0&&n(!!i),Gp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=csn(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m8e()||u8e()||vue()}}const xsn=Nsn;var _Se="@firebase/auth",ySe="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dsn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Osn(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lsn(t){tb(new C_("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ft(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_8e(t)},u=new dnn(s,r,i,l);return ynn(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),tb(new C_("auth-internal",e=>{const n=GH(e.getProvider("auth").getImmediate());return(s=>new Dsn(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ah(_Se,ySe,Osn(t)),Ah(_Se,ySe,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Msn=300,Fsn=KWe("authIdTokenMaxAge")||Msn;let vSe=null;const Vsn=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Fsn)return;const r=n?.token;vSe!==r&&(vSe=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Usn(t=WH()){const e=I2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_nn(t,{popupRedirectResolver:xsn,persistence:[$nn,Nnn,C8e]}),s=KWe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Vsn(i.toString());knn(n,o,()=>o(n.currentUser)),Snn(n,a=>o(a))}}const r=WWe("auth");return r&&vnn(n,`http://${r}`),n}function qsn(){return document.getElementsByTagName("head")?.[0]??document}fnn({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=zd("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",qsn().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lsn("Browser");var wSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bv,x8e;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),G=2;G<arguments.length;G++)b[G-2]=arguments[G];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),T=T.j(E).add(u(b))):(T=T.j(y),T=T.add(u(b)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(R(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=O(this,I),R(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(R(this))return R(I)?P(this).j(P(I)):P(P(this).j(I));if(R(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,G=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*G,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*G,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(R(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(R(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(R(I)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=W(y),T=W(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=u(y),b=E.j(v);R(b)||0<b.l(I);)y-=T,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function W(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,x8e=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Bv=o}).apply(typeof wSe<"u"?wSe:typeof self<"u"?self:typeof window<"u"?window:{});var s4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D8e,UA,O8e,jV,_Z,L8e,M8e,F8e;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof s4=="object"&&s4];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var D=g++;return{value:f(D,c[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,D){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return f.prototype[N].apply(_,z)}}function R(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,D=_.length||0;c.length=N+D;for(let z=0;z<D;z++)c[N+z]=_[z]}else c.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=ct;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class G{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ct=new G,Ke=()=>{const c=a.Promise.resolve(void 0);oe=()=>{c.then(Qe)}};var Qe=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}de=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function it(c,f){if(he.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(W){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Fe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&it.aa.h.call(this)}}w(it,he);var Fe={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Q=0;function K(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Q,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function k(c){this.src=c,this.g={},this.h=0}k.prototype.add=function(c,f,g,_,N){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var z=A(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new K(f,this.src,D,!!_,N),f.fa=g,c.push(f)),f};function C(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=N)&&Array.prototype.splice.call(_,N,1),D&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function A(c,f,g,_){for(var N=0;N<c.length;++N){var D=c[N];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(c,f[D],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,D){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,le=Z(c);if(le||(c[x]=le=new k(c)),g=le.add(f,g,_,z,D),g.proxy)return g;if(_=H(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)qt||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Y(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function H(){function c(g){return f.call(c.src,c.listener,g)}const f=X;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(c,f[D],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(D=c.g[f],g=A(D,g,_,N),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=A(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])C(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Y(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Y(c){return c in L?L[c]:L[c]="on"+c}function X(c,f){if(c.da)c=!0;else{f=new it(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof k?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ge.call(this),this.i=new k(this),this.M=this,this.F=null}w(re,ge),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new he(f,c);else if(f instanceof he)f.target=f.target||c;else{var N=f;f=new he(_,c),T(f,N)}if(N=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];N=fe(z,_,!0,f)&&N}if(z=f.g=c,N=fe(z,_,!0,f)&&N,N=fe(z,_,!1,f)&&N,g)for(D=0;D<g.length;D++)z=f.g=g[D],N=fe(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function fe(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var le=z.listener,ke=z.ha||z.src;z.fa&&C(c.i,z),N=le.call(ke,_)!==!1&&N}}return N&&!_.defaultPrevented}function Se(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ve(c){c.g=Se(()=>{c.g=null,c.i&&(c.i=!1,Ve(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class We extends ge{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(c){ge.call(this),this.h=c,this.g={}}w(Ge,ge);var ss=[];function Ue(c){J(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),Ue(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,rs=a.JSON.parse,Pr=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xr(){}Xr.prototype.h=null;function ll(c){return c.h||(c.h=c.i())}function ul(){}var Is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){he.call(this,"d")}w(Xi,he);function Ji(){he.call(this,"c")}w(Ji,he);var cn={},hl=null;function Nr(){return hl=hl||new re}cn.La="serverreachability";function dl(c){he.call(this,cn.La,c)}w(dl,he);function Ss(c){const f=Nr();se(f,new dl(f))}cn.STAT_EVENT="statevent";function fl(c,f){he.call(this,cn.STAT_EVENT,c),this.stat=f}w(fl,he);function Oe(c){const f=Nr();se(f,new fl(f,c))}cn.Ma="timingevent";function pl(c,f){he.call(this,cn.Ma,c),this.size=f}w(pl,he);function ks(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function Rs(){this.g=!0}Rs.prototype.xa=function(){this.g=!1};function lg(c,f,g,_,N,D){c.info(function(){if(c.g)if(D)for(var z="",le=D.split("&"),ke=0;ke<le.length;ke++){var ce=le[ke].split("=");if(1<ce.length){var Re=ce[0];ce=ce[1];var Me=Re.split("_");z=2<=Me.length&&Me[1]=="type"?z+(Re+"="+ce+"&"):z+(Re+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function ug(c,f,g,_,N,D,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+D+" "+z})}function Hn(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+dg(c,g)+(_?" "+_:"")})}function hg(c,f){c.info(function(){return"TIMEOUT: "+f})}Rs.prototype.info=function(){};function dg(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var D=N[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Le(g)}catch{return f}}var xr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Dr(){}w(Dr,Xr),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Zi=new Dr;function jt(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var _l={},eo={};function to(c,f,g){c.L=1,c.v=Fr(gt(f)),c.m=g,c.P=!0,yl(c,null)}function yl(c,f){c.F=Date.now(),Or(c),c.A=gt(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),xl(g.i,"t",_),c.C=0,g=c.j.J,c.h=new ml,c.g=Yl(c.j,g?f:null,!c.m),0<c.O&&(c.M=new We(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(ss[0]=N.toString()),N=ss);for(var D=0;D<N.length;D++){var z=U(g,N[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ss(),lg(c.i,c.u,c.A,c.l,c.R,c.m)}jt.prototype.ca=function(c){c=c.target;const f=this.M;f&&mt(c)==3?f.j():this.Y(c)},jt.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mt(this.g);var f=this.g.Ba();const Kn=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Ul(this.g)))){this.J||Me!=4||f==7||(f==8||0>=Kn?Ss(3):Ss(2)),no(this);var g=this.g.Z();this.X=g;t:if(vl(this)){var _=Ul(this.g);c="";var N=_.length,D=mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),As(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(D&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ug(this.i,this.u,this.A,this.l,this.R,Me,g),this.o){if(this.T&&!this.K){t:{if(this.g){var le,ke=this.g;if((le=ke.g?ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(le)){var ce=le;break t}}ce=null}if(g=ce)Hn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,g);else{this.o=!1,this.s=3,Oe(12),ln(this),As(this);break e}}if(this.P){g=!0;let Ye;for(;!this.J&&this.C<z.length;)if(Ye=fg(this,z),Ye==eo){Me==4&&(this.s=4,Oe(14),g=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==_l){this.s=4,Oe(15),Hn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hn(this.i,this.l,Ye,null),so(this,Ye);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||z.length!=0||this.h.h||(this.s=1,Oe(16),g=!1),this.o=this.o&&g,!g)Hn(this.i,this.l,z,"[Invalid Chunked Response]"),ln(this),As(this);else if(0<z.length&&!this.W){this.W=!0;var Re=this.j;Re.g==this&&Re.ba&&!Re.M&&(Re.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),lo(Re),Re.M=!0,Oe(11))}}else Hn(this.i,this.l,z,null),so(this,z);Me==4&&ln(this),this.o&&!this.J&&(Me==4?Wl(this.j,this):(this.o=!1,Or(this)))}else Pg(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),ln(this),As(this)}}}catch{}finally{}};function vl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fg(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?eo:(g=Number(f.substring(g,_)),isNaN(g)?_l:(_+=1,_+g>f.length?eo:(f=f.slice(_,_+g),c.C=_+g,f)))}jt.prototype.cancel=function(){this.J=!0,ln(this)};function Or(c){c.S=Date.now()+c.I,wl(c,c.I)}function wl(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ks(p(c.ba,c),f)}function no(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hg(this.i,this.A),this.L!=2&&(Ss(),Oe(17)),ln(this),this.s=2,As(this)):wl(this,this.S-c)};function As(c){c.j.G==0||c.J||Wl(c.j,c)}function ln(c){no(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Ue(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function so(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||ro(g.h,c))){if(!c.K&&ro(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$r(g),jr(g);else break e;co(g),Oe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=ks(p(g.Za,g),6e3));if(1>=Tl(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else hn(g,11)}else if((c.K||g.g==c)&&$r(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ce=N[f];if(g.T=ce[0],ce=ce[1],g.G==2)if(ce[0]=="c"){g.K=ce[1],g.ia=ce[2];const Re=ce[3];Re!=null&&(g.la=Re,g.j.info("VER="+g.la));const Me=ce[4];Me!=null&&(g.Aa=Me,g.j.info("SVER="+g.Aa));const Kn=ce[5];Kn!=null&&typeof Kn=="number"&&0<Kn&&(_=1.5*Kn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ye=c.g;if(Ye){const Hr=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hr){var D=_.h;D.g||Hr.indexOf("spdy")==-1&&Hr.indexOf("quic")==-1&&Hr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(io(D,D.h),D.h=null))}if(_.D){const uo=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(_.ya=uo,ue(_.I,_.D,uo))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=Ql(_,_.J?_.ia:null,_.W),z.K){Cl(_.h,z);var le=z,ke=_.L;ke&&(le.I=ke),le.B&&(no(le),Or(le)),_.g=z}else zl(_);0<g.i.length&&Br(g)}else ce[0]!="stop"&&ce[0]!="close"||hn(g,7);else g.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?hn(g,7):ao(g):ce[0]!="noop"&&g.l&&g.l.ta(ce),g.v=0)}}Ss(4)}catch{}}var pg=class{constructor(c,f){this.g=c,this.map=f}};function bl(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function El(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tl(c){return c.h?1:c.g?c.g.size:0}function ro(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function io(c,f){c.g?c.g.add(f):c.h=f}function Cl(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return R(c.i)}function gg(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function mg(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function Sl(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=mg(c),_=gg(c),N=_.length,D=0;D<N;D++)f.call(void 0,_[D],g&&g[D],c)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _g(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var D=c[g].substring(0,_);N=c[g].substring(_+1)}else D=c[g];f(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function un(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof un){this.h=c.h,Lr(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var f=c.i,g=new xs;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Rl(this,g),this.m=c.m}else c&&(f=String(c).match(kl))?(this.h=!1,Lr(this,f[1]||"",!0),this.o=Ps(f[2]||""),this.g=Ps(f[3]||"",!0),Mr(this,f[4]),this.l=Ps(f[5]||"",!0),Rl(this,f[6]||"",!0),this.m=Ps(f[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}un.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ns(f,Al,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ns(f,Al,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ns(g,g.charAt(0)=="/"?wg:vg,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ns(g,Eg)),c.join("")};function gt(c){return new un(c)}function Lr(c,f,g){c.j=g?Ps(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Rl(c,f,g){f instanceof xs?(c.i=f,Tg(c.i,c.h)):(g||(f=Ns(f,bg)),c.i=new xs(f,c.h))}function ue(c,f,g){c.i.set(f,g)}function Fr(c){return ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ps(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ns(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,yg),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yg(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Al=/[#\/\?@]/g,vg=/[#\?:]/g,wg=/[#\?]/g,bg=/[#\?@]/g,Eg=/#/g;function xs(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Bt(c){c.g||(c.g=new Map,c.h=0,c.i&&_g(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=xs.prototype,t.add=function(c,f){Bt(this),this.i=null,c=Wn(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Pl(c,f){Bt(c),f=Wn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nl(c,f){return Bt(c),f=Wn(c,f),c.g.has(f)}t.forEach=function(c,f){Bt(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){Bt(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let D=0;D<N.length;D++)g.push(f[_])}return g},t.V=function(c){Bt(this);let f=[];if(typeof c=="string")Nl(this,c)&&(f=f.concat(this.g.get(Wn(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return Bt(this),this.i=null,c=Wn(this,c),Nl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xl(c,f,g){Pl(c,f),0<g.length&&(c.i=null,c.g.set(Wn(c,f),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=D;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function Wn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Tg(c,f){f&&!c.j&&(Bt(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(Pl(this,_),xl(this,N,g))},c)),c.j=f}function Cg(c,f){const g=new Rs;if(a.Image){const _=new Image;_.onload=m($t,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m($t,g,"TestLoadImage: error",!1,f,_),_.onabort=m($t,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m($t,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Ig(c,f){const g=new Rs,_=new AbortController,N=setTimeout(()=>{_.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(D=>{clearTimeout(N),D.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),$t(g,"TestPingServer: error",!1,f)})}function $t(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Sg(){this.g=new Pr}function kg(c,f,g){const _=g||"";try{Sl(c,function(N,D){let z=N;u(N)&&(z=Le(N)),f.push(_+D+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Vr,Xr),Vr.prototype.g=function(){return new Ur(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ur(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ur,re),t=Ur.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Ds(this):Os(this),this.readyState==3&&Dl(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ds(this))},t.Qa=function(c){this.g&&(this.response=c,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ol(c){let f="";return J(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function oo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Ol(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ue(c,f,g))}function pe(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pe,re);var Rg=/^https?$/i,Ag=["POST","PUT"];t=pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ll(this.o):ll(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(D){Ll(this,D);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ag,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){Ll(this,D)}};function Ll(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Ml(c),qr(c)}function Ml(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),qr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qr(this,!0)),pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fl(this):this.bb())},t.bb=function(){Fl(this)};function Fl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||mt(c)!=4||c.Z()!=2)){if(c.u&&mt(c)==4)Se(c.Ea,0,c);else if(se(c,"readystatechange"),mt(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(kl)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!Rg.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var D=2<mt(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",Ml(c)}}finally{qr(c)}}}}function qr(c,f){if(c.g){Vl(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Vl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rs(f)}};function Ul(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pg(c){const f={};c=(c.g&&2<=mt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[N]||[];f[N]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function ql(c){this.Aa=0,this.i=[],this.j=new Rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,c),this.cb=Ls("retryDelaySeedMs",1e4,c),this.Wa=Ls("forwardChannelMaxRetries",2,c),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bl(c&&c.concurrentRequestLimit),this.Da=new Sg,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ql.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Oe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Ql(this,null,this.W),Br(this)};function ao(c){if(jl(c),c.G==3){var f=c.U++,g=gt(c.I);if(ue(g,"SID",c.K),ue(g,"RID",f),ue(g,"TYPE","terminate"),Ms(c,g),f=new jt(c,c.j,f),f.L=2,f.v=Fr(gt(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Yl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Or(f)}Kl(c)}function jr(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function jl(c){jr(c),c.u&&(a.clearTimeout(c.u),c.u=null),$r(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Br(c){if(!El(c.h)&&!c.s){c.s=!0;var f=c.Ga;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.B=0}}function Ng(c,f){return Tl(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ks(p(c.Ga,c,f),Gl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new jt(this,this.j,c);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(N.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$l(this,N,f),g=gt(this.I),ue(g,"RID",c),ue(g,"CVER",22),this.D&&ue(g,"X-HTTP-Session-Id",this.D),Ms(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(Ol(D)))+"&"+f:this.m&&oo(g,this.m,D)),io(this.h,N),this.Ua&&ue(g,"TYPE","init"),this.P?(ue(g,"$req",f),ue(g,"SID","null"),N.T=!0,to(N,g,null)):to(N,g,f),this.G=2}}else this.G==3&&(c?Bl(this,c):this.i.length==0||El(this.h)||Bl(this))};function Bl(c,f){var g;f?g=f.l:g=c.U++;const _=gt(c.I);ue(_,"SID",c.K),ue(_,"RID",g),ue(_,"AID",c.T),Ms(c,_),c.m&&c.o&&oo(_,c.m,c.o),g=new jt(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$l(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),io(c.h,g),to(g,_,f)}function Ms(c,f){c.H&&J(c.H,function(g,_){ue(f,_,g)}),c.l&&Sl({},function(g,_){ue(f,_,g)})}function $l(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=N[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let le=!0;for(let ke=0;ke<g;ke++){let ce=N[ke].g;const Re=N[ke].map;if(ce-=D,0>ce)D=Math.max(0,N[ke].g-100),le=!1;else try{kg(Re,z,"req"+ce+"_")}catch{_&&_(Re)}}if(le){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function zl(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;oe||Ke(),de||(oe(),de=!0),ct.add(f,c),c.v=0}}function co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ks(p(c.Fa,c),Gl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Hl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ks(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),jr(this),Hl(this))};function lo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Hl(c){c.g=new jt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=gt(c.qa);ue(f,"RID","rpc"),ue(f,"SID",c.K),ue(f,"AID",c.T),ue(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ue(f,"TO",c.ja),ue(f,"TYPE","xmlhttp"),Ms(c,f),c.m&&c.o&&oo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Fr(gt(f)),g.m=null,g.P=!0,yl(g,c)}t.Za=function(){this.C!=null&&(this.C=null,jr(this),co(this),Oe(19))};function $r(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Wl(c,f){var g=null;if(c.g==f){$r(c),lo(c),c.g=null;var _=2}else if(ro(c.h,f))g=f.D,Cl(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Nr(),se(_,new pl(_,g)),Br(c)}else zl(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&Ng(c,f)||_==2&&co(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:hn(c,5);break;case 4:hn(c,10);break;case 3:hn(c,6);break;default:hn(c,2)}}}function Gl(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function hn(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new un(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Lr(_,"https"),Fr(_),N?Cg(_.toString(),g):Ig(_.toString(),g)}else Oe(2);c.G=0,c.l&&c.l.sa(f),Kl(c),jl(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Kl(c){if(c.G=0,c.ka=[],c.l){const f=Il(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Ql(c,f,g){var _=g instanceof un?gt(g):new un(g);if(_.g!="")f&&(_.g=f+"."+_.g),Mr(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var D=new un(null);_&&Lr(D,_),f&&(D.g=f),N&&Mr(D,N),g&&(D.l=g),_=D}return g=c.D,f=c.ya,g&&f&&ue(_,g,f),ue(_,"VER",c.la),Ms(c,_),_}function Yl(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new pe(new Vr({eb:g})):new pe(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}t=Xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(c,f){return new qe(c,f)};function qe(c,f){re.call(this),this.g=new ql(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Gn(this)}w(qe,re),qe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qe.prototype.close=function(){ao(this.g)},qe.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Le(c),c=g);f.i.push(new pg(f.Ya++,c)),f.G==3&&Br(f)},qe.prototype.N=function(){this.g.l=null,delete this.j,ao(this.g),delete this.g,qe.aa.N.call(this)};function Jl(c){Xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(Jl,Xi);function Zl(){Ji.call(this),this.status=1}w(Zl,Ji);function Gn(c){this.g=c}w(Gn,Xl),Gn.prototype.ua=function(){se(this.g,"a")},Gn.prototype.ta=function(c){se(this.g,new Jl(c))},Gn.prototype.sa=function(c){se(this.g,new Zl)},Gn.prototype.ra=function(){se(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,qe.prototype.send=qe.prototype.o,qe.prototype.open=qe.prototype.m,qe.prototype.close=qe.prototype.close,F8e=function(){return new zr},M8e=function(){return Nr()},L8e=cn,_Z={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,jV=xr,gl.COMPLETE="complete",O8e=gl,ul.EventType=Is,Is.OPEN="a",Is.CLOSE="b",Is.ERROR="c",Is.MESSAGE="d",re.prototype.listen=re.prototype.K,UA=ul,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,D8e=pe}).apply(typeof s4<"u"?s4:typeof self<"u"?self:typeof window<"u"?window:{});const bSe="@firebase/firestore",ESe="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ka.UNAUTHENTICATED=new Ka(null),Ka.GOOGLE_CREDENTIALS=new Ka("google-credentials-uid"),Ka.FIRST_PARTY=new Ka("first-party-uid"),Ka.MOCK_USER=new Ka("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cR="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new HH("@firebase/firestore");function fI(){return wC.logLevel}function He(t,...e){if(wC.logLevel<=Tn.DEBUG){const n=e.map(Cue);wC.debug(`Firestore (${cR}): ${t}`,...n)}}function k_(t,...e){if(wC.logLevel<=Tn.ERROR){const n=e.map(Cue);wC.error(`Firestore (${cR}): ${t}`,...n)}}function Bk(t,...e){if(wC.logLevel<=Tn.WARN){const n=e.map(Cue);wC.warn(`Firestore (${cR}): ${t}`,...n)}}function Cue(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,V8e(t,s,n)}function V8e(t,e,n){let s=`FIRESTORE (${cR}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw k_(s),new Error(s)}function Cs(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||V8e(e,r,s)}function Zt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends cg{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8e{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jsn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ka.UNAUTHENTICATED))}shutdown(){}}class Bsn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $sn{constructor(e){this.t=e,this.currentUser=Ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Cs(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new $v;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $v,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $v)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Cs(typeof s.accessToken=="string",31837,{l:s}),new U8e(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Cs(e===null||typeof e=="string",2055,{h:e}),new Ka(e)}}class zsn{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ka.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hsn{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new zsn(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ka.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TSe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wsn{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ou(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Cs(this.o===void 0,3512);const s=i=>{i.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,He("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new TSe(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Cs(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new TSe(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gsn(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iue{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Gsn(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function On(t,e){return t<e?-1:t>e?1:0}function yZ(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return ZG(r)===ZG(i)?On(r,i):ZG(r)?1:-1}return On(t.length,e.length)}const Ksn=55296,Qsn=57343;function ZG(t){const e=t.charCodeAt(0);return e>=Ksn&&e<=Qsn}function $k(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CSe="__name__";class Lf{constructor(e,n,s){n===void 0?n=0:n>e.length&&It(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&It(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Lf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lf?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Lf.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return On(e.length,n.length)}static compareSegments(e,n){const s=Lf.isNumericId(e),r=Lf.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Lf.extractNumericId(e).compare(Lf.extractNumericId(n)):yZ(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bv.fromString(e.substring(4,e.length-2))}}class Yr extends Lf{construct(e,n,s){return new Yr(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new tt(Ce.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Yr(n)}static emptyPath(){return new Yr([])}}const Ysn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ba extends Lf{construct(e,n,s){return new ba(e,n,s)}static isValidIdentifier(e){return Ysn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ba.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CSe}static keyField(){return new ba([CSe])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new tt(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new tt(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new tt(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new tt(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ba(n)}static emptyPath(){return new ba([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Yr.fromString(e))}static fromName(e){return new ft(Yr.fromString(e).popFirst(5))}static empty(){return new ft(Yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Yr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Yr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xsn(t,e,n){if(!n)throw new tt(Ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jsn(t,e,n,s){if(e===!0&&s===!0)throw new tt(Ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ISe(t){if(!ft.isDocumentKey(t))throw new tt(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q8e(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sue(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":It(12329,{type:typeof t})}function Hd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tt(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sue(t);throw new tt(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e){const n={typeString:t};return e&&(n.value=e),n}function A2(t,e){if(!q8e(t))throw new tt(Ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new tt(Ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SSe=-62135596800,kSe=1e6;class Cr{static now(){return Cr.fromMillis(Date.now())}static fromDate(e){return Cr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*kSe);return new Cr(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tt(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<SSe)throw new tt(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kSe}_compareTo(e){return this.seconds===e.seconds?On(this.nanoseconds,e.nanoseconds):On(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Cr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(A2(e,Cr._jsonSchema))return new Cr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SSe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Cr._jsonSchemaVersion="firestore/timestamp/1.0",Cr._jsonSchema={type:ji("string",Cr._jsonSchemaVersion),seconds:ji("number"),nanoseconds:ji("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new Cr(0,0))}static max(){return new Ut(new Cr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=-1;function Zsn(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ut.fromTimestamp(s===1e9?new Cr(n+1,0):new Cr(n,s));return new nb(r,ft.empty(),e)}function ern(t){return new nb(t.readTime,t.key,vO)}class nb{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new nb(Ut.min(),ft.empty(),vO)}static max(){return new nb(Ut.max(),ft.empty(),vO)}}function trn(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ft.comparator(t.documentKey,e.documentKey),n!==0?n:On(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nrn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class srn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t){if(t.code!==Ce.FAILED_PRECONDITION||t.message!==nrn)throw t;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,s)=>{n(e)})}static reject(e){return new ve((n,s)=>{s(e)})}static waitFor(e){return new ve((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=ve.resolve(!1);for(const s of e)n=n.next(r=>r?ve.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new ve((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new ve((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function rrn(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uR(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}YH.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kue=-1;function XH(t){return t==null}function Kq(t){return t===0&&1/t==-1/0}function irn(t){return typeof t=="number"&&Number.isInteger(t)&&!Kq(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8e="";function orn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=RSe(e)),e=arn(t.get(n),e);return RSe(e)}function arn(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case j8e:n+="";break;default:n+=i}}return n}function RSe(t){return t+j8e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ASe(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lb(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B8e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ki=class vZ{constructor(e,n){this.comparator=e,this.root=n||zv.EMPTY}insert(e,n){return new vZ(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zv.BLACK,null,null))}remove(e){return new vZ(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zv.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new r4(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new r4(this.root,e,this.comparator,!1)}getReverseIterator(){return new r4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new r4(this.root,e,this.comparator,!0)}},r4=class{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zv=class Wg{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Wg.RED,this.left=r??Wg.EMPTY,this.right=i??Wg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Wg(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Wg.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw It(27949);return e+(this.isRed()?0:1)}};zv.EMPTY=null,zv.RED=!0,zv.BLACK=!1;zv.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new zv(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.comparator=e,this.data=new Ki(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PSe(this.data.getIterator())}getIteratorFrom(e){return new PSe(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qo(this.comparator);return n.data=e,n}}class PSe{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.fields=e,e.sort(ba.comparator)}static empty(){return new Ku([])}unionWith(e){let n=new qo(ba.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ku(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $k(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new $8e("Invalid base64 string: "+i):i}}(e);return new Ra(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Ra(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return On(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ra.EMPTY_BYTE_STRING=new Ra("");const crn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sb(t){if(Cs(!!t,39018),typeof t=="string"){let e=0;const n=crn.exec(t);if(Cs(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ki(t.seconds),nanos:ki(t.nanos)}}function ki(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rb(t){return typeof t=="string"?Ra.fromBase64String(t):Ra.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8e="server_timestamp",H8e="__type__",W8e="__previous_value__",G8e="__local_write_time__";function Rue(t){return(t?.mapValue?.fields||{})[H8e]?.stringValue===z8e}function JH(t){const e=t.mapValue.fields[W8e];return Rue(e)?JH(e):e}function wO(t){const e=sb(t.mapValue.fields[G8e].timestampValue);return new Cr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lrn{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Qq="(default)";class bO{constructor(e,n){this.projectId=e,this.database=n||Qq}static empty(){return new bO("","")}get isDefaultDatabase(){return this.database===Qq}isEqual(e){return e instanceof bO&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8e="__type__",urn="__max__",i4={mapValue:{}},Q8e="__vector__",Yq="value";function ib(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rue(t)?4:drn(t)?9007199254740991:hrn(t)?10:11:It(28295,{value:t})}function Kp(t,e){if(t===e)return!0;const n=ib(t);if(n!==ib(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wO(t).isEqual(wO(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=sb(r.timestampValue),a=sb(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return rb(r.bytesValue).isEqual(rb(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return ki(r.geoPointValue.latitude)===ki(i.geoPointValue.latitude)&&ki(r.geoPointValue.longitude)===ki(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ki(r.integerValue)===ki(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=ki(r.doubleValue),a=ki(i.doubleValue);return o===a?Kq(o)===Kq(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $k(t.arrayValue.values||[],e.arrayValue.values||[],Kp);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(ASe(o)!==ASe(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Kp(o[l],a[l])))return!1;return!0}(t,e);default:return It(52216,{left:t})}}function EO(t,e){return(t.values||[]).find(n=>Kp(n,e))!==void 0}function zk(t,e){if(t===e)return 0;const n=ib(t),s=ib(e);if(n!==s)return On(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return On(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ki(i.integerValue||i.doubleValue),l=ki(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return NSe(t.timestampValue,e.timestampValue);case 4:return NSe(wO(t),wO(e));case 5:return yZ(t.stringValue,e.stringValue);case 6:return function(i,o){const a=rb(i),l=rb(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=On(a[u],l[u]);if(h!==0)return h}return On(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=On(ki(i.latitude),ki(o.latitude));return a!==0?a:On(ki(i.longitude),ki(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xSe(t.arrayValue,e.arrayValue);case 10:return function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Yq]?.arrayValue,h=l[Yq]?.arrayValue,d=On(u?.values?.length||0,h?.values?.length||0);return d!==0?d:xSe(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===i4.mapValue&&o===i4.mapValue)return 0;if(i===i4.mapValue)return 1;if(o===i4.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=yZ(l[d],h[d]);if(p!==0)return p;const m=zk(a[l[d]],u[h[d]]);if(m!==0)return m}return On(l.length,h.length)}(t.mapValue,e.mapValue);default:throw It(23264,{he:n})}}function NSe(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return On(t,e);const n=sb(t),s=sb(e),r=On(n.seconds,s.seconds);return r!==0?r:On(n.nanos,s.nanos)}function xSe(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=zk(n[r],s[r]);if(i)return i}return On(n.length,s.length)}function Hk(t){return wZ(t)}function wZ(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=sb(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rb(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ft.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=wZ(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${wZ(n.fields[o])}`;return r+"}"}(t.mapValue):It(61005,{value:t})}function BV(t){switch(ib(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=JH(t);return e?16+BV(e):16;case 5:return 2*t.stringValue.length;case 6:return rb(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+BV(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Lb(s.fields,(i,o)=>{r+=i.length+BV(o)}),r}(t.mapValue);default:throw It(13486,{value:t})}}function bZ(t){return!!t&&"integerValue"in t}function Aue(t){return!!t&&"arrayValue"in t}function DSe(t){return!!t&&"nullValue"in t}function OSe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $V(t){return!!t&&"mapValue"in t}function hrn(t){return(t?.mapValue?.fields||{})[K8e]?.stringValue===Q8e}function jN(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Lb(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=jN(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jN(t.arrayValue.values[n]);return e}return{...t}}function drn(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===urn}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.value=e}static empty(){return new lu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$V(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jN(n)}setAll(e){let n=ba.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=jN(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());$V(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kp(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];$V(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Lb(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new lu(jN(this.value))}}function Y8e(t){const e=[];return Lb(t.fields,(n,s)=>{const r=new ba([n]);if($V(s)){const i=Y8e(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Ku(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cc(e,0,Ut.min(),Ut.min(),Ut.min(),lu.empty(),0)}static newFoundDocument(e,n,s,r){return new cc(e,1,n,Ut.min(),s,r,0)}static newNoDocument(e,n){return new cc(e,2,n,Ut.min(),Ut.min(),lu.empty(),0)}static newUnknownDocument(e,n){return new cc(e,3,n,Ut.min(),Ut.min(),lu.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e,n){this.position=e,this.inclusive=n}}function LSe(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ft.comparator(ft.fromName(o.referenceValue),n.key):s=zk(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function MSe(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kp(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e,n="asc"){this.field=e,this.dir=n}}function frn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8e{}class Do extends X8e{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new grn(e,n,s):n==="array-contains"?new yrn(e,s):n==="in"?new vrn(e,s):n==="not-in"?new wrn(e,s):n==="array-contains-any"?new brn(e,s):new Do(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new mrn(e,s):new _rn(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(zk(n,this.value)):n!==null&&ib(this.value)===ib(n)&&this.matchesComparison(zk(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qp extends X8e{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Qp(e,n)}matches(e){return J8e(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function J8e(t){return t.op==="and"}function Z8e(t){return prn(t)&&J8e(t)}function prn(t){for(const e of t.filters)if(e instanceof Qp)return!1;return!0}function EZ(t){if(t instanceof Do)return t.field.canonicalString()+t.op.toString()+Hk(t.value);if(Z8e(t))return t.filters.map(e=>EZ(e)).join(",");{const e=t.filters.map(n=>EZ(n)).join(",");return`${t.op}(${e})`}}function eGe(t,e){return t instanceof Do?function(s,r){return r instanceof Do&&s.op===r.op&&s.field.isEqual(r.field)&&Kp(s.value,r.value)}(t,e):t instanceof Qp?function(s,r){return r instanceof Qp&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&eGe(o,r.filters[a]),!0):!1}(t,e):void It(19439)}function tGe(t){return t instanceof Do?function(n){return`${n.field.canonicalString()} ${n.op} ${Hk(n.value)}`}(t):t instanceof Qp?function(n){return n.op.toString()+" {"+n.getFilters().map(tGe).join(" ,")+"}"}(t):"Filter"}class grn extends Do{constructor(e,n,s){super(e,n,s),this.key=ft.fromName(s.referenceValue)}matches(e){const n=ft.comparator(e.key,this.key);return this.matchesComparison(n)}}class mrn extends Do{constructor(e,n){super(e,"in",n),this.keys=nGe("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _rn extends Do{constructor(e,n){super(e,"not-in",n),this.keys=nGe("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nGe(t,e){return(e.arrayValue?.values||[]).map(n=>ft.fromName(n.referenceValue))}class yrn extends Do{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Aue(n)&&EO(n.arrayValue,this.value)}}class vrn extends Do{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&EO(this.value.arrayValue,n)}}class wrn extends Do{constructor(e,n){super(e,"not-in",n)}matches(e){if(EO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!EO(this.value.arrayValue,n)}}class brn extends Do{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Aue(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>EO(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ern{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function FSe(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Ern(t,e,n,s,r,i,o)}function Pue(t){const e=Zt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>EZ(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),XH(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hk(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hk(s)).join(",")),e.Te=n}return e.Te}function Nue(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!frn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eGe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MSe(t.startAt,e.startAt)&&MSe(t.endAt,e.endAt)}function TZ(t){return ft.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Trn(t,e,n,s,r,i,o,a){return new ZH(t,e,n,s,r,i,o,a)}function e7(t){return new ZH(t)}function VSe(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Crn(t){return t.collectionGroup!==null}function BN(t){const e=Zt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qo(ba.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Jq(i,s))}),n.has(ba.keyField().canonicalString())||e.Ie.push(new Jq(ba.keyField(),s))}return e.Ie}function Tp(t){const e=Zt(t);return e.Ee||(e.Ee=Irn(e,BN(t))),e.Ee}function Irn(t,e){if(t.limitType==="F")return FSe(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Jq(r.field,i)});const n=t.endAt?new Xq(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Xq(t.startAt.position,t.startAt.inclusive):null;return FSe(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function CZ(t,e,n){return new ZH(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function t7(t,e){return Nue(Tp(t),Tp(e))&&t.limitType===e.limitType}function sGe(t){return`${Pue(Tp(t))}|lt:${t.limitType}`}function pI(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>tGe(r)).join(", ")}]`),XH(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Hk(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Hk(r)).join(",")),`Target(${s})`}(Tp(t))}; limitType=${t.limitType})`}function n7(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ft.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of BN(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const u=LSe(o,a,l);return o.inclusive?u<=0:u<0}(s.startAt,BN(s),r)||s.endAt&&!function(o,a,l){const u=LSe(o,a,l);return o.inclusive?u>=0:u>0}(s.endAt,BN(s),r))}(t,e)}function Srn(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rGe(t){return(e,n)=>{let s=!1;for(const r of BN(t)){const i=krn(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function krn(t,e,n){const s=t.field.isKeyField()?ft.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?zk(l,u):It(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return It(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lb(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return B8e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rrn=new Ki(ft.comparator);function R_(){return Rrn}const iGe=new Ki(ft.comparator);function qA(...t){let e=iGe;for(const n of t)e=e.insert(n.key,n);return e}function oGe(t){let e=iGe;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function KE(){return $N()}function aGe(){return $N()}function $N(){return new s0(t=>t.toString(),(t,e)=>t.isEqual(e))}const Arn=new Ki(ft.comparator),Prn=new qo(ft.comparator);function $n(...t){let e=Prn;for(const n of t)e=e.add(n);return e}const Nrn=new qo(On);function xrn(){return Nrn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xue(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kq(e)?"-0":e}}function cGe(t){return{integerValue:""+t}}function Drn(t,e){return irn(e)?cGe(e):xue(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this._=void 0}}function Orn(t,e,n){return t instanceof TO?function(r,i){const o={fields:{[H8e]:{stringValue:z8e},[G8e]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Rue(i)&&(i=JH(i)),i&&(o.fields[W8e]=i),{mapValue:o}}(n,e):t instanceof CO?uGe(t,e):t instanceof IO?hGe(t,e):function(r,i){const o=lGe(r,i),a=USe(o)+USe(r.Ae);return bZ(o)&&bZ(r.Ae)?cGe(a):xue(r.serializer,a)}(t,e)}function Lrn(t,e,n){return t instanceof CO?uGe(t,e):t instanceof IO?hGe(t,e):n}function lGe(t,e){return t instanceof Zq?function(s){return bZ(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class TO extends s7{}class CO extends s7{constructor(e){super(),this.elements=e}}function uGe(t,e){const n=dGe(e);for(const s of t.elements)n.some(r=>Kp(r,s))||n.push(s);return{arrayValue:{values:n}}}class IO extends s7{constructor(e){super(),this.elements=e}}function hGe(t,e){let n=dGe(e);for(const s of t.elements)n=n.filter(r=>!Kp(r,s));return{arrayValue:{values:n}}}class Zq extends s7{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function USe(t){return ki(t.integerValue||t.doubleValue)}function dGe(t){return Aue(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mrn{constructor(e,n){this.field=e,this.transform=n}}function Frn(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof CO&&r instanceof CO||s instanceof IO&&r instanceof IO?$k(s.elements,r.elements,Kp):s instanceof Zq&&r instanceof Zq?Kp(s.Ae,r.Ae):s instanceof TO&&r instanceof TO}(t.transform,e.transform)}class Vrn{constructor(e,n){this.version=e,this.transformResults=n}}class Wd{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wd}static exists(e){return new Wd(void 0,e)}static updateTime(e){return new Wd(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zV(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class r7{}function fGe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Due(t.key,Wd.none()):new P2(t.key,t.data,Wd.none());{const n=t.data,s=lu.empty();let r=new qo(ba.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Mb(t.key,s,new Ku(r.toArray()),Wd.none())}}function Urn(t,e,n){t instanceof P2?function(r,i,o){const a=r.value.clone(),l=jSe(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mb?function(r,i,o){if(!zV(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=jSe(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(pGe(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zN(t,e,n,s){return t instanceof P2?function(i,o,a,l){if(!zV(i.precondition,o))return a;const u=i.value.clone(),h=BSe(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Mb?function(i,o,a,l){if(!zV(i.precondition,o))return a;const u=BSe(i.fieldTransforms,l,o),h=o.data;return h.setAll(pGe(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,s):function(i,o,a){return zV(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function qrn(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=lGe(s.transform,r||null);i!=null&&(n===null&&(n=lu.empty()),n.set(s.field,i))}return n||null}function qSe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&$k(s,r,(i,o)=>Frn(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class P2 extends r7{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mb extends r7{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function pGe(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function jSe(t,e,n){const s=new Map;Cs(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Lrn(o,a,n[r]))}return s}function BSe(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Orn(i,o,e))}return s}class Due extends r7{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jrn extends r7{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Brn{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Urn(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=zN(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=zN(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=aGe();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=fGe(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ut.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$n())}isEqual(e){return this.batchId===e.batchId&&$k(this.mutations,e.mutations,(n,s)=>qSe(n,s))&&$k(this.baseMutations,e.baseMutations,(n,s)=>qSe(n,s))}}class Oue{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Cs(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return Arn}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Oue(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $rn{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zrn{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di,Zn;function Hrn(t){switch(t){case Ce.OK:return It(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return It(15467,{code:t})}}function gGe(t){if(t===void 0)return k_("GRPC error has no .code"),Ce.UNKNOWN;switch(t){case Di.OK:return Ce.OK;case Di.CANCELLED:return Ce.CANCELLED;case Di.UNKNOWN:return Ce.UNKNOWN;case Di.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Di.INTERNAL:return Ce.INTERNAL;case Di.UNAVAILABLE:return Ce.UNAVAILABLE;case Di.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Di.NOT_FOUND:return Ce.NOT_FOUND;case Di.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Di.ABORTED:return Ce.ABORTED;case Di.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Di.DATA_LOSS:return Ce.DATA_LOSS;default:return It(39323,{code:t})}}(Zn=Di||(Di={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wrn(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Grn=new Bv([4294967295,4294967295],0);function $Se(t){const e=Wrn().encode(t),n=new x8e;return n.update(e),new Uint8Array(n.digest())}function zSe(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bv([n,s],0),new Bv([r,i],0)]}class Lue{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new jA(`Invalid padding: ${n}`);if(s<0)throw new jA(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new jA(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new jA(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bv.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Bv.fromNumber(s)));return r.compare(Grn)===1&&(r=new Bv([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$Se(e),[s,r]=zSe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lue(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=$Se(e),[s,r]=zSe(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class jA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,N2.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new i7(Ut.min(),r,new Ki(On),R_(),$n())}}class N2{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new N2(s,n,$n(),$n(),$n())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class mGe{constructor(e,n){this.targetId=e,this.Ce=n}}class _Ge{constructor(e,n,s=Ra.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class HSe{constructor(){this.ve=0,this.Fe=WSe(),this.Me=Ra.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$n(),n=$n(),s=$n();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:It(38017,{changeType:i})}}),new N2(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=WSe()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Cs(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Krn{constructor(e){this.Ge=e,this.ze=new Map,this.je=R_(),this.Je=o4(),this.He=o4(),this.Ye=new Ki(On)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:It(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(TZ(i))if(s===0){const o=new ft(i.path);this.et(n,o,cc.newNoDocument(o,Ut.min()))}else Cs(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=rb(s).toUint8Array()}catch(l){if(l instanceof $8e)return Bk("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Lue(o,r,i)}catch(l){return Bk(l instanceof jA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&TZ(a.target)){const l=new ft(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,cc.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=$n();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new i7(e,n,this.Ye,this.je,s);return this.je=R_(),this.Je=o4(),this.He=o4(),this.Ye=new Ki(On),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new HSe,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qo(On),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qo(On),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new HSe),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function o4(){return new Ki(ft.comparator)}function WSe(){return new Ki(ft.comparator)}const Qrn={asc:"ASCENDING",desc:"DESCENDING"},Yrn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xrn={and:"AND",or:"OR"};class Jrn{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function IZ(t,e){return t.useProto3Json||XH(e)?e:{value:e}}function ej(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yGe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Zrn(t,e){return ej(t,e.toTimestamp())}function Cp(t){return Cs(!!t,49232),Ut.fromTimestamp(function(n){const s=sb(n);return new Cr(s.seconds,s.nanos)}(t))}function Mue(t,e){return SZ(t,e).canonicalString()}function SZ(t,e){const n=function(r){return new Yr(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vGe(t){const e=Yr.fromString(t);return Cs(CGe(e),10190,{key:e.toString()}),e}function kZ(t,e){return Mue(t.databaseId,e.path)}function eK(t,e){const n=vGe(e);if(n.get(1)!==t.databaseId.projectId)throw new tt(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new tt(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ft(bGe(n))}function wGe(t,e){return Mue(t.databaseId,e)}function ein(t){const e=vGe(t);return e.length===4?Yr.emptyPath():bGe(e)}function RZ(t){return new Yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bGe(t){return Cs(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function GSe(t,e,n){return{name:kZ(t,e),fields:n.value.mapValue.fields}}function tin(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:It(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Cs(h===void 0||typeof h=="string",58123),Ra.fromBase64String(h||"")):(Cs(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ra.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Ce.UNKNOWN:gGe(u.code);return new tt(h,u.message||"")}(o);n=new _Ge(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=eK(t,s.document.name),i=Cp(s.document.updateTime),o=s.document.createTime?Cp(s.document.createTime):Ut.min(),a=new lu({mapValue:{fields:s.document.fields}}),l=cc.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new HV(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=eK(t,s.document),i=s.readTime?Cp(s.readTime):Ut.min(),o=cc.newNoDocument(r,i),a=s.removedTargetIds||[];n=new HV([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=eK(t,s.document),i=s.removedTargetIds||[];n=new HV([],i,r,null)}else{if(!("filter"in e))return It(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new zrn(r,i),a=s.targetId;n=new mGe(a,o)}}return n}function nin(t,e){let n;if(e instanceof P2)n={update:GSe(t,e.key,e.value)};else if(e instanceof Due)n={delete:kZ(t,e.key)};else if(e instanceof Mb)n={update:GSe(t,e.key,e.data),updateMask:hin(e.fieldMask)};else{if(!(e instanceof jrn))return It(16599,{Vt:e.type});n={verify:kZ(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof TO)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof CO)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof IO)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zq)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw It(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Zrn(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:It(27497)}(t,e.precondition)),n}function sin(t,e){return t&&t.length>0?(Cs(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Cp(r.updateTime):Cp(i);return o.isEqual(Ut.min())&&(o=Cp(i)),new Vrn(o,r.transformResults||[])}(n,e))):[]}function rin(t,e){return{documents:[wGe(t,e.path)]}}function iin(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wGe(t,r);const i=function(u){if(u.length!==0)return TGe(Qp.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:gI(p.field),direction:cin(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=IZ(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function oin(t){let e=ein(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Cs(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=EGe(d);return p instanceof Qp&&Z8e(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(w){return new Jq(mI(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,XH(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new Xq(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const p=!d.before,m=d.values||[];return new Xq(m,p)}(n.endAt)),Trn(e,r,o,i,a,"F",l,u)}function ain(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EGe(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mI(n.unaryFilter.field);return Do.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=mI(n.unaryFilter.field);return Do.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=mI(n.unaryFilter.field);return Do.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mI(n.unaryFilter.field);return Do.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(t):t.fieldFilter!==void 0?function(n){return Do.create(mI(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qp.create(n.compositeFilter.filters.map(s=>EGe(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(n.compositeFilter.op))}(t):It(30097,{filter:t})}function cin(t){return Qrn[t]}function lin(t){return Yrn[t]}function uin(t){return Xrn[t]}function gI(t){return{fieldPath:t.canonicalString()}}function mI(t){return ba.fromServerFormat(t.fieldPath)}function TGe(t){return t instanceof Do?function(n){if(n.op==="=="){if(OSe(n.value))return{unaryFilter:{field:gI(n.field),op:"IS_NAN"}};if(DSe(n.value))return{unaryFilter:{field:gI(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OSe(n.value))return{unaryFilter:{field:gI(n.field),op:"IS_NOT_NAN"}};if(DSe(n.value))return{unaryFilter:{field:gI(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gI(n.field),op:lin(n.op),value:n.value}}}(t):t instanceof Qp?function(n){const s=n.getFilters().map(r=>TGe(r));return s.length===1?s[0]:{compositeFilter:{op:uin(n.op),filters:s}}}(t):It(54877,{filter:t})}function hin(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CGe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,s,r,i=Ut.min(),o=Ut.min(),a=Ra.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nv(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class din{constructor(e){this.yt=e}}function fin(t){const e=oin({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?CZ(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pin{constructor(){this.Cn=new gin}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(nb.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(nb.min())}updateCollectionGroup(e,n,s){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class gin{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new qo(Yr.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new qo(Yr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KSe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IGe=41943040;class ru{static withCacheSize(e){return new ru(e,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ru.DEFAULT_COLLECTION_PERCENTILE=10,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ru.DEFAULT=new ru(IGe,ru.DEFAULT_COLLECTION_PERCENTILE,ru.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ru.DISABLED=new ru(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wk(0)}static cr(){return new Wk(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QSe="LruGarbageCollector",min=1048576;function YSe([t,e],[n,s]){const r=On(t,n);return r===0?On(e,s):r}class _in{constructor(e){this.Ir=e,this.buffer=new qo(YSe),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();YSe(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yin{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(QSe,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uR(n)?He(QSe,"Ignoring IndexedDB error during garbage collection: ",n):await lR(n)}await this.Vr(3e5)})}}class vin{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(YH.ce);const s=new _in(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(KSe)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KSe):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),fI()<=Tn.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function win(t,e){return new vin(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bin{constructor(){this.changes=new s0(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cc.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ve.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ein{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tin{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&zN(s.mutation,r,Ku.empty(),Cr.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,$n()).next(()=>s))}getLocalViewOfDocuments(e,n,s=$n()){const r=KE();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=qA();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=KE();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,$n()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=R_();const o=$N(),a=function(){return $N()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Mb)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),zN(h.mutation,u,h.mutation.getFieldMask(),Cr.now())):o.set(u.key,Ku.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new Ein(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=$N();let r=new Ki((o,a)=>o-a),i=$n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||Ku.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||$n()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=aGe();h.forEach(p=>{if(!i.has(p)){const m=fGe(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ve.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ft.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Crn(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ve.resolve(KE());let a=vO,l=i;return o.next(u=>ve.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ve.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,$n())).next(h=>({batchId:a,changes:oGe(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ft(n)).next(s=>{let r=qA();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=qA();return this.indexManager.getCollectionParents(e,i).next(a=>ve.forEach(a,l=>{const u=function(d,p){return new ZH(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,cc.newInvalidDocument(h)))});let a=qA();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&zN(h.mutation,u,Ku.empty(),Cr.now()),n7(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cin{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Cp(r.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:fin(r.bundledQuery),readTime:Cp(r.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iin{constructor(){this.overlays=new Ki(ft.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const s=KE();return ve.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ve.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ve.resolve()}getOverlaysForCollection(e,n,s){const r=KE(),i=n.length+1,o=new ft(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return ve.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ki((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=KE(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=KE(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return ve.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new $rn(n,s));let i=this.qr.get(n);i===void 0&&(i=$n(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sin{constructor(){this.sessionToken=Ra.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fue{constructor(){this.Qr=new qo(ea.$r),this.Ur=new qo(ea.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new ea(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new ea(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ft(new Yr([])),s=new ea(n,e),r=new ea(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ft(new Yr([])),s=new ea(n,e),r=new ea(n,e+1);let i=$n();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ea(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class ea{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ft.comparator(e.key,n.key)||On(e.Yr,n.Yr)}static Kr(e,n){return On(e.Yr,n.Yr)||ft.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kin{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qo(ea.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Brn(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new ea(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ve.resolve(o)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ve.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?kue:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new ea(n,0),r=new ea(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ve.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new qo(On);return n.forEach(r=>{const i=new ea(r,0),o=new ea(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ve.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ft.isDocumentKey(i)||(i=i.child(""));const o=new ea(new ft(i),0);let a=new qo(On);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),ve.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Cs(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ve.forEach(n.mutations,r=>{const i=new ea(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new ea(n,0),r=this.Zr.firstAfterOrEqual(s);return ve.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rin{constructor(e){this.ri=e,this.docs=function(){return new Ki(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ve.resolve(s?s.document.mutableCopy():cc.newInvalidDocument(n))}getEntries(e,n){let s=R_();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():cc.newInvalidDocument(r))}),ve.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=R_();const o=n.path,a=new ft(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||trn(ern(h),s)<=0||(r.has(h.key)||n7(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ve.resolve(i)}getAllFromCollectionGroup(e,n,s,r){It(9500)}ii(e,n){return ve.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Ain(this)}getSize(e){return ve.resolve(this.size)}}class Ain extends bin{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pin{constructor(e){this.persistence=e,this.si=new s0(n=>Pue(n),Nue),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.oi=0,this._i=new Fue,this.targetCount=0,this.ai=Wk.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wk(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ve.waitFor(i).next(()=>r)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ve.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ve.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ve.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ve.resolve(s)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SGe{constructor(e,n){this.ui={},this.overlays={},this.ci=new YH(0),this.li=!1,this.li=!0,this.hi=new Sin,this.referenceDelegate=e(this),this.Pi=new Pin(this),this.indexManager=new pin,this.remoteDocumentCache=function(r){return new Rin(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new din(n),this.Ii=new Cin(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Iin,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new kin(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){He("MemoryPersistence","Starting transaction:",e);const r=new Nin(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ve.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Nin extends srn{constructor(e){super(),this.currentSequenceNumber=e}}class Vue{constructor(e){this.persistence=e,this.Ri=new Fue,this.Vi=null}static mi(e){return new Vue(e)}get fi(){if(this.Vi)return this.Vi;throw It(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ve.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,s=>{const r=ft.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Ut.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class tj{constructor(e,n){this.persistence=e,this.pi=new s0(s=>orn(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=win(this,n)}static mi(e,n){return new tj(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ve.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ve.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Ut.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=BV(e.data.value)),n}br(e,n,s){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ve.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uue{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=$n(),r=$n();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Uue(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xin{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Din{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return wen()?8:rrn(Ec())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xin;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(fI()<=Tn.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",pI(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(fI()<=Tn.DEBUG&&He("QueryEngine","Query:",pI(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(fI()<=Tn.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",pI(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tp(n))):ve.resolve())}ys(e,n){if(VSe(n))return ve.resolve(null);let s=Tp(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=CZ(n,null,"F"),s=Tp(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=$n(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,CZ(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return VSe(n)||r.isEqual(Ut.min())?ve.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ve.resolve(null):(fI()<=Tn.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pI(n)),this.vs(e,o,n,Zsn(r,vO)).next(a=>a))})}Ds(e,n){let s=new qo(rGe(e));return n.forEach((r,i)=>{n7(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return fI()<=Tn.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",pI(n)),this.ps.getDocumentsMatchingQuery(e,n,nb.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const que="LocalStore",Oin=3e8;class Lin{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ki(On),this.xs=new s0(i=>Pue(i),Nue),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tin(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Min(t,e,n,s){return new Lin(t,e,n,s)}async function kGe(t,e){const n=Zt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=$n();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function Fin(t,e){const n=Zt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,p=d.keys();let m=ve.resolve();return p.forEach(w=>{m=m.next(()=>h.getEntry(l,w)).next(R=>{const P=u.docVersions.get(w);Cs(P!==null,48541),R.version.compareTo(P)<0&&(d.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),h.addEntry(R)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=$n();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function RGe(t){const e=Zt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Vin(t,e){const n=Zt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Ra.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(R,P,O){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Oin?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=R_(),u=$n();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Uin(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(Ut.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ve.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function Uin(t,e,n){let s=$n(),r=$n();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=R_();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ut.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):He(que,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function qin(t,e){const n=Zt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=kue),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function jin(t,e){const n=Zt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ve.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new nv(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function AZ(t,e,n){const s=Zt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!uR(o))throw o;He(que,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function XSe(t,e,n){const s=Zt(t);let r=Ut.min(),i=$n();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=Zt(l),p=d.xs.get(h);return p!==void 0?ve.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)}(s,o,Tp(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ut.min(),n?i:$n())).next(a=>(Bin(s,Srn(e),a),{documents:a,Qs:i})))}function Bin(t,e,n){let s=t.Os.get(e)||Ut.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class JSe{constructor(){this.activeTargetIds=xrn()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $in{constructor(){this.Mo=new JSe,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JSe,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zin{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZSe="ConnectivityMonitor";class eke{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(ZSe,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(ZSe,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a4=null;function PZ(){return a4===null?a4=function(){return 268435456+Math.round(2147483648*Math.random())}():a4++,"0x"+a4.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK="RestConnection",Hin={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Win{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Qq?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=PZ(),a=this.zo(e,n.toUriEncodedString());He(tK,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=ag(u);return this.Jo(e,a,l,s,h).then(d=>(He(tK,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Bk(tK,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cR}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=Hin[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gin{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="WebChannelConnection";class Kin extends Win{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=PZ();return new Promise((a,l)=>{const u=new D8e;u.setWithCredentials(!0),u.listenOnce(O8e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case jV.NO_ERROR:const d=u.getResponseJson();He(Da,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case jV.TIMEOUT:He(Da,`RPC '${e}' ${o} timed out`),l(new tt(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case jV.HTTP_ERROR:const p=u.getStatus();if(He(Da,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const R=function(O){const M=O.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(M)>=0?M:Ce.UNKNOWN}(w.status);l(new tt(R,w.message))}else l(new tt(Ce.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new tt(Ce.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{He(Da,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);He(Da,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=PZ(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=F8e(),a=M8e(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");He(Da,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new Gin({Yo:P=>{m?He(Da,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(He(Da,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),He(Da,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),R=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return R(d,UA.EventType.OPEN,()=>{m||(He(Da,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),R(d,UA.EventType.CLOSE,()=>{m||(m=!0,He(Da,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),R(d,UA.EventType.ERROR,P=>{m||(m=!0,Bk(Da,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new tt(Ce.UNAVAILABLE,"The operation could not be completed")))}),R(d,UA.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];Cs(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){He(Da,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let W=function(v){const y=Di[v];if(y!==void 0)return gGe(y)}(q),J=V.message;W===void 0&&(W=Ce.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new tt(W,J)),d.close()}else He(Da,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),R(a,L8e.STAT_EVENT,P=>{P.stat===_Z.PROXY?He(Da,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===_Z.NOPROXY&&He(Da,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function nK(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t){return new Jrn(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AGe{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tke="PersistentStream";class PGe{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AGe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(k_(n.toString()),k_("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new tt(Ce.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return He(tke,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(He(tke,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qin extends PGe{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tin(this.serializer,e),s=function(i){if(!("targetChange"in i))return Ut.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ut.min():o.readTime?Cp(o.readTime):Ut.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=RZ(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=TZ(l)?{documents:rin(i,l)}:{query:iin(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yGe(i,o.resumeToken);const u=IZ(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ut.min())>0){a.readTime=ej(i,o.snapshotVersion.toTimestamp());const u=IZ(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const s=ain(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=RZ(this.serializer),n.removeTarget=e,this.q_(n)}}class Yin extends PGe{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Cs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Cs(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Cs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sin(e.writeResults,e.commitTime),s=Cp(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=RZ(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>nin(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xin{}class Jin extends Xin{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new tt(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,SZ(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt(Ce.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,SZ(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new tt(Ce.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Zin{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(k_(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="RemoteStore";class eon{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{r0(this)&&(He(bC,"Restarting streams for network reachability change."),await async function(l){const u=Zt(l);u.Ea.add(4),await x2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await a7(u)}(this))})}),this.Ra=new Zin(s,r)}}async function a7(t){if(r0(t))for(const e of t.da)await e(!0)}async function x2(t){for(const e of t.da)await e(!1)}function NGe(t,e){const n=Zt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zue(n)?$ue(n):hR(n).O_()&&Bue(n,e))}function jue(t,e){const n=Zt(t),s=hR(n);n.Ia.delete(e),s.O_()&&xGe(n,e),n.Ia.size===0&&(s.O_()?s.L_():r0(n)&&n.Ra.set("Unknown"))}function Bue(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hR(t).Y_(e)}function xGe(t,e){t.Va.Ue(e),hR(t).Z_(e)}function $ue(t){t.Va=new Krn({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),hR(t).start(),t.Ra.ua()}function zue(t){return r0(t)&&!hR(t).x_()&&t.Ia.size>0}function r0(t){return Zt(t).Ea.size===0}function DGe(t){t.Va=void 0}async function ton(t){t.Ra.set("Online")}async function non(t){t.Ia.forEach((e,n)=>{Bue(t,e)})}async function son(t,e){DGe(t),zue(t)?(t.Ra.ha(e),$ue(t)):t.Ra.set("Unknown")}async function ron(t,e,n){if(t.Ra.set("Online"),e instanceof _Ge&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))}(t,e)}catch(s){He(bC,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nj(t,s)}else if(e instanceof HV?t.Va.Ze(e):e instanceof mGe?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ut.min()))try{const s=await RGe(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Ra.EMPTY_BYTE_STRING,h.snapshotVersion)),xGe(i,l);const d=new nv(h.target,l,u,h.sequenceNumber);Bue(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){He(bC,"Failed to raise snapshot:",s),await nj(t,s)}}async function nj(t,e,n){if(!uR(e))throw e;t.Ea.add(1),await x2(t),t.Ra.set("Offline"),n||(n=()=>RGe(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{He(bC,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await a7(t)})}function OGe(t,e){return e().catch(n=>nj(t,n,e))}async function c7(t){const e=Zt(t),n=ob(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kue;for(;ion(e);)try{const r=await qin(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,oon(e,r)}catch(r){await nj(e,r)}LGe(e)&&MGe(e)}function ion(t){return r0(t)&&t.Ta.length<10}function oon(t,e){t.Ta.push(e);const n=ob(t);n.O_()&&n.X_&&n.ea(e.mutations)}function LGe(t){return r0(t)&&!ob(t).x_()&&t.Ta.length>0}function MGe(t){ob(t).start()}async function aon(t){ob(t).ra()}async function con(t){const e=ob(t);for(const n of t.Ta)e.ea(n.mutations)}async function lon(t,e,n){const s=t.Ta.shift(),r=Oue.from(s,e,n);await OGe(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await c7(t)}async function uon(t,e){e&&ob(t).X_&&await async function(s,r){if(function(o){return Hrn(o)&&o!==Ce.ABORTED}(r.code)){const i=s.Ta.shift();ob(s).B_(),await OGe(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await c7(s)}}(t,e),LGe(t)&&MGe(t)}async function nke(t,e){const n=Zt(t);n.asyncQueue.verifyOperationInProgress(),He(bC,"RemoteStore received new credentials");const s=r0(n);n.Ea.add(3),await x2(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await a7(n)}async function hon(t,e){const n=Zt(t);e?(n.Ea.delete(2),await a7(n)):e||(n.Ea.add(2),await x2(n),n.Ra.set("Unknown"))}function hR(t){return t.ma||(t.ma=function(n,s,r){const i=Zt(n);return i.sa(),new Qin(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:ton.bind(null,t),t_:non.bind(null,t),r_:son.bind(null,t),H_:ron.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zue(t)?$ue(t):t.Ra.set("Unknown")):(await t.ma.stop(),DGe(t))})),t.ma}function ob(t){return t.fa||(t.fa=function(n,s,r){const i=Zt(n);return i.sa(),new Yin(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aon.bind(null,t),r_:uon.bind(null,t),ta:con.bind(null,t),na:lon.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await c7(t)):(await t.fa.stop(),t.Ta.length>0&&(He(bC,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new $v,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Hue(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wue(t,e){if(k_("AsyncQueue",`${e}: ${t}`),uR(t))return new tt(Ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static emptySet(e){return new wS(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=qA(),this.sortedSet=new Ki(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wS)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new wS;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ske{constructor(){this.ga=new Ki(ft.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):It(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Gk{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Gk(e,n,wS.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&t7(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class don{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class fon{constructor(){this.queries=rke(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Zt(n),i=r.queries;r.queries=rke(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new tt(Ce.ABORTED,"Firestore shutting down"))}}function rke(){return new s0(t=>sGe(t),t7)}async function FGe(t,e){const n=Zt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new don,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Wue(o,`Initialization of query '${pI(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Gue(n)}async function VGe(t,e){const n=Zt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pon(t,e){const n=Zt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&Gue(n)}function gon(t,e,n){const s=Zt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Gue(t){t.Ca.forEach(e=>{e.next()})}var NZ,ike;(ike=NZ||(NZ={})).Ma="default",ike.Cache="cache";class UGe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Gk(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==NZ.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qGe{constructor(e){this.key=e}}class jGe{constructor(e){this.key=e}}class mon{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$n(),this.mutatedKeys=$n(),this.eu=rGe(e),this.tu=new wS(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new ske,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=n7(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==R&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=R?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,w){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Rt:P})}};return R(m)-R(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Gk(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ske,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$n(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new jGe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new qGe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=$n();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gk.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kue="SyncEngine";class _on{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yon{constructor(e){this.key=e,this.hu=!1}}class von{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new s0(a=>sGe(a),t7),this.Iu=new Map,this.Eu=new Set,this.du=new Ki(ft.comparator),this.Au=new Map,this.Ru=new Fue,this.Vu={},this.mu=new Map,this.fu=Wk.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function won(t,e,n=!0){const s=GGe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await BGe(s,e,n,!0),r}async function bon(t,e){const n=GGe(t);await BGe(n,e,!0,!1)}async function BGe(t,e,n,s){const r=await jin(t.localStore,Tp(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await Eon(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&NGe(t.remoteStore,r),a}async function Eon(t,e,n,s,r){t.pu=(d,p,m)=>async function(R,P,O,M){let V=P.view.ru(O);V.Cs&&(V=await XSe(R.localStore,P.query,!1).then(({documents:I})=>P.view.ru(I,V)));const q=M&&M.targetChanges.get(P.targetId),W=M&&M.targetMismatches.get(P.targetId)!=null,J=P.view.applyChanges(V,R.isPrimaryClient,q,W);return ake(R,P.targetId,J.au),J.snapshot}(t,d,p,m);const i=await XSe(t.localStore,e,!0),o=new mon(e,i.Qs),a=o.ru(i.documents),l=N2.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);ake(t,n,u.au);const h=new _on(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Ton(t,e,n){const s=Zt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!t7(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await AZ(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&jue(s.remoteStore,r.targetId),xZ(s,r.targetId)}).catch(lR)):(xZ(s,r.targetId),await AZ(s.localStore,r.targetId,!0))}async function Con(t,e){const n=Zt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jue(n.remoteStore,s.targetId))}async function Ion(t,e,n){const s=xon(t);try{const r=await function(o,a){const l=Zt(o),u=Cr.now(),h=a.reduce((m,w)=>m.add(w.key),$n());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=R_(),R=$n();return l.Ns.getEntries(m,h).next(P=>{w=P,w.forEach((O,M)=>{M.isValidDocument()||(R=R.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(P=>{d=P;const O=[];for(const M of a){const V=qrn(M,d.get(M.key).overlayedDocument);V!=null&&O.push(new Mb(M.key,V,Y8e(V.value.mapValue),Wd.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,O,a)}).next(P=>{p=P;const O=P.applyToLocalDocumentSet(d,R);return l.documentOverlayCache.saveOverlays(m,P.batchId,O)})}).then(()=>({batchId:p.batchId,changes:oGe(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ki(On)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await D2(s,r.changes),await c7(s.remoteStore)}catch(r){const i=Wue(r,"Failed to persist write");n.reject(i)}}async function $Ge(t,e){const n=Zt(t);try{const s=await Vin(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Cs(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Cs(o.hu,14607):r.removedDocuments.size>0&&(Cs(o.hu,42227),o.hu=!1))}),await D2(n,s,e)}catch(s){await lR(s)}}function oke(t,e,n){const s=Zt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Zt(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)}),u&&Gue(l)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Son(t,e,n){const s=Zt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ki(ft.comparator);o=o.insert(i,cc.newNoDocument(i,Ut.min()));const a=$n().add(i),l=new i7(Ut.min(),new Map,new Ki(On),o,a);await $Ge(s,l),s.du=s.du.remove(i),s.Au.delete(e),Que(s)}else await AZ(s.localStore,e,!1).then(()=>xZ(s,e,n)).catch(lR)}async function kon(t,e){const n=Zt(t),s=e.batch.batchId;try{const r=await Fin(n.localStore,e);HGe(n,s,null),zGe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await D2(n,r)}catch(r){await lR(r)}}async function Ron(t,e,n){const s=Zt(t);try{const r=await function(o,a){const l=Zt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Cs(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(s.localStore,e);HGe(s,e,n),zGe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await D2(s,r)}catch(r){await lR(r)}}function zGe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function HGe(t,e,n){const s=Zt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function xZ(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||WGe(t,s)})}function WGe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jue(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Que(t))}function ake(t,e,n){for(const s of n)s instanceof qGe?(t.Ru.addReference(s.key,e),Aon(t,s)):s instanceof jGe?(He(Kue,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||WGe(t,s.key)):It(19791,{wu:s})}function Aon(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(He(Kue,"New document in limbo: "+n),t.Eu.add(s),Que(t))}function Que(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ft(Yr.fromString(e)),s=t.fu.next();t.Au.set(s,new yon(n)),t.du=t.du.insert(n,s),NGe(t.remoteStore,new nv(Tp(e7(n.path)),s,"TargetPurposeLimboResolution",YH.ce))}}async function D2(t,e,n){const s=Zt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Uue.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(l,u){const h=Zt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ve.forEach(u,p=>ve.forEach(p.Es,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>ve.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!uR(d))throw d;He(que,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const m=h.Ms.get(p),w=m.snapshotVersion,R=m.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,R)}}}(s.localStore,i))}async function Pon(t,e){const n=Zt(t);if(!n.currentUser.isEqual(e)){He(Kue,"User change. New user:",e.toKey());const s=await kGe(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new tt(Ce.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await D2(n,s.Ls)}}function Non(t,e){const n=Zt(t),s=n.Au.get(e);if(s&&s.hu)return $n().add(s.key);{let r=$n();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function GGe(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$Ge.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Non.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Son.bind(null,e),e.Pu.H_=pon.bind(null,e.eventManager),e.Pu.yu=gon.bind(null,e.eventManager),e}function xon(t){const e=Zt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kon.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ron.bind(null,e),e}class sj{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=o7(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Min(this.persistence,new Din,e.initialUser,this.serializer)}Cu(e){return new SGe(Vue.mi,this.serializer)}Du(e){return new $in}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sj.provider={build:()=>new sj};class Don extends sj{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Cs(this.persistence.referenceDelegate instanceof tj,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yin(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ru.withCacheSize(this.cacheSizeBytes):ru.DEFAULT;return new SGe(s=>tj.mi(s,n),this.serializer)}}class DZ{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>oke(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pon.bind(null,this.syncEngine),await hon(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fon}()}createDatastore(e){const n=o7(e.databaseInfo.databaseId),s=function(i){return new Kin(i)}(e.databaseInfo);return function(i,o,a,l){return new Jin(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new eon(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>oke(this.syncEngine,n,0),function(){return eke.v()?new eke:new zin}())}createSyncEngine(e,n){return function(r,i,o,a,l,u,h){const d=new von(r,i,o,a,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Zt(n);He(bC,"RemoteStore shutting down."),s.Ea.add(5),await x2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}DZ.provider={build:()=>new DZ};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KGe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):k_("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="FirestoreClient";class Oon{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ka.UNAUTHENTICATED,this.clientId=Iue.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{He(ab,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(He(ab,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $v;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Wue(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sK(t,e){t.asyncQueue.verifyOperationInProgress(),He(ab,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await kGe(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cke(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Lon(t);He(ab,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>nke(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>nke(e.remoteStore,r)),t._onlineComponents=e}async function Lon(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){He(ab,"Using user provided OfflineComponentProvider");try{await sK(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ce.FAILED_PRECONDITION||r.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Bk("Error using user provided cache. Falling back to memory cache: "+n),await sK(t,new sj)}}else He(ab,"Using default OfflineComponentProvider"),await sK(t,new Don(void 0));return t._offlineComponents}async function QGe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(He(ab,"Using user provided OnlineComponentProvider"),await cke(t,t._uninitializedComponentsProvider._online)):(He(ab,"Using default OnlineComponentProvider"),await cke(t,new DZ))),t._onlineComponents}function Mon(t){return QGe(t).then(e=>e.syncEngine)}async function OZ(t){const e=await QGe(t),n=e.eventManager;return n.onListen=won.bind(null,e.syncEngine),n.onUnlisten=Ton.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bon.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Con.bind(null,e.syncEngine),n}function Fon(t,e,n={}){const s=new $v;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new KGe({next:p=>{h.Nu(),o.enqueueAndForget(()=>VGe(i,d));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new tt(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new tt(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new UGe(e7(a.path),h,{includeMetadataChanges:!0,qa:!0});return FGe(i,d)}(await OZ(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YGe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lke=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XGe="firestore.googleapis.com",uke=!0;class hke{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XGe,this.ssl=uke}else this.host=e.host,this.ssl=e.ssl??uke;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IGe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<min)throw new tt(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jsn("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YGe(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new tt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new tt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new tt(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yue{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hke({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hke(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new jsn;switch(s.type){case"firstParty":return new Hsn(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new tt(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=lke.get(n);s&&(He("ComponentProvider","Removing Datastore"),lke.delete(n),s.terminate())}(this),Promise.resolve()}}function Von(t,e,n,s={}){t=Hd(t,Yue);const r=ag(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(BH(`https://${a}`),$H("Firestore",!0)),i.host!==XGe&&i.host!==a&&Bk("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!eb(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ka.MOCK_USER;else{u=uue(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new tt(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ka(d)}t._authCredentials=new Bsn(new U8e(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new l7(this.firestore,e,this._query)}}class Bi{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new SO(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bi(this.firestore,e,this._key)}toJSON(){return{type:Bi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(A2(n,Bi._jsonSchema))return new Bi(e,s||null,new ft(Yr.fromString(n.referencePath)))}}Bi._jsonSchemaVersion="firestore/documentReference/1.0",Bi._jsonSchema={type:ji("string",Bi._jsonSchemaVersion),referencePath:ji("string")};class SO extends l7{constructor(e,n,s){super(e,n,e7(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bi(this.firestore,null,new ft(e))}withConverter(e){return new SO(this.firestore,e,this._path)}}function Uon(t,e,...n){if(t=Bs(t),arguments.length===1&&(e=Iue.newId()),Xsn("doc","path",e),t instanceof Yue){const s=Yr.fromString(e,...n);return ISe(s),new Bi(t,null,new ft(s))}{if(!(t instanceof Bi||t instanceof SO))throw new tt(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Yr.fromString(e,...n));return ISe(s),new Bi(t.firestore,t instanceof SO?t.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dke="AsyncQueue";class fke{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AGe(this,"async_queue_retry"),this._c=()=>{const s=nK();s&&He(dke,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=nK();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nK();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new $v;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uR(e))throw e;He(dke,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,k_("INTERNAL UNHANDLED ERROR: ",pke(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Hue.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&It(47125,{Pc:pke(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pke(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gke(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class EC extends Yue{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new fke,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fke(e),this._firestoreClient=void 0,await e}}}function JGe(t,e){const n=typeof t=="object"?t:WH(),s=typeof t=="string"?t:Qq,r=I2(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=lue("firestore");i&&Von(r,...i)}return r}function Xue(t){if(t._terminated)throw new tt(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qon(t),t._firestoreClient}function qon(t){const e=t._freezeSettings(),n=function(r,i,o,a){return new lrn(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,YGe(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Oon(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _h(Ra.fromBase64String(e))}catch(n){throw new tt(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _h(Ra.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_h._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(A2(e,_h._jsonSchema))return _h.fromBase64String(e.bytes)}}_h._jsonSchemaVersion="firestore/bytes/1.0",_h._jsonSchema={type:ji("string",_h._jsonSchemaVersion),bytes:ji("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tt(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ba(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tt(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tt(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return On(this._lat,e._lat)||On(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ip._jsonSchemaVersion}}static fromJSON(e){if(A2(e,Ip._jsonSchema))return new Ip(e.latitude,e.longitude)}}Ip._jsonSchemaVersion="firestore/geoPoint/1.0",Ip._jsonSchema={type:ji("string",Ip._jsonSchemaVersion),latitude:ji("number"),longitude:ji("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(A2(e,Sp._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sp(e.vectorValues);throw new tt(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sp._jsonSchemaVersion="firestore/vectorValue/1.0",Sp._jsonSchema={type:ji("string",Sp._jsonSchemaVersion),vectorValues:ji("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jon=/^__.*__$/;class Bon{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Mb(e,this.data,this.fieldMask,n,this.fieldTransforms):new P2(e,this.data,n,this.fieldTransforms)}}class ZGe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Mb(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eKe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ac:t})}}class Jue{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jue({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rj(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eKe(this.Ac)&&jon.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $on{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||o7(e)}Cc(e,n,s,r=!1){return new Jue({Ac:e,methodName:n,Dc:s,path:ba.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tKe(t){const e=t._freezeSettings(),n=o7(t._databaseId);return new $on(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zon(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);ehe("Data must be an object, but it was:",o,s);const a=nKe(s,o);let l,u;if(i.merge)l=new Ku(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=LZ(e,d,n);if(!o.contains(p))throw new tt(Ce.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rKe(h,p)||h.push(p)}l=new Ku(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new Bon(new lu(a),l,u)}class d7 extends h7{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof d7}}class Zue extends h7{_toFieldTransform(e){return new Mrn(e.path,new TO)}isEqual(e){return e instanceof Zue}}function Hon(t,e,n,s){const r=t.Cc(1,e,n);ehe("Data must be an object, but it was:",r,s);const i=[],o=lu.empty();Lb(s,(l,u)=>{const h=the(e,l,n);u=Bs(u);const d=r.yc(h);if(u instanceof d7)i.push(h);else{const p=f7(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Ku(i);return new ZGe(o,a,r.fieldTransforms)}function Won(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[LZ(e,s,n)],l=[r];if(i.length%2!=0)throw new tt(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(LZ(e,i[p])),l.push(i[p+1]);const u=[],h=lu.empty();for(let p=a.length-1;p>=0;--p)if(!rKe(u,a[p])){const m=a[p];let w=l[p];w=Bs(w);const R=o.yc(m);if(w instanceof d7)u.push(m);else{const P=f7(w,R);P!=null&&(u.push(m),h.set(m,P))}}const d=new Ku(u);return new ZGe(h,d,o.fieldTransforms)}function f7(t,e){if(sKe(t=Bs(t)))return ehe("Unsupported field value:",e,t),nKe(t,e);if(t instanceof h7)return function(s,r){if(!eKe(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=f7(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Bs(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Drn(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Cr.fromDate(s);return{timestampValue:ej(r.serializer,i)}}if(s instanceof Cr){const i=new Cr(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ej(r.serializer,i)}}if(s instanceof Ip)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _h)return{bytesValue:yGe(r.serializer,s._byteString)};if(s instanceof Bi){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Mue(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Sp)return function(o,a){return{mapValue:{fields:{[K8e]:{stringValue:Q8e},[Yq]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return xue(a.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Sue(s)}`)}(t,e)}function nKe(t,e){const n={};return B8e(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lb(t,(s,r)=>{const i=f7(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function sKe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Cr||t instanceof Ip||t instanceof _h||t instanceof Bi||t instanceof h7||t instanceof Sp)}function ehe(t,e,n){if(!sKe(n)||!q8e(n)){const s=Sue(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function LZ(t,e,n){if((e=Bs(e))instanceof u7)return e._internalPath;if(typeof e=="string")return the(t,e);throw rj("Field path arguments must be of type string or ",t,!1,void 0,n)}const Gon=new RegExp("[~\\*/\\[\\]]");function the(t,e,n){if(e.search(Gon)>=0)throw rj(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new u7(...e.split("."))._internalPath}catch{throw rj(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rj(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new tt(Ce.INVALID_ARGUMENT,a+t+l)}function rKe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iKe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kon(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oKe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Kon extends iKe{data(){return super.data()}}function oKe(t,e){return typeof e=="string"?the(t,e):e instanceof u7?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qon(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new tt(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yon{convertValue(e,n="none"){switch(ib(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ki(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw It(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Lb(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[Yq].arrayValue?.values?.map(s=>ki(s.doubleValue));return new Sp(n)}convertGeoPoint(e){return new Ip(ki(e.latitude),ki(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=JH(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(wO(e));default:return null}}convertTimestamp(e){const n=sb(e);return new Cr(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Yr.fromString(e);Cs(CGe(s),9688,{name:e});const r=new bO(s.get(1),s.get(3)),i=new ft(s.popFirst(5));return r.isEqual(n)||k_(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xon(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class BA{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kT extends iKe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new WV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(oKe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kT._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kT._jsonSchemaVersion="firestore/documentSnapshot/1.0",kT._jsonSchema={type:ji("string",kT._jsonSchemaVersion),bundleSource:ji("string","DocumentSnapshot"),bundleName:ji("string"),bundle:ji("string")};class WV extends kT{data(e={}){return super.data(e)}}class bS{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new BA(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new WV(this._firestore,this._userDataWriter,s.key,s,new BA(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new WV(r._firestore,r._userDataWriter,a.doc.key,a.doc,new BA(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new WV(r._firestore,r._userDataWriter,a.doc.key,a.doc,new BA(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Jon(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tt(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bS._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iue.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Jon(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mke(t){t=Hd(t,Bi);const e=Hd(t.firestore,EC);return Fon(Xue(e),t._key).then(n=>cKe(e,t,n))}bS._jsonSchemaVersion="firestore/querySnapshot/1.0",bS._jsonSchema={type:ji("string",bS._jsonSchemaVersion),bundleSource:ji("string","QuerySnapshot"),bundleName:ji("string"),bundle:ji("string")};class aKe extends Yon{constructor(e){super(),this.firestore=e}convertBytes(e){return new _h(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bi(this.firestore,null,n)}}function _ke(t,e,n){t=Hd(t,Bi);const s=Hd(t.firestore,EC),r=Xon(t.converter,e,n);return nhe(s,[zon(tKe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Wd.none())])}function Qdn(t,e,n,...s){t=Hd(t,Bi);const r=Hd(t.firestore,EC),i=tKe(r);let o;return o=typeof(e=Bs(e))=="string"||e instanceof u7?Won(i,"updateDoc",t._key,e,n,s):Hon(i,"updateDoc",t._key,e),nhe(r,[o.toMutation(t._key,Wd.exists(!0))])}function Ydn(t){return nhe(Hd(t.firestore,EC),[new Due(t._key,Wd.none())])}function Xdn(t,...e){t=Bs(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gke(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gke(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof Bi)o=Hd(t.firestore,EC),a=e7(t._key.path),i={next:l=>{e[s]&&e[s](cKe(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Hd(t,l7);o=Hd(l.firestore,EC),a=l._query;const u=new aKe(o);i={next:h=>{e[s]&&e[s](new bS(o,u,l,h))},error:e[s+1],complete:e[s+2]},Qon(t._query)}return function(u,h,d,p){const m=new KGe(p),w=new UGe(h,m,d);return u.asyncQueue.enqueueAndForget(async()=>FGe(await OZ(u),w)),()=>{m.Nu(),u.asyncQueue.enqueueAndForget(async()=>VGe(await OZ(u),w))}}(Xue(o),a,r,i)}function nhe(t,e){return function(s,r){const i=new $v;return s.asyncQueue.enqueueAndForget(async()=>Ion(await Mon(s),r,i)),i.promise}(Xue(t),e)}function cKe(t,e,n){const s=n.docs.get(e._key),r=new aKe(t);return new kT(t,r,e._key,s,new BA(n.hasPendingWrites,n.fromCache),e.converter)}function rK(){return new Zue("serverTimestamp")}(function(e,n=!0){(function(r){cR=r})(Ob),tb(new C_("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new EC(new $sn(s.getProvider("auth-internal")),new Wsn(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new tt(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bO(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ah(bSe,ESe,e),Ah(bSe,ESe,"esm2020")})();var Zon="firebase",ean="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ah(Zon,ean,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lKe="firebasestorage.googleapis.com",uKe="storageBucket",tan=120*1e3,nan=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends cg{constructor(e,n,s=0){super(iK(e),`Firebase Storage: ${n} (${iK(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ei.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iK(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vi||(vi={}));function iK(t){return"storage/"+t}function she(){const t="An unknown error occurred, please check the error payload for server response.";return new Ei(vi.UNKNOWN,t)}function san(t){return new Ei(vi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ran(t){return new Ei(vi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ian(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ei(vi.UNAUTHENTICATED,t)}function oan(){return new Ei(vi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aan(t){return new Ei(vi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function can(){return new Ei(vi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lan(){return new Ei(vi.CANCELED,"User canceled the upload/download.")}function uan(t){return new Ei(vi.INVALID_URL,"Invalid URL '"+t+"'.")}function han(t){return new Ei(vi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dan(){return new Ei(vi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uKe+"' property when initializing the app?")}function fan(){return new Ei(vi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pan(){return new Ei(vi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gan(t){return new Ei(vi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function MZ(t){return new Ei(vi.INVALID_ARGUMENT,t)}function hKe(){return new Ei(vi.APP_DELETED,"The Firebase app was deleted.")}function man(t){return new Ei(vi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HN(t,e){return new Ei(vi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function oA(t){throw new Ei(vi.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=il.makeFromUrl(e,n)}catch{return new il(e,"")}if(s.path==="")return s;throw han(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},R=n===lKe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${R}/${r}/${P}`,"i"),V=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let q=0;q<V.length;q++){const W=V[q],J=W.regex.exec(e);if(J){const I=J[W.indices.bucket];let v=J[W.indices.path];v||(v=""),s=new il(I,v),W.postModify(s);break}}if(s==null)throw uan(e);return s}}class _an{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yan(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(u){p();return}if(P){p(),h.call(null,P,...O);return}if(l()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let V;a===1?(a=2,V=0):V=(s+Math.random())*1e3,d(V)}let w=!1;function R(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function van(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wan(t){return t!==void 0}function ban(t){return typeof t=="object"&&!Array.isArray(t)}function rhe(t){return typeof t=="string"||t instanceof String}function yke(t){return ihe()&&t instanceof Blob}function ihe(){return typeof Blob<"u"}function FZ(t,e,n,s){if(s<e)throw MZ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw MZ(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function dKe(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var RT;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(RT||(RT={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ean(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tan{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,R)=>{this.resolve_=w,this.reject_=R,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new c4(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===RT.NO_ERROR,l=i.getStatus();if(!a||Ean(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===RT.ABORT;s(!1,new c4(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new c4(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());wan(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=she();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?hKe():lan();o(l)}else{const l=can();o(l)}};this.canceled_?n(!1,new c4(!1,null,!0)):this.backoffId_=yan(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&van(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class c4{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function Can(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ian(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function San(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kan(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ran(t,e,n,s,r,i,o=!0,a=!1){const l=dKe(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return San(h,e),Can(h,n),Ian(h,i),kan(h,s),new Tan(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aan(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pan(...t){const e=Aan();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(ihe())return new Blob(t);throw new Ei(vi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nan(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xan(t){if(typeof atob>"u")throw gan("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oK{constructor(e,n){this.data=e,this.contentType=n||null}}function fKe(t,e){switch(t){case _d.RAW:return new oK(pKe(e));case _d.BASE64:case _d.BASE64URL:return new oK(gKe(t,e));case _d.DATA_URL:return new oK(Oan(e),Lan(e))}throw she()}function pKe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=t.charCodeAt(++n);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Dan(t){let e;try{e=decodeURIComponent(t)}catch{throw HN(_d.DATA_URL,"Malformed data URL.")}return pKe(e)}function gKe(t,e){switch(t){case _d.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw HN(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case _d.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw HN(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xan(e)}catch(r){throw r.message.includes("polyfill")?r:HN(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class mKe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw HN(_d.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=Man(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function Oan(t){const e=new mKe(t);return e.base64?gKe(_d.BASE64,e.rest):Dan(e.rest)}function Lan(t){return new mKe(t).contentType}function Man(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n){let s=0,r="";yke(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(yke(this.data_)){const s=this.data_,r=Nan(s,e,n);return r===null?null:new Yy(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Yy(s,!0)}}static getBlob(...e){if(ihe()){const n=e.map(s=>s instanceof Yy?s.data_:s);return new Yy(Pan.apply(null,n))}else{const n=e.map(o=>rhe(o)?fKe(_d.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new Yy(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ohe(t){let e;try{e=JSON.parse(t)}catch{return null}return ban(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fan(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Van(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function _Ke(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uan(t,e){return e}class kc{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||Uan}}let l4=null;function qan(t){return!rhe(t)||t.length<2?t:_Ke(t)}function yKe(){if(l4)return l4;const t=[];t.push(new kc("bucket")),t.push(new kc("generation")),t.push(new kc("metageneration")),t.push(new kc("name","fullPath",!0));function e(i,o){return qan(o)}const n=new kc("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new kc("size");return r.xform=s,t.push(r),t.push(new kc("timeCreated")),t.push(new kc("updated")),t.push(new kc("md5Hash",null,!0)),t.push(new kc("cacheControl",null,!0)),t.push(new kc("contentDisposition",null,!0)),t.push(new kc("contentEncoding",null,!0)),t.push(new kc("contentLanguage",null,!0)),t.push(new kc("contentType",null,!0)),t.push(new kc("metadata","customMetadata",!0)),l4=t,l4}function jan(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new il(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Ban(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return jan(s,t),s}function vKe(t,e,n){const s=ohe(e);return s===null?null:Ban(t,s,n)}function $an(t,e,n,s){const r=ohe(e);if(r===null||!rhe(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),m=O2(p,n,s),w=dKe({alt:"media",token:u});return m+w})[0]}function zan(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vke="prefixes",wke="items";function Han(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vke])for(const r of n[vke]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new il(e,i));s.prefixes.push(o)}if(n[wke])for(const r of n[wke]){const i=t._makeStorageReference(new il(e,r.name));s.items.push(i)}return s}function Wan(t,e,n){const s=ohe(n);return s===null?null:Han(t,e,s)}class p7{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ahe(t){if(!t)throw she()}function Gan(t,e){function n(s,r){const i=vKe(t,r,e);return ahe(i!==null),i}return n}function Kan(t,e){function n(s,r){const i=Wan(t,e,r);return ahe(i!==null),i}return n}function Qan(t,e){function n(s,r){const i=vKe(t,r,e);return ahe(i!==null),$an(i,r,t.host,t._protocol)}return n}function che(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=oan():r=ian():n.getStatus()===402?r=ran(t.bucket):n.getStatus()===403?r=aan(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function wKe(t){const e=che(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=san(t.path)),i.serverResponse=r.serverResponse,i}return n}function Yan(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=O2(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new p7(a,l,Kan(t,e.bucket),u);return h.urlParams=i,h.errorHandler=che(e),h}function Xan(t,e,n){const s=e.fullServerUrl(),r=O2(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new p7(r,i,Qan(t,n),o);return a.errorHandler=wKe(e),a}function Jan(t,e){const n=e.fullServerUrl(),s=O2(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new p7(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=wKe(e),a}function Zan(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ecn(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Zan(null,e)),s}function tcn(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=ecn(e,s,r),h=zan(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Yy.getBlob(d,s,p);if(m===null)throw fan();const w={name:u.fullPath},R=O2(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new p7(R,P,Gan(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=che(e),M}class ncn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=RT.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=RT.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=RT.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw oA("cannot .send() more than once");if(ag(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw oA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw oA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw oA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw oA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class scn extends ncn{initXhr(){this.xhr_.responseType="text"}}function g7(){return new scn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this._service=e,n instanceof il?this._location=n:this._location=il.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new TC(e,n)}get root(){const e=new il(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _Ke(this._location.path)}get storage(){return this._service}get parent(){const e=Fan(this._location.path);if(e===null)return null;const n=new il(this._location.bucket,e);return new TC(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw man(e)}}function rcn(t,e,n){t._throwIfRoot("uploadBytes");const s=tcn(t.storage,t._location,yKe(),new Yy(e,!0),n);return t.storage.makeRequestWithTokens(s,g7).then(r=>({metadata:r,ref:t}))}function icn(t,e,n=_d.RAW,s){t._throwIfRoot("uploadString");const r=fKe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),rcn(t,r.data,i)}function ocn(t){const e={prefixes:[],items:[]};return bKe(t,e).then(()=>e)}async function bKe(t,e,n){const r=await acn(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await bKe(t,e,r.nextPageToken)}function acn(t,e){e!=null&&typeof e.maxResults=="number"&&FZ("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=Yan(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,g7)}function ccn(t){t._throwIfRoot("getDownloadURL");const e=Xan(t.storage,t._location,yKe());return t.storage.makeRequestWithTokens(e,g7).then(n=>{if(n===null)throw pan();return n})}function lcn(t){t._throwIfRoot("deleteObject");const e=Jan(t.storage,t._location);return t.storage.makeRequestWithTokens(e,g7)}function ucn(t,e){const n=Van(t._location.path,e),s=new il(t._location.bucket,n);return new TC(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hcn(t){return/^[A-Za-z]+:\/\//.test(t)}function dcn(t,e){return new TC(t,e)}function EKe(t,e){if(t instanceof lhe){const n=t;if(n._bucket==null)throw dan();const s=new TC(n,n._bucket);return e!=null?EKe(s,e):s}else return e!==void 0?ucn(t,e):t}function fcn(t,e){if(e&&hcn(e)){if(t instanceof lhe)return dcn(t,e);throw MZ("To use ref(service, url), the first argument must be a Storage instance.")}else return EKe(t,e)}function bke(t,e){const n=e?.[uKe];return n==null?null:il.makeFromBucketSpec(n,t)}function pcn(t,e,n,s={}){t.host=`${e}:${n}`;const r=ag(e);r&&(BH(`https://${t.host}/b`),$H("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:uue(i,t.app.options.projectId))}class lhe{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=lKe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tan,this._maxUploadRetryTime=nan,this._requests=new Set,r!=null?this._bucket=il.makeFromBucketSpec(r,this._host):this._bucket=bke(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=il.makeFromBucketSpec(this._url,e):this._bucket=bke(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FZ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FZ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ou(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new TC(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new _an(hKe());{const o=Ran(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Eke="@firebase/storage",Tke="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TKe="storage";function Jdn(t,e,n,s){return t=Bs(t),icn(t,e,n,s)}function Zdn(t){return t=Bs(t),ocn(t)}function efn(t){return t=Bs(t),ccn(t)}function tfn(t){return t=Bs(t),lcn(t)}function nfn(t,e){return t=Bs(t),fcn(t,e)}function gcn(t=WH(),e){t=Bs(t);const s=I2(t,TKe).getImmediate({identifier:e}),r=lue("storage");return r&&mcn(s,...r),s}function mcn(t,e,n,s={}){pcn(t,e,n,s)}function _cn(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new lhe(n,s,r,e,Ob)}function ycn(){tb(new C_(TKe,_cn,"PUBLIC").setMultipleInstances(!0)),Ah(Eke,Tke,""),Ah(Eke,Tke,"esm2020")}ycn();var Cke={};const Ike="@firebase/database",Ske="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CKe="";function vcn(t){CKe=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wcn{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xo(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:mO(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bcn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return G_(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IKe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wcn(e)}}catch{}return new bcn},QE=IKe("localStorage"),Ecn=IKe("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new HH("@firebase/database"),Tcn=function(){let t=1;return function(){return t++}}(),SKe=function(t){const e=xen(t),n=new Ren;n.update(e);const s=n.digest();return cue.encodeByteArray(s)},L2=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=L2.apply(null,s):typeof s=="object"?e+=xo(s):e+=s,e+=" "}return e};let WN=null,kke=!0;const Ccn=function(t,e){De(!0,"Can't turn on custom loggers persistently."),ES.logLevel=Tn.VERBOSE,WN=ES.log.bind(ES)},lc=function(...t){if(kke===!0&&(kke=!1,WN===null&&Ecn.get("logging_enabled")===!0&&Ccn()),WN){const e=L2.apply(null,t);WN(e)}},M2=function(t){return function(...e){lc(t,...e)}},VZ=function(...t){const e="FIREBASE INTERNAL ERROR: "+L2(...t);ES.error(e)},A_=function(...t){const e=`FIREBASE FATAL ERROR: ${L2(...t)}`;throw ES.error(e),new Error(e)},wu=function(...t){const e="FIREBASE WARNING: "+L2(...t);ES.warn(e)},Icn=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kKe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Scn=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kk="[MIN_NAME]",CC="[MAX_NAME]",dR=function(t,e){if(t===e)return 0;if(t===Kk||e===CC)return-1;if(e===Kk||t===CC)return 1;{const n=Rke(t),s=Rke(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},kcn=function(t,e){return t===e?0:t<e?-1:1},aA=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xo(e))},uhe=function(t){if(typeof t!="object"||t===null)return xo(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=xo(e[s]),n+=":",n+=uhe(t[e[s]]);return n+="}",n},RKe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Iu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const AKe=function(t){De(!kKe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},Rcn=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Acn=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Pcn(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const Ncn=new RegExp("^-?(0*)\\d{1,10}$"),xcn=-2147483648,Dcn=2147483647,Rke=function(t){if(Ncn.test(t)){const e=Number(t);if(e>=xcn&&e<=Dcn)return e}return null},fR=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw wu("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ocn=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},GN=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lcn{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ou(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){wu(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mcn{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(lc("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wu(e)}}class GV{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}GV.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hhe="5",PKe="v",NKe="s",xKe="r",DKe="f",OKe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LKe="ls",MKe="p",UZ="ac",FKe="websocket",VKe="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UKe{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=QE.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&QE.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Fcn(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qKe(t,e,n){De(typeof e=="string","typeof type must == string"),De(typeof n=="object","typeof params must == object");let s;if(e===FKe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===VKe)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Fcn(t)&&(n.ns=t.namespace);const r=[];return Iu(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vcn{constructor(){this.counters_={}}incrementCounter(e,n=1){G_(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return aen(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK={},cK={};function dhe(t){const e=t.toString();return aK[e]||(aK[e]=new Vcn),aK[e]}function Ucn(t,e){const n=t.toString();return cK[n]||(cK[n]=e()),cK[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qcn{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&fR(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ake="start",jcn="close",Bcn="pLPCommand",$cn="pRTLPCB",jKe="id",BKe="pw",$Ke="ser",zcn="cb",Hcn="seg",Wcn="ts",Gcn="d",Kcn="dframe",zKe=1870,HKe=30,Qcn=zKe-HKe,Ycn=25e3,Xcn=3e4;class EI{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=M2(e),this.stats_=dhe(n),this.urlFn=l=>(this.appCheckToken&&(l[UZ]=this.appCheckToken),qKe(n,VKe,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qcn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Xcn)),Scn(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fhe((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ake)this.id=a,this.password=l;else if(o===jcn)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Ake]="t",s[$Ke]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[zcn]=this.scriptTagHolder.uniqueCallbackIdentifier),s[PKe]=hhe,this.transportSessionId&&(s[NKe]=this.transportSessionId),this.lastSessionId&&(s[LKe]=this.lastSessionId),this.applicationId&&(s[MKe]=this.applicationId),this.appCheckToken&&(s[UZ]=this.appCheckToken),typeof location<"u"&&location.hostname&&OKe.test(location.hostname)&&(s[xKe]=DKe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){EI.forceAllow_=!0}static forceDisallow(){EI.forceDisallow_=!0}static isAvailable(){return EI.forceAllow_?!0:!EI.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Rcn()&&!Acn()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=xo(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=zWe(n),r=RKe(s,Qcn);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[Kcn]="t",s[jKe]=e,s[BKe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=xo(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class fhe{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tcn(),window[Bcn+this.uniqueCallbackIdentifier]=e,window[$cn+this.uniqueCallbackIdentifier]=n,this.myIFrame=fhe.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){lc("frame writing exception"),a.stack&&lc(a.stack),lc(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||lc("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jKe]=this.myID,e[BKe]=this.myPW,e[$Ke]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+HKe+s.length<=zKe;){const o=this.pendingSegs.shift();s=s+"&"+Hcn+r+"="+o.seg+"&"+Wcn+r+"="+o.ts+"&"+Gcn+r+"="+o.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(Ycn)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{lc("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jcn=16384,Zcn=45e3;let ij=null;typeof MozWebSocket<"u"?ij=MozWebSocket:typeof WebSocket<"u"&&(ij=WebSocket);class Zh{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=M2(this.connId),this.stats_=dhe(n),this.connURL=Zh.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[PKe]=hhe,typeof location<"u"&&location.hostname&&OKe.test(location.hostname)&&(o[xKe]=DKe),n&&(o[NKe]=n),s&&(o[LKe]=s),r&&(o[UZ]=r),i&&(o[MKe]=i),qKe(e,FKe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,QE.set("previous_websocket_failure",!0);try{let s;ven(),this.mySock=new ij(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Zh.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ij!==null&&!Zh.forceDisallow_}static previouslyFailed(){return QE.isInMemoryStorage||QE.get("previous_websocket_failure")===!0}markConnectionHealthy(){QE.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=mO(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(De(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=xo(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=RKe(n,Jcn);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Zcn))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zh.responsesRequiredToBeHealthy=2;Zh.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{static get ALL_TRANSPORTS(){return[EI,Zh]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Zh&&Zh.isAvailable();let s=n&&!Zh.previouslyFailed();if(e.webSocketOnly&&(n||wu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Zh];else{const r=this.transports_=[];for(const i of kO.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);kO.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}kO.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eln=6e4,tln=5e3,nln=10*1024,sln=100*1024,lK="t",Pke="d",rln="s",Nke="r",iln="e",xke="o",Dke="a",Oke="n",Lke="p",oln="h";class aln{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=M2("c:"+this.id+":"),this.transportManager_=new kO(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=GN(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>sln?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nln?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lK in e){const n=e[lK];n===Dke?this.upgradeIfSecondaryHealthy_():n===Nke?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===xke&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=aA("t",e),s=aA("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Lke,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Dke,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Oke,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=aA("t",e),s=aA("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=aA(lK,e);if(Pke in e){const s=e[Pke];if(n===oln){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Oke){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===rln?this.onConnectionShutdown_(s):n===Nke?this.onReset_(s):n===iln?VZ("Server Error: "+s):n===xke?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VZ("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hhe!==s&&wu("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),GN(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eln))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):GN(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tln))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Lke,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(QE.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WKe{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GKe{constructor(e){this.allowedEvents_=e,this.listeners_={},De(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){De(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj extends GKe{static getInstance(){return new oj}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!hue()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return De(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mke=32,Fke=768;class Js{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ls(){return new Js("")}function mn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function cb(t){return t.pieces_.length-t.pieceNum_}function lr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Js(t.pieces_,e)}function KKe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cln(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function QKe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YKe(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Js(e,0)}function Oo(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Js)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new Js(n,0)}function Rn(t){return t.pieceNum_>=t.pieces_.length}function ol(t,e){const n=mn(t),s=mn(e);if(n===null)return e;if(n===s)return ol(lr(t),lr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function phe(t,e){if(cb(t)!==cb(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function yd(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(cb(t)>cb(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class lln{constructor(e,n){this.errorPrefix_=n,this.parts_=QKe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=zH(this.parts_[s]);XKe(this)}}function uln(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=zH(e),XKe(t)}function hln(t){const e=t.parts_.pop();t.byteLength_-=zH(e),t.parts_.length>0&&(t.byteLength_-=1)}function XKe(t){if(t.byteLength_>Fke)throw new Error(t.errorPrefix_+"has a key path longer than "+Fke+" bytes ("+t.byteLength_+").");if(t.parts_.length>Mke)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Mke+") or object contains a cycle "+vE(t))}function vE(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe extends GKe{static getInstance(){return new ghe}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return De(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1e3,dln=300*1e3,Vke=30*1e3,fln=1.3,pln=3e4,gln="server_kill",Uke=3;class Fm extends WKe{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Fm.nextPersistentConnectionId_++,this.log_=M2("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cA,this.maxReconnectDelay_=dln,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ghe.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&oj.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(xo(i)),De(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new jH,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),De(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Fm.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&G_(e,"w")){const s=qk(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();wu(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ken(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Vke)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Sen(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+xo(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):VZ("Unrecognized action received from server: "+xo(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){De(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pln&&(this.reconnectDelay_=cA),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fln)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Fm.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){De(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?lc("getToken() completed but was canceled"):(lc("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new aln(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{wu(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(gln)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&wu(d),l())}}}interrupt(e){lc("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){lc("Resuming connection for reason: "+e),delete this.interruptReasons_[e],cZ(this.interruptReasons_)&&(this.reconnectDelay_=cA,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>uhe(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new Js(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){lc("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Uke&&(this.reconnectDelay_=Vke,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){lc("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Uke&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+CKe.replace(/\./g,"-")]=1,hue()?e["framework.cordova"]=1:QWe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=oj.getInstance().currentlyOnline();return cZ(this.interruptReasons_)&&e}}Fm.nextPersistentConnectionId_=0;Fm.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _n(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new _n(Kk,e),r=new _n(Kk,n);return this.compare(s,r)!==0}minPost(){return _n.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u4;class JKe extends m7{static get __EMPTY_NODE(){return u4}static set __EMPTY_NODE(e){u4=e}compare(e,n){return dR(e.name,n.name)}isDefinedOn(e){throw iR("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _n.MIN}maxPost(){return new _n(CC,u4)}makePost(e,n){return De(typeof e=="string","KeyIndex indexValue must always be a string."),new _n(e,u4)}toString(){return".key"}}const TS=new JKe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ra{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ra.RED,this.left=r??fu.EMPTY_NODE,this.right=i??fu.EMPTY_NODE}copy(e,n,s,r,i){return new ra(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return fu.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return fu.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ra.RED=!0;ra.BLACK=!1;class mln{copy(e,n,s,r,i){return this}insert(e,n,s){return new ra(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class fu{constructor(e,n=fu.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new fu(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ra.BLACK,null,null))}remove(e){return new fu(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ra.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new h4(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new h4(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new h4(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new h4(this.root_,null,this.comparator_,!0,e)}}fu.EMPTY_NODE=new mln;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ln(t,e){return dR(t.name,e.name)}function mhe(t,e){return dR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qZ;function yln(t){qZ=t}const ZKe=function(t){return typeof t=="number"?"number:"+AKe(t):"string:"+t},eQe=function(t){if(t.isLeafNode()){const e=t.val();De(typeof e=="string"||typeof e=="number"||typeof e=="object"&&G_(e,".sv"),"Priority must be a string or number.")}else De(t===qZ||t.isEmpty(),"priority of unexpected type.");De(t===qZ||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qke;class Qo{static set __childrenNodeConstructor(e){qke=e}static get __childrenNodeConstructor(){return qke}constructor(e,n=Qo.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,De(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),eQe(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qo(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qo.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Rn(e)?this:mn(e)===".priority"?this.priorityNode_:Qo.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qo.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=mn(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(De(s!==".priority"||cb(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Qo.__childrenNodeConstructor.EMPTY_NODE.updateChild(lr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ZKe(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=AKe(this.value_):e+=this.value_,this.lazyHash_=SKe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qo.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qo.__childrenNodeConstructor?-1:(De(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Qo.VALUE_TYPE_ORDER.indexOf(n),i=Qo.VALUE_TYPE_ORDER.indexOf(s);return De(r>=0,"Unknown leaf type: "+n),De(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qo.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tQe,nQe;function vln(t){tQe=t}function wln(t){nQe=t}class bln extends m7{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?dR(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(CC,new Qo("[PRIORITY-POST]",nQe))}makePost(e,n){const s=tQe(e);return new _n(n,new Qo("[PRIORITY-POST]",s))}toString(){return".priority"}}const li=new bln;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eln=Math.log(2);class Tln{constructor(e){const n=i=>parseInt(Math.log(i)/Eln,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const aj=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new ra(p,d.node,ra.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),R=r(m+1,u);return d=t[m],p=n?n(d):d,new ra(p,d.node,ra.BLACK,w,R)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,R){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new ra(q,V.node,R,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?p(P,ra.BLACK):(p(P,ra.BLACK),p(P,ra.RED))}return h},o=new Tln(t.length),a=i(o);return new fu(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uK;const x0={};class Am{static get Default(){return De(x0&&li,"ChildrenNode.ts has not been loaded"),uK=uK||new Am({".priority":x0},{".priority":li}),uK}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=qk(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fu?n:null}hasIndex(e){return G_(this.indexSet_,e.toString())}addIndex(e,n){De(e!==TS,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(_n.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=aj(s,e.getCompare()):a=x0;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Am(h,u)}addToIndexes(e,n){const s=qq(this.indexes_,(r,i)=>{const o=qk(this.indexSet_,i);if(De(o,"Missing index implementation for "+i),r===x0)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(_n.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),aj(a,o.getCompare())}else return x0;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new _n(e.name,a))),l.insert(e,e.node)}});return new Am(s,this.indexSet_)}removeFromIndexes(e,n){const s=qq(this.indexes_,r=>{if(r===x0)return r;{const i=n.get(e.name);return i?r.remove(new _n(e.name,i)):r}});return new Am(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lA;class wt{static get EMPTY_NODE(){return lA||(lA=new wt(new fu(mhe),null,Am.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&eQe(this.priorityNode_),this.children_.isEmpty()&&De(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lA}updatePriority(e){return this.children_.isEmpty()?this:new wt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?lA:n}}getChild(e){const n=mn(e);return n===null?this:this.getImmediateChild(n).getChild(lr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(De(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new _n(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?lA:this.priorityNode_;return new wt(r,o,i)}}updateChild(e,n){const s=mn(e);if(s===null)return n;{De(mn(e)!==".priority"||cb(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(lr(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(li,(o,a)=>{n[o]=a.val(e),s++,i&&wt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ZKe(this.getPriority().val())+":"),this.forEachChild(li,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":SKe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new _n(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new _n(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new _n(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,_n.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,_n.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===F2?-1:0}withIndex(e){if(e===TS||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new wt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===TS||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(li),r=n.getIterator(li);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===TS?null:this.indexMap_.get(e.toString())}}wt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Cln extends wt{constructor(){super(new fu(mhe),wt.EMPTY_NODE,Am.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}}const F2=new Cln;Object.defineProperties(_n,{MIN:{value:new _n(Kk,wt.EMPTY_NODE)},MAX:{value:new _n(CC,F2)}});JKe.__EMPTY_NODE=wt.EMPTY_NODE;Qo.__childrenNodeConstructor=wt;yln(F2);wln(F2);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iln=!0;function la(t,e=null){if(t===null)return wt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),De(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qo(n,la(e))}if(!(t instanceof Array)&&Iln){const n=[];let s=!1;if(Iu(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=la(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new _n(o,l)))}}),n.length===0)return wt.EMPTY_NODE;const i=aj(n,_ln,o=>o.name,mhe);if(s){const o=aj(n,li.getCompare());return new wt(i,la(e),new Am({".priority":o},{".priority":li}))}else return new wt(i,la(e),Am.Default)}else{let n=wt.EMPTY_NODE;return Iu(t,(s,r)=>{if(G_(t,s)&&s.substring(0,1)!=="."){const i=la(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(la(e))}}vln(la);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sln extends m7{constructor(e){super(),this.indexPath_=e,De(!Rn(e)&&mn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?dR(e.name,n.name):i}makePost(e,n){const s=la(e),r=wt.EMPTY_NODE.updateChild(this.indexPath_,s);return new _n(n,r)}maxPost(){const e=wt.EMPTY_NODE.updateChild(this.indexPath_,F2);return new _n(CC,e)}toString(){return QKe(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kln extends m7{compare(e,n){const s=e.node.compareTo(n.node);return s===0?dR(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,n){const s=la(e);return new _n(n,s)}toString(){return".value"}}const Rln=new kln;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQe(t){return{type:"value",snapshotNode:t}}function Qk(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function RO(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function AO(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Aln(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){De(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(RO(n,a)):De(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Qk(n,s)):o.trackChildChange(AO(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(li,(r,i)=>{n.hasChild(r)||s.trackChildChange(RO(r,i))}),n.isLeafNode()||n.forEachChild(li,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(AO(r,i,o))}else s.trackChildChange(Qk(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?wt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.indexedFilter_=new _he(e.getIndex()),this.index_=e.getIndex(),this.startPost_=PO.getStartPost_(e),this.endPost_=PO.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new _n(n,s))||(s=wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=wt.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(wt.EMPTY_NODE);const i=this;return n.forEachChild(li,(o,a)=>{i.matches(new _n(o,a))||(r=r.updateImmediateChild(o,wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pln{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new PO(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new _n(n,s))||(s=wt.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=wt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=wt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(wt.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;De(a.numChildren()===this.limit_,"");const l=new _n(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(AO(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(RO(n,d));const R=a.updateImmediateChild(n,wt.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(Qk(p.name,p.node)),R.updateImmediateChild(p.name,p.node)):R}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(RO(u.name,u.node)),i.trackChildChange(Qk(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,wt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=li}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return De(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return De(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kk}hasEnd(){return this.endSet_}getIndexEndValue(){return De(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return De(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:CC}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return De(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===li}copy(){const e=new yhe;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Nln(t){return t.loadsAllData()?new _he(t.getIndex()):t.hasLimit()?new Pln(t):new PO(t)}function jke(t){const e={};if(t.isDefault())return e;let n;if(t.index_===li?n="$priority":t.index_===Rln?n="$value":t.index_===TS?n="$key":(De(t.index_ instanceof Sln,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=xo(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=xo(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+xo(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=xo(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+xo(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Bke(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==li&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj extends WKe{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(De(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=M2("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=cj.getListenId_(e,s),a={};this.listens_[o]=a;const l=jke(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),qk(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=cj.getListenId_(e,n);delete this.listens_[s]}get(e){const n=jke(e._queryParams),s=e._path.toString(),r=new jH;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+oR(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=mO(a.responseText)}catch{wu("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&wu("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xln{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(){return{value:null,children:new Map}}function rQe(t,e,n){if(Rn(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=mn(e);t.children.has(s)||t.children.set(s,lj());const r=t.children.get(s);e=lr(e),rQe(r,e,n)}}function jZ(t,e,n){t.value!==null?n(e,t.value):Dln(t,(s,r)=>{const i=new Js(e.toString()+"/"+s);jZ(r,i,n)})}function Dln(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oln{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Iu(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ke=10*1e3,Lln=30*1e3,Mln=300*1e3;class Fln{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Oln(e);const s=$ke+(Lln-$ke)*Math.random();GN(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Iu(e,(r,i)=>{i>0&&G_(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),GN(this.reportStats_.bind(this),Math.floor(Math.random()*2*Mln))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vd;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(vd||(vd={}));function iQe(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vhe(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function whe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=vd.ACK_USER_WRITE,this.source=iQe()}operationForChild(e){if(Rn(this.path)){if(this.affectedTree.value!=null)return De(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Js(e));return new uj(ls(),n,this.revert)}}else return De(mn(this.path)===e,"operationForChild called for unrelated child."),new uj(lr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,n){this.source=e,this.path=n,this.type=vd.LISTEN_COMPLETE}operationForChild(e){return Rn(this.path)?new NO(this.source,ls()):new NO(this.source,lr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=vd.OVERWRITE}operationForChild(e){return Rn(this.path)?new IC(this.source,ls(),this.snap.getImmediateChild(e)):new IC(this.source,lr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=vd.MERGE}operationForChild(e){if(Rn(this.path)){const n=this.children.subtree(new Js(e));return n.isEmpty()?null:n.value?new IC(this.source,ls(),n.value):new xO(this.source,ls(),n)}else return De(mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xO(this.source,lr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rn(e))return this.isFullyInitialized()&&!this.filtered_;const n=mn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vln{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uln(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Aln(o.childName,o.snapshotNode))}),uA(t,r,"child_removed",e,s,n),uA(t,r,"child_added",e,s,n),uA(t,r,"child_moved",i,s,n),uA(t,r,"child_changed",e,s,n),uA(t,r,"value",e,s,n),r}function uA(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>jln(t,a,l)),o.forEach(a=>{const l=qln(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function qln(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function jln(t,e,n){if(e.childName==null||n.childName==null)throw iR("Should only compare child_ events.");const s=new _n(e.childName,e.snapshotNode),r=new _n(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t,e){return{eventCache:t,serverCache:e}}function KN(t,e,n,s){return _7(new lb(e,n,s),t.serverCache)}function oQe(t,e,n,s){return _7(t.eventCache,new lb(e,n,s))}function hj(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function SC(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hK;const Bln=()=>(hK||(hK=new fu(kcn)),hK);class wr{static fromObject(e){let n=new wr(null);return Iu(e,(s,r)=>{n=n.set(new Js(s),r)}),n}constructor(e,n=Bln()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ls(),value:this.value};if(Rn(e))return null;{const s=mn(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(lr(e),n);return i!=null?{path:Oo(new Js(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Rn(e))return this;{const n=mn(e),s=this.children.get(n);return s!==null?s.subtree(lr(e)):new wr(null)}}set(e,n){if(Rn(e))return new wr(n,this.children);{const s=mn(e),i=(this.children.get(s)||new wr(null)).set(lr(e),n),o=this.children.insert(s,i);return new wr(this.value,o)}}remove(e){if(Rn(e))return this.children.isEmpty()?new wr(null):new wr(null,this.children);{const n=mn(e),s=this.children.get(n);if(s){const r=s.remove(lr(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new wr(null):new wr(this.value,i)}else return this}}get(e){if(Rn(e))return this.value;{const n=mn(e),s=this.children.get(n);return s?s.get(lr(e)):null}}setTree(e,n){if(Rn(e))return n;{const s=mn(e),i=(this.children.get(s)||new wr(null)).setTree(lr(e),n);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new wr(this.value,o)}}fold(e){return this.fold_(ls(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Oo(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ls(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Rn(e))return null;{const i=mn(e),o=this.children.get(i);return o?o.findOnPath_(lr(e),Oo(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ls(),n)}foreachOnPath_(e,n,s){if(Rn(e))return this;{this.value&&s(n,this.value);const r=mn(e),i=this.children.get(r);return i?i.foreachOnPath_(lr(e),Oo(n,r),s):new wr(null)}}foreach(e){this.foreach_(ls(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Oo(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.writeTree_=e}static empty(){return new Gd(new wr(null))}}function QN(t,e,n){if(Rn(e))return new Gd(new wr(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=ol(r,e);return i=i.updateChild(o,n),new Gd(t.writeTree_.set(r,i))}else{const r=new wr(n),i=t.writeTree_.setTree(e,r);return new Gd(i)}}}function zke(t,e,n){let s=t;return Iu(n,(r,i)=>{s=QN(s,Oo(e,r),i)}),s}function Hke(t,e){if(Rn(e))return Gd.empty();{const n=t.writeTree_.setTree(e,new wr(null));return new Gd(n)}}function BZ(t,e){return i0(t,e)!=null}function i0(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ol(n.path,e)):null}function Wke(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(li,(s,r)=>{e.push(new _n(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new _n(s,r.value))}),e}function Hv(t,e){if(Rn(e))return t;{const n=i0(t,e);return n!=null?new Gd(new wr(n)):new Gd(t.writeTree_.subtree(e))}}function $Z(t){return t.writeTree_.isEmpty()}function Yk(t,e){return aQe(ls(),t.writeTree_,e)}function aQe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(De(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=aQe(Oo(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Oo(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t,e){return hQe(e,t)}function $ln(t,e,n,s,r){De(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=QN(t.visibleWrites,e,n)),t.lastWriteId=s}function zln(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Hln(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);De(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Wln(a,s.path)?r=!1:yd(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return Gln(t),!0;if(s.snap)t.visibleWrites=Hke(t.visibleWrites,s.path);else{const a=s.children;Iu(a,l=>{t.visibleWrites=Hke(t.visibleWrites,Oo(s.path,l))})}return!0}else return!1}function Wln(t,e){if(t.snap)return yd(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&yd(Oo(t.path,n),e))return!0;return!1}function Gln(t){t.visibleWrites=cQe(t.allWrites,Kln,ls()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Kln(t){return t.visible}function cQe(t,e,n){let s=Gd.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)yd(n,o)?(a=ol(n,o),s=QN(s,a,i.snap)):yd(o,n)&&(a=ol(o,n),s=QN(s,ls(),i.snap.getChild(a)));else if(i.children){if(yd(n,o))a=ol(n,o),s=zke(s,a,i.children);else if(yd(o,n))if(a=ol(o,n),Rn(a))s=zke(s,ls(),i.children);else{const l=qk(i.children,mn(a));if(l){const u=l.getChild(lr(a));s=QN(s,ls(),u)}}}else throw iR("WriteRecord should have .snap or .children")}}return s}function lQe(t,e,n,s,r){if(!s&&!r){const i=i0(t.visibleWrites,e);if(i!=null)return i;{const o=Hv(t.visibleWrites,e);if($Z(o))return n;if(n==null&&!BZ(o,ls()))return null;{const a=n||wt.EMPTY_NODE;return Yk(o,a)}}}else{const i=Hv(t.visibleWrites,e);if(!r&&$Z(i))return n;if(!r&&n==null&&!BZ(i,ls()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(yd(u.path,e)||yd(e,u.path))},a=cQe(t.allWrites,o,e),l=n||wt.EMPTY_NODE;return Yk(a,l)}}}function Qln(t,e,n){let s=wt.EMPTY_NODE;const r=i0(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(li,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Hv(t.visibleWrites,e);return n.forEachChild(li,(o,a)=>{const l=Yk(Hv(i,new Js(o)),a);s=s.updateImmediateChild(o,l)}),Wke(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Hv(t.visibleWrites,e);return Wke(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Yln(t,e,n,s,r){De(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Oo(e,n);if(BZ(t.visibleWrites,i))return null;{const o=Hv(t.visibleWrites,i);return $Z(o)?r.getChild(n):Yk(o,r.getChild(n))}}function Xln(t,e,n,s){const r=Oo(e,n),i=i0(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Hv(t.visibleWrites,r);return Yk(o,s.getNode().getImmediateChild(n))}else return null}function Jln(t,e){return i0(t.visibleWrites,e)}function Zln(t,e,n,s,r,i,o){let a;const l=Hv(t.visibleWrites,e),u=i0(l,ls());if(u!=null)a=u;else if(n!=null)a=Yk(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function eun(){return{visibleWrites:Gd.empty(),allWrites:[],lastWriteId:-1}}function dj(t,e,n,s){return lQe(t.writeTree,t.treePath,e,n,s)}function bhe(t,e){return Qln(t.writeTree,t.treePath,e)}function Gke(t,e,n,s){return Yln(t.writeTree,t.treePath,e,n,s)}function fj(t,e){return Jln(t.writeTree,Oo(t.treePath,e))}function tun(t,e,n,s,r,i){return Zln(t.writeTree,t.treePath,e,n,s,r,i)}function Ehe(t,e,n){return Xln(t.writeTree,t.treePath,e,n)}function uQe(t,e){return hQe(Oo(t.treePath,e),t.writeTree)}function hQe(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nun{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;De(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),De(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,AO(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,RO(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,Qk(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,AO(s,e.snapshotNode,r.oldSnap));else throw iR("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sun{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const dQe=new sun;class The{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new lb(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ehe(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:SC(this.viewCache_),i=tun(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function run(t){return{filter:t}}function iun(t,e){De(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),De(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oun(t,e,n,s,r){const i=new nun;let o,a;if(n.type===vd.OVERWRITE){const u=n;u.source.fromUser?o=zZ(t,e,u.path,u.snap,s,r,i):(De(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Rn(u.path),o=pj(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===vd.MERGE){const u=n;u.source.fromUser?o=cun(t,e,u.path,u.children,s,r,i):(De(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=HZ(t,e,u.path,u.children,s,r,a,i))}else if(n.type===vd.ACK_USER_WRITE){const u=n;u.revert?o=hun(t,e,u.path,s,r,i):o=lun(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===vd.LISTEN_COMPLETE)o=uun(t,e,n.path,s,i);else throw iR("Unknown operation type: "+n.type);const l=i.getChanges();return aun(e,o,l),{viewCache:o,changes:l}}function aun(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=hj(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(sQe(hj(e)))}}function fQe(t,e,n,s,r,i){const o=e.eventCache;if(fj(s,n)!=null)return e;{let a,l;if(Rn(n))if(De(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=SC(e),h=u instanceof wt?u:wt.EMPTY_NODE,d=bhe(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=dj(s,SC(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=mn(n);if(u===".priority"){De(cb(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=Gke(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=lr(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=Gke(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=Ehe(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return KN(e,a,o.isFullyInitialized()||Rn(n),t.filter.filtersNodes())}}function pj(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Rn(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=mn(n);if(!l.isCompleteForPath(n)&&cb(n)>1)return e;const w=lr(n),P=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),P):u=h.updateChild(l.getNode(),m,P,w,dQe,null)}const d=oQe(e,u,l.isFullyInitialized()||Rn(n),h.filtersNodes()),p=new The(r,d,i);return fQe(t,d,n,r,p,a)}function zZ(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new The(r,e,i);if(Rn(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=KN(e,u,!0,t.filter.filtersNodes());else{const d=mn(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=KN(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=lr(n),m=a.getNode().getImmediateChild(d);let w;if(Rn(p))w=s;else{const R=h.getCompleteChild(d);R!=null?KKe(p)===".priority"&&R.getChild(YKe(p)).isEmpty()?w=R:w=R.updateChild(p,s):w=wt.EMPTY_NODE}if(m.equals(w))l=e;else{const R=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=KN(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Kke(t,e){return t.eventCache.isCompleteForChild(e)}function cun(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Oo(n,l);Kke(e,mn(h))&&(a=zZ(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Oo(n,l);Kke(e,mn(h))||(a=zZ(t,a,h,u,r,i,o))}),a}function Qke(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function HZ(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Rn(n)?u=s:u=new wr(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=Qke(t,m,p);l=pj(t,l,new Js(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),R=Qke(t,w,p);l=pj(t,l,new Js(d),R,r,i,o,a)}}),l}function lun(t,e,n,s,r,i,o){if(fj(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Rn(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return pj(t,e,n,l.getNode().getChild(n),r,i,a,o);if(Rn(n)){let u=new wr(null);return l.getNode().forEachChild(TS,(h,d)=>{u=u.set(new Js(h),d)}),HZ(t,e,n,u,r,i,a,o)}else return e}else{let u=new wr(null);return s.foreach((h,d)=>{const p=Oo(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),HZ(t,e,n,u,r,i,a,o)}}function uun(t,e,n,s,r){const i=e.serverCache,o=oQe(e,i.getNode(),i.isFullyInitialized()||Rn(n),i.isFiltered());return fQe(t,o,n,s,dQe,r)}function hun(t,e,n,s,r,i){let o;if(fj(s,n)!=null)return e;{const a=new The(s,e,r),l=e.eventCache.getNode();let u;if(Rn(n)||mn(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=dj(s,SC(e));else{const d=e.serverCache.getNode();De(d instanceof wt,"serverChildren would be complete if leaf node"),h=bhe(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=mn(n);let d=Ehe(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,lr(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,wt.EMPTY_NODE,lr(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=dj(s,SC(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||fj(s,ls())!=null,KN(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dun{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new _he(s.getIndex()),i=Nln(s);this.processor_=run(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(wt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(wt.EMPTY_NODE,a.getNode(),null),h=new lb(l,o.isFullyInitialized(),r.filtersNodes()),d=new lb(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=_7(d,h),this.eventGenerator_=new Vln(this.query_)}get query(){return this.query_}}function fun(t){return t.viewCache_.serverCache.getNode()}function pun(t){return hj(t.viewCache_)}function gun(t,e){const n=SC(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Rn(e)&&!n.getImmediateChild(mn(e)).isEmpty())?n.getChild(e):null}function Yke(t){return t.eventRegistrations_.length===0}function mun(t,e){t.eventRegistrations_.push(e)}function Xke(t,e,n){const s=[];if(n){De(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function Jke(t,e,n,s){e.type===vd.MERGE&&e.source.queryId!==null&&(De(SC(t.viewCache_),"We should always have a full cache before handling merges"),De(hj(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=oun(t.processor_,r,e,n,s);return iun(t.processor_,i.viewCache),De(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,pQe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function _un(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(li,(i,o)=>{s.push(Qk(i,o))}),n.isFullyInitialized()&&s.push(sQe(n.getNode())),pQe(t,s,n.getNode(),e)}function pQe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return Uln(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gj;class gQe{constructor(){this.views=new Map}}function yun(t){De(!gj,"__referenceConstructor has already been defined"),gj=t}function vun(){return De(gj,"Reference.ts has not been loaded"),gj}function wun(t){return t.views.size===0}function Che(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return De(i!=null,"SyncTree gave us an op for an invalid query."),Jke(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(Jke(o,e,n,s));return i}}function mQe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=dj(n,r?s:null),l=!1;a?l=!0:s instanceof wt?(a=bhe(n,s),l=!1):(a=wt.EMPTY_NODE,l=!1);const u=_7(new lb(a,l,!1),new lb(s,r,!1));return new dun(e,u)}return o}function bun(t,e,n,s,r,i){const o=mQe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),mun(o,n),_un(o,n)}function Eun(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=ub(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(Xke(u,n,s)),Yke(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(Xke(l,n,s)),Yke(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!ub(t)&&i.push(new(vun())(e._repo,e._path)),{removed:i,events:o}}function _Qe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Wv(t,e){let n=null;for(const s of t.views.values())n=n||gun(s,e);return n}function yQe(t,e){if(e._queryParams.loadsAllData())return v7(t);{const s=e._queryIdentifier;return t.views.get(s)}}function vQe(t,e){return yQe(t,e)!=null}function ub(t){return v7(t)!=null}function v7(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mj;function Tun(t){De(!mj,"__referenceConstructor has already been defined"),mj=t}function Cun(){return De(mj,"Reference.ts has not been loaded"),mj}let Iun=1;class Zke{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wr(null),this.pendingWriteTree_=eun(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wQe(t,e,n,s,r){return $ln(t.pendingWriteTree_,e,n,s,r),r?U2(t,new IC(iQe(),e,n)):[]}function YE(t,e,n=!1){const s=zln(t.pendingWriteTree_,e);if(Hln(t.pendingWriteTree_,e)){let i=new wr(null);return s.snap!=null?i=i.set(ls(),!0):Iu(s.children,o=>{i=i.set(new Js(o),!0)}),U2(t,new uj(s.path,i,n))}else return[]}function V2(t,e,n){return U2(t,new IC(vhe(),e,n))}function Sun(t,e,n){const s=wr.fromObject(n);return U2(t,new xO(vhe(),e,s))}function kun(t,e){return U2(t,new NO(vhe(),e))}function Run(t,e,n){const s=She(t,n);if(s){const r=khe(s),i=r.path,o=r.queryId,a=ol(i,e),l=new NO(whe(o),a);return Rhe(t,i,l)}else return[]}function _j(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||vQe(o,e))){const l=Eun(o,e,n,s);wun(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>ub(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=Nun(p);for(let w=0;w<m.length;++w){const R=m[w],P=R.query,O=CQe(t,R);t.listenProvider_.startListening(YN(P),DO(t,P),O.hashFn,O.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(YN(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(w7(p));t.listenProvider_.stopListening(YN(p),m)}))}xun(t,u)}return a}function bQe(t,e,n,s){const r=She(t,s);if(r!=null){const i=khe(r),o=i.path,a=i.queryId,l=ol(o,e),u=new IC(whe(a),l,n);return Rhe(t,o,u)}else return[]}function Aun(t,e,n,s){const r=She(t,s);if(r){const i=khe(r),o=i.path,a=i.queryId,l=ol(o,e),u=wr.fromObject(n),h=new xO(whe(a),l,u);return Rhe(t,o,h)}else return[]}function WZ(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=ol(p,r);i=i||Wv(m,w),o=o||ub(m)});let a=t.syncPointTree_.get(r);a?(o=o||ub(a),i=i||Wv(a,ls())):(a=new gQe,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=wt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,w)=>{const R=Wv(w,ls());R&&(i=i.updateImmediateChild(m,R))}));const u=vQe(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=w7(e);De(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=Dun();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=y7(t.pendingWriteTree_,r);let d=bun(a,e,n,h,i,l);if(!u&&!o&&!s){const p=yQe(a,e);d=d.concat(Oun(t,e,p))}return d}function Ihe(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ol(o,e),u=Wv(a,l);if(u)return u});return lQe(r,e,i,n,!0)}function Pun(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=ol(u,n);s=s||Wv(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Wv(r,ls()):(r=new gQe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new lb(s,!0,!1):null,a=y7(t.pendingWriteTree_,e._path),l=mQe(r,e,a,i?o.getNode():wt.EMPTY_NODE,i);return pun(l)}function U2(t,e){return EQe(e,t.syncPointTree_,null,y7(t.pendingWriteTree_,ls()))}function EQe(t,e,n,s){if(Rn(t.path))return TQe(t,e,n,s);{const r=e.get(ls());n==null&&r!=null&&(n=Wv(r,ls()));let i=[];const o=mn(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=uQe(s,o);i=i.concat(EQe(a,l,u,h))}return r&&(i=i.concat(Che(r,t,s,n))),i}}function TQe(t,e,n,s){const r=e.get(ls());n==null&&r!=null&&(n=Wv(r,ls()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=uQe(s,o),h=t.operationForChild(o);h&&(i=i.concat(TQe(h,a,l,u)))}),r&&(i=i.concat(Che(r,t,s,n))),i}function CQe(t,e){const n=e.query,s=DO(t,n);return{hashFn:()=>(fun(e)||wt.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?Run(t,n._path,s):kun(t,n._path);{const i=Pcn(r,n);return _j(t,n,null,i)}}}}function DO(t,e){const n=w7(e);return t.queryToTagMap.get(n)}function w7(t){return t._path.toString()+"$"+t._queryIdentifier}function She(t,e){return t.tagToQueryMap.get(e)}function khe(t){const e=t.indexOf("$");return De(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Js(t.substr(0,e))}}function Rhe(t,e,n){const s=t.syncPointTree_.get(e);De(s,"Missing sync point for query tag that we're tracking");const r=y7(t.pendingWriteTree_,e);return Che(s,n,r,null)}function Nun(t){return t.fold((e,n,s)=>{if(n&&ub(n))return[v7(n)];{let r=[];return n&&(r=_Qe(n)),Iu(s,(i,o)=>{r=r.concat(o)}),r}})}function YN(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Cun())(t._repo,t._path):t}function xun(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=w7(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function Dun(){return Iun++}function Oun(t,e,n){const s=e._path,r=DO(t,e),i=CQe(t,n),o=t.listenProvider_.startListening(YN(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)De(!ub(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!Rn(u)&&h&&ub(h))return[v7(h).query];{let p=[];return h&&(p=p.concat(_Qe(h).map(m=>m.query))),Iu(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(YN(h),DO(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ahe{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ahe(n)}node(){return this.node_}}class Phe{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Oo(this.path_,e);return new Phe(this.syncTree_,n)}node(){return Ihe(this.syncTree_,this.path_)}}const Lun=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},e1e=function(t,e,n){if(!t||typeof t!="object")return t;if(De(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Mun(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Fun(t[".sv"],e);De(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Mun=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:De(!1,"Unexpected server value: "+t)}},Fun=function(t,e,n){t.hasOwnProperty("increment")||De(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&De(!1,"Unexpected increment value: "+s);const r=e.node();if(De(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const o=r.getValue();return typeof o!="number"?s:o+s},Vun=function(t,e,n,s){return Nhe(e,new Phe(n,t),s)},IQe=function(t,e,n){return Nhe(t,new Ahe(e),n)};function Nhe(t,e,n){const s=t.getPriority().val(),r=e1e(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=e1e(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Qo(a,la(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Qo(r))),o.forEachChild(li,(a,l)=>{const u=Nhe(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Dhe(t,e){let n=e instanceof Js?e:new Js(e),s=t,r=mn(n);for(;r!==null;){const i=qk(s.node.children,r)||{children:{},childCount:0};s=new xhe(r,s,i),n=lr(n),r=mn(n)}return s}function pR(t){return t.node.value}function SQe(t,e){t.node.value=e,GZ(t)}function kQe(t){return t.node.childCount>0}function Uun(t){return pR(t)===void 0&&!kQe(t)}function b7(t,e){Iu(t.node.children,(n,s)=>{e(new xhe(n,t,s))})}function RQe(t,e,n,s){n&&e(t),b7(t,r=>{RQe(r,e,!0)})}function qun(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function q2(t){return new Js(t.parent===null?t.name:q2(t.parent)+"/"+t.name)}function GZ(t){t.parent!==null&&jun(t.parent,t.name,t)}function jun(t,e,n){const s=Uun(n),r=G_(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,GZ(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,GZ(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bun=/[\[\].#$\/\u0000-\u001F\u007F]/,$un=/[\[\].#$\u0000-\u001F\u007F]/,dK=10*1024*1024,AQe=function(t){return typeof t=="string"&&t.length!==0&&!Bun.test(t)},PQe=function(t){return typeof t=="string"&&t.length!==0&&!$un.test(t)},zun=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),PQe(t)},Hun=function(t,e,n,s){Ohe(due(t,"value"),e,n)},Ohe=function(t,e,n){const s=n instanceof Js?new lln(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+vE(s));if(typeof e=="function")throw new Error(t+"contains a function "+vE(s)+" with contents = "+e.toString());if(kKe(e))throw new Error(t+"contains "+e.toString()+" "+vE(s));if(typeof e=="string"&&e.length>dK/3&&zH(e)>dK)throw new Error(t+"contains a string greater than "+dK+" utf8 bytes "+vE(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Iu(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!AQe(o)))throw new Error(t+" contains an invalid key ("+o+") "+vE(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uln(s,o),Ohe(t,a,s),hln(s)}),r&&i)throw new Error(t+' contains ".value" child '+vE(s)+" in addition to actual children.")}},NQe=function(t,e,n,s){if(!PQe(n))throw new Error(due(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Wun=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),NQe(t,e,n)},xQe=function(t,e){if(mn(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Gun=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!AQe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zun(n))throw new Error(due(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kun{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lhe(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!phe(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function DQe(t,e,n){Lhe(t,n),OQe(t,s=>phe(s,e))}function Yp(t,e,n){Lhe(t,n),OQe(t,s=>yd(s,e)||yd(e,s))}function OQe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(Qun(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qun(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();WN&&lc("event: "+n.toString()),fR(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yun="repo_interrupt",Xun=25;class Jun{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kun,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lj(),this.transactionQueueTree_=new xhe,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Zun(t,e,n){if(t.stats_=dhe(t.repoInfo_),t.forceRestClient_||Ocn())t.server_=new cj(t.repoInfo_,(s,r,i,o)=>{t1e(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>n1e(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xo(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Fm(t.repoInfo_,e,(s,r,i,o)=>{t1e(t,s,r,i,o)},s=>{n1e(t,s)},s=>{thn(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=Ucn(t.repoInfo_,()=>new Fln(t.stats_,t.server_)),t.infoData_=new xln,t.infoSyncTree_=new Zke({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=V2(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Fhe(t,"connected",!1),t.serverSyncTree_=new Zke({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Yp(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function ehn(t){const n=t.infoData_.getNode(new Js(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Mhe(t){return Lun({timestamp:ehn(t)})}function t1e(t,e,n,s,r){t.dataUpdateCount++;const i=new Js(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=qq(n,u=>la(u));o=Aun(t.serverSyncTree_,i,l,r)}else{const l=la(n);o=bQe(t.serverSyncTree_,i,l,r)}else if(s){const l=qq(n,u=>la(u));o=Sun(t.serverSyncTree_,i,l)}else{const l=la(n);o=V2(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=T7(t,i)),Yp(t.eventQueue_,a,o)}function n1e(t,e){Fhe(t,"connected",e),e===!1&&rhn(t)}function thn(t,e){Iu(e,(n,s)=>{Fhe(t,n,s)})}function Fhe(t,e,n){const s=new Js("/.info/"+e),r=la(n);t.infoData_.updateSnapshot(s,r);const i=V2(t.infoSyncTree_,s,r);Yp(t.eventQueue_,s,i)}function LQe(t){return t.nextWriteId_++}function nhn(t,e,n){const s=Pun(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=la(r).withIndex(e._queryParams.getIndex());WZ(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=V2(t.serverSyncTree_,e._path,i);else{const a=DO(t.serverSyncTree_,e);o=bQe(t.serverSyncTree_,e._path,i,a)}return Yp(t.eventQueue_,e._path,o),_j(t.serverSyncTree_,e,n,null,!0),i},r=>(E7(t,"get for query "+xo(e)+" failed: "+r),Promise.reject(new Error(r))))}function shn(t,e,n,s,r){E7(t,"set",{path:e.toString(),value:n,priority:s});const i=Mhe(t),o=la(n,s),a=Ihe(t.serverSyncTree_,e),l=IQe(o,a,i),u=LQe(t),h=wQe(t.serverSyncTree_,e,l,u,!0);Lhe(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||wu("set at "+e+" failed: "+p);const R=YE(t.serverSyncTree_,u,!w);Yp(t.eventQueue_,e,R),chn(t,r,p,m)});const d=qQe(t,e);T7(t,d),Yp(t.eventQueue_,d,[])}function rhn(t){E7(t,"onDisconnectEvents");const e=Mhe(t),n=lj();jZ(t.onDisconnect_,ls(),(r,i)=>{const o=Vun(r,i,t.serverSyncTree_,e);rQe(n,r,o)});let s=[];jZ(n,ls(),(r,i)=>{s=s.concat(V2(t.serverSyncTree_,r,i));const o=qQe(t,r);T7(t,o)}),t.onDisconnect_=lj(),Yp(t.eventQueue_,ls(),s)}function ihn(t,e,n){let s;mn(e._path)===".info"?s=WZ(t.infoSyncTree_,e,n):s=WZ(t.serverSyncTree_,e,n),DQe(t.eventQueue_,e._path,s)}function ohn(t,e,n){let s;mn(e._path)===".info"?s=_j(t.infoSyncTree_,e,n):s=_j(t.serverSyncTree_,e,n),DQe(t.eventQueue_,e._path,s)}function ahn(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yun)}function E7(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),lc(n,...e)}function chn(t,e,n,s){e&&fR(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function MQe(t,e,n){return Ihe(t.serverSyncTree_,e,n)||wt.EMPTY_NODE}function Vhe(t,e=t.transactionQueueTree_){if(e||C7(t,e),pR(e)){const n=VQe(t,e);De(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&lhn(t,q2(e),n)}else kQe(e)&&b7(e,n=>{Vhe(t,n)})}function lhn(t,e,n){const s=n.map(u=>u.currentWriteId),r=MQe(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];De(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=ol(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{E7(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(YE(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();C7(t,Dhe(t.transactionQueueTree_,e)),Vhe(t,t.transactionQueueTree_),Yp(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)fR(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{wu("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}T7(t,e)}},o)}function T7(t,e){const n=FQe(t,e),s=q2(n),r=VQe(t,n);return uhn(t,r,s),s}function uhn(t,e,n){if(e.length===0)return;const s=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=ol(n,l.path);let h=!1,d;if(De(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,r=r.concat(YE(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Xun)h=!0,d="maxretry",r=r.concat(YE(t.serverSyncTree_,l.currentWriteId,!0));else{const p=MQe(t,l.path,o);l.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){Ohe("transaction failed: Data returned ",m,l.path);let w=la(m);typeof m=="object"&&m!=null&&G_(m,".priority")||(w=w.updatePriority(p.getPriority()));const P=l.currentWriteId,O=Mhe(t),M=IQe(w,p,O);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=M,l.currentWriteId=LQe(t),o.splice(o.indexOf(P),1),r=r.concat(wQe(t.serverSyncTree_,l.path,M,l.currentWriteId,l.applyLocally)),r=r.concat(YE(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",r=r.concat(YE(t.serverSyncTree_,l.currentWriteId,!0))}Yp(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(d),!1,null))))}C7(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)fR(s[a]);Vhe(t,t.transactionQueueTree_)}function FQe(t,e){let n,s=t.transactionQueueTree_;for(n=mn(e);n!==null&&pR(s)===void 0;)s=Dhe(s,n),e=lr(e),n=mn(e);return s}function VQe(t,e){const n=[];return UQe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function UQe(t,e,n){const s=pR(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);b7(e,r=>{UQe(t,r,n)})}function C7(t,e){const n=pR(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,SQe(e,n.length>0?n:void 0)}b7(e,s=>{C7(t,s)})}function qQe(t,e){const n=q2(FQe(t,e)),s=Dhe(t.transactionQueueTree_,e);return qun(s,r=>{fK(t,r)}),fK(t,s),RQe(s,r=>{fK(t,r)}),n}function fK(t,e){const n=pR(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(De(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(De(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(YE(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?SQe(e,void 0):n.length=i+1,Yp(t.eventQueue_,q2(e),r);for(let o=0;o<s.length;o++)fR(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hhn(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function dhn(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):wu(`Invalid query segment '${n}' in query '${t}'`)}return e}const s1e=function(t,e){const n=fhn(t),s=n.namespace;n.domain==="firebase.com"&&A_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&A_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Icn();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new UKe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new Js(n.pathString)}},fhn=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=hhn(t.substring(h,d)));const p=dhn(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phn{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xo(this.snapshot.exportVal())}}class ghn{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return De(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uhe{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Rn(this._path)?null:KKe(this._path)}get ref(){return new K_(this._repo,this._path)}get _queryIdentifier(){const e=Bke(this._queryParams),n=uhe(e);return n==="{}"?"default":n}get _queryObject(){return Bke(this._queryParams)}isEqual(e){if(e=Bs(e),!(e instanceof Uhe))return!1;const n=this._repo===e._repo,s=phe(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+cln(this._path)}}class K_ extends Uhe{constructor(e,n){super(e,n,new yhe,!1)}get parent(){const e=YKe(this._path);return e===null?null:new K_(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class OO{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Js(e),s=KZ(this.ref,e);return new OO(this._node.getChild(n),s,li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new OO(r,KZ(this.ref,s),li)))}hasChild(e){const n=new Js(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sfn(t,e){return t=Bs(t),t._checkNotDeleted("ref"),e!==void 0?KZ(t._root,e):t._root}function KZ(t,e){return t=Bs(t),mn(t._path)===null?Wun("child","path",e):NQe("child","path",e),new K_(t._repo,Oo(t._path,e))}function rfn(t){return xQe("remove",t._path),mhn(t,null)}function mhn(t,e){t=Bs(t),xQe("set",t._path),Hun("set",e,t._path);const n=new jH;return shn(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ifn(t){t=Bs(t);const e=new jQe(()=>{}),n=new I7(e);return nhn(t._repo,t,n).then(s=>new OO(s,new K_(t._repo,t._path),t._queryParams.getIndex()))}class I7{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new phn("value",this,new OO(e.snapshotNode,new K_(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ghn(this,e,n):null}matches(e){return e instanceof I7?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function _hn(t,e,n,s,r){const i=new jQe(n,void 0),o=new I7(i);return ihn(t._repo,t,o),()=>ohn(t._repo,t,o)}function ofn(t,e,n,s){return _hn(t,"value",e)}yun(K_);Tun(K_);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yhn="FIREBASE_DATABASE_EMULATOR_HOST",QZ={};let vhn=!1;function whn(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=ag(i);t.repoInfo_=new UKe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function bhn(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||A_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lc("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=s1e(i,r),a=o.repoInfo,l;typeof process<"u"&&Cke&&(l=Cke[yhn]),l?(i=`http://${l}?ns=${a.namespace}`,o=s1e(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new Mcn(t.name,t.options,e);Gun("Invalid Firebase Database URL",o),Rn(o.path)||A_("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Thn(a,t,u,new Lcn(t,n));return new Chn(h,t)}function Ehn(t,e){const n=QZ[e];(!n||n[t.key]!==t)&&A_(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ahn(t),delete n[t.key]}function Thn(t,e,n,s){let r=QZ[e.name];r||(r={},QZ[e.name]=r);let i=r[t.toURLString()];return i&&A_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Jun(t,vhn,n,s),r[t.toURLString()]=i,i}class Chn{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Zun(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new K_(this._repo,ls())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ehn(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&A_("Cannot call "+e+" on a deleted database.")}}function Ihn(t=WH(),e){const n=I2(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=lue("database");s&&Shn(n,...s)}return n}function Shn(t,e,n,s={}){t=Bs(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&eb(s,i.repoInfo_.emulatorOptions))return;A_("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&A_('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new GV(GV.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:uue(s.mockUserToken,t.app.options.projectId);o=new GV(a)}ag(e)&&(BH(e),$H("Database",!0)),whn(i,r,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function khn(t){vcn(Ob),tb(new C_("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return bhn(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Ah(Ike,Ske,t),Ah(Ike,Ske,"esm2020")}Fm.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fm.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};khn();var nE={};const _o={apiKey:nE.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:nE.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:nE.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:nE.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:nE.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:nE.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:nE.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log(" Firebase  :",{apiKey:_o.apiKey?"":" ",authDomain:_o.authDomain?"":" ",projectId:_o.projectId?"":" ",storageBucket:_o.storageBucket?"":" ",messagingSenderId:_o.messagingSenderId?"":" ",appId:_o.appId?"":" ",databaseURL:_o.databaseURL?"":""});console.log(" Firebase   :",{apiKey:_o.apiKey?`${_o.apiKey.substring(0,10)}...`:"",authDomain:_o.authDomain,projectId:_o.projectId,databaseURL:_o.databaseURL?"":""});(!_o.apiKey||!_o.authDomain||!_o.projectId)&&console.warn(" Firebase   .   .");let si,ni,XE,YZ,XZ;_o.apiKey&&_o.authDomain&&_o.projectId?(si=ZWe(_o),ni=Usn(si),XE=new fm,YZ=JGe(si),XZ=gcn(si),Ihn(si)):(console.warn(" Firebase  .  (,  )    ."),ni=null,XE=null,YZ=null,XZ=null);const afn=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return ni},get db(){return YZ},get firebaseApp(){return si},get googleProvider(){return XE},get storage(){return XZ}},Symbol.toStringTag,{value:"Module"}));function Rhn(){return Rh(RWe)}const gr=Jw(null),vf=Jw(!0),d4=Jw(null);let D0=null,r1e=!1;function Ahn(){const t=Rhn(),e=si?JGe(si):null;e?console.log(" Firestore  "):console.error(" Firestore  ."),si?console.log(" Firebase  "):console.warn(" Firebase  .     .");const n=async l=>{if(!e)throw console.log(" Firestore  ."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("    :",l.email,`( ${h+1}/${u})`);const d=Uon(e,"users",l.uid),p=await mke(d);if(p.exists()){const m=p.data();return console.log("   :",m),await _ke(d,{lastLoginAt:rK()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("    :",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],R=w.includes(l.email||"");console.log("   :",{userEmail:l.email,adminEmails:w,isAdminEmail:R});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:R?"admin":"student",createdAt:rK(),lastLoginAt:rK()};console.log("     :",P),await _ke(d,P),console.log("    :",l.email);const O=await mke(d);if(O.exists())console.log("    :",O.data());else throw console.error("    :   "),new Error("   .");return{...l,role:R?"admin":"student"}}}catch(d){if(h++,console.error(` Firestore   ( ${h}/${u}):`,d),console.error("  :",d.code),console.error("  :",d.message),d.code==="permission-denied")throw console.error(" Firestore  .   ."),console.error("   :",{code:d.code,message:d.message,firebaseApp:!!si,db:!!e,auth:!!ni,userUid:l.uid,userEmail:l.email}),new Error("Firebase   . Firestore   Security Rules    .");if(h<u)console.log(` ${h*1e3}ms  ...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("   .   ."),new Error("    .    .")}return{...l,role:"student"}},s=async()=>{if(!vf.value){vf.value=!0,d4.value=null;try{if(!ni||!XE)throw new Error("Firebase is not configured.");const l=await Knn(ni,XE);console.log(" Google   :",l.user.email);try{if(si&&e)gr.value=await n(l.user),console.log("      :",gr.value.role);else{console.log(" Firebase      ."),gr.value=null,ni&&await iA(ni),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3}),vf.value=!1;return}console.log("      :",{isAuthenticated:!!gr.value,userRole:gr.value?.role,userEmail:gr.value?.email})}catch(u){console.error("      :",u),gr.value=null,ni&&await iA(ni),t.notify({type:"warning",message:"Firebase       .",timeout:5e3}),vf.value=!1;return}vf.value=!1,t.notify({type:"positive",message:" !",timeout:2e3})}catch(l){console.error(" Google   :",l),d4.value=l.message,t.notify({type:"negative",message:"   ."}),vf.value=!1}}},r=async()=>{if(console.log(" useAuth: logout  "),console.log(" useAuth: auth  :",!!ni),!ni){console.log(" useAuth: auth  ");return}try{D0&&(console.log(" useAuth: Firestore  "),D0(),D0=null),console.log(" useAuth: Firebase signOut "),await iA(ni),console.log(" useAuth: Firebase signOut "),gr.value=null,console.log(" useAuth:    "),console.log("  ")}catch(l){console.error(" useAuth:  :",l),t.notify({type:"negative",message:"   ."})}},i=()=>{if(!r1e){if(r1e=!0,console.log(" Firebase   :",{firebaseApp:!!si,auth:!!ni,db:!!e}),!ni){console.log(" Firebase Auth  "),vf.value=!1;return}console.log(" Firebase Auth  "),D0=Rnn(ni,async l=>{if(console.log(" onAuthStateChanged . :",l?l.email:""),l)if(console.log("   :",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),si&&e)try{gr.value=await n(l),console.log("    :",gr.value.role),console.log("    :",{isAuthenticated:!!gr.value,userRole:gr.value?.role,userEmail:gr.value?.email})}catch(u){console.error("    :",u),console.error("  :",u.code),console.error("  :",u.message),gr.value=null,ni&&await iA(ni),d4.value=u.message,t.notify({type:"warning",message:" /     .  .",timeout:5e3}),vf.value=!1;return}else console.log(" Firebase       ."),gr.value=null,ni&&await iA(ni),t.notify({type:"warning",message:"Firebase  .   .",timeout:5e3});else console.log("   "),gr.value=null,console.log("     ");vf.value=!1})}};tue(()=>{D0&&D0()});const o=()=>{console.log("   :",{user:gr.value,isAuthenticated:!!gr.value,userRole:gr.value?.role,firebaseApp:!!si,firestore:!!e})},a=()=>(console.log(" Firebase   :"),console.log("  - Firebase App:",!!si),console.log("  - Firebase Auth:",!!ni),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!XE),si&&console.log("  - Firebase Config:",{apiKey:si.options.apiKey?"":" ",authDomain:si.options.authDomain?"":" ",projectId:si.options.projectId?"":" ",storageBucket:si.options.storageBucket?"":" "}),{firebaseApp:!!si,auth:!!ni,db:!!e,googleProvider:!!XE});return{user:ot(()=>gr.value),loading:ot(()=>vf.value),error:ot(()=>d4.value),isAuthenticated:ot(()=>!!gr.value),displayName:ot(()=>gr.value?.displayName||""),email:ot(()=>gr.value?.email||""),photoURL:ot(()=>gr.value?.photoURL||""),isFirebaseConfigured:ot(()=>!!si),userRole:ot(()=>gr.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const Phn={id:"app"},Nhn=PH({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=Ahn(),o=nen(),a=sen();return Zle(()=>{e()}),LN([n,s,r],([l,u,h])=>{h||(console.log(`  : isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(` : ${a.path}`),i(),l?u==="admin"?(console.log(" .   ."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log(" .   ."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("    .   ."):console.log(" .   ."))}),(l,u)=>{const h=XYt("router-view");return cWe(),AXt("div",Phn,[rl(h)])}}}),xhn=t=>t,Dhn=xhn,Ohn=[{path:"/",component:()=>an(()=>import("./MainLayout-DSP0ZXom.js"),__vite__mapDeps([88,89,90,91,92,93,94,95,96,97,98,99,100,101])),children:[{path:"",component:()=>an(()=>import("./IndexPage-m1sjmIpW.js"),__vite__mapDeps([102,89,90,91,98,103,96,97,104,100,105]))},{path:"survey-results",component:()=>an(()=>import("./SurveyResults-lTkqFsbI.js"),__vite__mapDeps([106,94,91,89,90,93,107,103,108,109]))}]},{path:"/logout",component:()=>an(()=>import("./LogoutPage-BWGCZ8tj.js"),__vite__mapDeps([110,90,91,98,103,92,111]))},{path:"/poll-result",component:()=>an(()=>import("./PollResultPage-ckw46gsk.js"),__vite__mapDeps([112,94,91,103,108,109,113]))},{path:"/study/:courseId",component:()=>an(()=>import("./StudentView-BJb13pMi.js"),__vite__mapDeps([114,89,90,91,93,95,92,96,97,98,94,99,104,103,107,108,109,115])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("   :",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("    :",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>an(()=>import("./ErrorNotFound-D1FLGYfn.js"),[])}],pK=Dhn(function(){return een({scrollBehavior:()=>({left:0,top:0}),routes:Ohn,history:AZt("/")})});async function Lhn(t,e){const n=t(Nhn);n.use(JJt,e);const s=w2(typeof pK=="function"?await pK({}):pK);return{app:n,router:s}}const JZ={xs:18,sm:24,md:32,lg:38,xl:46},qhe={size:String};function jhe(t,e=JZ){return ot(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function Mhn(t,e){return t!==void 0&&t()||e}function cfn(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function $A(t,e){return t!==void 0?e.concat(t()):e}function Fhn(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function lfn(t,e,n,s,r,i){e.key=s+r;const o=Vt(t,e,n);return r===!0?D7e(o,i()):o}const i1e="0 0 24 24",gK=t=>t,mK=t=>`ionicons ${t}`,BQe={"mdi-":t=>`mdi ${t}`,"icon-":gK,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":mK,"ion-ios":mK,"ion-logo":mK,"iconfont ":gK,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":gK},$Qe={o_:"-outlined",r_:"-round",s_:"-sharp"},zQe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Vhn=new RegExp("^("+Object.keys(BQe).join("|")+")"),Uhn=new RegExp("^("+Object.keys($Qe).join("|")+")"),o1e=new RegExp("^("+Object.keys(zQe).join("|")+")"),qhn=/^[Mm]\s?[-+]?\.?\d/,jhn=/^img:/,Bhn=/^svguse:/,$hn=/^ion-/,zhn=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,yj=T2({name:"QIcon",props:{...qhe,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=n0(),s=jhe(t),r=ot(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=ot(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(qhn.test(a)===!0){const[h,d=i1e]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,R]=p.split("@@");return Vt("path",{style:w,d:m,transform:R})})}}if(jhn.test(a)===!0)return{img:!0,src:a.substring(4)};if(Bhn.test(a)===!0){const[h,d=i1e]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(Vhn);if(u!==null)o=BQe[u[1]](a);else if(zhn.test(a)===!0)o=a;else if($hn.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(o1e.test(a)===!0){o="notranslate material-symbols";const h=a.match(o1e);h!==null&&(a=a.substring(6),o+=zQe[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(Uhn);h!==null&&(a=a.substring(2),o+=$Qe[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?Vt(t.tag,o,Mhn(e.default)):i.value.img===!0?Vt(t.tag,o,$A(e.default,[Vt("img",{src:i.value.src})])):i.value.svg===!0?Vt(t.tag,o,$A(e.default,[Vt("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?Vt(t.tag,o,$A(e.default,[Vt("svg",{viewBox:i.value.viewBox},[Vt("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),Vt(t.tag,o,$A(e.default,[i.value.content])))}}}),Hhn=T2({name:"QAvatar",props:{...qhe,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=jhe(t),s=ot(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=ot(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[Vt(yj,{name:t.icon})]:void 0;return Vt("div",{class:s.value,style:n.value},[Vt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},Fhn(e.default,i))])}}}),Whn={size:{type:[String,Number],default:"1em"},color:String};function Ghn(t){return{cSize:ot(()=>t.size in JZ?`${JZ[t.size]}px`:t.size),classes:ot(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const HQe=T2({name:"QSpinner",props:{...Whn,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=Ghn(t);return()=>Vt("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Vt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Khn(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function ufn(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=CT(t);if(e)return e.$el||e}function hfn(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function Qhn(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function a1e(t,e,n,s){n.modifiers.stop===!0&&CWe(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=NJt(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,R=`${(d-m)/2}px`,P=i?R:`${l.left-u-w}px`,O=`${(p-m)/2}px`,M=i?O:`${l.top-h-w}px`;a.className="q-ripple__inner",Khn(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${R},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function c1e(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const Yhn=PJt({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&a1e(r,t,s,r.qKeyEvent===!0)},keystart:Qhn(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&rZ(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&a1e(r,t,s,!0)},300)};c1e(s,e),t.__qripple=s,xJt(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&c1e(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),DJt(e,"main"),delete t._qripple)}}),WQe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Xhn=Object.keys(WQe),Jhn={align:{type:String,validator:t=>Xhn.includes(t)}};function Zhn(t){return ot(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${WQe[e]}`})}function dfn(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function edn(t){return t.appContext.config.globalProperties.$router!==void 0}function ffn(t){return t.isUnmounted===!0||t.isDeactivated===!0}function l1e(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function u1e(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function tdn(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function h1e(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function ndn(t,e){return Array.isArray(t)===!0?h1e(t,e):Array.isArray(e)===!0?h1e(e,t):t===e}function sdn(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(ndn(t[n],e[n])===!1)return!1;return!0}const GQe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},pfn={...GQe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function rdn({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=n0(),{props:s,proxy:r,emit:i}=n,o=edn(n),a=ot(()=>s.disable!==!0&&s.href!==void 0),l=ot(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=ot(()=>l.value===!0?M(s.to):null),h=ot(()=>u.value!==null),d=ot(()=>a.value===!0||h.value===!0),p=ot(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=ot(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=ot(()=>{if(h.value===!1)return-1;const{matched:W}=u.value,{length:J}=W,I=W[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(u1e.bind(null,I));if(y!==-1)return y;const T=l1e(W[J-2]);return J>1&&l1e(I)===T&&v[v.length-1].path!==T?v.findIndex(u1e.bind(null,W[J-2])):y}),R=ot(()=>h.value===!0&&w.value!==-1&&tdn(r.$route.params,u.value.params)),P=ot(()=>R.value===!0&&w.value===r.$route.matched.length-1&&sdn(r.$route.params,u.value.params)),O=ot(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":R.value===!0?` ${s.activeClass}`:"":"");function M(W){try{return r.$router.resolve(W)}catch{}return null}function V(W,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return W.preventDefault(),Promise.resolve(!1);if(W.metaKey||W.altKey||W.ctrlKey||W.shiftKey||W.button!==void 0&&W.button!==0||s.target==="_blank")return Promise.resolve(!1);W.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(W){if(h.value===!0){const J=I=>V(W,I);i("click",W,J),W.defaultPrevented!==!0&&J()}else i("click",W)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:R,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const d1e={none:0,xs:4,sm:8,md:16,lg:24,xl:32},idn={xs:8,sm:10,md:14,lg:20,xl:24},odn=["button","submit","reset"],adn=/[^\s]\/[^\s]/,cdn=["flat","outline","push","unelevated"];function ldn(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const udn={...qhe,...GQe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...cdn.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Jhn.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},hdn={...udn,round:Boolean};function ddn(t){const e=jhe(t,idn),n=Zhn(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=rdn({fallbackTag:"button"}),l=ot(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in d1e?d1e[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),u=ot(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=ot(()=>t.disable!==!0&&t.loading!==!0),d=ot(()=>h.value===!0?t.tabindex||0:-1),p=ot(()=>ldn(t,"standard")),m=ot(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):odn.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&adn.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=ot(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),R=ot(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:R,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:oh}=yC;let O0=null,L0=null,M0=null;const fdn=T2({name:"QBtn",props:{...hdn,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=n0(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=ddn(t),p=Jw(null),m=Jw(null);let w=null,R,P=null;const O=ot(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=ot(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=ot(()=>({center:t.round})),q=ot(()=>{const G=Math.max(0,Math.min(100,t.percentage));return G>0?{transition:"transform 0.6s",transform:`translateX(${G-100}%)`}:{}}),W=ot(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const G={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";G[`onTouchstart${ne}`]=y}return G}return{onClick:N0}}),J=ot(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...W.value}));function I(G){if(p.value!==null){if(G!==void 0){if(G.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){G.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",N0,!0),document.removeEventListener("keyup",ae,oh),p.value?.removeEventListener("blur",ae,oh)};document.addEventListener("keydown",N0,!0),document.addEventListener("keyup",ae,oh),p.value.addEventListener("blur",ae,oh)}}h(G)}}function v(G){p.value!==null&&(n("keydown",G),rZ(G,[13,32])===!0&&L0!==p.value&&(L0!==null&&E(),G.defaultPrevented!==!0&&(G.qAvoidFocus!==!0&&p.value.focus(),L0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,oh)),N0(G)))}function y(G){p.value!==null&&(n("touchstart",G),G.defaultPrevented!==!0&&(O0!==p.value&&(O0!==null&&E(),O0=p.value,w=G.target,w.addEventListener("touchcancel",S,oh),w.addEventListener("touchend",S,oh)),R=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,R=!1},200)))}function T(G){p.value!==null&&(G.qSkipRipple=R===!0,n("mousedown",G),G.defaultPrevented!==!0&&M0!==p.value&&(M0!==null&&E(),M0=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,oh)))}function S(G){if(p.value!==null&&!(G?.type==="blur"&&document.activeElement===p.value)){if(G?.type==="keyup"){if(L0===p.value&&rZ(G,[13,32])===!0){const ne=new MouseEvent("click",G);ne.qKeyEvent=!0,G.defaultPrevented===!0&&sZ(ne),G.cancelBubble===!0&&CWe(ne),p.value.dispatchEvent(ne),N0(G),G.qKeyEvent=!0}n("keyup",G)}E()}}function E(G){const ne=m.value;G!==!0&&(O0===p.value||M0===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),O0===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,oh),w.removeEventListener("touchend",S,oh)),O0=w=null),M0===p.value&&(document.removeEventListener("mouseup",S,oh),M0=null),L0===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,oh),L0=null),p.value?.classList.remove("q-btn--active")}function b(G){N0(G),G.qSkipRipple=!0}return eue(()=>{E(!0)}),Object.assign(s,{click:G=>{d.value===!0&&I(G)}}),()=>{let G=[];t.icon!==void 0&&G.push(Vt(yj,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&G.push(Vt("span",{class:"block"},[t.label])),G=$A(e.default,G),t.iconRight!==void 0&&t.round===!1&&G.push(Vt(yj,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[Vt("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(Vt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Vt("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(Vt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},G)),t.loading!==null&&ne.push(Vt(QXt,{name:"q-transition--fade"},()=>t.loading===!0?[Vt("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Vt(HQe)])]:null)),D7e(Vt(u.value,J.value,ne),[[Yhn,M.value,void 0,V.value]])}}});let pdn=1,gdn=document.body;function mdn(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${pdn++}`:t,Fq.globalNodes!==void 0){const s=Fq.globalNodes.class;s!==void 0&&(n.className=s)}return gdn.appendChild(n),n}function gfn(t){t.remove()}let _dn=0;const KV={},QV={},Bh={},KQe={},ydn=/^\s*$/,QQe=[],vdn=[void 0,null,!0,!1,""],Bhe=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],wdn=["top-left","top-right","bottom-left","bottom-right"],zA={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function YQe(t,e,n){if(!t)return hA("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,KV),fO(t)===!1&&(r.type&&Object.assign(r,zA[r.type]),t={message:t}),Object.assign(r,zA[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=HQe),r.spinner=w2(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:f1e(r.message)||f1e(r.caption)},r.position){if(Bhe.includes(r.position)===!1)return hA("wrong position",t)}else r.position="bottom";if(vdn.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return hA("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(KV.actions)===!0?KV.actions:[]).concat(Array.isArray(zA[t.type]?.actions)===!0?zA[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=Bh[r.position].value.indexOf(n.notif);Bh[r.position].value[l]=r}else{const l=QV[r.meta.group];if(l===void 0){if(r.meta.uid=_dn++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Bh[r.position].value.splice(Math.floor(Bh[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";Bh[r.position].value[u](r)}r.group!==void 0&&(QV[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(wdn.includes(r.badgePosition)===!1)return hA("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=Bh[r.position].value.indexOf(l);Bh[r.position].value[u]=QV[r.meta.group]=r}}const a=()=>{bdn(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?hA("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});YQe(u,e,s)}}}function bdn(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Bh[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete QV[t.meta.group];const n=QQe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}Bh[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function f1e(t){return t!=null&&ydn.test(t)!==!0}function hA(t,e){return console.error(`Notify: ${t}`,e),!1}function Edn(){return T2({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Vt("div",{class:"q-notifications"},Bhe.map(t=>Vt(gJt,{key:t,class:KQe[t],tag:"div",name:`q-notification--${t}`},()=>Bh[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(Vt(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(Vt(yj,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(Vt(Hhn,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Vt("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[Vt("div",a),Vt("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(Vt("div",o,i))}const r=[Vt("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(Vt("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(Vt("div",{class:n.actionsClass},e.actions.map(i=>Vt(fdn,i)))),n.badge>1&&r.push(Vt("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Vt("div",{ref:i=>{QQe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[Vt("div",{class:n.wrapperClass},r)])}))))}})}const Tdn={setDefaults(t){fO(t)===!0&&Object.assign(KV,t)},registerType(t,e){fO(e)===!0&&(zA[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>YQe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Bhe.forEach(s=>{Bh[s]=Jw([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;KQe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=mdn("q-notify");QJt(Edn(),e).mount(n)}}},Cdn={config:{},plugins:{Notify:Tdn}},Idn="/";async function Sdn({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:Idn})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}Lhn(EWe,Cdn).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([an(()=>import("./pinia-DM263rYy.js"),__vite__mapDeps([116,97]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");Sdn(t,r)})});export{Ff as $,xC as A,$O as B,sL as C,RC as D,Zs as E,n1 as F,ML as G,nt as H,AC as I,Vj as J,WO as K,VO as L,t1 as M,mc as N,Zk as O,ah as P,KO as Q,ho as R,PC as S,YL as T,ur as U,qc as V,HO as W,ns as X,Mj as Y,Uj as Z,an as _,zO as a,uh as a$,G3 as a0,W3 as a1,LL as a2,K3 as a3,fb as a4,NT as a5,pu as a6,s1 as a7,qj as a8,KL as a9,JO as aA,zj as aB,XO as aC,Bj as aD,rv as aE,nB as aF,Gj as aG,BL as aH,$L as aI,tm as aJ,vL as aK,lL as aL,oL as aM,fL as aN,gL as aO,uL as aP,yL as aQ,RS as aR,cL as aS,hL as aT,c1 as aU,wL as aV,mL as aW,pL as aX,hh as aY,Jd as aZ,Pu as a_,tL as aa,jO as ab,Jk as ac,Yj as ad,Qj as ae,Yd as af,UO as ag,qO as ah,_m as ai,eT as aj,eL as ak,BO as al,e1 as am,xT as an,jm as ao,ZO as ap,YO as aq,qm as ar,eB as as,bL as at,Y3 as au,MC as av,FC as aw,yn as ax,QO as ay,J3 as az,bd as b,pne as b$,lh as b0,a1 as b1,jT as b2,kL as b3,MS as b4,R3 as b5,FS as b6,BT as b7,M3 as b8,x3 as b9,Ij as bA,kj as bB,UC as bC,$5 as bD,UB as bE,z5 as bF,Zd as bG,st as bH,L_ as bI,fv as bJ,v1 as bK,w1 as bL,bB as bM,IB as bN,sM as bO,pB as bP,ua as bQ,vne as bR,vb as bS,CB as bT,n$ as bU,np as bV,SB as bW,uB as bX,rM as bY,SM as bZ,iu as b_,k3 as ba,sT as bb,O3 as bc,D3 as bd,L3 as be,A3 as bf,QL as bg,WL as bh,GL as bi,Aj as bj,PT as bk,XL as bl,Qd as bm,tB as bn,$j as bo,rB as bp,Wj as bq,qL as br,Z3 as bs,zL as bt,Cj as bu,P_ as bv,Dj as bw,Ri as bx,Qf as by,MO as bz,FL as c,aT as c$,y1 as c0,tM as c1,Ene as c2,X5 as c3,XT as c4,eg as c5,cl as c6,Pne as c7,kne as c8,Ire as c9,xne as cA,Nne as cB,xp as cC,mB as cD,_B as cE,Zy as cF,MI as cG,LB as cH,wB as cI,nM as cJ,zS as cK,uw as cL,OB as cM,NB as cN,lw as cO,Rre as cP,l5 as cQ,Cre as cR,x1 as cS,D1 as cT,An as cU,AB as cV,Sre as cW,DB as cX,Sne as cY,xB as cZ,Cne as c_,_t as ca,H5 as cb,Nre as cc,JL as cd,bne as ce,RB as cf,G5 as cg,Jg as ch,b1 as ci,qB as cj,_1 as ck,mr as cl,B5 as cm,Ere as cn,bre as co,q5 as cp,Tre as cq,qC as cr,$S as cs,Qu as ct,oM as cu,Tne as cv,e$ as cw,MB as cx,vB as cy,eM as cz,xj as d,pae as d$,Pre as d0,Ane as d1,K5 as d2,Q5 as d3,$y as d4,a5 as d5,YB as d6,KB as d7,e5 as d8,n5 as d9,Bse as dA,jse as dB,$se as dC,Nse as dD,t$ as dE,J5 as dF,Z5 as dG,dne as dH,BS as dI,s$ as dJ,Np as dK,Are as dL,Ine as dM,xre as dN,Rne as dO,W5 as dP,kre as dQ,Y5 as dR,tne as dS,yb as dT,gne as dU,$i as dV,xm as dW,hB as dX,nne as dY,une as dZ,O1 as d_,JB as da,o5 as db,Lx as dc,QB as dd,ZB as de,dM as df,c5 as dg,s5 as dh,t5 as di,Kh as dj,Op as dk,fh as dl,Gh as dm,Wh as dn,uM as dp,rk as dq,C5 as dr,zx as ds,Pse as dt,Hx as du,ik as dv,zse as dw,qse as dx,Ase as dy,BI as dz,db as e,Yre as e$,yie as e0,gae as e1,Vp as e2,rt as e3,Cb as e4,fT as e5,PM as e6,NM as e7,eie as e8,iie as e9,hje as eA,u$ as eB,uVe as eC,cie as eD,yae as eE,Ay as eF,xM as eG,vie as eH,kM as eI,Wr as eJ,fae as eK,Xqe as eL,Yqe as eM,dae as eN,Jqe as eO,L1 as eP,aD as eQ,Th as eR,T$ as eS,gVe as eT,Iae as eU,gie as eV,Jre as eW,d$ as eX,PVe as eY,AVe as eZ,i_ as e_,v$ as ea,Kre as eb,Ea as ec,tVe as ed,WC as ee,rie as ef,kae as eg,Om as eh,oie as ei,Vre as ej,w$ as ek,pz as el,Ru as em,L4e as en,RM as eo,f$ as ep,fVe as eq,Eae as er,wk as es,q_ as et,_u as eu,kVe as ev,CVe as ew,eje as ex,Nt as ey,mae as ez,ow as f,Sae as f$,Xre as f0,jE as f1,$P as f2,pie as f3,Zre as f4,m$ as f5,cD as f6,eC as f7,fie as f8,uie as f9,Z6 as fA,Nie as fB,Fie as fC,L$ as fD,Gie as fE,Bie as fF,qie as fG,zf as fH,l_ as fI,Yh as fJ,$f as fK,Bf as fL,O$ as fM,PD as fN,Eoe as fO,p9 as fP,c9e as fQ,g9 as fR,ND as fS,P9e as fT,S9e as fU,a9e as fV,JP as fW,R9e as fX,k9e as fY,A9e as fZ,l9e as f_,ZT as fa,oje as fb,Kie as fc,Zqe as fd,XM as fe,JM as ff,zn as fg,lie as fh,tje as fi,die as fj,vVe as fk,hie as fl,_Ve as fm,KI as fn,lje as fo,SVe as fp,vae as fq,wae as fr,TE as fs,Wie as ft,Die as fu,Sie as fv,Uie as fw,jie as fx,Mie as fy,zie as fz,Pm as g,pE as g$,Tae as g0,Cae as g1,S4e as g2,oD as g3,Rae as g4,r_ as g5,cje as g6,yVe as g7,dje as g8,IVe as g9,xt as gA,OHe as gB,Ab as gC,Yu as gD,bqt as gE,iQt as gF,F3e as gG,Uae as gH,TQt as gI,gc as gJ,i9t as gK,R3e as gL,YHe as gM,Nv as gN,N3e as gO,Eje as gP,Xae as gQ,Mle as gR,ch as gS,S6t as gT,bz as gU,zae as gV,K9t as gW,$He as gX,iO as gY,C9t as gZ,UHe as g_,_ae as ga,ije as gb,bae as gc,JFe as gd,HC as ge,U4e as gf,Fo as gg,Ev as gh,Ure as gi,ZFe as gj,_4e as gk,e2 as gl,xHe as gm,gBe as gn,DHe as go,g_ as gp,at as gq,XC as gr,iS as gs,Sz as gt,kz as gu,u3e as gv,A3e as gw,Yae as gx,Kje as gy,G1 as gz,VL as h,m5e as h$,yqt as h0,Rz as h1,mBe as h2,wz as h3,Gr as h4,NHe as h5,UKt as h6,VKt as h7,PHe as h8,qKt as h9,EH as hA,es as hB,_5e as hC,BKt as hD,H3e as hE,K3e as hF,oqt as hG,G3e as hH,rqt as hI,oQt as hJ,dN as hK,vQt as hL,wqt as hM,qHe as hN,jHe as hO,iI as hP,p5e as hQ,VBe as hR,xBe as hS,e5e as hT,n5e as hU,YBe as hV,h5e as hW,iJ as hX,FBe as hY,XBe as hZ,_ce as h_,n2 as ha,q9 as hb,Vd as hc,Zae as hd,Ek as he,Vw as hf,c3e as hg,i3e as hh,o3e as hi,bI as hj,W3e as hk,gQt as hl,_V as hm,X3e as hn,Bae as ho,l3e as hp,Wae as hq,j9 as hr,Z9t as hs,Q3e as ht,GHe as hu,eBe as hv,Cqt as hw,Tqt as hx,Tk as hy,bH as hz,m1 as i,yj as i$,i5e as i0,t5e as i1,um as i2,jw as i3,Hf as i4,lm as i5,cm as i6,gce as i7,Cq as i8,V$e as i9,pQt as iA,LHe as iB,OUt as iC,W1 as iD,L6t as iE,da as iF,yT as iG,Ije as iH,LUt as iI,r6t as iJ,T2 as iK,n0 as iL,ot as iM,Vt as iN,Mhn as iO,Rh as iP,zdn as iQ,jdn as iR,Bdn as iS,Whn as iT,Ghn as iU,ufn as iV,Khn as iW,qhe as iX,jhe as iY,lfn as iZ,Yhn as i_,SJ as ia,p7t as ib,kJ as ic,Iq as id,MWt as ie,xWt as ig,f7t as ih,AV as ii,OWt as ij,DWt as ik,LWt as il,g7t as im,QHe as io,HHe as ip,WHe as iq,g6t as ir,U9 as is,XHe as it,iqt as iu,Fw as iv,yQt as iw,OQt as ix,vqt as iy,BHe as iz,Lo as j,D7e as j$,Fhn as j0,N0 as j1,PH as j2,AXt as j3,hWe as j4,rl as j5,cWe as j6,fdn as j7,Jw as j8,CWe as j9,VJt as jA,XZ as jB,nfn as jC,Jdn as jD,YZ as jE,Uon as jF,Qdn as jG,rK as jH,efn as jI,Zdn as jJ,tfn as jK,_ke as jL,mke as jM,Xdn as jN,Ydn as jO,pfn as jP,rdn as jQ,rZ as jR,cfn as jS,ts as jT,Ahn as jU,mhn as jV,ifn as jW,Ble as jX,$le as jY,CT as jZ,rfn as j_,bp as ja,MH as jb,sZ as jc,Zle as jd,sen as je,PXt as jf,FYt as jg,Odn as jh,rYt as ji,DXt as jj,nen as jk,Rhn as jl,_C as jm,eue as jn,dO as jo,R7e as jp,yC as jq,LN as jr,OV as js,rR as jt,tue as ju,$A as jv,si as jw,Ihn as jx,ofn as jy,sfn as jz,NC as k,gS as k$,PJt as k0,DJt as k1,qdn as k2,xJt as k3,NJt as k4,Vdn as k5,OJt as k6,BYt as k7,jYt as k8,ffn as k9,gfn as kA,Udn as kB,Jhn as kC,Zhn as kD,v8e as kE,Gy as kF,Ky as kG,fm as kH,vC as kI,Qy as kJ,knn as kK,Nnn as kL,xsn as kM,C8e as kN,vnn as kO,Ztn as kP,oSe as kQ,$nn as kR,_nn as kS,Rnn as kT,Snn as kU,jtn as kV,nnn as kW,Knn as kX,iA as kY,Rdn as kZ,Ta as k_,$dn as ka,fO as kb,Usn as kc,$h as kd,xdn as ke,Hhn as kf,Mdn as kg,QXt as kh,T7e as ki,Ldn as kj,HQe as kk,XYt as kl,zYt as km,hfn as kn,BG as ko,HYt as kp,H7e as kq,edn as kr,WJt as ks,Wdn as kt,Hdn as ku,Fdn as kv,nZ as kw,dfn as kx,Ndn as ky,mdn as kz,lf as l,Pdn as l0,w2 as l1,iYt as l2,Adn as l3,Ddn as l4,kdn as l5,afn as l6,Kj as m,X3 as n,nL as o,pt as p,Nh as q,Hj as r,Xp as s,x_ as t,UL as u,sB as v,Xk as w,LO as x,HL as y,jL as z};
