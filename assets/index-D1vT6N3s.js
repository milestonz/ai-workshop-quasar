const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn.js","assets/QChip-DM6F31S0-CjJFSHfx.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv.js","assets/QLayout-BQ9g_6yu-Chj62EVq.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3.js","assets/QSeparator-BcYH26Md-D4-nJUmN.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc.js","assets/pinia-CUn_f_AT-BAm4BR34.js","assets/QBanner-DKpXtl0l-CoEeIaNs.js","assets/marked.esm-CTrcEICt-BUcm6MtN.js","assets/IndexPage-CFs49cf4-DCFzd5a3.js","assets/QPage-CLbIAi8L-DDHzNr23.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M.js","assets/SurveyResults-DvN0U2_L-LlonMCsx.js","assets/survey-DsL-eoSy-BaL70OSo.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh.js","assets/LogoutPage-CtCownZv-BTcpQEl3.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx.js","assets/StudentView-EHbgIK-q-CI38o4Vo.js","assets/pinia-F5TpqEXP-CcuIgscM.js","assets/MainLayout-DWpWAzPm.js","assets/QDialog-DCVptsUO.js","assets/QChip-nX3S8ibB.js","assets/_plugin-vue_export-helper-CJfoBXcF.js","assets/QLayout-DYpYNAz-.js","assets/use-checkbox-CbTZvoI2.js","assets/QSeparator-BO07bsuT.js","assets/GuestLoginDialog-CSLLp_FG.js","assets/useGuestAuth-B3dUk0QH.js","assets/pinia-CwhW7gbT.js","assets/QBanner-DSaL6E1A.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-ChVohG0P.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-DdKp2QWP.js","assets/QPage-CATcdJAM.js","assets/QSpinnerDots-CW_TS37f.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-Dr3yr6i_.js","assets/survey-C5GwGR2o.js","assets/PollResultBar-CcboJKVZ.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-4UfyfpuW.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-C5no3dXq.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-Yd_YbX30.js","assets/StudentView-B_NZFY6r.css","assets/pinia-BFGcd6GC.js"])))=>i.map(i=>d[i]);
const Oue=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),Due=function(t){return"/"+t},Z6={},Un=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=o(n.map(u=>{if(u=Due(u),u in Z6)return;Z6[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Oue,h||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},fi=(t,e=fi,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV.js","assets/QDialog-CXn2kBax-C53UdG9D.js","assets/QChip-BJIOjoIv-Djywe0kj.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50.js","assets/QLayout-s6SDzMwt-C7GQ1361.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL.js","assets/QSeparator-Chi7pIZw-Dfi-b9On.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu.js","assets/pinia-DRC1X92K-CVhvq81r.js","assets/QBanner-BY0ggvyL-C3yUuPRa.js","assets/marked.esm-mI6KSz_d-CXpNVb3h.js","assets/IndexPage-BLAmILuN-HA-OPItk.js","assets/QPage-B1iJaq8H-BMxUDXKn.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd.js","assets/SurveyResults-DhayuQfj-D0iteWpb.js","assets/survey-DXHWirsQ-BJaxGuvV.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ.js","assets/pinia-CU9SUkzn-Dk66cb7x.js","assets/MainLayout-Bwj2wsFm.js","assets/QDialog-Dn9VjDcM.js","assets/QChip-DM6F31S0.js","assets/_plugin-vue_export-helper-DdgHTl4p.js","assets/QLayout-BQ9g_6yu.js","assets/use-checkbox-ClSmRWjY.js","assets/QSeparator-BcYH26Md.js","assets/GuestLoginDialog-6vHhwSmg.js","assets/useGuestAuth-BRpWhMZD.js","assets/pinia-CUn_f_AT.js","assets/QBanner-DKpXtl0l.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-CTrcEICt.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-CFs49cf4.js","assets/QPage-CLbIAi8L.js","assets/QSpinnerDots-55T99jjC.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DvN0U2_L.js","assets/survey-DsL-eoSy.js","assets/PollResultBar-CeuqJwy4.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-CtCownZv.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-BsZ27FdJ.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-EHbgIK-q.js","assets/StudentView-B_NZFY6r.css","assets/pinia-F5TpqEXP.js"]))=>t.map(s=>n[s]),Lue=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Mue=function(t){return"/"+t},e9={},yr=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=Mue(l),l in e9)return;e9[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Lue,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},Sh=(t,e=Sh,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9.js","assets/QDialog-CXn2kBax.js","assets/QChip-BJIOjoIv.js","assets/_plugin-vue_export-helper-DXafCR7g.js","assets/QLayout-s6SDzMwt.js","assets/use-checkbox-Hdp5Jlzs.js","assets/QSeparator-Chi7pIZw.js","assets/GuestLoginDialog-C7xr6EXW.js","assets/useGuestAuth-Mxd3jo-z.js","assets/pinia-DRC1X92K.js","assets/QBanner-BY0ggvyL.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-mI6KSz_d.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-BLAmILuN.js","assets/QPage-B1iJaq8H.js","assets/QSpinnerDots-DmD6LJEW.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DhayuQfj.js","assets/survey-DXHWirsQ.js","assets/PollResultBar-Bydgm1gR.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-D1GfaPnm.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-B3rDVM-7.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-ZIAbzNqK.js","assets/StudentView-B_NZFY6r.css","assets/pinia-CU9SUkzn.js"]))=>t.map(s=>n[s]),Fue=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Vue=function(t){return"/"+t},t9={},ac=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(l=>{if(l=Vue(l),l in t9)return;t9[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Fue,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zL(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const dn={},mm=[],wc=()=>{},Uue=()=>!1,Ok=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),HL=t=>t.startsWith("onUpdate:"),Hs=Object.assign,WL=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},que=Object.prototype.hasOwnProperty,en=(t,e)=>que.call(t,e),We=Array.isArray,_m=t=>Dk(t)==="[object Map]",S7=t=>Dk(t)==="[object Set]",lt=t=>typeof t=="function",es=t=>typeof t=="string",pf=t=>typeof t=="symbol",Ln=t=>t!==null&&typeof t=="object",k7=t=>(Ln(t)||lt(t))&&lt(t.then)&&lt(t.catch),R7=Object.prototype.toString,Dk=t=>R7.call(t),jue=t=>Dk(t).slice(8,-1),A7=t=>Dk(t)==="[object Object]",KL=t=>es(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Bv=zL(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lk=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Bue=/-(\w)/g,Uo=Lk(t=>t.replace(Bue,(e,n)=>n?n.toUpperCase():"")),$ue=/\B([A-Z])/g,hg=Lk(t=>t.replace($ue,"-$1").toLowerCase()),Mk=Lk(t=>t.charAt(0).toUpperCase()+t.slice(1)),tP=Lk(t=>t?`on${Mk(t)}`:""),Jh=(t,e)=>!Object.is(t,e),nP=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},yx=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},zue=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Hue=t=>{const e=es(t)?Number(t):NaN;return isNaN(e)?t:e};let n9;const Fk=()=>n9||(n9=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function UE(t){if(We(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=es(s)?Que(s):UE(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(es(t)||Ln(t))return t}const Wue=/;(?![^(]*\))/g,Kue=/:([^]+)/,Gue=/\/\*[^]*?\*\//g;function Que(t){const e={};return t.replace(Gue,"").split(Wue).forEach(n=>{if(n){const s=n.split(Kue);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function qE(t){let e="";if(es(t))e=t;else if(We(t))for(let n=0;n<t.length;n++){const s=qE(t[n]);s&&(e+=s+" ")}else if(Ln(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Yue="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xue=zL(Yue);function P7(t){return!!t||t===""}const N7=t=>!!(t&&t.__v_isRef===!0),GL=t=>es(t)?t:t==null?"":We(t)||Ln(t)&&(t.toString===R7||!lt(t.toString))?N7(t)?GL(t.value):JSON.stringify(t,x7,2):String(t),x7=(t,e)=>N7(e)?x7(t,e.value):_m(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[sP(s,i)+" =>"]=r,n),{})}:S7(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>sP(n))}:pf(e)?sP(e):Ln(e)&&!We(e)&&!A7(e)?String(e):e,sP=(t,e="")=>{var n;return pf(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lr;class O7{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lr,!e&&Lr&&(this.index=(Lr.scopes||(Lr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Lr;try{return Lr=this,e()}finally{Lr=n}}}on(){++this._on===1&&(this.prevScope=Lr,Lr=this)}off(){this._on>0&&--this._on===0&&(Lr=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function D7(t){return new O7(t)}function QL(){return Lr}function L7(t,e=!1){Lr&&Lr.cleanups.push(t)}let En;const rP=new WeakSet;class M7{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lr&&Lr.active&&Lr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rP.has(this)&&(rP.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||V7(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,s9(this),U7(this);const e=En,n=Ia;En=this,Ia=!0;try{return this.fn()}finally{q7(this),En=e,Ia=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)JL(e);this.deps=this.depsTail=void 0,s9(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rP.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){vx(this)&&this.run()}get dirty(){return vx(this)}}let F7=0,$v,zv;function V7(t,e=!1){if(t.flags|=8,e){t.next=zv,zv=t;return}t.next=$v,$v=t}function YL(){F7++}function XL(){if(--F7>0)return;if(zv){let e=zv;for(zv=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;$v;){let e=$v;for($v=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function U7(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function q7(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),JL(s),Jue(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function vx(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(j7(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function j7(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rb)||(t.globalVersion=rb,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!vx(t))))return;t.flags|=2;const e=t.dep,n=En,s=Ia;En=t,Ia=!0;try{U7(t);const r=t.fn(t._value);(e.version===0||Jh(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{En=n,Ia=s,q7(t),t.flags&=-3}}function JL(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)JL(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Jue(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ia=!0;const B7=[];function Ul(){B7.push(Ia),Ia=!1}function ql(){const t=B7.pop();Ia=t===void 0?!0:t}function s9(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=En;En=void 0;try{e()}finally{En=n}}}let rb=0;class Zue{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ZL{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!En||!Ia||En===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==En)n=this.activeLink=new Zue(En,this),En.deps?(n.prevDep=En.depsTail,En.depsTail.nextDep=n,En.depsTail=n):En.deps=En.depsTail=n,$7(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=En.depsTail,n.nextDep=void 0,En.depsTail.nextDep=n,En.depsTail=n,En.deps===n&&(En.deps=s)}return n}trigger(e){this.version++,rb++,this.notify(e)}notify(e){YL();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{XL()}}}function $7(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)$7(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const GI=new WeakMap,_p=Symbol(""),wx=Symbol(""),ib=Symbol("");function jr(t,e,n){if(Ia&&En){let s=GI.get(t);s||GI.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new ZL),r.map=s,r.key=n),r.track()}}function ml(t,e,n,s,r,i){const o=GI.get(t);if(!o){rb++;return}const a=l=>{l&&l.trigger()};if(YL(),e==="clear")o.forEach(a);else{const l=We(t),u=l&&KL(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===ib||!pf(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ib)),e){case"add":l?u&&a(o.get("length")):(a(o.get(_p)),_m(t)&&a(o.get(wx)));break;case"delete":l||(a(o.get(_p)),_m(t)&&a(o.get(wx)));break;case"set":_m(t)&&a(o.get(_p));break}}XL()}function ehe(t,e){const n=GI.get(t);return n&&n.get(e)}function kg(t){const e=qt(t);return e===t?e:(jr(e,"iterate",ib),No(t)?e:e.map(vr))}function Vk(t){return jr(t=qt(t),"iterate",ib),t}const the={__proto__:null,[Symbol.iterator](){return iP(this,Symbol.iterator,vr)},concat(...t){return kg(this).concat(...t.map(e=>We(e)?kg(e):e))},entries(){return iP(this,"entries",t=>(t[1]=vr(t[1]),t))},every(t,e){return rl(this,"every",t,e,void 0,arguments)},filter(t,e){return rl(this,"filter",t,e,n=>n.map(vr),arguments)},find(t,e){return rl(this,"find",t,e,vr,arguments)},findIndex(t,e){return rl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return rl(this,"findLast",t,e,vr,arguments)},findLastIndex(t,e){return rl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return rl(this,"forEach",t,e,void 0,arguments)},includes(...t){return oP(this,"includes",t)},indexOf(...t){return oP(this,"indexOf",t)},join(t){return kg(this).join(t)},lastIndexOf(...t){return oP(this,"lastIndexOf",t)},map(t,e){return rl(this,"map",t,e,void 0,arguments)},pop(){return zy(this,"pop")},push(...t){return zy(this,"push",t)},reduce(t,...e){return r9(this,"reduce",t,e)},reduceRight(t,...e){return r9(this,"reduceRight",t,e)},shift(){return zy(this,"shift")},some(t,e){return rl(this,"some",t,e,void 0,arguments)},splice(...t){return zy(this,"splice",t)},toReversed(){return kg(this).toReversed()},toSorted(t){return kg(this).toSorted(t)},toSpliced(...t){return kg(this).toSpliced(...t)},unshift(...t){return zy(this,"unshift",t)},values(){return iP(this,"values",vr)}};function iP(t,e,n){const s=Vk(t),r=s[e]();return s!==t&&!No(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const nhe=Array.prototype;function rl(t,e,n,s,r,i){const o=Vk(t),a=o!==t&&!No(t),l=o[e];if(l!==nhe[e]){const d=l.apply(t,i);return a?vr(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,vr(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function r9(t,e,n,s){const r=Vk(t);let i=n;return r!==t&&(No(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,vr(a),l,t)}),r[e](i,...s)}function oP(t,e,n){const s=qt(t);jr(s,"iterate",ib);const r=s[e](...n);return(r===-1||r===!1)&&nM(n[0])?(n[0]=qt(n[0]),s[e](...n)):r}function zy(t,e,n=[]){Ul(),YL();const s=qt(t)[e].apply(t,n);return XL(),ql(),s}const she=zL("__proto__,__v_isRef,__isVue"),z7=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pf));function rhe(t){pf(t)||(t=String(t));const e=qt(this);return jr(e,"has",t),e.hasOwnProperty(t)}class H7{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?phe:Q7:i?G7:K7).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=We(e);if(!r){let l;if(o&&(l=the[n]))return l;if(n==="hasOwnProperty")return rhe}const a=Reflect.get(e,n,Bs(e)?e:s);return(pf(n)?z7.has(n):she(n))||(r||jr(e,"get",n),i)?a:Bs(a)?o&&KL(n)?a:a.value:Ln(a)?r?Y7(a):gf(a):a}}class W7 extends H7{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Cd(i);if(!No(s)&&!Cd(s)&&(i=qt(i),s=qt(s)),!We(e)&&Bs(i)&&!Bs(s))return l?!1:(i.value=s,!0)}const o=We(e)&&KL(n)?Number(n)<e.length:en(e,n),a=Reflect.set(e,n,s,Bs(e)?e:r);return e===qt(r)&&(o?Jh(s,i)&&ml(e,"set",n,s):ml(e,"add",n,s)),a}deleteProperty(e,n){const s=en(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&ml(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!pf(n)||!z7.has(n))&&jr(e,"has",n),s}ownKeys(e){return jr(e,"iterate",We(e)?"length":_p),Reflect.ownKeys(e)}}class ihe extends H7{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ohe=new W7,ahe=new ihe,che=new W7(!0),bx=t=>t,ZT=t=>Reflect.getPrototypeOf(t);function lhe(t,e,n){return function(...s){const r=this.__v_raw,i=qt(r),o=_m(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?bx:e?QI:vr;return!e&&jr(i,"iterate",l?wx:_p),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function eC(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function uhe(t,e){const n={get(s){const r=this.__v_raw,i=qt(r),o=qt(s);t||(Jh(s,o)&&jr(i,"get",s),jr(i,"get",o));const{has:a}=ZT(i),l=e?bx:t?QI:vr;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&jr(qt(s),"iterate",_p),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=qt(r),o=qt(s);return t||(Jh(s,o)&&jr(i,"has",s),jr(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=qt(o),l=e?bx:t?QI:vr;return!t&&jr(a,"iterate",_p),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return Hs(n,t?{add:eC("add"),set:eC("set"),delete:eC("delete"),clear:eC("clear")}:{add(s){!e&&!No(s)&&!Cd(s)&&(s=qt(s));const r=qt(this);return ZT(r).has.call(r,s)||(r.add(s),ml(r,"add",s,s)),this},set(s,r){!e&&!No(r)&&!Cd(r)&&(r=qt(r));const i=qt(this),{has:o,get:a}=ZT(i);let l=o.call(i,s);l||(s=qt(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?Jh(r,u)&&ml(i,"set",s,r):ml(i,"add",s,r),this},delete(s){const r=qt(this),{has:i,get:o}=ZT(r);let a=i.call(r,s);a||(s=qt(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&ml(r,"delete",s,void 0),l},clear(){const s=qt(this),r=s.size!==0,i=s.clear();return r&&ml(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=lhe(s,t,e)}),n}function eM(t,e){const n=uhe(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(en(n,r)&&r in s?n:s,r,i)}const hhe={get:eM(!1,!1)},dhe={get:eM(!1,!0)},fhe={get:eM(!0,!1)},K7=new WeakMap,G7=new WeakMap,Q7=new WeakMap,phe=new WeakMap;function ghe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mhe(t){return t.__v_skip||!Object.isExtensible(t)?0:ghe(jue(t))}function gf(t){return Cd(t)?t:tM(t,!1,ohe,hhe,K7)}function Uk(t){return tM(t,!1,che,dhe,G7)}function Y7(t){return tM(t,!0,ahe,fhe,Q7)}function tM(t,e,n,s,r){if(!Ln(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=mhe(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Zh(t){return Cd(t)?Zh(t.__v_raw):!!(t&&t.__v_isReactive)}function Cd(t){return!!(t&&t.__v_isReadonly)}function No(t){return!!(t&&t.__v_isShallow)}function nM(t){return t?!!t.__v_raw:!1}function qt(t){const e=t&&t.__v_raw;return e?qt(e):t}function dg(t){return!en(t,"__v_skip")&&Object.isExtensible(t)&&yx(t,"__v_skip",!0),t}const vr=t=>Ln(t)?gf(t):t,QI=t=>Ln(t)?Y7(t):t;function Bs(t){return t?t.__v_isRef===!0:!1}function Uc(t){return X7(t,!1)}function _he(t){return X7(t,!0)}function X7(t,e){return Bs(t)?t:new yhe(t,e)}class yhe{constructor(e,n){this.dep=new ZL,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:qt(e),this._value=n?e:vr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||No(e)||Cd(e);e=s?e:qt(e),Jh(e,n)&&(this._rawValue=e,this._value=s?e:vr(e),this.dep.trigger())}}function Ll(t){return Bs(t)?t.value:t}const vhe={get:(t,e,n)=>e==="__v_raw"?t:Ll(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Bs(r)&&!Bs(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function J7(t){return Zh(t)?t:new Proxy(t,vhe)}function Z7(t){const e=We(t)?new Array(t.length):{};for(const n in t)e[n]=bhe(t,n);return e}class whe{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ehe(qt(this._object),this._key)}}function bhe(t,e,n){const s=t[e];return Bs(s)?s:new whe(t,e,n)}class Ehe{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ZL(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&En!==this)return V7(this,!0),!0}get value(){const e=this.dep.track();return j7(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function The(t,e,n=!1){let s,r;return lt(t)?s=t:(s=t.get,r=t.set),new Ehe(s,r,n)}const tC={},YI=new WeakMap;let qf;function Che(t,e=!1,n=qf){if(n){let s=YI.get(n);s||YI.set(n,s=[]),s.push(t)}}function Ihe(t,e,n=dn){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:No(q)||r===!1||r===0?_l(q,1):_l(q);let h,d,p,m,w=!1,k=!1;if(Bs(t)?(d=()=>t.value,w=No(t)):Zh(t)?(d=()=>u(t),w=!0):We(t)?(k=!0,w=t.some(q=>Zh(q)||No(q)),d=()=>t.map(q=>{if(Bs(q))return q.value;if(Zh(q))return u(q);if(lt(q))return l?l(q,2):q()})):lt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Ul();try{p()}finally{ql()}}const q=qf;qf=h;try{return l?l(t,3,[m]):t(m)}finally{qf=q}}:d=wc,e&&r){const q=d,H=r===!0?1/0:r;d=()=>_l(q(),H)}const P=QL(),D=()=>{h.stop(),P&&P.active&&WL(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),D()}}let M=k?new Array(t.length).fill(tC):tC;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((X,I)=>Jh(X,M[I])):Jh(H,M))){p&&p();const X=qf;qf=h;try{const I=[H,M===tC?void 0:k&&M[0]===tC?[]:M,m];M=H,l?l(e,3,I):e(...I)}finally{qf=X}}}else h.run()};return a&&a(V),h=new M7(d),h.scheduler=o?()=>o(V,!1):V,m=q=>Che(q,!1,h),p=h.onStop=()=>{const q=YI.get(h);if(q){if(l)l(q,4);else for(const H of q)H();YI.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function _l(t,e=1/0,n){if(e<=0||!Ln(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Bs(t))_l(t.value,e,n);else if(We(t))for(let s=0;s<t.length;s++)_l(t[s],e,n);else if(S7(t)||_m(t))t.forEach(s=>{_l(s,e,n)});else if(A7(t)){for(const s in t)_l(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&_l(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jE(t,e,n,s){try{return s?t(...s):t()}catch(r){qk(r,e,n)}}function Ba(t,e,n,s){if(lt(t)){const r=jE(t,e,n,s);return r&&k7(r)&&r.catch(i=>{qk(i,e,n)}),r}if(We(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Ba(t[i],e,n,s));return r}}function qk(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||dn;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){Ul(),jE(i,null,10,[t,l,u]),ql();return}}She(t,n,r,s,o)}function She(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const pi=[];let sc=-1;const ym=[];let kh=null,Wg=0;const e8=Promise.resolve();let XI=null;function jk(t){const e=XI||e8;return t?e.then(this?t.bind(this):t):e}function khe(t){let e=sc+1,n=pi.length;for(;e<n;){const s=e+n>>>1,r=pi[s],i=ob(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function sM(t){if(!(t.flags&1)){const e=ob(t),n=pi[pi.length-1];!n||!(t.flags&2)&&e>=ob(n)?pi.push(t):pi.splice(khe(e),0,t),t.flags|=1,t8()}}function t8(){XI||(XI=e8.then(s8))}function Rhe(t){We(t)?ym.push(...t):kh&&t.id===-1?kh.splice(Wg+1,0,t):t.flags&1||(ym.push(t),t.flags|=1),t8()}function i9(t,e,n=sc+1){for(;n<pi.length;n++){const s=pi[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;pi.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function n8(t){if(ym.length){const e=[...new Set(ym)].sort((n,s)=>ob(n)-ob(s));if(ym.length=0,kh){kh.push(...e);return}for(kh=e,Wg=0;Wg<kh.length;Wg++){const n=kh[Wg];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}kh=null,Wg=0}}const ob=t=>t.id==null?t.flags&2?-1:1/0:t.id;function s8(t){try{for(sc=0;sc<pi.length;sc++){const e=pi[sc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),jE(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;sc<pi.length;sc++){const e=pi[sc];e&&(e.flags&=-2)}sc=-1,pi.length=0,n8(),XI=null,(pi.length||ym.length)&&s8()}}let ho=null,r8=null;function JI(t){const e=ho;return ho=t,r8=t&&t.type.__scopeId||null,e}function rM(t,e=ho,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&v9(-1);const i=JI(e);let o;try{o=t(...r)}finally{JI(i),s._d&&v9(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Bk(t,e){if(ho===null)return t;const n=Yk(ho),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=dn]=e[r];i&&(lt(i)&&(i={mounted:i,updated:i}),i.deep&&_l(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Rf(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Ul(),Ba(l,n,8,[t.el,a,t,e]),ql())}}const i8=Symbol("_vte"),o8=t=>t.__isTeleport,Hv=t=>t&&(t.disabled||t.disabled===""),o9=t=>t&&(t.defer||t.defer===""),a9=t=>typeof SVGElement<"u"&&t instanceof SVGElement,c9=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ex=(t,e)=>{const n=t&&t.to;return es(n)?e?e(n):null:n},a8={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=u,D=Hv(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),X=e.anchor=k("");m(H,n,s),m(X,n,s);const I=(y,C)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,C,r,i,o,a,l))},v=()=>{const y=e.target=Ex(e.props,w),C=l8(y,e,k,m);y&&(o!=="svg"&&a9(y)?o="svg":o!=="mathml"&&c9(y)&&(o="mathml"),D||(I(y,C),KC(e,!1)))};D&&(I(n,X),KC(e,!0)),o9(e.props)?(e.el.__isMounted=!1,ui(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(o9(e.props)&&t.el.__isMounted===!1){ui(()=>{a8.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,X=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=Hv(t.props),y=v?n:X,C=v?H:I;if(o==="svg"||a9(X)?o="svg":(o==="mathml"||c9(X))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),fM(t,e,!0)):l||d(t,e,y,C,r,i,o,a,!1),D)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):nC(e,n,H,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=Ex(e.props,w);S&&nC(e,S,null,u,0)}else v&&nC(e,X,I,u,1);KC(e,D)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!Hv(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:nC,hydrate:Ahe};function nC(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||Hv(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function Ahe(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=Ex(e.props,l);if(p){const m=Hv(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||l8(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}KC(e,m)}return e.anchor&&o(e.anchor)}const c8=a8;function KC(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function l8(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[i8]=i,t&&(s(r,t),s(i,t)),i}const Rh=Symbol("_leaveCb"),sC=Symbol("_enterCb");function u8(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return BE(()=>{t.isMounted=!0}),$E(()=>{t.isUnmounting=!0}),t}const bo=[Function,Array],h8={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bo,onEnter:bo,onAfterEnter:bo,onEnterCancelled:bo,onBeforeLeave:bo,onLeave:bo,onAfterLeave:bo,onLeaveCancelled:bo,onBeforeAppear:bo,onAppear:bo,onAfterAppear:bo,onAppearCancelled:bo},d8=t=>{const e=t.subTree;return e.component?d8(e.component):e},Phe={name:"BaseTransition",props:h8,setup(t,{slots:e}){const n=pu(),s=u8();return()=>{const r=e.default&&iM(e.default(),!0);if(!r||!r.length)return;const i=f8(r),o=qt(t),{mode:a}=o;if(s.isLeaving)return aP(i);const l=l9(i);if(!l)return aP(i);let u=ab(l,o,s,n,d=>u=d);l.type!==_i&&Lp(l,u);let h=n.subTree&&l9(n.subTree);if(h&&h.type!==_i&&!Xf(l,h)&&d8(n).type!==_i){let d=ab(h,o,s,n);if(Lp(h,d),a==="out-in"&&l.type!==_i)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},aP(i);a==="in-out"&&l.type!==_i?d.delayLeave=(p,m,w)=>{const k=p8(s,h);k[String(h.key)]=h,p[Rh]=()=>{m(),p[Rh]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function f8(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==_i){e=n;break}}return e}const Nhe=Phe;function p8(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function ab(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:D,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=p8(n,t),X=(y,C)=>{y&&Ba(y,s,9,C)},I=(y,C)=>{const S=C[1];X(y,C),We(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let C=l;if(!n.isMounted)if(i)C=P||l;else return;y[Rh]&&y[Rh](!0);const S=H[q];S&&Xf(t,S)&&S.el[Rh]&&S.el[Rh](),X(C,[y])},enter(y){let C=u,S=h,E=d;if(!n.isMounted)if(i)C=D||u,S=M||h,E=V||d;else return;let b=!1;const K=y[sC]=ne=>{b||(b=!0,ne?X(E,[y]):X(S,[y]),v.delayedLeave&&v.delayedLeave(),y[sC]=void 0)};C?I(C,[y,K]):K()},leave(y,C){const S=String(t.key);if(y[sC]&&y[sC](!0),n.isUnmounting)return C();X(p,[y]);let E=!1;const b=y[Rh]=K=>{E||(E=!0,C(),K?X(k,[y]):X(w,[y]),y[Rh]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const C=ab(y,e,n,s,r);return r&&r(C),C}};return v}function aP(t){if($k(t))return t=Id(t),t.children=null,t}function l9(t){if(!$k(t))return o8(t.type)&&t.children?f8(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&lt(n.default))return n.default()}}function Lp(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Lp(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function iM(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ao?(o.patchFlag&128&&r++,s=s.concat(iM(o.children,e,a))):(e||o.type!==_i)&&s.push(a!=null?Id(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function q_(t,e){return lt(t)?Hs({name:t.name},e,{setup:t}):t}function g8(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Wv(t,e,n,s,r=!1){if(We(t)){t.forEach((w,k)=>Wv(w,e&&(We(e)?e[k]:e),n,s,r));return}if(Kv(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Wv(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Yk(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===dn?a.refs={}:a.refs,d=a.setupState,p=qt(d),m=d===dn?()=>!1:w=>en(p,w);if(u!=null&&u!==l&&(es(u)?(h[u]=null,m(u)&&(d[u]=null)):Bs(u)&&(u.value=null)),lt(l))jE(l,a,12,[o,h]);else{const w=es(l),k=Bs(l);if(w||k){const P=()=>{if(t.f){const D=w?m(l)?d[l]:h[l]:l.value;r?We(D)&&WL(D,i):We(D)?D.includes(i)||D.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):k&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,ui(P,n)):P()}}}Fk().requestIdleCallback;Fk().cancelIdleCallback;const Kv=t=>!!t.type.__asyncLoader,$k=t=>t.type.__isKeepAlive;function oM(t,e){m8(t,"a",e)}function aM(t,e){m8(t,"da",e)}function m8(t,e,n=Yr){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(zk(e,s,n),n){let r=n.parent;for(;r&&r.parent;)$k(r.parent.vnode)&&xhe(s,e,n,r),r=r.parent}}function xhe(t,e,n,s){const r=zk(e,t,s,!0);zE(()=>{WL(s[e],r)},n)}function zk(t,e,n=Yr,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ul();const a=HE(n),l=Ba(e,n,t,o);return a(),ql(),l});return s?r.unshift(i):r.push(i),i}}const fu=t=>(e,n=Yr)=>{(!lb||t==="sp")&&zk(t,(...s)=>e(...s),n)},cM=fu("bm"),BE=fu("m"),lM=fu("bu"),Hk=fu("u"),$E=fu("bum"),zE=fu("um"),Ohe=fu("sp"),Dhe=fu("rtg"),Lhe=fu("rtc");function Mhe(t,e=Yr){zk("ec",t,e)}const Fhe="components";function uM(t,e){return Uhe(Fhe,t,!0,e)||t}const Vhe=Symbol.for("v-ndc");function Uhe(t,e,n=!0,s=!1){const r=ho||Yr;if(r){const i=r.type;{const a=Ide(i,!1);if(a&&(a===e||a===Uo(e)||a===Mk(Uo(e))))return i}const o=u9(r[t]||i[t],e)||u9(r.appContext[t],e);return!o&&s?i:o}}function u9(t,e){return t&&(t[e]||t[Uo(e)]||t[Mk(Uo(e))])}function _8(t,e,n,s){let r;const i=n,o=We(t);if(o||es(t)){const a=o&&Zh(t);let l=!1,u=!1;a&&(l=!No(t),u=Cd(t),t=Vk(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?QI(vr(t[h])):vr(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ln(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const Tx=t=>t?V8(t)?Yk(t):Tx(t.parent):null,Gv=Hs(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Tx(t.parent),$root:t=>Tx(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>v8(t),$forceUpdate:t=>t.f||(t.f=()=>{sM(t.update)}),$nextTick:t=>t.n||(t.n=jk.bind(t.proxy)),$watch:t=>ode.bind(t)}),cP=(t,e)=>t!==dn&&!t.__isScriptSetup&&en(t,e),qhe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(cP(s,e))return o[e]=1,s[e];if(r!==dn&&en(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&en(u,e))return o[e]=3,i[e];if(n!==dn&&en(n,e))return o[e]=4,n[e];Cx&&(o[e]=0)}}const h=Gv[e];let d,p;if(h)return e==="$attrs"&&jr(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==dn&&en(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,en(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return cP(r,e)?(r[e]=n,!0):s!==dn&&en(s,e)?(s[e]=n,!0):en(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==dn&&en(t,o)||cP(e,o)||(a=i[0])&&en(a,o)||en(s,o)||en(Gv,o)||en(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:en(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function h9(t){return We(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Cx=!0;function jhe(t){const e=v8(t),n=t.proxy,s=t.ctx;Cx=!1,e.beforeCreate&&d9(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:D,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:X,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:C,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(u&&Bhe(u,s,null),o)for(const de in o){const ce=o[de];lt(ce)&&(s[de]=ce.bind(n))}if(r){const de=r.call(n,n);Ln(de)&&(t.data=gf(de))}if(Cx=!0,i)for(const de in i){const ce=i[de],we=lt(ce)?ce.bind(n,n):lt(ce.get)?ce.get.bind(n,n):wc,Ht=!lt(ce)&&lt(ce.set)?ce.set.bind(n):wc,It=Ne({get:we,set:Ht});Object.defineProperty(s,de,{enumerable:!0,configurable:!0,get:()=>It.value,set:xt=>It.value=xt})}if(a)for(const de in a)y8(a[de],s,n,de);if(l){const de=lt(l)?l.call(n):l;Reflect.ownKeys(de).forEach(ce=>{vm(ce,de[ce])})}h&&d9(h,t,"c");function ne(de,ce){We(ce)?ce.forEach(we=>de(we.bind(n))):ce&&de(ce.bind(n))}if(ne(cM,d),ne(BE,p),ne(lM,m),ne(Hk,w),ne(oM,k),ne(aM,P),ne(Mhe,v),ne(Lhe,X),ne(Dhe,I),ne($E,M),ne(zE,q),ne(Ohe,y),We(C))if(C.length){const de=t.exposed||(t.exposed={});C.forEach(ce=>{Object.defineProperty(de,ce,{get:()=>n[ce],set:we=>n[ce]=we,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===wc&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&g8(t)}function Bhe(t,e,n=wc){We(t)&&(t=Ix(t));for(const s in t){const r=t[s];let i;Ln(r)?"default"in r?i=Ji(r.from||s,r.default,!0):i=Ji(r.from||s):i=Ji(r),Bs(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function d9(t,e,n){Ba(We(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function y8(t,e,n,s){let r=s.includes(".")?x8(n,s):()=>n[s];if(es(t)){const i=e[t];lt(i)&&vp(r,i)}else if(lt(t))vp(r,t.bind(n));else if(Ln(t))if(We(t))t.forEach(i=>y8(i,e,n,s));else{const i=lt(t.handler)?t.handler.bind(n):e[t.handler];lt(i)&&vp(r,i,t)}}function v8(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>ZI(l,u,o,!0)),ZI(l,e,o)),Ln(e)&&i.set(e,l),l}function ZI(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ZI(t,i,n,!0),r&&r.forEach(o=>ZI(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=$he[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const $he={data:f9,props:p9,emits:p9,methods:bv,computed:bv,beforeCreate:ai,created:ai,beforeMount:ai,mounted:ai,beforeUpdate:ai,updated:ai,beforeDestroy:ai,beforeUnmount:ai,destroyed:ai,unmounted:ai,activated:ai,deactivated:ai,errorCaptured:ai,serverPrefetch:ai,components:bv,directives:bv,watch:Hhe,provide:f9,inject:zhe};function f9(t,e){return e?t?function(){return Hs(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function zhe(t,e){return bv(Ix(t),Ix(e))}function Ix(t){if(We(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ai(t,e){return t?[...new Set([].concat(t,e))]:e}function bv(t,e){return t?Hs(Object.create(null),t,e):e}function p9(t,e){return t?We(t)&&We(e)?[...new Set([...t,...e])]:Hs(Object.create(null),h9(t),h9(e??{})):e}function Hhe(t,e){if(!t)return e;if(!e)return t;const n=Hs(Object.create(null),t);for(const s in e)n[s]=ai(t[s],e[s]);return n}function w8(){return{app:null,config:{isNativeTag:Uue,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Whe=0;function Khe(t,e){return function(n,s=null){lt(n)||(n=Hs({},n)),s!=null&&!Ln(s)&&(s=null);const r=w8(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:Whe++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:kde,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&lt(u.install)?(i.add(u),u.install(l,...h)):lt(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||Cr(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,Yk(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(Ba(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=yp;yp=l;try{return u()}finally{yp=h}}};return l}}let yp=null;function vm(t,e){if(Yr){let n=Yr.provides;const s=Yr.parent&&Yr.parent.provides;s===n&&(n=Yr.provides=Object.create(s)),n[t]=e}}function Ji(t,e,n=!1){const s=pu();if(s||yp){let r=yp?yp._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&lt(e)?e.call(s&&s.proxy):e}}function b8(){return!!(pu()||yp)}const E8={},T8=()=>Object.create(E8),C8=t=>Object.getPrototypeOf(t)===E8;function Ghe(t,e,n,s=!1){const r={},i=T8();t.propsDefaults=Object.create(null),I8(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Uk(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Qhe(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=qt(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(Wk(t.emitsOptions,p))continue;const m=e[p];if(l)if(en(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Uo(p);r[w]=Sx(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{I8(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!en(e,d)&&((h=hg(d))===d||!en(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=Sx(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!en(e,d))&&(delete i[d],u=!0)}u&&ml(t.attrs,"set","")}function I8(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Bv(l))continue;const u=e[l];let h;r&&en(r,h=Uo(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Wk(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=qt(n),u=a||dn;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Sx(r,l,d,u[d],t,!en(u,d))}}return o}function Sx(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=en(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=HE(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===hg(n))&&(s=!0))}return s}const Yhe=new WeakMap;function S8(t,e,n=!1){const s=n?Yhe:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!lt(t)){const h=d=>{l=!0;const[p,m]=S8(d,e,!0);Hs(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Ln(t)&&s.set(t,mm),mm;if(We(i))for(let h=0;h<i.length;h++){const d=Uo(i[h]);g9(d)&&(o[d]=dn)}else if(i)for(const h in i){const d=Uo(h);if(g9(d)){const p=i[h],m=o[d]=We(p)||lt(p)?{type:p}:Hs({},p),w=m.type;let k=!1,P=!0;if(We(w))for(let D=0;D<w.length;++D){const M=w[D],V=lt(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=lt(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||en(m,"default"))&&a.push(d)}}const u=[o,a];return Ln(t)&&s.set(t,u),u}function g9(t){return t[0]!=="$"&&!Bv(t)}const hM=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",dM=t=>We(t)?t.map(hc):[hc(t)],Xhe=(t,e,n)=>{if(e._n)return e;const s=rM((...r)=>dM(e(...r)),n);return s._c=!1,s},k8=(t,e,n)=>{const s=t._ctx;for(const r in t){if(hM(r))continue;const i=t[r];if(lt(i))e[r]=Xhe(r,i,s);else if(i!=null){const o=dM(i);e[r]=()=>o}}},R8=(t,e)=>{const n=dM(e);t.slots.default=()=>n},A8=(t,e,n)=>{for(const s in e)(n||!hM(s))&&(t[s]=e[s])},Jhe=(t,e,n)=>{const s=t.slots=T8();if(t.vnode.shapeFlag&32){const r=e.__;r&&yx(s,"__",r,!0);const i=e._;i?(A8(s,e,n),n&&yx(s,"_",i,!0)):k8(e,s)}else e&&R8(t,e)},Zhe=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=dn;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:A8(r,e,n):(i=!e.$stable,k8(e,r)),o=e}else e&&(R8(t,e),o={default:1});if(i)for(const a in r)!hM(a)&&o[a]==null&&delete r[a]},ui=fde;function ede(t){return tde(t)}function tde(t,e){const n=Fk();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=wc,insertStaticContent:w}=t,k=(A,T,R,x=null,L=null,U=null,j=void 0,W=null,$=!!T.dynamicChildren)=>{if(A===T)return;A&&!Xf(A,T)&&(x=F(A),ke(A,L,U,!0),A=null),T.patchFlag===-2&&($=!1,T.dynamicChildren=null);const{type:B,ref:Q,shapeFlag:J}=T;switch(B){case Kk:P(A,T,R,x);break;case _i:D(A,T,R,x);break;case uP:A==null&&M(T,R,x,j);break;case ao:E(A,T,R,x,L,U,j,W,$);break;default:J&1?H(A,T,R,x,L,U,j,W,$):J&6?b(A,T,R,x,L,U,j,W,$):(J&64||J&128)&&B.process(A,T,R,x,L,U,j,W,$,ee)}Q!=null&&L?Wv(Q,A&&A.ref,U,T||A,!T):Q==null&&A&&A.ref!=null&&Wv(A.ref,null,U,A,!0)},P=(A,T,R,x)=>{if(A==null)s(T.el=a(T.children),R,x);else{const L=T.el=A.el;T.children!==A.children&&u(L,T.children)}},D=(A,T,R,x)=>{A==null?s(T.el=l(T.children||""),R,x):T.el=A.el},M=(A,T,R,x)=>{[A.el,A.anchor]=w(A.children,T,R,x,A.el,A.anchor)},V=({el:A,anchor:T},R,x)=>{let L;for(;A&&A!==T;)L=p(A),s(A,R,x),A=L;s(T,R,x)},q=({el:A,anchor:T})=>{let R;for(;A&&A!==T;)R=p(A),r(A),A=R;r(T)},H=(A,T,R,x,L,U,j,W,$)=>{T.type==="svg"?j="svg":T.type==="math"&&(j="mathml"),A==null?X(T,R,x,L,U,j,W,$):y(A,T,L,U,j,W,$)},X=(A,T,R,x,L,U,j,W)=>{let $,B;const{props:Q,shapeFlag:J,transition:Z,dirs:te}=A;if($=A.el=o(A.type,U,Q&&Q.is,Q),J&8?h($,A.children):J&16&&v(A.children,$,null,x,L,lP(A,U),j,W),te&&Rf(A,null,x,"created"),I($,A,A.scopeId,j,x),Q){for(const re in Q)re!=="value"&&!Bv(re)&&i($,re,null,Q[re],U,x);"value"in Q&&i($,"value",null,Q.value,U),(B=Q.onVnodeBeforeMount)&&Ga(B,x,A)}te&&Rf(A,null,x,"beforeMount");const ie=nde(L,Z);ie&&Z.beforeEnter($),s($,T,R),((B=Q&&Q.onVnodeMounted)||ie||te)&&ui(()=>{B&&Ga(B,x,A),ie&&Z.enter($),te&&Rf(A,null,x,"mounted")},L)},I=(A,T,R,x,L)=>{if(R&&m(A,R),x)for(let U=0;U<x.length;U++)m(A,x[U]);if(L){let U=L.subTree;if(T===U||D8(U.type)&&(U.ssContent===T||U.ssFallback===T)){const j=L.vnode;I(A,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(A,T,R,x,L,U,j,W,$=0)=>{for(let B=$;B<A.length;B++){const Q=A[B]=W?Ah(A[B]):hc(A[B]);k(null,Q,T,R,x,L,U,j,W)}},y=(A,T,R,x,L,U,j)=>{const W=T.el=A.el;let{patchFlag:$,dynamicChildren:B,dirs:Q}=T;$|=A.patchFlag&16;const J=A.props||dn,Z=T.props||dn;let te;if(R&&Af(R,!1),(te=Z.onVnodeBeforeUpdate)&&Ga(te,R,T,A),Q&&Rf(T,A,R,"beforeUpdate"),R&&Af(R,!0),(J.innerHTML&&Z.innerHTML==null||J.textContent&&Z.textContent==null)&&h(W,""),B?C(A.dynamicChildren,B,W,R,x,lP(T,L),U):j||we(A,T,W,null,R,x,lP(T,L),U,!1),$>0){if($&16)S(W,J,Z,R,L);else if($&2&&J.class!==Z.class&&i(W,"class",null,Z.class,L),$&4&&i(W,"style",J.style,Z.style,L),$&8){const ie=T.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],be=J[se],De=Z[se];(De!==be||se==="value")&&i(W,se,be,De,L,R)}}$&1&&A.children!==T.children&&h(W,T.children)}else!j&&B==null&&S(W,J,Z,R,L);((te=Z.onVnodeUpdated)||Q)&&ui(()=>{te&&Ga(te,R,T,A),Q&&Rf(T,A,R,"updated")},x)},C=(A,T,R,x,L,U,j)=>{for(let W=0;W<T.length;W++){const $=A[W],B=T[W],Q=$.el&&($.type===ao||!Xf($,B)||$.shapeFlag&198)?d($.el):R;k($,B,Q,null,x,L,U,j,!0)}},S=(A,T,R,x,L)=>{if(T!==R){if(T!==dn)for(const U in T)!Bv(U)&&!(U in R)&&i(A,U,T[U],null,L,x);for(const U in R){if(Bv(U))continue;const j=R[U],W=T[U];j!==W&&U!=="value"&&i(A,U,W,j,L,x)}"value"in R&&i(A,"value",T.value,R.value,L)}},E=(A,T,R,x,L,U,j,W,$)=>{const B=T.el=A?A.el:a(""),Q=T.anchor=A?A.anchor:a("");let{patchFlag:J,dynamicChildren:Z,slotScopeIds:te}=T;te&&(W=W?W.concat(te):te),A==null?(s(B,R,x),s(Q,R,x),v(T.children||[],R,Q,L,U,j,W,$)):J>0&&J&64&&Z&&A.dynamicChildren?(C(A.dynamicChildren,Z,R,L,U,j,W),(T.key!=null||L&&T===L.subTree)&&fM(A,T,!0)):we(A,T,R,Q,L,U,j,W,$)},b=(A,T,R,x,L,U,j,W,$)=>{T.slotScopeIds=W,A==null?T.shapeFlag&512?L.ctx.activate(T,R,x,j,$):K(T,R,x,L,U,j,$):ne(A,T,$)},K=(A,T,R,x,L,U,j)=>{const W=A.component=wde(A,x,L);if($k(A)&&(W.ctx.renderer=ee),bde(W,!1,j),W.asyncDep){if(L&&L.registerDep(W,de,j),!A.el){const $=W.subTree=Cr(_i);D(null,$,T,R),A.placeholder=$.el}}else de(W,A,T,R,L,U,j)},ne=(A,T,R)=>{const x=T.component=A.component;if(hde(A,T,R))if(x.asyncDep&&!x.asyncResolved){ce(x,T,R);return}else x.next=T,x.update();else T.el=A.el,x.vnode=T},de=(A,T,R,x,L,U,j)=>{const W=()=>{if(A.isMounted){let{next:J,bu:Z,u:te,parent:ie,vnode:re}=A;{const yt=P8(A);if(yt){J&&(J.el=re.el,ce(A,J,j)),yt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let se=J,be;Af(A,!1),J?(J.el=re.el,ce(A,J,j)):J=re,Z&&nP(Z),(be=J.props&&J.props.onVnodeBeforeUpdate)&&Ga(be,ie,J,re),Af(A,!0);const De=_9(A),rt=A.subTree;A.subTree=De,k(rt,De,d(rt.el),F(rt),A,L,U),J.el=De.el,se===null&&dde(A,De.el),te&&ui(te,L),(be=J.props&&J.props.onVnodeUpdated)&&ui(()=>Ga(be,ie,J,re),L)}else{let J;const{el:Z,props:te}=T,{bm:ie,m:re,parent:se,root:be,type:De}=A,rt=Kv(T);Af(A,!1),ie&&nP(ie),!rt&&(J=te&&te.onVnodeBeforeMount)&&Ga(J,se,T),Af(A,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(De);const yt=A.subTree=_9(A);k(null,yt,R,x,A,L,U),T.el=yt.el}if(re&&ui(re,L),!rt&&(J=te&&te.onVnodeMounted)){const yt=T;ui(()=>Ga(J,se,yt),L)}(T.shapeFlag&256||se&&Kv(se.vnode)&&se.vnode.shapeFlag&256)&&A.a&&ui(A.a,L),A.isMounted=!0,T=R=x=null}};A.scope.on();const $=A.effect=new M7(W);A.scope.off();const B=A.update=$.run.bind($),Q=A.job=$.runIfDirty.bind($);Q.i=A,Q.id=A.uid,$.scheduler=()=>sM(Q),Af(A,!0),B()},ce=(A,T,R)=>{T.component=A;const x=A.vnode.props;A.vnode=T,A.next=null,Qhe(A,T.props,x,R),Zhe(A,T.children,R),Ul(),i9(A),ql()},we=(A,T,R,x,L,U,j,W,$=!1)=>{const B=A&&A.children,Q=A?A.shapeFlag:0,J=T.children,{patchFlag:Z,shapeFlag:te}=T;if(Z>0){if(Z&128){It(B,J,R,x,L,U,j,W,$);return}else if(Z&256){Ht(B,J,R,x,L,U,j,W,$);return}}te&8?(Q&16&&ct(B,L,U),J!==B&&h(R,J)):Q&16?te&16?It(B,J,R,x,L,U,j,W,$):ct(B,L,U,!0):(Q&8&&h(R,""),te&16&&v(J,R,x,L,U,j,W,$))},Ht=(A,T,R,x,L,U,j,W,$)=>{A=A||mm,T=T||mm;const B=A.length,Q=T.length,J=Math.min(B,Q);let Z;for(Z=0;Z<J;Z++){const te=T[Z]=$?Ah(T[Z]):hc(T[Z]);k(A[Z],te,R,null,L,U,j,W,$)}B>Q?ct(A,L,U,!0,!1,J):v(T,R,x,L,U,j,W,$,J)},It=(A,T,R,x,L,U,j,W,$)=>{let B=0;const Q=T.length;let J=A.length-1,Z=Q-1;for(;B<=J&&B<=Z;){const te=A[B],ie=T[B]=$?Ah(T[B]):hc(T[B]);if(Xf(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;B++}for(;B<=J&&B<=Z;){const te=A[J],ie=T[Z]=$?Ah(T[Z]):hc(T[Z]);if(Xf(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;J--,Z--}if(B>J){if(B<=Z){const te=Z+1,ie=te<Q?T[te].el:x;for(;B<=Z;)k(null,T[B]=$?Ah(T[B]):hc(T[B]),R,ie,L,U,j,W,$),B++}}else if(B>Z)for(;B<=J;)ke(A[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const _t=T[B]=$?Ah(T[B]):hc(T[B]);_t.key!=null&&re.set(_t.key,B)}let se,be=0;const De=Z-ie+1;let rt=!1,yt=0;const mt=new Array(De);for(B=0;B<De;B++)mt[B]=0;for(B=te;B<=J;B++){const _t=A[B];if(be>=De){ke(_t,L,U,!0);continue}let Ye;if(_t.key!=null)Ye=re.get(_t.key);else for(se=ie;se<=Z;se++)if(mt[se-ie]===0&&Xf(_t,T[se])){Ye=se;break}Ye===void 0?ke(_t,L,U,!0):(mt[Ye-ie]=B+1,Ye>=yt?yt=Ye:rt=!0,k(_t,T[Ye],R,null,L,U,j,W,$),be++)}const us=rt?sde(mt):mm;for(se=us.length-1,B=De-1;B>=0;B--){const _t=ie+B,Ye=T[_t],Wn=T[_t+1],Ri=_t+1<Q?Wn.el||Wn.placeholder:x;mt[B]===0?k(null,Ye,R,Ri,L,U,j,W,$):rt&&(se<0||B!==us[se]?xt(Ye,R,Ri,2):se--)}}},xt=(A,T,R,x,L=null)=>{const{el:U,type:j,transition:W,children:$,shapeFlag:B}=A;if(B&6){xt(A.component.subTree,T,R,x);return}if(B&128){A.suspense.move(T,R,x);return}if(B&64){j.move(A,T,R,ee);return}if(j===ao){s(U,T,R);for(let Q=0;Q<$.length;Q++)xt($[Q],T,R,x);s(A.anchor,T,R);return}if(j===uP){V(A,T,R);return}if(x!==2&&B&1&&W)if(x===0)W.beforeEnter(U),s(U,T,R),ui(()=>W.enter(U),L);else{const{leave:Q,delayLeave:J,afterLeave:Z}=W,te=()=>{A.ctx.isUnmounted?r(U):s(U,T,R)},ie=()=>{Q(U,()=>{te(),Z&&Z()})};J?J(U,te,ie):ie()}else s(U,T,R)},ke=(A,T,R,x=!1,L=!1)=>{const{type:U,props:j,ref:W,children:$,dynamicChildren:B,shapeFlag:Q,patchFlag:J,dirs:Z,cacheIndex:te}=A;if(J===-2&&(L=!1),W!=null&&(Ul(),Wv(W,null,R,A,!0),ql()),te!=null&&(T.renderCache[te]=void 0),Q&256){T.ctx.deactivate(A);return}const ie=Q&1&&Z,re=!Kv(A);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&Ga(se,T,A),Q&6)Kt(A.component,R,x);else{if(Q&128){A.suspense.unmount(R,x);return}ie&&Rf(A,null,T,"beforeUnmount"),Q&64?A.type.remove(A,T,R,ee,x):B&&!B.hasOnce&&(U!==ao||J>0&&J&64)?ct(B,T,R,!1,!0):(U===ao&&J&384||!L&&Q&16)&&ct($,T,R),x&&Ee(A)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&ui(()=>{se&&Ga(se,T,A),ie&&Rf(A,null,T,"unmounted")},R)},Ee=A=>{const{type:T,el:R,anchor:x,transition:L}=A;if(T===ao){yn(R,x);return}if(T===uP){q(A);return}const U=()=>{r(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:W}=L,$=()=>j(R,U);W?W(A.el,U,$):$()}else U()},yn=(A,T)=>{let R;for(;A!==T;)R=p(A),r(A),A=R;r(T)},Kt=(A,T,R)=>{const{bum:x,scope:L,job:U,subTree:j,um:W,m:$,a:B,parent:Q,slots:{__:J}}=A;m9($),m9(B),x&&nP(x),Q&&We(J)&&J.forEach(Z=>{Q.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ke(j,A,T,R)),W&&ui(W,T),ui(()=>{A.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ct=(A,T,R,x=!1,L=!1,U=0)=>{for(let j=U;j<A.length;j++)ke(A[j],T,R,x,L)},F=A=>{if(A.shapeFlag&6)return F(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const T=p(A.anchor||A.el),R=T&&T[i8];return R?p(R):T};let Y=!1;const G=(A,T,R)=>{A==null?T._vnode&&ke(T._vnode,null,null,!0):k(T._vnode||null,A,T,null,null,null,R),T._vnode=A,Y||(Y=!0,i9(),n8(),Y=!1)},ee={p:k,um:ke,m:xt,r:Ee,mt:K,mc:v,pc:we,pbc:C,n:F,o:t};return{render:G,hydrate:void 0,createApp:Khe(G)}}function lP({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Af({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nde(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function fM(t,e,n=!1){const s=t.children,r=e.children;if(We(s)&&We(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ah(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&fM(o,a)),a.type===Kk&&(a.el=o.el),a.type===_i&&!a.el&&(a.el=o.el)}}function sde(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function P8(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:P8(e)}function m9(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rde=Symbol.for("v-scx"),ide=()=>Ji(rde);function vp(t,e,n){return N8(t,e,n)}function N8(t,e,n=dn){const{immediate:s,deep:r,flush:i,once:o}=n,a=Hs({},n),l=e&&s||!e&&i!=="post";let u;if(lb){if(i==="sync"){const m=ide();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=wc,m.resume=wc,m.pause=wc,m}}const h=Yr;a.call=(m,w,k)=>Ba(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{ui(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():sM(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Ihe(t,e,a);return lb&&(u?u.push(p):l&&p()),p}function ode(t,e,n){const s=this.proxy,r=es(t)?t.includes(".")?x8(s,t):()=>s[t]:t.bind(s,s);let i;lt(e)?i=e:(i=e.handler,n=e);const o=HE(this),a=N8(r,i.bind(s),n);return o(),a}function x8(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const ade=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Uo(e)}Modifiers`]||t[`${hg(e)}Modifiers`];function cde(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||dn;let r=n;const i=e.startsWith("update:"),o=i&&ade(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>es(h)?h.trim():h)),o.number&&(r=n.map(zue)));let a,l=s[a=tP(e)]||s[a=tP(Uo(e))];!l&&i&&(l=s[a=tP(hg(e))]),l&&Ba(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ba(u,t,6,r)}}function O8(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!lt(t)){const l=u=>{const h=O8(u,e,!0);h&&(a=!0,Hs(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Ln(t)&&s.set(t,null),null):(We(i)?i.forEach(l=>o[l]=null):Hs(o,i),Ln(t)&&s.set(t,o),o)}function Wk(t,e){return!t||!Ok(e)?!1:(e=e.slice(2).replace(/Once$/,""),en(t,e[0].toLowerCase()+e.slice(1))||en(t,hg(e))||en(t,e))}function _9(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=JI(t);let D,M;try{if(n.shapeFlag&4){const q=r||s,H=q;D=hc(u.call(H,q,h,d,m,p,w)),M=a}else{const q=e;D=hc(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:lde(a)}}catch(q){Qv.length=0,qk(q,t,1),D=Cr(_i)}let V=D;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(HL)&&(M=ude(M,i)),V=Id(V,M,!1,!0))}return n.dirs&&(V=Id(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Lp(V,n.transition),D=V,JI(P),D}const lde=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ok(n))&&((e||(e={}))[n]=t[n]);return e},ude=(t,e)=>{const n={};for(const s in t)(!HL(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function hde(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?y9(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!Wk(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?y9(s,o,u):!0:!!o;return!1}function y9(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Wk(n,i))return!0}return!1}function dde({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const D8=t=>t.__isSuspense;function fde(t,e){e&&e.pendingBranch?We(t)?e.effects.push(...t):e.effects.push(t):Rhe(t)}const ao=Symbol.for("v-fgt"),Kk=Symbol.for("v-txt"),_i=Symbol.for("v-cmt"),uP=Symbol.for("v-stc"),Qv=[];let fo=null;function Gk(t=!1){Qv.push(fo=t?null:[])}function pde(){Qv.pop(),fo=Qv[Qv.length-1]||null}let cb=1;function v9(t,e=!1){cb+=t,t<0&&fo&&e&&(fo.hasOnce=!0)}function L8(t){return t.dynamicChildren=cb>0?fo||mm:null,pde(),cb>0&&fo&&fo.push(t),t}function pM(t,e,n,s,r,i){return L8(Qk(t,e,n,s,r,i,!0))}function gM(t,e,n,s,r){return L8(Cr(t,e,n,s,r,!0))}function e0(t){return t?t.__v_isVNode===!0:!1}function Xf(t,e){return t.type===e.type&&t.key===e.key}const M8=({key:t})=>t??null,GC=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?es(t)||Bs(t)||lt(t)?{i:ho,r:t,k:e,f:!!n}:t:null);function Qk(t,e=null,n=null,s=0,r=null,i=t===ao?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&M8(e),ref:e&&GC(e),scopeId:r8,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ho};return a?(_M(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=es(n)?8:16),cb>0&&!o&&fo&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&fo.push(l),l}const Cr=gde;function gde(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Vhe)&&(t=_i),e0(t)){const a=Id(t,e,!0);return n&&_M(a,n),cb>0&&!i&&fo&&(a.shapeFlag&6?fo[fo.indexOf(t)]=a:fo.push(a)),a.patchFlag=-2,a}if(Sde(t)&&(t=t.__vccOpts),e){e=mde(e);let{class:a,style:l}=e;a&&!es(a)&&(e.class=qE(a)),Ln(l)&&(nM(l)&&!We(l)&&(l=Hs({},l)),e.style=UE(l))}const o=es(t)?1:D8(t)?128:o8(t)?64:Ln(t)?4:lt(t)?2:0;return Qk(t,e,n,s,r,o,i,!0)}function mde(t){return t?nM(t)||C8(t)?Hs({},t):t:null}function Id(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?_de(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&M8(u),ref:e&&e.ref?n&&i?We(i)?i.concat(GC(e)):[i,GC(e)]:GC(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ao?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Id(t.ssContent),ssFallback:t.ssFallback&&Id(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Lp(h,l.clone(h)),h}function mM(t=" ",e=0){return Cr(Kk,null,t,e)}function F8(t="",e=!1){return e?(Gk(),gM(_i,null,t)):Cr(_i,null,t)}function hc(t){return t==null||typeof t=="boolean"?Cr(_i):We(t)?Cr(ao,null,t.slice()):e0(t)?Ah(t):Cr(Kk,null,String(t))}function Ah(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Id(t)}function _M(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(We(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),_M(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!C8(e)?e._ctx=ho:r===3&&ho&&(ho.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else lt(e)?(e={default:e,_ctx:ho},n=32):(e=String(e),s&64?(n=16,e=[mM(e)]):n=8);t.children=e,t.shapeFlag|=n}function _de(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=qE([e.class,s.class]));else if(r==="style")e.style=UE([e.style,s.style]);else if(Ok(r)){const i=e[r],o=s[r];o&&i!==o&&!(We(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ga(t,e,n,s=null){Ba(t,e,7,[n,s])}const yde=w8();let vde=0;function wde(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||yde,i={uid:vde++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new O7(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:S8(s,r),emitsOptions:O8(s,r),emit:null,emitted:null,propsDefaults:dn,inheritAttrs:s.inheritAttrs,ctx:dn,data:dn,props:dn,attrs:dn,slots:dn,refs:dn,setupState:dn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cde.bind(null,i),t.ce&&t.ce(i),i}let Yr=null;const pu=()=>Yr||ho;let t0,kx;{const t=Fk(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};t0=e("__VUE_INSTANCE_SETTERS__",n=>Yr=n),kx=e("__VUE_SSR_SETTERS__",n=>lb=n)}const HE=t=>{const e=Yr;return t0(t),t.scope.on(),()=>{t.scope.off(),t0(e)}},w9=()=>{Yr&&Yr.scope.off(),t0(null)};function V8(t){return t.vnode.shapeFlag&4}let lb=!1;function bde(t,e=!1,n=!1){e&&kx(e);const{props:s,children:r}=t.vnode,i=V8(t);Ghe(t,s,i,e),Jhe(t,r,n||e);const o=i?Ede(t,e):void 0;return e&&kx(!1),o}function Ede(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qhe);const{setup:s}=n;if(s){Ul();const r=t.setupContext=s.length>1?Cde(t):null,i=HE(t),o=jE(s,t,0,[t.props,r]),a=k7(o);if(ql(),i(),(a||t.sp)&&!Kv(t)&&g8(t),a){if(o.then(w9,w9),e)return o.then(l=>{b9(t,l)}).catch(l=>{qk(l,t,0)});t.asyncDep=o}else b9(t,o)}else U8(t)}function b9(t,e,n){lt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ln(e)&&(t.setupState=J7(e)),U8(t)}function U8(t,e,n){const s=t.type;t.render||(t.render=s.render||wc);{const r=HE(t);Ul();try{jhe(t)}finally{ql(),r()}}}const Tde={get(t,e){return jr(t,"get",""),t[e]}};function Cde(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Tde),slots:t.slots,emit:t.emit,expose:e}}function Yk(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(J7(dg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Gv)return Gv[n](t)},has(e,n){return n in e||n in Gv}})):t.proxy}function Ide(t,e=!0){return lt(t)?t.displayName||t.name:t.name||e&&t.__name}function Sde(t){return lt(t)&&"__vccOpts"in t}const Ne=(t,e)=>The(t,e,lb);function Qe(t,e,n){const s=arguments.length;return s===2?Ln(e)&&!We(e)?e0(e)?Cr(t,null,[e]):Cr(t,e):Cr(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&e0(n)&&(n=[n]),Cr(t,e,n))}const kde="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rx;const E9=typeof window<"u"&&window.trustedTypes;if(E9)try{Rx=E9.createPolicy("vue",{createHTML:t=>t})}catch{}const q8=Rx?t=>Rx.createHTML(t):t=>t,Rde="http://www.w3.org/2000/svg",Ade="http://www.w3.org/1998/Math/MathML",fl=typeof document<"u"?document:null,T9=fl&&fl.createElement("template"),Pde={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?fl.createElementNS(Rde,t):e==="mathml"?fl.createElementNS(Ade,t):n?fl.createElement(t,{is:n}):fl.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>fl.createTextNode(t),createComment:t=>fl.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fl.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{T9.innerHTML=q8(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=T9.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ph="transition",Hy="animation",Qm=Symbol("_vtc"),j8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},B8=Hs({},h8,j8),Nde=t=>(t.displayName="Transition",t.props=B8,t),yM=Nde((t,{slots:e})=>Qe(Nhe,$8(t),e)),Pf=(t,e=[])=>{We(t)?t.forEach(n=>n(...e)):t&&t(...e)},C9=t=>t?We(t)?t.some(e=>e.length>1):t.length>1:!1;function $8(t){const e={};for(const E in t)E in j8||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=xde(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:D,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:X=D,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Th(E,b?h:a),Th(E,b?u:o),K&&K()},C=(E,b)=>{E._isLeaving=!1,Th(E,d),Th(E,m),Th(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,de=()=>y(b,E,K);Pf(ne,[b,de]),I9(()=>{Th(b,E?l:i),ec(b,E?h:a),C9(ne)||S9(b,s,k,de)})};return Hs(e,{onBeforeEnter(E){Pf(D,[E]),ec(E,i),ec(E,o)},onBeforeAppear(E){Pf(X,[E]),ec(E,l),ec(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>C(E,b);ec(E,d),E._enterCancelled?(ec(E,p),Ax()):(Ax(),ec(E,p)),I9(()=>{E._isLeaving&&(Th(E,d),ec(E,m),C9(q)||S9(E,s,P,K))}),Pf(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),Pf(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Pf(v,[E])},onLeaveCancelled(E){C(E),Pf(H,[E])}})}function xde(t){if(t==null)return null;if(Ln(t))return[hP(t.enter),hP(t.leave)];{const e=hP(t);return[e,e]}}function hP(t){return Hue(t)}function ec(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Qm]||(t[Qm]=new Set)).add(e)}function Th(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Qm];n&&(n.delete(e),n.size||(t[Qm]=void 0))}function I9(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ode=0;function S9(t,e,n,s){const r=t._endId=++Ode,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=z8(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function z8(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${ph}Delay`),i=s(`${ph}Duration`),o=k9(r,i),a=s(`${Hy}Delay`),l=s(`${Hy}Duration`),u=k9(a,l);let h=null,d=0,p=0;e===ph?o>0&&(h=ph,d=o,p=i.length):e===Hy?u>0&&(h=Hy,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?ph:Hy:null,p=h?h===ph?i.length:l.length:0);const m=h===ph&&/\b(transform|all)(,|$)/.test(s(`${ph}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function k9(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>R9(n)+R9(t[s])))}function R9(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ax(){return document.body.offsetHeight}function Dde(t,e,n){const s=t[Qm];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const n0=Symbol("_vod"),H8=Symbol("_vsh"),W8={beforeMount(t,{value:e},{transition:n}){t[n0]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Wy(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Wy(t,!0),s.enter(t)):s.leave(t,()=>{Wy(t,!1)}):Wy(t,e))},beforeUnmount(t,{value:e}){Wy(t,e)}};function Wy(t,e){t.style.display=e?t[n0]:"none",t[H8]=!e}const Lde=Symbol(""),Mde=/(^|;)\s*display\s*:/;function Fde(t,e,n){const s=t.style,r=es(n);let i=!1;if(n&&!r){if(e)if(es(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&QC(s,a,"")}else for(const o in e)n[o]==null&&QC(s,o,"");for(const o in n)o==="display"&&(i=!0),QC(s,o,n[o])}else if(r){if(e!==n){const o=s[Lde];o&&(n+=";"+o),s.cssText=n,i=Mde.test(n)}}else e&&t.removeAttribute("style");n0 in t&&(t[n0]=i?s.display:"",t[H8]&&(s.display="none"))}const A9=/\s*!important$/;function QC(t,e,n){if(We(n))n.forEach(s=>QC(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Vde(t,e);A9.test(n)?t.setProperty(hg(s),n.replace(A9,""),"important"):t[s]=n}}const P9=["Webkit","Moz","ms"],dP={};function Vde(t,e){const n=dP[e];if(n)return n;let s=Uo(e);if(s!=="filter"&&s in t)return dP[e]=s;s=Mk(s);for(let r=0;r<P9.length;r++){const i=P9[r]+s;if(i in t)return dP[e]=i}return e}const N9="http://www.w3.org/1999/xlink";function x9(t,e,n,s,r,i=Xue(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(N9,e.slice(6,e.length)):t.setAttributeNS(N9,e,n):n==null||i&&!P7(n)?t.removeAttribute(e):t.setAttribute(e,i?"":pf(n)?String(n):n)}function O9(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?q8(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=P7(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ude(t,e,n,s){t.addEventListener(e,n,s)}function qde(t,e,n,s){t.removeEventListener(e,n,s)}const D9=Symbol("_vei");function jde(t,e,n,s,r=null){const i=t[D9]||(t[D9]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=Bde(e);if(s){const u=i[e]=Hde(s,r);Ude(t,a,u,l)}else o&&(qde(t,a,o,l),i[e]=void 0)}}const L9=/(?:Once|Passive|Capture)$/;function Bde(t){let e;if(L9.test(t)){e={};let n;for(;n=t.match(L9);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hg(t.slice(2)),e]}let fP=0;const $de=Promise.resolve(),zde=()=>fP||($de.then(()=>fP=0),fP=Date.now());function Hde(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ba(Wde(s,n.value),e,5,[s])};return n.value=t,n.attached=zde(),n}function Wde(t,e){if(We(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const M9=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Kde=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Dde(t,s,o):e==="style"?Fde(t,n,s):Ok(e)?HL(e)||jde(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gde(t,e,s,o))?(O9(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&x9(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!es(s))?O9(t,Uo(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),x9(t,e,s,o))};function Gde(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&M9(e)&&lt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return M9(e)&&es(n)?!1:e in t}const K8=new WeakMap,G8=new WeakMap,s0=Symbol("_moveCb"),F9=Symbol("_enterCb"),Qde=t=>(delete t.props.mode,t),Yde=Qde({name:"TransitionGroup",props:Hs({},B8,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=pu(),s=u8();let r,i;return Hk(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!tfe(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Jde),r.forEach(Zde);const a=r.filter(efe);Ax(),a.forEach(l=>{const u=l.el,h=u.style;ec(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[s0]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[s0]=null,Th(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=qt(t),a=$8(o);let l=o.tag||ao;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),Lp(h,ab(h,a,s,n)),K8.set(h,h.el.getBoundingClientRect()))}i=e.default?iM(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&Lp(h,ab(h,a,s,n))}return Cr(l,null,i)}}}),Xde=Yde;function Jde(t){const e=t.el;e[s0]&&e[s0](),e[F9]&&e[F9]()}function Zde(t){G8.set(t,t.el.getBoundingClientRect())}function efe(t){const e=K8.get(t),n=G8.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function tfe(t,e,n){const s=t.cloneNode(),r=t[Qm];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=z8(s);return i.removeChild(s),o}const nfe=["ctrl","shift","alt","meta"],sfe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>nfe.some(n=>t[`${n}Key`]&&!e.includes(n))},Q8=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=sfe[e[o]];if(a&&a(r,e))return}return t(r,...i)})},rfe=Hs({patchProp:Kde},Pde);let V9;function ife(){return V9||(V9=ede(rfe))}const Y8=(...t)=>{const e=ife().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=afe(s);if(!r)return;const i=e._component;!lt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,ofe(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function ofe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function afe(t){return es(t)?document.querySelector(t):t}function j_(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function X8(t,e){for(const n in e)j_(t,n,e[n]);return t}const jl=Uc(!1);let Px;function cfe(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function lfe(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const J8="ontouchstart"in window||window.navigator.maxTouchPoints>0;function ufe(t){const e=t.toLowerCase(),n=lfe(e),s=cfe(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),jl.value===!0&&(Px={is:{...r}}),J8===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const U9=navigator.userAgent||navigator.vendor||window.opera,hfe={has:{touch:!1,webStorage:!1},within:{iframe:!1}},xo={userAgent:U9,is:ufe(U9),has:{touch:J8},within:{iframe:window.self!==window.top}},ub={install(t){const{$q:e}=t;jl.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,xo),jl.value=!1}),e.platform=gf(this)):e.platform=this}};{let t;j_(xo.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(ub,xo),jl.value===!0&&(Object.assign(ub,Px,hfe),Px=null)}function fg(t){return dg(q_(t))}function vM(t){return dg(t)}const Xk=(t,e)=>{const n=gf(t);for(const s in t)j_(e,s,()=>n[s],r=>{n[s]=r});return e},Bl={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Bl,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Mp(){}function Z8(t){return t.button===0}function wM(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function eK(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Jk(t){t.stopPropagation()}function hb(t){t.cancelable!==!1&&t.preventDefault()}function Ph(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function tK(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",hb,Bl.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",hb,Bl.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function bM(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Bl[r[3]])})}function EM(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Bl[s[3]])}),t[n]=void 0)}function TM(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const pP=["sm","md","lg","xl"],{passive:q9}=Bl,dfe=Xk({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Mp,setDebounce:Mp,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||xo.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{pP.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&pP.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{pP.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,q9),a=p>0?TM(this.__update,p):this.__update,s.addEventListener("resize",a,q9)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};jl.value===!0?e.push(h):h()}}),xr=Xk({isActive:!1,mode:!1},{__media:void 0,set(t){xr.mode=t,t==="auto"?(xr.__media===void 0&&(xr.__media=window.matchMedia("(prefers-color-scheme: dark)"),xr.__updateMedia=()=>{xr.set("auto")},xr.__media.addListener(xr.__updateMedia)),t=xr.__media.matches):xr.__media!==void 0&&(xr.__media.removeListener(xr.__updateMedia),xr.__media=void 0),xr.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){xr.set(xr.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function ffe(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let nK=!1;function pfe(t){nK=t.isComposing===!0}function CM(t){return nK===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function db(t,e){return CM(t)===!0?!1:[].concat(e).includes(t.keyCode)}function sK(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function gfe({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=sK(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function mfe(){const{is:t}=xo,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=sK(t);r!==void 0&&n.add(`platform-${r}`)}}xo.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),xo.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function _fe(t){for(const e in t)ffe(e,t[e])}const yfe={install(t){if(this.__installed!==!0){if(jl.value===!0)mfe();else{const{$q:e}=t;e.config.brand!==void 0&&_fe(e.config.brand);const n=gfe(xo,e.config);document.body.classList.add.apply(document.body.classList,n)}xo.is.ios===!0&&document.body.addEventListener("touchstart",Mp),window.addEventListener("keydown",pfe,!0)}}},rK=()=>!0;function vfe(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function wfe(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function bfe(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return rK;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(vfe).map(wfe)),()=>e.includes(window.location.hash)}const IM={__history:[],add:Mp,remove:Mp,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=xo.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=rK),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=bfe(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},j9={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function B9(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Nh=Xk({__qLang:{}},{getLocale:B9,set(t=j9,e){const n={...t,rtl:t.rtl===!0,getLocale:B9};{if(n.set=Nh.set,Nh.__langConfig===void 0||Nh.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Nh.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Nh.__qLang,Nh.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||j9))}}),Efe={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},r0=Xk({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=r0.set,Object.assign(r0.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,j_(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||Efe))}}),iK="_q_",oK="_q_l_",aK="_q_pc_",cK="_q_fo_";function lK(){}const i0={};let uK=!1;function Tfe(){uK=!0}function Yv(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(Yv(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(Yv(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(Yv(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function Fp(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function hK(t){return Object.prototype.toString.call(t)==="[object Date]"}function dK(t){return typeof t=="number"&&isFinite(t)}const $9=[ub,yfe,xr,dfe,IM,Nh,r0];function Cfe(t,e){const n=Y8(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function z9(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function Ife(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(iK,n.$q),z9(n,$9),e.components!==void 0&&Object.values(e.components).forEach(s=>{Fp(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{Fp(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&z9(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&$9.includes(s)===!1)),jl.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const Sfe=function(t,e={}){const n={version:"2.18.2"};uK===!1?(e.config!==void 0&&Object.assign(i0,e.config),n.config={...i0},Tfe()):n.config=e.config||{},Ife(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},kfe={name:"Quasar",version:"2.18.2",install:Sfe,lang:Nh,iconSet:r0};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const Kg=typeof document<"u";function fK(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Rfe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&fK(t.default)}const Xt=Object.assign;function gP(t,e){const n={};for(const s in e){const r=e[s];n[s]=$a(r)?r.map(t):t(r)}return n}const Xv=()=>{},$a=Array.isArray,pK=/#/g,Afe=/&/g,Pfe=/\//g,Nfe=/=/g,xfe=/\?/g,gK=/\+/g,Ofe=/%5B/g,Dfe=/%5D/g,mK=/%5E/g,Lfe=/%60/g,_K=/%7B/g,Mfe=/%7C/g,yK=/%7D/g,Ffe=/%20/g;function SM(t){return encodeURI(""+t).replace(Mfe,"|").replace(Ofe,"[").replace(Dfe,"]")}function Vfe(t){return SM(t).replace(_K,"{").replace(yK,"}").replace(mK,"^")}function Nx(t){return SM(t).replace(gK,"%2B").replace(Ffe,"+").replace(pK,"%23").replace(Afe,"%26").replace(Lfe,"`").replace(_K,"{").replace(yK,"}").replace(mK,"^")}function Ufe(t){return Nx(t).replace(Nfe,"%3D")}function qfe(t){return SM(t).replace(pK,"%23").replace(xfe,"%3F")}function jfe(t){return t==null?"":qfe(t).replace(Pfe,"%2F")}function fb(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Bfe=/\/$/,$fe=t=>t.replace(Bfe,"");function mP(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Kfe(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:fb(o)}}function zfe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function H9(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Hfe(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ym(e.matched[s],n.matched[r])&&vK(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ym(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function vK(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Wfe(t[n],e[n]))return!1;return!0}function Wfe(t,e){return $a(t)?W9(t,e):$a(e)?W9(e,t):t===e}function W9(t,e){return $a(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Kfe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const gh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var pb;(function(t){t.pop="pop",t.push="push"})(pb||(pb={}));var Jv;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Jv||(Jv={}));function Gfe(t){if(!t)if(Kg){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$fe(t)}const Qfe=/^[^#]+#/;function Yfe(t,e){return t.replace(Qfe,"#")+e}function Xfe(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Zk=()=>({left:window.scrollX,top:window.scrollY});function Jfe(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Xfe(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function K9(t,e){return(history.state?history.state.position-e:-1)+t}const xx=new Map;function Zfe(t,e){xx.set(t,e)}function epe(t){const e=xx.get(t);return xx.delete(t),e}let tpe=()=>location.protocol+"//"+location.host;function wK(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),H9(a,"")}return H9(n,t)+s+r}function npe(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=wK(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(D=>{D(n.value,w,{delta:P,type:pb.pop,direction:P?P>0?Jv.forward:Jv.back:Jv.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Xt({},p.state,{scroll:Zk()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function G9(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Zk():null}}function spe(t){const{history:e,location:n}=window,s={value:wK(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:tpe()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=Xt({},e.state,G9(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=Xt({},r.value,e.state,{forward:l,scroll:Zk()});i(h.current,h,!0);const d=Xt({},G9(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function rpe(t){t=Gfe(t);const e=spe(t),n=npe(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Xt({location:"",base:t,go:s,createHref:Yfe.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function ipe(t){return typeof t=="string"||t&&typeof t=="object"}function bK(t){return typeof t=="string"||typeof t=="symbol"}const EK=Symbol("");var Q9;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Q9||(Q9={}));function Xm(t,e){return Xt(new Error,{type:t,[EK]:!0},e)}function il(t,e){return t instanceof Error&&EK in t&&(e==null||!!(t.type&e))}const Y9="[^/]+?",ope={sensitive:!1,strict:!1,start:!0,end:!0},ape=/[.+*?^${}()[\]/\\]/g;function cpe(t,e){const n=Xt({},ope,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(ape,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:D}=p;i.push({name:w,repeatable:k,optional:P});const M=D||Y9;if(M!==Y9){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,D=w in u?u[w]:"";if($a(D)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=$a(D)?D.join("/"):D;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function lpe(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function TK(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=lpe(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(X9(s))return 1;if(X9(r))return-1}return r.length-s.length}function X9(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const upe={type:0,value:""},hpe=/[a-zA-Z0-9_]/;function dpe(t){if(!t)return[[]];if(t==="/")return[[upe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:hpe.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function fpe(t,e,n){const s=cpe(dpe(t.path),n),r=Xt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function ppe(t,e){const n=[],s=new Map;e=tq({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=Z9(d);k.aliasOf=m&&m.record;const P=tq(e,d),D=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)D.push(Z9(Xt({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of D){const{path:H}=q;if(p&&H[0]!=="/"){const X=p.record.path,I=X[X.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=fpe(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!eq(M)&&o(d.name)),CK(M)&&l(M),k.children){const X=k.children;for(let I=0;I<X.length;I++)i(X[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:Xv}function o(d){if(bK(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=_pe(d,n);n.splice(p,0,d),d.record.name&&!eq(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw Xm(1,{location:d});P=m.record.name,w=Xt(J9(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&J9(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw Xm(1,{location:d,currentLocation:p});P=m.record.name,w=Xt({},p.params,d.params),k=m.stringify(w)}const D=[];let M=m;for(;M;)D.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:D,meta:mpe(D)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function J9(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Z9(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:gpe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gpe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function eq(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mpe(t){return t.reduce((e,n)=>Xt(e,n.meta),{})}function tq(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function _pe(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;TK(t,e[i])<0?s=i:n=i+1}const r=ype(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function ype(t){let e=t;for(;e=e.parent;)if(CK(e)&&TK(t,e)===0)return e}function CK({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function vpe(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(gK," "),i=r.indexOf("="),o=fb(i<0?r:r.slice(0,i)),a=i<0?null:fb(r.slice(i+1));if(o in e){let l=e[o];$a(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function nq(t){let e="";for(let n in t){const s=t[n];if(n=Ufe(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}($a(s)?s.map(r=>r&&Nx(r)):[s&&Nx(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function wpe(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=$a(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const bpe=Symbol(""),sq=Symbol(""),eR=Symbol(""),kM=Symbol(""),Ox=Symbol("");function Ky(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function xh(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Xm(4,{from:n,to:e})):p instanceof Error?l(p):ipe(p)?l(Xm(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function _P(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(fK(l)){const u=(l.__vccOpts||l)[e];u&&i.push(xh(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Rfe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&xh(p,n,s,o,a,r)()}))}}return i}function rq(t){const e=Ji(eR),n=Ji(kM),s=Ne(()=>{const l=Ll(t.to);return e.resolve(l)}),r=Ne(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(Ym.bind(null,h));if(p>-1)return p;const m=iq(l[u-2]);return u>1&&iq(h)===m&&d[d.length-1].path!==m?d.findIndex(Ym.bind(null,l[u-2])):p}),i=Ne(()=>r.value>-1&&Spe(n.params,s.value.params)),o=Ne(()=>r.value>-1&&r.value===n.matched.length-1&&vK(n.params,s.value.params));function a(l={}){if(Ipe(l)){const u=e[Ll(t.replace)?"replace":"push"](Ll(t.to)).catch(Xv);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Ne(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Epe(t){return t.length===1?t[0]:t}const Tpe=q_({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:rq,setup(t,{slots:e}){const n=gf(rq(t)),{options:s}=Ji(eR),r=Ne(()=>({[oq(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[oq(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Epe(e.default(n));return t.custom?i:Qe("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Cpe=Tpe;function Ipe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Spe(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!$a(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function iq(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const oq=(t,e,n)=>t??e??n,kpe=q_({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ji(Ox),r=Ne(()=>t.route||s.value),i=Ji(sq,0),o=Ne(()=>{let u=Ll(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Ne(()=>r.value.matched[o.value]);vm(sq,Ne(()=>o.value+1)),vm(bpe,a),vm(Ox,r);const l=Uc();return vp(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ym(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return aq(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Qe(p,Xt({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return aq(n.default,{Component:k,route:u})||k}}});function aq(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Rpe=kpe;function Ape(t){const e=ppe(t.routes,t),n=t.parseQuery||vpe,s=t.stringifyQuery||nq,r=t.history,i=Ky(),o=Ky(),a=Ky(),l=_he(gh);let u=gh;Kg&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=gP.bind(null,F=>""+F),d=gP.bind(null,jfe),p=gP.bind(null,fb);function m(F,Y){let G,ee;return bK(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function D(F,Y){if(Y=Xt({},Y||l.value),typeof F=="string"){const x=mP(n,F,Y.path),L=e.resolve({path:x.path},Y),U=r.createHref(x.fullPath);return Xt(x,L,{params:p(L.params),hash:fb(x.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Xt({},F,{path:mP(n,F.path,Y.path).path});else{const x=Xt({},F.params);for(const L in x)x[L]==null&&delete x[L];G=Xt({},F,{params:d(x)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const T=zfe(s,Xt({},F,{hash:Vfe(A),path:ee.path})),R=r.createHref(T);return Xt({fullPath:T,hash:A,query:s===nq?wpe(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?mP(n,F,l.value.path):Xt({},F)}function V(F,Y){if(u!==F)return Xm(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Xt(M(F),{replace:!0}))}function X(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Xt({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=u=D(F),ee=l.value,A=F.state,T=F.force,R=F.replace===!0,x=X(G);if(x)return I(Xt(M(x),{state:typeof x=="object"?Xt({},A,x.state):A,force:T,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!T&&Hfe(s,ee,G)&&(U=Xm(16,{to:L,from:ee}),xt(ee,ee,!0,!1)),(U?Promise.resolve(U):C(L,ee)).catch(j=>il(j)?il(j,2)?j:It(j):we(j,L,ee)).then(j=>{if(j){if(il(j,2))return I(Xt({replace:R},M(j.to),{state:typeof j.to=="object"?Xt({},A,j.to.state):A,force:T}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=yn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function C(F,Y){let G;const[ee,A,T]=Ppe(F,Y);G=_P(ee.reverse(),"beforeRouteLeave",F,Y);for(const x of ee)x.leaveGuards.forEach(L=>{G.push(xh(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),ct(G).then(()=>{G=[];for(const x of i.list())G.push(xh(x,F,Y));return G.push(R),ct(G)}).then(()=>{G=_P(A,"beforeRouteUpdate",F,Y);for(const x of A)x.updateGuards.forEach(L=>{G.push(xh(L,F,Y))});return G.push(R),ct(G)}).then(()=>{G=[];for(const x of T)if(x.beforeEnter)if($a(x.beforeEnter))for(const L of x.beforeEnter)G.push(xh(L,F,Y));else G.push(xh(x.beforeEnter,F,Y));return G.push(R),ct(G)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),G=_P(T,"beforeRouteEnter",F,Y,y),G.push(R),ct(G))).then(()=>{G=[];for(const x of o.list())G.push(xh(x,F,Y));return G.push(R),ct(G)}).catch(x=>il(x,8)?x:Promise.reject(x))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const T=V(F,Y);if(T)return T;const R=Y===gh,x=Kg?history.state:{};G&&(ee||R?r.replace(F.fullPath,Xt({scroll:R&&x&&x.scroll},A)):r.push(F.fullPath,A)),l.value=F,xt(F,Y,G,R),It()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Kt.listening)return;const ee=D(F),A=X(ee);if(A){I(Xt(A,{replace:!0,force:!0}),ee).catch(Xv);return}u=ee;const T=l.value;Kg&&Zfe(K9(T.fullPath,G.delta),Zk()),C(ee,T).catch(R=>il(R,12)?R:il(R,2)?(I(Xt(M(R.to),{force:!0}),ee).then(x=>{il(x,20)&&!G.delta&&G.type===pb.pop&&r.go(-1,!1)}).catch(Xv),Promise.reject()):(G.delta&&r.go(-G.delta,!1),we(R,ee,T))).then(R=>{R=R||E(ee,T,!1),R&&(G.delta&&!il(R,8)?r.go(-G.delta,!1):G.type===pb.pop&&il(R,20)&&r.go(-1,!1)),S(ee,T,R)}).catch(Xv)}))}let ne=Ky(),de=Ky(),ce;function we(F,Y,G){It(F);const ee=de.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Ht(){return ce&&l.value!==gh?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function It(F){return ce||(ce=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function xt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!Kg||!A)return Promise.resolve();const T=!G&&epe(K9(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return jk().then(()=>A(F,Y,T)).then(R=>R&&Jfe(R)).catch(R=>we(R,F,Y))}const ke=F=>r.go(F);let Ee;const yn=new Set,Kt={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:D,options:t,push:q,replace:H,go:ke,back:()=>ke(-1),forward:()=>ke(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Ht,install(F){const Y=this;F.component("RouterLink",Cpe),F.component("RouterView",Rpe),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Ll(l)}),Kg&&!Ee&&l.value===gh&&(Ee=!0,q(r.location).catch(A=>{}));const G={};for(const A in gh)Object.defineProperty(G,A,{get:()=>l.value[A],enumerable:!0});F.provide(eR,Y),F.provide(kM,Uk(G)),F.provide(Ox,l);const ee=F.unmount;yn.add(F),F.unmount=function(){yn.delete(F),yn.size<1&&(u=gh,b&&b(),b=null,l.value=gh,Ee=!1,ce=!1),ee()}}};function ct(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Kt}function Ppe(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ym(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>Ym(u,l))||r.push(l))}return[n,s,r]}function RM(){return Ji(eR)}function AM(t){return Ji(kM)}const Npe=()=>{};var cq={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IK={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ge=function(t,e){if(!t)throw B_(e)},B_=function(t){return new Error("Firebase Database ("+IK.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SK=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},xpe=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},PM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SK(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xpe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new Ope;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ope extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kK=function(t){const e=SK(t);return PM.encodeByteArray(e,!0)},o0=function(t){return kK(t).replace(/\./g,"")},a0=function(t){try{return PM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dpe(t){return RK(void 0,t)}function RK(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Lpe(n)||(t[n]=RK(t[n],e[n]));return t}function Lpe(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mpe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Fpe=()=>Mpe().__FIREBASE_DEFAULTS__,Vpe=()=>{if(typeof process>"u"||typeof cq>"u")return;const t=cq.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Upe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&a0(t[1]);return e&&JSON.parse(e)},tR=()=>{try{return Npe()||Fpe()||Vpe()||Upe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AK=t=>tR()?.emulatorHosts?.[t],NM=t=>{const e=AK(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},PK=()=>tR()?.config,NK=t=>tR()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sR(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[o0(JSON.stringify(n)),o0(JSON.stringify(o)),""].join(".")}const Zv={};function qpe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zv))Zv[e]?t.emulator.push(e):t.prod.push(e);return t}function jpe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lq=!1;function rR(t,e){if(typeof window>"u"||typeof document>"u"||!Jc(window.location.host)||Zv[t]===e||Zv[t]||lq)return;Zv[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=qpe().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{lq=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=jpe(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),D=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(k,w);const V=l();a(D,P),M.append(D,m,k,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ti(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ti())}function Bpe(){const t=tR()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $pe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zpe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xK(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hpe(){const t=ti();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wpe(){return IK.NODE_ADMIN===!0}function Kpe(){return!Bpe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gpe(){try{return typeof indexedDB=="object"}catch{return!1}}function Qpe(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ype="FirebaseError";class Zc extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ype,Object.setPrototypeOf(this,Zc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,WE.prototype.create)}}class WE{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Xpe(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zc(r,a,s)}}function Xpe(t,e){return t.replace(Jpe,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Jpe=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gb(t){return JSON.parse(t)}function Os(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OK=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=gb(a0(i[0])||""),n=gb(a0(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Zpe=function(t){const e=OK(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},ege=function(t){const e=OK(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jm(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Dx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function c0(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Sd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(uq(i)&&uq(o)){if(!Sd(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function uq(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $_(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tge{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function nge(t,e){const n=new sge(t,e);return n.subscribe.bind(n)}class sge{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");rge(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=yP),r.error===void 0&&(r.error=yP),r.complete===void 0&&(r.complete=yP);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rge(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yP(){}function DM(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ige=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,ge(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},iR=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ln(t){return t&&t._delegate?t._delegate:t}class $l{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jf="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oge{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new nR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cge(e))try{this.getOrInitializeService({instanceIdentifier:jf})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=jf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jf){return this.instances.has(e)}getOptions(e=jf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:age(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=jf){return this.component?this.component.multipleInstances?e:jf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function age(t){return t===jf?void 0:t}function cge(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lge{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oge(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var St;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(St||(St={}));const uge={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},hge=St.INFO,dge={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},fge=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=dge[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oR{constructor(e){this.name=e,this._logLevel=hge,this._logHandler=fge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const pge=(t,e)=>e.some(n=>t instanceof n);let hq,dq;function gge(){return hq||(hq=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mge(){return dq||(dq=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DK=new WeakMap,Lx=new WeakMap,LK=new WeakMap,vP=new WeakMap,LM=new WeakMap;function _ge(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ed(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&DK.set(n,t)}).catch(()=>{}),LM.set(e,t),e}function yge(t){if(Lx.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Lx.set(t,e)}let Mx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LK.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ed(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vge(t){Mx=t(Mx)}function wge(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(wP(this),e,...n);return LK.set(s,e.sort?e.sort():[e]),ed(s)}:mge().includes(t)?function(...e){return t.apply(wP(this),e),ed(DK.get(this))}:function(...e){return ed(t.apply(wP(this),e))}}function bge(t){return typeof t=="function"?wge(t):(t instanceof IDBTransaction&&yge(t),pge(t,gge())?new Proxy(t,Mx):t)}function ed(t){if(t instanceof IDBRequest)return _ge(t);if(vP.has(t))return vP.get(t);const e=bge(t);return e!==t&&(vP.set(t,e),LM.set(e,t)),e}const wP=t=>LM.get(t);function Ege(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=ed(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ed(o.result),l.oldVersion,l.newVersion,ed(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Tge=["get","getKey","getAll","getAllKeys","count"],Cge=["put","add","delete","clear"],bP=new Map;function fq(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bP.get(e))return bP.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=Cge.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Tge.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return bP.set(e,i),i}vge(t=>({...t,get:(e,n,s)=>fq(e,n)||t.get(e,n,s),has:(e,n)=>!!fq(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ige{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Sge(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Sge(t){return t.getComponent()?.type==="VERSION"}const Fx="@firebase/app",pq="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zl=new oR("@firebase/app"),kge="@firebase/app-compat",Rge="@firebase/analytics-compat",Age="@firebase/analytics",Pge="@firebase/app-check-compat",Nge="@firebase/app-check",xge="@firebase/auth",Oge="@firebase/auth-compat",Dge="@firebase/database",Lge="@firebase/data-connect",Mge="@firebase/database-compat",Fge="@firebase/functions",Vge="@firebase/functions-compat",Uge="@firebase/installations",qge="@firebase/installations-compat",jge="@firebase/messaging",Bge="@firebase/messaging-compat",$ge="@firebase/performance",zge="@firebase/performance-compat",Hge="@firebase/remote-config",Wge="@firebase/remote-config-compat",Kge="@firebase/storage",Gge="@firebase/storage-compat",Qge="@firebase/firestore",Yge="@firebase/ai",Xge="@firebase/firestore-compat",Jge="firebase",Zge="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vx="[DEFAULT]",eme={[Fx]:"fire-core",[kge]:"fire-core-compat",[Age]:"fire-analytics",[Rge]:"fire-analytics-compat",[Nge]:"fire-app-check",[Pge]:"fire-app-check-compat",[xge]:"fire-auth",[Oge]:"fire-auth-compat",[Dge]:"fire-rtdb",[Lge]:"fire-data-connect",[Mge]:"fire-rtdb-compat",[Fge]:"fire-fn",[Vge]:"fire-fn-compat",[Uge]:"fire-iid",[qge]:"fire-iid-compat",[jge]:"fire-fcm",[Bge]:"fire-fcm-compat",[$ge]:"fire-perf",[zge]:"fire-perf-compat",[Hge]:"fire-rc",[Wge]:"fire-rc-compat",[Kge]:"fire-gcs",[Gge]:"fire-gcs-compat",[Qge]:"fire-fst",[Xge]:"fire-fst-compat",[Yge]:"fire-vertex","fire-js":"fire-js",[Jge]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const l0=new Map,tme=new Map,Ux=new Map;function gq(t,e){try{t.container.addComponent(e)}catch(n){zl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kd(t){const e=t.name;if(Ux.has(e))return zl.debug(`There were multiple attempts to register component ${e}.`),!1;Ux.set(e,t);for(const n of l0.values())gq(n,t);for(const n of tme.values())gq(n,t);return!0}function KE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function co(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},td=new WE("app","Firebase",nme);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sme{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $l("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw td.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mf=Zge;function MK(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Vx,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw td.create("bad-app-name",{appName:String(r)});if(n||(n=PK()),!n)throw td.create("no-options");const i=l0.get(r);if(i){if(Sd(n,i.options)&&Sd(s,i.config))return i;throw td.create("duplicate-app",{appName:r})}const o=new lge(r);for(const l of Ux.values())o.addComponent(l);const a=new sme(n,s,o);return l0.set(r,a),a}function aR(t=Vx){const e=l0.get(t);if(!e&&t===Vx&&PK())return MK();if(!e)throw td.create("no-app",{appName:t});return e}function Oo(t,e,n){let s=eme[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zl.warn(o.join(" "));return}kd(new $l(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rme="firebase-heartbeat-database",ime=1,mb="firebase-heartbeat-store";let EP=null;function FK(){return EP||(EP=Ege(rme,ime,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mb)}catch(n){console.warn(n)}}}}).catch(t=>{throw td.create("idb-open",{originalErrorMessage:t.message})})),EP}async function ome(t){try{const e=(await FK()).transaction(mb),n=await e.objectStore(mb).get(VK(t));return await e.done,n}catch(e){if(e instanceof Zc)zl.warn(e.message);else{const n=td.create("idb-get",{originalErrorMessage:e?.message});zl.warn(n.message)}}}async function mq(t,e){try{const n=(await FK()).transaction(mb,"readwrite");await n.objectStore(mb).put(e,VK(t)),await n.done}catch(n){if(n instanceof Zc)zl.warn(n.message);else{const s=td.create("idb-set",{originalErrorMessage:n?.message});zl.warn(s.message)}}}function VK(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ame=1024,cme=30;class lme{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hme(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=_q();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>cme){const s=dme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_q(),{heartbeatsToSend:n,unsentEntries:s}=ume(this._heartbeatsCache.heartbeats),r=o0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return zl.warn(e),""}}}function _q(){return new Date().toISOString().substring(0,10)}function ume(t,e=ame){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yq(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),yq(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class hme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gpe()?Qpe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await ome(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mq(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return mq(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yq(t){return o0(JSON.stringify({version:2,heartbeats:t})).length}function dme(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fme(t){kd(new $l("platform-logger",e=>new Ige(e),"PRIVATE")),kd(new $l("heartbeat",e=>new lme(e),"PRIVATE")),Oo(Fx,pq,t),Oo(Fx,pq,"esm2020"),Oo("fire-js","")}fme("");function UK(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MM=UK,qK=new WE("auth","Firebase",UK());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u0=new oR("@firebase/auth");function pme(t,...e){u0.logLevel<=St.WARN&&u0.warn(`Auth (${mf}): ${t}`,...e)}function YC(t,...e){u0.logLevel<=St.ERROR&&u0.error(`Auth (${mf}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qc(t,...e){throw VM(t,...e)}function Sa(t,...e){return VM(t,...e)}function FM(t,e,n){const s={...MM(),[e]:n};return new WE("auth","Firebase",s).create(e,{appName:t.name})}function wp(t){return FM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gme(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&qc(t,"argument-error"),FM(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VM(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return qK.create(t,...e)}function Ze(t,e,...n){if(!t)throw VM(e,...n)}function Sl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw YC(e),new Error(e)}function Hl(t,e){t||Sl(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qx(){return typeof self<"u"&&self.location?.href||""}function mme(){return vq()==="http:"||vq()==="https:"}function vq(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _me(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mme()||zpe()||"connection"in navigator)?navigator.onLine:!0}function yme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GE{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hl(n>e,"Short delay should be less than long delay!"),this.isMobile=OM()||xK()}get(){return _me()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UM(t,e){Hl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jK{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wme=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bme=new GE(3e4,6e4);function qM(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function z_(t,e,n,s,r={}){return BK(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=$_({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return $pe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Jc(t.emulatorConfig.host)&&(u.credentials="include"),jK.fetch()(await $K(t,t.config.apiHost,n,a),u)})}async function BK(t,e,n){t._canInitEmulator=!1;const s={...vme,...e};try{const r=new Tme(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw rC(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw rC(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw rC(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw rC(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FM(t,h,u);qc(t,h)}}catch(r){if(r instanceof Zc)throw r;qc(t,"network-request-failed",{message:String(r)})}}async function Eme(t,e,n,s,r={}){const i=await z_(t,e,n,s,r);return"mfaPendingCredential"in i&&qc(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function $K(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?UM(t.config,r):`${t.config.apiScheme}://${r}`;return wme.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class Tme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Sa(this.auth,"network-request-failed")),bme.get())})}}function rC(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Sa(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Cme(t,e){return z_(t,"POST","/v1/accounts:delete",e)}async function h0(t,e){return z_(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ew(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jM(t,e=!1){const n=ln(t),s=await n.getIdToken(e),r=BM(s);Ze(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:ew(TP(r.auth_time)),issuedAtTime:ew(TP(r.iat)),expirationTime:ew(TP(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function TP(t){return Number(t)*1e3}function BM(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return YC("JWT malformed, contained fewer than 3 sections"),null;try{const r=a0(n);return r?JSON.parse(r):(YC("Failed to decode base64 JWT payload"),null)}catch(r){return YC("Caught error parsing JWT payload as JSON",r?.toString()),null}}function wq(t){const e=BM(t);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _b(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zc&&Ime(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Ime({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ew(this.lastLoginAt),this.creationTime=ew(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function d0(t){const e=t.auth,n=await t.getIdToken(),s=await _b(t,h0(e,{idToken:n}));Ze(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?zK(r.providerUserInfo):[],o=kme(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new jx(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function $M(t){const e=ln(t);await d0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kme(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function zK(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Rme(t,e){const n=await BK(t,{},async()=>{const s=$_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await $K(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&Jc(t.emulatorConfig.host)&&(l.credentials="include"),jK.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ame(t,e){return z_(t,"POST","/v2/accounts:revokeToken",qM(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wq(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ze(e.length!==0,"internal-error");const n=wq(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Rme(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new wm;return s&&(Ze(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ze(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ze(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wm,this.toJSON())}_performRefresh(){return Sl("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mh(t,e){Ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fa{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Sme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new jx(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await _b(this,this.stsTokenManager.getToken(this.auth,e));return Ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jM(this,e)}reload(){return $M(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await d0(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(co(this.auth.app))return Promise.reject(wp(this.auth));const e=await this.getIdToken();return await _b(this,Cme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;Ze(d&&k,e,"internal-error");const P=wm.fromJSON(this.name,k);Ze(typeof d=="string",e,"internal-error"),mh(s,e.name),mh(r,e.name),Ze(typeof p=="boolean",e,"internal-error"),Ze(typeof m=="boolean",e,"internal-error"),mh(i,e.name),mh(o,e.name),mh(a,e.name),mh(l,e.name),mh(u,e.name),mh(h,e.name);const D=new fa({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(D.providerData=w.map(M=>({...M}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,n,s=!1){const r=new wm;r.updateFromServerResponse(n);const i=new fa({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await d0(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ze(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?zK(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new wm;a.updateFromIdToken(s);const l=new fa({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new jx(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bq=new Map;function kl(t){Hl(t instanceof Function,"Expected a class definition");let e=bq.get(t);return e?(Hl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bq.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HK{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HK.type="NONE";const f0=HK;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XC(t,e,n){return`firebase:${t}:${e}:${n}`}class bm{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=XC(this.userKey,r.apiKey,i),this.fullPersistenceKey=XC("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await h0(this.auth,{idToken:e}).catch(()=>{});return n?fa._fromGetAccountInfoResponse(this.auth,n,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new bm(kl(f0),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||kl(f0);const o=XC(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await h0(e,{idToken:h}).catch(()=>{});if(!p)break;d=await fa._fromGetAccountInfoResponse(e,p,h)}else d=fa._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new bm(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new bm(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Eq(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QK(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WK(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XK(e))return"Blackberry";if(JK(e))return"Webos";if(KK(e))return"Safari";if((e.includes("chrome/")||GK(e))&&!e.includes("edge/"))return"Chrome";if(YK(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function WK(t=ti()){return/firefox\//i.test(t)}function KK(t=ti()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GK(t=ti()){return/crios\//i.test(t)}function QK(t=ti()){return/iemobile/i.test(t)}function YK(t=ti()){return/android/i.test(t)}function XK(t=ti()){return/blackberry/i.test(t)}function JK(t=ti()){return/webos/i.test(t)}function zM(t=ti()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Pme(t=ti()){return zM(t)&&!!window.navigator?.standalone}function Nme(){return Hpe()&&document.documentMode===10}function ZK(t=ti()){return zM(t)||YK(t)||JK(t)||XK(t)||/windows phone/i.test(t)||QK(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eG(t,e=[]){let n;switch(t){case"Browser":n=Eq(ti());break;case"Worker":n=`${Eq(ti())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mf}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Ome(t,e={}){return z_(t,"GET","/v2/passwordPolicy",qM(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dme=6;class Lme{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Dme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mme{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tq(this),this.idTokenSubscription=new Tq(this),this.beforeStateQueue=new xme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qK,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kl(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await h0(this,{idToken:e}),s=await fa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(co(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await d0(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(co(this.app))return Promise.reject(wp(this));const n=e?ln(e):null;return n&&Ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return co(this.app)?Promise.reject(wp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return co(this.app)?Promise.reject(wp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ome(this),n=new Lme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new WE("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ame(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kl(e)||this._popupRedirectResolver;Ze(n,this,"argument-error"),this.redirectPersistenceManager=await bm.create(this,[kl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(co(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pme(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cR(t){return ln(t)}class Tq{constructor(e){this.auth=e,this.observer=null,this.addObserver=nge(n=>this.observer=n)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let HM={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fme(t){HM=t}function Vme(t){return HM.loadJS(t)}function Ume(){return HM.gapiScript}function qme(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WM(t,e){const n=KE(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Sd(r,e??{}))return s;qc(s,"already-initialized")}return n.initialize({options:e})}function jme(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(kl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function KM(t,e,n){const s=cR(t);Ze(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=tG(e),{host:o,port:a}=Bme(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ze(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ze(Sd(u,s.config.emulator)&&Sd(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Jc(o)?(sR(`${i}//${o}${l}`),rR("Auth",!0)):$me()}function tG(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Bme(t){const e=tG(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Cq(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Cq(o)}}}function Cq(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $me(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sl("not implemented")}_getIdTokenResponse(e){return Sl("not implemented")}_linkToIdToken(e,n){return Sl("not implemented")}_getReauthenticationResolver(e){return Sl("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Em(t,e){return Eme(t,"POST","/v1/accounts:signInWithIdp",qM(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zme="http://localhost";class Wl extends lR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Wl(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Em(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Em(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Em(e,n)}buildRequest(){const e={requestUri:zme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$_(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QE extends GM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pc extends QE{constructor(){super("facebook.com")}static credential(e){return Wl._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pc.credential(e.oauthAccessToken)}catch{return null}}}pc.FACEBOOK_SIGN_IN_METHOD="facebook.com";pc.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ca extends QE{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wl._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ca.credential(n,s)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gc extends QE{constructor(){super("github.com")}static credential(e){return Wl._fromParams({providerId:gc.PROVIDER_ID,signInMethod:gc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gc.credentialFromTaggedObject(e)}static credentialFromError(e){return gc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gc.credential(e.oauthAccessToken)}catch{return null}}}gc.GITHUB_SIGN_IN_METHOD="github.com";gc.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mc extends QE{constructor(){super("twitter.com")}static credential(e,n){return Wl._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return mc.credential(n,s)}catch{return null}}}mc.TWITTER_SIGN_IN_METHOD="twitter.com";mc.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await fa._fromIdTokenResponse(e,s,r),o=Iq(s);return new Zm({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Iq(s);return new Zm({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Iq(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p0 extends Zc{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,p0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new p0(e,n,s,r)}}function nG(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?p0._fromErrorAndOperation(t,r,e,s):r})}async function Hme(t,e,n=!1){const s=await _b(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zm._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Wme(t,e,n=!1){const{auth:s}=t;if(co(s.app))return Promise.reject(wp(s));const r="reauthenticate";try{const i=await _b(t,nG(s,r,e,t),n);Ze(i.idToken,s,"internal-error");const o=BM(i.idToken);Ze(o,s,"internal-error");const{sub:a}=o;return Ze(t.uid===a,s,"user-mismatch"),Zm._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&qc(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Kme(t,e,n=!1){if(co(t.app))return Promise.reject(wp(t));const s="signIn",r=await nG(t,s,e),i=await Zm._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function QM(t,e,n,s){return ln(t).onIdTokenChanged(e,n,s)}function YM(t,e,n){return ln(t).beforeAuthStateChanged(e,n)}function XM(t,e,n,s){return ln(t).onAuthStateChanged(e,n,s)}function Jf(t){return ln(t).signOut()}const g0="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sG{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(g0,"1"),this.storage.removeItem(g0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gme=1e3,Qme=10;class rG extends sG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);Nme()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Qme):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Gme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rG.type="LOCAL";const JM=rG;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iG extends sG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iG.type="SESSION";const uR=iG;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hR{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new hR(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await Yme(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hR.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZM(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=ZM("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bc(){return window}function Jme(t){bc().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oG(){return typeof bc().WorkerGlobalScope<"u"&&typeof bc().importScripts=="function"}async function Zme(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e_e(){return navigator?.serviceWorker?.controller||null}function t_e(){return oG()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aG="firebaseLocalStorageDb",n_e=1,m0="firebaseLocalStorage",cG="fbase_key";class YE{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dR(t,e){return t.transaction([m0],e?"readwrite":"readonly").objectStore(m0)}function s_e(){const t=indexedDB.deleteDatabase(aG);return new YE(t).toPromise()}function Bx(){const t=indexedDB.open(aG,n_e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(m0,{keyPath:cG})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(m0)?e(s):(s.close(),await s_e(),e(await Bx()))})})}async function Sq(t,e,n){const s=dR(t,!0).put({[cG]:e,value:n});return new YE(s).toPromise()}async function r_e(t,e){const n=dR(t,!1).get(e),s=await new YE(n).toPromise();return s===void 0?null:s.value}function kq(t,e){const n=dR(t,!0).delete(e);return new YE(n).toPromise()}const i_e=800,o_e=3;class lG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>o_e)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hR._getInstance(t_e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Zme(),!this.activeServiceWorker)return;this.sender=new Xme(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e_e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bx();return await Sq(e,g0,"1"),await kq(e,g0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Sq(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>r_e(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kq(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=dR(r,!1).getAll();return new YE(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i_e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lG.type="LOCAL";const e2=lG;new GE(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uG(t,e){return e?kl(e):(Ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t2 extends lR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Em(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Em(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Em(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a_e(t){return Kme(t.auth,new t2(t),t.bypassAuthState)}function c_e(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),Wme(n,new t2(t),t.bypassAuthState)}async function l_e(t){const{auth:e,user:n}=t;return Ze(n,e,"internal-error"),Hme(n,new t2(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hG{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a_e;case"linkViaPopup":case"linkViaRedirect":return l_e;case"reauthViaPopup":case"reauthViaRedirect":return c_e;default:qc(this.auth,"internal-error")}}resolve(e){Hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u_e=new GE(2e3,1e4);async function n2(t,e,n){if(co(t.app))return Promise.reject(Sa(t,"operation-not-supported-in-this-environment"));const s=cR(t);gme(t,e,GM);const r=uG(s,n);return new tp(s,"signInViaPopup",e,r).executeNotNull()}class tp extends hG{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,tp.currentPopupAction&&tp.currentPopupAction.cancel(),tp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Hl(this.filter.length===1,"Popup operations only handle one event");const e=ZM();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tp.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u_e.get())};e()}}tp.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h_e="pendingRedirect",JC=new Map;class d_e extends hG{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=JC.get(this.auth._key());if(!e){try{const n=await f_e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}JC.set(this.auth._key(),e)}return this.bypassAuthState||JC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f_e(t,e){const n=m_e(e),s=g_e(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function p_e(t,e){JC.set(t._key(),e)}function g_e(t){return kl(t._redirectPersistence)}function m_e(t){return XC(h_e,t.config.apiKey,t.name)}async function __e(t,e,n=!1){if(co(t.app))return Promise.reject(wp(t));const s=cR(t),r=uG(s,e),i=await new d_e(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const y_e=600*1e3;class v_e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w_e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!dG(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sa(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y_e&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rq(e))}saveEventToCache(e){this.cachedEventUids.add(Rq(e)),this.lastProcessedEventTime=Date.now()}}function Rq(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dG({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function w_e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dG(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function b_e(t,e={}){return z_(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const E_e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T_e=/^https?/;async function C_e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b_e(t);for(const n of e)try{if(I_e(n))return}catch{}qc(t,"unauthorized-domain")}function I_e(t){const e=qx(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!T_e.test(n))return!1;if(E_e.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const S_e=new GE(3e4,6e4);function Aq(){const t=bc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function k_e(t){return new Promise((e,n)=>{function s(){Aq(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Aq(),n(Sa(t,"network-request-failed"))},timeout:S_e.get()})}if(bc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bc().gapi?.load)s();else{const r=qme("iframefcb");return bc()[r]=()=>{gapi.load?s():n(Sa(t,"network-request-failed"))},Vme(`${Ume()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ZC=null,e})}let ZC=null;function R_e(t){return ZC=ZC||k_e(t),ZC}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const A_e=new GE(5e3,15e3),P_e="__/auth/iframe",N_e="emulator/auth/iframe",x_e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O_e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D_e(t){const e=t.config;Ze(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?UM(e,N_e):`https://${t.config.authDomain}/${P_e}`,s={apiKey:e.apiKey,appName:t.name,v:mf},r=O_e.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${$_(s).slice(1)}`}async function L_e(t){const e=await R_e(t),n=bc().gapi;return Ze(n,t,"internal-error"),e.open({where:document.body,url:D_e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x_e,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Sa(t,"network-request-failed"),a=bc().setTimeout(()=>{i(o)},A_e.get());function l(){bc().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const M_e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F_e=500,V_e=600,U_e="_blank",q_e="http://localhost";class Pq{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j_e(t,e,n,s=F_e,r=V_e){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...M_e,width:s.toString(),height:r.toString(),top:i,left:o},u=ti().toLowerCase();n&&(a=GK(u)?U_e:n),WK(u)&&(e=e||q_e,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(Pme(u)&&a!=="_self")return B_e(e||"",a),new Pq(null);const d=window.open(e||"",a,h);Ze(d,t,"popup-blocked");try{d.focus()}catch{}return new Pq(d)}function B_e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $_e="__/auth/handler",z_e="emulator/auth/handler",H_e=encodeURIComponent("fac");async function Nq(t,e,n,s,r,i){Ze(t.config.authDomain,t,"auth-domain-config-required"),Ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:mf,eventId:r};if(e instanceof GM){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Dx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof QE){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${H_e}=${encodeURIComponent(l)}`:"";return`${W_e(t)}?${$_(a).slice(1)}${u}`}function W_e({config:t}){return t.emulator?UM(t,z_e):`https://${t.authDomain}/${$_e}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CP="webStorageSupport";class K_e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uR,this._completeRedirectFn=__e,this._overrideRedirectResult=p_e}async _openPopup(e,n,s,r){Hl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Nq(e,n,s,qx(),r);return j_e(e,i,ZM())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Nq(e,n,s,qx(),r);return Jme(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Hl(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await L_e(e),s=new v_e(e);return n.register("authEvent",r=>(Ze(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(CP,{type:CP},s=>{const r=s?.[0]?.[CP];r!==void 0&&n(!!r),qc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=C_e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZK()||KK()||zM()}}const s2=K_e;var xq="@firebase/auth",Oq="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G_e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q_e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y_e(t){kd(new $l("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ze(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eG(t)},u=new Mme(s,r,i,l);return jme(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),kd(new $l("auth-internal",e=>{const n=cR(e.getProvider("auth").getImmediate());return(s=>new G_e(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oo(xq,Oq,Q_e(t)),Oo(xq,Oq,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const X_e=300,J_e=NK("authIdTokenMaxAge")||X_e;let Dq=null;const Z_e=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>J_e)return;const r=n?.token;Dq!==r&&(Dq=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function r2(t=aR()){const e=KE(t,"auth");if(e.isInitialized())return e.getImmediate();const n=WM(t,{popupRedirectResolver:s2,persistence:[e2,JM,uR]}),s=NK("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Z_e(i.toString());YM(n,o,()=>o(n.currentUser)),QM(n,a=>o(a))}}const r=AK("auth");return r&&KM(n,`http://${r}`),n}function eye(){return document.getElementsByTagName("head")?.[0]??document}Fme({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Sa("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",eye().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y_e("Browser");var Lq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nd,fG;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(C,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(C,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var C=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)C[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)C[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+C[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+C[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+C[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+C[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,C=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(C[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,C),S=0;break}}else for(;E<v;)if(C[S++]=I[E++],S==this.blockSize){r(this,C),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var C=0;32>C;C+=8)I[y++]=this.g[v]>>>C&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],C=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;C&&E==v||(y[S]=E,C=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,C=0;I>=y;C++)v[C]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),C=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),C=C.j(E).add(u(b))):(C=C.j(y),C=C.add(u(b)))}return C}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var C=this.i(y);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,C="";;){var S=q(y,v).g;y=D(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+C;for(;6>E.length;)E="0"+E;C=E+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=D(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],C=0;C<v;C++)y[C]=~I.g[C];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0,S=0;S<=v;S++){var E=C+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);C=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function D(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],C=0;C<2*v;C++)y[C]=0;for(C=0;C<this.g.length;C++)for(var S=0;S<I.g.length;S++){var E=this.i(C)>>>16,b=this.i(C)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*C+2*S]+=b*ne,M(y,2*C+2*S),y[2*C+2*S+1]+=E*ne,M(y,2*C+2*S+1),y[2*C+2*S+1]+=b*K,M(y,2*C+2*S+1),y[2*C+2*S+2]+=E*K,M(y,2*C+2*S+2)}for(C=0;C<v;C++)y[C]=y[2*C+1]<<16|y[2*C];for(C=v;C<2*v;C++)y[C]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,C=v;0>=C.l(I);)y=H(y),C=H(C);var S=X(y,1),E=X(C,1);for(C=X(C,2),y=X(y,2);!w(C);){var b=E.add(C);0>=b.l(I)&&(S=S.add(y),E=b),C=X(C,1),y=X(y,1)}return v=D(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(y)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),E=u(y),b=E.j(v);k(b)||0<b.l(I);)y-=C,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=D(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)&I.i(C);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)|I.i(C);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)^I.i(C);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],C=0;C<v;C++)y[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(y,I.h)}function X(I,v){var y=v>>5;v%=32;for(var C=I.g.length-y,S=[],E=0;E<C;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,fG=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,nd=o}).apply(typeof Lq<"u"?Lq:typeof self<"u"?self:typeof window<"u"?window:{});var iC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pG,Ev,gG,eI,$x,mG,_G,yG;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof iC=="object"&&iC];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var O=g++;return{value:f(O,c[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,O){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[N].apply(_,z)}}function k(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,O=_.length||0;c.length=N+O;for(let z=0;z<O;z++)c[N+z]=_[z]}else c.push(_)}}class D{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let O=0;O<y.length;O++)g=y[O],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Ht;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new D(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,we=!1,Ht=new K,It=()=>{const c=a.Promise.resolve(void 0);ce=()=>{c.then(xt)}};var xt=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}we=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Kt(c,f){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(H){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ct[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Kt.aa.h.call(this)}}w(Kt,Ee);var ct={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Y,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function A(c){this.src=c,this.g={},this.h=0}A.prototype.add=function(c,f,g,_,N){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var z=R(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new G(f,this.src,O,!!_,N),f.fa=g,c.push(f)),f};function T(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),O;(O=0<=N)&&Array.prototype.splice.call(_,N,1),O&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function R(c,f,g,_){for(var N=0;N<c.length;++N){var O=c[N];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var O=0;O<f.length;O++)U(c,f[O],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,O){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,ye=Z(c);if(ye||(c[x]=ye=new A(c)),g=ye.add(f,g,_,z,O),g.proxy)return g;if(_=W(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)yn||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Q(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function c(g){return f.call(c.src,c.listener,g)}const f=J;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var O=0;O<f.length;O++)$(c,f[O],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(O=c.g[f],g=R(O,g,_,N),-1<g&&(ee(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=R(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])T(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(T(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Q(c){return c in L?L[c]:L[c]="on"+c}function J(c,f){if(c.da)c=!0;else{f=new Kt(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof A?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ke.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,ke),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new Ee(f,c);else if(f instanceof Ee)f.target=f.target||c;else{var N=f;f=new Ee(_,c),C(f,N)}if(N=!0,g)for(var O=g.length-1;0<=O;O--){var z=f.g=g[O];N=be(z,_,!0,f)&&N}if(z=f.g=c,N=be(z,_,!0,f)&&N,N=be(z,_,!1,f)&&N,g)for(O=0;O<g.length;O++)z=f.g=g[O],N=be(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function be(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,O=0;O<f.length;++O){var z=f[O];if(z&&!z.da&&z.capture==g){var ye=z.listener,Le=z.ha||z.src;z.fa&&T(c.i,z),N=ye.call(Le,_)!==!1&&N}}return N&&!_.defaultPrevented}function De(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function rt(c){c.g=De(()=>{c.g=null,c.i&&(c.i=!1,rt(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class yt extends ke{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(c){ke.call(this),this.h=c,this.g={}}w(mt,ke);var us=[];function _t(c){X(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}mt.prototype.N=function(){mt.aa.N.call(this),_t(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=a.JSON.stringify,Wn=a.JSON.parse,Ri=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ai(){}Ai.prototype.h=null;function Tu(c){return c.h||(c.h=c.i())}function Cu(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $o(){Ee.call(this,"d")}w($o,Ee);function zo(){Ee.call(this,"c")}w(zo,Ee);var qn={},Iu=null;function Pi(){return Iu=Iu||new re}qn.La="serverreachability";function Su(c){Ee.call(this,qn.La,c)}w(Su,Ee);function ar(c){const f=Pi();se(f,new Su(f))}qn.STAT_EVENT="statevent";function ku(c,f){Ee.call(this,qn.STAT_EVENT,c),this.stat=f}w(ku,Ee);function Xe(c){const f=Pi();se(f,new ku(f,c))}qn.Ma="timingevent";function Ru(c,f){Ee.call(this,qn.Ma,c),this.size=f}w(Ru,Ee);function cr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function lr(){this.g=!0}lr.prototype.xa=function(){this.g=!1};function by(c,f,g,_,N,O){c.info(function(){if(c.g)if(O)for(var z="",ye=O.split("&"),Le=0;Le<ye.length;Le++){var pe=ye[Le].split("=");if(1<pe.length){var Ue=pe[0];pe=pe[1];var nt=Ue.split("_");z=2<=nt.length&&nt[1]=="type"?z+(Ue+"="+pe+"&"):z+(Ue+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function Ey(c,f,g,_,N,O,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+O+" "+z})}function hs(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Cy(c,g)+(_?" "+_:"")})}function Ty(c,f){c.info(function(){return"TIMEOUT: "+f})}lr.prototype.info=function(){};function Cy(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Ye(g)}catch{return f}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ho;function xi(){}w(xi,Ai),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},Ho=new xi;function vn(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var Nu={},Wo={};function Ko(c,f,g){c.L=1,c.v=Mi(an(f)),c.m=g,c.P=!0,xu(c,null)}function xu(c,f){c.F=Date.now(),Oi(c),c.A=an(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),Wu(g.i,"t",_),c.C=0,g=c.j.J,c.h=new Pu,c.g=uh(c.j,g?f:null,!c.m),0<c.O&&(c.M=new yt(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(us[0]=N.toString()),N=us);for(var O=0;O<N.length;O++){var z=U(g,N[O],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),ar(),by(c.i,c.u,c.A,c.l,c.R,c.m)}vn.prototype.ca=function(c){c=c.target;const f=this.M;f&&cn(c)==3?f.j():this.Y(c)},vn.prototype.Y=function(c){try{if(c==this.g)e:{const nt=cn(this.g);var f=this.g.Ba();const ps=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||nt!=4||f==7||(f==8||0>=ps?ar(3):ar(2)),Go(this);var g=this.g.Z();this.X=g;t:if(Ou(this)){var _=Zu(this.g);c="";var N=_.length,O=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),ur(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(O&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,Ey(this.i,this.u,this.A,this.l,this.R,nt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Le=this.g;if((ye=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ye)){var pe=ye;break t}}pe=null}if(g=pe)hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,g);else{this.o=!1,this.s=3,Xe(12),jn(this),ur(this);break e}}if(this.P){g=!0;let Ut;for(;!this.J&&this.C<z.length;)if(Ut=Iy(this,z),Ut==Wo){nt==4&&(this.s=4,Xe(14),g=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Nu){this.s=4,Xe(15),hs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else hs(this.i,this.l,Ut,null),Qo(this,Ut);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||z.length!=0||this.h.h||(this.s=1,Xe(16),g=!1),this.o=this.o&&g,!g)hs(this.i,this.l,z,"[Invalid Chunked Response]"),jn(this),ur(this);else if(0<z.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ta(Ue),Ue.M=!0,Xe(11))}}else hs(this.i,this.l,z,null),Qo(this,z);nt==4&&jn(this),this.o&&!this.J&&(nt==4?oh(this.j,this):(this.o=!1,Oi(this)))}else By(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),jn(this),ur(this)}}}catch{}finally{}};function Ou(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Iy(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?Wo:(g=Number(f.substring(g,_)),isNaN(g)?Nu:(_+=1,_+g>f.length?Wo:(f=f.slice(_,_+g),c.C=_+g,f)))}vn.prototype.cancel=function(){this.J=!0,jn(this)};function Oi(c){c.S=Date.now()+c.I,Du(c,c.I)}function Du(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=cr(p(c.ba,c),f)}function Go(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ty(this.i,this.A),this.L!=2&&(ar(),Xe(17)),jn(this),this.s=2,ur(this)):Du(this,this.S-c)};function ur(c){c.j.G==0||c.J||oh(c.j,c)}function jn(c){Go(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,_t(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Qo(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Yo(g.h,c))){if(!c.K&&Yo(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Bi(g),qi(g);else break e;ea(g),Xe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=cr(p(g.Za,g),6e3));if(1>=Fu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $n(g,11)}else if((c.K||g.g==c)&&Bi(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let pe=N[f];if(g.T=pe[0],pe=pe[1],g.G==2)if(pe[0]=="c"){g.K=pe[1],g.ia=pe[2];const Ue=pe[3];Ue!=null&&(g.la=Ue,g.j.info("VER="+g.la));const nt=pe[4];nt!=null&&(g.Aa=nt,g.j.info("SVER="+g.Aa));const ps=pe[5];ps!=null&&typeof ps=="number"&&0<ps&&(_=1.5*ps,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ut=c.g;if(Ut){const zi=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var O=_.h;O.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Xo(O,O.h),O.h=null))}if(_.D){const na=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;na&&(_.ya=na,ve(_.I,_.D,na))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=lh(_,_.J?_.ia:null,_.W),z.K){Vu(_.h,z);var ye=z,Le=_.L;Le&&(ye.I=Le),ye.B&&(Go(ye),Oi(ye)),_.g=z}else rh(_);0<g.i.length&&ji(g)}else pe[0]!="stop"&&pe[0]!="close"||$n(g,7);else g.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?$n(g,7):Zo(g):pe[0]!="noop"&&g.l&&g.l.ta(pe),g.v=0)}}ar(4)}catch{}}var Sy=class{constructor(c,f){this.g=c,this.map=f}};function Lu(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fu(c){return c.h?1:c.g?c.g.size:0}function Yo(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Xo(c,f){c.g?c.g.add(f):c.h=f}function Vu(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Lu.prototype.cancel=function(){if(this.i=Uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return k(c.i)}function ky(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function Ry(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function qu(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=Ry(c),_=ky(c),N=_.length,O=0;O<N;O++)f.call(void 0,_[O],g&&g[O],c)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ay(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var O=c[g].substring(0,_);N=c[g].substring(_+1)}else O=c[g];f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Bn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bn){this.h=c.h,Di(this,c.j),this.o=c.o,this.g=c.g,Li(this,c.s),this.l=c.l;var f=c.i,g=new fr;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Bu(this,g),this.m=c.m}else c&&(f=String(c).match(ju))?(this.h=!1,Di(this,f[1]||"",!0),this.o=hr(f[2]||""),this.g=hr(f[3]||"",!0),Li(this,f[4]),this.l=hr(f[5]||"",!0),Bu(this,f[6]||"",!0),this.m=hr(f[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Bn.prototype.toString=function(){var c=[],f=this.j;f&&c.push(dr(f,$u,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(dr(f,$u,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(dr(g,g.charAt(0)=="/"?xy:Ny,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",dr(g,Dy)),c.join("")};function an(c){return new Bn(c)}function Di(c,f,g){c.j=g?hr(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Li(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Bu(c,f,g){f instanceof fr?(c.i=f,Ly(c.i,c.h)):(g||(f=dr(f,Oy)),c.i=new fr(f,c.h))}function ve(c,f,g){c.i.set(f,g)}function Mi(c){return ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function hr(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function dr(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Py),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Py(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $u=/[#\/\?@]/g,Ny=/[#\?:]/g,xy=/[#\?]/g,Oy=/[#\?@]/g,Dy=/#/g;function fr(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ay(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fr.prototype,t.add=function(c,f){wn(this),this.i=null,c=ds(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function zu(c,f){wn(c),f=ds(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Hu(c,f){return wn(c),f=ds(c,f),c.g.has(f)}t.forEach=function(c,f){wn(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){wn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let O=0;O<N.length;O++)g.push(f[_])}return g},t.V=function(c){wn(this);let f=[];if(typeof c=="string")Hu(this,c)&&(f=f.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return wn(this),this.i=null,c=ds(this,c),Hu(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Wu(c,f,g){zu(c,f),0<g.length&&(c.i=null,c.g.set(ds(c,f),k(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=O;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function ds(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Ly(c,f){f&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(zu(this,_),Wu(this,N,g))},c)),c.j=f}function My(c,f){const g=new lr;if(a.Image){const _=new Image;_.onload=m(bn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(bn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(bn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(bn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Fy(c,f){const g=new lr,_=new AbortController,N=setTimeout(()=>{_.abort(),bn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(O=>{clearTimeout(N),O.ok?bn(g,"TestPingServer: ok",!0,f):bn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),bn(g,"TestPingServer: error",!1,f)})}function bn(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Vy(){this.g=new Ri}function Uy(c,f,g){const _=g||"";try{qu(c,function(N,O){let z=N;u(N)&&(z=Ye(N)),f.push(_+O+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Fi(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Fi,Ai),Fi.prototype.g=function(){return new Vi(this.l,this.j)},Fi.prototype.i=function(c){return function(){return c}}({});function Vi(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Vi,re),t=Vi.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,gr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ku(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ku(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?pr(this):gr(this),this.readyState==3&&Ku(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},t.Qa=function(c){this.g&&(this.response=c,pr(this))},t.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,gr(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gu(c){let f="";return X(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Jo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Gu(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ve(c,f,g))}function Te(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Te,re);var qy=/^https?$/i,jy=["POST","PUT"];t=Te.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ho.g(),this.v=this.o?Tu(this.o):Tu(Ho),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(O){Qu(this,O);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())g.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jy,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ju(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){Qu(this,O)}};function Qu(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Yu(c),Ui(c)}function Yu(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),Ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xu(this):this.bb())},t.bb=function(){Xu(this)};function Xu(c){if(c.h&&typeof o<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)De(c.Ea,0,c);else if(se(c,"readystatechange"),cn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(ju)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!qy.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var O=2<cn(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",Yu(c)}}finally{Ui(c)}}}}function Ui(c,f){if(c.g){Ju(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Ju(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Wn(f)}};function Zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function By(c){const f={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[N]||[];f[N]=O,O.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function eh(c){this.Aa=0,this.i=[],this.j=new lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,c),this.cb=mr("retryDelaySeedMs",1e4,c),this.Wa=mr("forwardChannelMaxRetries",2,c),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lu(c&&c.concurrentRequestLimit),this.Da=new Vy,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Xe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=lh(this,null,this.W),ji(this)};function Zo(c){if(th(c),c.G==3){var f=c.U++,g=an(c.I);if(ve(g,"SID",c.K),ve(g,"RID",f),ve(g,"TYPE","terminate"),_r(c,g),f=new vn(c,c.j,f),f.L=2,f.v=Mi(an(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=uh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Oi(f)}ch(c)}function qi(c){c.g&&(ta(c),c.g.cancel(),c.g=null)}function th(c){qi(c),c.u&&(a.clearTimeout(c.u),c.u=null),Bi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ji(c){if(!Mu(c.h)&&!c.s){c.s=!0;var f=c.Ga;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.B=0}}function $y(c,f){return Fu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=cr(p(c.Ga,c,f),ah(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new vn(this,this.j,c);let O=this.o;if(this.S&&(O?(O=v(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=sh(this,N,f),g=an(this.I),ve(g,"RID",c),ve(g,"CVER",22),this.D&&ve(g,"X-HTTP-Session-Id",this.D),_r(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(Gu(O)))+"&"+f:this.m&&Jo(g,this.m,O)),Xo(this.h,N),this.Ua&&ve(g,"TYPE","init"),this.P?(ve(g,"$req",f),ve(g,"SID","null"),N.T=!0,Ko(N,g,null)):Ko(N,g,f),this.G=2}}else this.G==3&&(c?nh(this,c):this.i.length==0||Mu(this.h)||nh(this))};function nh(c,f){var g;f?g=f.l:g=c.U++;const _=an(c.I);ve(_,"SID",c.K),ve(_,"RID",g),ve(_,"AID",c.T),_r(c,_),c.m&&c.o&&Jo(_,c.m,c.o),g=new vn(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=sh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xo(c.h,g),Ko(g,_,f)}function _r(c,f){c.H&&X(c.H,function(g,_){ve(f,_,g)}),c.l&&qu({},function(g,_){ve(f,_,g)})}function sh(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ye=!0;for(let Le=0;Le<g;Le++){let pe=N[Le].g;const Ue=N[Le].map;if(pe-=O,0>pe)O=Math.max(0,N[Le].g-100),ye=!1;else try{Uy(Ue,z,"req"+pe+"_")}catch{_&&_(Ue)}}if(ye){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function rh(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.v=0}}function ea(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=cr(p(c.Fa,c),ah(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=cr(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),qi(this),ih(this))};function ta(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ih(c){c.g=new vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=an(c.qa);ve(f,"RID","rpc"),ve(f,"SID",c.K),ve(f,"AID",c.T),ve(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ve(f,"TO",c.ja),ve(f,"TYPE","xmlhttp"),_r(c,f),c.m&&c.o&&Jo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Mi(an(f)),g.m=null,g.P=!0,xu(g,c)}t.Za=function(){this.C!=null&&(this.C=null,qi(this),ea(this),Xe(19))};function Bi(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function oh(c,f){var g=null;if(c.g==f){Bi(c),ta(c),c.g=null;var _=2}else if(Yo(c.h,f))g=f.D,Vu(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Pi(),se(_,new Ru(_,g)),ji(c)}else rh(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&$y(c,f)||_==2&&ea(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:$n(c,5);break;case 4:$n(c,10);break;case 3:$n(c,6);break;default:$n(c,2)}}}function ah(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function $n(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new Bn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Di(_,"https"),Mi(_),N?My(_.toString(),g):Fy(_.toString(),g)}else Xe(2);c.G=0,c.l&&c.l.sa(f),ch(c),th(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function ch(c){if(c.G=0,c.ka=[],c.l){const f=Uu(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function lh(c,f,g){var _=g instanceof Bn?an(g):new Bn(g);if(_.g!="")f&&(_.g=f+"."+_.g),Li(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var O=new Bn(null);_&&Di(O,_),f&&(O.g=f),N&&Li(O,N),g&&(O.l=g),_=O}return g=c.D,f=c.ya,g&&f&&ve(_,g,f),ve(_,"VER",c.la),_r(c,_),_}function uh(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Te(new Fi({eb:g})):new Te(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}t=hh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $i(){}$i.prototype.g=function(c,f){return new gt(c,f)};function gt(c,f){re.call(this),this.g=new eh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new fs(this)}w(gt,re),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Zo(this.g)},gt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Ye(c),c=g);f.i.push(new Sy(f.Ya++,c)),f.G==3&&ji(f)},gt.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,gt.aa.N.call(this)};function dh(c){$o.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(dh,$o);function fh(){zo.call(this),this.status=1}w(fh,zo);function fs(c){this.g=c}w(fs,hh),fs.prototype.ua=function(){se(this.g,"a")},fs.prototype.ta=function(c){se(this.g,new dh(c))},fs.prototype.sa=function(c){se(this.g,new fh)},fs.prototype.ra=function(){se(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,yG=function(){return new $i},_G=function(){return Pi()},mG=qn,$x={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,eI=Ni,Au.COMPLETE="complete",gG=Au,Cu.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",re.prototype.listen=re.prototype.K,Ev=Cu,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,pG=Te}).apply(typeof iC<"u"?iC:typeof self<"u"?self:typeof window<"u"?window:{});const Mq="@firebase/firestore",Fq="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Vr=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let H_="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vp=new oR("@firebase/firestore");function Gg(){return Vp.logLevel}function Ce(t,...e){if(Vp.logLevel<=St.DEBUG){const n=e.map(i2);Vp.debug(`Firestore (${H_}): ${t}`,...n)}}function Kl(t,...e){if(Vp.logLevel<=St.ERROR){const n=e.map(i2);Vp.error(`Firestore (${H_}): ${t}`,...n)}}function e_(t,...e){if(Vp.logLevel<=St.WARN){const n=e.map(i2);Vp.warn(`Firestore (${H_}): ${t}`,...n)}}function i2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $e(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,vG(t,s,n)}function vG(t,e,n){let s=`FIRESTORE (${H_}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Kl(s),new Error(s)}function sn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||vG(e,r,s)}function dt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Zc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sd{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vr.UNAUTHENTICATED))}shutdown(){}}class nye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class sye{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){sn(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new sd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sd,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sd)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(sn(typeof s.accessToken=="string",31837,{l:s}),new wG(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return sn(e===null||typeof e=="string",2055,{h:e}),new Vr(e)}}class rye{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iye{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new rye(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oye{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,co(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){sn(this.o===void 0,3512);const s=i=>{i.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vq(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(sn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vq(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aye(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=aye(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ot(t,e){return t<e?-1:t>e?1:0}function zx(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return IP(r)===IP(i)?Ot(r,i):IP(r)?1:-1}return Ot(t.length,e.length)}const cye=55296,lye=57343;function IP(t){const e=t.charCodeAt(0);return e>=cye&&e<=lye}function t_(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uq="__name__";class cc{constructor(e,n,s){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&$e(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return cc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=cc.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ot(e.length,n.length)}static compareSegments(e,n){const s=cc.isNumericId(e),r=cc.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?cc.extractNumericId(e).compare(cc.extractNumericId(n)):zx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nd.fromString(e.substring(4,e.length-2))}}let Ns=class tI extends cc{construct(e,n,s){return new tI(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Re(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new tI(n)}static emptyPath(){return new tI([])}};const uye=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let ka=class Qg extends cc{construct(e,n,s){return new Qg(e,n,s)}static isValidIdentifier(e){return uye.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qg.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uq}static keyField(){return new Qg([Uq])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Re(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Re(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Re(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Re(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qg(n)}static emptyPath(){return new Qg([])}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Ns.fromString(e))}static fromName(e){return new Me(Ns.fromString(e).popFirst(5))}static empty(){return new Me(Ns.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ns.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ns.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Ns(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hye(t,e,n){if(!n)throw new Re(le.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dye(t,e,n,s){if(e===!0&&s===!0)throw new Re(le.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qq(t){if(!Me.isDocumentKey(t))throw new Re(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bG(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function a2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e(12329,{type:typeof t})}function Ra(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=a2(t);throw new Re(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ys(t,e){const n={typeString:t};return e&&(n.value=e),n}function XE(t,e){if(!bG(t))throw new Re(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Re(le.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jq=-62135596800,Bq=1e6;let rr=class Bf{static now(){return Bf.fromMillis(Date.now())}static fromDate(e){return Bf.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Bq);return new Bf(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jq)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bq}_compareTo(e){return this.seconds===e.seconds?Ot(this.nanoseconds,e.nanoseconds):Ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bf._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(XE(e,Bf._jsonSchema))return new Bf(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jq;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:ys("string",rr._jsonSchemaVersion),seconds:ys("number"),nanoseconds:ys("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new rr(0,0))}static max(){return new it(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yb=-1;function fye(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=it.fromTimestamp(s===1e9?new rr(n+1,0):new rr(n,s));return new Rd(r,Me.empty(),e)}function pye(t){return new Rd(t.readTime,t.key,yb)}class Rd{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Rd(it.min(),Me.empty(),yb)}static max(){return new Rd(it.max(),Me.empty(),yb)}}function gye(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:Ot(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _ye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function W_(t){if(t.code!==le.FAILED_PRECONDITION||t.message!==mye)throw t;Ce("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let fe=class Hi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Hi((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Hi?n:Hi.resolve(n)}catch(n){return Hi.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Hi.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Hi.reject(n)}static resolve(e){return new Hi((n,s)=>{n(e)})}static reject(e){return new Hi((n,s)=>{s(e)})}static waitFor(e){return new Hi((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=Hi.resolve(!1);for(const s of e)n=n.next(r=>r?Hi.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new Hi((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new Hi((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}};function yye(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function K_(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fR{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fR.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c2=-1;function pR(t){return t==null}function _0(t){return t===0&&1/t==-1/0}function vye(t){return typeof t=="number"&&Number.isInteger(t)&&!_0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const EG="";function wye(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$q(e)),e=bye(t.get(n),e);return $q(e)}function bye(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case EG:n+="";break;default:n+=i}}return n}function $q(t){return t+EG+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zq(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _f(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TG(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ts=class Hx{constructor(e,n){this.comparator=e,this.root=n||rd.EMPTY}insert(e,n){return new Hx(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rd.BLACK,null,null))}remove(e){return new Hx(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rd.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oC(this.root,e,this.comparator,!1)}getReverseIterator(){return new oC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oC(this.root,e,this.comparator,!0)}},oC=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},rd=class ul{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??ul.RED,this.left=r??ul.EMPTY,this.right=i??ul.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new ul(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ul.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ul.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ul.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ul.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}};rd.EMPTY=null,rd.RED=!0,rd.BLACK=!1;rd.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new rd(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ei=class Wx{constructor(e){this.comparator=e,this.data=new Ts(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hq(this.data.getIterator())}getIteratorFrom(e){return new Hq(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Wx)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Wx(this.comparator);return n.data=e,n}};class Hq{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let yc=class Kx{constructor(e){this.fields=e,e.sort(ka.comparator)}static empty(){return new Kx([])}unionWith(e){let n=new ei(ka.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kx(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return t_(this.fields,e.fields,(n,s)=>n.isEqual(s))}};/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new CG("Invalid base64 string: "+r):r}}(e);return new Sr(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Sr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const Eye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ad(t){if(sn(!!t,39018),typeof t=="string"){let e=0;const n=Eye.exec(t);if(sn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:as(t.seconds),nanos:as(t.nanos)}}function as(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pd(t){return typeof t=="string"?Sr.fromBase64String(t):Sr.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IG="server_timestamp",SG="__type__",kG="__previous_value__",RG="__local_write_time__";function l2(t){return(t?.mapValue?.fields||{})[SG]?.stringValue===IG}function gR(t){const e=t.mapValue.fields[kG];return l2(e)?gR(e):e}function vb(t){const e=Ad(t.mapValue.fields[RG].timestampValue);return new rr(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tye{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const y0="(default)";class wb{constructor(e,n){this.projectId=e,this.database=n||y0}static empty(){return new wb("","")}get isDefaultDatabase(){return this.database===y0}isEqual(e){return e instanceof wb&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const AG="__type__",Cye="__max__",aC={mapValue:{}},PG="__vector__",v0="value";function Nd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l2(t)?4:Sye(t)?9007199254740991:Iye(t)?10:11:$e(28295,{value:t})}function jc(t,e){if(t===e)return!0;const n=Nd(t);if(n!==Nd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vb(t).isEqual(vb(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=Ad(s.timestampValue),o=Ad(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Pd(s.bytesValue).isEqual(Pd(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return as(s.geoPointValue.latitude)===as(r.geoPointValue.latitude)&&as(s.geoPointValue.longitude)===as(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return as(s.integerValue)===as(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=as(s.doubleValue),o=as(r.doubleValue);return i===o?_0(i)===_0(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return t_(t.arrayValue.values||[],e.arrayValue.values||[],jc);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(zq(i)!==zq(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!jc(i[a],o[a])))return!1;return!0}(t,e);default:return $e(52216,{left:t})}}function bb(t,e){return(t.values||[]).find(n=>jc(n,e))!==void 0}function n_(t,e){if(t===e)return 0;const n=Nd(t),s=Nd(e);if(n!==s)return Ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ot(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=as(r.integerValue||r.doubleValue),a=as(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Wq(t.timestampValue,e.timestampValue);case 4:return Wq(vb(t),vb(e));case 5:return zx(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Pd(r),a=Pd(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Ot(o[l],a[l]);if(u!==0)return u}return Ot(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Ot(as(r.latitude),as(i.latitude));return o!==0?o:Ot(as(r.longitude),as(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kq(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[v0]?.arrayValue,u=a[v0]?.arrayValue,h=Ot(l?.values?.length||0,u?.values?.length||0);return h!==0?h:Kq(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===aC.mapValue&&i===aC.mapValue)return 0;if(r===aC.mapValue)return 1;if(i===aC.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=zx(a[h],u[h]);if(d!==0)return d;const p=n_(o[a[h]],l[u[h]]);if(p!==0)return p}return Ot(a.length,u.length)}(t.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function Wq(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ot(t,e);const n=Ad(t),s=Ad(e),r=Ot(n.seconds,s.seconds);return r!==0?r:Ot(n.nanos,s.nanos)}function Kq(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=n_(n[r],s[r]);if(i)return i}return Ot(n.length,s.length)}function s_(t){return Gx(t)}function Gx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=Ad(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Pd(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return Me.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=Gx(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${Gx(e.fields[i])}`;return s+"}"}(t.mapValue):$e(61005,{value:t})}function nI(t){switch(Nd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gR(t);return e?16+nI(e):16;case 5:return 2*t.stringValue.length;case 6:return Pd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+nI(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return _f(n.fields,(r,i)=>{s+=r.length+nI(i)}),s}(t.mapValue);default:throw $e(13486,{value:t})}}function Qx(t){return!!t&&"integerValue"in t}function u2(t){return!!t&&"arrayValue"in t}function Gq(t){return!!t&&"nullValue"in t}function Qq(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sI(t){return!!t&&"mapValue"in t}function Iye(t){return(t?.mapValue?.fields||{})[AG]?.stringValue===PG}function tw(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _f(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=tw(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tw(t.arrayValue.values[n]);return e}return{...t}}function Sye(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Cye}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let la=class Yx{constructor(e){this.value=e}static empty(){return new Yx({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!sI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tw(n)}setAll(e){let n=ka.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=tw(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());sI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jc(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];sI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){_f(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Yx(tw(this.value))}};function NG(t){const e=[];return _f(t.fields,(n,s)=>{const r=new ka([n]);if(sI(s)){const i=NG(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new yc(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Br{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Br(e,0,it.min(),it.min(),it.min(),la.empty(),0)}static newFoundDocument(e,n,s,r){return new Br(e,1,n,it.min(),s,r,0)}static newNoDocument(e,n){return new Br(e,2,n,it.min(),it.min(),la.empty(),0)}static newUnknownDocument(e,n){return new Br(e,3,n,it.min(),it.min(),la.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=la.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=la.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class w0{constructor(e,n){this.position=e,this.inclusive=n}}function Yq(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Me.comparator(Me.fromName(o.referenceValue),n.key):s=n_(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Xq(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jc(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class b0{constructor(e,n="asc"){this.field=e,this.dir=n}}function kye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xG{}class Ds extends xG{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Aye(e,n,s):n==="array-contains"?new xye(e,s):n==="in"?new Oye(e,s):n==="not-in"?new Dye(e,s):n==="array-contains-any"?new Lye(e,s):new Ds(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Pye(e,s):new Nye(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(n_(n,this.value)):n!==null&&Nd(this.value)===Nd(n)&&this.matchesComparison(n_(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bc extends xG{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Bc(e,n)}matches(e){return OG(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function OG(t){return t.op==="and"}function DG(t){return Rye(t)&&OG(t)}function Rye(t){for(const e of t.filters)if(e instanceof Bc)return!1;return!0}function Xx(t){if(t instanceof Ds)return t.field.canonicalString()+t.op.toString()+s_(t.value);if(DG(t))return t.filters.map(e=>Xx(e)).join(",");{const e=t.filters.map(n=>Xx(n)).join(",");return`${t.op}(${e})`}}function LG(t,e){return t instanceof Ds?function(n,s){return s instanceof Ds&&n.op===s.op&&n.field.isEqual(s.field)&&jc(n.value,s.value)}(t,e):t instanceof Bc?function(n,s){return s instanceof Bc&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&LG(i,s.filters[o]),!0):!1}(t,e):void $e(19439)}function MG(t){return t instanceof Ds?function(e){return`${e.field.canonicalString()} ${e.op} ${s_(e.value)}`}(t):t instanceof Bc?function(e){return e.op.toString()+" {"+e.getFilters().map(MG).join(" ,")+"}"}(t):"Filter"}class Aye extends Ds{constructor(e,n,s){super(e,n,s),this.key=Me.fromName(s.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class Pye extends Ds{constructor(e,n){super(e,"in",n),this.keys=FG("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Nye extends Ds{constructor(e,n){super(e,"not-in",n),this.keys=FG("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FG(t,e){return(e.arrayValue?.values||[]).map(n=>Me.fromName(n.referenceValue))}class xye extends Ds{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return u2(n)&&bb(n.arrayValue,this.value)}}class Oye extends Ds{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bb(this.value.arrayValue,n)}}class Dye extends Ds{constructor(e,n){super(e,"not-in",n)}matches(e){if(bb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bb(this.value.arrayValue,n)}}class Lye extends Ds{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!u2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>bb(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mye{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Jq(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Mye(t,e,n,s,r,i,o)}function h2(t){const e=dt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Xx(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),pR(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>s_(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>s_(s)).join(",")),e.Te=n}return e.Te}function d2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LG(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xq(t.startAt,e.startAt)&&Xq(t.endAt,e.endAt)}function Jx(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mR{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Fye(t,e,n,s,r,i,o,a){return new mR(t,e,n,s,r,i,o,a)}function _R(t){return new mR(t)}function Zq(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vye(t){return t.collectionGroup!==null}function nw(t){const e=dt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new ei(ka.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new b0(r,s))}),n.has(ka.keyField().canonicalString())||e.Ie.push(new b0(ka.keyField(),s))}return e.Ie}function Ec(t){const e=dt(t);return e.Ee||(e.Ee=Uye(e,nw(t))),e.Ee}function Uye(t,e){if(t.limitType==="F")return Jq(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new b0(r.field,i)});const n=t.endAt?new w0(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new w0(t.startAt.position,t.startAt.inclusive):null;return Jq(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Zx(t,e,n){return new mR(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yR(t,e){return d2(Ec(t),Ec(e))&&t.limitType===e.limitType}function VG(t){return`${h2(Ec(t))}|lt:${t.limitType}`}function Yg(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>MG(s)).join(", ")}]`),pR(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>s_(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>s_(s)).join(",")),`Target(${n})`}(Ec(t))}; limitType=${t.limitType})`}function vR(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Me.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of nw(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=Yq(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,nw(n),s)||n.endAt&&!function(r,i,o){const a=Yq(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,nw(n),s))}(t,e)}function qye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UG(t){return(e,n)=>{let s=!1;for(const r of nw(t)){const i=jye(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function jye(t,e,n){const s=t.field.isKeyField()?Me.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?n_(a,l):$e(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return $e(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pg{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_f(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return TG(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bye=new Ts(Me.comparator);function Gl(){return Bye}const qG=new Ts(Me.comparator);function Tv(...t){let e=qG;for(const n of t)e=e.insert(n.key,n);return e}function jG(t){let e=qG;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function np(){return sw()}function BG(){return sw()}function sw(){return new pg(t=>t.toString(),(t,e)=>t.isEqual(e))}const $ye=new Ts(Me.comparator),zye=new ei(Me.comparator);function Mt(...t){let e=zye;for(const n of t)e=e.add(n);return e}const Hye=new ei(Ot);function Wye(){return Hye}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_0(e)?"-0":e}}function $G(t){return{integerValue:""+t}}function Kye(t,e){return vye(e)?$G(e):f2(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wR{constructor(){this._=void 0}}function Gye(t,e,n){return t instanceof Eb?function(s,r){const i={fields:{[SG]:{stringValue:IG},[RG]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&l2(r)&&(r=gR(r)),r&&(i.fields[kG]=r),{mapValue:i}}(n,e):t instanceof Tb?HG(t,e):t instanceof Cb?WG(t,e):function(s,r){const i=zG(s,r),o=ej(i)+ej(s.Ae);return Qx(i)&&Qx(s.Ae)?$G(o):f2(s.serializer,o)}(t,e)}function Qye(t,e,n){return t instanceof Tb?HG(t,e):t instanceof Cb?WG(t,e):n}function zG(t,e){return t instanceof E0?function(n){return Qx(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Eb extends wR{}class Tb extends wR{constructor(e){super(),this.elements=e}}function HG(t,e){const n=KG(e);for(const s of t.elements)n.some(r=>jc(r,s))||n.push(s);return{arrayValue:{values:n}}}class Cb extends wR{constructor(e){super(),this.elements=e}}function WG(t,e){let n=KG(e);for(const s of t.elements)n=n.filter(r=>!jc(r,s));return{arrayValue:{values:n}}}class E0 extends wR{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ej(t){return as(t.integerValue||t.doubleValue)}function KG(t){return u2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yye{constructor(e,n){this.field=e,this.transform=n}}function Xye(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Tb&&s instanceof Tb||n instanceof Cb&&s instanceof Cb?t_(n.elements,s.elements,jc):n instanceof E0&&s instanceof E0?jc(n.Ae,s.Ae):n instanceof Eb&&s instanceof Eb}(t.transform,e.transform)}class Jye{constructor(e,n){this.version=e,this.transformResults=n}}class Aa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Aa}static exists(e){return new Aa(void 0,e)}static updateTime(e){return new Aa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rI(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bR{}function GG(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new p2(t.key,Aa.none()):new JE(t.key,t.data,Aa.none());{const n=t.data,s=la.empty();let r=new ei(ka.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new yf(t.key,s,new yc(r.toArray()),Aa.none())}}function Zye(t,e,n){t instanceof JE?function(s,r,i){const o=s.value.clone(),a=nj(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof yf?function(s,r,i){if(!rI(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=nj(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(QG(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function rw(t,e,n,s){return t instanceof JE?function(r,i,o,a){if(!rI(r.precondition,i))return o;const l=r.value.clone(),u=sj(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof yf?function(r,i,o,a){if(!rI(r.precondition,i))return o;const l=sj(r.fieldTransforms,a,i),u=i.data;return u.setAll(QG(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return rI(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function eve(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=zG(s.transform,r||null);i!=null&&(n===null&&(n=la.empty()),n.set(s.field,i))}return n||null}function tj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&t_(n,s,(r,i)=>Xye(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class JE extends bR{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yf extends bR{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QG(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function nj(t,e,n){const s=new Map;sn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Qye(o,a,n[r]))}return s}function sj(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Gye(i,o,e))}return s}class p2 extends bR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tve extends bR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nve{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Zye(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=rw(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=rw(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=BG();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=GG(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(it.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Mt())}isEqual(e){return this.batchId===e.batchId&&t_(this.mutations,e.mutations,(n,s)=>tj(n,s))&&t_(this.baseMutations,e.baseMutations,(n,s)=>tj(n,s))}}class g2{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){sn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return $ye}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new g2(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sve{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rve{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gs,jt;function ive(t){switch(t){case le.OK:return $e(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return $e(15467,{code:t})}}function YG(t){if(t===void 0)return Kl("GRPC error has no .code"),le.UNKNOWN;switch(t){case gs.OK:return le.OK;case gs.CANCELLED:return le.CANCELLED;case gs.UNKNOWN:return le.UNKNOWN;case gs.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case gs.INTERNAL:return le.INTERNAL;case gs.UNAVAILABLE:return le.UNAVAILABLE;case gs.UNAUTHENTICATED:return le.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case gs.NOT_FOUND:return le.NOT_FOUND;case gs.ALREADY_EXISTS:return le.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return le.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case gs.ABORTED:return le.ABORTED;case gs.OUT_OF_RANGE:return le.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return le.UNIMPLEMENTED;case gs.DATA_LOSS:return le.DATA_LOSS;default:return $e(39323,{code:t})}}(jt=gs||(gs={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ove(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ave=new nd([4294967295,4294967295],0);function rj(t){const e=ove().encode(t),n=new fG;return n.update(e),new Uint8Array(n.digest())}function ij(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new nd([n,s],0),new nd([r,i],0)]}class m2{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Cv(`Invalid padding: ${n}`);if(s<0)throw new Cv(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Cv(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Cv(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nd.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(nd.fromNumber(s)));return r.compare(ave)===1&&(r=new nd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rj(e),[s,r]=ij(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new m2(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=rj(e),[s,r]=ij(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Cv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ER{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ZE.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ER(it.min(),r,new Ts(Ot),Gl(),Mt())}}class ZE{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ZE(s,n,Mt(),Mt(),Mt())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iI{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class XG{constructor(e,n){this.targetId=e,this.Ce=n}}class JG{constructor(e,n,s=Sr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class oj{constructor(){this.ve=0,this.Fe=aj(),this.Me=Sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mt(),n=Mt(),s=Mt();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:$e(38017,{changeType:i})}}),new ZE(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=aj()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,sn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cve{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gl(),this.Je=cC(),this.He=cC(),this.Ye=new Ts(Ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Jx(i))if(s===0){const o=new Me(i.path);this.et(n,o,Br.newNoDocument(o,it.min()))}else sn(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Pd(s).toUint8Array()}catch(l){if(l instanceof CG)return e_("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new m2(o,r,i)}catch(l){return e_(l instanceof Cv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Jx(a.target)){const l=new Me(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Br.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Mt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new ER(e,n,this.Ye,this.je,s);return this.je=Gl(),this.Je=cC(),this.He=cC(),this.Ye=new Ts(Ot),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new oj,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ei(Ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ei(Ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ce("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oj),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cC(){return new Ts(Me.comparator)}function aj(){return new Ts(Me.comparator)}const lve={asc:"ASCENDING",desc:"DESCENDING"},uve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hve={and:"AND",or:"OR"};class dve{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function eO(t,e){return t.useProto3Json||pR(e)?e:{value:e}}function T0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fve(t,e){return T0(t,e.toTimestamp())}function Tc(t){return sn(!!t,49232),it.fromTimestamp(function(e){const n=Ad(e);return new rr(n.seconds,n.nanos)}(t))}function _2(t,e){return tO(t,e).canonicalString()}function tO(t,e){const n=function(s){return new Ns(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eQ(t){const e=Ns.fromString(t);return sn(iQ(e),10190,{key:e.toString()}),e}function nO(t,e){return _2(t.databaseId,e.path)}function SP(t,e){const n=eQ(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(nQ(n))}function tQ(t,e){return _2(t.databaseId,e)}function pve(t){const e=eQ(t);return e.length===4?Ns.emptyPath():nQ(e)}function sO(t){return new Ns(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nQ(t){return sn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cj(t,e,n){return{name:nO(t,e),fields:n.value.mapValue.fields}}function gve(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$e(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(sn(u===void 0||typeof u=="string",58123),Sr.fromBase64String(u||"")):(sn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Sr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?le.UNKNOWN:YG(l.code);return new Re(u,l.message||"")}(o);n=new JG(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=SP(t,s.document.name),i=Tc(s.document.updateTime),o=s.document.createTime?Tc(s.document.createTime):it.min(),a=new la({mapValue:{fields:s.document.fields}}),l=Br.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new iI(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=SP(t,s.document),i=s.readTime?Tc(s.readTime):it.min(),o=Br.newNoDocument(r,i),a=s.removedTargetIds||[];n=new iI([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=SP(t,s.document),i=s.removedTargetIds||[];n=new iI([],i,r,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new rve(r,i),a=s.targetId;n=new XG(a,o)}}return n}function mve(t,e){let n;if(e instanceof JE)n={update:cj(t,e.key,e.value)};else if(e instanceof p2)n={delete:nO(t,e.key)};else if(e instanceof yf)n={update:cj(t,e.key,e.data),updateMask:Ive(e.fieldMask)};else{if(!(e instanceof tve))return $e(16599,{Vt:e.type});n={verify:nO(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Eb)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tb)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Cb)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof E0)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw $e(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:fve(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:$e(27497)}(t,e.precondition)),n}function _ve(t,e){return t&&t.length>0?(sn(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Tc(s.updateTime):Tc(r);return i.isEqual(it.min())&&(i=Tc(r)),new Jye(i,s.transformResults||[])}(n,e))):[]}function yve(t,e){return{documents:[tQ(t,e.path)]}}function vve(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=tQ(t,r);const i=function(l){if(l.length!==0)return rQ(Bc.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:Xg(h.field),direction:Eve(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=eO(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function wve(t){let e=pve(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){sn(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=sQ(h);return d instanceof Bc&&DG(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new b0(Jg(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,pR(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new w0(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new w0(p,d)}(n.endAt)),Fye(e,r,o,i,a,"F",l,u)}function bve(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sQ(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Jg(e.unaryFilter.field);return Ds.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Jg(e.unaryFilter.field);return Ds.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jg(e.unaryFilter.field);return Ds.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jg(e.unaryFilter.field);return Ds.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}}(t):t.fieldFilter!==void 0?function(e){return Ds.create(Jg(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Bc.create(e.compositeFilter.filters.map(n=>sQ(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return $e(1026)}}(e.compositeFilter.op))}(t):$e(30097,{filter:t})}function Eve(t){return lve[t]}function Tve(t){return uve[t]}function Cve(t){return hve[t]}function Xg(t){return{fieldPath:t.canonicalString()}}function Jg(t){return ka.fromServerFormat(t.fieldPath)}function rQ(t){return t instanceof Ds?function(e){if(e.op==="=="){if(Qq(e.value))return{unaryFilter:{field:Xg(e.field),op:"IS_NAN"}};if(Gq(e.value))return{unaryFilter:{field:Xg(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Qq(e.value))return{unaryFilter:{field:Xg(e.field),op:"IS_NOT_NAN"}};if(Gq(e.value))return{unaryFilter:{field:Xg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xg(e.field),op:Tve(e.op),value:e.value}}}(t):t instanceof Bc?function(e){const n=e.getFilters().map(s=>rQ(s));return n.length===1?n[0]:{compositeFilter:{op:Cve(e.op),filters:n}}}(t):$e(54877,{filter:t})}function Ive(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iQ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qh{constructor(e,n,s,r,i=it.min(),o=it.min(),a=Sr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Qh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sve{constructor(e){this.yt=e}}function kve(t){const e=wve({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zx(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rve{constructor(){this.Cn=new Ave}addToCollectionParentIndex(e,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Rd.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Rd.min())}updateCollectionGroup(e,n,s){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class Ave{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ei(Ns.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ei(Ns.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oQ=41943040;let rc=class oI{static withCacheSize(e){return new oI(e,oI.DEFAULT_COLLECTION_PERCENTILE,oI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/rc.DEFAULT_COLLECTION_PERCENTILE=10,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rc.DEFAULT=new rc(oQ,rc.DEFAULT_COLLECTION_PERCENTILE,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rc.DISABLED=new rc(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class r_{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new r_(0)}static cr(){return new r_(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uj="LruGarbageCollector",Pve=1048576;function hj([t,e],[n,s]){const r=Ot(t,n);return r===0?Ot(e,s):r}class Nve{constructor(e){this.Ir=e,this.buffer=new ei(hj),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();hj(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xve{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ce(uj,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){K_(n)?Ce(uj,"Ignoring IndexedDB error during garbage collection: ",n):await W_(n)}await this.Vr(3e5)})}}class Ove{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(fR.ce);const s=new Nve(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(lj)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lj):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),Gg()<=St.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function Dve(t,e){return new Ove(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lve{constructor(){this.changes=new pg(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?fe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mve{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fve{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&rw(s.mutation,r,yc.empty(),rr.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Mt()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Mt()){const r=np();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Tv();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=np();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Mt()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Gl();const o=sw(),a=function(){return sw()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof yf)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),rw(h.mutation,u,h.mutation.getFieldMask(),rr.now())):o.set(u.key,yc.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new Mve(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=sw();let r=new Ts((o,a)=>o-a),i=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||yc.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Mt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=BG();h.forEach(p=>{if(!i.has(p)){const m=GG(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return fe.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return Me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vye(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):fe.resolve(np());let a=yb,l=i;return o.next(u=>fe.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?fe.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Mt())).next(h=>({batchId:a,changes:jG(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next(s=>{let r=Tv();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Tv();return this.indexManager.getCollectionParents(e,i).next(a=>fe.forEach(a,l=>{const u=function(h,d){return new mR(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Br.newInvalidDocument(h)))});let a=Tv();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&rw(h.mutation,u,yc.empty(),rr.now()),vR(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vve{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tc(s.createTime)}}(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:kve(s.bundledQuery),readTime:Tc(s.readTime)}}(n)),fe.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uve{constructor(){this.overlays=new Ts(Me.comparator),this.qr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=np();return fe.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),fe.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),fe.resolve()}getOverlaysForCollection(e,n,s){const r=np(),i=n.length+1,o=new Me(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return fe.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ts((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=np(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=np(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return fe.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new sve(n,s));let i=this.qr.get(n);i===void 0&&(i=Mt(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qve{constructor(){this.sessionToken=Sr.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y2{constructor(){this.Qr=new ei(Ys.$r),this.Ur=new ei(Ys.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ys(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Ys(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Me(new Ns([])),s=new Ys(n,e),r=new Ys(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Me(new Ns([])),s=new Ys(n,e),r=new Ys(n,e+1);let i=Mt();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ys(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}let Ys=class{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Me.comparator(t.key,e.key)||Ot(t.Yr,e.Yr)}static Kr(t,e){return Ot(t.Yr,e.Yr)||Me.comparator(t.key,e.key)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jve{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ei(Ys.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nve(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Ys(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return fe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?c2:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ys(n,0),r=new Ys(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),fe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ei(Ot);return n.forEach(r=>{const i=new Ys(r,0),o=new Ys(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),fe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Me.isDocumentKey(i)||(i=i.child(""));const o=new Ys(new Me(i),0);let a=new ei(Ot);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),fe.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){sn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return fe.forEach(n.mutations,r=>{const i=new Ys(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Ys(n,0),r=this.Zr.firstAfterOrEqual(s);return fe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bve{constructor(e){this.ri=e,this.docs=function(){return new Ts(Me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return fe.resolve(s?s.document.mutableCopy():Br.newInvalidDocument(n))}getEntries(e,n){let s=Gl();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Br.newInvalidDocument(r))}),fe.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Gl();const o=n.path,a=new Me(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||gye(pye(h),s)<=0||(r.has(h.key)||vR(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,n,s,r){$e(9500)}ii(e,n){return fe.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new $ve(this)}getSize(e){return fe.resolve(this.size)}}class $ve extends Lve{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zve{constructor(e){this.persistence=e,this.si=new pg(n=>h2(n),d2),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new y2,this.targetCount=0,this.ai=r_.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new r_(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Pr(n),fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),fe.waitFor(i).next(()=>r)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return fe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),fe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),fe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return fe.resolve(s)}containsKey(e,n){return fe.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aQ{constructor(e,n){this.ui={},this.overlays={},this.ci=new fR(0),this.li=!1,this.li=!0,this.hi=new qve,this.referenceDelegate=e(this),this.Pi=new zve(this),this.indexManager=new Rve,this.remoteDocumentCache=function(s){return new Bve(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Sve(n),this.Ii=new Vve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uve,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new jve(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ce("MemoryPersistence","Starting transaction:",e);const r=new Hve(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return fe.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Hve extends _ye{constructor(e){super(),this.currentSequenceNumber=e}}class v2{constructor(e){this.persistence=e,this.Ri=new y2,this.Vi=null}static mi(e){return new v2(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),fe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,s=>{const r=Me.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,it.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class C0{constructor(e,n){this.persistence=e,this.pi=new pg(s=>wye(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Dve(this,n)}static mi(e,n){return new C0(e,n)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return fe.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?fe.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,it.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nI(e.data.value)),n}br(e,n,s){return fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return fe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class w2{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Mt(),r=Mt();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new w2(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kve{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Kpe()?8:yye(ti())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Wve;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Gg()<=St.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",Yg(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(Gg()<=St.DEBUG&&Ce("QueryEngine","Query:",Yg(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Gg()<=St.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",Yg(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ec(n))):fe.resolve())}ys(e,n){if(Zq(n))return fe.resolve(null);let s=Ec(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zx(n,null,"F"),s=Ec(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Mt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Zx(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return Zq(n)||r.isEqual(it.min())?fe.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?fe.resolve(null):(Gg()<=St.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yg(n)),this.vs(e,o,n,fye(r,yb)).next(a=>a))})}Ds(e,n){let s=new ei(UG(e));return n.forEach((r,i)=>{vR(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Gg()<=St.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Yg(n)),this.ps.getDocumentsMatchingQuery(e,n,Rd.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const b2="LocalStore",Gve=3e8;class Qve{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ts(Ot),this.xs=new pg(i=>h2(i),d2),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fve(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Yve(t,e,n,s){return new Qve(t,e,n,s)}async function cQ(t,e){const n=dt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Mt();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function Xve(t,e){const n=dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=fe.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const k=l.docVersions.get(m);sn(k!==null,48541),w.version.compareTo(k)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Mt();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function lQ(t){const e=dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Jve(t,e){const n=dt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Sr.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,k,P){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Gve?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=Gl(),u=Mt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Zve(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(it.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return fe.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function Zve(t,e,n){let s=Mt(),r=Mt();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Gl();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(it.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ce(b2,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function ewe(t,e){const n=dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=c2),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function twe(t,e){const n=dt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,fe.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Qh(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function rO(t,e,n){const s=dt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!K_(o))throw o;Ce(b2,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function dj(t,e,n){const s=dt(t);let r=it.min(),i=Mt();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=dt(a),d=h.xs.get(u);return d!==void 0?fe.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,Ec(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:it.min(),n?i:Mt())).next(a=>(nwe(s,qye(e),a),{documents:a,Qs:i})))}function nwe(t,e,n){let s=t.Os.get(e)||it.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class fj{constructor(){this.activeTargetIds=Wye()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class swe{constructor(){this.Mo=new fj,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fj,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rwe{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pj="ConnectivityMonitor";class gj{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ce(pj,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ce(pj,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let lC=null;function iO(){return lC===null?lC=function(){return 268435456+Math.round(2147483648*Math.random())}():lC++,"0x"+lC.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kP="RestConnection",iwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class owe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===y0?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=iO(),a=this.zo(e,n.toUriEncodedString());Ce(kP,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=Jc(u);return this.Jo(e,a,l,s,h).then(d=>(Ce(kP,`Received RPC '${e}' ${o}: `,d),d),d=>{throw e_(kP,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+H_}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=iwe[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class awe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ar="WebChannelConnection";class cwe extends owe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=iO();return new Promise((a,l)=>{const u=new pG;u.setWithCredentials(!0),u.listenOnce(gG.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eI.NO_ERROR:const d=u.getResponseJson();Ce(Ar,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case eI.TIMEOUT:Ce(Ar,`RPC '${e}' ${o} timed out`),l(new Re(le.DEADLINE_EXCEEDED,"Request time out"));break;case eI.HTTP_ERROR:const p=u.getStatus();if(Ce(Ar,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(D)>=0?D:le.UNKNOWN}(w.status);l(new Re(k,w.message))}else l(new Re(le.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Re(le.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ce(Ar,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Ce(Ar,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=iO(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yG(),a=_G(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");Ce(Ar,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new awe({Yo:P=>{m?Ce(Ar,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Ce(Ar,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Ce(Ar,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,D,M)=>{P.listen(D,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,Ev.EventType.OPEN,()=>{m||(Ce(Ar,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,Ev.EventType.CLOSE,()=>{m||(m=!0,Ce(Ar,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,Ev.EventType.ERROR,P=>{m||(m=!0,e_(Ar,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Re(le.UNAVAILABLE,"The operation could not be completed")))}),k(d,Ev.EventType.MESSAGE,P=>{if(!m){const D=P.data[0];sn(!!D,16349);const M=D,V=M?.error||M[0]?.error;if(V){Ce(Ar,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(I){const v=gs[I];if(v!==void 0)return YG(v)}(q),X=V.message;H===void 0&&(H=le.INTERNAL,X="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Re(H,X)),d.close()}else Ce(Ar,`RPC '${e}' stream ${r} received:`,D),w.u_(D)}}),k(a,mG.STAT_EVENT,P=>{P.stat===$x.PROXY?Ce(Ar,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===$x.NOPROXY&&Ce(Ar,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function RP(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TR(t){return new dve(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uQ{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Ce("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mj="PersistentStream";class hQ{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uQ(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(Kl(n.toString()),Kl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Re(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ce(mj,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ce(mj,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lwe extends hQ{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=gve(this.serializer,e),s=function(r){if(!("targetChange"in r))return it.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?it.min():i.readTime?Tc(i.readTime):it.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=sO(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=Jx(a)?{documents:yve(r,a)}:{query:vve(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=ZG(r,i.resumeToken);const l=eO(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(it.min())>0){o.readTime=T0(r,i.snapshotVersion.toTimestamp());const l=eO(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=bve(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=sO(this.serializer),n.removeTarget=e,this.q_(n)}}class uwe extends hQ{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return sn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,sn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){sn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_ve(e.writeResults,e.commitTime),s=Tc(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=sO(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>mve(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hwe{}class dwe extends hwe{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,tO(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(le.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,tO(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Re(le.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class fwe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Kl(n),this.aa=!1):Ce("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Up="RemoteStore";class pwe{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{gg(this)&&(Ce(Up,"Restarting streams for network reachability change."),await async function(a){const l=dt(a);l.Ea.add(4),await eT(l),l.Ra.set("Unknown"),l.Ea.delete(4),await CR(l)}(this))})}),this.Ra=new fwe(s,r)}}async function CR(t){if(gg(t))for(const e of t.da)await e(!0)}async function eT(t){for(const e of t.da)await e(!1)}function dQ(t,e){const n=dt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),I2(n)?C2(n):G_(n).O_()&&T2(n,e))}function E2(t,e){const n=dt(t),s=G_(n);n.Ia.delete(e),s.O_()&&fQ(n,e),n.Ia.size===0&&(s.O_()?s.L_():gg(n)&&n.Ra.set("Unknown"))}function T2(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}G_(t).Y_(e)}function fQ(t,e){t.Va.Ue(e),G_(t).Z_(e)}function C2(t){t.Va=new cve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),G_(t).start(),t.Ra.ua()}function I2(t){return gg(t)&&!G_(t).x_()&&t.Ia.size>0}function gg(t){return dt(t).Ea.size===0}function pQ(t){t.Va=void 0}async function gwe(t){t.Ra.set("Online")}async function mwe(t){t.Ia.forEach((e,n)=>{T2(t,e)})}async function _we(t,e){pQ(t),I2(t)?(t.Ra.ha(e),C2(t)):t.Ra.set("Unknown")}async function ywe(t,e,n){if(t.Ra.set("Online"),e instanceof JG&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){Ce(Up,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await I0(t,s)}else if(e instanceof iI?t.Va.Ze(e):e instanceof XG?t.Va.st(e):t.Va.tt(e),!n.isEqual(it.min()))try{const s=await lQ(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(Sr.EMPTY_BYTE_STRING,u.snapshotVersion)),fQ(r,a);const h=new Qh(u.target,a,l,u.sequenceNumber);T2(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){Ce(Up,"Failed to raise snapshot:",s),await I0(t,s)}}async function I0(t,e,n){if(!K_(e))throw e;t.Ea.add(1),await eT(t),t.Ra.set("Offline"),n||(n=()=>lQ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ce(Up,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await CR(t)})}function gQ(t,e){return e().catch(n=>I0(t,n,e))}async function IR(t){const e=dt(t),n=xd(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:c2;for(;vwe(e);)try{const r=await ewe(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,wwe(e,r)}catch(r){await I0(e,r)}mQ(e)&&_Q(e)}function vwe(t){return gg(t)&&t.Ta.length<10}function wwe(t,e){t.Ta.push(e);const n=xd(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mQ(t){return gg(t)&&!xd(t).x_()&&t.Ta.length>0}function _Q(t){xd(t).start()}async function bwe(t){xd(t).ra()}async function Ewe(t){const e=xd(t);for(const n of t.Ta)e.ea(n.mutations)}async function Twe(t,e,n){const s=t.Ta.shift(),r=g2.from(s,e,n);await gQ(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await IR(t)}async function Cwe(t,e){e&&xd(t).X_&&await async function(n,s){if(function(r){return ive(r)&&r!==le.ABORTED}(s.code)){const r=n.Ta.shift();xd(n).B_(),await gQ(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await IR(n)}}(t,e),mQ(t)&&_Q(t)}async function _j(t,e){const n=dt(t);n.asyncQueue.verifyOperationInProgress(),Ce(Up,"RemoteStore received new credentials");const s=gg(n);n.Ea.add(3),await eT(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await CR(n)}async function Iwe(t,e){const n=dt(t);e?(n.Ea.delete(2),await CR(n)):e||(n.Ea.add(2),await eT(n),n.Ra.set("Unknown"))}function G_(t){return t.ma||(t.ma=function(e,n,s){const r=dt(e);return r.sa(),new lwe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:gwe.bind(null,t),t_:mwe.bind(null,t),r_:_we.bind(null,t),H_:ywe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),I2(t)?C2(t):t.Ra.set("Unknown")):(await t.ma.stop(),pQ(t))})),t.ma}function xd(t){return t.fa||(t.fa=function(e,n,s){const r=dt(e);return r.sa(),new uwe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bwe.bind(null,t),r_:Cwe.bind(null,t),ta:Ewe.bind(null,t),na:Twe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await IR(t)):(await t.fa.stop(),t.Ta.length>0&&(Ce(Up,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S2{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new sd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new S2(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k2(t,e){if(Kl("AsyncQueue",`${e}: ${t}`),K_(t))return new Re(le.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tm{static emptySet(e){return new Tm(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Me.comparator(n.key,s.key):(n,s)=>Me.comparator(n.key,s.key),this.keyedMap=Tv(),this.sortedSet=new Ts(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Tm;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yj{constructor(){this.ga=new Ts(Me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class i_{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new i_(e,n,Tm.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yR(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Swe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class kwe{constructor(){this.queries=vj(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=dt(e),r=s.queries;s.queries=vj(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Re(le.ABORTED,"Firestore shutting down"))}}function vj(){return new pg(t=>VG(t),yR)}async function yQ(t,e){const n=dt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Swe,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=k2(o,`Initialization of query '${Yg(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&R2(n)}async function vQ(t,e){const n=dt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Rwe(t,e){const n=dt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&R2(n)}function Awe(t,e,n){const s=dt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function R2(t){t.Ca.forEach(e=>{e.next()})}var oO,wj;(wj=oO||(oO={})).Ma="default",wj.Cache="cache";class wQ{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new i_(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=i_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oO.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bQ{constructor(e){this.key=e}}class EQ{constructor(e){this.key=e}}class Pwe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mt(),this.mutatedKeys=Mt(),this.eu=UG(e),this.tu=new Tm(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new yj,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=vR(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:k})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new i_(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yj,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new EQ(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new bQ(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Mt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return i_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const A2="SyncEngine";class Nwe{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class xwe{constructor(e){this.key=e,this.hu=!1}}class Owe{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pg(a=>VG(a),yR),this.Iu=new Map,this.Eu=new Set,this.du=new Ts(Me.comparator),this.Au=new Map,this.Ru=new y2,this.Vu={},this.mu=new Map,this.fu=r_.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Dwe(t,e,n=!0){const s=RQ(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await TQ(s,e,n,!0),r}async function Lwe(t,e){const n=RQ(t);await TQ(n,e,!0,!1)}async function TQ(t,e,n,s){const r=await twe(t.localStore,Ec(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await Mwe(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&dQ(t.remoteStore,r),a}async function Mwe(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,k,P,D){let M=k.view.ru(P);M.Cs&&(M=await dj(w.localStore,k.query,!1).then(({documents:X})=>k.view.ru(X,M)));const V=D&&D.targetChanges.get(k.targetId),q=D&&D.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(M,w.isPrimaryClient,V,q);return Ej(w,k.targetId,H.au),H.snapshot}(t,d,p,m);const i=await dj(t.localStore,e,!0),o=new Pwe(e,i.Qs),a=o.ru(i.documents),l=ZE.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Ej(t,n,u.au);const h=new Nwe(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Fwe(t,e,n){const s=dt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!yR(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await rO(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&E2(s.remoteStore,r.targetId),aO(s,r.targetId)}).catch(W_)):(aO(s,r.targetId),await rO(s.localStore,r.targetId,!0))}async function Vwe(t,e){const n=dt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),E2(n.remoteStore,s.targetId))}async function Uwe(t,e,n){const s=Wwe(t);try{const r=await function(i,o){const a=dt(i),l=rr.now(),u=o.reduce((p,m)=>p.add(m.key),Mt());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Gl(),w=Mt();return a.Ns.getEntries(p,u).next(k=>{m=k,m.forEach((P,D)=>{D.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(k=>{h=k;const P=[];for(const D of o){const M=eve(D,h.get(D.key).overlayedDocument);M!=null&&P.push(new yf(D.key,M,NG(M.value.mapValue),Aa.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(k=>{d=k;const P=k.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,k.batchId,P)})}).then(()=>({batchId:d.batchId,changes:jG(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new Ts(Ot)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await tT(s,r.changes),await IR(s.remoteStore)}catch(r){const i=k2(r,"Failed to persist write");n.reject(i)}}async function CQ(t,e){const n=dt(t);try{const s=await Jve(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(sn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?sn(o.hu,14607):r.removedDocuments.size>0&&(sn(o.hu,42227),o.hu=!1))}),await tT(n,s,e)}catch(s){await W_(s)}}function bj(t,e,n){const s=dt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=dt(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&R2(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function qwe(t,e,n){const s=dt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ts(Me.comparator);o=o.insert(i,Br.newNoDocument(i,it.min()));const a=Mt().add(i),l=new ER(it.min(),new Map,new Ts(Ot),o,a);await CQ(s,l),s.du=s.du.remove(i),s.Au.delete(e),P2(s)}else await rO(s.localStore,e,!1).then(()=>aO(s,e,n)).catch(W_)}async function jwe(t,e){const n=dt(t),s=e.batch.batchId;try{const r=await Xve(n.localStore,e);SQ(n,s,null),IQ(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tT(n,r)}catch(r){await W_(r)}}async function Bwe(t,e,n){const s=dt(t);try{const r=await function(i,o){const a=dt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(sn(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);SQ(s,e,n),IQ(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await tT(s,r)}catch(r){await W_(r)}}function IQ(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function SQ(t,e,n){const s=dt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function aO(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||kQ(t,s)})}function kQ(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(E2(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),P2(t))}function Ej(t,e,n){for(const s of n)s instanceof bQ?(t.Ru.addReference(s.key,e),$we(t,s)):s instanceof EQ?(Ce(A2,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||kQ(t,s.key)):$e(19791,{wu:s})}function $we(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ce(A2,"New document in limbo: "+n),t.Eu.add(s),P2(t))}function P2(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Me(Ns.fromString(e)),s=t.fu.next();t.Au.set(s,new xwe(n)),t.du=t.du.insert(n,s),dQ(t.remoteStore,new Qh(Ec(_R(n.path)),s,"TargetPurposeLimboResolution",fR.ce))}}async function tT(t,e,n){const s=dt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=w2.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=dt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>fe.forEach(l,d=>fe.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>fe.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!K_(h))throw h;Ce(b2,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function zwe(t,e){const n=dt(t);if(!n.currentUser.isEqual(e)){Ce(A2,"User change. New user:",e.toKey());const s=await cQ(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Re(le.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tT(n,s.Ls)}}function Hwe(t,e){const n=dt(t),s=n.Au.get(e);if(s&&s.hu)return Mt().add(s.key);{let r=Mt();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function RQ(t){const e=dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CQ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hwe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qwe.bind(null,e),e.Pu.H_=Rwe.bind(null,e.eventManager),e.Pu.yu=Awe.bind(null,e.eventManager),e}function Wwe(t){const e=dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jwe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bwe.bind(null,e),e}class S0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=TR(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Yve(this.persistence,new Kve,e.initialUser,this.serializer)}Cu(e){return new aQ(v2.mi,this.serializer)}Du(e){return new swe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}S0.provider={build:()=>new S0};class Kwe extends S0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){sn(this.persistence.referenceDelegate instanceof C0,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new xve(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rc.withCacheSize(this.cacheSizeBytes):rc.DEFAULT;return new aQ(s=>C0.mi(s,n),this.serializer)}}class cO{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bj(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zwe.bind(null,this.syncEngine),await Iwe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kwe}()}createDatastore(e){const n=TR(e.databaseInfo.databaseId),s=function(r){return new cwe(r)}(e.databaseInfo);return function(r,i,o,a){return new dwe(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new pwe(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>bj(this.syncEngine,n,0),function(){return gj.v()?new gj:new rwe}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new Owe(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=dt(e);Ce(Up,"RemoteStore shutting down."),n.Ea.add(5),await eT(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cO.provider={build:()=>new cO};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AQ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Kl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Od="FirestoreClient";class Gwe{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Vr.UNAUTHENTICATED,this.clientId=o2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Ce(Od,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Ce(Od,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=k2(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function AP(t,e){t.asyncQueue.verifyOperationInProgress(),Ce(Od,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await cQ(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tj(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Qwe(t);Ce(Od,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>_j(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>_j(e.remoteStore,r)),t._onlineComponents=e}async function Qwe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ce(Od,"Using user provided OfflineComponentProvider");try{await AP(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;e_("Error using user provided cache. Falling back to memory cache: "+n),await AP(t,new S0)}}else Ce(Od,"Using default OfflineComponentProvider"),await AP(t,new Kwe(void 0));return t._offlineComponents}async function PQ(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ce(Od,"Using user provided OnlineComponentProvider"),await Tj(t,t._uninitializedComponentsProvider._online)):(Ce(Od,"Using default OnlineComponentProvider"),await Tj(t,new cO))),t._onlineComponents}function Ywe(t){return PQ(t).then(e=>e.syncEngine)}async function lO(t){const e=await PQ(t),n=e.eventManager;return n.onListen=Dwe.bind(null,e.syncEngine),n.onUnlisten=Fwe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Lwe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Vwe.bind(null,e.syncEngine),n}function Xwe(t,e,n={}){const s=new sd;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new AQ({next:d=>{u.Nu(),i.enqueueAndForget(()=>vQ(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new Re(le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new Re(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new wQ(_R(o.path),u,{includeMetadataChanges:!0,qa:!0});return yQ(r,h)}(await lO(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NQ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cj=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xQ="firestore.googleapis.com",Ij=!0;class Sj{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xQ,this.ssl=Ij}else this.host=e.host,this.ssl=e.ssl??Ij;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oQ;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pve)throw new Re(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dye("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NQ(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Re(le.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N2{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sj({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sj(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new tye;switch(n.type){case"firstParty":return new iye(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Re(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Cj.get(e);n&&(Ce("ComponentProvider","Removing Datastore"),Cj.delete(e),n.terminate())}(this),Promise.resolve()}}function Jwe(t,e,n,s={}){t=Ra(t,N2);const r=Jc(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(sR(`https://${a}`),rR("Firestore",!0)),i.host!==xQ&&i.host!==a&&e_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!Sd(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Vr.MOCK_USER;else{u=xM(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Re(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Vr(d)}t._authCredentials=new nye(new wG(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SR{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new SR(this.firestore,e,this._query)}}let ki=class Iv{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ib(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Iv(this.firestore,e,this._key)}toJSON(){return{type:Iv._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(XE(n,Iv._jsonSchema))return new Iv(e,s||null,new Me(Ns.fromString(n.referencePath)))}};ki._jsonSchemaVersion="firestore/documentReference/1.0",ki._jsonSchema={type:ys("string",ki._jsonSchemaVersion),referencePath:ys("string")};class Ib extends SR{constructor(e,n,s){super(e,n,_R(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new Me(e))}withConverter(e){return new Ib(this.firestore,e,this._path)}}function x2(t,e,...n){if(t=ln(t),arguments.length===1&&(e=o2.newId()),hye("doc","path",e),t instanceof N2){const s=Ns.fromString(e,...n);return qq(s),new ki(t,null,new Me(s))}{if(!(t instanceof ki||t instanceof Ib))throw new Re(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ns.fromString(e,...n));return qq(s),new ki(t.firestore,t instanceof Ib?t.converter:null,new Me(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kj="AsyncQueue";class Rj{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uQ(this,"async_queue_retry"),this._c=()=>{const s=RP();s&&Ce(kj,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=RP();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=RP();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new sd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!K_(e))throw e;Ce(kj,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Kl("INTERNAL UNHANDLED ERROR: ",Aj(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=S2.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&$e(47125,{Pc:Aj(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Aj(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Pj(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class qp extends N2{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Rj,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rj(e),this._firestoreClient=void 0,await e}}}function OQ(t,e){const n=typeof t=="object"?t:aR(),s=typeof t=="string"?t:y0,r=KE(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=NM("firestore");i&&Jwe(r,...i)}return r}function O2(t){if(t._terminated)throw new Re(le.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zwe(t),t._firestoreClient}function Zwe(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new Tye(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,NQ(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Gwe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Sr.fromBase64String(e))}catch(n){throw new Re(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ro._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(XE(e,Ro._jsonSchema))return Ro.fromBase64String(e.bytes)}}Ro._jsonSchemaVersion="firestore/bytes/1.0",Ro._jsonSchema={type:ys("string",Ro._jsonSchemaVersion),bytes:ys("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kR{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ka(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RR{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ot(this._lat,e._lat)||Ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cc._jsonSchemaVersion}}static fromJSON(e){if(XE(e,Cc._jsonSchema))return new Cc(e.latitude,e.longitude)}}Cc._jsonSchemaVersion="firestore/geoPoint/1.0",Cc._jsonSchema={type:ys("string",Cc._jsonSchemaVersion),latitude:ys("number"),longitude:ys("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ic{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ic._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(XE(e,Ic._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ic(e.vectorValues);throw new Re(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ic._jsonSchemaVersion="firestore/vectorValue/1.0",Ic._jsonSchema={type:ys("string",Ic._jsonSchemaVersion),vectorValues:ys("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ebe=/^__.*__$/;class tbe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new yf(e,this.data,this.fieldMask,n,this.fieldTransforms):new JE(e,this.data,n,this.fieldTransforms)}}class DQ{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new yf(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LQ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:t})}}class D2{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new D2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return k0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LQ(this.Ac)&&ebe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nbe{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||TR(e)}Cc(e,n,s,r=!1){return new D2({Ac:e,methodName:n,Dc:s,path:ka.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MQ(t){const e=t._freezeSettings(),n=TR(t._databaseId);return new nbe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sbe(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);M2("Data must be an object, but it was:",o,s);const a=FQ(s,o);let l,u;if(i.merge)l=new yc(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=uO(e,d,n);if(!o.contains(p))throw new Re(le.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);UQ(h,p)||h.push(p)}l=new yc(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new tbe(new la(a),l,u)}class AR extends RR{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AR}}class L2 extends RR{_toFieldTransform(e){return new Yye(e.path,new Eb)}isEqual(e){return e instanceof L2}}function rbe(t,e,n,s){const r=t.Cc(1,e,n);M2("Data must be an object, but it was:",r,s);const i=[],o=la.empty();_f(s,(l,u)=>{const h=F2(e,l,n);u=ln(u);const d=r.yc(h);if(u instanceof AR)i.push(h);else{const p=PR(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new yc(i);return new DQ(o,a,r.fieldTransforms)}function ibe(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[uO(e,s,n)],l=[r];if(i.length%2!=0)throw new Re(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(uO(e,i[p])),l.push(i[p+1]);const u=[],h=la.empty();for(let p=a.length-1;p>=0;--p)if(!UQ(u,a[p])){const m=a[p];let w=l[p];w=ln(w);const k=o.yc(m);if(w instanceof AR)u.push(m);else{const P=PR(w,k);P!=null&&(u.push(m),h.set(m,P))}}const d=new yc(u);return new DQ(h,d,o.fieldTransforms)}function PR(t,e){if(VQ(t=ln(t)))return M2("Unsupported field value:",e,t),FQ(t,e);if(t instanceof RR)return function(n,s){if(!LQ(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=PR(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=ln(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Kye(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=rr.fromDate(n);return{timestampValue:T0(s.serializer,r)}}if(n instanceof rr){const r=new rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:T0(s.serializer,r)}}if(n instanceof Cc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ro)return{bytesValue:ZG(s.serializer,n._byteString)};if(n instanceof ki){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_2(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Ic)return function(r,i){return{mapValue:{fields:{[AG]:{stringValue:PG},[v0]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return f2(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${a2(n)}`)}(t,e)}function FQ(t,e){const n={};return TG(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_f(t,(s,r)=>{const i=PR(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function VQ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rr||t instanceof Cc||t instanceof Ro||t instanceof ki||t instanceof RR||t instanceof Ic)}function M2(t,e,n){if(!VQ(n)||!bG(n)){const s=a2(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function uO(t,e,n){if((e=ln(e))instanceof kR)return e._internalPath;if(typeof e=="string")return F2(t,e);throw k0("Field path arguments must be of type string or ",t,!1,void 0,n)}const obe=new RegExp("[~\\*/\\[\\]]");function F2(t,e,n){if(e.search(obe)>=0)throw k0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kR(...e.split("."))._internalPath}catch{throw k0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function k0(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Re(le.INVALID_ARGUMENT,a+t+l)}function UQ(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qQ{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new abe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jQ("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class abe extends qQ{data(){return super.data()}}function jQ(t,e){return typeof e=="string"?F2(t,e):e instanceof kR?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cbe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lbe{convertValue(e,n="none"){switch(Nd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return as(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return _f(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[v0].arrayValue?.values?.map(s=>as(s.doubleValue));return new Ic(n)}convertGeoPoint(e){return new Cc(as(e.latitude),as(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=gR(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(vb(e));default:return null}}convertTimestamp(e){const n=Ad(e);return new rr(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ns.fromString(e);sn(iQ(s),9688,{name:e});const r=new wb(s.get(1),s.get(3)),i=new Me(s.popFirst(5));return r.isEqual(n)||Kl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ube(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Sv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bp extends qQ{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new aI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(jQ("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bp._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}bp._jsonSchemaVersion="firestore/documentSnapshot/1.0",bp._jsonSchema={type:ys("string",bp._jsonSchemaVersion),bundleSource:ys("string","DocumentSnapshot"),bundleName:ys("string"),bundle:ys("string")};class aI extends bp{data(e={}){return super.data(e)}}class Cm{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Sv(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new aI(this._firestore,this._userDataWriter,s.key,s,new Sv(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new aI(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Sv(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new aI(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Sv(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:hbe(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hbe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function R0(t){t=Ra(t,ki);const e=Ra(t.firestore,qp);return Xwe(O2(e),t._key).then(n=>WQ(e,t,n))}Cm._jsonSchemaVersion="firestore/querySnapshot/1.0",Cm._jsonSchema={type:ys("string",Cm._jsonSchemaVersion),bundleSource:ys("string","QuerySnapshot"),bundleName:ys("string"),bundle:ys("string")};class BQ extends lbe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,n)}}function A0(t,e,n){t=Ra(t,ki);const s=Ra(t.firestore,qp),r=ube(t.converter,e,n);return V2(s,[sbe(MQ(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Aa.none())])}function $Q(t,e,n,...s){t=Ra(t,ki);const r=Ra(t.firestore,qp),i=MQ(r);let o;return o=typeof(e=ln(e))=="string"||e instanceof kR?ibe(i,"updateDoc",t._key,e,n,s):rbe(i,"updateDoc",t._key,e),V2(r,[o.toMutation(t._key,Aa.exists(!0))])}function zQ(t){return V2(Ra(t.firestore,qp),[new p2(t._key,Aa.none())])}function HQ(t,...e){t=ln(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Pj(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Pj(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof ki)o=Ra(t.firestore,qp),a=_R(t._key.path),i={next:l=>{e[s]&&e[s](WQ(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Ra(t,SR);o=Ra(l.firestore,qp),a=l._query;const u=new BQ(o);i={next:h=>{e[s]&&e[s](new Cm(o,u,l,h))},error:e[s+1],complete:e[s+2]},cbe(t._query)}return function(l,u,h,d){const p=new AQ(d),m=new wQ(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>yQ(await lO(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>vQ(await lO(l),m))}}(O2(o),a,r,i)}function V2(t,e){return function(n,s){const r=new sd;return n.asyncQueue.enqueueAndForget(async()=>Uwe(await Ywe(n),s,r)),r.promise}(O2(t),e)}function WQ(t,e,n){const s=n.docs.get(e._key),r=new BQ(t);return new bp(t,r,e._key,s,new Sv(n.hasPendingWrites,n.fromCache),e.converter)}function iw(){return new L2("serverTimestamp")}(function(t,e=!0){(function(n){H_=n})(mf),kd(new $l("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new qp(new sye(n.getProvider("auth-internal")),new oye(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Re(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wb(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Oo(Mq,Fq,t),Oo(Mq,Fq,"esm2020")})();var dbe="firebase",fbe="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Oo(dbe,fbe,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KQ="firebasestorage.googleapis.com",GQ="storageBucket",pbe=120*1e3,gbe=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ss=class QQ extends Zc{constructor(e,n,s=0){super(PP(e),`Firebase Storage: ${n} (${PP(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,QQ.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return PP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var ts;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function PP(t){return"storage/"+t}function U2(){const t="An unknown error occurred, please check the error payload for server response.";return new Ss(ts.UNKNOWN,t)}function mbe(t){return new Ss(ts.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _be(t){return new Ss(ts.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ybe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ss(ts.UNAUTHENTICATED,t)}function vbe(){return new Ss(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wbe(t){return new Ss(ts.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bbe(){return new Ss(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ebe(){return new Ss(ts.CANCELED,"User canceled the upload/download.")}function Tbe(t){return new Ss(ts.INVALID_URL,"Invalid URL '"+t+"'.")}function Cbe(t){return new Ss(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ibe(){return new Ss(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GQ+"' property when initializing the app?")}function Sbe(){return new Ss(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kbe(){return new Ss(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Rbe(t){return new Ss(ts.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hO(t){return new Ss(ts.INVALID_ARGUMENT,t)}function YQ(){return new Ss(ts.APP_DELETED,"The Firebase app was deleted.")}function Abe(t){return new Ss(ts.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ow(t,e){return new Ss(ts.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gy(t){throw new Ss(ts.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=wi.makeFromUrl(e,n)}catch{return new wi(e,"")}if(s.path==="")return s;throw Cbe(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===KQ?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",D=new RegExp(`^https?://${k}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],H=q.regex.exec(e);if(H){const X=H[q.indices.bucket];let I=H[q.indices.path];I||(I=""),s=new wi(X,I),q.postModify(s);break}}if(s==null)throw Tbe(e);return s}}class Pbe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nbe(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...D){if(u){p();return}if(P){p(),h.call(null,P,...D);return}if(l()||o){p(),h.call(null,P,...D);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function k(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function xbe(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Obe(t){return t!==void 0}function Dbe(t){return typeof t=="object"&&!Array.isArray(t)}function q2(t){return typeof t=="string"||t instanceof String}function Nj(t){return j2()&&t instanceof Blob}function j2(){return typeof Blob<"u"}function dO(t,e,n,s){if(s<e)throw hO(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw hO(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nT(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function XQ(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ep;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ep||(Ep={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lbe(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mbe{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new uC(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ep.NO_ERROR,l=i.getStatus();if(!a||Lbe(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ep.ABORT;s(!1,new uC(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new uC(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Obe(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=U2();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?YQ():Ebe();o(l)}else{const l=bbe();o(l)}};this.canceled_?n(!1,new uC(!1,null,!0)):this.backoffId_=Nbe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xbe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uC{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function Fbe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Vbe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ube(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qbe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function jbe(t,e,n,s,r,i,o=!0,a=!1){const l=XQ(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return Ube(h,e),Fbe(h,n),Vbe(h,i),qbe(h,s),new Mbe(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bbe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $be(...t){const e=Bbe();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(j2())return new Blob(t);throw new Ss(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zbe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hbe(t){if(typeof atob>"u")throw Rbe("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class NP{constructor(e,n){this.data=e,this.contentType=n||null}}function JQ(t,e){switch(t){case pa.RAW:return new NP(ZQ(e));case pa.BASE64:case pa.BASE64URL:return new NP(eY(t,e));case pa.DATA_URL:return new NP(Kbe(e),Gbe(e))}throw U2()}function ZQ(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Wbe(t){let e;try{e=decodeURIComponent(t)}catch{throw ow(pa.DATA_URL,"Malformed data URL.")}return ZQ(e)}function eY(t,e){switch(t){case pa.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw ow(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case pa.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw ow(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Hbe(e)}catch(r){throw r.message.includes("polyfill")?r:ow(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class tY{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ow(pa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=Qbe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function Kbe(t){const e=new tY(t);return e.base64?eY(pa.BASE64,e.rest):Wbe(e.rest)}function Gbe(t){return new tY(t).contentType}function Qbe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $h{constructor(e,n){let s=0,r="";Nj(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nj(this.data_)){const s=this.data_,r=zbe(s,e,n);return r===null?null:new $h(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new $h(s,!0)}}static getBlob(...e){if(j2()){const n=e.map(s=>s instanceof $h?s.data_:s);return new $h($be.apply(null,n))}else{const n=e.map(o=>q2(o)?JQ(pa.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new $h(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function B2(t){let e;try{e=JSON.parse(t)}catch{return null}return Dbe(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ybe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Xbe(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function nY(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jbe(t,e){return e}class ri{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||Jbe}}let hC=null;function Zbe(t){return!q2(t)||t.length<2?t:nY(t)}function sY(){if(hC)return hC;const t=[];t.push(new ri("bucket")),t.push(new ri("generation")),t.push(new ri("metageneration")),t.push(new ri("name","fullPath",!0));function e(i,o){return Zbe(o)}const n=new ri("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new ri("size");return r.xform=s,t.push(r),t.push(new ri("timeCreated")),t.push(new ri("updated")),t.push(new ri("md5Hash",null,!0)),t.push(new ri("cacheControl",null,!0)),t.push(new ri("contentDisposition",null,!0)),t.push(new ri("contentEncoding",null,!0)),t.push(new ri("contentLanguage",null,!0)),t.push(new ri("contentType",null,!0)),t.push(new ri("metadata","customMetadata",!0)),hC=t,hC}function eEe(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new wi(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function tEe(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return eEe(s,t),s}function rY(t,e,n){const s=B2(e);return s===null?null:tEe(t,s,n)}function nEe(t,e,n,s){const r=B2(e);if(r===null||!q2(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=nT(h,n,s),p=XQ({alt:"media",token:a});return d+p})[0]}function sEe(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xj="prefixes",Oj="items";function rEe(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[xj])for(const r of n[xj]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new wi(e,i));s.prefixes.push(o)}if(n[Oj])for(const r of n[Oj]){const i=t._makeStorageReference(new wi(e,r.name));s.items.push(i)}return s}function iEe(t,e,n){const s=B2(n);return s===null?null:rEe(t,e,s)}class NR{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $2(t){if(!t)throw U2()}function oEe(t,e){function n(s,r){const i=rY(t,r,e);return $2(i!==null),i}return n}function aEe(t,e){function n(s,r){const i=iEe(t,e,r);return $2(i!==null),i}return n}function cEe(t,e){function n(s,r){const i=rY(t,r,e);return $2(i!==null),nEe(i,r,t.host,t._protocol)}return n}function z2(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=vbe():r=ybe():n.getStatus()===402?r=_be(t.bucket):n.getStatus()===403?r=wbe(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function iY(t){const e=z2(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=mbe(t.path)),i.serverResponse=r.serverResponse,i}return n}function lEe(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=nT(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new NR(a,l,aEe(t,e.bucket),u);return h.urlParams=i,h.errorHandler=z2(e),h}function uEe(t,e,n){const s=e.fullServerUrl(),r=nT(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new NR(r,i,cEe(t,n),o);return a.errorHandler=iY(e),a}function hEe(t,e){const n=e.fullServerUrl(),s=nT(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new NR(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=iY(e),a}function dEe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fEe(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=dEe(null,e)),s}function pEe(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=fEe(e,s,r),h=sEe(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=$h.getBlob(d,s,p);if(m===null)throw Sbe();const w={name:u.fullPath},k=nT(i,t.host,t._protocol),P="POST",D=t.maxUploadRetryTime,M=new NR(k,P,oEe(t,n),D);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=z2(e),M}class gEe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ep.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ep.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ep.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw Gy("cannot .send() more than once");if(Jc(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mEe extends gEe{initXhr(){this.xhr_.responseType="text"}}function xR(){return new mEe}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jp{constructor(e,n){this._service=e,n instanceof wi?this._location=n:this._location=wi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jp(e,n)}get root(){const e=new wi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nY(this._location.path)}get storage(){return this._service}get parent(){const e=Ybe(this._location.path);if(e===null)return null;const n=new wi(this._location.bucket,e);return new jp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Abe(e)}}function _Ee(t,e,n){t._throwIfRoot("uploadBytes");const s=pEe(t.storage,t._location,sY(),new $h(e,!0),n);return t.storage.makeRequestWithTokens(s,xR).then(r=>({metadata:r,ref:t}))}function yEe(t,e,n=pa.RAW,s){t._throwIfRoot("uploadString");const r=JQ(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),_Ee(t,r.data,i)}function vEe(t){const e={prefixes:[],items:[]};return oY(t,e).then(()=>e)}async function oY(t,e,n){const s=await wEe(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await oY(t,e,s.nextPageToken)}function wEe(t,e){e!=null&&typeof e.maxResults=="number"&&dO("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=lEe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,xR)}function bEe(t){t._throwIfRoot("getDownloadURL");const e=uEe(t.storage,t._location,sY());return t.storage.makeRequestWithTokens(e,xR).then(n=>{if(n===null)throw kbe();return n})}function EEe(t){t._throwIfRoot("deleteObject");const e=hEe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,xR)}function TEe(t,e){const n=Xbe(t._location.path,e),s=new wi(t._location.bucket,n);return new jp(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CEe(t){return/^[A-Za-z]+:\/\//.test(t)}function IEe(t,e){return new jp(t,e)}function aY(t,e){if(t instanceof H2){const n=t;if(n._bucket==null)throw Ibe();const s=new jp(n,n._bucket);return e!=null?aY(s,e):s}else return e!==void 0?TEe(t,e):t}function SEe(t,e){if(e&&CEe(e)){if(t instanceof H2)return IEe(t,e);throw hO("To use ref(service, url), the first argument must be a Storage instance.")}else return aY(t,e)}function Dj(t,e){const n=e?.[GQ];return n==null?null:wi.makeFromBucketSpec(n,t)}function kEe(t,e,n,s={}){t.host=`${e}:${n}`;const r=Jc(e);r&&(sR(`https://${t.host}/b`),rR("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:xM(i,t.app.options.projectId))}class H2{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=KQ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pbe,this._maxUploadRetryTime=gbe,this._requests=new Set,r!=null?this._bucket=wi.makeFromBucketSpec(r,this._host):this._bucket=Dj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wi.makeFromBucketSpec(this._url,e):this._bucket=Dj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(co(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jp(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new Pbe(YQ());{const o=jbe(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Lj="@firebase/storage",Mj="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cY="storage";function lY(t,e,n,s){return t=ln(t),yEe(t,e,n,s)}function uY(t){return t=ln(t),vEe(t)}function hY(t){return t=ln(t),bEe(t)}function dY(t){return t=ln(t),EEe(t)}function fY(t,e){return t=ln(t),SEe(t,e)}function REe(t=aR(),e){t=ln(t);const n=KE(t,cY).getImmediate({identifier:e}),s=NM("storage");return s&&AEe(n,...s),n}function AEe(t,e,n,s={}){kEe(t,e,n,s)}function PEe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new H2(n,s,r,e,mf)}function NEe(){kd(new $l(cY,PEe,"PUBLIC").setMultipleInstances(!0)),Oo(Lj,Mj,""),Oo(Lj,Mj,"esm2020")}NEe();var Fj={};const Vj="@firebase/database",Uj="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let pY="";function xEe(t){pY=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OEe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Os(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gb(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DEe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gY=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OEe(e)}}catch{}return new DEe},sp=gY("localStorage"),LEe=gY("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Im=new oR("@firebase/database"),MEe=function(){let t=1;return function(){return t++}}(),mY=function(t){const e=ige(t),n=new tge;n.update(e);const s=n.digest();return PM.encodeByteArray(s)},sT=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=sT.apply(null,s):typeof s=="object"?e+=Os(s):e+=s,e+=" "}return e};let aw=null,qj=!0;const FEe=function(t,e){ge(!0,"Can't turn on custom loggers persistently."),Im.logLevel=St.VERBOSE,aw=Im.log.bind(Im)},$r=function(...t){if(qj===!0&&(qj=!1,aw===null&&LEe.get("logging_enabled")===!0&&FEe()),aw){const e=sT.apply(null,t);aw(e)}},rT=function(t){return function(...e){$r(t,...e)}},fO=function(...t){const e="FIREBASE INTERNAL ERROR: "+sT(...t);Im.error(e)},Ql=function(...t){const e=`FIREBASE FATAL ERROR: ${sT(...t)}`;throw Im.error(e),new Error(e)},Zi=function(...t){const e="FIREBASE WARNING: "+sT(...t);Im.warn(e)},VEe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_Y=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},UEe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},o_="[MIN_NAME]",Bp="[MAX_NAME]",Q_=function(t,e){if(t===e)return 0;if(t===o_||e===Bp)return-1;if(e===o_||t===Bp)return 1;{const n=jj(t),s=jj(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},qEe=function(t,e){return t===e?0:t<e?-1:1},Qy=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Os(e))},W2=function(t){if(typeof t!="object"||t===null)return Os(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Os(e[s]),n+=":",n+=W2(t[e[s]]);return n+="}",n},yY=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function no(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const vY=function(t){ge(!_Y(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},jEe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},BEe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $Ee(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const zEe=new RegExp("^-?(0*)\\d{1,10}$"),HEe=-2147483648,WEe=2147483647,jj=function(t){if(zEe.test(t)){const e=Number(t);if(e>=HEe&&e<=WEe)return e}return null},Y_=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Zi("Exception was thrown by user callback.",n),e},Math.floor(0))}},KEe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cw=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class GEe{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,co(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QEe{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?($r("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(e)}}class cI{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}cI.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K2="5",wY="v",bY="s",EY="r",TY="f",CY=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,IY="ls",SY="p",pO="ac",kY="websocket",RY="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AY{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function YEe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function PY(t,e,n){ge(typeof e=="string","typeof type must == string"),ge(typeof n=="object","typeof params must == object");let s;if(e===kY)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===RY)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);YEe(t)&&(n.ns=t.namespace);const r=[];return no(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XEe{constructor(){this.counters_={}}incrementCounter(e,n=1){gu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Dpe(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xP={},OP={};function G2(t){const e=t.toString();return xP[e]||(xP[e]=new XEe),xP[e]}function JEe(t,e){const n=t.toString();return OP[n]||(OP[n]=e()),OP[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZEe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Y_(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bj="start",eTe="close",tTe="pLPCommand",nTe="pRTLPCB",NY="id",xY="pw",OY="ser",sTe="cb",rTe="seg",iTe="ts",oTe="d",aTe="dframe",DY=1870,LY=30,cTe=DY-LY,lTe=25e3,uTe=3e4;class dm{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rT(e),this.stats_=G2(n),this.urlFn=l=>(this.appCheckToken&&(l[pO]=this.appCheckToken),PY(n,RY,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ZEe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uTe)),UEe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q2((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Bj)this.id=a,this.password=l;else if(o===eTe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Bj]="t",s[OY]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[sTe]=this.scriptTagHolder.uniqueCallbackIdentifier),s[wY]=K2,this.transportSessionId&&(s[bY]=this.transportSessionId),this.lastSessionId&&(s[IY]=this.lastSessionId),this.applicationId&&(s[SY]=this.applicationId),this.appCheckToken&&(s[pO]=this.appCheckToken),typeof location<"u"&&location.hostname&&CY.test(location.hostname)&&(s[EY]=TY);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dm.forceAllow_=!0}static forceDisallow(){dm.forceDisallow_=!0}static isAvailable(){return dm.forceAllow_?!0:!dm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jEe()&&!BEe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Os(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=kK(n),r=yY(s,cTe);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[aTe]="t",s[NY]=e,s[xY]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Os(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Q2{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MEe(),window[tTe+this.uniqueCallbackIdentifier]=e,window[nTe+this.uniqueCallbackIdentifier]=n,this.myIFrame=Q2.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){$r("frame writing exception"),a.stack&&$r(a.stack),$r(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$r("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[NY]=this.myID,e[xY]=this.myPW,e[OY]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+LY+s.length<=DY;){const i=this.pendingSegs.shift();s=s+"&"+rTe+r+"="+i.seg+"&"+iTe+r+"="+i.ts+"&"+oTe+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(lTe)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{$r("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hTe=16384,dTe=45e3;let P0=null;typeof MozWebSocket<"u"?P0=MozWebSocket:typeof WebSocket<"u"&&(P0=WebSocket);class ua{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rT(this.connId),this.stats_=G2(n),this.connURL=ua.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[wY]=K2,typeof location<"u"&&location.hostname&&CY.test(location.hostname)&&(o[EY]=TY),n&&(o[bY]=n),s&&(o[IY]=s),r&&(o[pO]=r),i&&(o[SY]=i),PY(e,kY,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sp.set("previous_websocket_failure",!0);try{let s;Wpe(),this.mySock=new P0(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ua.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&P0!==null&&!ua.forceDisallow_}static previouslyFailed(){return sp.isInMemoryStorage||sp.get("previous_websocket_failure")===!0}markConnectionHealthy(){sp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=gb(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ge(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Os(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=yY(n,hTe);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dTe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ua.responsesRequiredToBeHealthy=2;ua.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sb{static get ALL_TRANSPORTS(){return[dm,ua]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ua&&ua.isAvailable();let s=n&&!ua.previouslyFailed();if(e.webSocketOnly&&(n||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ua];else{const r=this.transports_=[];for(const i of Sb.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);Sb.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Sb.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fTe=6e4,pTe=5e3,gTe=10*1024,mTe=100*1024,DP="t",$j="d",_Te="s",zj="r",yTe="e",Hj="o",Wj="a",Kj="n",Gj="p",vTe="h";class wTe{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rT("c:"+this.id+":"),this.transportManager_=new Sb(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=cw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mTe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gTe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(DP in e){const n=e[DP];n===Wj?this.upgradeIfSecondaryHealthy_():n===zj?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Hj&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qy("t",e),s=Qy("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Kj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qy("t",e),s=Qy("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qy(DP,e);if($j in e){const s=e[$j];if(n===vTe){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Kj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===_Te?this.onConnectionShutdown_(s):n===zj?this.onReset_(s):n===yTe?fO("Server Error: "+s):n===Hj?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),K2!==s&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),cw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fTe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pTe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gj,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class MY{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FY{constructor(e){this.allowedEvents_=e,this.listeners_={},ge(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){ge(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N0 extends FY{static getInstance(){return new N0}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!OM()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ge(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qj=32,Yj=768;let gn=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Gt(){return new gn("")}function vt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Dd(t){return t.pieces_.length-t.pieceNum_}function In(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new gn(t.pieces_,e)}function VY(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bTe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function UY(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function qY(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new gn(e,0)}function Ls(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof gn)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new gn(n,0)}function At(t){return t.pieceNum_>=t.pieces_.length}function bi(t,e){const n=vt(t),s=vt(e);if(n===null)return e;if(n===s)return bi(In(t),In(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Y2(t,e){if(Dd(t)!==Dd(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function ga(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Dd(t)>Dd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class ETe{constructor(e,n){this.errorPrefix_=n,this.parts_=UY(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=iR(this.parts_[s]);jY(this)}}function TTe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=iR(e),jY(t)}function CTe(t){const e=t.parts_.pop();t.byteLength_-=iR(e),t.parts_.length>0&&(t.byteLength_-=1)}function jY(t){if(t.byteLength_>Yj)throw new Error(t.errorPrefix_+"has a key path longer than "+Yj+" bytes ("+t.byteLength_+").");if(t.parts_.length>Qj)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Qj+") or object contains a cycle "+$f(t))}function $f(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class X2 extends FY{static getInstance(){return new X2}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ge(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yy=1e3,ITe=300*1e3,Xj=30*1e3,STe=1.3,kTe=3e4,RTe="server_kill",Jj=3;class Ml extends MY{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ml.nextPersistentConnectionId_++,this.log_=rT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yy,this.maxReconnectDelay_=ITe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");X2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&N0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(Os(i)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new nR,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Ml.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gu(e,"w")){const s=Jm(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||ege(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Xj)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Zpe(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Os(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):fO("Unrecognized action received from server: "+Os(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yy,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>kTe&&(this.reconnectDelay_=Yy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*STe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ml.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){ge(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?$r("getToken() completed but was canceled"):($r("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new wTe(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{Zi(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(RTe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Zi(d),l())}}}interrupt(e){$r("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$r("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dx(this.interruptReasons_)&&(this.reconnectDelay_=Yy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>W2(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new gn(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){$r("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Jj&&(this.reconnectDelay_=Xj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){$r("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Jj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pY.replace(/\./g,"-")]=1,OM()?e["framework.cordova"]=1:xK()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=N0.getInstance().currentlyOnline();return Dx(this.interruptReasons_)&&e}}Ml.nextPersistentConnectionId_=0;Ml.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Et{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Et(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OR{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Et(o_,e),r=new Et(o_,n);return this.compare(s,r)!==0}minPost(){return Et.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let dC;class BY extends OR{static get __EMPTY_NODE(){return dC}static set __EMPTY_NODE(e){dC=e}compare(e,n){return Q_(e.name,n.name)}isDefinedOn(e){throw B_("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Et.MIN}maxPost(){return new Et(Bp,dC)}makePost(e,n){return ge(typeof e=="string","KeyIndex indexValue must always be a string."),new Et(e,dC)}toString(){return".key"}}const Sm=new BY;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fC{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let oo=class kv{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??kv.RED,this.left=r??vc.EMPTY_NODE,this.right=i??vc.EMPTY_NODE}copy(e,n,s,r,i){return new kv(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return vc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return vc.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,kv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,kv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};oo.RED=!0;oo.BLACK=!1;class ATe{copy(e,n,s,r,i){return this}insert(e,n,s){return new oo(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let vc=class lI{constructor(e,n=lI.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new lI(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,oo.BLACK,null,null))}remove(e){return new lI(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oo.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fC(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fC(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fC(this.root_,null,this.comparator_,!0,e)}};vc.EMPTY_NODE=new ATe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PTe(t,e){return Q_(t.name,e.name)}function J2(t,e){return Q_(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let gO;function NTe(t){gO=t}const $Y=function(t){return typeof t=="number"?"number:"+vY(t):"string:"+t},zY=function(t){if(t.isLeafNode()){const e=t.val();ge(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gu(e,".sv"),"Priority must be a string or number.")}else ge(t===gO||t.isEmpty(),"priority of unexpected type.");ge(t===gO||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Zj,$p=class sa{static set __childrenNodeConstructor(e){Zj=e}static get __childrenNodeConstructor(){return Zj}constructor(e,n=sa.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ge(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zY(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new sa(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:sa.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return At(e)?this:vt(e)===".priority"?this.priorityNode_:sa.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:sa.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=vt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(ge(s!==".priority"||Dd(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,sa.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$Y(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=vY(this.value_):e+=this.value_,this.lazyHash_=mY(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===sa.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof sa.__childrenNodeConstructor?-1:(ge(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=sa.VALUE_TYPE_ORDER.indexOf(n),i=sa.VALUE_TYPE_ORDER.indexOf(s);return ge(r>=0,"Unknown leaf type: "+n),ge(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}};$p.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let HY,WY;function xTe(t){HY=t}function OTe(t){WY=t}class DTe extends OR{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?Q_(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Et.MIN}maxPost(){return new Et(Bp,new $p("[PRIORITY-POST]",WY))}makePost(e,n){const s=HY(e);return new Et(n,new $p("[PRIORITY-POST]",s))}toString(){return".priority"}}const Xn=new DTe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LTe=Math.log(2);class MTe{constructor(e){const n=i=>parseInt(Math.log(i)/LTe,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const x0=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new oo(p,d.node,oo.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),k=r(m+1,u);return d=t[m],p=n?n(d):d,new oo(p,d.node,oo.BLACK,w,k)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,k){const P=d-w,D=d;d-=w;const M=r(P+1,D),V=t[P],q=n?n(V):V;m(new oo(q,V.node,k,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const k=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));k?p(P,oo.BLACK):(p(P,oo.BLACK),p(P,oo.RED))}return h},o=new MTe(t.length),a=i(o);return new vc(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let LP;const Rg={};class Rl{static get Default(){return ge(Rg&&Xn,"ChildrenNode.ts has not been loaded"),LP=LP||new Rl({".priority":Rg},{".priority":Xn}),LP}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Jm(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof vc?n:null}hasIndex(e){return gu(this.indexSet_,e.toString())}addIndex(e,n){ge(e!==Sm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Et.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=x0(s,e.getCompare()):a=Rg;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Rl(h,u)}addToIndexes(e,n){const s=c0(this.indexes_,(r,i)=>{const o=Jm(this.indexSet_,i);if(ge(o,"Missing index implementation for "+i),r===Rg)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Et.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),x0(a,o.getCompare())}else return Rg;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Et(e.name,a))),l.insert(e,e.node)}});return new Rl(s,this.indexSet_)}removeFromIndexes(e,n){const s=c0(this.indexes_,r=>{if(r===Rg)return r;{const i=n.get(e.name);return i?r.remove(new Et(e.name,i)):r}});return new Rl(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Xy;class qe{static get EMPTY_NODE(){return Xy||(Xy=new qe(new vc(J2),null,Rl.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&zY(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xy}updatePriority(e){return this.children_.isEmpty()?this:new qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xy:n}}getChild(e){const n=vt(e);return n===null?this:this.getImmediateChild(n).getChild(In(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ge(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Et(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?Xy:this.priorityNode_;return new qe(r,o,i)}}updateChild(e,n){const s=vt(e);if(s===null)return n;{ge(vt(e)!==".priority"||Dd(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(In(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(Xn,(o,a)=>{n[o]=a.val(e),s++,i&&qe.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$Y(this.getPriority().val())+":"),this.forEachChild(Xn,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":mY(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Et(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Et(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Et(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Et.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Et.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===iT?-1:0}withIndex(e){if(e===Sm||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new qe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Sm||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Xn),r=n.getIterator(Xn);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Sm?null:this.indexMap_.get(e.toString())}}qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class FTe extends qe{constructor(){super(new vc(J2),qe.EMPTY_NODE,Rl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}}const iT=new FTe;Object.defineProperties(Et,{MIN:{value:new Et(o_,qe.EMPTY_NODE)},MAX:{value:new Et(Bp,iT)}});BY.__EMPTY_NODE=qe.EMPTY_NODE;$p.__childrenNodeConstructor=qe;NTe(iT);OTe(iT);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VTe=!0;function tr(t,e=null){if(t===null)return qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ge(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $p(n,tr(e))}if(!(t instanceof Array)&&VTe){const n=[];let s=!1;if(no(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=tr(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new Et(i,a)))}}),n.length===0)return qe.EMPTY_NODE;const r=x0(n,PTe,i=>i.name,J2);if(s){const i=x0(n,Xn.getCompare());return new qe(r,tr(e),new Rl({".priority":i},{".priority":Xn}))}else return new qe(r,tr(e),Rl.Default)}else{let n=qe.EMPTY_NODE;return no(t,(s,r)=>{if(gu(t,s)&&s.substring(0,1)!=="."){const i=tr(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(tr(e))}}xTe(tr);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UTe extends OR{constructor(e){super(),this.indexPath_=e,ge(!At(e)&&vt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?Q_(e.name,n.name):i}makePost(e,n){const s=tr(e),r=qe.EMPTY_NODE.updateChild(this.indexPath_,s);return new Et(n,r)}maxPost(){const e=qe.EMPTY_NODE.updateChild(this.indexPath_,iT);return new Et(Bp,e)}toString(){return UY(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qTe extends OR{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Q_(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Et.MIN}maxPost(){return Et.MAX}makePost(e,n){const s=tr(e);return new Et(n,s)}toString(){return".value"}}const jTe=new qTe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KY(t){return{type:"value",snapshotNode:t}}function a_(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function kb(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Rb(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function BTe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z2{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){ge(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(kb(n,a)):ge(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(a_(n,s)):o.trackChildChange(Rb(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Xn,(r,i)=>{n.hasChild(r)||s.trackChildChange(kb(r,i))}),n.isLeafNode()||n.forEachChild(Xn,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(Rb(r,i,o))}else s.trackChildChange(a_(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?qe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ab{constructor(e){this.indexedFilter_=new Z2(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ab.getStartPost_(e),this.endPost_=Ab.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Et(n,s))||(s=qe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=qe.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(qe.EMPTY_NODE);const i=this;return n.forEachChild(Xn,(o,a)=>{i.matches(new Et(o,a))||(r=r.updateImmediateChild(o,qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Te{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ab(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Et(n,s))||(s=qe.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=qe.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(qe.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;ge(a.numChildren()===this.limit_,"");const l=new Et(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(Rb(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(kb(n,d));const w=a.updateImmediateChild(n,qe.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(a_(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(kb(u.name,u.node)),i.trackChildChange(a_(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,qe.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eF{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:o_}hasEnd(){return this.endSet_}getIndexEndValue(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bp}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new eF;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zTe(t){return t.loadsAllData()?new Z2(t.getIndex()):t.hasLimit()?new $Te(t):new Ab(t)}function e3(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Xn?n="$priority":t.index_===jTe?n="$value":t.index_===Sm?n="$key":(ge(t.index_ instanceof UTe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Os(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Os(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Os(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Os(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Os(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function t3(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Xn&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O0 extends MY{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=rT("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=O0.getListenId_(e,s),a={};this.listens_[o]=a;const l=e3(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),Jm(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=O0.getListenId_(e,n);delete this.listens_[s]}get(e){const n=e3(e._queryParams),s=e._path.toString(),r=new nR;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$_(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=gb(a.responseText)}catch{Zi("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&Zi("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HTe{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D0(){return{value:null,children:new Map}}function GY(t,e,n){if(At(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=vt(e);t.children.has(s)||t.children.set(s,D0());const r=t.children.get(s);e=In(e),GY(r,e,n)}}function mO(t,e,n){t.value!==null?n(e,t.value):WTe(t,(s,r)=>{const i=new gn(e.toString()+"/"+s);mO(r,i,n)})}function WTe(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KTe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&no(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n3=10*1e3,GTe=30*1e3,QTe=300*1e3;class YTe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KTe(e);const s=n3+(GTe-n3)*Math.random();cw(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;no(e,(r,i)=>{i>0&&gu(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),cw(this.reportStats_.bind(this),Math.floor(Math.random()*2*QTe))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ma;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ma||(ma={}));function QY(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tF(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function nF(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L0{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=ma.ACK_USER_WRITE,this.source=QY()}operationForChild(e){if(At(this.path)){if(this.affectedTree.value!=null)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new gn(e));return new L0(Gt(),n,this.revert)}}else return ge(vt(this.path)===e,"operationForChild called for unrelated child."),new L0(In(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pb{constructor(e,n){this.source=e,this.path=n,this.type=ma.LISTEN_COMPLETE}operationForChild(e){return At(this.path)?new Pb(this.source,Gt()):new Pb(this.source,In(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zp{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=ma.OVERWRITE}operationForChild(e){return At(this.path)?new zp(this.source,Gt(),this.snap.getImmediateChild(e)):new zp(this.source,In(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nb{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=ma.MERGE}operationForChild(e){if(At(this.path)){const n=this.children.subtree(new gn(e));return n.isEmpty()?null:n.value?new zp(this.source,Gt(),n.value):new Nb(this.source,Gt(),n)}else return ge(vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Nb(this.source,In(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ld{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(At(e))return this.isFullyInitialized()&&!this.filtered_;const n=vt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XTe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function JTe(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(BTe(o.childName,o.snapshotNode))}),Jy(t,r,"child_removed",e,s,n),Jy(t,r,"child_added",e,s,n),Jy(t,r,"child_moved",i,s,n),Jy(t,r,"child_changed",e,s,n),Jy(t,r,"value",e,s,n),r}function Jy(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>eCe(t,a,l)),o.forEach(a=>{const l=ZTe(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function ZTe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eCe(t,e,n){if(e.childName==null||n.childName==null)throw B_("Should only compare child_ events.");const s=new Et(e.childName,e.snapshotNode),r=new Et(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DR(t,e){return{eventCache:t,serverCache:e}}function lw(t,e,n,s){return DR(new Ld(e,n,s),t.serverCache)}function YY(t,e,n,s){return DR(t.eventCache,new Ld(e,n,s))}function M0(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Hp(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let MP;const tCe=()=>(MP||(MP=new vc(qEe)),MP);let qo=class io{static fromObject(e){let n=new io(null);return no(e,(s,r)=>{n=n.set(new gn(s),r)}),n}constructor(e,n=tCe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Gt(),value:this.value};if(At(e))return null;{const s=vt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(In(e),n);return i!=null?{path:Ls(new gn(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(At(e))return this;{const n=vt(e),s=this.children.get(n);return s!==null?s.subtree(In(e)):new io(null)}}set(e,n){if(At(e))return new io(n,this.children);{const s=vt(e),r=(this.children.get(s)||new io(null)).set(In(e),n),i=this.children.insert(s,r);return new io(this.value,i)}}remove(e){if(At(e))return this.children.isEmpty()?new io(null):new io(null,this.children);{const n=vt(e),s=this.children.get(n);if(s){const r=s.remove(In(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new io(null):new io(this.value,i)}else return this}}get(e){if(At(e))return this.value;{const n=vt(e),s=this.children.get(n);return s?s.get(In(e)):null}}setTree(e,n){if(At(e))return n;{const s=vt(e),r=(this.children.get(s)||new io(null)).setTree(In(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new io(this.value,i)}}fold(e){return this.fold_(Gt(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Ls(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Gt(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(At(e))return null;{const i=vt(e),o=this.children.get(i);return o?o.findOnPath_(In(e),Ls(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Gt(),n)}foreachOnPath_(e,n,s){if(At(e))return this;{this.value&&s(n,this.value);const r=vt(e),i=this.children.get(r);return i?i.foreachOnPath_(In(e),Ls(n,r),s):new io(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Ls(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pa{constructor(e){this.writeTree_=e}static empty(){return new Pa(new qo(null))}}function uw(t,e,n){if(At(e))return new Pa(new qo(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=bi(r,e);return i=i.updateChild(o,n),new Pa(t.writeTree_.set(r,i))}else{const r=new qo(n),i=t.writeTree_.setTree(e,r);return new Pa(i)}}}function s3(t,e,n){let s=t;return no(n,(r,i)=>{s=uw(s,Ls(e,r),i)}),s}function r3(t,e){if(At(e))return Pa.empty();{const n=t.writeTree_.setTree(e,new qo(null));return new Pa(n)}}function _O(t,e){return mg(t,e)!=null}function mg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(bi(n.path,e)):null}function i3(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Xn,(s,r)=>{e.push(new Et(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Et(s,r.value))}),e}function id(t,e){if(At(e))return t;{const n=mg(t,e);return n!=null?new Pa(new qo(n)):new Pa(t.writeTree_.subtree(e))}}function yO(t){return t.writeTree_.isEmpty()}function c_(t,e){return XY(Gt(),t.writeTree_,e)}function XY(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(ge(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=XY(Ls(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Ls(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LR(t,e){return tX(e,t)}function nCe(t,e,n,s,r){ge(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=uw(t.visibleWrites,e,n)),t.lastWriteId=s}function sCe(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function rCe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ge(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&iCe(a,s.path)?r=!1:ga(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return oCe(t),!0;if(s.snap)t.visibleWrites=r3(t.visibleWrites,s.path);else{const a=s.children;no(a,l=>{t.visibleWrites=r3(t.visibleWrites,Ls(s.path,l))})}return!0}else return!1}function iCe(t,e){if(t.snap)return ga(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ga(Ls(t.path,n),e))return!0;return!1}function oCe(t){t.visibleWrites=JY(t.allWrites,aCe,Gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aCe(t){return t.visible}function JY(t,e,n){let s=Pa.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)ga(n,o)?(a=bi(n,o),s=uw(s,a,i.snap)):ga(o,n)&&(a=bi(o,n),s=uw(s,Gt(),i.snap.getChild(a)));else if(i.children){if(ga(n,o))a=bi(n,o),s=s3(s,a,i.children);else if(ga(o,n))if(a=bi(o,n),At(a))s=s3(s,Gt(),i.children);else{const l=Jm(i.children,vt(a));if(l){const u=l.getChild(In(a));s=uw(s,Gt(),u)}}}else throw B_("WriteRecord should have .snap or .children")}}return s}function ZY(t,e,n,s,r){if(!s&&!r){const i=mg(t.visibleWrites,e);if(i!=null)return i;{const o=id(t.visibleWrites,e);if(yO(o))return n;if(n==null&&!_O(o,Gt()))return null;{const a=n||qe.EMPTY_NODE;return c_(o,a)}}}else{const i=id(t.visibleWrites,e);if(!r&&yO(i))return n;if(!r&&n==null&&!_O(i,Gt()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(ga(u.path,e)||ga(e,u.path))},a=JY(t.allWrites,o,e),l=n||qe.EMPTY_NODE;return c_(a,l)}}}function cCe(t,e,n){let s=qe.EMPTY_NODE;const r=mg(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Xn,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=id(t.visibleWrites,e);return n.forEachChild(Xn,(o,a)=>{const l=c_(id(i,new gn(o)),a);s=s.updateImmediateChild(o,l)}),i3(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=id(t.visibleWrites,e);return i3(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function lCe(t,e,n,s,r){ge(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Ls(e,n);if(_O(t.visibleWrites,i))return null;{const o=id(t.visibleWrites,i);return yO(o)?r.getChild(n):c_(o,r.getChild(n))}}function uCe(t,e,n,s){const r=Ls(e,n),i=mg(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=id(t.visibleWrites,r);return c_(o,s.getNode().getImmediateChild(n))}else return null}function hCe(t,e){return mg(t.visibleWrites,e)}function dCe(t,e,n,s,r,i,o){let a;const l=id(t.visibleWrites,e),u=mg(l,Gt());if(u!=null)a=u;else if(n!=null)a=c_(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function fCe(){return{visibleWrites:Pa.empty(),allWrites:[],lastWriteId:-1}}function F0(t,e,n,s){return ZY(t.writeTree,t.treePath,e,n,s)}function sF(t,e){return cCe(t.writeTree,t.treePath,e)}function o3(t,e,n,s){return lCe(t.writeTree,t.treePath,e,n,s)}function V0(t,e){return hCe(t.writeTree,Ls(t.treePath,e))}function pCe(t,e,n,s,r,i){return dCe(t.writeTree,t.treePath,e,n,s,r,i)}function rF(t,e,n){return uCe(t.writeTree,t.treePath,e,n)}function eX(t,e){return tX(Ls(t.treePath,e),t.writeTree)}function tX(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gCe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;ge(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ge(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,Rb(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,kb(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,a_(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,Rb(s,e.snapshotNode,r.oldSnap));else throw B_("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mCe{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const nX=new mCe;class iF{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Ld(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rF(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Hp(this.viewCache_),i=pCe(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Ce(t){return{filter:t}}function yCe(t,e){ge(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ge(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vCe(t,e,n,s,r){const i=new gCe;let o,a;if(n.type===ma.OVERWRITE){const u=n;u.source.fromUser?o=vO(t,e,u.path,u.snap,s,r,i):(ge(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!At(u.path),o=U0(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===ma.MERGE){const u=n;u.source.fromUser?o=bCe(t,e,u.path,u.children,s,r,i):(ge(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=wO(t,e,u.path,u.children,s,r,a,i))}else if(n.type===ma.ACK_USER_WRITE){const u=n;u.revert?o=CCe(t,e,u.path,s,r,i):o=ECe(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===ma.LISTEN_COMPLETE)o=TCe(t,e,n.path,s,i);else throw B_("Unknown operation type: "+n.type);const l=i.getChanges();return wCe(e,o,l),{viewCache:o,changes:l}}function wCe(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=M0(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(KY(M0(e)))}}function sX(t,e,n,s,r,i){const o=e.eventCache;if(V0(s,n)!=null)return e;{let a,l;if(At(n))if(ge(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Hp(e),h=u instanceof qe?u:qe.EMPTY_NODE,d=sF(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=F0(s,Hp(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=vt(n);if(u===".priority"){ge(Dd(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=o3(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=In(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=o3(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=rF(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return lw(e,a,o.isFullyInitialized()||At(n),t.filter.filtersNodes())}}function U0(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(At(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=vt(n);if(!l.isCompleteForPath(n)&&Dd(n)>1)return e;const w=In(n),k=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),k):u=h.updateChild(l.getNode(),m,k,w,nX,null)}const d=YY(e,u,l.isFullyInitialized()||At(n),h.filtersNodes()),p=new iF(r,d,i);return sX(t,d,n,r,p,a)}function vO(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new iF(r,e,i);if(At(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=lw(e,u,!0,t.filter.filtersNodes());else{const d=vt(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=lw(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=In(n),m=a.getNode().getImmediateChild(d);let w;if(At(p))w=s;else{const k=h.getCompleteChild(d);k!=null?VY(p)===".priority"&&k.getChild(qY(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=qe.EMPTY_NODE}if(m.equals(w))l=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=lw(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function a3(t,e){return t.eventCache.isCompleteForChild(e)}function bCe(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Ls(n,l);a3(e,vt(h))&&(a=vO(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Ls(n,l);a3(e,vt(h))||(a=vO(t,a,h,u,r,i,o))}),a}function c3(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function wO(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;At(n)?u=s:u=new qo(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=c3(t,m,p);l=U0(t,l,new gn(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=c3(t,w,p);l=U0(t,l,new gn(d),k,r,i,o,a)}}),l}function ECe(t,e,n,s,r,i,o){if(V0(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(At(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return U0(t,e,n,l.getNode().getChild(n),r,i,a,o);if(At(n)){let u=new qo(null);return l.getNode().forEachChild(Sm,(h,d)=>{u=u.set(new gn(h),d)}),wO(t,e,n,u,r,i,a,o)}else return e}else{let u=new qo(null);return s.foreach((h,d)=>{const p=Ls(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),wO(t,e,n,u,r,i,a,o)}}function TCe(t,e,n,s,r){const i=e.serverCache,o=YY(e,i.getNode(),i.isFullyInitialized()||At(n),i.isFiltered());return sX(t,o,n,s,nX,r)}function CCe(t,e,n,s,r,i){let o;if(V0(s,n)!=null)return e;{const a=new iF(s,e,r),l=e.eventCache.getNode();let u;if(At(n)||vt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=F0(s,Hp(e));else{const d=e.serverCache.getNode();ge(d instanceof qe,"serverChildren would be complete if leaf node"),h=sF(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=vt(n);let d=rF(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,In(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,qe.EMPTY_NODE,In(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=F0(s,Hp(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||V0(s,Gt())!=null,lw(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ICe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Z2(s.getIndex()),i=zTe(s);this.processor_=_Ce(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(qe.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(qe.EMPTY_NODE,a.getNode(),null),h=new Ld(l,o.isFullyInitialized(),r.filtersNodes()),d=new Ld(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=DR(d,h),this.eventGenerator_=new XTe(this.query_)}get query(){return this.query_}}function SCe(t){return t.viewCache_.serverCache.getNode()}function kCe(t){return M0(t.viewCache_)}function RCe(t,e){const n=Hp(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!At(e)&&!n.getImmediateChild(vt(e)).isEmpty())?n.getChild(e):null}function l3(t){return t.eventRegistrations_.length===0}function ACe(t,e){t.eventRegistrations_.push(e)}function u3(t,e,n){const s=[];if(n){ge(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function h3(t,e,n,s){e.type===ma.MERGE&&e.source.queryId!==null&&(ge(Hp(t.viewCache_),"We should always have a full cache before handling merges"),ge(M0(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=vCe(t.processor_,r,e,n,s);return yCe(t.processor_,i.viewCache),ge(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,rX(t,i.changes,i.viewCache.eventCache.getNode(),null)}function PCe(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xn,(r,i)=>{s.push(a_(r,i))}),n.isFullyInitialized()&&s.push(KY(n.getNode())),rX(t,s,n.getNode(),e)}function rX(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return JTe(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let q0;class iX{constructor(){this.views=new Map}}function NCe(t){ge(!q0,"__referenceConstructor has already been defined"),q0=t}function xCe(){return ge(q0,"Reference.ts has not been loaded"),q0}function OCe(t){return t.views.size===0}function oF(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return ge(i!=null,"SyncTree gave us an op for an invalid query."),h3(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(h3(o,e,n,s));return i}}function oX(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=F0(n,r?s:null),l=!1;a?l=!0:s instanceof qe?(a=sF(n,s),l=!1):(a=qe.EMPTY_NODE,l=!1);const u=DR(new Ld(a,l,!1),new Ld(s,r,!1));return new ICe(e,u)}return o}function DCe(t,e,n,s,r,i){const o=oX(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),ACe(o,n),PCe(o,n)}function LCe(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Md(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(u3(u,n,s)),l3(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(u3(l,n,s)),l3(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Md(t)&&i.push(new(xCe())(e._repo,e._path)),{removed:i,events:o}}function aX(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function od(t,e){let n=null;for(const s of t.views.values())n=n||RCe(s,e);return n}function cX(t,e){if(e._queryParams.loadsAllData())return MR(t);{const n=e._queryIdentifier;return t.views.get(n)}}function lX(t,e){return cX(t,e)!=null}function Md(t){return MR(t)!=null}function MR(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let j0;function MCe(t){ge(!j0,"__referenceConstructor has already been defined"),j0=t}function FCe(){return ge(j0,"Reference.ts has not been loaded"),j0}let VCe=1;class d3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qo(null),this.pendingWriteTree_=fCe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uX(t,e,n,s,r){return nCe(t.pendingWriteTree_,e,n,s,r),r?aT(t,new zp(QY(),e,n)):[]}function rp(t,e,n=!1){const s=sCe(t.pendingWriteTree_,e);if(rCe(t.pendingWriteTree_,e)){let r=new qo(null);return s.snap!=null?r=r.set(Gt(),!0):no(s.children,i=>{r=r.set(new gn(i),!0)}),aT(t,new L0(s.path,r,n))}else return[]}function oT(t,e,n){return aT(t,new zp(tF(),e,n))}function UCe(t,e,n){const s=qo.fromObject(n);return aT(t,new Nb(tF(),e,s))}function qCe(t,e){return aT(t,new Pb(tF(),e))}function jCe(t,e,n){const s=cF(t,n);if(s){const r=lF(s),i=r.path,o=r.queryId,a=bi(i,e),l=new Pb(nF(o),a);return uF(t,i,l)}else return[]}function B0(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||lX(o,e))){const l=LCe(o,e,n,s);OCe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Md(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=zCe(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,D=pX(t,k);t.listenProvider_.startListening(hw(P),xb(t,P),D.hashFn,D.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(hw(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(FR(p));t.listenProvider_.stopListening(hw(p),m)}))}HCe(t,u)}return a}function hX(t,e,n,s){const r=cF(t,s);if(r!=null){const i=lF(r),o=i.path,a=i.queryId,l=bi(o,e),u=new zp(nF(a),l,n);return uF(t,o,u)}else return[]}function BCe(t,e,n,s){const r=cF(t,s);if(r){const i=lF(r),o=i.path,a=i.queryId,l=bi(o,e),u=qo.fromObject(n),h=new Nb(nF(a),l,u);return uF(t,o,h)}else return[]}function bO(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=bi(p,r);i=i||od(m,w),o=o||Md(m)});let a=t.syncPointTree_.get(r);a?(o=o||Md(a),i=i||od(a,Gt())):(a=new iX,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=qe.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=od(m,Gt());w&&(i=i.updateImmediateChild(p,w))}));const u=lX(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=FR(e);ge(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=WCe();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=LR(t.pendingWriteTree_,r);let d=DCe(a,e,n,h,i,l);if(!u&&!o&&!s){const p=cX(a,e);d=d.concat(KCe(t,e,p))}return d}function aF(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=bi(i,e),l=od(o,a);if(l)return l});return ZY(s,e,r,n,!0)}function $Ce(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=bi(u,n);s=s||od(h,d)});let r=t.syncPointTree_.get(n);r?s=s||od(r,Gt()):(r=new iX,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Ld(s,!0,!1):null,a=LR(t.pendingWriteTree_,e._path),l=oX(r,e,a,i?o.getNode():qe.EMPTY_NODE,i);return kCe(l)}function aT(t,e){return dX(e,t.syncPointTree_,null,LR(t.pendingWriteTree_,Gt()))}function dX(t,e,n,s){if(At(t.path))return fX(t,e,n,s);{const r=e.get(Gt());n==null&&r!=null&&(n=od(r,Gt()));let i=[];const o=vt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=eX(s,o);i=i.concat(dX(a,l,u,h))}return r&&(i=i.concat(oF(r,t,s,n))),i}}function fX(t,e,n,s){const r=e.get(Gt());n==null&&r!=null&&(n=od(r,Gt()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=eX(s,o),h=t.operationForChild(o);h&&(i=i.concat(fX(h,a,l,u)))}),r&&(i=i.concat(oF(r,t,s,n))),i}function pX(t,e){const n=e.query,s=xb(t,n);return{hashFn:()=>(SCe(e)||qe.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?jCe(t,n._path,s):qCe(t,n._path);{const i=$Ee(r,n);return B0(t,n,null,i)}}}}function xb(t,e){const n=FR(e);return t.queryToTagMap.get(n)}function FR(t){return t._path.toString()+"$"+t._queryIdentifier}function cF(t,e){return t.tagToQueryMap.get(e)}function lF(t){const e=t.indexOf("$");return ge(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new gn(t.substr(0,e))}}function uF(t,e,n){const s=t.syncPointTree_.get(e);ge(s,"Missing sync point for query tag that we're tracking");const r=LR(t.pendingWriteTree_,e);return oF(s,n,r,null)}function zCe(t){return t.fold((e,n,s)=>{if(n&&Md(n))return[MR(n)];{let r=[];return n&&(r=aX(n)),no(s,(i,o)=>{r=r.concat(o)}),r}})}function hw(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(FCe())(t._repo,t._path):t}function HCe(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=FR(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function WCe(){return VCe++}function KCe(t,e,n){const s=e._path,r=xb(t,e),i=pX(t,n),o=t.listenProvider_.startListening(hw(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)ge(!Md(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!At(u)&&h&&Md(h))return[MR(h).query];{let p=[];return h&&(p=p.concat(aX(h).map(m=>m.query))),no(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(hw(h),xb(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hF{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new hF(n)}node(){return this.node_}}class dF{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ls(this.path_,e);return new dF(this.syncTree_,n)}node(){return aF(this.syncTree_,this.path_)}}const GCe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},f3=function(t,e,n){if(!t||typeof t!="object")return t;if(ge(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return QCe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YCe(t[".sv"],e);ge(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},QCe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ge(!1,"Unexpected server value: "+t)}},YCe=function(t,e,n){t.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&ge(!1,"Unexpected increment value: "+s);const r=e.node();if(ge(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},XCe=function(t,e,n,s){return fF(e,new dF(n,t),s)},gX=function(t,e,n){return fF(t,new hF(e),n)};function fF(t,e,n){const s=t.getPriority().val(),r=f3(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=f3(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new $p(a,tr(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new $p(r))),o.forEachChild(Xn,(a,l)=>{const u=fF(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pF{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function gF(t,e){let n=e instanceof gn?e:new gn(e),s=t,r=vt(n);for(;r!==null;){const i=Jm(s.node.children,r)||{children:{},childCount:0};s=new pF(r,s,i),n=In(n),r=vt(n)}return s}function X_(t){return t.node.value}function mX(t,e){t.node.value=e,EO(t)}function _X(t){return t.node.childCount>0}function JCe(t){return X_(t)===void 0&&!_X(t)}function VR(t,e){no(t.node.children,(n,s)=>{e(new pF(n,t,s))})}function yX(t,e,n,s){n&&e(t),VR(t,r=>{yX(r,e,!0)})}function ZCe(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function cT(t){return new gn(t.parent===null?t.name:cT(t.parent)+"/"+t.name)}function EO(t){t.parent!==null&&eIe(t.parent,t.name,t)}function eIe(t,e,n){const s=JCe(n),r=gu(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,EO(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,EO(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tIe=/[\[\].#$\/\u0000-\u001F\u007F]/,nIe=/[\[\].#$\u0000-\u001F\u007F]/,FP=10*1024*1024,vX=function(t){return typeof t=="string"&&t.length!==0&&!tIe.test(t)},wX=function(t){return typeof t=="string"&&t.length!==0&&!nIe.test(t)},sIe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wX(t)},rIe=function(t,e,n,s){mF(DM(t,"value"),e,n)},mF=function(t,e,n){const s=n instanceof gn?new ETe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+$f(s));if(typeof e=="function")throw new Error(t+"contains a function "+$f(s)+" with contents = "+e.toString());if(_Y(e))throw new Error(t+"contains "+e.toString()+" "+$f(s));if(typeof e=="string"&&e.length>FP/3&&iR(e)>FP)throw new Error(t+"contains a string greater than "+FP+" utf8 bytes "+$f(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(no(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!vX(o)))throw new Error(t+" contains an invalid key ("+o+") "+$f(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);TTe(s,o),mF(t,a,s),CTe(s)}),r&&i)throw new Error(t+' contains ".value" child '+$f(s)+" in addition to actual children.")}},bX=function(t,e,n,s){if(!wX(n))throw new Error(DM(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iIe=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bX(t,e,n)},EX=function(t,e){if(vt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},oIe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vX(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!sIe(n))throw new Error(DM(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aIe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _F(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!Y2(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function TX(t,e,n){_F(t,n),CX(t,s=>Y2(s,e))}function $c(t,e,n){_F(t,n),CX(t,s=>ga(s,e)||ga(e,s))}function CX(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(cIe(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function cIe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();aw&&$r("event: "+n.toString()),Y_(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lIe="repo_interrupt",uIe=25;class hIe{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aIe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=D0(),this.transactionQueueTree_=new pF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dIe(t,e,n){if(t.stats_=G2(t.repoInfo_),t.forceRestClient_||KEe())t.server_=new O0(t.repoInfo_,(s,r,i,o)=>{p3(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>g3(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Os(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Ml(t.repoInfo_,e,(s,r,i,o)=>{p3(t,s,r,i,o)},s=>{g3(t,s)},s=>{pIe(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=JEe(t.repoInfo_,()=>new YTe(t.stats_,t.server_)),t.infoData_=new HTe,t.infoSyncTree_=new d3({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=oT(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vF(t,"connected",!1),t.serverSyncTree_=new d3({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);$c(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function fIe(t){const e=t.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function yF(t){return GCe({timestamp:fIe(t)})}function p3(t,e,n,s,r){t.dataUpdateCount++;const i=new gn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=c0(n,u=>tr(u));o=BCe(t.serverSyncTree_,i,l,r)}else{const l=tr(n);o=hX(t.serverSyncTree_,i,l,r)}else if(s){const l=c0(n,u=>tr(u));o=UCe(t.serverSyncTree_,i,l)}else{const l=tr(n);o=oT(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=qR(t,i)),$c(t.eventQueue_,a,o)}function g3(t,e){vF(t,"connected",e),e===!1&&_Ie(t)}function pIe(t,e){no(e,(n,s)=>{vF(t,n,s)})}function vF(t,e,n){const s=new gn("/.info/"+e),r=tr(n);t.infoData_.updateSnapshot(s,r);const i=oT(t.infoSyncTree_,s,r);$c(t.eventQueue_,s,i)}function IX(t){return t.nextWriteId_++}function gIe(t,e,n){const s=$Ce(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=tr(r).withIndex(e._queryParams.getIndex());bO(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=oT(t.serverSyncTree_,e._path,i);else{const a=xb(t.serverSyncTree_,e);o=hX(t.serverSyncTree_,e._path,i,a)}return $c(t.eventQueue_,e._path,o),B0(t.serverSyncTree_,e,n,null,!0),i},r=>(UR(t,"get for query "+Os(e)+" failed: "+r),Promise.reject(new Error(r))))}function mIe(t,e,n,s,r){UR(t,"set",{path:e.toString(),value:n,priority:s});const i=yF(t),o=tr(n,s),a=aF(t.serverSyncTree_,e),l=gX(o,a,i),u=IX(t),h=uX(t.serverSyncTree_,e,l,u,!0);_F(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||Zi("set at "+e+" failed: "+p);const k=rp(t.serverSyncTree_,u,!w);$c(t.eventQueue_,e,k),bIe(t,r,p,m)});const d=PX(t,e);qR(t,d),$c(t.eventQueue_,d,[])}function _Ie(t){UR(t,"onDisconnectEvents");const e=yF(t),n=D0();mO(t.onDisconnect_,Gt(),(r,i)=>{const o=XCe(r,i,t.serverSyncTree_,e);GY(n,r,o)});let s=[];mO(n,Gt(),(r,i)=>{s=s.concat(oT(t.serverSyncTree_,r,i));const o=PX(t,r);qR(t,o)}),t.onDisconnect_=D0(),$c(t.eventQueue_,Gt(),s)}function yIe(t,e,n){let s;vt(e._path)===".info"?s=bO(t.infoSyncTree_,e,n):s=bO(t.serverSyncTree_,e,n),TX(t.eventQueue_,e._path,s)}function vIe(t,e,n){let s;vt(e._path)===".info"?s=B0(t.infoSyncTree_,e,n):s=B0(t.serverSyncTree_,e,n),TX(t.eventQueue_,e._path,s)}function wIe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lIe)}function UR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),$r(n,...e)}function bIe(t,e,n,s){e&&Y_(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function SX(t,e,n){return aF(t.serverSyncTree_,e,n)||qe.EMPTY_NODE}function wF(t,e=t.transactionQueueTree_){if(e||jR(t,e),X_(e)){const n=RX(t,e);ge(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&EIe(t,cT(e),n)}else _X(e)&&VR(e,n=>{wF(t,n)})}function EIe(t,e,n){const s=n.map(u=>u.currentWriteId),r=SX(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];ge(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=bi(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{UR(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(rp(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();jR(t,gF(t.transactionQueueTree_,e)),wF(t,t.transactionQueueTree_),$c(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)Y_(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Zi("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}qR(t,e)}},o)}function qR(t,e){const n=kX(t,e),s=cT(n),r=RX(t,n);return TIe(t,r,s),s}function TIe(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=bi(n,a.path);let u=!1,h;if(ge(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(rp(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=uIe)u=!0,h="maxretry",r=r.concat(rp(t.serverSyncTree_,a.currentWriteId,!0));else{const d=SX(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){mF("transaction failed: Data returned ",p,a.path);let m=tr(p);typeof p=="object"&&p!=null&&gu(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,k=yF(t),P=gX(m,d,k);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=IX(t),i.splice(i.indexOf(w),1),r=r.concat(uX(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(rp(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(rp(t.serverSyncTree_,a.currentWriteId,!0))}$c(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}jR(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)Y_(s[o]);wF(t,t.transactionQueueTree_)}function kX(t,e){let n,s=t.transactionQueueTree_;for(n=vt(e);n!==null&&X_(s)===void 0;)s=gF(s,n),e=In(e),n=vt(e);return s}function RX(t,e){const n=[];return AX(t,e,n),n.sort((s,r)=>s.order-r.order),n}function AX(t,e,n){const s=X_(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);VR(e,r=>{AX(t,r,n)})}function jR(t,e){const n=X_(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,mX(e,n.length>0?n:void 0)}VR(e,s=>{jR(t,s)})}function PX(t,e){const n=cT(kX(t,e)),s=gF(t.transactionQueueTree_,e);return ZCe(s,r=>{VP(t,r)}),VP(t,s),yX(s,r=>{VP(t,r)}),n}function VP(t,e){const n=X_(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ge(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ge(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(rp(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?mX(e,void 0):n.length=i+1,$c(t.eventQueue_,cT(e),r);for(let o=0;o<s.length;o++)Y_(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CIe(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function IIe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Zi(`Invalid query segment '${n}' in query '${t}'`)}return e}const m3=function(t,e){const n=SIe(t),s=n.namespace;n.domain==="firebase.com"&&Ql(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Ql("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||VEe();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new AY(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new gn(n.pathString)}},SIe=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=CIe(t.substring(h,d)));const p=IIe(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kIe{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Os(this.snapshot.exportVal())}}class RIe{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NX{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ge(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bF{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return At(this._path)?null:VY(this._path)}get ref(){return new mu(this._repo,this._path)}get _queryIdentifier(){const e=t3(this._queryParams),n=W2(e);return n==="{}"?"default":n}get _queryObject(){return t3(this._queryParams)}isEqual(e){if(e=ln(e),!(e instanceof bF))return!1;const n=this._repo===e._repo,s=Y2(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+bTe(this._path)}}class mu extends bF{constructor(e,n){super(e,n,new eF,!1)}get parent(){const e=qY(this._path);return e===null?null:new mu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ob{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new gn(e),s=TO(this.ref,e);return new Ob(this._node.getChild(n),s,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new Ob(s,TO(this.ref,n),Xn)))}hasChild(e){const n=new gn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xX(t,e){return t=ln(t),t._checkNotDeleted("ref"),e!==void 0?TO(t._root,e):t._root}function TO(t,e){return t=ln(t),vt(t._path)===null?iIe("child","path",e):bX("child","path",e),new mu(t._repo,Ls(t._path,e))}function OX(t){return EX("remove",t._path),EF(t,null)}function EF(t,e){t=ln(t),EX("set",t._path),rIe("set",e,t._path);const n=new nR;return mIe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function DX(t){t=ln(t);const e=new NX(()=>{}),n=new BR(e);return gIe(t._repo,t,n).then(s=>new Ob(s,new mu(t._repo,t._path),t._queryParams.getIndex()))}class BR{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new kIe("value",this,new Ob(e.snapshotNode,new mu(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RIe(this,e,n):null}matches(e){return e instanceof BR?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function AIe(t,e,n,s,r){const i=new NX(n,void 0),o=new BR(i);return yIe(t._repo,t,o),()=>vIe(t._repo,t,o)}function LX(t,e,n,s){return AIe(t,"value",e)}NCe(mu);MCe(mu);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PIe="FIREBASE_DATABASE_EMULATOR_HOST",CO={};let NIe=!1;function xIe(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=Jc(i);t.repoInfo_=new AY(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function OIe(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Ql("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$r("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=m3(i,r),a=o.repoInfo,l;typeof process<"u"&&Fj&&(l=Fj[PIe]),l?(i=`http://${l}?ns=${a.namespace}`,o=m3(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new QEe(t.name,t.options,e);oIe("Invalid Firebase Database URL",o),At(o.path)||Ql("Database URL must point to the root of a Firebase Database (not including a child path).");const h=LIe(a,t,u,new GEe(t,n));return new MIe(h,t)}function DIe(t,e){const n=CO[e];(!n||n[t.key]!==t)&&Ql(`Database ${e}(${t.repoInfo_}) has already been deleted.`),wIe(t),delete n[t.key]}function LIe(t,e,n,s){let r=CO[e.name];r||(r={},CO[e.name]=r);let i=r[t.toURLString()];return i&&Ql("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hIe(t,NIe,n,s),r[t.toURLString()]=i,i}class MIe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dIe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mu(this._repo,Gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(DIe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ql("Cannot call "+e+" on a deleted database.")}}function TF(t=aR(),e){const n=KE(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=NM("database");s&&FIe(n,...s)}return n}function FIe(t,e,n,s={}){t=ln(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Sd(s,i.repoInfo_.emulatorOptions))return;Ql("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Ql('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new cI(cI.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:xM(s.mockUserToken,t.app.options.projectId);o=new cI(a)}Jc(e)&&(sR(e),rR("Database",!0)),xIe(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VIe(t){xEe(mf),kd(new $l("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return OIe(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Oo(Vj,Uj,t),Oo(Vj,Uj,"esm2020")}Ml.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ml.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};VIe();var Nf={};const Rs={apiKey:Nf.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Nf.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Nf.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Nf.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Nf.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Nf.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Nf.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:Rs.apiKey?"설정됨":"설정 안됨",authDomain:Rs.authDomain?"설정됨":"설정 안됨",projectId:Rs.projectId?"설정됨":"설정 안됨",storageBucket:Rs.storageBucket?"설정됨":"설정 안됨",messagingSenderId:Rs.messagingSenderId?"설정됨":"설정 안됨",appId:Rs.appId?"설정됨":"설정 안됨",databaseURL:Rs.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:Rs.apiKey?`${Rs.apiKey.substring(0,10)}...`:"없음",authDomain:Rs.authDomain,projectId:Rs.projectId,databaseURL:Rs.databaseURL?"설정됨":"없음"});(!Rs.apiKey||!Rs.authDomain||!Rs.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let Vn,Kn,ip,Db,Lb;Rs.apiKey&&Rs.authDomain&&Rs.projectId?(Vn=MK(Rs),Kn=r2(Vn),ip=new ca,Db=OQ(Vn),Lb=REe(Vn),TF(Vn)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Kn=null,ip=null,Db=null,Lb=null);const UIe=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Kn},get db(){return Db},get firebaseApp(){return Vn},get googleProvider(){return ip},get storage(){return Lb}},Symbol.toStringTag,{value:"Module"}));function CF(){return Ji(iK)}const Rn=Uc(null),Qa=Uc(!0),pC=Uc(null);let Ag=null,_3=!1;function IF(){const t=CF(),e=Vn?OQ(Vn):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),Vn?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async l=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("🔍 사용자 정보 확인 중:",l.email,`(시도 ${h+1}/${u})`);const d=x2(e,"users",l.uid),p=await R0(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await A0(d,{lastLoginAt:iw()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(l.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:l.email,adminEmails:w,isAdminEmail:k});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:k?"admin":"student",createdAt:iw(),lastLoginAt:iw()};console.log("💾 새 사용자 정보 저장 중:",P),await A0(d,P),console.log("✅ 새 사용자 등록 완료:",l.email);const D=await R0(d);if(D.exists())console.log("✅ 사용자 등록 확인 완료:",D.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...l,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${u}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!Vn,db:!!e,auth:!!Kn,userUid:l.uid,userEmail:l.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<u)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...l,role:"student"}},s=async()=>{if(!Qa.value){Qa.value=!0,pC.value=null;try{if(!Kn||!ip)throw new Error("Firebase is not configured.");const l=await n2(Kn,ip);console.log("✅ Google 로그인 팝업 성공:",l.user.email);try{if(Vn&&e)Rn.value=await n(l.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",Rn.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),Rn.value=null,Kn&&await Jf(Kn),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),Qa.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!Rn.value,userRole:Rn.value?.role,userEmail:Rn.value?.email})}catch(u){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",u),Rn.value=null,Kn&&await Jf(Kn),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),Qa.value=!1;return}Qa.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(l){console.error("❌ Google 로그인 팝업 실패:",l),pC.value=l.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),Qa.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Kn),!Kn){console.log("❌ useAuth: auth 객체가 없음");return}try{Ag&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Ag(),Ag=null),console.log("🔍 useAuth: Firebase signOut 실행"),await Jf(Kn),console.log("✅ useAuth: Firebase signOut 성공"),Rn.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(l){console.error("❌ useAuth: 로그아웃 실패:",l),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!_3){if(_3=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!Vn,auth:!!Kn,db:!!e}),!Kn){console.log("⚠️ Firebase Auth가 초기화되지 않음"),Qa.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Ag=XM(Kn,async l=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",l?l.email:"없음"),l)if(console.log("✅ 인증된 사용자 감지:",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),Vn&&e)try{Rn.value=await n(l),console.log("✅ 사용자 역할 설정 완료:",Rn.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!Rn.value,userRole:Rn.value?.role,userEmail:Rn.value?.email})}catch(u){console.error("❌ 사용자 역할 가져오기 실패:",u),console.error("❌ 오류 코드:",u.code),console.error("❌ 오류 메시지:",u.message),Rn.value=null,Kn&&await Jf(Kn),pC.value=u.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),Qa.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),Rn.value=null,Kn&&await Jf(Kn),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),Rn.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");Qa.value=!1})}};zE(()=>{Ag&&Ag()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:Rn.value,isAuthenticated:!!Rn.value,userRole:Rn.value?.role,firebaseApp:!!Vn,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!Vn),console.log("  - Firebase Auth:",!!Kn),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!ip),Vn&&console.log("  - Firebase Config:",{apiKey:Vn.options.apiKey?"설정됨":"설정 안됨",authDomain:Vn.options.authDomain?"설정됨":"설정 안됨",projectId:Vn.options.projectId?"설정됨":"설정 안됨",storageBucket:Vn.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!Vn,auth:!!Kn,db:!!e,googleProvider:!!ip});return{user:Ne(()=>Rn.value),loading:Ne(()=>Qa.value),error:Ne(()=>pC.value),isAuthenticated:Ne(()=>!!Rn.value),displayName:Ne(()=>Rn.value?.displayName||"사용자"),email:Ne(()=>Rn.value?.email||""),photoURL:Ne(()=>Rn.value?.photoURL||""),isFirebaseConfigured:Ne(()=>!!Vn),userRole:Ne(()=>Rn.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const qIe={id:"app"},jIe=q_({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=IF(),o=RM(),a=AM();return BE(()=>{e()}),vp([n,s,r],([l,u,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),l?u==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(l,u)=>{const h=uM("router-view");return Gk(),pM("div",qIe,[Cr(h)])}}}),BIe=t=>t,$Ie=BIe,zIe=[{path:"/",component:()=>ac(()=>yr(()=>Un(()=>import("./MainLayout-CbUPrBs9-h46N59WV-BF4eerBE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),fi([0,1,2,3,4,5,6,7,8,9,10,11])),Sh([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),children:[{path:"",component:()=>ac(()=>yr(()=>Un(()=>import("./IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi.js"),__vite__mapDeps([12,1,2,3,10,13,8,9,14,11])),fi([12,1,2,3,10,13,8,9,14,11])),Sh([14,1,2,3,10,15,8,9,16,12,17]))},{path:"survey-results",component:()=>ac(()=>yr(()=>Un(()=>import("./SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd.js"),__vite__mapDeps([15,6,3,1,2,5,16,13,17])),fi([15,6,3,1,2,5,16,13,17])),Sh([18,6,3,1,2,5,19,15,20,21]))}]},{path:"/logout",component:()=>ac(()=>yr(()=>Un(()=>import("./LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh.js"),__vite__mapDeps([18,2,3,10,13,4])),fi([18,2,3,10,13,4])),Sh([22,2,3,10,15,4,23]))},{path:"/poll-result",component:()=>ac(()=>yr(()=>Un(()=>import("./PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO.js"),__vite__mapDeps([19,6,3,13,17])),fi([19,6,3,13,17])),Sh([24,6,3,15,20,21,25]))},{path:"/study/:courseId",component:()=>ac(()=>yr(()=>Un(()=>import("./StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O.js"),__vite__mapDeps([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),fi([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),Sh([26,1,2,3,5,7,4,8,9,10,6,11,16,15,19,20,21,27])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ac(()=>yr(()=>Un(()=>import("./ErrorNotFound-BPK_S1F5-DtaYr84p-DaOkcD4U.js"),[]),[]),[])}],UP=$Ie(function(){return Ape({scrollBehavior:()=>({left:0,top:0}),routes:zIe,history:rpe("/")})});async function HIe(t,e){const n=t(jIe);n.use(kfe,e);const s=dg(typeof UP=="function"?await UP({}):UP);return{app:n,router:s}}const IO={xs:18,sm:24,md:32,lg:38,xl:46},lT={size:String};function uT(t,e=IO){return Ne(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function SF(t,e){return t!==void 0&&t()||e}function MX(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function op(t,e){return t!==void 0?e.concat(t()):e}function kF(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function FX(t,e,n,s,r,i){e.key=s+r;const o=Qe(t,e,n);return r===!0?Bk(o,i()):o}const y3="0 0 24 24",qP=t=>t,jP=t=>`ionicons ${t}`,VX={"mdi-":t=>`mdi ${t}`,"icon-":qP,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":jP,"ion-ios":jP,"ion-logo":jP,"iconfont ":qP,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":qP},UX={o_:"-outlined",r_:"-round",s_:"-sharp"},qX={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},WIe=new RegExp("^("+Object.keys(VX).join("|")+")"),KIe=new RegExp("^("+Object.keys(UX).join("|")+")"),v3=new RegExp("^("+Object.keys(qX).join("|")+")"),GIe=/^[Mm]\s?[-+]?\.?\d/,QIe=/^img:/,YIe=/^svguse:/,XIe=/^ion-/,JIe=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,l_=fg({name:"QIcon",props:{...lT,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=pu(),s=uT(t),r=Ne(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=Ne(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(GIe.test(a)===!0){const[h,d=y3]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return Qe("path",{style:w,d:m,transform:k})})}}if(QIe.test(a)===!0)return{img:!0,src:a.substring(4)};if(YIe.test(a)===!0){const[h,d=y3]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(WIe);if(u!==null)o=VX[u[1]](a);else if(JIe.test(a)===!0)o=a;else if(XIe.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(v3.test(a)===!0){o="notranslate material-symbols";const h=a.match(v3);h!==null&&(a=a.substring(6),o+=qX[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(KIe);h!==null&&(a=a.substring(2),o+=UX[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?Qe(t.tag,o,SF(e.default)):i.value.img===!0?Qe(t.tag,o,op(e.default,[Qe("img",{src:i.value.src})])):i.value.svg===!0?Qe(t.tag,o,op(e.default,[Qe("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?Qe(t.tag,o,op(e.default,[Qe("svg",{viewBox:i.value.viewBox},[Qe("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),Qe(t.tag,o,op(e.default,[i.value.content])))}}}),RF=fg({name:"QAvatar",props:{...lT,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=uT(t),s=Ne(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=Ne(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[Qe(l_,{name:t.icon})]:void 0;return Qe("div",{class:s.value,style:n.value},[Qe("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},kF(e.default,i))])}}}),AF={size:{type:[String,Number],default:"1em"},color:String};function PF(t){return{cSize:Ne(()=>t.size in IO?`${IO[t.size]}px`:t.size),classes:Ne(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const $R=fg({name:"QSpinner",props:{...AF,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=PF(t);return()=>Qe("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Qe("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function NF(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function jX(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Ll(t);if(e)return e.$el||e}function BX(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function ZIe(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function w3(t,e,n,s){n.modifiers.stop===!0&&Jk(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=wM(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${l.left-u-w}px`,D=`${(p-m)/2}px`,M=i?D:`${l.top-h-w}px`;a.className="q-ripple__inner",NF(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${D},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function b3(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const xF=vM({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&w3(r,t,s,r.qKeyEvent===!0)},keystart:ZIe(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&db(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&w3(r,t,s,!0)},300)};b3(s,e),t.__qripple=s,bM(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&b3(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),EM(e,"main"),delete t._qripple)}}),$X={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},e0e=Object.keys($X),OF={align:{type:String,validator:t=>e0e.includes(t)}};function DF(t){return Ne(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${$X[e]}`})}function zX(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function LF(t){return t.appContext.config.globalProperties.$router!==void 0}function HX(t){return t.isUnmounted===!0||t.isDeactivated===!0}function E3(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function T3(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function t0e(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function C3(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function n0e(t,e){return Array.isArray(t)===!0?C3(t,e):Array.isArray(e)===!0?C3(e,t):t===e}function s0e(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(n0e(t[n],e[n])===!1)return!1;return!0}const WX={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},KX={...WX,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function MF({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=pu(),{props:s,proxy:r,emit:i}=n,o=LF(n),a=Ne(()=>s.disable!==!0&&s.href!==void 0),l=Ne(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=Ne(()=>l.value===!0?M(s.to):null),h=Ne(()=>u.value!==null),d=Ne(()=>a.value===!0||h.value===!0),p=Ne(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=Ne(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=Ne(()=>{if(h.value===!1)return-1;const{matched:H}=u.value,{length:X}=H,I=H[X-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(T3.bind(null,I));if(y!==-1)return y;const C=E3(H[X-2]);return X>1&&E3(I)===C&&v[v.length-1].path!==C?v.findIndex(T3.bind(null,H[X-2])):y}),k=Ne(()=>h.value===!0&&w.value!==-1&&t0e(r.$route.params,u.value.params)),P=Ne(()=>k.value===!0&&w.value===r.$route.matched.length-1&&s0e(r.$route.params,u.value.params)),D=Ne(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:X,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return X===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const X=I=>V(H,I);i("click",H,X),H.defaultPrevented!==!0&&X()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:k,linkIsExactActive:P,linkClass:D,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const I3={none:0,xs:4,sm:8,md:16,lg:24,xl:32},r0e={xs:8,sm:10,md:14,lg:20,xl:24},i0e=["button","submit","reset"],o0e=/[^\s]\/[^\s]/,a0e=["flat","outline","push","unelevated"];function c0e(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const l0e={...lT,...WX,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...a0e.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...OF.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},u0e={...l0e,round:Boolean};function h0e(t){const e=uT(t,r0e),n=DF(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=MF({fallbackTag:"button"}),l=Ne(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(D=>D in I3?I3[D]+"px":D).join(" "),minWidth:"0",minHeight:"0"}):P}),u=Ne(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=Ne(()=>t.disable!==!0&&t.loading!==!0),d=Ne(()=>h.value===!0?t.tabindex||0:-1),p=Ne(()=>c0e(t,"standard")),m=Ne(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):i0e.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&o0e.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=Ne(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const D=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${D}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=Ne(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:Eo}=Bl;let Pg=null,Ng=null,xg=null;const FF=fg({name:"QBtn",props:{...u0e,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=pu(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=h0e(t),p=Uc(null),m=Uc(null);let w=null,k,P=null;const D=Ne(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=Ne(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=Ne(()=>({center:t.round})),q=Ne(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=Ne(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:C};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:Ph}}),X=Ne(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const de=()=>{document.removeEventListener("keydown",Ph,!0),document.removeEventListener("keyup",de,Eo),p.value?.removeEventListener("blur",de,Eo)};document.addEventListener("keydown",Ph,!0),document.addEventListener("keyup",de,Eo),p.value.addEventListener("blur",de,Eo)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),db(K,[13,32])===!0&&Ng!==p.value&&(Ng!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),Ng=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,Eo)),Ph(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&(Pg!==p.value&&(Pg!==null&&E(),Pg=p.value,w=K.target,w.addEventListener("touchcancel",S,Eo),w.addEventListener("touchend",S,Eo)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function C(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&xg!==p.value&&(xg!==null&&E(),xg=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,Eo)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(Ng===p.value&&db(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&hb(ne),K.cancelBubble===!0&&Jk(ne),p.value.dispatchEvent(ne),Ph(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&(Pg===p.value||xg===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Pg===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,Eo),w.removeEventListener("touchend",S,Eo)),Pg=w=null),xg===p.value&&(document.removeEventListener("mouseup",S,Eo),xg=null),Ng===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,Eo),Ng=null),p.value?.classList.remove("q-btn--active")}function b(K){Ph(K),K.qSkipRipple=!0}return $E(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(Qe(l_,{name:t.icon,left:t.stack!==!0&&D.value===!0,role:"img"})),D.value===!0&&K.push(Qe("span",{class:"block"},[t.label])),K=op(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(Qe(l_,{name:t.iconRight,right:t.stack!==!0&&D.value===!0,role:"img"}));const ne=[Qe("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(Qe("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Qe("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(Qe("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(Qe(yM,{name:"q-transition--fade"},()=>t.loading===!0?[Qe("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Qe($R)])]:null)),Bk(Qe(u.value,X.value,ne),[[xF,M.value,void 0,V.value]])}}});let d0e=1,f0e=document.body;function VF(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${d0e++}`:t,i0.globalNodes!==void 0){const s=i0.globalNodes.class;s!==void 0&&(n.className=s)}return f0e.appendChild(n),n}function GX(t){t.remove()}let p0e=0;const uI={},hI={},ra={},QX={},g0e=/^\s*$/,YX=[],m0e=[void 0,null,!0,!1,""],UF=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],_0e=["top-left","top-right","bottom-left","bottom-right"],Rv={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function XX(t,e,n){if(!t)return Zy("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,uI),Fp(t)===!1&&(r.type&&Object.assign(r,Rv[r.type]),t={message:t}),Object.assign(r,Rv[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=$R),r.spinner=dg(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:S3(r.message)||S3(r.caption)},r.position){if(UF.includes(r.position)===!1)return Zy("wrong position",t)}else r.position="bottom";if(m0e.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return Zy("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(uI.actions)===!0?uI.actions:[]).concat(Array.isArray(Rv[t.type]?.actions)===!0?Rv[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=ra[r.position].value.indexOf(n.notif);ra[r.position].value[l]=r}else{const l=hI[r.meta.group];if(l===void 0){if(r.meta.uid=p0e++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)ra[r.position].value.splice(Math.floor(ra[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";ra[r.position].value[u](r)}r.group!==void 0&&(hI[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(_0e.includes(r.badgePosition)===!1)return Zy("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=ra[r.position].value.indexOf(l);ra[r.position].value[u]=hI[r.meta.group]=r}}const a=()=>{y0e(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?Zy("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});XX(u,e,s)}}}function y0e(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=ra[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete hI[t.meta.group];const n=YX[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}ra[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function S3(t){return t!=null&&g0e.test(t)!==!0}function Zy(t,e){return console.error(`Notify: ${t}`,e),!1}function v0e(){return fg({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Qe("div",{class:"q-notifications"},UF.map(t=>Qe(Xde,{key:t,class:QX[t],tag:"div",name:`q-notification--${t}`},()=>ra[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(Qe(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(Qe(l_,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(Qe(RF,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Qe("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[Qe("div",a),Qe("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(Qe("div",o,i))}const r=[Qe("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(Qe("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(Qe("div",{class:n.actionsClass},e.actions.map(i=>Qe(FF,i)))),n.badge>1&&r.push(Qe("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Qe("div",{ref:i=>{YX[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[Qe("div",{class:n.wrapperClass},r)])}))))}})}const w0e={setDefaults(t){Fp(t)===!0&&Object.assign(uI,t)},registerType(t,e){Fp(e)===!0&&(Rv[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>XX(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){UF.forEach(s=>{ra[s]=Uc([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;QX[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=VF("q-notify");Cfe(v0e(),e).mount(n)}}},b0e={config:{},plugins:{Notify:w0e}},E0e="/";async function T0e({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:E0e})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}HIe(Y8,b0e).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ac(()=>yr(()=>Un(()=>import("./pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7.js"),__vite__mapDeps([21,9])),fi([21,9])),Sh([28,9]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");T0e(t,r)})});const C0e=Object.freeze(Object.defineProperty({__proto__:null,$:Bl,A:FX,B:kF,C:Ph,D:q_,E:pM,F:Qk,G:Cr,H:Gk,I:FF,J:Jk,K:xo,L:j_,M:hb,N:BE,O:AM,P:gM,Q:l_,R:xF,S:rM,T:F8,U:GL,V:mM,W:RM,X:CF,Y:jl,Z:$E,_:Mp,a:gf,a$:IM,a0:vm,a1:zE,a2:op,get a3(){return Vn},a4:TF,a5:LX,a6:xX,a7:CM,get a8(){return Lb},a9:fY,aA:EM,aB:tK,aC:bM,aD:wM,aE:Z8,aF:TM,aG:aM,aH:oM,aI:HX,aJ:cK,aK:Fp,aL:r2,aM:ao,aN:_8,aO:RF,aP:Q8,aQ:yM,aR:Uk,aS:W8,aT:$R,aU:uM,aV:cM,aW:BX,aX:Yv,aY:lM,aZ:Hk,a_:LF,aa:lY,get ab(){return Db},ac:x2,ad:$Q,ae:iw,af:hY,ag:uY,ah:dY,ai:A0,aj:R0,ak:HQ,al:ac,am:zQ,an:KX,ao:MF,ap:db,aq:MX,ar:IF,as:EF,at:DX,au:UE,av:qE,aw:Ll,ax:OX,ay:Bk,az:vM,b:Zh,b0:dK,b1:hK,b2:X8,b3:ub,b4:zX,b5:c8,b6:VF,b7:GX,b8:eK,b9:OF,ba:DF,bb:lR,bc:pc,bd:gc,be:ca,bf:Wl,bg:mc,bh:YM,bi:JM,bj:s2,bk:uR,bl:KM,bm:jM,bn:f0,bo:e2,bp:WM,bq:XM,br:QM,bs:MM,bt:$M,bu:n2,bv:Jf,bw:AF,bx:PF,by:UIe,c:Z7,d:Ne,e:D7,f:Ji,g:QL,h:b8,i:Bs,j:fg,k:pu,l:Qe,m:dg,n:jk,o:L7,p:SF,q:lK,r:Uc,s:oK,t:qt,u:aK,v:jX,w:vp,x:NF,y:lT,z:uT},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function qF(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const fn={},km=[],Sc=()=>{},I0e=()=>!1,zR=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),jF=t=>t.startsWith("onUpdate:"),Ws=Object.assign,BF=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},S0e=Object.prototype.hasOwnProperty,tn=(t,e)=>S0e.call(t,e),Ke=Array.isArray,Rm=t=>HR(t)==="[object Map]",JX=t=>HR(t)==="[object Set]",ut=t=>typeof t=="function",ns=t=>typeof t=="string",vf=t=>typeof t=="symbol",Mn=t=>t!==null&&typeof t=="object",ZX=t=>(Mn(t)||ut(t))&&ut(t.then)&&ut(t.catch),eJ=Object.prototype.toString,HR=t=>eJ.call(t),k0e=t=>HR(t).slice(8,-1),tJ=t=>HR(t)==="[object Object]",$F=t=>ns(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,dw=qF(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),WR=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},R0e=/-(\w)/g,jo=WR(t=>t.replace(R0e,(e,n)=>n?n.toUpperCase():"")),A0e=/\B([A-Z])/g,_g=WR(t=>t.replace(A0e,"-$1").toLowerCase()),KR=WR(t=>t.charAt(0).toUpperCase()+t.slice(1)),BP=WR(t=>t?`on${KR(t)}`:""),ad=(t,e)=>!Object.is(t,e),$P=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},SO=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},P0e=t=>{const e=parseFloat(t);return isNaN(e)?t:e},N0e=t=>{const e=ns(t)?Number(t):NaN;return isNaN(e)?t:e};let k3;const GR=()=>k3||(k3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function QR(t){if(Ke(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ns(s)?L0e(s):QR(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ns(t)||Mn(t))return t}const x0e=/;(?![^(]*\))/g,O0e=/:([^]+)/,D0e=/\/\*[^]*?\*\//g;function L0e(t){const e={};return t.replace(D0e,"").split(x0e).forEach(n=>{if(n){const s=n.split(O0e);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function YR(t){let e="";if(ns(t))e=t;else if(Ke(t))for(let n=0;n<t.length;n++){const s=YR(t[n]);s&&(e+=s+" ")}else if(Mn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const M0e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F0e=qF(M0e);function nJ(t){return!!t||t===""}const sJ=t=>!!(t&&t.__v_isRef===!0),rJ=t=>ns(t)?t:t==null?"":Ke(t)||Mn(t)&&(t.toString===eJ||!ut(t.toString))?sJ(t)?rJ(t.value):JSON.stringify(t,iJ,2):String(t),iJ=(t,e)=>sJ(e)?iJ(t,e.value):Rm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[zP(s,i)+" =>"]=r,n),{})}:JX(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>zP(n))}:vf(e)?zP(e):Mn(e)&&!Ke(e)&&!tJ(e)?String(e):e,zP=(t,e="")=>{var n;return vf(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mr;class oJ{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mr,!e&&Mr&&(this.index=(Mr.scopes||(Mr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Mr;try{return Mr=this,e()}finally{Mr=n}}}on(){++this._on===1&&(this.prevScope=Mr,Mr=this)}off(){this._on>0&&--this._on===0&&(Mr=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function V0e(t){return new oJ(t)}function aJ(){return Mr}function U0e(t,e=!1){Mr&&Mr.cleanups.push(t)}let Tn;const HP=new WeakSet;class cJ{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mr&&Mr.active&&Mr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,HP.has(this)&&(HP.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||uJ(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,R3(this),hJ(this);const e=Tn,n=Na;Tn=this,Na=!0;try{return this.fn()}finally{dJ(this),Tn=e,Na=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)WF(e);this.deps=this.depsTail=void 0,R3(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?HP.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){kO(this)&&this.run()}get dirty(){return kO(this)}}let lJ=0,fw,pw;function uJ(t,e=!1){if(t.flags|=8,e){t.next=pw,pw=t;return}t.next=fw,fw=t}function zF(){lJ++}function HF(){if(--lJ>0)return;if(pw){let e=pw;for(pw=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;fw;){let e=fw;for(fw=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function hJ(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function dJ(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),WF(s),q0e(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function kO(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(fJ(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function fJ(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mb)||(t.globalVersion=Mb,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!kO(t))))return;t.flags|=2;const e=t.dep,n=Tn,s=Na;Tn=t,Na=!0;try{hJ(t);const r=t.fn(t._value);(e.version===0||ad(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Tn=n,Na=s,dJ(t),t.flags&=-3}}function WF(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)WF(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function q0e(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Na=!0;const pJ=[];function Yl(){pJ.push(Na),Na=!1}function Xl(){const t=pJ.pop();Na=t===void 0?!0:t}function R3(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Tn;Tn=void 0;try{e()}finally{Tn=n}}}let Mb=0;class j0e{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class KF{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Tn||!Na||Tn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tn)n=this.activeLink=new j0e(Tn,this),Tn.deps?(n.prevDep=Tn.depsTail,Tn.depsTail.nextDep=n,Tn.depsTail=n):Tn.deps=Tn.depsTail=n,gJ(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Tn.depsTail,n.nextDep=void 0,Tn.depsTail.nextDep=n,Tn.depsTail=n,Tn.deps===n&&(Tn.deps=s)}return n}trigger(e){this.version++,Mb++,this.notify(e)}notify(e){zF();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{HF()}}}function gJ(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)gJ(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const $0=new WeakMap,Tp=Symbol(""),RO=Symbol(""),Fb=Symbol("");function zr(t,e,n){if(Na&&Tn){let s=$0.get(t);s||$0.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new KF),r.map=s,r.key=n),r.track()}}function yl(t,e,n,s,r,i){const o=$0.get(t);if(!o){Mb++;return}const a=l=>{l&&l.trigger()};if(zF(),e==="clear")o.forEach(a);else{const l=Ke(t),u=l&&$F(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===Fb||!vf(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Fb)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Tp)),Rm(t)&&a(o.get(RO)));break;case"delete":l||(a(o.get(Tp)),Rm(t)&&a(o.get(RO)));break;case"set":Rm(t)&&a(o.get(Tp));break}}HF()}function B0e(t,e){const n=$0.get(t);return n&&n.get(e)}function Og(t){const e=zt(t);return e===t?e:(zr(e,"iterate",Fb),Do(t)?e:e.map(wr))}function XR(t){return zr(t=zt(t),"iterate",Fb),t}const $0e={__proto__:null,[Symbol.iterator](){return WP(this,Symbol.iterator,wr)},concat(...t){return Og(this).concat(...t.map(e=>Ke(e)?Og(e):e))},entries(){return WP(this,"entries",t=>(t[1]=wr(t[1]),t))},every(t,e){return ol(this,"every",t,e,void 0,arguments)},filter(t,e){return ol(this,"filter",t,e,n=>n.map(wr),arguments)},find(t,e){return ol(this,"find",t,e,wr,arguments)},findIndex(t,e){return ol(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ol(this,"findLast",t,e,wr,arguments)},findLastIndex(t,e){return ol(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ol(this,"forEach",t,e,void 0,arguments)},includes(...t){return KP(this,"includes",t)},indexOf(...t){return KP(this,"indexOf",t)},join(t){return Og(this).join(t)},lastIndexOf(...t){return KP(this,"lastIndexOf",t)},map(t,e){return ol(this,"map",t,e,void 0,arguments)},pop(){return ev(this,"pop")},push(...t){return ev(this,"push",t)},reduce(t,...e){return A3(this,"reduce",t,e)},reduceRight(t,...e){return A3(this,"reduceRight",t,e)},shift(){return ev(this,"shift")},some(t,e){return ol(this,"some",t,e,void 0,arguments)},splice(...t){return ev(this,"splice",t)},toReversed(){return Og(this).toReversed()},toSorted(t){return Og(this).toSorted(t)},toSpliced(...t){return Og(this).toSpliced(...t)},unshift(...t){return ev(this,"unshift",t)},values(){return WP(this,"values",wr)}};function WP(t,e,n){const s=XR(t),r=s[e]();return s!==t&&!Do(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const z0e=Array.prototype;function ol(t,e,n,s,r,i){const o=XR(t),a=o!==t&&!Do(t),l=o[e];if(l!==z0e[e]){const d=l.apply(t,i);return a?wr(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,wr(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function A3(t,e,n,s){const r=XR(t);let i=n;return r!==t&&(Do(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,wr(a),l,t)}),r[e](i,...s)}function KP(t,e,n){const s=zt(t);zr(s,"iterate",Fb);const r=s[e](...n);return(r===-1||r===!1)&&XF(n[0])?(n[0]=zt(n[0]),s[e](...n)):r}function ev(t,e,n=[]){Yl(),zF();const s=zt(t)[e].apply(t,n);return HF(),Xl(),s}const H0e=qF("__proto__,__v_isRef,__isVue"),mJ=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(vf));function W0e(t){vf(t)||(t=String(t));const e=zt(this);return zr(e,"has",t),e.hasOwnProperty(t)}class _J{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?nSe:bJ:i?wJ:vJ).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Ke(e);if(!r){let l;if(o&&(l=$0e[n]))return l;if(n==="hasOwnProperty")return W0e}const a=Reflect.get(e,n,ir(e)?e:s);return(vf(n)?mJ.has(n):H0e(n))||(r||zr(e,"get",n),i)?a:ir(a)?o&&$F(n)?a:a.value:Mn(a)?r?EJ(a):yg(a):a}}class yJ extends _J{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Fd(i);if(!Do(s)&&!Fd(s)&&(i=zt(i),s=zt(s)),!Ke(e)&&ir(i)&&!ir(s))return l?!1:(i.value=s,!0)}const o=Ke(e)&&$F(n)?Number(n)<e.length:tn(e,n),a=Reflect.set(e,n,s,ir(e)?e:r);return e===zt(r)&&(o?ad(s,i)&&yl(e,"set",n,s):yl(e,"add",n,s)),a}deleteProperty(e,n){const s=tn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&yl(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!vf(n)||!mJ.has(n))&&zr(e,"has",n),s}ownKeys(e){return zr(e,"iterate",Ke(e)?"length":Tp),Reflect.ownKeys(e)}}class K0e extends _J{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const G0e=new yJ,Q0e=new K0e,Y0e=new yJ(!0),AO=t=>t,gC=t=>Reflect.getPrototypeOf(t);function X0e(t,e,n){return function(...s){const r=this.__v_raw,i=zt(r),o=Rm(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?AO:e?z0:wr;return!e&&zr(i,"iterate",l?RO:Tp),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function mC(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function J0e(t,e){const n={get(s){const r=this.__v_raw,i=zt(r),o=zt(s);t||(ad(s,o)&&zr(i,"get",s),zr(i,"get",o));const{has:a}=gC(i),l=e?AO:t?z0:wr;if(a.call(i,s))return l(r.get(s));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&zr(zt(s),"iterate",Tp),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=zt(r),o=zt(s);return t||(ad(s,o)&&zr(i,"has",s),zr(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=zt(o),l=e?AO:t?z0:wr;return!t&&zr(a,"iterate",Tp),o.forEach((u,h)=>s.call(r,l(u),l(h),i))}};return Ws(n,t?{add:mC("add"),set:mC("set"),delete:mC("delete"),clear:mC("clear")}:{add(s){!e&&!Do(s)&&!Fd(s)&&(s=zt(s));const r=zt(this);return gC(r).has.call(r,s)||(r.add(s),yl(r,"add",s,s)),this},set(s,r){!e&&!Do(r)&&!Fd(r)&&(r=zt(r));const i=zt(this),{has:o,get:a}=gC(i);let l=o.call(i,s);l||(s=zt(s),l=o.call(i,s));const u=a.call(i,s);return i.set(s,r),l?ad(r,u)&&yl(i,"set",s,r):yl(i,"add",s,r),this},delete(s){const r=zt(this),{has:i,get:o}=gC(r);let a=i.call(r,s);a||(s=zt(s),a=i.call(r,s)),o&&o.call(r,s);const l=r.delete(s);return a&&yl(r,"delete",s,void 0),l},clear(){const s=zt(this),r=s.size!==0,i=s.clear();return r&&yl(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=X0e(s,t,e)}),n}function GF(t,e){const n=J0e(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(tn(n,r)&&r in s?n:s,r,i)}const Z0e={get:GF(!1,!1)},eSe={get:GF(!1,!0)},tSe={get:GF(!0,!1)},vJ=new WeakMap,wJ=new WeakMap,bJ=new WeakMap,nSe=new WeakMap;function sSe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rSe(t){return t.__v_skip||!Object.isExtensible(t)?0:sSe(k0e(t))}function yg(t){return Fd(t)?t:YF(t,!1,G0e,Z0e,vJ)}function QF(t){return YF(t,!1,Y0e,eSe,wJ)}function EJ(t){return YF(t,!0,Q0e,tSe,bJ)}function YF(t,e,n,s,r){if(!Mn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=rSe(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Cp(t){return Fd(t)?Cp(t.__v_raw):!!(t&&t.__v_isReactive)}function Fd(t){return!!(t&&t.__v_isReadonly)}function Do(t){return!!(t&&t.__v_isShallow)}function XF(t){return t?!!t.__v_raw:!1}function zt(t){const e=t&&t.__v_raw;return e?zt(e):t}function J_(t){return!tn(t,"__v_skip")&&Object.isExtensible(t)&&SO(t,"__v_skip",!0),t}const wr=t=>Mn(t)?yg(t):t,z0=t=>Mn(t)?EJ(t):t;function ir(t){return t?t.__v_isRef===!0:!1}function Jl(t){return TJ(t,!1)}function iSe(t){return TJ(t,!0)}function TJ(t,e){return ir(t)?t:new oSe(t,e)}class oSe{constructor(e,n){this.dep=new KF,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:zt(e),this._value=n?e:wr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Do(e)||Fd(e);e=s?e:zt(e),ad(e,n)&&(this._rawValue=e,this._value=s?e:wr(e),this.dep.trigger())}}function cd(t){return ir(t)?t.value:t}const aSe={get:(t,e,n)=>e==="__v_raw"?t:cd(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return ir(r)&&!ir(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function CJ(t){return Cp(t)?t:new Proxy(t,aSe)}function cSe(t){const e=Ke(t)?new Array(t.length):{};for(const n in t)e[n]=uSe(t,n);return e}class lSe{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return B0e(zt(this._object),this._key)}}function uSe(t,e,n){const s=t[e];return ir(s)?s:new lSe(t,e,n)}class hSe{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new KF(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mb-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Tn!==this)return uJ(this,!0),!0}get value(){const e=this.dep.track();return fJ(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function dSe(t,e,n=!1){let s,r;return ut(t)?s=t:(s=t.get,r=t.set),new hSe(s,r,n)}const _C={},H0=new WeakMap;let zf;function fSe(t,e=!1,n=zf){if(n){let s=H0.get(n);s||H0.set(n,s=[]),s.push(t)}}function pSe(t,e,n=fn){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:Do(q)||r===!1||r===0?vl(q,1):vl(q);let h,d,p,m,w=!1,k=!1;if(ir(t)?(d=()=>t.value,w=Do(t)):Cp(t)?(d=()=>u(t),w=!0):Ke(t)?(k=!0,w=t.some(q=>Cp(q)||Do(q)),d=()=>t.map(q=>{if(ir(q))return q.value;if(Cp(q))return u(q);if(ut(q))return l?l(q,2):q()})):ut(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Yl();try{p()}finally{Xl()}}const q=zf;zf=h;try{return l?l(t,3,[m]):t(m)}finally{zf=q}}:d=Sc,e&&r){const q=d,H=r===!0?1/0:r;d=()=>vl(q(),H)}const P=aJ(),D=()=>{h.stop(),P&&P.active&&BF(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),D()}}let M=k?new Array(t.length).fill(_C):_C;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((X,I)=>ad(X,M[I])):ad(H,M))){p&&p();const X=zf;zf=h;try{const I=[H,M===_C?void 0:k&&M[0]===_C?[]:M,m];M=H,l?l(e,3,I):e(...I)}finally{zf=X}}}else h.run()};return a&&a(V),h=new cJ(d),h.scheduler=o?()=>o(V,!1):V,m=q=>fSe(q,!1,h),p=h.onStop=()=>{const q=H0.get(h);if(q){if(l)l(q,4);else for(const H of q)H();H0.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function vl(t,e=1/0,n){if(e<=0||!Mn(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ir(t))vl(t.value,e,n);else if(Ke(t))for(let s=0;s<t.length;s++)vl(t[s],e,n);else if(JX(t)||Rm(t))t.forEach(s=>{vl(s,e,n)});else if(tJ(t)){for(const s in t)vl(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&vl(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hT(t,e,n,s){try{return s?t(...s):t()}catch(r){JR(r,e,n)}}function za(t,e,n,s){if(ut(t)){const r=hT(t,e,n,s);return r&&ZX(r)&&r.catch(i=>{JR(i,e,n)}),r}if(Ke(t)){const r=[];for(let i=0;i<t.length;i++)r.push(za(t[i],e,n,s));return r}}function JR(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||fn;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){Yl(),hT(i,null,10,[t,l,u]),Xl();return}}gSe(t,n,r,s,o)}function gSe(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const gi=[];let ic=-1;const Am=[];let Oh=null,Zg=0;const IJ=Promise.resolve();let W0=null;function JF(t){const e=W0||IJ;return t?e.then(this?t.bind(this):t):e}function mSe(t){let e=ic+1,n=gi.length;for(;e<n;){const s=e+n>>>1,r=gi[s],i=Vb(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function ZF(t){if(!(t.flags&1)){const e=Vb(t),n=gi[gi.length-1];!n||!(t.flags&2)&&e>=Vb(n)?gi.push(t):gi.splice(mSe(e),0,t),t.flags|=1,SJ()}}function SJ(){W0||(W0=IJ.then(RJ))}function _Se(t){Ke(t)?Am.push(...t):Oh&&t.id===-1?Oh.splice(Zg+1,0,t):t.flags&1||(Am.push(t),t.flags|=1),SJ()}function P3(t,e,n=ic+1){for(;n<gi.length;n++){const s=gi[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;gi.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function kJ(t){if(Am.length){const e=[...new Set(Am)].sort((n,s)=>Vb(n)-Vb(s));if(Am.length=0,Oh){Oh.push(...e);return}for(Oh=e,Zg=0;Zg<Oh.length;Zg++){const n=Oh[Zg];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Oh=null,Zg=0}}const Vb=t=>t.id==null?t.flags&2?-1:1/0:t.id;function RJ(t){try{for(ic=0;ic<gi.length;ic++){const e=gi[ic];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),hT(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ic<gi.length;ic++){const e=gi[ic];e&&(e.flags&=-2)}ic=-1,gi.length=0,kJ(),W0=null,(gi.length||Am.length)&&RJ()}}let po=null,AJ=null;function K0(t){const e=po;return po=t,AJ=t&&t.type.__scopeId||null,e}function PJ(t,e=po,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&z3(-1);const i=K0(e);let o;try{o=t(...r)}finally{K0(i),s._d&&z3(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function eV(t,e){if(po===null)return t;const n=oA(po),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=fn]=e[r];i&&(ut(i)&&(i={mounted:i,updated:i}),i.deep&&vl(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function xf(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Yl(),za(l,n,8,[t.el,a,t,e]),Xl())}}const NJ=Symbol("_vte"),xJ=t=>t.__isTeleport,gw=t=>t&&(t.disabled||t.disabled===""),N3=t=>t&&(t.defer||t.defer===""),x3=t=>typeof SVGElement<"u"&&t instanceof SVGElement,O3=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,PO=(t,e)=>{const n=t&&t.to;return ns(n)?e?e(n):null:n},OJ={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=u,D=gw(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),X=e.anchor=k("");m(H,n,s),m(X,n,s);const I=(y,C)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,C,r,i,o,a,l))},v=()=>{const y=e.target=PO(e.props,w),C=DJ(y,e,k,m);y&&(o!=="svg"&&x3(y)?o="svg":o!=="mathml"&&O3(y)&&(o="mathml"),D||(I(y,C),dI(e,!1)))};D&&(I(n,X),dI(e,!0)),N3(e.props)?(e.el.__isMounted=!1,hi(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(N3(e.props)&&t.el.__isMounted===!1){hi(()=>{OJ.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,X=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=gw(t.props),y=v?n:X,C=v?H:I;if(o==="svg"||x3(X)?o="svg":(o==="mathml"||O3(X))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),iV(t,e,!0)):l||d(t,e,y,C,r,i,o,a,!1),D)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):yC(e,n,H,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=PO(e.props,w);S&&yC(e,S,null,u,0)}else v&&yC(e,X,I,u,1);dI(e,D)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!gw(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:yC,hydrate:ySe};function yC(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||gw(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function ySe(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=PO(e.props,l);if(p){const m=gw(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||DJ(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}dI(e,m)}return e.anchor&&o(e.anchor)}const vSe=OJ;function dI(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function DJ(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[NJ]=i,t&&(s(r,t),s(i,t)),i}const Dh=Symbol("_leaveCb"),vC=Symbol("_enterCb");function LJ(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tA(()=>{t.isMounted=!0}),nA(()=>{t.isUnmounting=!0}),t}const To=[Function,Array],MJ={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:To,onEnter:To,onAfterEnter:To,onEnterCancelled:To,onBeforeLeave:To,onLeave:To,onAfterLeave:To,onLeaveCancelled:To,onBeforeAppear:To,onAppear:To,onAfterAppear:To,onAppearCancelled:To},FJ=t=>{const e=t.subTree;return e.component?FJ(e.component):e},wSe={name:"BaseTransition",props:MJ,setup(t,{slots:e}){const n=wf(),s=LJ();return()=>{const r=e.default&&tV(e.default(),!0);if(!r||!r.length)return;const i=VJ(r),o=zt(t),{mode:a}=o;if(s.isLeaving)return GP(i);const l=D3(i);if(!l)return GP(i);let u=Ub(l,o,s,n,d=>u=d);l.type!==yi&&Wp(l,u);let h=n.subTree&&D3(n.subTree);if(h&&h.type!==yi&&!Zf(l,h)&&FJ(n).type!==yi){let d=Ub(h,o,s,n);if(Wp(h,d),a==="out-in"&&l.type!==yi)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},GP(i);a==="in-out"&&l.type!==yi?d.delayLeave=(p,m,w)=>{const k=UJ(s,h);k[String(h.key)]=h,p[Dh]=()=>{m(),p[Dh]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function VJ(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==yi){e=n;break}}return e}const bSe=wSe;function UJ(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ub(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:D,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=UJ(n,t),X=(y,C)=>{y&&za(y,s,9,C)},I=(y,C)=>{const S=C[1];X(y,C),Ke(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let C=l;if(!n.isMounted)if(i)C=P||l;else return;y[Dh]&&y[Dh](!0);const S=H[q];S&&Zf(t,S)&&S.el[Dh]&&S.el[Dh](),X(C,[y])},enter(y){let C=u,S=h,E=d;if(!n.isMounted)if(i)C=D||u,S=M||h,E=V||d;else return;let b=!1;const K=y[vC]=ne=>{b||(b=!0,ne?X(E,[y]):X(S,[y]),v.delayedLeave&&v.delayedLeave(),y[vC]=void 0)};C?I(C,[y,K]):K()},leave(y,C){const S=String(t.key);if(y[vC]&&y[vC](!0),n.isUnmounting)return C();X(p,[y]);let E=!1;const b=y[Dh]=K=>{E||(E=!0,C(),K?X(k,[y]):X(w,[y]),y[Dh]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const C=Ub(y,e,n,s,r);return r&&r(C),C}};return v}function GP(t){if(ZR(t))return t=Vd(t),t.children=null,t}function D3(t){if(!ZR(t))return xJ(t.type)&&t.children?VJ(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ut(n.default))return n.default()}}function Wp(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Wp(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function tV(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ko?(o.patchFlag&128&&r++,s=s.concat(tV(o.children,e,a))):(e||o.type!==yi)&&s.push(a!=null?Vd(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function dT(t,e){return ut(t)?Ws({name:t.name},e,{setup:t}):t}function qJ(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function mw(t,e,n,s,r=!1){if(Ke(t)){t.forEach((w,k)=>mw(w,e&&(Ke(e)?e[k]:e),n,s,r));return}if(_w(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&mw(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?oA(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===fn?a.refs={}:a.refs,d=a.setupState,p=zt(d),m=d===fn?()=>!1:w=>tn(p,w);if(u!=null&&u!==l&&(ns(u)?(h[u]=null,m(u)&&(d[u]=null)):ir(u)&&(u.value=null)),ut(l))hT(l,a,12,[o,h]);else{const w=ns(l),k=ir(l);if(w||k){const P=()=>{if(t.f){const D=w?m(l)?d[l]:h[l]:l.value;r?Ke(D)&&BF(D,i):Ke(D)?D.includes(i)||D.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):k&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,hi(P,n)):P()}}}GR().requestIdleCallback;GR().cancelIdleCallback;const _w=t=>!!t.type.__asyncLoader,ZR=t=>t.type.__isKeepAlive;function jJ(t,e){$J(t,"a",e)}function BJ(t,e){$J(t,"da",e)}function $J(t,e,n=Xr){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(eA(e,s,n),n){let r=n.parent;for(;r&&r.parent;)ZR(r.parent.vnode)&&ESe(s,e,n,r),r=r.parent}}function ESe(t,e,n,s){const r=eA(e,t,s,!0);sA(()=>{BF(s[e],r)},n)}function eA(t,e,n=Xr,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Yl();const a=fT(n),l=za(e,n,t,o);return a(),Xl(),l});return s?r.unshift(i):r.push(i),i}}const _u=t=>(e,n=Xr)=>{(!jb||t==="sp")&&eA(t,(...s)=>e(...s),n)},zJ=_u("bm"),tA=_u("m"),HJ=_u("bu"),nV=_u("u"),nA=_u("bum"),sA=_u("um"),TSe=_u("sp"),CSe=_u("rtg"),ISe=_u("rtc");function SSe(t,e=Xr){eA("ec",t,e)}const kSe="components";function WJ(t,e){return ASe(kSe,t,!0,e)||t}const RSe=Symbol.for("v-ndc");function ASe(t,e,n=!0,s=!1){const r=po||Xr;if(r){const i=r.type;{const a=yke(i,!1);if(a&&(a===e||a===jo(e)||a===KR(jo(e))))return i}const o=L3(r[t]||i[t],e)||L3(r.appContext[t],e);return!o&&s?i:o}}function L3(t,e){return t&&(t[e]||t[jo(e)]||t[KR(jo(e))])}function PSe(t,e,n,s){let r;const i=n,o=Ke(t);if(o||ns(t)){const a=o&&Cp(t);let l=!1,u=!1;a&&(l=!Do(t),u=Fd(t),t=XR(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?z0(wr(t[h])):wr(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Mn(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const NO=t=>t?pZ(t)?oA(t):NO(t.parent):null,yw=Ws(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>NO(t.parent),$root:t=>NO(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>GJ(t),$forceUpdate:t=>t.f||(t.f=()=>{ZF(t.update)}),$nextTick:t=>t.n||(t.n=JF.bind(t.proxy)),$watch:t=>JSe.bind(t)}),QP=(t,e)=>t!==fn&&!t.__isScriptSetup&&tn(t,e),NSe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(QP(s,e))return o[e]=1,s[e];if(r!==fn&&tn(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&tn(u,e))return o[e]=3,i[e];if(n!==fn&&tn(n,e))return o[e]=4,n[e];xO&&(o[e]=0)}}const h=yw[e];let d,p;if(h)return e==="$attrs"&&zr(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==fn&&tn(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,tn(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return QP(r,e)?(r[e]=n,!0):s!==fn&&tn(s,e)?(s[e]=n,!0):tn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==fn&&tn(t,o)||QP(e,o)||(a=i[0])&&tn(a,o)||tn(s,o)||tn(yw,o)||tn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:tn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function M3(t){return Ke(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let xO=!0;function xSe(t){const e=GJ(t),n=t.proxy,s=t.ctx;xO=!1,e.beforeCreate&&F3(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:D,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:X,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:C,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(u&&OSe(u,s,null),o)for(const de in o){const ce=o[de];ut(ce)&&(s[de]=ce.bind(n))}if(r){const de=r.call(n,n);Mn(de)&&(t.data=yg(de))}if(xO=!0,i)for(const de in i){const ce=i[de],we=ut(ce)?ce.bind(n,n):ut(ce.get)?ce.get.bind(n,n):Sc,Ht=!ut(ce)&&ut(ce.set)?ce.set.bind(n):Sc,It=Oe({get:we,set:Ht});Object.defineProperty(s,de,{enumerable:!0,configurable:!0,get:()=>It.value,set:xt=>It.value=xt})}if(a)for(const de in a)KJ(a[de],s,n,de);if(l){const de=ut(l)?l.call(n):l;Reflect.ownKeys(de).forEach(ce=>{vw(ce,de[ce])})}h&&F3(h,t,"c");function ne(de,ce){Ke(ce)?ce.forEach(we=>de(we.bind(n))):ce&&de(ce.bind(n))}if(ne(zJ,d),ne(tA,p),ne(HJ,m),ne(nV,w),ne(jJ,k),ne(BJ,P),ne(SSe,v),ne(ISe,X),ne(CSe,I),ne(nA,M),ne(sA,q),ne(TSe,y),Ke(C))if(C.length){const de=t.exposed||(t.exposed={});C.forEach(ce=>{Object.defineProperty(de,ce,{get:()=>n[ce],set:we=>n[ce]=we,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===Sc&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&qJ(t)}function OSe(t,e,n=Sc){Ke(t)&&(t=OO(t));for(const s in t){const r=t[s];let i;Mn(r)?"default"in r?i=wo(r.from||s,r.default,!0):i=wo(r.from||s):i=wo(r),ir(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function F3(t,e,n){za(Ke(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function KJ(t,e,n,s){let r=s.includes(".")?oZ(n,s):()=>n[s];if(ns(t)){const i=e[t];ut(i)&&Pm(r,i)}else if(ut(t))Pm(r,t.bind(n));else if(Mn(t))if(Ke(t))t.forEach(i=>KJ(i,e,n,s));else{const i=ut(t.handler)?t.handler.bind(n):e[t.handler];ut(i)&&Pm(r,i,t)}}function GJ(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>G0(l,u,o,!0)),G0(l,e,o)),Mn(e)&&i.set(e,l),l}function G0(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&G0(t,i,n,!0),r&&r.forEach(o=>G0(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=DSe[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const DSe={data:V3,props:U3,emits:U3,methods:Av,computed:Av,beforeCreate:ci,created:ci,beforeMount:ci,mounted:ci,beforeUpdate:ci,updated:ci,beforeDestroy:ci,beforeUnmount:ci,destroyed:ci,unmounted:ci,activated:ci,deactivated:ci,errorCaptured:ci,serverPrefetch:ci,components:Av,directives:Av,watch:MSe,provide:V3,inject:LSe};function V3(t,e){return e?t?function(){return Ws(ut(t)?t.call(this,this):t,ut(e)?e.call(this,this):e)}:e:t}function LSe(t,e){return Av(OO(t),OO(e))}function OO(t){if(Ke(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ci(t,e){return t?[...new Set([].concat(t,e))]:e}function Av(t,e){return t?Ws(Object.create(null),t,e):e}function U3(t,e){return t?Ke(t)&&Ke(e)?[...new Set([...t,...e])]:Ws(Object.create(null),M3(t),M3(e??{})):e}function MSe(t,e){if(!t)return e;if(!e)return t;const n=Ws(Object.create(null),t);for(const s in e)n[s]=ci(t[s],e[s]);return n}function QJ(){return{app:null,config:{isNativeTag:I0e,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let FSe=0;function VSe(t,e){return function(n,s=null){ut(n)||(n=Ws({},n)),s!=null&&!Mn(s)&&(s=null);const r=QJ(),i=new WeakSet,o=[];let a=!1;const l=r.app={_uid:FSe++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:wke,get config(){return r.config},set config(u){},use(u,...h){return i.has(u)||(u&&ut(u.install)?(i.add(u),u.install(l,...h)):ut(u)&&(i.add(u),u(l,...h))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,h){return h?(r.components[u]=h,l):r.components[u]},directive(u,h){return h?(r.directives[u]=h,l):r.directives[u]},mount(u,h,d){if(!a){const p=l._ceVNode||Zr(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,u,d),a=!0,l._container=u,u.__vue_app__=l,oA(p.component)}},onUnmount(u){o.push(u)},unmount(){a&&(za(o,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,h){return r.provides[u]=h,l},runWithContext(u){const h=Ip;Ip=l;try{return u()}finally{Ip=h}}};return l}}let Ip=null;function vw(t,e){if(Xr){let n=Xr.provides;const s=Xr.parent&&Xr.parent.provides;s===n&&(n=Xr.provides=Object.create(s)),n[t]=e}}function wo(t,e,n=!1){const s=wf();if(s||Ip){let r=Ip?Ip._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ut(e)?e.call(s&&s.proxy):e}}function USe(){return!!(wf()||Ip)}const YJ={},XJ=()=>Object.create(YJ),JJ=t=>Object.getPrototypeOf(t)===YJ;function qSe(t,e,n,s=!1){const r={},i=XJ();t.propsDefaults=Object.create(null),ZJ(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:QF(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function jSe(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=zt(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(rA(t.emitsOptions,p))continue;const m=e[p];if(l)if(tn(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=jo(p);r[w]=DO(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{ZJ(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!tn(e,d)&&((h=_g(d))===d||!tn(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=DO(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!tn(e,d))&&(delete i[d],u=!0)}u&&yl(t.attrs,"set","")}function ZJ(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(dw(l))continue;const u=e[l];let h;r&&tn(r,h=jo(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:rA(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=zt(n),u=a||fn;for(let h=0;h<i.length;h++){const d=i[h];n[d]=DO(r,l,d,u[d],t,!tn(u,d))}}return o}function DO(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=tn(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ut(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=fT(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===_g(n))&&(s=!0))}return s}const BSe=new WeakMap;function eZ(t,e,n=!1){const s=n?BSe:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!ut(t)){const h=d=>{l=!0;const[p,m]=eZ(d,e,!0);Ws(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Mn(t)&&s.set(t,km),km;if(Ke(i))for(let h=0;h<i.length;h++){const d=jo(i[h]);q3(d)&&(o[d]=fn)}else if(i)for(const h in i){const d=jo(h);if(q3(d)){const p=i[h],m=o[d]=Ke(p)||ut(p)?{type:p}:Ws({},p),w=m.type;let k=!1,P=!0;if(Ke(w))for(let D=0;D<w.length;++D){const M=w[D],V=ut(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=ut(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||tn(m,"default"))&&a.push(d)}}const u=[o,a];return Mn(t)&&s.set(t,u),u}function q3(t){return t[0]!=="$"&&!dw(t)}const sV=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",rV=t=>Ke(t)?t.map(dc):[dc(t)],$Se=(t,e,n)=>{if(e._n)return e;const s=PJ((...r)=>rV(e(...r)),n);return s._c=!1,s},tZ=(t,e,n)=>{const s=t._ctx;for(const r in t){if(sV(r))continue;const i=t[r];if(ut(i))e[r]=$Se(r,i,s);else if(i!=null){const o=rV(i);e[r]=()=>o}}},nZ=(t,e)=>{const n=rV(e);t.slots.default=()=>n},sZ=(t,e,n)=>{for(const s in e)(n||!sV(s))&&(t[s]=e[s])},zSe=(t,e,n)=>{const s=t.slots=XJ();if(t.vnode.shapeFlag&32){const r=e.__;r&&SO(s,"__",r,!0);const i=e._;i?(sZ(s,e,n),n&&SO(s,"_",i,!0)):tZ(e,s)}else e&&nZ(t,e)},HSe=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=fn;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:sZ(r,e,n):(i=!e.$stable,tZ(e,r)),o=e}else e&&(nZ(t,e),o={default:1});if(i)for(const a in r)!sV(a)&&o[a]==null&&delete r[a]},hi=ike;function WSe(t){return KSe(t)}function KSe(t,e){const n=GR();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Sc,insertStaticContent:w}=t,k=(A,T,R,x=null,L=null,U=null,j=void 0,W=null,$=!!T.dynamicChildren)=>{if(A===T)return;A&&!Zf(A,T)&&(x=F(A),ke(A,L,U,!0),A=null),T.patchFlag===-2&&($=!1,T.dynamicChildren=null);const{type:B,ref:Q,shapeFlag:J}=T;switch(B){case iA:P(A,T,R,x);break;case yi:D(A,T,R,x);break;case XP:A==null&&M(T,R,x,j);break;case ko:E(A,T,R,x,L,U,j,W,$);break;default:J&1?H(A,T,R,x,L,U,j,W,$):J&6?b(A,T,R,x,L,U,j,W,$):(J&64||J&128)&&B.process(A,T,R,x,L,U,j,W,$,ee)}Q!=null&&L?mw(Q,A&&A.ref,U,T||A,!T):Q==null&&A&&A.ref!=null&&mw(A.ref,null,U,A,!0)},P=(A,T,R,x)=>{if(A==null)s(T.el=a(T.children),R,x);else{const L=T.el=A.el;T.children!==A.children&&u(L,T.children)}},D=(A,T,R,x)=>{A==null?s(T.el=l(T.children||""),R,x):T.el=A.el},M=(A,T,R,x)=>{[A.el,A.anchor]=w(A.children,T,R,x,A.el,A.anchor)},V=({el:A,anchor:T},R,x)=>{let L;for(;A&&A!==T;)L=p(A),s(A,R,x),A=L;s(T,R,x)},q=({el:A,anchor:T})=>{let R;for(;A&&A!==T;)R=p(A),r(A),A=R;r(T)},H=(A,T,R,x,L,U,j,W,$)=>{T.type==="svg"?j="svg":T.type==="math"&&(j="mathml"),A==null?X(T,R,x,L,U,j,W,$):y(A,T,L,U,j,W,$)},X=(A,T,R,x,L,U,j,W)=>{let $,B;const{props:Q,shapeFlag:J,transition:Z,dirs:te}=A;if($=A.el=o(A.type,U,Q&&Q.is,Q),J&8?h($,A.children):J&16&&v(A.children,$,null,x,L,YP(A,U),j,W),te&&xf(A,null,x,"created"),I($,A,A.scopeId,j,x),Q){for(const re in Q)re!=="value"&&!dw(re)&&i($,re,null,Q[re],U,x);"value"in Q&&i($,"value",null,Q.value,U),(B=Q.onVnodeBeforeMount)&&Ya(B,x,A)}te&&xf(A,null,x,"beforeMount");const ie=GSe(L,Z);ie&&Z.beforeEnter($),s($,T,R),((B=Q&&Q.onVnodeMounted)||ie||te)&&hi(()=>{B&&Ya(B,x,A),ie&&Z.enter($),te&&xf(A,null,x,"mounted")},L)},I=(A,T,R,x,L)=>{if(R&&m(A,R),x)for(let U=0;U<x.length;U++)m(A,x[U]);if(L){let U=L.subTree;if(T===U||cZ(U.type)&&(U.ssContent===T||U.ssFallback===T)){const j=L.vnode;I(A,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(A,T,R,x,L,U,j,W,$=0)=>{for(let B=$;B<A.length;B++){const Q=A[B]=W?Lh(A[B]):dc(A[B]);k(null,Q,T,R,x,L,U,j,W)}},y=(A,T,R,x,L,U,j)=>{const W=T.el=A.el;let{patchFlag:$,dynamicChildren:B,dirs:Q}=T;$|=A.patchFlag&16;const J=A.props||fn,Z=T.props||fn;let te;if(R&&Of(R,!1),(te=Z.onVnodeBeforeUpdate)&&Ya(te,R,T,A),Q&&xf(T,A,R,"beforeUpdate"),R&&Of(R,!0),(J.innerHTML&&Z.innerHTML==null||J.textContent&&Z.textContent==null)&&h(W,""),B?C(A.dynamicChildren,B,W,R,x,YP(T,L),U):j||we(A,T,W,null,R,x,YP(T,L),U,!1),$>0){if($&16)S(W,J,Z,R,L);else if($&2&&J.class!==Z.class&&i(W,"class",null,Z.class,L),$&4&&i(W,"style",J.style,Z.style,L),$&8){const ie=T.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],be=J[se],De=Z[se];(De!==be||se==="value")&&i(W,se,be,De,L,R)}}$&1&&A.children!==T.children&&h(W,T.children)}else!j&&B==null&&S(W,J,Z,R,L);((te=Z.onVnodeUpdated)||Q)&&hi(()=>{te&&Ya(te,R,T,A),Q&&xf(T,A,R,"updated")},x)},C=(A,T,R,x,L,U,j)=>{for(let W=0;W<T.length;W++){const $=A[W],B=T[W],Q=$.el&&($.type===ko||!Zf($,B)||$.shapeFlag&198)?d($.el):R;k($,B,Q,null,x,L,U,j,!0)}},S=(A,T,R,x,L)=>{if(T!==R){if(T!==fn)for(const U in T)!dw(U)&&!(U in R)&&i(A,U,T[U],null,L,x);for(const U in R){if(dw(U))continue;const j=R[U],W=T[U];j!==W&&U!=="value"&&i(A,U,W,j,L,x)}"value"in R&&i(A,"value",T.value,R.value,L)}},E=(A,T,R,x,L,U,j,W,$)=>{const B=T.el=A?A.el:a(""),Q=T.anchor=A?A.anchor:a("");let{patchFlag:J,dynamicChildren:Z,slotScopeIds:te}=T;te&&(W=W?W.concat(te):te),A==null?(s(B,R,x),s(Q,R,x),v(T.children||[],R,Q,L,U,j,W,$)):J>0&&J&64&&Z&&A.dynamicChildren?(C(A.dynamicChildren,Z,R,L,U,j,W),(T.key!=null||L&&T===L.subTree)&&iV(A,T,!0)):we(A,T,R,Q,L,U,j,W,$)},b=(A,T,R,x,L,U,j,W,$)=>{T.slotScopeIds=W,A==null?T.shapeFlag&512?L.ctx.activate(T,R,x,j,$):K(T,R,x,L,U,j,$):ne(A,T,$)},K=(A,T,R,x,L,U,j)=>{const W=A.component=fke(A,x,L);if(ZR(A)&&(W.ctx.renderer=ee),pke(W,!1,j),W.asyncDep){if(L&&L.registerDep(W,de,j),!A.el){const $=W.subTree=Zr(yi);D(null,$,T,R),A.placeholder=$.el}}else de(W,A,T,R,L,U,j)},ne=(A,T,R)=>{const x=T.component=A.component;if(ske(A,T,R))if(x.asyncDep&&!x.asyncResolved){ce(x,T,R);return}else x.next=T,x.update();else T.el=A.el,x.vnode=T},de=(A,T,R,x,L,U,j)=>{const W=()=>{if(A.isMounted){let{next:J,bu:Z,u:te,parent:ie,vnode:re}=A;{const yt=rZ(A);if(yt){J&&(J.el=re.el,ce(A,J,j)),yt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let se=J,be;Of(A,!1),J?(J.el=re.el,ce(A,J,j)):J=re,Z&&$P(Z),(be=J.props&&J.props.onVnodeBeforeUpdate)&&Ya(be,ie,J,re),Of(A,!0);const De=B3(A),rt=A.subTree;A.subTree=De,k(rt,De,d(rt.el),F(rt),A,L,U),J.el=De.el,se===null&&rke(A,De.el),te&&hi(te,L),(be=J.props&&J.props.onVnodeUpdated)&&hi(()=>Ya(be,ie,J,re),L)}else{let J;const{el:Z,props:te}=T,{bm:ie,m:re,parent:se,root:be,type:De}=A,rt=_w(T);Of(A,!1),ie&&$P(ie),!rt&&(J=te&&te.onVnodeBeforeMount)&&Ya(J,se,T),Of(A,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(De);const yt=A.subTree=B3(A);k(null,yt,R,x,A,L,U),T.el=yt.el}if(re&&hi(re,L),!rt&&(J=te&&te.onVnodeMounted)){const yt=T;hi(()=>Ya(J,se,yt),L)}(T.shapeFlag&256||se&&_w(se.vnode)&&se.vnode.shapeFlag&256)&&A.a&&hi(A.a,L),A.isMounted=!0,T=R=x=null}};A.scope.on();const $=A.effect=new cJ(W);A.scope.off();const B=A.update=$.run.bind($),Q=A.job=$.runIfDirty.bind($);Q.i=A,Q.id=A.uid,$.scheduler=()=>ZF(Q),Of(A,!0),B()},ce=(A,T,R)=>{T.component=A;const x=A.vnode.props;A.vnode=T,A.next=null,jSe(A,T.props,x,R),HSe(A,T.children,R),Yl(),P3(A),Xl()},we=(A,T,R,x,L,U,j,W,$=!1)=>{const B=A&&A.children,Q=A?A.shapeFlag:0,J=T.children,{patchFlag:Z,shapeFlag:te}=T;if(Z>0){if(Z&128){It(B,J,R,x,L,U,j,W,$);return}else if(Z&256){Ht(B,J,R,x,L,U,j,W,$);return}}te&8?(Q&16&&ct(B,L,U),J!==B&&h(R,J)):Q&16?te&16?It(B,J,R,x,L,U,j,W,$):ct(B,L,U,!0):(Q&8&&h(R,""),te&16&&v(J,R,x,L,U,j,W,$))},Ht=(A,T,R,x,L,U,j,W,$)=>{A=A||km,T=T||km;const B=A.length,Q=T.length,J=Math.min(B,Q);let Z;for(Z=0;Z<J;Z++){const te=T[Z]=$?Lh(T[Z]):dc(T[Z]);k(A[Z],te,R,null,L,U,j,W,$)}B>Q?ct(A,L,U,!0,!1,J):v(T,R,x,L,U,j,W,$,J)},It=(A,T,R,x,L,U,j,W,$)=>{let B=0;const Q=T.length;let J=A.length-1,Z=Q-1;for(;B<=J&&B<=Z;){const te=A[B],ie=T[B]=$?Lh(T[B]):dc(T[B]);if(Zf(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;B++}for(;B<=J&&B<=Z;){const te=A[J],ie=T[Z]=$?Lh(T[Z]):dc(T[Z]);if(Zf(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;J--,Z--}if(B>J){if(B<=Z){const te=Z+1,ie=te<Q?T[te].el:x;for(;B<=Z;)k(null,T[B]=$?Lh(T[B]):dc(T[B]),R,ie,L,U,j,W,$),B++}}else if(B>Z)for(;B<=J;)ke(A[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const _t=T[B]=$?Lh(T[B]):dc(T[B]);_t.key!=null&&re.set(_t.key,B)}let se,be=0;const De=Z-ie+1;let rt=!1,yt=0;const mt=new Array(De);for(B=0;B<De;B++)mt[B]=0;for(B=te;B<=J;B++){const _t=A[B];if(be>=De){ke(_t,L,U,!0);continue}let Ye;if(_t.key!=null)Ye=re.get(_t.key);else for(se=ie;se<=Z;se++)if(mt[se-ie]===0&&Zf(_t,T[se])){Ye=se;break}Ye===void 0?ke(_t,L,U,!0):(mt[Ye-ie]=B+1,Ye>=yt?yt=Ye:rt=!0,k(_t,T[Ye],R,null,L,U,j,W,$),be++)}const us=rt?QSe(mt):km;for(se=us.length-1,B=De-1;B>=0;B--){const _t=ie+B,Ye=T[_t],Wn=T[_t+1],Ri=_t+1<Q?Wn.el||Wn.placeholder:x;mt[B]===0?k(null,Ye,R,Ri,L,U,j,W,$):rt&&(se<0||B!==us[se]?xt(Ye,R,Ri,2):se--)}}},xt=(A,T,R,x,L=null)=>{const{el:U,type:j,transition:W,children:$,shapeFlag:B}=A;if(B&6){xt(A.component.subTree,T,R,x);return}if(B&128){A.suspense.move(T,R,x);return}if(B&64){j.move(A,T,R,ee);return}if(j===ko){s(U,T,R);for(let Q=0;Q<$.length;Q++)xt($[Q],T,R,x);s(A.anchor,T,R);return}if(j===XP){V(A,T,R);return}if(x!==2&&B&1&&W)if(x===0)W.beforeEnter(U),s(U,T,R),hi(()=>W.enter(U),L);else{const{leave:Q,delayLeave:J,afterLeave:Z}=W,te=()=>{A.ctx.isUnmounted?r(U):s(U,T,R)},ie=()=>{Q(U,()=>{te(),Z&&Z()})};J?J(U,te,ie):ie()}else s(U,T,R)},ke=(A,T,R,x=!1,L=!1)=>{const{type:U,props:j,ref:W,children:$,dynamicChildren:B,shapeFlag:Q,patchFlag:J,dirs:Z,cacheIndex:te}=A;if(J===-2&&(L=!1),W!=null&&(Yl(),mw(W,null,R,A,!0),Xl()),te!=null&&(T.renderCache[te]=void 0),Q&256){T.ctx.deactivate(A);return}const ie=Q&1&&Z,re=!_w(A);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&Ya(se,T,A),Q&6)Kt(A.component,R,x);else{if(Q&128){A.suspense.unmount(R,x);return}ie&&xf(A,null,T,"beforeUnmount"),Q&64?A.type.remove(A,T,R,ee,x):B&&!B.hasOnce&&(U!==ko||J>0&&J&64)?ct(B,T,R,!1,!0):(U===ko&&J&384||!L&&Q&16)&&ct($,T,R),x&&Ee(A)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&hi(()=>{se&&Ya(se,T,A),ie&&xf(A,null,T,"unmounted")},R)},Ee=A=>{const{type:T,el:R,anchor:x,transition:L}=A;if(T===ko){yn(R,x);return}if(T===XP){q(A);return}const U=()=>{r(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:W}=L,$=()=>j(R,U);W?W(A.el,U,$):$()}else U()},yn=(A,T)=>{let R;for(;A!==T;)R=p(A),r(A),A=R;r(T)},Kt=(A,T,R)=>{const{bum:x,scope:L,job:U,subTree:j,um:W,m:$,a:B,parent:Q,slots:{__:J}}=A;j3($),j3(B),x&&$P(x),Q&&Ke(J)&&J.forEach(Z=>{Q.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,ke(j,A,T,R)),W&&hi(W,T),hi(()=>{A.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ct=(A,T,R,x=!1,L=!1,U=0)=>{for(let j=U;j<A.length;j++)ke(A[j],T,R,x,L)},F=A=>{if(A.shapeFlag&6)return F(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const T=p(A.anchor||A.el),R=T&&T[NJ];return R?p(R):T};let Y=!1;const G=(A,T,R)=>{A==null?T._vnode&&ke(T._vnode,null,null,!0):k(T._vnode||null,A,T,null,null,null,R),T._vnode=A,Y||(Y=!0,P3(),kJ(),Y=!1)},ee={p:k,um:ke,m:xt,r:Ee,mt:K,mc:v,pc:we,pbc:C,n:F,o:t};return{render:G,hydrate:void 0,createApp:VSe(G)}}function YP({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Of({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function GSe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function iV(t,e,n=!1){const s=t.children,r=e.children;if(Ke(s)&&Ke(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Lh(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&iV(o,a)),a.type===iA&&(a.el=o.el),a.type===yi&&!a.el&&(a.el=o.el)}}function QSe(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function rZ(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:rZ(e)}function j3(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const YSe=Symbol.for("v-scx"),XSe=()=>wo(YSe);function Pm(t,e,n){return iZ(t,e,n)}function iZ(t,e,n=fn){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ws({},n),l=e&&s||!e&&i!=="post";let u;if(jb){if(i==="sync"){const m=XSe();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Sc,m.resume=Sc,m.pause=Sc,m}}const h=Xr;a.call=(m,w,k)=>za(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{hi(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():ZF(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=pSe(t,e,a);return jb&&(u?u.push(p):l&&p()),p}function JSe(t,e,n){const s=this.proxy,r=ns(t)?t.includes(".")?oZ(s,t):()=>s[t]:t.bind(s,s);let i;ut(e)?i=e:(i=e.handler,n=e);const o=fT(this),a=iZ(r,i.bind(s),n);return o(),a}function oZ(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const ZSe=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${jo(e)}Modifiers`]||t[`${_g(e)}Modifiers`];function eke(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||fn;let r=n;const i=e.startsWith("update:"),o=i&&ZSe(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ns(h)?h.trim():h)),o.number&&(r=n.map(P0e)));let a,l=s[a=BP(e)]||s[a=BP(jo(e))];!l&&i&&(l=s[a=BP(_g(e))]),l&&za(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,za(u,t,6,r)}}function aZ(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ut(t)){const l=u=>{const h=aZ(u,e,!0);h&&(a=!0,Ws(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Mn(t)&&s.set(t,null),null):(Ke(i)?i.forEach(l=>o[l]=null):Ws(o,i),Mn(t)&&s.set(t,o),o)}function rA(t,e){return!t||!zR(e)?!1:(e=e.slice(2).replace(/Once$/,""),tn(t,e[0].toLowerCase()+e.slice(1))||tn(t,_g(e))||tn(t,e))}function B3(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=K0(t);let D,M;try{if(n.shapeFlag&4){const q=r||s,H=q;D=dc(u.call(H,q,h,d,m,p,w)),M=a}else{const q=e;D=dc(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:tke(a)}}catch(q){ww.length=0,JR(q,t,1),D=Zr(yi)}let V=D;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(jF)&&(M=nke(M,i)),V=Vd(V,M,!1,!0))}return n.dirs&&(V=Vd(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Wp(V,n.transition),D=V,K0(P),D}const tke=t=>{let e;for(const n in t)(n==="class"||n==="style"||zR(n))&&((e||(e={}))[n]=t[n]);return e},nke=(t,e)=>{const n={};for(const s in t)(!jF(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function ske(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?$3(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!rA(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?$3(s,o,u):!0:!!o;return!1}function $3(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!rA(n,i))return!0}return!1}function rke({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const cZ=t=>t.__isSuspense;function ike(t,e){e&&e.pendingBranch?Ke(t)?e.effects.push(...t):e.effects.push(t):_Se(t)}const ko=Symbol.for("v-fgt"),iA=Symbol.for("v-txt"),yi=Symbol.for("v-cmt"),XP=Symbol.for("v-stc"),ww=[];let go=null;function oV(t=!1){ww.push(go=t?null:[])}function oke(){ww.pop(),go=ww[ww.length-1]||null}let qb=1;function z3(t,e=!1){qb+=t,t<0&&go&&e&&(go.hasOnce=!0)}function lZ(t){return t.dynamicChildren=qb>0?go||km:null,oke(),qb>0&&go&&go.push(t),t}function uZ(t,e,n,s,r,i){return lZ(aV(t,e,n,s,r,i,!0))}function hZ(t,e,n,s,r){return lZ(Zr(t,e,n,s,r,!0))}function Q0(t){return t?t.__v_isVNode===!0:!1}function Zf(t,e){return t.type===e.type&&t.key===e.key}const dZ=({key:t})=>t??null,fI=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ns(t)||ir(t)||ut(t)?{i:po,r:t,k:e,f:!!n}:t:null);function aV(t,e=null,n=null,s=0,r=null,i=t===ko?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&dZ(e),ref:e&&fI(e),scopeId:AJ,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:po};return a?(cV(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=ns(n)?8:16),qb>0&&!o&&go&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&go.push(l),l}const Zr=ake;function ake(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===RSe)&&(t=yi),Q0(t)){const a=Vd(t,e,!0);return n&&cV(a,n),qb>0&&!i&&go&&(a.shapeFlag&6?go[go.indexOf(t)]=a:go.push(a)),a.patchFlag=-2,a}if(vke(t)&&(t=t.__vccOpts),e){e=cke(e);let{class:a,style:l}=e;a&&!ns(a)&&(e.class=YR(a)),Mn(l)&&(XF(l)&&!Ke(l)&&(l=Ws({},l)),e.style=QR(l))}const o=ns(t)?1:cZ(t)?128:xJ(t)?64:Mn(t)?4:ut(t)?2:0;return aV(t,e,n,s,r,o,i,!0)}function cke(t){return t?XF(t)||JJ(t)?Ws({},t):t:null}function Vd(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?uke(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&dZ(u),ref:e&&e.ref?n&&i?Ke(i)?i.concat(fI(e)):[i,fI(e)]:fI(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ko?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Vd(t.ssContent),ssFallback:t.ssFallback&&Vd(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Wp(h,l.clone(h)),h}function fZ(t=" ",e=0){return Zr(iA,null,t,e)}function lke(t="",e=!1){return e?(oV(),hZ(yi,null,t)):Zr(yi,null,t)}function dc(t){return t==null||typeof t=="boolean"?Zr(yi):Ke(t)?Zr(ko,null,t.slice()):Q0(t)?Lh(t):Zr(iA,null,String(t))}function Lh(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Vd(t)}function cV(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Ke(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),cV(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!JJ(e)?e._ctx=po:r===3&&po&&(po.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ut(e)?(e={default:e,_ctx:po},n=32):(e=String(e),s&64?(n=16,e=[fZ(e)]):n=8);t.children=e,t.shapeFlag|=n}function uke(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=YR([e.class,s.class]));else if(r==="style")e.style=QR([e.style,s.style]);else if(zR(r)){const i=e[r],o=s[r];o&&i!==o&&!(Ke(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ya(t,e,n,s=null){za(t,e,7,[n,s])}const hke=QJ();let dke=0;function fke(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||hke,i={uid:dke++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new oJ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:eZ(s,r),emitsOptions:aZ(s,r),emit:null,emitted:null,propsDefaults:fn,inheritAttrs:s.inheritAttrs,ctx:fn,data:fn,props:fn,attrs:fn,slots:fn,refs:fn,setupState:fn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=eke.bind(null,i),t.ce&&t.ce(i),i}let Xr=null;const wf=()=>Xr||po;let Y0,LO;{const t=GR(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Y0=e("__VUE_INSTANCE_SETTERS__",n=>Xr=n),LO=e("__VUE_SSR_SETTERS__",n=>jb=n)}const fT=t=>{const e=Xr;return Y0(t),t.scope.on(),()=>{t.scope.off(),Y0(e)}},H3=()=>{Xr&&Xr.scope.off(),Y0(null)};function pZ(t){return t.vnode.shapeFlag&4}let jb=!1;function pke(t,e=!1,n=!1){e&&LO(e);const{props:s,children:r}=t.vnode,i=pZ(t);qSe(t,s,i,e),zSe(t,r,n||e);const o=i?gke(t,e):void 0;return e&&LO(!1),o}function gke(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,NSe);const{setup:s}=n;if(s){Yl();const r=t.setupContext=s.length>1?_ke(t):null,i=fT(t),o=hT(s,t,0,[t.props,r]),a=ZX(o);if(Xl(),i(),(a||t.sp)&&!_w(t)&&qJ(t),a){if(o.then(H3,H3),e)return o.then(l=>{W3(t,l)}).catch(l=>{JR(l,t,0)});t.asyncDep=o}else W3(t,o)}else gZ(t)}function W3(t,e,n){ut(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Mn(e)&&(t.setupState=CJ(e)),gZ(t)}function gZ(t,e,n){const s=t.type;t.render||(t.render=s.render||Sc);{const r=fT(t);Yl();try{xSe(t)}finally{Xl(),r()}}}const mke={get(t,e){return zr(t,"get",""),t[e]}};function _ke(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,mke),slots:t.slots,emit:t.emit,expose:e}}function oA(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(CJ(J_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in yw)return yw[n](t)},has(e,n){return n in e||n in yw}})):t.proxy}function yke(t,e=!0){return ut(t)?t.displayName||t.name:t.name||e&&t.__name}function vke(t){return ut(t)&&"__vccOpts"in t}const Oe=(t,e)=>dSe(t,e,jb);function Je(t,e,n){const s=arguments.length;return s===2?Mn(e)&&!Ke(e)?Q0(e)?Zr(t,null,[e]):Zr(t,e):Zr(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Q0(n)&&(n=[n]),Zr(t,e,n))}const wke="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let MO;const K3=typeof window<"u"&&window.trustedTypes;if(K3)try{MO=K3.createPolicy("vue",{createHTML:t=>t})}catch{}const mZ=MO?t=>MO.createHTML(t):t=>t,bke="http://www.w3.org/2000/svg",Eke="http://www.w3.org/1998/Math/MathML",pl=typeof document<"u"?document:null,G3=pl&&pl.createElement("template"),Tke={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?pl.createElementNS(bke,t):e==="mathml"?pl.createElementNS(Eke,t):n?pl.createElement(t,{is:n}):pl.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>pl.createTextNode(t),createComment:t=>pl.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>pl.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{G3.innerHTML=mZ(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=G3.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_h="transition",tv="animation",u_=Symbol("_vtc"),_Z={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yZ=Ws({},MJ,_Z),Cke=t=>(t.displayName="Transition",t.props=yZ,t),vZ=Cke((t,{slots:e})=>Je(bSe,wZ(t),e)),Df=(t,e=[])=>{Ke(t)?t.forEach(n=>n(...e)):t&&t(...e)},Q3=t=>t?Ke(t)?t.some(e=>e.length>1):t.length>1:!1;function wZ(t){const e={};for(const E in t)E in _Z||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=Ike(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:D,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:X=D,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Ch(E,b?h:a),Ch(E,b?u:o),K&&K()},C=(E,b)=>{E._isLeaving=!1,Ch(E,d),Ch(E,m),Ch(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,de=()=>y(b,E,K);Df(ne,[b,de]),Y3(()=>{Ch(b,E?l:i),tc(b,E?h:a),Q3(ne)||X3(b,s,k,de)})};return Ws(e,{onBeforeEnter(E){Df(D,[E]),tc(E,i),tc(E,o)},onBeforeAppear(E){Df(X,[E]),tc(E,l),tc(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>C(E,b);tc(E,d),E._enterCancelled?(tc(E,p),FO()):(FO(),tc(E,p)),Y3(()=>{E._isLeaving&&(Ch(E,d),tc(E,m),Q3(q)||X3(E,s,P,K))}),Df(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),Df(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Df(v,[E])},onLeaveCancelled(E){C(E),Df(H,[E])}})}function Ike(t){if(t==null)return null;if(Mn(t))return[JP(t.enter),JP(t.leave)];{const e=JP(t);return[e,e]}}function JP(t){return N0e(t)}function tc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[u_]||(t[u_]=new Set)).add(e)}function Ch(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[u_];n&&(n.delete(e),n.size||(t[u_]=void 0))}function Y3(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Ske=0;function X3(t,e,n,s){const r=t._endId=++Ske,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=bZ(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function bZ(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${_h}Delay`),i=s(`${_h}Duration`),o=J3(r,i),a=s(`${tv}Delay`),l=s(`${tv}Duration`),u=J3(a,l);let h=null,d=0,p=0;e===_h?o>0&&(h=_h,d=o,p=i.length):e===tv?u>0&&(h=tv,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?_h:tv:null,p=h?h===_h?i.length:l.length:0);const m=h===_h&&/\b(transform|all)(,|$)/.test(s(`${_h}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function J3(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Z3(n)+Z3(t[s])))}function Z3(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function FO(){return document.body.offsetHeight}function kke(t,e,n){const s=t[u_];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const X0=Symbol("_vod"),EZ=Symbol("_vsh"),Rke={beforeMount(t,{value:e},{transition:n}){t[X0]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):nv(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),nv(t,!0),s.enter(t)):s.leave(t,()=>{nv(t,!1)}):nv(t,e))},beforeUnmount(t,{value:e}){nv(t,e)}};function nv(t,e){t.style.display=e?t[X0]:"none",t[EZ]=!e}const Ake=Symbol(""),Pke=/(^|;)\s*display\s*:/;function Nke(t,e,n){const s=t.style,r=ns(n);let i=!1;if(n&&!r){if(e)if(ns(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&pI(s,a,"")}else for(const o in e)n[o]==null&&pI(s,o,"");for(const o in n)o==="display"&&(i=!0),pI(s,o,n[o])}else if(r){if(e!==n){const o=s[Ake];o&&(n+=";"+o),s.cssText=n,i=Pke.test(n)}}else e&&t.removeAttribute("style");X0 in t&&(t[X0]=i?s.display:"",t[EZ]&&(s.display="none"))}const eB=/\s*!important$/;function pI(t,e,n){if(Ke(n))n.forEach(s=>pI(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=xke(t,e);eB.test(n)?t.setProperty(_g(s),n.replace(eB,""),"important"):t[s]=n}}const tB=["Webkit","Moz","ms"],ZP={};function xke(t,e){const n=ZP[e];if(n)return n;let s=jo(e);if(s!=="filter"&&s in t)return ZP[e]=s;s=KR(s);for(let r=0;r<tB.length;r++){const i=tB[r]+s;if(i in t)return ZP[e]=i}return e}const nB="http://www.w3.org/1999/xlink";function sB(t,e,n,s,r,i=F0e(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(nB,e.slice(6,e.length)):t.setAttributeNS(nB,e,n):n==null||i&&!nJ(n)?t.removeAttribute(e):t.setAttribute(e,i?"":vf(n)?String(n):n)}function rB(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?mZ(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=nJ(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Oke(t,e,n,s){t.addEventListener(e,n,s)}function Dke(t,e,n,s){t.removeEventListener(e,n,s)}const iB=Symbol("_vei");function Lke(t,e,n,s,r=null){const i=t[iB]||(t[iB]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=Mke(e);if(s){const u=i[e]=Uke(s,r);Oke(t,a,u,l)}else o&&(Dke(t,a,o,l),i[e]=void 0)}}const oB=/(?:Once|Passive|Capture)$/;function Mke(t){let e;if(oB.test(t)){e={};let n;for(;n=t.match(oB);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_g(t.slice(2)),e]}let eN=0;const Fke=Promise.resolve(),Vke=()=>eN||(Fke.then(()=>eN=0),eN=Date.now());function Uke(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;za(qke(s,n.value),e,5,[s])};return n.value=t,n.attached=Vke(),n}function qke(t,e){if(Ke(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const aB=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,jke=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?kke(t,s,o):e==="style"?Nke(t,n,s):zR(e)?jF(e)||Lke(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Bke(t,e,s,o))?(rB(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&sB(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ns(s))?rB(t,jo(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),sB(t,e,s,o))};function Bke(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&aB(e)&&ut(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return aB(e)&&ns(n)?!1:e in t}const TZ=new WeakMap,CZ=new WeakMap,J0=Symbol("_moveCb"),cB=Symbol("_enterCb"),$ke=t=>(delete t.props.mode,t),zke=$ke({name:"TransitionGroup",props:Ws({},yZ,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=wf(),s=LJ();let r,i;return nV(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Qke(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Wke),r.forEach(Kke);const a=r.filter(Gke);FO(),a.forEach(l=>{const u=l.el,h=u.style;tc(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[J0]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[J0]=null,Ch(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=zt(t),a=wZ(o);let l=o.tag||ko;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),Wp(h,Ub(h,a,s,n)),TZ.set(h,h.el.getBoundingClientRect()))}i=e.default?tV(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&Wp(h,Ub(h,a,s,n))}return Zr(l,null,i)}}}),Hke=zke;function Wke(t){const e=t.el;e[J0]&&e[J0](),e[cB]&&e[cB]()}function Kke(t){CZ.set(t,t.el.getBoundingClientRect())}function Gke(t){const e=TZ.get(t),n=CZ.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function Qke(t,e,n){const s=t.cloneNode(),r=t[u_];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=bZ(s);return i.removeChild(s),o}const Yke=["ctrl","shift","alt","meta"],Xke={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Yke.some(n=>t[`${n}Key`]&&!e.includes(n))},Jke=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Xke[e[o]];if(a&&a(r,e))return}return t(r,...i)})},Zke=Ws({patchProp:jke},Tke);let lB;function eRe(){return lB||(lB=WSe(Zke))}const IZ=(...t)=>{const e=eRe().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=nRe(s);if(!r)return;const i=e._component;!ut(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,tRe(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function tRe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function nRe(t){return ns(t)?document.querySelector(t):t}function pT(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function sRe(t,e){for(const n in e)pT(t,n,e[n]);return t}const Ud=Jl(!1);let VO;function rRe(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function iRe(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const SZ="ontouchstart"in window||window.navigator.maxTouchPoints>0;function oRe(t){const e=t.toLowerCase(),n=iRe(e),s=rRe(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Ud.value===!0&&(VO={is:{...r}}),SZ===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const uB=navigator.userAgent||navigator.vendor||window.opera,aRe={has:{touch:!1,webStorage:!1},within:{iframe:!1}},xa={userAgent:uB,is:oRe(uB),has:{touch:SZ},within:{iframe:window.self!==window.top}},Z0={install(t){const{$q:e}=t;Ud.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,xa),Ud.value=!1}),e.platform=yg(this)):e.platform=this}};{let t;pT(xa.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(Z0,xa),Ud.value===!0&&(Object.assign(Z0,VO,aRe),VO=null)}function Z_(t){return J_(dT(t))}function kZ(t){return J_(t)}const aA=(t,e)=>{const n=yg(t);for(const s in t)pT(e,s,()=>n[s],r=>{n[s]=r});return e},qd={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(qd,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function h_(){}function cRe(t){return t.button===0}function RZ(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function lRe(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function lV(t){t.stopPropagation()}function eS(t){t.cancelable!==!1&&t.preventDefault()}function Hf(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function uRe(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",eS,qd.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",eS,qd.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function AZ(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],qd[r[3]])})}function PZ(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],qd[s[3]])}),t[n]=void 0)}function NZ(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const tN=["sm","md","lg","xl"],{passive:hB}=qd,hRe=aA({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:h_,setDebounce:h_,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||xa.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{tN.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&tN.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{tN.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,hB),a=p>0?NZ(this.__update,p):this.__update,s.addEventListener("resize",a,hB)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Ud.value===!0?e.push(h):h()}}),Or=aA({isActive:!1,mode:!1},{__media:void 0,set(t){Or.mode=t,t==="auto"?(Or.__media===void 0&&(Or.__media=window.matchMedia("(prefers-color-scheme: dark)"),Or.__updateMedia=()=>{Or.set("auto")},Or.__media.addListener(Or.__updateMedia)),t=Or.__media.matches):Or.__media!==void 0&&(Or.__media.removeListener(Or.__updateMedia),Or.__media=void 0),Or.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Or.set(Or.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function dRe(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let xZ=!1;function fRe(t){xZ=t.isComposing===!0}function OZ(t){return xZ===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function tS(t,e){return OZ(t)===!0?!1:[].concat(e).includes(t.keyCode)}function DZ(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function pRe({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=DZ(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function gRe(){const{is:t}=xa,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=DZ(t);r!==void 0&&n.add(`platform-${r}`)}}xa.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),xa.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function mRe(t){for(const e in t)dRe(e,t[e])}const _Re={install(t){if(this.__installed!==!0){if(Ud.value===!0)gRe();else{const{$q:e}=t;e.config.brand!==void 0&&mRe(e.config.brand);const n=pRe(xa,e.config);document.body.classList.add.apply(document.body.classList,n)}xa.is.ios===!0&&document.body.addEventListener("touchstart",h_),window.addEventListener("keydown",fRe,!0)}}},LZ=()=>!0;function yRe(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function vRe(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function wRe(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return LZ;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(yRe).map(vRe)),()=>e.includes(window.location.hash)}const MZ={__history:[],add:h_,remove:h_,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=xa.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=LZ),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=wRe(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},dB={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function fB(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Mh=aA({__qLang:{}},{getLocale:fB,set(t=dB,e){const n={...t,rtl:t.rtl===!0,getLocale:fB};{if(n.set=Mh.set,Mh.__langConfig===void 0||Mh.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Mh.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Mh.__qLang,Mh.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||dB))}}),bRe={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},nS=aA({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=nS.set,Object.assign(nS.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,pT(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||bRe))}}),FZ="_q_",ERe="_q_l_",TRe="_q_pc_",CRe="_q_fo_";function IRe(){}const sS={};let VZ=!1;function SRe(){VZ=!0}function gI(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(gI(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(gI(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(gI(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function d_(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function kRe(t){return Object.prototype.toString.call(t)==="[object Date]"}function RRe(t){return typeof t=="number"&&isFinite(t)}const pB=[Z0,_Re,Or,hRe,MZ,Mh,nS];function ARe(t,e){const n=IZ(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function gB(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function PRe(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(FZ,n.$q),gB(n,pB),e.components!==void 0&&Object.values(e.components).forEach(s=>{d_(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{d_(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&gB(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&pB.includes(s)===!1)),Ud.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const NRe=function(t,e={}){const n={version:"2.18.2"};VZ===!1?(e.config!==void 0&&Object.assign(sS,e.config),n.config={...sS},SRe()):n.config=e.config||{},PRe(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},xRe={name:"Quasar",version:"2.18.2",install:NRe,lang:Mh,iconSet:nS};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const em=typeof document<"u";function UZ(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ORe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&UZ(t.default)}const Jt=Object.assign;function nN(t,e){const n={};for(const s in e){const r=e[s];n[s]=Ha(r)?r.map(t):t(r)}return n}const bw=()=>{},Ha=Array.isArray,qZ=/#/g,DRe=/&/g,LRe=/\//g,MRe=/=/g,FRe=/\?/g,jZ=/\+/g,VRe=/%5B/g,URe=/%5D/g,BZ=/%5E/g,qRe=/%60/g,$Z=/%7B/g,jRe=/%7C/g,zZ=/%7D/g,BRe=/%20/g;function uV(t){return encodeURI(""+t).replace(jRe,"|").replace(VRe,"[").replace(URe,"]")}function $Re(t){return uV(t).replace($Z,"{").replace(zZ,"}").replace(BZ,"^")}function UO(t){return uV(t).replace(jZ,"%2B").replace(BRe,"+").replace(qZ,"%23").replace(DRe,"%26").replace(qRe,"`").replace($Z,"{").replace(zZ,"}").replace(BZ,"^")}function zRe(t){return UO(t).replace(MRe,"%3D")}function HRe(t){return uV(t).replace(qZ,"%23").replace(FRe,"%3F")}function WRe(t){return t==null?"":HRe(t).replace(LRe,"%2F")}function Bb(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const KRe=/\/$/,GRe=t=>t.replace(KRe,"");function sN(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=JRe(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Bb(o)}}function QRe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function mB(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function YRe(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&f_(e.matched[s],n.matched[r])&&HZ(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function f_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function HZ(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!XRe(t[n],e[n]))return!1;return!0}function XRe(t,e){return Ha(t)?_B(t,e):Ha(e)?_B(e,t):t===e}function _B(t,e){return Ha(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function JRe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const yh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var $b;(function(t){t.pop="pop",t.push="push"})($b||($b={}));var Ew;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ew||(Ew={}));function ZRe(t){if(!t)if(em){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),GRe(t)}const eAe=/^[^#]+#/;function tAe(t,e){return t.replace(eAe,"#")+e}function nAe(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const cA=()=>({left:window.scrollX,top:window.scrollY});function sAe(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=nAe(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function yB(t,e){return(history.state?history.state.position-e:-1)+t}const qO=new Map;function rAe(t,e){qO.set(t,e)}function iAe(t){const e=qO.get(t);return qO.delete(t),e}let oAe=()=>location.protocol+"//"+location.host;function WZ(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),mB(a,"")}return mB(n,t)+s+r}function aAe(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=WZ(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(D=>{D(n.value,w,{delta:P,type:$b.pop,direction:P?P>0?Ew.forward:Ew.back:Ew.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Jt({},p.state,{scroll:cA()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function vB(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?cA():null}}function cAe(t){const{history:e,location:n}=window,s={value:WZ(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:oAe()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=Jt({},e.state,vB(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=Jt({},r.value,e.state,{forward:l,scroll:cA()});i(h.current,h,!0);const d=Jt({},vB(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function lAe(t){t=ZRe(t);const e=cAe(t),n=aAe(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Jt({location:"",base:t,go:s,createHref:tAe.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function uAe(t){return typeof t=="string"||t&&typeof t=="object"}function KZ(t){return typeof t=="string"||typeof t=="symbol"}const GZ=Symbol("");var wB;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(wB||(wB={}));function p_(t,e){return Jt(new Error,{type:t,[GZ]:!0},e)}function al(t,e){return t instanceof Error&&GZ in t&&(e==null||!!(t.type&e))}const bB="[^/]+?",hAe={sensitive:!1,strict:!1,start:!0,end:!0},dAe=/[.+*?^${}()[\]/\\]/g;function fAe(t,e){const n=Jt({},hAe,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(dAe,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:D}=p;i.push({name:w,repeatable:k,optional:P});const M=D||bB;if(M!==bB){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,D=w in u?u[w]:"";if(Ha(D)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Ha(D)?D.join("/"):D;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function pAe(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function QZ(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=pAe(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(EB(s))return 1;if(EB(r))return-1}return r.length-s.length}function EB(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const gAe={type:0,value:""},mAe=/[a-zA-Z0-9_]/;function _Ae(t){if(!t)return[[]];if(t==="/")return[[gAe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:mAe.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function yAe(t,e,n){const s=fAe(_Ae(t.path),n),r=Jt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function vAe(t,e){const n=[],s=new Map;e=SB({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=CB(d);k.aliasOf=m&&m.record;const P=SB(e,d),D=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)D.push(CB(Jt({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of D){const{path:H}=q;if(p&&H[0]!=="/"){const X=p.record.path,I=X[X.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=yAe(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!IB(M)&&o(d.name)),YZ(M)&&l(M),k.children){const X=k.children;for(let I=0;I<X.length;I++)i(X[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:bw}function o(d){if(KZ(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=EAe(d,n);n.splice(p,0,d),d.record.name&&!IB(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw p_(1,{location:d});P=m.record.name,w=Jt(TB(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&TB(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw p_(1,{location:d,currentLocation:p});P=m.record.name,w=Jt({},p.params,d.params),k=m.stringify(w)}const D=[];let M=m;for(;M;)D.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:D,meta:bAe(D)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function TB(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function CB(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:wAe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function wAe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function IB(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function bAe(t){return t.reduce((e,n)=>Jt(e,n.meta),{})}function SB(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function EAe(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;QZ(t,e[i])<0?s=i:n=i+1}const r=TAe(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function TAe(t){let e=t;for(;e=e.parent;)if(YZ(e)&&QZ(t,e)===0)return e}function YZ({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function CAe(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(jZ," "),i=r.indexOf("="),o=Bb(i<0?r:r.slice(0,i)),a=i<0?null:Bb(r.slice(i+1));if(o in e){let l=e[o];Ha(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function kB(t){let e="";for(let n in t){const s=t[n];if(n=zRe(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ha(s)?s.map(r=>r&&UO(r)):[s&&UO(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function IAe(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Ha(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const SAe=Symbol(""),RB=Symbol(""),lA=Symbol(""),hV=Symbol(""),jO=Symbol("");function sv(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Fh(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(p_(4,{from:n,to:e})):p instanceof Error?l(p):uAe(p)?l(p_(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function rN(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(UZ(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Fh(u,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=ORe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Fh(p,n,s,o,a,r)()}))}}return i}function AB(t){const e=wo(lA),n=wo(hV),s=Oe(()=>{const l=cd(t.to);return e.resolve(l)}),r=Oe(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(f_.bind(null,h));if(p>-1)return p;const m=PB(l[u-2]);return u>1&&PB(h)===m&&d[d.length-1].path!==m?d.findIndex(f_.bind(null,l[u-2])):p}),i=Oe(()=>r.value>-1&&NAe(n.params,s.value.params)),o=Oe(()=>r.value>-1&&r.value===n.matched.length-1&&HZ(n.params,s.value.params));function a(l={}){if(PAe(l)){const u=e[cd(t.replace)?"replace":"push"](cd(t.to)).catch(bw);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Oe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function kAe(t){return t.length===1?t[0]:t}const RAe=dT({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:AB,setup(t,{slots:e}){const n=yg(AB(t)),{options:s}=wo(lA),r=Oe(()=>({[NB(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[NB(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&kAe(e.default(n));return t.custom?i:Je("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),AAe=RAe;function PAe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function NAe(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Ha(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function PB(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const NB=(t,e,n)=>t??e??n,xAe=dT({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=wo(jO),r=Oe(()=>t.route||s.value),i=wo(RB,0),o=Oe(()=>{let u=cd(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=Oe(()=>r.value.matched[o.value]);vw(RB,Oe(()=>o.value+1)),vw(SAe,a),vw(jO,r);const l=Jl();return Pm(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!f_(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return xB(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Je(p,Jt({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return xB(n.default,{Component:k,route:u})||k}}});function xB(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const OAe=xAe;function DAe(t){const e=vAe(t.routes,t),n=t.parseQuery||CAe,s=t.stringifyQuery||kB,r=t.history,i=sv(),o=sv(),a=sv(),l=iSe(yh);let u=yh;em&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=nN.bind(null,F=>""+F),d=nN.bind(null,WRe),p=nN.bind(null,Bb);function m(F,Y){let G,ee;return KZ(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function D(F,Y){if(Y=Jt({},Y||l.value),typeof F=="string"){const x=sN(n,F,Y.path),L=e.resolve({path:x.path},Y),U=r.createHref(x.fullPath);return Jt(x,L,{params:p(L.params),hash:Bb(x.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Jt({},F,{path:sN(n,F.path,Y.path).path});else{const x=Jt({},F.params);for(const L in x)x[L]==null&&delete x[L];G=Jt({},F,{params:d(x)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const T=QRe(s,Jt({},F,{hash:$Re(A),path:ee.path})),R=r.createHref(T);return Jt({fullPath:T,hash:A,query:s===kB?IAe(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?sN(n,F,l.value.path):Jt({},F)}function V(F,Y){if(u!==F)return p_(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Jt(M(F),{replace:!0}))}function X(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Jt({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=u=D(F),ee=l.value,A=F.state,T=F.force,R=F.replace===!0,x=X(G);if(x)return I(Jt(M(x),{state:typeof x=="object"?Jt({},A,x.state):A,force:T,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!T&&YRe(s,ee,G)&&(U=p_(16,{to:L,from:ee}),xt(ee,ee,!0,!1)),(U?Promise.resolve(U):C(L,ee)).catch(j=>al(j)?al(j,2)?j:It(j):we(j,L,ee)).then(j=>{if(j){if(al(j,2))return I(Jt({replace:R},M(j.to),{state:typeof j.to=="object"?Jt({},A,j.to.state):A,force:T}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=yn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function C(F,Y){let G;const[ee,A,T]=LAe(F,Y);G=rN(ee.reverse(),"beforeRouteLeave",F,Y);for(const x of ee)x.leaveGuards.forEach(L=>{G.push(Fh(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),ct(G).then(()=>{G=[];for(const x of i.list())G.push(Fh(x,F,Y));return G.push(R),ct(G)}).then(()=>{G=rN(A,"beforeRouteUpdate",F,Y);for(const x of A)x.updateGuards.forEach(L=>{G.push(Fh(L,F,Y))});return G.push(R),ct(G)}).then(()=>{G=[];for(const x of T)if(x.beforeEnter)if(Ha(x.beforeEnter))for(const L of x.beforeEnter)G.push(Fh(L,F,Y));else G.push(Fh(x.beforeEnter,F,Y));return G.push(R),ct(G)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),G=rN(T,"beforeRouteEnter",F,Y,y),G.push(R),ct(G))).then(()=>{G=[];for(const x of o.list())G.push(Fh(x,F,Y));return G.push(R),ct(G)}).catch(x=>al(x,8)?x:Promise.reject(x))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const T=V(F,Y);if(T)return T;const R=Y===yh,x=em?history.state:{};G&&(ee||R?r.replace(F.fullPath,Jt({scroll:R&&x&&x.scroll},A)):r.push(F.fullPath,A)),l.value=F,xt(F,Y,G,R),It()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Kt.listening)return;const ee=D(F),A=X(ee);if(A){I(Jt(A,{replace:!0,force:!0}),ee).catch(bw);return}u=ee;const T=l.value;em&&rAe(yB(T.fullPath,G.delta),cA()),C(ee,T).catch(R=>al(R,12)?R:al(R,2)?(I(Jt(M(R.to),{force:!0}),ee).then(x=>{al(x,20)&&!G.delta&&G.type===$b.pop&&r.go(-1,!1)}).catch(bw),Promise.reject()):(G.delta&&r.go(-G.delta,!1),we(R,ee,T))).then(R=>{R=R||E(ee,T,!1),R&&(G.delta&&!al(R,8)?r.go(-G.delta,!1):G.type===$b.pop&&al(R,20)&&r.go(-1,!1)),S(ee,T,R)}).catch(bw)}))}let ne=sv(),de=sv(),ce;function we(F,Y,G){It(F);const ee=de.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Ht(){return ce&&l.value!==yh?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function It(F){return ce||(ce=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function xt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!em||!A)return Promise.resolve();const T=!G&&iAe(yB(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return JF().then(()=>A(F,Y,T)).then(R=>R&&sAe(R)).catch(R=>we(R,F,Y))}const ke=F=>r.go(F);let Ee;const yn=new Set,Kt={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:D,options:t,push:q,replace:H,go:ke,back:()=>ke(-1),forward:()=>ke(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Ht,install(F){const Y=this;F.component("RouterLink",AAe),F.component("RouterView",OAe),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>cd(l)}),em&&!Ee&&l.value===yh&&(Ee=!0,q(r.location).catch(A=>{}));const G={};for(const A in yh)Object.defineProperty(G,A,{get:()=>l.value[A],enumerable:!0});F.provide(lA,Y),F.provide(hV,QF(G)),F.provide(jO,l);const ee=F.unmount;yn.add(F),F.unmount=function(){yn.delete(F),yn.size<1&&(u=yh,b&&b(),b=null,l.value=yh,Ee=!1,ce=!1),ee()}}};function ct(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Kt}function LAe(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>f_(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>f_(u,l))||r.push(l))}return[n,s,r]}function XZ(){return wo(lA)}function JZ(t){return wo(hV)}const MAe=()=>{};var OB={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZZ={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const me=function(t,e){if(!t)throw ey(e)},ey=function(t){return new Error("Firebase Database ("+ZZ.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eee=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FAe=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},dV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eee(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const l=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||l==null)throw new VAe;const u=i<<2|o>>4;if(s.push(u),a!==64){const h=o<<4&240|a>>2;if(s.push(h),l!==64){const d=a<<6&192|l;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tee=function(t){const e=eee(t);return dV.encodeByteArray(e,!0)},rS=function(t){return tee(t).replace(/\./g,"")},iS=function(t){try{return dV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UAe(t){return nee(void 0,t)}function nee(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qAe(n)||(t[n]=nee(t[n],e[n]));return t}function qAe(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BAe=()=>jAe().__FIREBASE_DEFAULTS__,$Ae=()=>{if(typeof process>"u"||typeof OB>"u")return;const t=OB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iS(t[1]);return e&&JSON.parse(e)},uA=()=>{try{return MAe()||BAe()||$Ae()||zAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},see=t=>uA()?.emulatorHosts?.[t],fV=t=>{const e=see(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ree=()=>uA()?.config,iee=t=>uA()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function el(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dA(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rS(JSON.stringify(n)),rS(JSON.stringify(o)),""].join(".")}const Tw={};function HAe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tw))Tw[e]?t.emulator.push(e):t.prod.push(e);return t}function WAe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DB=!1;function fA(t,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||Tw[t]===e||Tw[t]||DB)return;Tw[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=HAe().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{DB=!0,i()},d}function u(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=WAe(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),D=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),u(k,w);const V=l();a(D,P),M.append(D,m,k,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ni(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ni())}function KAe(){const t=uA()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QAe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oee(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YAe(){const t=ni();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XAe(){return ZZ.NODE_ADMIN===!0}function JAe(){return!KAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZAe(){try{return typeof indexedDB=="object"}catch{return!1}}function e1e(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const t1e="FirebaseError";class tl extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=t1e,Object.setPrototypeOf(this,tl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gT.prototype.create)}}class gT{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?n1e(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new tl(r,a,s)}}function n1e(t,e){return t.replace(s1e,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const s1e=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zb(t){return JSON.parse(t)}function Ms(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aee=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=zb(iS(i[0])||""),n=zb(iS(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},r1e=function(t){const e=aee(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},i1e=function(t){const e=aee(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function g_(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function BO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oS(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function jd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(LB(i)&&LB(o)){if(!jd(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function LB(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ty(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class o1e{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function a1e(t,e){const n=new c1e(t,e);return n.subscribe.bind(n)}class c1e{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");l1e(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=iN),r.error===void 0&&(r.error=iN),r.complete===void 0&&(r.complete=iN);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l1e(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function iN(){}function mV(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u1e=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,me(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},pA=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function un(t){return t&&t._delegate?t._delegate:t}class Zl{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Wf="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class h1e{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new hA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f1e(e))try{this.getOrInitializeService({instanceIdentifier:Wf})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Wf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wf){return this.instances.has(e)}getOptions(e=Wf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:d1e(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Wf){return this.component?this.component.multipleInstances?e:Wf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d1e(t){return t===Wf?void 0:t}function f1e(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class p1e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new h1e(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(kt||(kt={}));const g1e={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},m1e=kt.INFO,_1e={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},y1e=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=_1e[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gA{constructor(e){this.name=e,this._logLevel=m1e,this._logHandler=y1e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g1e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}const v1e=(t,e)=>e.some(n=>t instanceof n);let MB,FB;function w1e(){return MB||(MB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b1e(){return FB||(FB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cee=new WeakMap,$O=new WeakMap,lee=new WeakMap,oN=new WeakMap,_V=new WeakMap;function E1e(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ld(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cee.set(n,t)}).catch(()=>{}),_V.set(e,t),e}function T1e(t){if($O.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});$O.set(t,e)}let zO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $O.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lee.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ld(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function C1e(t){zO=t(zO)}function I1e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(aN(this),e,...n);return lee.set(s,e.sort?e.sort():[e]),ld(s)}:b1e().includes(t)?function(...e){return t.apply(aN(this),e),ld(cee.get(this))}:function(...e){return ld(t.apply(aN(this),e))}}function S1e(t){return typeof t=="function"?I1e(t):(t instanceof IDBTransaction&&T1e(t),v1e(t,w1e())?new Proxy(t,zO):t)}function ld(t){if(t instanceof IDBRequest)return E1e(t);if(oN.has(t))return oN.get(t);const e=S1e(t);return e!==t&&(oN.set(t,e),_V.set(e,t)),e}const aN=t=>_V.get(t);function k1e(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=ld(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ld(o.result),l.oldVersion,l.newVersion,ld(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const R1e=["get","getKey","getAll","getAllKeys","count"],A1e=["put","add","delete","clear"],cN=new Map;function VB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cN.get(e))return cN.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=A1e.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||R1e.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return cN.set(e,i),i}C1e(t=>({...t,get:(e,n,s)=>VB(e,n)||t.get(e,n,s),has:(e,n)=>!!VB(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class P1e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(N1e(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function N1e(t){return t.getComponent()?.type==="VERSION"}const HO="@firebase/app",UB="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eu=new gA("@firebase/app"),x1e="@firebase/app-compat",O1e="@firebase/analytics-compat",D1e="@firebase/analytics",L1e="@firebase/app-check-compat",M1e="@firebase/app-check",F1e="@firebase/auth",V1e="@firebase/auth-compat",U1e="@firebase/database",q1e="@firebase/data-connect",j1e="@firebase/database-compat",B1e="@firebase/functions",$1e="@firebase/functions-compat",z1e="@firebase/installations",H1e="@firebase/installations-compat",W1e="@firebase/messaging",K1e="@firebase/messaging-compat",G1e="@firebase/performance",Q1e="@firebase/performance-compat",Y1e="@firebase/remote-config",X1e="@firebase/remote-config-compat",J1e="@firebase/storage",Z1e="@firebase/storage-compat",ePe="@firebase/firestore",tPe="@firebase/ai",nPe="@firebase/firestore-compat",sPe="firebase",rPe="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WO="[DEFAULT]",iPe={[HO]:"fire-core",[x1e]:"fire-core-compat",[D1e]:"fire-analytics",[O1e]:"fire-analytics-compat",[M1e]:"fire-app-check",[L1e]:"fire-app-check-compat",[F1e]:"fire-auth",[V1e]:"fire-auth-compat",[U1e]:"fire-rtdb",[q1e]:"fire-data-connect",[j1e]:"fire-rtdb-compat",[B1e]:"fire-fn",[$1e]:"fire-fn-compat",[z1e]:"fire-iid",[H1e]:"fire-iid-compat",[W1e]:"fire-fcm",[K1e]:"fire-fcm-compat",[G1e]:"fire-perf",[Q1e]:"fire-perf-compat",[Y1e]:"fire-rc",[X1e]:"fire-rc-compat",[J1e]:"fire-gcs",[Z1e]:"fire-gcs-compat",[ePe]:"fire-fst",[nPe]:"fire-fst-compat",[tPe]:"fire-vertex","fire-js":"fire-js",[sPe]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aS=new Map,oPe=new Map,KO=new Map;function qB(t,e){try{t.container.addComponent(e)}catch(n){eu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bd(t){const e=t.name;if(KO.has(e))return eu.debug(`There were multiple attempts to register component ${e}.`),!1;KO.set(e,t);for(const n of aS.values())qB(n,t);for(const n of oPe.values())qB(n,t);return!0}function mT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lo(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aPe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ud=new gT("app","Firebase",aPe);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cPe{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ud.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bf=rPe;function uee(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:WO,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw ud.create("bad-app-name",{appName:String(r)});if(n||(n=ree()),!n)throw ud.create("no-options");const i=aS.get(r);if(i){if(jd(n,i.options)&&jd(s,i.config))return i;throw ud.create("duplicate-app",{appName:r})}const o=new p1e(r);for(const l of KO.values())o.addComponent(l);const a=new cPe(n,s,o);return aS.set(r,a),a}function mA(t=WO){const e=aS.get(t);if(!e&&t===WO&&ree())return uee();if(!e)throw ud.create("no-app",{appName:t});return e}function Lo(t,e,n){let s=iPe[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eu.warn(o.join(" "));return}Bd(new Zl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lPe="firebase-heartbeat-database",uPe=1,Hb="firebase-heartbeat-store";let lN=null;function hee(){return lN||(lN=k1e(lPe,uPe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hb)}catch(n){console.warn(n)}}}}).catch(t=>{throw ud.create("idb-open",{originalErrorMessage:t.message})})),lN}async function hPe(t){try{const e=(await hee()).transaction(Hb),n=await e.objectStore(Hb).get(dee(t));return await e.done,n}catch(e){if(e instanceof tl)eu.warn(e.message);else{const n=ud.create("idb-get",{originalErrorMessage:e?.message});eu.warn(n.message)}}}async function jB(t,e){try{const n=(await hee()).transaction(Hb,"readwrite");await n.objectStore(Hb).put(e,dee(t)),await n.done}catch(n){if(n instanceof tl)eu.warn(n.message);else{const s=ud.create("idb-set",{originalErrorMessage:n?.message});eu.warn(s.message)}}}function dee(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dPe=1024,fPe=30;class pPe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mPe(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=BB();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>fPe){const s=_Pe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=BB(),{heartbeatsToSend:n,unsentEntries:s}=gPe(this._heartbeatsCache.heartbeats),r=rS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return eu.warn(e),""}}}function BB(){return new Date().toISOString().substring(0,10)}function gPe(t,e=dPe){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),$B(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$B(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class mPe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZAe()?e1e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await hPe(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return jB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return jB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function $B(t){return rS(JSON.stringify({version:2,heartbeats:t})).length}function _Pe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yPe(t){Bd(new Zl("platform-logger",e=>new P1e(e),"PRIVATE")),Bd(new Zl("heartbeat",e=>new pPe(e),"PRIVATE")),Lo(HO,UB,t),Lo(HO,UB,"esm2020"),Lo("fire-js","")}yPe("");function fee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pee=fee,gee=new gT("auth","Firebase",fee());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cS=new gA("@firebase/auth");function vPe(t,...e){cS.logLevel<=kt.WARN&&cS.warn(`Auth (${bf}): ${t}`,...e)}function mI(t,...e){cS.logLevel<=kt.ERROR&&cS.error(`Auth (${bf}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zc(t,...e){throw vV(t,...e)}function Oa(t,...e){return vV(t,...e)}function yV(t,e,n){const s={...pee(),[e]:n};return new gT("auth","Firebase",s).create(e,{appName:t.name})}function Sp(t){return yV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wPe(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&zc(t,"argument-error"),yV(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vV(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return gee.create(t,...e)}function et(t,e,...n){if(!t)throw vV(e,...n)}function Al(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mI(e),new Error(e)}function tu(t,e){t||Al(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GO(){return typeof self<"u"&&self.location?.href||""}function bPe(){return zB()==="http:"||zB()==="https:"}function zB(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EPe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bPe()||QAe()||"connection"in navigator)?navigator.onLine:!0}function TPe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _T{constructor(e,n){this.shortDelay=e,this.longDelay=n,tu(n>e,"Short delay should be less than long delay!"),this.isMobile=gV()||oee()}get(){return EPe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wV(t,e){tu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mee{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CPe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const IPe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SPe=new _T(3e4,6e4);function bV(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ny(t,e,n,s,r={}){return _ee(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=ty({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return GAe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&el(t.emulatorConfig.host)&&(u.credentials="include"),mee.fetch()(await yee(t,t.config.apiHost,n,a),u)})}async function _ee(t,e,n){t._canInitEmulator=!1;const s={...CPe,...e};try{const r=new RPe(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wC(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wC(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw wC(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw wC(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw yV(t,h,u);zc(t,h)}}catch(r){if(r instanceof tl)throw r;zc(t,"network-request-failed",{message:String(r)})}}async function kPe(t,e,n,s,r={}){const i=await ny(t,e,n,s,r);return"mfaPendingCredential"in i&&zc(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function yee(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?wV(t.config,r):`${t.config.apiScheme}://${r}`;return IPe.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class RPe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Oa(this.auth,"network-request-failed")),SPe.get())})}}function wC(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Oa(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function APe(t,e){return ny(t,"POST","/v1/accounts:delete",e)}async function lS(t,e){return ny(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cw(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vee(t,e=!1){const n=un(t),s=await n.getIdToken(e),r=EV(s);et(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Cw(uN(r.auth_time)),issuedAtTime:Cw(uN(r.iat)),expirationTime:Cw(uN(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function uN(t){return Number(t)*1e3}function EV(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return mI("JWT malformed, contained fewer than 3 sections"),null;try{const r=iS(n);return r?JSON.parse(r):(mI("Failed to decode base64 JWT payload"),null)}catch(r){return mI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function HB(t){const e=EV(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Wb(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof tl&&PPe(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function PPe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NPe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QO{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cw(this.lastLoginAt),this.creationTime=Cw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uS(t){const e=t.auth,n=await t.getIdToken(),s=await Wb(t,lS(e,{idToken:n}));et(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?bee(r.providerUserInfo):[],o=xPe(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new QO(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function wee(t){const e=un(t);await uS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xPe(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function bee(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function OPe(t,e){const n=await _ee(t,{},async()=>{const s=ty({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await yee(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&el(t.emulatorConfig.host)&&(l.credentials="include"),mee.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DPe(t,e){return ny(t,"POST","/v2/accounts:revokeToken",bV(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=HB(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await OPe(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Nm;return s&&(et(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(et(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(et(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nm,this.toJSON())}_performRefresh(){return Al("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vh(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _a{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new NPe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new QO(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Wb(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vee(this,e)}reload(){return wee(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _a({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await uS(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lo(this.auth.app))return Promise.reject(Sp(this.auth));const e=await this.getIdToken();return await Wb(this,APe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;et(d&&k,e,"internal-error");const P=Nm.fromJSON(this.name,k);et(typeof d=="string",e,"internal-error"),vh(s,e.name),vh(r,e.name),et(typeof p=="boolean",e,"internal-error"),et(typeof m=="boolean",e,"internal-error"),vh(i,e.name),vh(o,e.name),vh(a,e.name),vh(l,e.name),vh(u,e.name),vh(h,e.name);const D=new _a({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(D.providerData=w.map(M=>({...M}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,n,s=!1){const r=new Nm;r.updateFromServerResponse(n);const i=new _a({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await uS(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];et(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?bee(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new Nm;a.updateFromIdToken(s);const l=new _a({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new QO(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WB=new Map;function Pl(t){tu(t instanceof Function,"Expected a class definition");let e=WB.get(t);return e?(tu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WB.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eee{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Eee.type="NONE";const YO=Eee;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _I(t,e,n){return`firebase:${t}:${e}:${n}`}class xm{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=_I(this.userKey,r.apiKey,i),this.fullPersistenceKey=_I("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lS(this.auth,{idToken:e}).catch(()=>{});return n?_a._fromGetAccountInfoResponse(this.auth,n,e):null}return _a._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xm(Pl(YO),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Pl(YO);const o=_I(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await lS(e,{idToken:h}).catch(()=>{});if(!p)break;d=await _a._fromGetAccountInfoResponse(e,p,h)}else d=_a._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new xm(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new xm(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(See(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tee(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ree(e))return"Blackberry";if(Aee(e))return"Webos";if(Cee(e))return"Safari";if((e.includes("chrome/")||Iee(e))&&!e.includes("edge/"))return"Chrome";if(kee(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Tee(t=ni()){return/firefox\//i.test(t)}function Cee(t=ni()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iee(t=ni()){return/crios\//i.test(t)}function See(t=ni()){return/iemobile/i.test(t)}function kee(t=ni()){return/android/i.test(t)}function Ree(t=ni()){return/blackberry/i.test(t)}function Aee(t=ni()){return/webos/i.test(t)}function TV(t=ni()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function LPe(t=ni()){return TV(t)&&!!window.navigator?.standalone}function MPe(){return YAe()&&document.documentMode===10}function Pee(t=ni()){return TV(t)||kee(t)||Aee(t)||Ree(t)||/windows phone/i.test(t)||See(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nee(t,e=[]){let n;switch(t){case"Browser":n=KB(ni());break;case"Worker":n=`${KB(ni())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bf}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FPe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function VPe(t,e={}){return ny(t,"GET","/v2/passwordPolicy",bV(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UPe=6;class qPe{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UPe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jPe{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GB(this),this.idTokenSubscription=new GB(this),this.beforeStateQueue=new FPe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gee,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pl(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lS(this,{idToken:e}),s=await _a._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lo(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uS(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TPe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lo(this.app))return Promise.reject(Sp(this));const n=e?un(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lo(this.app)?Promise.reject(Sp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lo(this.app)?Promise.reject(Sp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VPe(this),n=new qPe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gT("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await DPe(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pl(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await xm.create(this,[Pl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(lo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vPe(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _A(t){return un(t)}class GB{constructor(e){this.auth=e,this.observer=null,this.addObserver=a1e(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let CV={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BPe(t){CV=t}function $Pe(t){return CV.loadJS(t)}function zPe(){return CV.gapiScript}function HPe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xee(t,e){const n=mT(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(jd(r,e??{}))return s;zc(s,"already-initialized")}return n.initialize({options:e})}function WPe(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Pl);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function Oee(t,e,n){const s=_A(t);et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Dee(e),{host:o,port:a}=KPe(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),et(jd(u,s.config.emulator)&&jd(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,el(o)?(dA(`${i}//${o}${l}`),fA("Auth",!0)):GPe()}function Dee(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KPe(t){const e=Dee(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:QB(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:QB(o)}}}function QB(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GPe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IV{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Al("not implemented")}_getIdTokenResponse(e){return Al("not implemented")}_linkToIdToken(e,n){return Al("not implemented")}_getReauthenticationResolver(e){return Al("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Om(t,e){return kPe(t,"POST","/v1/accounts:signInWithIdp",bV(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const QPe="http://localhost";class $d extends IV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $d(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new $d(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Om(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Om(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Om(e,n)}buildRequest(){const e={requestUri:QPe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ty(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yT extends SV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wl extends yT{constructor(){super("facebook.com")}static credential(e){return $d._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.FACEBOOK_SIGN_IN_METHOD="facebook.com";wl.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _c extends yT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $d._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return _c.credential(n,s)}catch{return null}}}_c.GOOGLE_SIGN_IN_METHOD="google.com";_c.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bl extends yT{constructor(){super("github.com")}static credential(e){return $d._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bl.credential(e.oauthAccessToken)}catch{return null}}}bl.GITHUB_SIGN_IN_METHOD="github.com";bl.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class El extends yT{constructor(){super("twitter.com")}static credential(e,n){return $d._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return El.credential(n,s)}catch{return null}}}El.TWITTER_SIGN_IN_METHOD="twitter.com";El.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class m_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await _a._fromIdTokenResponse(e,s,r),o=YB(s);return new m_({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=YB(s);return new m_({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function YB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hS extends tl{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,hS.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new hS(e,n,s,r)}}function Lee(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?hS._fromErrorAndOperation(t,r,e,s):r})}async function YPe(t,e,n=!1){const s=await Wb(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return m_._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function XPe(t,e,n=!1){const{auth:s}=t;if(lo(s.app))return Promise.reject(Sp(s));const r="reauthenticate";try{const i=await Wb(t,Lee(s,r,e,t),n);et(i.idToken,s,"internal-error");const o=EV(i.idToken);et(o,s,"internal-error");const{sub:a}=o;return et(t.uid===a,s,"user-mismatch"),m_._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&zc(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function JPe(t,e,n=!1){if(lo(t.app))return Promise.reject(Sp(t));const s="signIn",r=await Lee(t,s,e),i=await m_._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function Mee(t,e,n,s){return un(t).onIdTokenChanged(e,n,s)}function Fee(t,e,n){return un(t).beforeAuthStateChanged(e,n)}function Vee(t,e,n,s){return un(t).onAuthStateChanged(e,n,s)}function tm(t){return un(t).signOut()}const dS="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Uee{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dS,"1"),this.storage.removeItem(dS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZPe=1e3,eNe=10;class qee extends Uee{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pee(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);MPe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eNe):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZPe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qee.type="LOCAL";const jee=qee;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bee extends Uee{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bee.type="SESSION";const kV=Bee;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tNe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new yA(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await tNe(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yA.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RV(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nNe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=RV("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kc(){return window}function sNe(t){kc().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $ee(){return typeof kc().WorkerGlobalScope<"u"&&typeof kc().importScripts=="function"}async function rNe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iNe(){return navigator?.serviceWorker?.controller||null}function oNe(){return $ee()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zee="firebaseLocalStorageDb",aNe=1,fS="firebaseLocalStorage",Hee="fbase_key";class vT{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vA(t,e){return t.transaction([fS],e?"readwrite":"readonly").objectStore(fS)}function cNe(){const t=indexedDB.deleteDatabase(zee);return new vT(t).toPromise()}function XO(){const t=indexedDB.open(zee,aNe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(fS,{keyPath:Hee})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(fS)?e(s):(s.close(),await cNe(),e(await XO()))})})}async function XB(t,e,n){const s=vA(t,!0).put({[Hee]:e,value:n});return new vT(s).toPromise()}async function lNe(t,e){const n=vA(t,!1).get(e),s=await new vT(n).toPromise();return s===void 0?null:s.value}function JB(t,e){const n=vA(t,!0).delete(e);return new vT(n).toPromise()}const uNe=800,hNe=3;class Wee{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XO(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hNe)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $ee()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yA._getInstance(oNe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rNe(),!this.activeServiceWorker)return;this.sender=new nNe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iNe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await XO();return await XB(e,dS,"1"),await JB(e,dS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>XB(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>lNe(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>JB(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=vA(r,!1).getAll();return new vT(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wee.type="LOCAL";const Kee=Wee;new _T(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gee(t,e){return e?Pl(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AV extends IV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Om(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Om(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Om(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dNe(t){return JPe(t.auth,new AV(t),t.bypassAuthState)}function fNe(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),XPe(n,new AV(t),t.bypassAuthState)}async function pNe(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),YPe(n,new AV(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qee{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dNe;case"linkViaPopup":case"linkViaRedirect":return pNe;case"reauthViaPopup":case"reauthViaRedirect":return fNe;default:zc(this.auth,"internal-error")}}resolve(e){tu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gNe=new _T(2e3,1e4);async function Yee(t,e,n){if(lo(t.app))return Promise.reject(Oa(t,"operation-not-supported-in-this-environment"));const s=_A(t);wPe(t,e,SV);const r=Gee(s,n);return new ap(s,"signInViaPopup",e,r).executeNotNull()}class ap extends Qee{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ap.currentPopupAction&&ap.currentPopupAction.cancel(),ap.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){tu(this.filter.length===1,"Popup operations only handle one event");const e=RV();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ap.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gNe.get())};e()}}ap.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mNe="pendingRedirect",yI=new Map;class _Ne extends Qee{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=yI.get(this.auth._key());if(!e){try{const n=await yNe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}yI.set(this.auth._key(),e)}return this.bypassAuthState||yI.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yNe(t,e){const n=bNe(e),s=wNe(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function vNe(t,e){yI.set(t._key(),e)}function wNe(t){return Pl(t._redirectPersistence)}function bNe(t){return _I(mNe,t.config.apiKey,t.name)}async function ENe(t,e,n=!1){if(lo(t.app))return Promise.reject(Sp(t));const s=_A(t),r=Gee(s,e),i=await new _Ne(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const TNe=600*1e3;class CNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!INe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Xee(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Oa(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZB(e))}saveEventToCache(e){this.cachedEventUids.add(ZB(e)),this.lastProcessedEventTime=Date.now()}}function ZB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xee({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function INe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xee(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function SNe(t,e={}){return ny(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RNe=/^https?/;async function ANe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SNe(t);for(const n of e)try{if(PNe(n))return}catch{}zc(t,"unauthorized-domain")}function PNe(t){const e=GO(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!RNe.test(n))return!1;if(kNe.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NNe=new _T(3e4,6e4);function e$(){const t=kc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xNe(t){return new Promise((e,n)=>{function s(){e$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e$(),n(Oa(t,"network-request-failed"))},timeout:NNe.get()})}if(kc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(kc().gapi?.load)s();else{const r=HPe("iframefcb");return kc()[r]=()=>{gapi.load?s():n(Oa(t,"network-request-failed"))},$Pe(`${zPe()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw vI=null,e})}let vI=null;function ONe(t){return vI=vI||xNe(t),vI}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const DNe=new _T(5e3,15e3),LNe="__/auth/iframe",MNe="emulator/auth/iframe",FNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UNe(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wV(e,MNe):`https://${t.config.authDomain}/${LNe}`,s={apiKey:e.apiKey,appName:t.name,v:bf},r=VNe.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${ty(s).slice(1)}`}async function qNe(t){const e=await ONe(t),n=kc().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:UNe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FNe,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Oa(t,"network-request-failed"),a=kc().setTimeout(()=>{i(o)},DNe.get());function l(){kc().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BNe=500,$Ne=600,zNe="_blank",HNe="http://localhost";class t${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WNe(t,e,n,s=BNe,r=$Ne){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...jNe,width:s.toString(),height:r.toString(),top:i,left:o},u=ni().toLowerCase();n&&(a=Iee(u)?zNe:n),Tee(u)&&(e=e||HNe,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(LPe(u)&&a!=="_self")return KNe(e||"",a),new t$(null);const d=window.open(e||"",a,h);et(d,t,"popup-blocked");try{d.focus()}catch{}return new t$(d)}function KNe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GNe="__/auth/handler",QNe="emulator/auth/handler",YNe=encodeURIComponent("fac");async function n$(t,e,n,s,r,i){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:bf,eventId:r};if(e instanceof SV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",BO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof yT){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${YNe}=${encodeURIComponent(l)}`:"";return`${XNe(t)}?${ty(a).slice(1)}${u}`}function XNe({config:t}){return t.emulator?wV(t,QNe):`https://${t.authDomain}/${GNe}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hN="webStorageSupport";class JNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kV,this._completeRedirectFn=ENe,this._overrideRedirectResult=vNe}async _openPopup(e,n,s,r){tu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await n$(e,n,s,GO(),r);return WNe(e,i,RV())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await n$(e,n,s,GO(),r);return sNe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(tu(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await qNe(e),s=new CNe(e);return n.register("authEvent",r=>(et(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hN,{type:hN},s=>{const r=s?.[0]?.[hN];r!==void 0&&n(!!r),zc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ANe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pee()||Cee()||TV()}}const Jee=JNe;var s$="@firebase/auth",r$="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ZNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function exe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function txe(t){Bd(new Zl("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nee(t)},u=new jPe(s,r,i,l);return WPe(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Bd(new Zl("auth-internal",e=>{const n=_A(e.getProvider("auth").getImmediate());return(s=>new ZNe(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(s$,r$,exe(t)),Lo(s$,r$,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nxe=300,sxe=iee("authIdTokenMaxAge")||nxe;let i$=null;const rxe=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>sxe)return;const r=n?.token;i$!==r&&(i$=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Zee(t=mA()){const e=mT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xee(t,{popupRedirectResolver:Jee,persistence:[Kee,jee,kV]}),s=iee("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=rxe(i.toString());Fee(n,o,()=>o(n.currentUser)),Mee(n,a=>o(a))}}const r=see("auth");return r&&Oee(n,`http://${r}`),n}function ixe(){return document.getElementsByTagName("head")?.[0]??document}BPe({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Oa("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",ixe().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});txe("Browser");var o$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hd,ete;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(C,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(C,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var C=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)C[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)C[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+C[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+C[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+C[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+C[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,C=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(C[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,C),S=0;break}}else for(;E<v;)if(C[S++]=I[E++],S==this.blockSize){r(this,C),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var C=0;32>C;C+=8)I[y++]=this.g[v]>>>C&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],C=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;C&&E==v||(y[S]=E,C=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,C=0;I>=y;C++)v[C]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),C=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),C=C.j(E).add(u(b))):(C=C.j(y),C=C.add(u(b)))}return C}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var C=this.i(y);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,C="";;){var S=q(y,v).g;y=D(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+C;for(;6>E.length;)E="0"+E;C=E+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=D(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],C=0;C<v;C++)y[C]=~I.g[C];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0,S=0;S<=v;S++){var E=C+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);C=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function D(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],C=0;C<2*v;C++)y[C]=0;for(C=0;C<this.g.length;C++)for(var S=0;S<I.g.length;S++){var E=this.i(C)>>>16,b=this.i(C)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*C+2*S]+=b*ne,M(y,2*C+2*S),y[2*C+2*S+1]+=E*ne,M(y,2*C+2*S+1),y[2*C+2*S+1]+=b*K,M(y,2*C+2*S+1),y[2*C+2*S+2]+=E*K,M(y,2*C+2*S+2)}for(C=0;C<v;C++)y[C]=y[2*C+1]<<16|y[2*C];for(C=v;C<2*v;C++)y[C]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,C=v;0>=C.l(I);)y=H(y),C=H(C);var S=X(y,1),E=X(C,1);for(C=X(C,2),y=X(y,2);!w(C);){var b=E.add(C);0>=b.l(I)&&(S=S.add(y),E=b),C=X(C,1),y=X(y,1)}return v=D(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(y)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),E=u(y),b=E.j(v);k(b)||0<b.l(I);)y-=C,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=D(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)&I.i(C);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)|I.i(C);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)^I.i(C);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],C=0;C<v;C++)y[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(y,I.h)}function X(I,v){var y=v>>5;v%=32;for(var C=I.g.length-y,S=[],E=0;E<C;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ete=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,hd=o}).apply(typeof o$<"u"?o$:typeof self<"u"?self:typeof window<"u"?window:{});var bC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tte,Pv,nte,wI,JO,ste,rte,ite;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof bC=="object"&&bC];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var O=g++;return{value:f(O,c[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,O){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[N].apply(_,z)}}function k(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,O=_.length||0;c.length=N+O;for(let z=0;z<O;z++)c[N+z]=_[z]}else c.push(_)}}class D{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let O=0;O<y.length;O++)g=y[O],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Ht;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new D(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,we=!1,Ht=new K,It=()=>{const c=a.Promise.resolve(void 0);ce=()=>{c.then(xt)}};var xt=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}we=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Kt(c,f){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(H){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ct[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Kt.aa.h.call(this)}}w(Kt,Ee);var ct={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Y,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function A(c){this.src=c,this.g={},this.h=0}A.prototype.add=function(c,f,g,_,N){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var z=R(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new G(f,this.src,O,!!_,N),f.fa=g,c.push(f)),f};function T(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),O;(O=0<=N)&&Array.prototype.splice.call(_,N,1),O&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function R(c,f,g,_){for(var N=0;N<c.length;++N){var O=c[N];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var O=0;O<f.length;O++)U(c,f[O],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,O){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,ye=Z(c);if(ye||(c[x]=ye=new A(c)),g=ye.add(f,g,_,z,O),g.proxy)return g;if(_=W(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)yn||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Q(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function c(g){return f.call(c.src,c.listener,g)}const f=J;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var O=0;O<f.length;O++)$(c,f[O],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(O=c.g[f],g=R(O,g,_,N),-1<g&&(ee(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=R(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])T(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(T(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Q(c){return c in L?L[c]:L[c]="on"+c}function J(c,f){if(c.da)c=!0;else{f=new Kt(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof A?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ke.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,ke),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new Ee(f,c);else if(f instanceof Ee)f.target=f.target||c;else{var N=f;f=new Ee(_,c),C(f,N)}if(N=!0,g)for(var O=g.length-1;0<=O;O--){var z=f.g=g[O];N=be(z,_,!0,f)&&N}if(z=f.g=c,N=be(z,_,!0,f)&&N,N=be(z,_,!1,f)&&N,g)for(O=0;O<g.length;O++)z=f.g=g[O],N=be(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function be(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,O=0;O<f.length;++O){var z=f[O];if(z&&!z.da&&z.capture==g){var ye=z.listener,Le=z.ha||z.src;z.fa&&T(c.i,z),N=ye.call(Le,_)!==!1&&N}}return N&&!_.defaultPrevented}function De(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function rt(c){c.g=De(()=>{c.g=null,c.i&&(c.i=!1,rt(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class yt extends ke{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(c){ke.call(this),this.h=c,this.g={}}w(mt,ke);var us=[];function _t(c){X(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}mt.prototype.N=function(){mt.aa.N.call(this),_t(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=a.JSON.stringify,Wn=a.JSON.parse,Ri=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ai(){}Ai.prototype.h=null;function Tu(c){return c.h||(c.h=c.i())}function Cu(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $o(){Ee.call(this,"d")}w($o,Ee);function zo(){Ee.call(this,"c")}w(zo,Ee);var qn={},Iu=null;function Pi(){return Iu=Iu||new re}qn.La="serverreachability";function Su(c){Ee.call(this,qn.La,c)}w(Su,Ee);function ar(c){const f=Pi();se(f,new Su(f))}qn.STAT_EVENT="statevent";function ku(c,f){Ee.call(this,qn.STAT_EVENT,c),this.stat=f}w(ku,Ee);function Xe(c){const f=Pi();se(f,new ku(f,c))}qn.Ma="timingevent";function Ru(c,f){Ee.call(this,qn.Ma,c),this.size=f}w(Ru,Ee);function cr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function lr(){this.g=!0}lr.prototype.xa=function(){this.g=!1};function by(c,f,g,_,N,O){c.info(function(){if(c.g)if(O)for(var z="",ye=O.split("&"),Le=0;Le<ye.length;Le++){var pe=ye[Le].split("=");if(1<pe.length){var Ue=pe[0];pe=pe[1];var nt=Ue.split("_");z=2<=nt.length&&nt[1]=="type"?z+(Ue+"="+pe+"&"):z+(Ue+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function Ey(c,f,g,_,N,O,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+O+" "+z})}function hs(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Cy(c,g)+(_?" "+_:"")})}function Ty(c,f){c.info(function(){return"TIMEOUT: "+f})}lr.prototype.info=function(){};function Cy(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Ye(g)}catch{return f}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ho;function xi(){}w(xi,Ai),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},Ho=new xi;function vn(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var Nu={},Wo={};function Ko(c,f,g){c.L=1,c.v=Mi(an(f)),c.m=g,c.P=!0,xu(c,null)}function xu(c,f){c.F=Date.now(),Oi(c),c.A=an(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),Wu(g.i,"t",_),c.C=0,g=c.j.J,c.h=new Pu,c.g=uh(c.j,g?f:null,!c.m),0<c.O&&(c.M=new yt(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(us[0]=N.toString()),N=us);for(var O=0;O<N.length;O++){var z=U(g,N[O],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),ar(),by(c.i,c.u,c.A,c.l,c.R,c.m)}vn.prototype.ca=function(c){c=c.target;const f=this.M;f&&cn(c)==3?f.j():this.Y(c)},vn.prototype.Y=function(c){try{if(c==this.g)e:{const nt=cn(this.g);var f=this.g.Ba();const ps=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||nt!=4||f==7||(f==8||0>=ps?ar(3):ar(2)),Go(this);var g=this.g.Z();this.X=g;t:if(Ou(this)){var _=Zu(this.g);c="";var N=_.length,O=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),ur(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(O&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,Ey(this.i,this.u,this.A,this.l,this.R,nt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Le=this.g;if((ye=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ye)){var pe=ye;break t}}pe=null}if(g=pe)hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,g);else{this.o=!1,this.s=3,Xe(12),jn(this),ur(this);break e}}if(this.P){g=!0;let Ut;for(;!this.J&&this.C<z.length;)if(Ut=Iy(this,z),Ut==Wo){nt==4&&(this.s=4,Xe(14),g=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Nu){this.s=4,Xe(15),hs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else hs(this.i,this.l,Ut,null),Qo(this,Ut);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||z.length!=0||this.h.h||(this.s=1,Xe(16),g=!1),this.o=this.o&&g,!g)hs(this.i,this.l,z,"[Invalid Chunked Response]"),jn(this),ur(this);else if(0<z.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ta(Ue),Ue.M=!0,Xe(11))}}else hs(this.i,this.l,z,null),Qo(this,z);nt==4&&jn(this),this.o&&!this.J&&(nt==4?oh(this.j,this):(this.o=!1,Oi(this)))}else By(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),jn(this),ur(this)}}}catch{}finally{}};function Ou(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Iy(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?Wo:(g=Number(f.substring(g,_)),isNaN(g)?Nu:(_+=1,_+g>f.length?Wo:(f=f.slice(_,_+g),c.C=_+g,f)))}vn.prototype.cancel=function(){this.J=!0,jn(this)};function Oi(c){c.S=Date.now()+c.I,Du(c,c.I)}function Du(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=cr(p(c.ba,c),f)}function Go(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ty(this.i,this.A),this.L!=2&&(ar(),Xe(17)),jn(this),this.s=2,ur(this)):Du(this,this.S-c)};function ur(c){c.j.G==0||c.J||oh(c.j,c)}function jn(c){Go(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,_t(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Qo(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Yo(g.h,c))){if(!c.K&&Yo(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Bi(g),qi(g);else break e;ea(g),Xe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=cr(p(g.Za,g),6e3));if(1>=Fu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $n(g,11)}else if((c.K||g.g==c)&&Bi(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let pe=N[f];if(g.T=pe[0],pe=pe[1],g.G==2)if(pe[0]=="c"){g.K=pe[1],g.ia=pe[2];const Ue=pe[3];Ue!=null&&(g.la=Ue,g.j.info("VER="+g.la));const nt=pe[4];nt!=null&&(g.Aa=nt,g.j.info("SVER="+g.Aa));const ps=pe[5];ps!=null&&typeof ps=="number"&&0<ps&&(_=1.5*ps,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ut=c.g;if(Ut){const zi=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var O=_.h;O.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Xo(O,O.h),O.h=null))}if(_.D){const na=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;na&&(_.ya=na,ve(_.I,_.D,na))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=lh(_,_.J?_.ia:null,_.W),z.K){Vu(_.h,z);var ye=z,Le=_.L;Le&&(ye.I=Le),ye.B&&(Go(ye),Oi(ye)),_.g=z}else rh(_);0<g.i.length&&ji(g)}else pe[0]!="stop"&&pe[0]!="close"||$n(g,7);else g.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?$n(g,7):Zo(g):pe[0]!="noop"&&g.l&&g.l.ta(pe),g.v=0)}}ar(4)}catch{}}var Sy=class{constructor(c,f){this.g=c,this.map=f}};function Lu(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fu(c){return c.h?1:c.g?c.g.size:0}function Yo(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Xo(c,f){c.g?c.g.add(f):c.h=f}function Vu(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Lu.prototype.cancel=function(){if(this.i=Uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return k(c.i)}function ky(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function Ry(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function qu(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=Ry(c),_=ky(c),N=_.length,O=0;O<N;O++)f.call(void 0,_[O],g&&g[O],c)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ay(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var O=c[g].substring(0,_);N=c[g].substring(_+1)}else O=c[g];f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Bn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bn){this.h=c.h,Di(this,c.j),this.o=c.o,this.g=c.g,Li(this,c.s),this.l=c.l;var f=c.i,g=new fr;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Bu(this,g),this.m=c.m}else c&&(f=String(c).match(ju))?(this.h=!1,Di(this,f[1]||"",!0),this.o=hr(f[2]||""),this.g=hr(f[3]||"",!0),Li(this,f[4]),this.l=hr(f[5]||"",!0),Bu(this,f[6]||"",!0),this.m=hr(f[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Bn.prototype.toString=function(){var c=[],f=this.j;f&&c.push(dr(f,$u,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(dr(f,$u,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(dr(g,g.charAt(0)=="/"?xy:Ny,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",dr(g,Dy)),c.join("")};function an(c){return new Bn(c)}function Di(c,f,g){c.j=g?hr(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Li(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Bu(c,f,g){f instanceof fr?(c.i=f,Ly(c.i,c.h)):(g||(f=dr(f,Oy)),c.i=new fr(f,c.h))}function ve(c,f,g){c.i.set(f,g)}function Mi(c){return ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function hr(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function dr(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Py),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Py(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $u=/[#\/\?@]/g,Ny=/[#\?:]/g,xy=/[#\?]/g,Oy=/[#\?@]/g,Dy=/#/g;function fr(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ay(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fr.prototype,t.add=function(c,f){wn(this),this.i=null,c=ds(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function zu(c,f){wn(c),f=ds(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Hu(c,f){return wn(c),f=ds(c,f),c.g.has(f)}t.forEach=function(c,f){wn(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){wn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let O=0;O<N.length;O++)g.push(f[_])}return g},t.V=function(c){wn(this);let f=[];if(typeof c=="string")Hu(this,c)&&(f=f.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return wn(this),this.i=null,c=ds(this,c),Hu(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Wu(c,f,g){zu(c,f),0<g.length&&(c.i=null,c.g.set(ds(c,f),k(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=O;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function ds(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Ly(c,f){f&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(zu(this,_),Wu(this,N,g))},c)),c.j=f}function My(c,f){const g=new lr;if(a.Image){const _=new Image;_.onload=m(bn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(bn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(bn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(bn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Fy(c,f){const g=new lr,_=new AbortController,N=setTimeout(()=>{_.abort(),bn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(O=>{clearTimeout(N),O.ok?bn(g,"TestPingServer: ok",!0,f):bn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),bn(g,"TestPingServer: error",!1,f)})}function bn(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Vy(){this.g=new Ri}function Uy(c,f,g){const _=g||"";try{qu(c,function(N,O){let z=N;u(N)&&(z=Ye(N)),f.push(_+O+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Fi(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Fi,Ai),Fi.prototype.g=function(){return new Vi(this.l,this.j)},Fi.prototype.i=function(c){return function(){return c}}({});function Vi(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Vi,re),t=Vi.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,gr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ku(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ku(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?pr(this):gr(this),this.readyState==3&&Ku(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},t.Qa=function(c){this.g&&(this.response=c,pr(this))},t.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,gr(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gu(c){let f="";return X(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Jo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Gu(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ve(c,f,g))}function Te(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Te,re);var qy=/^https?$/i,jy=["POST","PUT"];t=Te.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ho.g(),this.v=this.o?Tu(this.o):Tu(Ho),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(O){Qu(this,O);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())g.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jy,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ju(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){Qu(this,O)}};function Qu(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Yu(c),Ui(c)}function Yu(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),Ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xu(this):this.bb())},t.bb=function(){Xu(this)};function Xu(c){if(c.h&&typeof o<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)De(c.Ea,0,c);else if(se(c,"readystatechange"),cn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(ju)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!qy.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var O=2<cn(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",Yu(c)}}finally{Ui(c)}}}}function Ui(c,f){if(c.g){Ju(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Ju(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Wn(f)}};function Zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function By(c){const f={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[N]||[];f[N]=O,O.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function eh(c){this.Aa=0,this.i=[],this.j=new lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,c),this.cb=mr("retryDelaySeedMs",1e4,c),this.Wa=mr("forwardChannelMaxRetries",2,c),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lu(c&&c.concurrentRequestLimit),this.Da=new Vy,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Xe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=lh(this,null,this.W),ji(this)};function Zo(c){if(th(c),c.G==3){var f=c.U++,g=an(c.I);if(ve(g,"SID",c.K),ve(g,"RID",f),ve(g,"TYPE","terminate"),_r(c,g),f=new vn(c,c.j,f),f.L=2,f.v=Mi(an(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=uh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Oi(f)}ch(c)}function qi(c){c.g&&(ta(c),c.g.cancel(),c.g=null)}function th(c){qi(c),c.u&&(a.clearTimeout(c.u),c.u=null),Bi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ji(c){if(!Mu(c.h)&&!c.s){c.s=!0;var f=c.Ga;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.B=0}}function $y(c,f){return Fu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=cr(p(c.Ga,c,f),ah(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new vn(this,this.j,c);let O=this.o;if(this.S&&(O?(O=v(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=sh(this,N,f),g=an(this.I),ve(g,"RID",c),ve(g,"CVER",22),this.D&&ve(g,"X-HTTP-Session-Id",this.D),_r(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(Gu(O)))+"&"+f:this.m&&Jo(g,this.m,O)),Xo(this.h,N),this.Ua&&ve(g,"TYPE","init"),this.P?(ve(g,"$req",f),ve(g,"SID","null"),N.T=!0,Ko(N,g,null)):Ko(N,g,f),this.G=2}}else this.G==3&&(c?nh(this,c):this.i.length==0||Mu(this.h)||nh(this))};function nh(c,f){var g;f?g=f.l:g=c.U++;const _=an(c.I);ve(_,"SID",c.K),ve(_,"RID",g),ve(_,"AID",c.T),_r(c,_),c.m&&c.o&&Jo(_,c.m,c.o),g=new vn(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=sh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xo(c.h,g),Ko(g,_,f)}function _r(c,f){c.H&&X(c.H,function(g,_){ve(f,_,g)}),c.l&&qu({},function(g,_){ve(f,_,g)})}function sh(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ye=!0;for(let Le=0;Le<g;Le++){let pe=N[Le].g;const Ue=N[Le].map;if(pe-=O,0>pe)O=Math.max(0,N[Le].g-100),ye=!1;else try{Uy(Ue,z,"req"+pe+"_")}catch{_&&_(Ue)}}if(ye){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function rh(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.v=0}}function ea(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=cr(p(c.Fa,c),ah(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=cr(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),qi(this),ih(this))};function ta(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ih(c){c.g=new vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=an(c.qa);ve(f,"RID","rpc"),ve(f,"SID",c.K),ve(f,"AID",c.T),ve(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ve(f,"TO",c.ja),ve(f,"TYPE","xmlhttp"),_r(c,f),c.m&&c.o&&Jo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Mi(an(f)),g.m=null,g.P=!0,xu(g,c)}t.Za=function(){this.C!=null&&(this.C=null,qi(this),ea(this),Xe(19))};function Bi(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function oh(c,f){var g=null;if(c.g==f){Bi(c),ta(c),c.g=null;var _=2}else if(Yo(c.h,f))g=f.D,Vu(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Pi(),se(_,new Ru(_,g)),ji(c)}else rh(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&$y(c,f)||_==2&&ea(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:$n(c,5);break;case 4:$n(c,10);break;case 3:$n(c,6);break;default:$n(c,2)}}}function ah(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function $n(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new Bn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Di(_,"https"),Mi(_),N?My(_.toString(),g):Fy(_.toString(),g)}else Xe(2);c.G=0,c.l&&c.l.sa(f),ch(c),th(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function ch(c){if(c.G=0,c.ka=[],c.l){const f=Uu(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function lh(c,f,g){var _=g instanceof Bn?an(g):new Bn(g);if(_.g!="")f&&(_.g=f+"."+_.g),Li(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var O=new Bn(null);_&&Di(O,_),f&&(O.g=f),N&&Li(O,N),g&&(O.l=g),_=O}return g=c.D,f=c.ya,g&&f&&ve(_,g,f),ve(_,"VER",c.la),_r(c,_),_}function uh(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Te(new Fi({eb:g})):new Te(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}t=hh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $i(){}$i.prototype.g=function(c,f){return new gt(c,f)};function gt(c,f){re.call(this),this.g=new eh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new fs(this)}w(gt,re),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Zo(this.g)},gt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Ye(c),c=g);f.i.push(new Sy(f.Ya++,c)),f.G==3&&ji(f)},gt.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,gt.aa.N.call(this)};function dh(c){$o.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(dh,$o);function fh(){zo.call(this),this.status=1}w(fh,zo);function fs(c){this.g=c}w(fs,hh),fs.prototype.ua=function(){se(this.g,"a")},fs.prototype.ta=function(c){se(this.g,new dh(c))},fs.prototype.sa=function(c){se(this.g,new fh)},fs.prototype.ra=function(){se(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,ite=function(){return new $i},rte=function(){return Pi()},ste=qn,JO={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,wI=Ni,Au.COMPLETE="complete",nte=Au,Cu.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",re.prototype.listen=re.prototype.K,Pv=Cu,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,tte=Te}).apply(typeof bC<"u"?bC:typeof self<"u"?self:typeof window<"u"?window:{});const a$="@firebase/firestore",c$="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let sy="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kp=new gA("@firebase/firestore");function nm(){return Kp.logLevel}function Ie(t,...e){if(Kp.logLevel<=kt.DEBUG){const n=e.map(PV);Kp.debug(`Firestore (${sy}): ${t}`,...n)}}function nu(t,...e){if(Kp.logLevel<=kt.ERROR){const n=e.map(PV);Kp.error(`Firestore (${sy}): ${t}`,...n)}}function __(t,...e){if(Kp.logLevel<=kt.WARN){const n=e.map(PV);Kp.warn(`Firestore (${sy}): ${t}`,...n)}}function PV(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ze(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,ote(t,s,n)}function ote(t,e,n){let s=`FIRESTORE (${sy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw nu(s),new Error(s)}function rn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||ote(e,r,s)}function ft(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends tl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dd{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ate{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oxe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ur.UNAUTHENTICATED))}shutdown(){}}class axe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cxe{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rn(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new dd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dd,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dd)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rn(typeof s.accessToken=="string",31837,{l:s}),new ate(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string",2055,{h:e}),new Ur(e)}}class lxe{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uxe{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new lxe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hxe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rn(this.o===void 0,3512);const s=i=>{i.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=dxe(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Dt(t,e){return t<e?-1:t>e?1:0}function ZO(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return dN(r)===dN(i)?Dt(r,i):dN(r)?1:-1}return Dt(t.length,e.length)}const fxe=55296,pxe=57343;function dN(t){const e=t.charCodeAt(0);return e>=fxe&&e<=pxe}function y_(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u$="__name__";class lc{constructor(e,n,s){n===void 0?n=0:n>e.length&&ze(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ze(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return lc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=lc.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Dt(e.length,n.length)}static compareSegments(e,n){const s=lc.isNumericId(e),r=lc.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?lc.extractNumericId(e).compare(lc.extractNumericId(n)):ZO(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hd.fromString(e.substring(4,e.length-2))}}let xs=class bI extends lc{construct(e,n,s){return new bI(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new bI(n)}static emptyPath(){return new bI([])}};const gxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends lc{construct(e,n,s){return new Er(e,n,s)}static isValidIdentifier(e){return gxe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u$}static keyField(){return new Er([u$])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(n)}static emptyPath(){return new Er([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(xs.fromString(e))}static fromName(e){return new Fe(xs.fromString(e).popFirst(5))}static empty(){return new Fe(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new xs(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mxe(t,e,n){if(!n)throw new Ae(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _xe(t,e,n,s){if(e===!0&&s===!0)throw new Ae(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h$(t){if(!Fe.isDocumentKey(t))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cte(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xV(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ze(12329,{type:typeof t})}function Da(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xV(t);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vs(t,e){const n={typeString:t};return e&&(n.value=e),n}function wT(t,e){if(!cte(t))throw new Ae(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Ae(ue.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d$=-62135596800,f$=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*f$);return new On(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<d$)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/f$}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:On._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wT(e,On._jsonSchema))return new On(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:vs("string",On._jsonSchemaVersion),seconds:vs("number"),nanoseconds:vs("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ot{static fromTimestamp(e){return new ot(e)}static min(){return new ot(new On(0,0))}static max(){return new ot(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kb=-1;function yxe(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ot.fromTimestamp(s===1e9?new On(n+1,0):new On(n,s));return new zd(r,Fe.empty(),e)}function vxe(t){return new zd(t.readTime,t.key,Kb)}class zd{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new zd(ot.min(),Fe.empty(),Kb)}static max(){return new zd(ot.max(),Fe.empty(),Kb)}}function wxe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Fe.comparator(t.documentKey,e.documentKey),n!==0?n:Dt(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bxe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Exe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function ry(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==bxe)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,s)=>{n(e)})}static reject(e){return new oe((n,s)=>{s(e)})}static waitFor(e){return new oe((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=oe.resolve(!1);for(const s of e)n=n.next(r=>r?oe.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new oe((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new oe((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Txe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function iy(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wA{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wA.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OV=-1;function bA(t){return t==null}function pS(t){return t===0&&1/t==-1/0}function Cxe(t){return typeof t=="number"&&Number.isInteger(t)&&!pS(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const lte="";function Ixe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=p$(e)),e=Sxe(t.get(n),e);return p$(e)}function Sxe(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case lte:n+="";break;default:n+=i}}return n}function p$(t){return t+lte+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function g$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ef(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ute(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Cs=class eD{constructor(e,n){this.comparator=e,this.root=n||fd.EMPTY}insert(e,n){return new eD(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fd.BLACK,null,null))}remove(e){return new eD(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fd.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new EC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new EC(this.root,e,this.comparator,!1)}getReverseIterator(){return new EC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new EC(this.root,e,this.comparator,!0)}},EC=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},fd=class hl{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??hl.RED,this.left=r??hl.EMPTY,this.right=i??hl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new hl(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return hl.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}};fd.EMPTY=null,fd.RED=!0,fd.BLACK=!1;fd.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new fd(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $s{constructor(e){this.comparator=e,this.data=new Cs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m$(this.data.getIterator())}getIteratorFrom(e){return new m$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $s(this.comparator);return n.data=e,n}}class m${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mo{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new mo([])}unionWith(e){let n=new $s(Er.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new mo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return y_(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hte extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new hte("Invalid base64 string: "+r):r}}(e);return new kr(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new kr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const kxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hd(t){if(rn(!!t,39018),typeof t=="string"){let e=0;const n=kxe.exec(t);if(rn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:cs(t.seconds),nanos:cs(t.nanos)}}function cs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wd(t){return typeof t=="string"?kr.fromBase64String(t):kr.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dte="server_timestamp",fte="__type__",pte="__previous_value__",gte="__local_write_time__";function DV(t){return(t?.mapValue?.fields||{})[fte]?.stringValue===dte}function EA(t){const e=t.mapValue.fields[pte];return DV(e)?EA(e):e}function Gb(t){const e=Hd(t.mapValue.fields[gte].timestampValue);return new On(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rxe{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const gS="(default)";class Qb{constructor(e,n){this.projectId=e,this.database=n||gS}static empty(){return new Qb("","")}get isDefaultDatabase(){return this.database===gS}isEqual(e){return e instanceof Qb&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mte="__type__",Axe="__max__",TC={mapValue:{}},_te="__vector__",mS="value";function Kd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DV(t)?4:Nxe(t)?9007199254740991:Pxe(t)?10:11:ze(28295,{value:t})}function Hc(t,e){if(t===e)return!0;const n=Kd(t);if(n!==Kd(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gb(t).isEqual(Gb(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=Hd(s.timestampValue),o=Hd(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Wd(s.bytesValue).isEqual(Wd(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return cs(s.geoPointValue.latitude)===cs(r.geoPointValue.latitude)&&cs(s.geoPointValue.longitude)===cs(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return cs(s.integerValue)===cs(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=cs(s.doubleValue),o=cs(r.doubleValue);return i===o?pS(i)===pS(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return y_(t.arrayValue.values||[],e.arrayValue.values||[],Hc);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(g$(i)!==g$(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Hc(i[a],o[a])))return!1;return!0}(t,e);default:return ze(52216,{left:t})}}function Yb(t,e){return(t.values||[]).find(n=>Hc(n,e))!==void 0}function v_(t,e){if(t===e)return 0;const n=Kd(t),s=Kd(e);if(n!==s)return Dt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=cs(r.integerValue||r.doubleValue),a=cs(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return _$(t.timestampValue,e.timestampValue);case 4:return _$(Gb(t),Gb(e));case 5:return ZO(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Wd(r),a=Wd(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Dt(o[l],a[l]);if(u!==0)return u}return Dt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Dt(cs(r.latitude),cs(i.latitude));return o!==0?o:Dt(cs(r.longitude),cs(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y$(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},l=o[mS]?.arrayValue,u=a[mS]?.arrayValue,h=Dt(l?.values?.length||0,u?.values?.length||0);return h!==0?h:y$(l,u)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===TC.mapValue&&i===TC.mapValue)return 0;if(r===TC.mapValue)return 1;if(i===TC.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let h=0;h<a.length&&h<u.length;++h){const d=ZO(a[h],u[h]);if(d!==0)return d;const p=v_(o[a[h]],l[u[h]]);if(p!==0)return p}return Dt(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ze(23264,{he:n})}}function _$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dt(t,e);const n=Hd(t),s=Hd(e),r=Dt(n.seconds,s.seconds);return r!==0?r:Dt(n.nanos,s.nanos)}function y$(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=v_(n[r],s[r]);if(i)return i}return Dt(n.length,s.length)}function w_(t){return tD(t)}function tD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=Hd(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Wd(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return Fe.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=tD(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${tD(e.fields[i])}`;return s+"}"}(t.mapValue):ze(61005,{value:t})}function EI(t){switch(Kd(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=EA(t);return e?16+EI(e):16;case 5:return 2*t.stringValue.length;case 6:return Wd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+EI(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Ef(n.fields,(r,i)=>{s+=r.length+EI(i)}),s}(t.mapValue);default:throw ze(13486,{value:t})}}function nD(t){return!!t&&"integerValue"in t}function LV(t){return!!t&&"arrayValue"in t}function v$(t){return!!t&&"nullValue"in t}function w$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function TI(t){return!!t&&"mapValue"in t}function Pxe(t){return(t?.mapValue?.fields||{})[mte]?.stringValue===_te}function Iw(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ef(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Iw(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Iw(t.arrayValue.values[n]);return e}return{...t}}function Nxe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Axe}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!TI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iw(n)}setAll(e){let n=Er.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Iw(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());TI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hc(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];TI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Ef(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Gi(Iw(this.value))}}function yte(t){const e=[];return Ef(t.fields,(n,s)=>{const r=new Er([n]);if(TI(s)){const i=yte(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new mo(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hr{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Hr(e,0,ot.min(),ot.min(),ot.min(),Gi.empty(),0)}static newFoundDocument(e,n,s,r){return new Hr(e,1,n,ot.min(),s,r,0)}static newNoDocument(e,n){return new Hr(e,2,n,ot.min(),ot.min(),Gi.empty(),0)}static newUnknownDocument(e,n){return new Hr(e,3,n,ot.min(),ot.min(),Gi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _S{constructor(e,n){this.position=e,this.inclusive=n}}function b$(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Fe.comparator(Fe.fromName(o.referenceValue),n.key):s=v_(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function E$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hc(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yS{constructor(e,n="asc"){this.field=e,this.dir=n}}function xxe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vte{}class Fs extends vte{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new Dxe(e,n,s):n==="array-contains"?new Fxe(e,s):n==="in"?new Vxe(e,s):n==="not-in"?new Uxe(e,s):n==="array-contains-any"?new qxe(e,s):new Fs(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Lxe(e,s):new Mxe(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(v_(n,this.value)):n!==null&&Kd(this.value)===Kd(n)&&this.matchesComparison(v_(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wc extends vte{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Wc(e,n)}matches(e){return wte(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wte(t){return t.op==="and"}function bte(t){return Oxe(t)&&wte(t)}function Oxe(t){for(const e of t.filters)if(e instanceof Wc)return!1;return!0}function sD(t){if(t instanceof Fs)return t.field.canonicalString()+t.op.toString()+w_(t.value);if(bte(t))return t.filters.map(e=>sD(e)).join(",");{const e=t.filters.map(n=>sD(n)).join(",");return`${t.op}(${e})`}}function Ete(t,e){return t instanceof Fs?function(n,s){return s instanceof Fs&&n.op===s.op&&n.field.isEqual(s.field)&&Hc(n.value,s.value)}(t,e):t instanceof Wc?function(n,s){return s instanceof Wc&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&Ete(i,s.filters[o]),!0):!1}(t,e):void ze(19439)}function Tte(t){return t instanceof Fs?function(e){return`${e.field.canonicalString()} ${e.op} ${w_(e.value)}`}(t):t instanceof Wc?function(e){return e.op.toString()+" {"+e.getFilters().map(Tte).join(" ,")+"}"}(t):"Filter"}class Dxe extends Fs{constructor(e,n,s){super(e,n,s),this.key=Fe.fromName(s.referenceValue)}matches(e){const n=Fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Lxe extends Fs{constructor(e,n){super(e,"in",n),this.keys=Cte("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Mxe extends Fs{constructor(e,n){super(e,"not-in",n),this.keys=Cte("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cte(t,e){return(e.arrayValue?.values||[]).map(n=>Fe.fromName(n.referenceValue))}class Fxe extends Fs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return LV(n)&&Yb(n.arrayValue,this.value)}}class Vxe extends Fs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yb(this.value.arrayValue,n)}}class Uxe extends Fs{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yb(this.value.arrayValue,n)}}class qxe extends Fs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!LV(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Yb(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jxe{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function T$(t,e=null,n=[],s=[],r=null,i=null,o=null){return new jxe(t,e,n,s,r,i,o)}function MV(t){const e=ft(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>sD(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),bA(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>w_(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>w_(s)).join(",")),e.Te=n}return e.Te}function FV(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xxe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ete(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E$(t.startAt,e.startAt)&&E$(t.endAt,e.endAt)}function rD(t){return Fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TA{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bxe(t,e,n,s,r,i,o,a){return new TA(t,e,n,s,r,i,o,a)}function CA(t){return new TA(t)}function C$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $xe(t){return t.collectionGroup!==null}function Sw(t){const e=ft(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new $s(Er.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new yS(r,s))}),n.has(Er.keyField().canonicalString())||e.Ie.push(new yS(Er.keyField(),s))}return e.Ie}function Rc(t){const e=ft(t);return e.Ee||(e.Ee=zxe(e,Sw(t))),e.Ee}function zxe(t,e){if(t.limitType==="F")return T$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new yS(r.field,i)});const n=t.endAt?new _S(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new _S(t.startAt.position,t.startAt.inclusive):null;return T$(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function iD(t,e,n){return new TA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function IA(t,e){return FV(Rc(t),Rc(e))&&t.limitType===e.limitType}function Ite(t){return`${MV(Rc(t))}|lt:${t.limitType}`}function sm(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>Tte(s)).join(", ")}]`),bA(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>w_(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>w_(s)).join(",")),`Target(${n})`}(Rc(t))}; limitType=${t.limitType})`}function SA(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Fe.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of Sw(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=b$(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Sw(n),s)||n.endAt&&!function(r,i,o){const a=b$(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Sw(n),s))}(t,e)}function Hxe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ste(t){return(e,n)=>{let s=!1;for(const r of Sw(t)){const i=Wxe(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Wxe(t,e,n){const s=t.field.isKeyField()?Fe.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?v_(a,l):ze(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ze(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vg{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ef(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return ute(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kxe=new Cs(Fe.comparator);function su(){return Kxe}const kte=new Cs(Fe.comparator);function Nv(...t){let e=kte;for(const n of t)e=e.insert(n.key,n);return e}function Rte(t){let e=kte;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function cp(){return kw()}function Ate(){return kw()}function kw(){return new vg(t=>t.toString(),(t,e)=>t.isEqual(e))}const Gxe=new Cs(Fe.comparator),Qxe=new $s(Fe.comparator);function Ft(...t){let e=Qxe;for(const n of t)e=e.add(n);return e}const Yxe=new $s(Dt);function Xxe(){return Yxe}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VV(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pS(e)?"-0":e}}function Pte(t){return{integerValue:""+t}}function Jxe(t,e){return Cxe(e)?Pte(e):VV(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kA{constructor(){this._=void 0}}function Zxe(t,e,n){return t instanceof Xb?function(s,r){const i={fields:{[fte]:{stringValue:dte},[gte]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&DV(r)&&(r=EA(r)),r&&(i.fields[pte]=r),{mapValue:i}}(n,e):t instanceof Jb?xte(t,e):t instanceof Zb?Ote(t,e):function(s,r){const i=Nte(s,r),o=I$(i)+I$(s.Ae);return nD(i)&&nD(s.Ae)?Pte(o):VV(s.serializer,o)}(t,e)}function eOe(t,e,n){return t instanceof Jb?xte(t,e):t instanceof Zb?Ote(t,e):n}function Nte(t,e){return t instanceof vS?function(n){return nD(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Xb extends kA{}class Jb extends kA{constructor(e){super(),this.elements=e}}function xte(t,e){const n=Dte(e);for(const s of t.elements)n.some(r=>Hc(r,s))||n.push(s);return{arrayValue:{values:n}}}class Zb extends kA{constructor(e){super(),this.elements=e}}function Ote(t,e){let n=Dte(e);for(const s of t.elements)n=n.filter(r=>!Hc(r,s));return{arrayValue:{values:n}}}class vS extends kA{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function I$(t){return cs(t.integerValue||t.doubleValue)}function Dte(t){return LV(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tOe{constructor(e,n){this.field=e,this.transform=n}}function nOe(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Jb&&s instanceof Jb||n instanceof Zb&&s instanceof Zb?y_(n.elements,s.elements,Hc):n instanceof vS&&s instanceof vS?Hc(n.Ae,s.Ae):n instanceof Xb&&s instanceof Xb}(t.transform,e.transform)}class sOe{constructor(e,n){this.version=e,this.transformResults=n}}class La{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new La}static exists(e){return new La(void 0,e)}static updateTime(e){return new La(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function CI(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class RA{}function Lte(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new UV(t.key,La.none()):new bT(t.key,t.data,La.none());{const n=t.data,s=Gi.empty();let r=new $s(Er.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Tf(t.key,s,new mo(r.toArray()),La.none())}}function rOe(t,e,n){t instanceof bT?function(s,r,i){const o=s.value.clone(),a=k$(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Tf?function(s,r,i){if(!CI(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=k$(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Mte(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Rw(t,e,n,s){return t instanceof bT?function(r,i,o,a){if(!CI(r.precondition,i))return o;const l=r.value.clone(),u=R$(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Tf?function(r,i,o,a){if(!CI(r.precondition,i))return o;const l=R$(r.fieldTransforms,a,i),u=i.data;return u.setAll(Mte(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return CI(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function iOe(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Nte(s.transform,r||null);i!=null&&(n===null&&(n=Gi.empty()),n.set(s.field,i))}return n||null}function S$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&y_(n,s,(r,i)=>nOe(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bT extends RA{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tf extends RA{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mte(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function k$(t,e,n){const s=new Map;rn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,eOe(o,a,n[r]))}return s}function R$(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Zxe(i,o,e))}return s}class UV extends RA{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oOe extends RA{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aOe{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&rOe(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Rw(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Rw(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ate();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Lte(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ot.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ft())}isEqual(e){return this.batchId===e.batchId&&y_(this.mutations,e.mutations,(n,s)=>S$(n,s))&&y_(this.baseMutations,e.baseMutations,(n,s)=>S$(n,s))}}class qV{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){rn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return Gxe}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new qV(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cOe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lOe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ms,Bt;function uOe(t){switch(t){case ue.OK:return ze(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return ze(15467,{code:t})}}function Fte(t){if(t===void 0)return nu("GRPC error has no .code"),ue.UNKNOWN;switch(t){case ms.OK:return ue.OK;case ms.CANCELLED:return ue.CANCELLED;case ms.UNKNOWN:return ue.UNKNOWN;case ms.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case ms.INTERNAL:return ue.INTERNAL;case ms.UNAVAILABLE:return ue.UNAVAILABLE;case ms.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case ms.NOT_FOUND:return ue.NOT_FOUND;case ms.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case ms.ABORTED:return ue.ABORTED;case ms.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case ms.DATA_LOSS:return ue.DATA_LOSS;default:return ze(39323,{code:t})}}(Bt=ms||(ms={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hOe(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dOe=new hd([4294967295,4294967295],0);function A$(t){const e=hOe().encode(t),n=new ete;return n.update(e),new Uint8Array(n.digest())}function P$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hd([n,s],0),new hd([r,i],0)]}class jV{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new xv(`Invalid padding: ${n}`);if(s<0)throw new xv(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xv(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new xv(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hd.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(hd.fromNumber(s)));return r.compare(dOe)===1&&(r=new hd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A$(e),[s,r]=P$(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jV(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=A$(e),[s,r]=P$(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class xv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AA{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ET.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new AA(ot.min(),r,new Cs(Dt),su(),Ft())}}class ET{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ET(s,n,Ft(),Ft(),Ft())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class II{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Vte{constructor(e,n){this.targetId=e,this.Ce=n}}class Ute{constructor(e,n,s=kr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class N${constructor(){this.ve=0,this.Fe=x$(),this.Me=kr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ft(),n=Ft(),s=Ft();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ze(38017,{changeType:i})}}),new ET(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=x$()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fOe{constructor(e){this.Ge=e,this.ze=new Map,this.je=su(),this.Je=CC(),this.He=CC(),this.Ye=new Cs(Dt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(rD(i))if(s===0){const o=new Fe(i.path);this.et(n,o,Hr.newNoDocument(o,ot.min()))}else rn(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Wd(s).toUint8Array()}catch(l){if(l instanceof hte)return __("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new jV(o,r,i)}catch(l){return __(l instanceof xv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&rD(a.target)){const l=new Fe(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Hr.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Ft();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new AA(e,n,this.Ye,this.je,s);return this.je=su(),this.Je=CC(),this.He=CC(),this.Ye=new Cs(Dt),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new N$,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new $s(Dt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new $s(Dt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function CC(){return new Cs(Fe.comparator)}function x$(){return new Cs(Fe.comparator)}const pOe={asc:"ASCENDING",desc:"DESCENDING"},gOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mOe={and:"AND",or:"OR"};class _Oe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oD(t,e){return t.useProto3Json||bA(e)?e:{value:e}}function wS(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qte(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yOe(t,e){return wS(t,e.toTimestamp())}function Ac(t){return rn(!!t,49232),ot.fromTimestamp(function(e){const n=Hd(e);return new On(n.seconds,n.nanos)}(t))}function BV(t,e){return aD(t,e).canonicalString()}function aD(t,e){const n=function(s){return new xs(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jte(t){const e=xs.fromString(t);return rn(Wte(e),10190,{key:e.toString()}),e}function cD(t,e){return BV(t.databaseId,e.path)}function fN(t,e){const n=jte(e);if(n.get(1)!==t.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fe($te(n))}function Bte(t,e){return BV(t.databaseId,e)}function vOe(t){const e=jte(t);return e.length===4?xs.emptyPath():$te(e)}function lD(t){return new xs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $te(t){return rn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O$(t,e,n){return{name:cD(t,e),fields:n.value.mapValue.fields}}function wOe(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ze(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.useProto3Json?(rn(u===void 0||typeof u=="string",58123),kr.fromBase64String(u||"")):(rn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),kr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?ue.UNKNOWN:Fte(l.code);return new Ae(u,l.message||"")}(o);n=new Ute(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=fN(t,s.document.name),i=Ac(s.document.updateTime),o=s.document.createTime?Ac(s.document.createTime):ot.min(),a=new Gi({mapValue:{fields:s.document.fields}}),l=Hr.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new II(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=fN(t,s.document),i=s.readTime?Ac(s.readTime):ot.min(),o=Hr.newNoDocument(r,i),a=s.removedTargetIds||[];n=new II([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=fN(t,s.document),i=s.removedTargetIds||[];n=new II([],i,r,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new lOe(r,i),a=s.targetId;n=new Vte(a,o)}}return n}function bOe(t,e){let n;if(e instanceof bT)n={update:O$(t,e.key,e.value)};else if(e instanceof UV)n={delete:cD(t,e.key)};else if(e instanceof Tf)n={update:O$(t,e.key,e.data),updateMask:POe(e.fieldMask)};else{if(!(e instanceof oOe))return ze(16599,{Vt:e.type});n={verify:cD(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Xb)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Jb)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Zb)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof vS)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw ze(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:yOe(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ze(27497)}(t,e.precondition)),n}function EOe(t,e){return t&&t.length>0?(rn(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Ac(s.updateTime):Ac(r);return i.isEqual(ot.min())&&(i=Ac(r)),new sOe(i,s.transformResults||[])}(n,e))):[]}function TOe(t,e){return{documents:[Bte(t,e.path)]}}function COe(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Bte(t,r);const i=function(l){if(l.length!==0)return Hte(Wc.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:rm(h.field),direction:kOe(h.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=oD(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:r}}function IOe(t){let e=vOe(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){rn(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=zte(h);return d instanceof Wc&&bte(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new yS(im(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,bA(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new _S(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new _S(p,d)}(n.endAt)),Bxe(e,r,o,i,a,"F",l,u)}function SOe(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zte(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=im(e.unaryFilter.field);return Fs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=im(e.unaryFilter.field);return Fs.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=im(e.unaryFilter.field);return Fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=im(e.unaryFilter.field);return Fs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}}(t):t.fieldFilter!==void 0?function(e){return Fs.create(im(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Wc.create(e.compositeFilter.filters.map(n=>zte(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ze(1026)}}(e.compositeFilter.op))}(t):ze(30097,{filter:t})}function kOe(t){return pOe[t]}function ROe(t){return gOe[t]}function AOe(t){return mOe[t]}function rm(t){return{fieldPath:t.canonicalString()}}function im(t){return Er.fromServerFormat(t.fieldPath)}function Hte(t){return t instanceof Fs?function(e){if(e.op==="=="){if(w$(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NAN"}};if(v$(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(w$(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NAN"}};if(v$(e.value))return{unaryFilter:{field:rm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rm(e.field),op:ROe(e.op),value:e.value}}}(t):t instanceof Wc?function(e){const n=e.getFilters().map(s=>Hte(s));return n.length===1?n[0]:{compositeFilter:{op:AOe(e.op),filters:n}}}(t):ze(54877,{filter:t})}function POe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wte(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yh{constructor(e,n,s,r,i=ot.min(),o=ot.min(),a=kr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Yh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NOe{constructor(e){this.yt=e}}function xOe(t){const e=IOe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iD(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OOe{constructor(){this.Cn=new DOe}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(zd.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(zd.min())}updateCollectionGroup(e,n,s){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class DOe{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new $s(xs.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new $s(xs.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const D$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kte=41943040;class Wi{static withCacheSize(e){return new Wi(e,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Wi.DEFAULT_COLLECTION_PERCENTILE=10,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wi.DEFAULT=new Wi(Kte,Wi.DEFAULT_COLLECTION_PERCENTILE,Wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wi.DISABLED=new Wi(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class b_{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new b_(0)}static cr(){return new b_(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const L$="LruGarbageCollector",LOe=1048576;function M$([t,e],[n,s]){const r=Dt(t,n);return r===0?Dt(e,s):r}class MOe{constructor(e){this.Ir=e,this.buffer=new $s(M$),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();M$(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FOe{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(L$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){iy(n)?Ie(L$,"Ignoring IndexedDB error during garbage collection: ",n):await ry(n)}await this.Vr(3e5)})}}class VOe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(wA.ce);const s=new MOe(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(D$)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D$):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),nm()<=kt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function UOe(t,e){return new VOe(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qOe{constructor(){this.changes=new vg(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?oe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jOe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BOe{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Rw(s.mutation,r,mo.empty(),On.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ft()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ft()){const r=cp();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Nv();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=cp();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ft()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=su();const o=kw(),a=function(){return kw()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Tf)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Rw(h.mutation,u,h.mutation.getFieldMask(),On.now())):o.set(u.key,mo.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new jOe(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=kw();let r=new Cs((o,a)=>o-a),i=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||mo.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Ft()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=Ate();h.forEach(p=>{if(!i.has(p)){const m=Lte(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return oe.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return Fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$xe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):oe.resolve(cp());let a=Kb,l=i;return o.next(u=>oe.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?oe.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Ft())).next(h=>({batchId:a,changes:Rte(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Fe(n)).next(s=>{let r=Nv();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Nv();return this.indexManager.getCollectionParents(e,i).next(a=>oe.forEach(a,l=>{const u=function(h,d){return new TA(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Hr.newInvalidDocument(h)))});let a=Nv();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Rw(h.mutation,u,mo.empty(),On.now()),SA(n,u)&&(a=a.insert(l,u))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Oe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ac(s.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:xOe(s.bundledQuery),readTime:Ac(s.readTime)}}(n)),oe.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zOe{constructor(){this.overlays=new Cs(Fe.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=cp();return oe.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),oe.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,n,s){const r=cp(),i=n.length+1,o=new Fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Cs((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=cp(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=cp(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return oe.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new cOe(n,s));let i=this.qr.get(n);i===void 0&&(i=Ft(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HOe{constructor(){this.sessionToken=kr.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $V{constructor(){this.Qr=new $s(Xs.$r),this.Ur=new $s(Xs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Xs(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Xs(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Fe(new xs([])),s=new Xs(n,e),r=new Xs(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Fe(new xs([])),s=new Xs(n,e),r=new Xs(n,e+1);let i=Ft();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xs(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Xs{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Fe.comparator(e.key,n.key)||Dt(e.Yr,n.Yr)}static Kr(e,n){return Dt(e.Yr,n.Yr)||Fe.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WOe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new $s(Xs.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aOe(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Xs(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return oe.resolve(o)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?OV:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Xs(n,0),r=new Xs(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new $s(Dt);return n.forEach(r=>{const i=new Xs(r,0),o=new Xs(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Fe.isDocumentKey(i)||(i=i.child(""));const o=new Xs(new Fe(i),0);let a=new $s(Dt);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),oe.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){rn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(n.mutations,r=>{const i=new Xs(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Xs(n,0),r=this.Zr.firstAfterOrEqual(s);return oe.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KOe{constructor(e){this.ri=e,this.docs=function(){return new Cs(Fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return oe.resolve(s?s.document.mutableCopy():Hr.newInvalidDocument(n))}getEntries(e,n){let s=su();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Hr.newInvalidDocument(r))}),oe.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=su();const o=n.path,a=new Fe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wxe(vxe(h),s)<=0||(r.has(h.key)||SA(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ze(9500)}ii(e,n){return oe.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new GOe(this)}getSize(e){return oe.resolve(this.size)}}class GOe extends qOe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QOe{constructor(e){this.persistence=e,this.si=new vg(n=>MV(n),FV),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.oi=0,this._i=new $V,this.targetCount=0,this.ai=b_.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new b_(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),oe.waitFor(i).next(()=>r)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return oe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),oe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),oe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return oe.resolve(s)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gte{constructor(e,n){this.ui={},this.overlays={},this.ci=new wA(0),this.li=!1,this.li=!0,this.hi=new HOe,this.referenceDelegate=e(this),this.Pi=new QOe(this),this.indexManager=new OOe,this.remoteDocumentCache=function(s){return new KOe(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new NOe(n),this.Ii=new $Oe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zOe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new WOe(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ie("MemoryPersistence","Starting transaction:",e);const r=new YOe(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return oe.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class YOe extends Exe{constructor(e){super(),this.currentSequenceNumber=e}}class zV{constructor(e){this.persistence=e,this.Ri=new $V,this.Vi=null}static mi(e){return new zV(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,s=>{const r=Fe.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,ot.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class bS{constructor(e,n){this.persistence=e,this.pi=new vg(s=>Ixe(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=UOe(this,n)}static mi(e,n){return new bS(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return oe.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?oe.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,ot.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=EI(e.data.value)),n}br(e,n,s){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return oe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HV{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ft(),r=Ft();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new HV(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JOe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return JAe()?8:Txe(ni())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new XOe;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(nm()<=kt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",sm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(nm()<=kt.DEBUG&&Ie("QueryEngine","Query:",sm(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(nm()<=kt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",sm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rc(n))):oe.resolve())}ys(e,n){if(C$(n))return oe.resolve(null);let s=Rc(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=iD(n,null,"F"),s=Rc(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ft(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,iD(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return C$(n)||r.isEqual(ot.min())?oe.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?oe.resolve(null):(nm()<=kt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sm(n)),this.vs(e,o,n,yxe(r,Kb)).next(a=>a))})}Ds(e,n){let s=new $s(Ste(e));return n.forEach((r,i)=>{SA(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return nm()<=kt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",sm(n)),this.ps.getDocumentsMatchingQuery(e,n,zd.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WV="LocalStore",ZOe=3e8;class eDe{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Cs(Dt),this.xs=new vg(i=>MV(i),FV),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BOe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function tDe(t,e,n,s){return new eDe(t,e,n,s)}async function Qte(t,e){const n=ft(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Ft();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function nDe(t,e){const n=ft(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const h=l.batch,d=h.keys();let p=oe.resolve();return d.forEach(m=>{p=p.next(()=>u.getEntry(a,m)).next(w=>{const k=l.docVersions.get(m);rn(k!==null,48541),w.version.compareTo(k)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),u.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Ft();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Yte(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function sDe(t,e){const n=ft(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(kr.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,k,P){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=ZOe?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=su(),u=Ft();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(rDe(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(ot.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return oe.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function rDe(t,e,n){let s=Ft(),r=Ft();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=su();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ot.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ie(WV,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function iDe(t,e){const n=ft(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=OV),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function oDe(t,e){const n=ft(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,oe.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Yh(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function uD(t,e,n){const s=ft(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!iy(o))throw o;Ie(WV,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function F$(t,e,n){const s=ft(t);let r=ot.min(),i=Ft();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,l,u){const h=ft(a),d=h.xs.get(u);return d!==void 0?oe.resolve(h.Ms.get(d)):h.Pi.getTargetData(l,u)}(s,o,Rc(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ot.min(),n?i:Ft())).next(a=>(aDe(s,Hxe(e),a),{documents:a,Qs:i})))}function aDe(t,e,n){let s=t.Os.get(e)||ot.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class V${constructor(){this.activeTargetIds=Xxe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cDe{constructor(){this.Mo=new V$,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V$,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lDe{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const U$="ConnectivityMonitor";class q${constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(U$,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(U$,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let IC=null;function hD(){return IC===null?IC=function(){return 268435456+Math.round(2147483648*Math.random())}():IC++,"0x"+IC.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pN="RestConnection",uDe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hDe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===gS?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=hD(),a=this.zo(e,n.toUriEncodedString());Ie(pN,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=el(u);return this.Jo(e,a,l,s,h).then(d=>(Ie(pN,`Received RPC '${e}' ${o}: `,d),d),d=>{throw __(pN,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sy}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=uDe[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dDe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pr="WebChannelConnection";class fDe extends hDe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=hD();return new Promise((a,l)=>{const u=new tte;u.setWithCredentials(!0),u.listenOnce(nte.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wI.NO_ERROR:const d=u.getResponseJson();Ie(Pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case wI.TIMEOUT:Ie(Pr,`RPC '${e}' ${o} timed out`),l(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case wI.HTTP_ERROR:const p=u.getStatus();if(Ie(Pr,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(D)>=0?D:ue.UNKNOWN}(w.status);l(new Ae(k,w.message))}else l(new Ae(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ie(Pr,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Ie(Pr,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=hD(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ite(),a=rte(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");Ie(Pr,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new dDe({Yo:P=>{m?Ie(Pr,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Ie(Pr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Ie(Pr,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,D,M)=>{P.listen(D,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,Pv.EventType.OPEN,()=>{m||(Ie(Pr,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,Pv.EventType.CLOSE,()=>{m||(m=!0,Ie(Pr,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,Pv.EventType.ERROR,P=>{m||(m=!0,__(Pr,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))}),k(d,Pv.EventType.MESSAGE,P=>{if(!m){const D=P.data[0];rn(!!D,16349);const M=D,V=M?.error||M[0]?.error;if(V){Ie(Pr,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(I){const v=ms[I];if(v!==void 0)return Fte(v)}(q),X=V.message;H===void 0&&(H=ue.INTERNAL,X="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Ae(H,X)),d.close()}else Ie(Pr,`RPC '${e}' stream ${r} received:`,D),w.u_(D)}}),k(a,ste.STAT_EVENT,P=>{P.stat===JO.PROXY?Ie(Pr,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===JO.NOPROXY&&Ie(Pr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gN(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PA(t){return new _Oe(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xte{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const j$="PersistentStream";class Jte{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xte(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(nu(n.toString()),nu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ie(j$,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ie(j$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pDe extends Jte{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wOe(this.serializer,e),s=function(r){if(!("targetChange"in r))return ot.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?ot.min():i.readTime?Ac(i.readTime):ot.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=lD(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=rD(a)?{documents:TOe(r,a)}:{query:COe(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=qte(r,i.resumeToken);const l=oD(r,i.expectedCount);l!==null&&(o.expectedCount=l)}else if(i.snapshotVersion.compareTo(ot.min())>0){o.readTime=wS(r,i.snapshotVersion.toTimestamp());const l=oD(r,i.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const s=SOe(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=lD(this.serializer),n.removeTarget=e,this.q_(n)}}class gDe extends Jte{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=EOe(e.writeResults,e.commitTime),s=Ac(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=lD(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>bOe(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mDe{}class _De extends mDe{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,aD(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ue.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,aD(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ue.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class yDe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nu(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Gp="RemoteStore";class vDe{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{wg(this)&&(Ie(Gp,"Restarting streams for network reachability change."),await async function(a){const l=ft(a);l.Ea.add(4),await TT(l),l.Ra.set("Unknown"),l.Ea.delete(4),await NA(l)}(this))})}),this.Ra=new yDe(s,r)}}async function NA(t){if(wg(t))for(const e of t.da)await e(!0)}async function TT(t){for(const e of t.da)await e(!1)}function Zte(t,e){const n=ft(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),YV(n)?QV(n):oy(n).O_()&&GV(n,e))}function KV(t,e){const n=ft(t),s=oy(n);n.Ia.delete(e),s.O_()&&ene(n,e),n.Ia.size===0&&(s.O_()?s.L_():wg(n)&&n.Ra.set("Unknown"))}function GV(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ot.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oy(t).Y_(e)}function ene(t,e){t.Va.Ue(e),oy(t).Z_(e)}function QV(t){t.Va=new fOe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oy(t).start(),t.Ra.ua()}function YV(t){return wg(t)&&!oy(t).x_()&&t.Ia.size>0}function wg(t){return ft(t).Ea.size===0}function tne(t){t.Va=void 0}async function wDe(t){t.Ra.set("Online")}async function bDe(t){t.Ia.forEach((e,n)=>{GV(t,e)})}async function EDe(t,e){tne(t),YV(t)?(t.Ra.ha(e),QV(t)):t.Ra.set("Unknown")}async function TDe(t,e,n){if(t.Ra.set("Online"),e instanceof Ute&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){Ie(Gp,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ES(t,s)}else if(e instanceof II?t.Va.Ze(e):e instanceof Vte?t.Va.st(e):t.Va.tt(e),!n.isEqual(ot.min()))try{const s=await Yte(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.Ia.get(l);u&&r.Ia.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,l)=>{const u=r.Ia.get(a);if(!u)return;r.Ia.set(a,u.withResumeToken(kr.EMPTY_BYTE_STRING,u.snapshotVersion)),ene(r,a);const h=new Yh(u.target,a,l,u.sequenceNumber);GV(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){Ie(Gp,"Failed to raise snapshot:",s),await ES(t,s)}}async function ES(t,e,n){if(!iy(e))throw e;t.Ea.add(1),await TT(t),t.Ra.set("Offline"),n||(n=()=>Yte(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie(Gp,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await NA(t)})}function nne(t,e){return e().catch(n=>ES(t,n,e))}async function xA(t){const e=ft(t),n=Gd(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:OV;for(;CDe(e);)try{const r=await iDe(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,IDe(e,r)}catch(r){await ES(e,r)}sne(e)&&rne(e)}function CDe(t){return wg(t)&&t.Ta.length<10}function IDe(t,e){t.Ta.push(e);const n=Gd(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sne(t){return wg(t)&&!Gd(t).x_()&&t.Ta.length>0}function rne(t){Gd(t).start()}async function SDe(t){Gd(t).ra()}async function kDe(t){const e=Gd(t);for(const n of t.Ta)e.ea(n.mutations)}async function RDe(t,e,n){const s=t.Ta.shift(),r=qV.from(s,e,n);await nne(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await xA(t)}async function ADe(t,e){e&&Gd(t).X_&&await async function(n,s){if(function(r){return uOe(r)&&r!==ue.ABORTED}(s.code)){const r=n.Ta.shift();Gd(n).B_(),await nne(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await xA(n)}}(t,e),sne(t)&&rne(t)}async function B$(t,e){const n=ft(t);n.asyncQueue.verifyOperationInProgress(),Ie(Gp,"RemoteStore received new credentials");const s=wg(n);n.Ea.add(3),await TT(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await NA(n)}async function PDe(t,e){const n=ft(t);e?(n.Ea.delete(2),await NA(n)):e||(n.Ea.add(2),await TT(n),n.Ra.set("Unknown"))}function oy(t){return t.ma||(t.ma=function(e,n,s){const r=ft(e);return r.sa(),new pDe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:wDe.bind(null,t),t_:bDe.bind(null,t),r_:EDe.bind(null,t),H_:TDe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),YV(t)?QV(t):t.Ra.set("Unknown")):(await t.ma.stop(),tne(t))})),t.ma}function Gd(t){return t.fa||(t.fa=function(e,n,s){const r=ft(e);return r.sa(),new gDe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:SDe.bind(null,t),r_:ADe.bind(null,t),ta:kDe.bind(null,t),na:RDe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xA(t)):(await t.fa.stop(),t.Ta.length>0&&(Ie(Gp,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XV{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new dd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new XV(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JV(t,e){if(nu("AsyncQueue",`${e}: ${t}`),iy(t))return new Ae(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dm{static emptySet(e){return new Dm(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Fe.comparator(n.key,s.key):(n,s)=>Fe.comparator(n.key,s.key),this.keyedMap=Nv(),this.sortedSet=new Cs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Dm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Dm;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $${constructor(){this.ga=new Cs(Fe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class E_{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new E_(e,n,Dm.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&IA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NDe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xDe{constructor(){this.queries=z$(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=ft(e),r=s.queries;s.queries=z$(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function z$(){return new vg(t=>Ite(t),IA)}async function ine(t,e){const n=ft(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new NDe,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=JV(o,`Initialization of query '${sm(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ZV(n)}async function one(t,e){const n=ft(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ODe(t,e){const n=ft(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&ZV(n)}function DDe(t,e,n){const s=ft(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function ZV(t){t.Ca.forEach(e=>{e.next()})}var dD,H$;(H$=dD||(dD={})).Ma="default",H$.Cache="cache";class ane{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new E_(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=E_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dD.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cne{constructor(e){this.key=e}}class lne{constructor(e){this.key=e}}class LDe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=Ste(e),this.tu=new Dm(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new $$,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=SA(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:k})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new E_(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $$,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ft(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new lne(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new cne(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return E_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const eU="SyncEngine";class MDe{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class FDe{constructor(e){this.key=e,this.hu=!1}}class VDe{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vg(a=>Ite(a),IA),this.Iu=new Map,this.Eu=new Set,this.du=new Cs(Fe.comparator),this.Au=new Map,this.Ru=new $V,this.Vu={},this.mu=new Map,this.fu=b_.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UDe(t,e,n=!0){const s=gne(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await une(s,e,n,!0),r}async function qDe(t,e){const n=gne(t);await une(n,e,!0,!1)}async function une(t,e,n,s){const r=await oDe(t.localStore,Rc(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await jDe(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Zte(t.remoteStore,r),a}async function jDe(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,k,P,D){let M=k.view.ru(P);M.Cs&&(M=await F$(w.localStore,k.query,!1).then(({documents:X})=>k.view.ru(X,M)));const V=D&&D.targetChanges.get(k.targetId),q=D&&D.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(M,w.isPrimaryClient,V,q);return K$(w,k.targetId,H.au),H.snapshot}(t,d,p,m);const i=await F$(t.localStore,e,!0),o=new LDe(e,i.Qs),a=o.ru(i.documents),l=ET.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);K$(t,n,u.au);const h=new MDe(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function BDe(t,e,n){const s=ft(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!IA(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await uD(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&KV(s.remoteStore,r.targetId),fD(s,r.targetId)}).catch(ry)):(fD(s,r.targetId),await uD(s.localStore,r.targetId,!0))}async function $De(t,e){const n=ft(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),KV(n.remoteStore,s.targetId))}async function zDe(t,e,n){const s=XDe(t);try{const r=await function(i,o){const a=ft(i),l=On.now(),u=o.reduce((p,m)=>p.add(m.key),Ft());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=su(),w=Ft();return a.Ns.getEntries(p,u).next(k=>{m=k,m.forEach((P,D)=>{D.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(k=>{h=k;const P=[];for(const D of o){const M=iOe(D,h.get(D.key).overlayedDocument);M!=null&&P.push(new Tf(D.key,M,yte(M.value.mapValue),La.exists(!0)))}return a.mutationQueue.addMutationBatch(p,l,P,o)}).next(k=>{d=k;const P=k.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,k.batchId,P)})}).then(()=>({batchId:d.batchId,changes:Rte(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.Vu[i.currentUser.toKey()];l||(l=new Cs(Dt)),l=l.insert(o,a),i.Vu[i.currentUser.toKey()]=l}(s,r.batchId,n),await CT(s,r.changes),await xA(s.remoteStore)}catch(r){const i=JV(r,"Failed to persist write");n.reject(i)}}async function hne(t,e){const n=ft(t);try{const s=await sDe(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(rn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?rn(o.hu,14607):r.removedDocuments.size>0&&(rn(o.hu,42227),o.hu=!1))}),await CT(n,s,e)}catch(s){await ry(s)}}function W$(t,e,n){const s=ft(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=ft(i);a.onlineState=o;let l=!1;a.queries.forEach((u,h)=>{for(const d of h.Sa)d.va(o)&&(l=!0)}),l&&ZV(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function HDe(t,e,n){const s=ft(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Cs(Fe.comparator);o=o.insert(i,Hr.newNoDocument(i,ot.min()));const a=Ft().add(i),l=new AA(ot.min(),new Map,new Cs(Dt),o,a);await hne(s,l),s.du=s.du.remove(i),s.Au.delete(e),tU(s)}else await uD(s.localStore,e,!1).then(()=>fD(s,e,n)).catch(ry)}async function WDe(t,e){const n=ft(t),s=e.batch.batchId;try{const r=await nDe(n.localStore,e);fne(n,s,null),dne(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await CT(n,r)}catch(r){await ry(r)}}async function KDe(t,e,n){const s=ft(t);try{const r=await function(i,o){const a=ft(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(h=>(rn(h!==null,37113),u=h.keys(),a.mutationQueue.removeMutationBatch(l,h))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);fne(s,e,n),dne(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await CT(s,r)}catch(r){await ry(r)}}function dne(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fne(t,e,n){const s=ft(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function fD(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||pne(t,s)})}function pne(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(KV(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tU(t))}function K$(t,e,n){for(const s of n)s instanceof cne?(t.Ru.addReference(s.key,e),GDe(t,s)):s instanceof lne?(Ie(eU,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||pne(t,s.key)):ze(19791,{wu:s})}function GDe(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ie(eU,"New document in limbo: "+n),t.Eu.add(s),tU(t))}function tU(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Fe(xs.fromString(e)),s=t.fu.next();t.Au.set(s,new FDe(n)),t.du=t.du.insert(n,s),Zte(t.remoteStore,new Yh(Rc(CA(n.path)),s,"TargetPurposeLimboResolution",wA.ce))}}async function CT(t,e,n){const s=ft(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=HV.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,l){const u=ft(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>oe.forEach(l,d=>oe.forEach(d.Es,p=>u.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>oe.forEach(d.ds,p=>u.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!iy(h))throw h;Ie(WV,"Failed to update sequence numbers: "+h)}for(const h of l){const d=h.targetId;if(!h.fromCache){const p=u.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(d,w)}}}(s.localStore,i))}async function QDe(t,e){const n=ft(t);if(!n.currentUser.isEqual(e)){Ie(eU,"User change. New user:",e.toKey());const s=await Qte(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Ae(ue.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await CT(n,s.Ls)}}function YDe(t,e){const n=ft(t),s=n.Au.get(e);if(s&&s.hu)return Ft().add(s.key);{let r=Ft();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function gne(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hne.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YDe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HDe.bind(null,e),e.Pu.H_=ODe.bind(null,e.eventManager),e.Pu.yu=DDe.bind(null,e.eventManager),e}function XDe(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WDe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KDe.bind(null,e),e}class TS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=PA(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tDe(this.persistence,new JOe,e.initialUser,this.serializer)}Cu(e){return new Gte(zV.mi,this.serializer)}Du(e){return new cDe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}TS.provider={build:()=>new TS};class JDe extends TS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rn(this.persistence.referenceDelegate instanceof bS,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new FOe(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wi.withCacheSize(this.cacheSizeBytes):Wi.DEFAULT;return new Gte(s=>bS.mi(s,n),this.serializer)}}class pD{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>W$(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QDe.bind(null,this.syncEngine),await PDe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xDe}()}createDatastore(e){const n=PA(e.databaseInfo.databaseId),s=function(r){return new fDe(r)}(e.databaseInfo);return function(r,i,o,a){return new _De(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new vDe(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>W$(this.syncEngine,n,0),function(){return q$.v()?new q$:new lDe}())}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const h=new VDe(s,r,i,o,a,l);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=ft(e);Ie(Gp,"RemoteStore shutting down."),n.Ea.add(5),await TT(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}pD.provider={build:()=>new pD};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mne{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qd="FirestoreClient";class ZDe{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ur.UNAUTHENTICATED,this.clientId=NV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Ie(Qd,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Ie(Qd,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=JV(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function mN(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Qd,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Qte(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function G$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eLe(t);Ie(Qd,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>B$(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>B$(e.remoteStore,r)),t._onlineComponents=e}async function eLe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Qd,"Using user provided OfflineComponentProvider");try{await mN(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;__("Error using user provided cache. Falling back to memory cache: "+n),await mN(t,new TS)}}else Ie(Qd,"Using default OfflineComponentProvider"),await mN(t,new JDe(void 0));return t._offlineComponents}async function _ne(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Qd,"Using user provided OnlineComponentProvider"),await G$(t,t._uninitializedComponentsProvider._online)):(Ie(Qd,"Using default OnlineComponentProvider"),await G$(t,new pD))),t._onlineComponents}function tLe(t){return _ne(t).then(e=>e.syncEngine)}async function gD(t){const e=await _ne(t),n=e.eventManager;return n.onListen=UDe.bind(null,e.syncEngine),n.onUnlisten=BDe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qDe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$De.bind(null,e.syncEngine),n}function nLe(t,e,n={}){const s=new dd;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,l){const u=new mne({next:d=>{u.Nu(),i.enqueueAndForget(()=>one(r,h));const p=d.docs.has(o);!p&&d.fromCache?l.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?l.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),h=new ane(CA(o.path),u,{includeMetadataChanges:!0,qa:!0});return ine(r,h)}(await gD(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yne(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q$=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vne="firestore.googleapis.com",Y$=!0;class X${constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vne,this.ssl=Y$}else this.host=e.host,this.ssl=e.ssl??Y$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kte;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LOe)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_xe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yne(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nU{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X$({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X$(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new oxe;switch(n.type){case"firstParty":return new uxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Q$.get(e);n&&(Ie("ComponentProvider","Removing Datastore"),Q$.delete(e),n.terminate())}(this),Promise.resolve()}}function sLe(t,e,n,s={}){t=Da(t,nU);const r=el(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(dA(`https://${a}`),fA("Firestore",!0)),i.host!==vne&&i.host!==a&&__("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!jd(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=Ur.MOCK_USER;else{u=pV(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ur(d)}t._authCredentials=new axe(new ate(u,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OA{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new OA(this.firestore,e,this._query)}}class ws{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ws(this.firestore,e,this._key)}toJSON(){return{type:ws._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(wT(n,ws._jsonSchema))return new ws(e,s||null,new Fe(xs.fromString(n.referencePath)))}}ws._jsonSchemaVersion="firestore/documentReference/1.0",ws._jsonSchema={type:vs("string",ws._jsonSchemaVersion),referencePath:vs("string")};class eE extends OA{constructor(e,n,s){super(e,n,CA(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ws(this.firestore,null,new Fe(e))}withConverter(e){return new eE(this.firestore,e,this._path)}}function wne(t,e,...n){if(t=un(t),arguments.length===1&&(e=NV.newId()),mxe("doc","path",e),t instanceof nU){const s=xs.fromString(e,...n);return h$(s),new ws(t,null,new Fe(s))}{if(!(t instanceof ws||t instanceof eE))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(xs.fromString(e,...n));return h$(s),new ws(t.firestore,t instanceof eE?t.converter:null,new Fe(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J$="AsyncQueue";class Z${constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xte(this,"async_queue_retry"),this._c=()=>{const s=gN();s&&Ie(J$,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=gN();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gN();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new dd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!iy(e))throw e;Ie(J$,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,nu("INTERNAL UNHANDLED ERROR: ",e5(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=XV.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ze(47125,{Pc:e5(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function e5(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function t5(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Qp extends nU{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Z$,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z$(e),this._firestoreClient=void 0,await e}}}function bne(t,e){const n=typeof t=="object"?t:mA(),s=typeof t=="string"?t:gS,r=mT(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=fV("firestore");i&&sLe(r,...i)}return r}function sU(t){if(t._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rLe(t),t._firestoreClient}function rLe(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new Rxe(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,yne(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZDe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(kr.fromBase64String(e))}catch(n){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ao(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ao._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wT(e,Ao._jsonSchema))return Ao.fromBase64String(e.bytes)}}Ao._jsonSchemaVersion="firestore/bytes/1.0",Ao._jsonSchema={type:vs("string",Ao._jsonSchemaVersion),bytes:vs("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DA{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LA{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pc._jsonSchemaVersion}}static fromJSON(e){if(wT(e,Pc._jsonSchema))return new Pc(e.latitude,e.longitude)}}Pc._jsonSchemaVersion="firestore/geoPoint/1.0",Pc._jsonSchema={type:vs("string",Pc._jsonSchemaVersion),latitude:vs("number"),longitude:vs("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wT(e,Nc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nc(e.vectorValues);throw new Ae(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nc._jsonSchemaVersion="firestore/vectorValue/1.0",Nc._jsonSchema={type:vs("string",Nc._jsonSchemaVersion),vectorValues:vs("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iLe=/^__.*__$/;class oLe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Tf(e,this.data,this.fieldMask,n,this.fieldTransforms):new bT(e,this.data,n,this.fieldTransforms)}}class Ene{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Tf(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Tne(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:t})}}class rU{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rU({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return CS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Tne(this.Ac)&&iLe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aLe{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||PA(e)}Cc(e,n,s,r=!1){return new rU({Ac:e,methodName:n,Dc:s,path:Er.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cne(t){const e=t._freezeSettings(),n=PA(t._databaseId);return new aLe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cLe(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);oU("Data must be an object, but it was:",o,s);const a=Ine(s,o);let l,u;if(i.merge)l=new mo(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=mD(e,d,n);if(!o.contains(p))throw new Ae(ue.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kne(h,p)||h.push(p)}l=new mo(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new oLe(new Gi(a),l,u)}class MA extends LA{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof MA}}class iU extends LA{_toFieldTransform(e){return new tOe(e.path,new Xb)}isEqual(e){return e instanceof iU}}function lLe(t,e,n,s){const r=t.Cc(1,e,n);oU("Data must be an object, but it was:",r,s);const i=[],o=Gi.empty();Ef(s,(l,u)=>{const h=aU(e,l,n);u=un(u);const d=r.yc(h);if(u instanceof MA)i.push(h);else{const p=FA(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new mo(i);return new Ene(o,a,r.fieldTransforms)}function uLe(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[mD(e,s,n)],l=[r];if(i.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(mD(e,i[p])),l.push(i[p+1]);const u=[],h=Gi.empty();for(let p=a.length-1;p>=0;--p)if(!kne(u,a[p])){const m=a[p];let w=l[p];w=un(w);const k=o.yc(m);if(w instanceof MA)u.push(m);else{const P=FA(w,k);P!=null&&(u.push(m),h.set(m,P))}}const d=new mo(u);return new Ene(h,d,o.fieldTransforms)}function FA(t,e){if(Sne(t=un(t)))return oU("Unsupported field value:",e,t),Ine(t,e);if(t instanceof LA)return function(n,s){if(!Tne(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=FA(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=un(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Jxe(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=On.fromDate(n);return{timestampValue:wS(s.serializer,r)}}if(n instanceof On){const r=new On(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wS(s.serializer,r)}}if(n instanceof Pc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ao)return{bytesValue:qte(s.serializer,n._byteString)};if(n instanceof ws){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:BV(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Nc)return function(r,i){return{mapValue:{fields:{[mte]:{stringValue:_te},[mS]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return VV(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${xV(n)}`)}(t,e)}function Ine(t,e){const n={};return ute(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ef(t,(s,r)=>{const i=FA(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Sne(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof On||t instanceof Pc||t instanceof Ao||t instanceof ws||t instanceof LA||t instanceof Nc)}function oU(t,e,n){if(!Sne(n)||!cte(n)){const s=xV(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function mD(t,e,n){if((e=un(e))instanceof DA)return e._internalPath;if(typeof e=="string")return aU(t,e);throw CS("Field path arguments must be of type string or ",t,!1,void 0,n)}const hLe=new RegExp("[~\\*/\\[\\]]");function aU(t,e,n){if(e.search(hLe)>=0)throw CS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new DA(...e.split("."))._internalPath}catch{throw CS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function CS(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Ae(ue.INVALID_ARGUMENT,a+t+l)}function kne(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rne{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ws(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dLe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ane("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dLe extends Rne{data(){return super.data()}}function Ane(t,e){return typeof e=="string"?aU(t,e):e instanceof DA?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fLe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pLe{convertValue(e,n="none"){switch(Kd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ef(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[mS].arrayValue?.values?.map(s=>cs(s.doubleValue));return new Nc(n)}convertGeoPoint(e){return new Pc(cs(e.latitude),cs(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=EA(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Gb(e));default:return null}}convertTimestamp(e){const n=Hd(e);return new On(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=xs.fromString(e);rn(Wte(s),9688,{name:e});const r=new Qb(s.get(1),s.get(3)),i=new Fe(s.popFirst(5));return r.isEqual(n)||nu(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gLe(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ov{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kp extends Rne{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new SI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ane("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kp._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}kp._jsonSchemaVersion="firestore/documentSnapshot/1.0",kp._jsonSchema={type:vs("string",kp._jsonSchemaVersion),bundleSource:vs("string","DocumentSnapshot"),bundleName:vs("string"),bundle:vs("string")};class SI extends kp{data(e={}){return super.data(e)}}class Lm{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ov(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new SI(this._firestore,this._userDataWriter,s.key,s,new Ov(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new SI(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ov(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new SI(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Ov(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:mLe(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=NV.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mLe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _D(t){t=Da(t,ws);const e=Da(t.firestore,Qp);return nLe(sU(e),t._key).then(n=>Nne(e,t,n))}Lm._jsonSchemaVersion="firestore/querySnapshot/1.0",Lm._jsonSchema={type:vs("string",Lm._jsonSchemaVersion),bundleSource:vs("string","QuerySnapshot"),bundleName:vs("string"),bundle:vs("string")};class Pne extends pLe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ws(this.firestore,null,n)}}function yD(t,e,n){t=Da(t,ws);const s=Da(t.firestore,Qp),r=gLe(t.converter,e,n);return cU(s,[cLe(Cne(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,La.none())])}function _Le(t,e,n,...s){t=Da(t,ws);const r=Da(t.firestore,Qp),i=Cne(r);let o;return o=typeof(e=un(e))=="string"||e instanceof DA?uLe(i,"updateDoc",t._key,e,n,s):lLe(i,"updateDoc",t._key,e),cU(r,[o.toMutation(t._key,La.exists(!0))])}function yLe(t){return cU(Da(t.firestore,Qp),[new UV(t._key,La.none())])}function vLe(t,...e){t=un(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||t5(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(t5(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof ws)o=Da(t.firestore,Qp),a=CA(t._key.path),i={next:l=>{e[s]&&e[s](Nne(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Da(t,OA);o=Da(l.firestore,Qp),a=l._query;const u=new Pne(o);i={next:h=>{e[s]&&e[s](new Lm(o,u,l,h))},error:e[s+1],complete:e[s+2]},fLe(t._query)}return function(l,u,h,d){const p=new mne(d),m=new ane(u,p,h);return l.asyncQueue.enqueueAndForget(async()=>ine(await gD(l),m)),()=>{p.Nu(),l.asyncQueue.enqueueAndForget(async()=>one(await gD(l),m))}}(sU(o),a,r,i)}function cU(t,e){return function(n,s){const r=new dd;return n.asyncQueue.enqueueAndForget(async()=>zDe(await tLe(n),s,r)),r.promise}(sU(t),e)}function Nne(t,e,n){const s=n.docs.get(e._key),r=new Pne(t);return new kp(t,r,e._key,s,new Ov(n.hasPendingWrites,n.fromCache),e.converter)}function kI(){return new iU("serverTimestamp")}(function(t,e=!0){(function(n){sy=n})(bf),Bd(new Zl("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Qp(new cxe(n.getProvider("auth-internal")),new hxe(i,n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qb(a.options.projectId,l)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Lo(a$,c$,t),Lo(a$,c$,"esm2020")})();var wLe="firebase",bLe="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Lo(wLe,bLe,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xne="firebasestorage.googleapis.com",One="storageBucket",ELe=120*1e3,TLe=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ks=class Dne extends tl{constructor(e,n,s=0){super(_N(e),`Firebase Storage: ${n} (${_N(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dne.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _N(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var ss;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ss||(ss={}));function _N(t){return"storage/"+t}function lU(){const t="An unknown error occurred, please check the error payload for server response.";return new ks(ss.UNKNOWN,t)}function CLe(t){return new ks(ss.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ILe(t){return new ks(ss.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SLe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ks(ss.UNAUTHENTICATED,t)}function kLe(){return new ks(ss.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RLe(t){return new ks(ss.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ALe(){return new ks(ss.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PLe(){return new ks(ss.CANCELED,"User canceled the upload/download.")}function NLe(t){return new ks(ss.INVALID_URL,"Invalid URL '"+t+"'.")}function xLe(t){return new ks(ss.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OLe(){return new ks(ss.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+One+"' property when initializing the app?")}function DLe(){return new ks(ss.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function LLe(){return new ks(ss.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MLe(t){return new ks(ss.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vD(t){return new ks(ss.INVALID_ARGUMENT,t)}function Lne(){return new ks(ss.APP_DELETED,"The Firebase app was deleted.")}function FLe(t){return new ks(ss.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Aw(t,e){return new ks(ss.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rv(t){throw new ks(ss.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ei{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ei.makeFromUrl(e,n)}catch{return new Ei(e,"")}if(s.path==="")return s;throw xLe(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===xne?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",D=new RegExp(`^https?://${k}/${r}/${P}`,"i"),M=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<M.length;V++){const q=M[V],H=q.regex.exec(e);if(H){const X=H[q.indices.bucket];let I=H[q.indices.path];I||(I=""),s=new Ei(X,I),q.postModify(s);break}}if(s==null)throw NLe(e);return s}}class VLe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ULe(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...D){if(u){p();return}if(P){p(),h.call(null,P,...D);return}if(l()||o){p(),h.call(null,P,...D);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function k(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function qLe(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jLe(t){return t!==void 0}function BLe(t){return typeof t=="object"&&!Array.isArray(t)}function uU(t){return typeof t=="string"||t instanceof String}function n5(t){return hU()&&t instanceof Blob}function hU(){return typeof Blob<"u"}function wD(t,e,n,s){if(s<e)throw vD(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw vD(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IT(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Mne(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Rp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Rp||(Rp={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Le(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zLe{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new SC(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Rp.NO_ERROR,l=i.getStatus();if(!a||$Le(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Rp.ABORT;s(!1,new SC(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new SC(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());jLe(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=lU();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?Lne():PLe();o(l)}else{const l=ALe();o(l)}};this.canceled_?n(!1,new SC(!1,null,!0)):this.backoffId_=ULe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qLe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class SC{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function HLe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WLe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KLe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GLe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QLe(t,e,n,s,r,i,o=!0,a=!1){const l=Mne(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return KLe(h,e),HLe(h,n),WLe(h,i),GLe(h,s),new zLe(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YLe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function XLe(...t){const e=YLe();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(hU())return new Blob(t);throw new ks(ss.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JLe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZLe(t){if(typeof atob>"u")throw MLe("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ya={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yN{constructor(e,n){this.data=e,this.contentType=n||null}}function Fne(t,e){switch(t){case ya.RAW:return new yN(Vne(e));case ya.BASE64:case ya.BASE64URL:return new yN(Une(t,e));case ya.DATA_URL:return new yN(tMe(e),nMe(e))}throw lU()}function Vne(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function eMe(t){let e;try{e=decodeURIComponent(t)}catch{throw Aw(ya.DATA_URL,"Malformed data URL.")}return Vne(e)}function Une(t,e){switch(t){case ya.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Aw(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ya.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Aw(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZLe(e)}catch(r){throw r.message.includes("polyfill")?r:Aw(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class qne{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Aw(ya.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=sMe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function tMe(t){const e=new qne(t);return e.base64?Une(ya.BASE64,e.rest):eMe(e.rest)}function nMe(t){return new qne(t).contentType}function sMe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zh{constructor(e,n){let s=0,r="";n5(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(n5(this.data_)){const s=this.data_,r=JLe(s,e,n);return r===null?null:new zh(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new zh(s,!0)}}static getBlob(...e){if(hU()){const n=e.map(s=>s instanceof zh?s.data_:s);return new zh(XLe.apply(null,n))}else{const n=e.map(o=>uU(o)?Fne(ya.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new zh(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dU(t){let e;try{e=JSON.parse(t)}catch{return null}return BLe(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rMe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function iMe(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function jne(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oMe(t,e){return e}class ii{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||oMe}}let kC=null;function aMe(t){return!uU(t)||t.length<2?t:jne(t)}function Bne(){if(kC)return kC;const t=[];t.push(new ii("bucket")),t.push(new ii("generation")),t.push(new ii("metageneration")),t.push(new ii("name","fullPath",!0));function e(i,o){return aMe(o)}const n=new ii("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new ii("size");return r.xform=s,t.push(r),t.push(new ii("timeCreated")),t.push(new ii("updated")),t.push(new ii("md5Hash",null,!0)),t.push(new ii("cacheControl",null,!0)),t.push(new ii("contentDisposition",null,!0)),t.push(new ii("contentEncoding",null,!0)),t.push(new ii("contentLanguage",null,!0)),t.push(new ii("contentType",null,!0)),t.push(new ii("metadata","customMetadata",!0)),kC=t,kC}function cMe(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Ei(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lMe(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return cMe(s,t),s}function $ne(t,e,n){const s=dU(e);return s===null?null:lMe(t,s,n)}function uMe(t,e,n,s){const r=dU(e);if(r===null||!uU(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const l=t.bucket,u=t.fullPath,h="/b/"+o(l)+"/o/"+o(u),d=IT(h,n,s),p=Mne({alt:"media",token:a});return d+p})[0]}function hMe(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s5="prefixes",r5="items";function dMe(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[s5])for(const r of n[s5]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Ei(e,i));s.prefixes.push(o)}if(n[r5])for(const r of n[r5]){const i=t._makeStorageReference(new Ei(e,r.name));s.items.push(i)}return s}function fMe(t,e,n){const s=dU(n);return s===null?null:dMe(t,e,s)}class VA{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fU(t){if(!t)throw lU()}function pMe(t,e){function n(s,r){const i=$ne(t,r,e);return fU(i!==null),i}return n}function gMe(t,e){function n(s,r){const i=fMe(t,e,r);return fU(i!==null),i}return n}function mMe(t,e){function n(s,r){const i=$ne(t,r,e);return fU(i!==null),uMe(i,r,t.host,t._protocol)}return n}function pU(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=kLe():r=SLe():n.getStatus()===402?r=ILe(t.bucket):n.getStatus()===403?r=RLe(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function zne(t){const e=pU(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=CLe(t.path)),i.serverResponse=r.serverResponse,i}return n}function _Me(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=IT(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new VA(a,l,gMe(t,e.bucket),u);return h.urlParams=i,h.errorHandler=pU(e),h}function yMe(t,e,n){const s=e.fullServerUrl(),r=IT(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new VA(r,i,mMe(t,n),o);return a.errorHandler=zne(e),a}function vMe(t,e){const n=e.fullServerUrl(),s=IT(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new VA(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=zne(e),a}function wMe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function bMe(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=wMe(null,e)),s}function EMe(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=bMe(e,s,r),h=hMe(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=zh.getBlob(d,s,p);if(m===null)throw DLe();const w={name:u.fullPath},k=IT(i,t.host,t._protocol),P="POST",D=t.maxUploadRetryTime,M=new VA(k,P,pMe(t,n),D);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=pU(e),M}class TMe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Rp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Rp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Rp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw rv("cannot .send() more than once");if(el(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class CMe extends TMe{initXhr(){this.xhr_.responseType="text"}}function UA(){return new CMe}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yp{constructor(e,n){this._service=e,n instanceof Ei?this._location=n:this._location=Ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yp(e,n)}get root(){const e=new Ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jne(this._location.path)}get storage(){return this._service}get parent(){const e=rMe(this._location.path);if(e===null)return null;const n=new Ei(this._location.bucket,e);return new Yp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw FLe(e)}}function IMe(t,e,n){t._throwIfRoot("uploadBytes");const s=EMe(t.storage,t._location,Bne(),new zh(e,!0),n);return t.storage.makeRequestWithTokens(s,UA).then(r=>({metadata:r,ref:t}))}function SMe(t,e,n=ya.RAW,s){t._throwIfRoot("uploadString");const r=Fne(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),IMe(t,r.data,i)}function kMe(t){const e={prefixes:[],items:[]};return Hne(t,e).then(()=>e)}async function Hne(t,e,n){const s=await RMe(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await Hne(t,e,s.nextPageToken)}function RMe(t,e){e!=null&&typeof e.maxResults=="number"&&wD("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=_Me(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,UA)}function AMe(t){t._throwIfRoot("getDownloadURL");const e=yMe(t.storage,t._location,Bne());return t.storage.makeRequestWithTokens(e,UA).then(n=>{if(n===null)throw LLe();return n})}function PMe(t){t._throwIfRoot("deleteObject");const e=vMe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,UA)}function NMe(t,e){const n=iMe(t._location.path,e),s=new Ei(t._location.bucket,n);return new Yp(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xMe(t){return/^[A-Za-z]+:\/\//.test(t)}function OMe(t,e){return new Yp(t,e)}function Wne(t,e){if(t instanceof gU){const n=t;if(n._bucket==null)throw OLe();const s=new Yp(n,n._bucket);return e!=null?Wne(s,e):s}else return e!==void 0?NMe(t,e):t}function DMe(t,e){if(e&&xMe(e)){if(t instanceof gU)return OMe(t,e);throw vD("To use ref(service, url), the first argument must be a Storage instance.")}else return Wne(t,e)}function i5(t,e){const n=e?.[One];return n==null?null:Ei.makeFromBucketSpec(n,t)}function LMe(t,e,n,s={}){t.host=`${e}:${n}`;const r=el(e);r&&(dA(`https://${t.host}/b`),fA("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:pV(i,t.app.options.projectId))}class gU{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=xne,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ELe,this._maxUploadRetryTime=TLe,this._requests=new Set,r!=null?this._bucket=Ei.makeFromBucketSpec(r,this._host):this._bucket=i5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ei.makeFromBucketSpec(this._url,e):this._bucket=i5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wD("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wD("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yp(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new VLe(Lne());{const o=QLe(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const o5="@firebase/storage",a5="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kne="storage";function MMe(t,e,n,s){return t=un(t),SMe(t,e,n,s)}function FMe(t){return t=un(t),kMe(t)}function VMe(t){return t=un(t),AMe(t)}function UMe(t){return t=un(t),PMe(t)}function qMe(t,e){return t=un(t),DMe(t,e)}function jMe(t=mA(),e){t=un(t);const n=mT(t,Kne).getImmediate({identifier:e}),s=fV("storage");return s&&BMe(n,...s),n}function BMe(t,e,n,s={}){LMe(t,e,n,s)}function $Me(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new gU(n,s,r,e,bf)}function zMe(){Bd(new Zl(Kne,$Me,"PUBLIC").setMultipleInstances(!0)),Lo(o5,a5,""),Lo(o5,a5,"esm2020")}zMe();var c5={};const l5="@firebase/database",u5="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Gne="";function HMe(t){Gne=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WMe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ms(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zb(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KMe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qne=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new WMe(e)}}catch{}return new KMe},lp=Qne("localStorage"),GMe=Qne("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mm=new gA("@firebase/database"),QMe=function(){let t=1;return function(){return t++}}(),Yne=function(t){const e=u1e(t),n=new o1e;n.update(e);const s=n.digest();return dV.encodeByteArray(s)},ST=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ST.apply(null,s):typeof s=="object"?e+=Ms(s):e+=s,e+=" "}return e};let Pw=null,h5=!0;const YMe=function(t,e){me(!0,"Can't turn on custom loggers persistently."),Mm.logLevel=kt.VERBOSE,Pw=Mm.log.bind(Mm)},Wr=function(...t){if(h5===!0&&(h5=!1,Pw===null&&GMe.get("logging_enabled")===!0&&YMe()),Pw){const e=ST.apply(null,t);Pw(e)}},kT=function(t){return function(...e){Wr(t,...e)}},bD=function(...t){const e="FIREBASE INTERNAL ERROR: "+ST(...t);Mm.error(e)},ru=function(...t){const e=`FIREBASE FATAL ERROR: ${ST(...t)}`;throw Mm.error(e),new Error(e)},eo=function(...t){const e="FIREBASE WARNING: "+ST(...t);Mm.warn(e)},XMe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xne=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},JMe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},T_="[MIN_NAME]",Xp="[MAX_NAME]",ay=function(t,e){if(t===e)return 0;if(t===T_||e===Xp)return-1;if(e===T_||t===Xp)return 1;{const n=d5(t),s=d5(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},ZMe=function(t,e){return t===e?0:t<e?-1:1},iv=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ms(e))},mU=function(t){if(typeof t!="object"||t===null)return Ms(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Ms(e[s]),n+=":",n+=mU(t[e[s]]);return n+="}",n},Jne=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function so(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Zne=function(t){me(!Xne(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},e2e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},t2e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function n2e(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const s2e=new RegExp("^-?(0*)\\d{1,10}$"),r2e=-2147483648,i2e=2147483647,d5=function(t){if(s2e.test(t)){const e=Number(t);if(e>=r2e&&e<=i2e)return e}return null},cy=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw eo("Exception was thrown by user callback.",n),e},Math.floor(0))}},o2e=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nw=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class a2e{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,lo(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){eo(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c2e{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Wr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eo(e)}}class RI{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}RI.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _U="5",ese="v",tse="s",nse="r",sse="f",rse=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ise="ls",ose="p",ED="ac",ase="websocket",cse="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lse{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function l2e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function use(t,e,n){me(typeof e=="string","typeof type must == string"),me(typeof n=="object","typeof params must == object");let s;if(e===ase)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===cse)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);l2e(t)&&(n.ns=t.namespace);const r=[];return so(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class u2e{constructor(){this.counters_={}}incrementCounter(e,n=1){yu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return UAe(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vN={},wN={};function yU(t){const e=t.toString();return vN[e]||(vN[e]=new u2e),vN[e]}function h2e(t,e){const n=t.toString();return wN[n]||(wN[n]=e()),wN[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d2e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&cy(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const f5="start",f2e="close",p2e="pLPCommand",g2e="pRTLPCB",hse="id",dse="pw",fse="ser",m2e="cb",_2e="seg",y2e="ts",v2e="d",w2e="dframe",pse=1870,gse=30,b2e=pse-gse,E2e=25e3,T2e=3e4;class fm{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kT(e),this.stats_=yU(n),this.urlFn=l=>(this.appCheckToken&&(l[ED]=this.appCheckToken),use(n,cse,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new d2e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(T2e)),JMe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vU((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===f5)this.id=a,this.password=l;else if(o===f2e)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[f5]="t",s[fse]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[m2e]=this.scriptTagHolder.uniqueCallbackIdentifier),s[ese]=_U,this.transportSessionId&&(s[tse]=this.transportSessionId),this.lastSessionId&&(s[ise]=this.lastSessionId),this.applicationId&&(s[ose]=this.applicationId),this.appCheckToken&&(s[ED]=this.appCheckToken),typeof location<"u"&&location.hostname&&rse.test(location.hostname)&&(s[nse]=sse);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fm.forceAllow_=!0}static forceDisallow(){fm.forceDisallow_=!0}static isAvailable(){return fm.forceAllow_?!0:!fm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!e2e()&&!t2e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ms(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=tee(n),r=Jne(s,b2e);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[w2e]="t",s[hse]=e,s[dse]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ms(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vU{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QMe(),window[p2e+this.uniqueCallbackIdentifier]=e,window[g2e+this.uniqueCallbackIdentifier]=n,this.myIFrame=vU.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wr("frame writing exception"),a.stack&&Wr(a.stack),Wr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wr("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[hse]=this.myID,e[dse]=this.myPW,e[fse]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gse+s.length<=pse;){const i=this.pendingSegs.shift();s=s+"&"+_2e+r+"="+i.seg+"&"+y2e+r+"="+i.ts+"&"+v2e+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(E2e)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Wr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const C2e=16384,I2e=45e3;let IS=null;typeof MozWebSocket<"u"?IS=MozWebSocket:typeof WebSocket<"u"&&(IS=WebSocket);class ha{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kT(this.connId),this.stats_=yU(n),this.connURL=ha.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[ese]=_U,typeof location<"u"&&location.hostname&&rse.test(location.hostname)&&(o[nse]=sse),n&&(o[tse]=n),s&&(o[ise]=s),r&&(o[ED]=r),i&&(o[ose]=i),use(e,ase,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lp.set("previous_websocket_failure",!0);try{let s;XAe(),this.mySock=new IS(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ha.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&IS!==null&&!ha.forceDisallow_}static previouslyFailed(){return lp.isInMemoryStorage||lp.get("previous_websocket_failure")===!0}markConnectionHealthy(){lp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=zb(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(me(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Ms(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Jne(n,C2e);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(I2e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ha.responsesRequiredToBeHealthy=2;ha.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tE{static get ALL_TRANSPORTS(){return[fm,ha]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ha&&ha.isAvailable();let s=n&&!ha.previouslyFailed();if(e.webSocketOnly&&(n||eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ha];else{const r=this.transports_=[];for(const i of tE.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);tE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tE.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const S2e=6e4,k2e=5e3,R2e=10*1024,A2e=100*1024,bN="t",p5="d",P2e="s",g5="r",N2e="e",m5="o",_5="a",y5="n",v5="p",x2e="h";class O2e{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kT("c:"+this.id+":"),this.transportManager_=new tE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>A2e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>R2e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(bN in e){const n=e[bN];n===_5?this.upgradeIfSecondaryHealthy_():n===g5?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===m5&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=iv("t",e),s=iv("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:v5,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_5,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:y5,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=iv("t",e),s=iv("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=iv(bN,e);if(p5 in e){const s=e[p5];if(n===x2e){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===y5){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===P2e?this.onConnectionShutdown_(s):n===g5?this.onReset_(s):n===N2e?bD("Server Error: "+s):n===m5?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bD("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_U!==s&&eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Nw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(S2e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(k2e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:v5,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mse{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _se{constructor(e){this.allowedEvents_=e,this.listeners_={},me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){me(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SS extends _se{static getInstance(){return new SS}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gV()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return me(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const w5=32,b5=768;let mn=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Qt(){return new mn("")}function wt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yd(t){return t.pieces_.length-t.pieceNum_}function Sn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new mn(t.pieces_,e)}function yse(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function D2e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function vse(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wse(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new mn(e,0)}function Vs(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof mn)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new mn(n,0)}function Pt(t){return t.pieceNum_>=t.pieces_.length}function Ti(t,e){const n=wt(t),s=wt(e);if(n===null)return e;if(n===s)return Ti(Sn(t),Sn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wU(t,e){if(Yd(t)!==Yd(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function va(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Yd(t)>Yd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class L2e{constructor(e,n){this.errorPrefix_=n,this.parts_=vse(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=pA(this.parts_[s]);bse(this)}}function M2e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=pA(e),bse(t)}function F2e(t){const e=t.parts_.pop();t.byteLength_-=pA(e),t.parts_.length>0&&(t.byteLength_-=1)}function bse(t){if(t.byteLength_>b5)throw new Error(t.errorPrefix_+"has a key path longer than "+b5+" bytes ("+t.byteLength_+").");if(t.parts_.length>w5)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+w5+") or object contains a cycle "+Kf(t))}function Kf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bU extends _se{static getInstance(){return new bU}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return me(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ov=1e3,V2e=300*1e3,E5=30*1e3,U2e=1.3,q2e=3e4,j2e="server_kill",T5=3;class Fl extends mse{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Fl.nextPersistentConnectionId_++,this.log_=kT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ov,this.maxReconnectDelay_=V2e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");bU.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&SS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(Ms(i)),me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new hA,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),me(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Fl.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yu(e,"w")){const s=g_(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||i1e(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=E5)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=r1e(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ms(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):bD("Unrecognized action received from server: "+Ms(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>q2e&&(this.reconnectDelay_=ov),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*U2e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Fl.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){me(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Wr("getToken() completed but was canceled"):(Wr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new O2e(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{eo(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(j2e)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&eo(d),l())}}}interrupt(e){Wr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],BO(this.interruptReasons_)&&(this.reconnectDelay_=ov,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>mU(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new mn(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Wr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=T5&&(this.reconnectDelay_=E5,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Wr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=T5&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Gne.replace(/\./g,"-")]=1,gV()?e["framework.cordova"]=1:oee()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=SS.getInstance().currentlyOnline();return BO(this.interruptReasons_)&&e}}Fl.nextPersistentConnectionId_=0;Fl.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Tt(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Tt(T_,e),r=new Tt(T_,n);return this.compare(s,r)!==0}minPost(){return Tt.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let RC;class Ese extends qA{static get __EMPTY_NODE(){return RC}static set __EMPTY_NODE(e){RC=e}compare(e,n){return ay(e.name,n.name)}isDefinedOn(e){throw ey("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Tt.MIN}maxPost(){return new Tt(Xp,RC)}makePost(e,n){return me(typeof e=="string","KeyIndex indexValue must always be a string."),new Tt(e,RC)}toString(){return".key"}}const Fm=new Ese;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AC{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Zs{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Zs.RED,this.left=r??Yi.EMPTY_NODE,this.right=i??Yi.EMPTY_NODE}copy(e,n,s,r,i){return new Zs(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Yi.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Zs.RED=!0;Zs.BLACK=!1;class B2e{copy(e,n,s,r,i){return this}insert(e,n,s){return new Zs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yi{constructor(e,n=Yi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Yi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Zs.BLACK,null,null))}remove(e){return new Yi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zs.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new AC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new AC(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new AC(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new AC(this.root_,null,this.comparator_,!0,e)}}Yi.EMPTY_NODE=new B2e;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $2e(t,e){return ay(t.name,e.name)}function EU(t,e){return ay(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let TD;function z2e(t){TD=t}const Tse=function(t){return typeof t=="number"?"number:"+Zne(t):"string:"+t},Cse=function(t){if(t.isLeafNode()){const e=t.val();me(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yu(e,".sv"),"Priority must be a string or number.")}else me(t===TD||t.isEmpty(),"priority of unexpected type.");me(t===TD||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let C5;class Gs{static set __childrenNodeConstructor(e){C5=e}static get __childrenNodeConstructor(){return C5}constructor(e,n=Gs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,me(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cse(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Gs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Gs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pt(e)?this:wt(e)===".priority"?this.priorityNode_:Gs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Gs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=wt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(me(s!==".priority"||Yd(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Gs.__childrenNodeConstructor.EMPTY_NODE.updateChild(Sn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Tse(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Zne(this.value_):e+=this.value_,this.lazyHash_=Yne(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Gs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Gs.__childrenNodeConstructor?-1:(me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Gs.VALUE_TYPE_ORDER.indexOf(n),i=Gs.VALUE_TYPE_ORDER.indexOf(s);return me(r>=0,"Unknown leaf type: "+n),me(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Gs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ise,Sse;function H2e(t){Ise=t}function W2e(t){Sse=t}class K2e extends qA{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?ay(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Tt.MIN}maxPost(){return new Tt(Xp,new Gs("[PRIORITY-POST]",Sse))}makePost(e,n){const s=Ise(e);return new Tt(n,new Gs("[PRIORITY-POST]",s))}toString(){return".priority"}}const Jn=new K2e;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G2e=Math.log(2);class Q2e{constructor(e){const n=i=>parseInt(Math.log(i)/G2e,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kS=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new Zs(p,d.node,Zs.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),k=r(m+1,u);return d=t[m],p=n?n(d):d,new Zs(p,d.node,Zs.BLACK,w,k)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,k){const P=d-w,D=d;d-=w;const M=r(P+1,D),V=t[P],q=n?n(V):V;m(new Zs(q,V.node,k,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const k=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));k?p(P,Zs.BLACK):(p(P,Zs.BLACK),p(P,Zs.RED))}return h},o=new Q2e(t.length),a=i(o);return new Yi(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let EN;const Dg={};class Nl{static get Default(){return me(Dg&&Jn,"ChildrenNode.ts has not been loaded"),EN=EN||new Nl({".priority":Dg},{".priority":Jn}),EN}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=g_(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Yi?n:null}hasIndex(e){return yu(this.indexSet_,e.toString())}addIndex(e,n){me(e!==Fm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Tt.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=kS(s,e.getCompare()):a=Dg;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Nl(h,u)}addToIndexes(e,n){const s=oS(this.indexes_,(r,i)=>{const o=g_(this.indexSet_,i);if(me(o,"Missing index implementation for "+i),r===Dg)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Tt.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),kS(a,o.getCompare())}else return Dg;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Tt(e.name,a))),l.insert(e,e.node)}});return new Nl(s,this.indexSet_)}removeFromIndexes(e,n){const s=oS(this.indexes_,r=>{if(r===Dg)return r;{const i=n.get(e.name);return i?r.remove(new Tt(e.name,i)):r}});return new Nl(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let av;class je{static get EMPTY_NODE(){return av||(av=new je(new Yi(EU),null,Nl.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Cse(this.priorityNode_),this.children_.isEmpty()&&me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||av}updatePriority(e){return this.children_.isEmpty()?this:new je(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?av:n}}getChild(e){const n=wt(e);return n===null?this:this.getImmediateChild(n).getChild(Sn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(me(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Tt(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?av:this.priorityNode_;return new je(r,o,i)}}updateChild(e,n){const s=wt(e);if(s===null)return n;{me(wt(e)!==".priority"||Yd(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(Sn(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(Jn,(o,a)=>{n[o]=a.val(e),s++,i&&je.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Tse(this.getPriority().val())+":"),this.forEachChild(Jn,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Yne(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Tt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Tt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Tt(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Tt.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Tt.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===RT?-1:0}withIndex(e){if(e===Fm||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new je(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Fm||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Jn),r=n.getIterator(Jn);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Fm?null:this.indexMap_.get(e.toString())}}je.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Y2e extends je{constructor(){super(new Yi(EU),je.EMPTY_NODE,Nl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return je.EMPTY_NODE}isEmpty(){return!1}}const RT=new Y2e;Object.defineProperties(Tt,{MIN:{value:new Tt(T_,je.EMPTY_NODE)},MAX:{value:new Tt(Xp,RT)}});Ese.__EMPTY_NODE=je.EMPTY_NODE;Gs.__childrenNodeConstructor=je;z2e(RT);W2e(RT);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const X2e=!0;function nr(t,e=null){if(t===null)return je.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),me(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Gs(n,nr(e))}if(!(t instanceof Array)&&X2e){const n=[];let s=!1;if(so(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=nr(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new Tt(i,a)))}}),n.length===0)return je.EMPTY_NODE;const r=kS(n,$2e,i=>i.name,EU);if(s){const i=kS(n,Jn.getCompare());return new je(r,nr(e),new Nl({".priority":i},{".priority":Jn}))}else return new je(r,nr(e),Nl.Default)}else{let n=je.EMPTY_NODE;return so(t,(s,r)=>{if(yu(t,s)&&s.substring(0,1)!=="."){const i=nr(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(nr(e))}}H2e(nr);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J2e extends qA{constructor(e){super(),this.indexPath_=e,me(!Pt(e)&&wt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?ay(e.name,n.name):i}makePost(e,n){const s=nr(e),r=je.EMPTY_NODE.updateChild(this.indexPath_,s);return new Tt(n,r)}maxPost(){const e=je.EMPTY_NODE.updateChild(this.indexPath_,RT);return new Tt(Xp,e)}toString(){return vse(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Z2e extends qA{compare(e,n){const s=e.node.compareTo(n.node);return s===0?ay(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Tt.MIN}maxPost(){return Tt.MAX}makePost(e,n){const s=nr(e);return new Tt(n,s)}toString(){return".value"}}const eFe=new Z2e;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kse(t){return{type:"value",snapshotNode:t}}function C_(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function sE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function tFe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TU{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){me(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(nE(n,a)):me(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(C_(n,s)):o.trackChildChange(sE(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Jn,(r,i)=>{n.hasChild(r)||s.trackChildChange(nE(r,i))}),n.isLeafNode()||n.forEachChild(Jn,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(sE(r,i,o))}else s.trackChildChange(C_(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?je.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rE{constructor(e){this.indexedFilter_=new TU(e.getIndex()),this.index_=e.getIndex(),this.startPost_=rE.getStartPost_(e),this.endPost_=rE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Tt(n,s))||(s=je.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=je.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(je.EMPTY_NODE);const i=this;return n.forEachChild(Jn,(o,a)=>{i.matches(new Tt(o,a))||(r=r.updateImmediateChild(o,je.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nFe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new rE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Tt(n,s))||(s=je.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=je.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=je.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(je.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,je.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;me(a.numChildren()===this.limit_,"");const l=new Tt(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(sE(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(nE(n,d));const w=a.updateImmediateChild(n,je.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(C_(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(nE(u.name,u.node)),i.trackChildChange(C_(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,je.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CU{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T_}hasEnd(){return this.endSet_}getIndexEndValue(){return me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xp}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new CU;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sFe(t){return t.loadsAllData()?new TU(t.getIndex()):t.hasLimit()?new nFe(t):new rE(t)}function I5(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Jn?n="$priority":t.index_===eFe?n="$value":t.index_===Fm?n="$key":(me(t.index_ instanceof J2e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ms(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Ms(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Ms(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Ms(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Ms(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function S5(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Jn&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RS extends mse{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=kT("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=RS.getListenId_(e,s),a={};this.listens_[o]=a;const l=I5(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),g_(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=RS.getListenId_(e,n);delete this.listens_[s]}get(e){const n=I5(e._queryParams),s=e._path.toString(),r=new hA;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ty(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=zb(a.responseText)}catch{eo("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&eo("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rFe{constructor(){this.rootNode_=je.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AS(){return{value:null,children:new Map}}function Rse(t,e,n){if(Pt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=wt(e);t.children.has(s)||t.children.set(s,AS());const r=t.children.get(s);e=Sn(e),Rse(r,e,n)}}function CD(t,e,n){t.value!==null?n(e,t.value):iFe(t,(s,r)=>{const i=new mn(e.toString()+"/"+s);CD(r,i,n)})}function iFe(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oFe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&so(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k5=10*1e3,aFe=30*1e3,cFe=300*1e3;class lFe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new oFe(e);const s=k5+(aFe-k5)*Math.random();Nw(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;so(e,(r,i)=>{i>0&&yu(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),Nw(this.reportStats_.bind(this),Math.floor(Math.random()*2*cFe))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wa;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(wa||(wa={}));function Ase(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function IU(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function SU(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PS{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=wa.ACK_USER_WRITE,this.source=Ase()}operationForChild(e){if(Pt(this.path)){if(this.affectedTree.value!=null)return me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new mn(e));return new PS(Qt(),n,this.revert)}}else return me(wt(this.path)===e,"operationForChild called for unrelated child."),new PS(Sn(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iE{constructor(e,n){this.source=e,this.path=n,this.type=wa.LISTEN_COMPLETE}operationForChild(e){return Pt(this.path)?new iE(this.source,Qt()):new iE(this.source,Sn(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jp{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=wa.OVERWRITE}operationForChild(e){return Pt(this.path)?new Jp(this.source,Qt(),this.snap.getImmediateChild(e)):new Jp(this.source,Sn(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oE{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=wa.MERGE}operationForChild(e){if(Pt(this.path)){const n=this.children.subtree(new mn(e));return n.isEmpty()?null:n.value?new Jp(this.source,Qt(),n.value):new oE(this.source,Qt(),n)}else return me(wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new oE(this.source,Sn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xd{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pt(e))return this.isFullyInitialized()&&!this.filtered_;const n=wt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uFe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function hFe(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(tFe(o.childName,o.snapshotNode))}),cv(t,r,"child_removed",e,s,n),cv(t,r,"child_added",e,s,n),cv(t,r,"child_moved",i,s,n),cv(t,r,"child_changed",e,s,n),cv(t,r,"value",e,s,n),r}function cv(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>fFe(t,a,l)),o.forEach(a=>{const l=dFe(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function dFe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function fFe(t,e,n){if(e.childName==null||n.childName==null)throw ey("Should only compare child_ events.");const s=new Tt(e.childName,e.snapshotNode),r=new Tt(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jA(t,e){return{eventCache:t,serverCache:e}}function xw(t,e,n,s){return jA(new Xd(e,n,s),t.serverCache)}function Pse(t,e,n,s){return jA(t.eventCache,new Xd(e,n,s))}function NS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Zp(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let TN;const pFe=()=>(TN||(TN=new Yi(ZMe)),TN);class Nn{static fromObject(e){let n=new Nn(null);return so(e,(s,r)=>{n=n.set(new mn(s),r)}),n}constructor(e,n=pFe()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Qt(),value:this.value};if(Pt(e))return null;{const s=wt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(Sn(e),n);return i!=null?{path:Vs(new mn(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pt(e))return this;{const n=wt(e),s=this.children.get(n);return s!==null?s.subtree(Sn(e)):new Nn(null)}}set(e,n){if(Pt(e))return new Nn(n,this.children);{const s=wt(e),r=(this.children.get(s)||new Nn(null)).set(Sn(e),n),i=this.children.insert(s,r);return new Nn(this.value,i)}}remove(e){if(Pt(e))return this.children.isEmpty()?new Nn(null):new Nn(null,this.children);{const n=wt(e),s=this.children.get(n);if(s){const r=s.remove(Sn(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new Nn(null):new Nn(this.value,i)}else return this}}get(e){if(Pt(e))return this.value;{const n=wt(e),s=this.children.get(n);return s?s.get(Sn(e)):null}}setTree(e,n){if(Pt(e))return n;{const s=wt(e),r=(this.children.get(s)||new Nn(null)).setTree(Sn(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new Nn(this.value,i)}}fold(e){return this.fold_(Qt(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(Vs(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Qt(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Pt(e))return null;{const i=wt(e),o=this.children.get(i);return o?o.findOnPath_(Sn(e),Vs(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Qt(),n)}foreachOnPath_(e,n,s){if(Pt(e))return this;{this.value&&s(n,this.value);const r=wt(e),i=this.children.get(r);return i?i.foreachOnPath_(Sn(e),Vs(n,r),s):new Nn(null)}}foreach(e){this.foreach_(Qt(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(Vs(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ma{constructor(e){this.writeTree_=e}static empty(){return new Ma(new Nn(null))}}function Ow(t,e,n){if(Pt(e))return new Ma(new Nn(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Ti(r,e);return i=i.updateChild(o,n),new Ma(t.writeTree_.set(r,i))}else{const r=new Nn(n),i=t.writeTree_.setTree(e,r);return new Ma(i)}}}function R5(t,e,n){let s=t;return so(n,(r,i)=>{s=Ow(s,Vs(e,r),i)}),s}function A5(t,e){if(Pt(e))return Ma.empty();{const n=t.writeTree_.setTree(e,new Nn(null));return new Ma(n)}}function ID(t,e){return bg(t,e)!=null}function bg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ti(n.path,e)):null}function P5(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Jn,(s,r)=>{e.push(new Tt(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Tt(s,r.value))}),e}function pd(t,e){if(Pt(e))return t;{const n=bg(t,e);return n!=null?new Ma(new Nn(n)):new Ma(t.writeTree_.subtree(e))}}function SD(t){return t.writeTree_.isEmpty()}function I_(t,e){return Nse(Qt(),t.writeTree_,e)}function Nse(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(me(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=Nse(Vs(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Vs(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BA(t,e){return Lse(e,t)}function gFe(t,e,n,s,r){me(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=Ow(t.visibleWrites,e,n)),t.lastWriteId=s}function mFe(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function _Fe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);me(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&yFe(a,s.path)?r=!1:va(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return vFe(t),!0;if(s.snap)t.visibleWrites=A5(t.visibleWrites,s.path);else{const a=s.children;so(a,l=>{t.visibleWrites=A5(t.visibleWrites,Vs(s.path,l))})}return!0}else return!1}function yFe(t,e){if(t.snap)return va(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&va(Vs(t.path,n),e))return!0;return!1}function vFe(t){t.visibleWrites=xse(t.allWrites,wFe,Qt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function wFe(t){return t.visible}function xse(t,e,n){let s=Ma.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)va(n,o)?(a=Ti(n,o),s=Ow(s,a,i.snap)):va(o,n)&&(a=Ti(o,n),s=Ow(s,Qt(),i.snap.getChild(a)));else if(i.children){if(va(n,o))a=Ti(n,o),s=R5(s,a,i.children);else if(va(o,n))if(a=Ti(o,n),Pt(a))s=R5(s,Qt(),i.children);else{const l=g_(i.children,wt(a));if(l){const u=l.getChild(Sn(a));s=Ow(s,Qt(),u)}}}else throw ey("WriteRecord should have .snap or .children")}}return s}function Ose(t,e,n,s,r){if(!s&&!r){const i=bg(t.visibleWrites,e);if(i!=null)return i;{const o=pd(t.visibleWrites,e);if(SD(o))return n;if(n==null&&!ID(o,Qt()))return null;{const a=n||je.EMPTY_NODE;return I_(o,a)}}}else{const i=pd(t.visibleWrites,e);if(!r&&SD(i))return n;if(!r&&n==null&&!ID(i,Qt()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(va(u.path,e)||va(e,u.path))},a=xse(t.allWrites,o,e),l=n||je.EMPTY_NODE;return I_(a,l)}}}function bFe(t,e,n){let s=je.EMPTY_NODE;const r=bg(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Jn,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=pd(t.visibleWrites,e);return n.forEachChild(Jn,(o,a)=>{const l=I_(pd(i,new mn(o)),a);s=s.updateImmediateChild(o,l)}),P5(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=pd(t.visibleWrites,e);return P5(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function EFe(t,e,n,s,r){me(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=Vs(e,n);if(ID(t.visibleWrites,i))return null;{const o=pd(t.visibleWrites,i);return SD(o)?r.getChild(n):I_(o,r.getChild(n))}}function TFe(t,e,n,s){const r=Vs(e,n),i=bg(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=pd(t.visibleWrites,r);return I_(o,s.getNode().getImmediateChild(n))}else return null}function CFe(t,e){return bg(t.visibleWrites,e)}function IFe(t,e,n,s,r,i,o){let a;const l=pd(t.visibleWrites,e),u=bg(l,Qt());if(u!=null)a=u;else if(n!=null)a=I_(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function SFe(){return{visibleWrites:Ma.empty(),allWrites:[],lastWriteId:-1}}function xS(t,e,n,s){return Ose(t.writeTree,t.treePath,e,n,s)}function kU(t,e){return bFe(t.writeTree,t.treePath,e)}function N5(t,e,n,s){return EFe(t.writeTree,t.treePath,e,n,s)}function OS(t,e){return CFe(t.writeTree,Vs(t.treePath,e))}function kFe(t,e,n,s,r,i){return IFe(t.writeTree,t.treePath,e,n,s,r,i)}function RU(t,e,n){return TFe(t.writeTree,t.treePath,e,n)}function Dse(t,e){return Lse(Vs(t.treePath,e),t.writeTree)}function Lse(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RFe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;me(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),me(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,sE(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,nE(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,C_(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,sE(s,e.snapshotNode,r.oldSnap));else throw ey("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AFe{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Mse=new AFe;class AU{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Xd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RU(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Zp(this.viewCache_),i=kFe(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PFe(t){return{filter:t}}function NFe(t,e){me(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),me(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function xFe(t,e,n,s,r){const i=new RFe;let o,a;if(n.type===wa.OVERWRITE){const u=n;u.source.fromUser?o=kD(t,e,u.path,u.snap,s,r,i):(me(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Pt(u.path),o=DS(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===wa.MERGE){const u=n;u.source.fromUser?o=DFe(t,e,u.path,u.children,s,r,i):(me(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=RD(t,e,u.path,u.children,s,r,a,i))}else if(n.type===wa.ACK_USER_WRITE){const u=n;u.revert?o=FFe(t,e,u.path,s,r,i):o=LFe(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===wa.LISTEN_COMPLETE)o=MFe(t,e,n.path,s,i);else throw ey("Unknown operation type: "+n.type);const l=i.getChanges();return OFe(e,o,l),{viewCache:o,changes:l}}function OFe(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=NS(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(kse(NS(e)))}}function Fse(t,e,n,s,r,i){const o=e.eventCache;if(OS(s,n)!=null)return e;{let a,l;if(Pt(n))if(me(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Zp(e),h=u instanceof je?u:je.EMPTY_NODE,d=kU(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=xS(s,Zp(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=wt(n);if(u===".priority"){me(Yd(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=N5(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Sn(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=N5(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=RU(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return xw(e,a,o.isFullyInitialized()||Pt(n),t.filter.filtersNodes())}}function DS(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Pt(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=wt(n);if(!l.isCompleteForPath(n)&&Yd(n)>1)return e;const w=Sn(n),k=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),k):u=h.updateChild(l.getNode(),m,k,w,Mse,null)}const d=Pse(e,u,l.isFullyInitialized()||Pt(n),h.filtersNodes()),p=new AU(r,d,i);return Fse(t,d,n,r,p,a)}function kD(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new AU(r,e,i);if(Pt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=xw(e,u,!0,t.filter.filtersNodes());else{const d=wt(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=xw(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=Sn(n),m=a.getNode().getImmediateChild(d);let w;if(Pt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?yse(p)===".priority"&&k.getChild(wse(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=je.EMPTY_NODE}if(m.equals(w))l=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=xw(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function x5(t,e){return t.eventCache.isCompleteForChild(e)}function DFe(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=Vs(n,l);x5(e,wt(h))&&(a=kD(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=Vs(n,l);x5(e,wt(h))||(a=kD(t,a,h,u,r,i,o))}),a}function O5(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function RD(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Pt(n)?u=s:u=new Nn(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=O5(t,m,p);l=DS(t,l,new mn(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=O5(t,w,p);l=DS(t,l,new mn(d),k,r,i,o,a)}}),l}function LFe(t,e,n,s,r,i,o){if(OS(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Pt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return DS(t,e,n,l.getNode().getChild(n),r,i,a,o);if(Pt(n)){let u=new Nn(null);return l.getNode().forEachChild(Fm,(h,d)=>{u=u.set(new mn(h),d)}),RD(t,e,n,u,r,i,a,o)}else return e}else{let u=new Nn(null);return s.foreach((h,d)=>{const p=Vs(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),RD(t,e,n,u,r,i,a,o)}}function MFe(t,e,n,s,r){const i=e.serverCache,o=Pse(e,i.getNode(),i.isFullyInitialized()||Pt(n),i.isFiltered());return Fse(t,o,n,s,Mse,r)}function FFe(t,e,n,s,r,i){let o;if(OS(s,n)!=null)return e;{const a=new AU(s,e,r),l=e.eventCache.getNode();let u;if(Pt(n)||wt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=xS(s,Zp(e));else{const d=e.serverCache.getNode();me(d instanceof je,"serverChildren would be complete if leaf node"),h=kU(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=wt(n);let d=RU(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,Sn(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,je.EMPTY_NODE,Sn(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=xS(s,Zp(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||OS(s,Qt())!=null,xw(e,u,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VFe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new TU(s.getIndex()),i=sFe(s);this.processor_=PFe(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(je.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(je.EMPTY_NODE,a.getNode(),null),h=new Xd(l,o.isFullyInitialized(),r.filtersNodes()),d=new Xd(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=jA(d,h),this.eventGenerator_=new uFe(this.query_)}get query(){return this.query_}}function UFe(t){return t.viewCache_.serverCache.getNode()}function qFe(t){return NS(t.viewCache_)}function jFe(t,e){const n=Zp(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Pt(e)&&!n.getImmediateChild(wt(e)).isEmpty())?n.getChild(e):null}function D5(t){return t.eventRegistrations_.length===0}function BFe(t,e){t.eventRegistrations_.push(e)}function L5(t,e,n){const s=[];if(n){me(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function M5(t,e,n,s){e.type===wa.MERGE&&e.source.queryId!==null&&(me(Zp(t.viewCache_),"We should always have a full cache before handling merges"),me(NS(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=xFe(t.processor_,r,e,n,s);return NFe(t.processor_,i.viewCache),me(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Vse(t,i.changes,i.viewCache.eventCache.getNode(),null)}function $Fe(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jn,(r,i)=>{s.push(C_(r,i))}),n.isFullyInitialized()&&s.push(kse(n.getNode())),Vse(t,s,n.getNode(),e)}function Vse(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return hFe(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let LS;class Use{constructor(){this.views=new Map}}function zFe(t){me(!LS,"__referenceConstructor has already been defined"),LS=t}function HFe(){return me(LS,"Reference.ts has not been loaded"),LS}function WFe(t){return t.views.size===0}function PU(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return me(i!=null,"SyncTree gave us an op for an invalid query."),M5(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(M5(o,e,n,s));return i}}function qse(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=xS(n,r?s:null),l=!1;a?l=!0:s instanceof je?(a=kU(n,s),l=!1):(a=je.EMPTY_NODE,l=!1);const u=jA(new Xd(a,l,!1),new Xd(s,r,!1));return new VFe(e,u)}return o}function KFe(t,e,n,s,r,i){const o=qse(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),BFe(o,n),$Fe(o,n)}function GFe(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Jd(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(L5(u,n,s)),D5(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(L5(l,n,s)),D5(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!Jd(t)&&i.push(new(HFe())(e._repo,e._path)),{removed:i,events:o}}function jse(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function gd(t,e){let n=null;for(const s of t.views.values())n=n||jFe(s,e);return n}function Bse(t,e){if(e._queryParams.loadsAllData())return $A(t);{const n=e._queryIdentifier;return t.views.get(n)}}function $se(t,e){return Bse(t,e)!=null}function Jd(t){return $A(t)!=null}function $A(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let MS;function QFe(t){me(!MS,"__referenceConstructor has already been defined"),MS=t}function YFe(){return me(MS,"Reference.ts has not been loaded"),MS}let XFe=1;class F5{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Nn(null),this.pendingWriteTree_=SFe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zse(t,e,n,s,r){return gFe(t.pendingWriteTree_,e,n,s,r),r?PT(t,new Jp(Ase(),e,n)):[]}function up(t,e,n=!1){const s=mFe(t.pendingWriteTree_,e);if(_Fe(t.pendingWriteTree_,e)){let r=new Nn(null);return s.snap!=null?r=r.set(Qt(),!0):so(s.children,i=>{r=r.set(new mn(i),!0)}),PT(t,new PS(s.path,r,n))}else return[]}function AT(t,e,n){return PT(t,new Jp(IU(),e,n))}function JFe(t,e,n){const s=Nn.fromObject(n);return PT(t,new oE(IU(),e,s))}function ZFe(t,e){return PT(t,new iE(IU(),e))}function eVe(t,e,n){const s=xU(t,n);if(s){const r=OU(s),i=r.path,o=r.queryId,a=Ti(i,e),l=new iE(SU(o),a);return DU(t,i,l)}else return[]}function FS(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||$se(o,e))){const l=GFe(o,e,n,s);WFe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Jd(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=sVe(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,D=Gse(t,k);t.listenProvider_.startListening(Dw(P),aE(t,P),D.hashFn,D.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(Dw(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(zA(p));t.listenProvider_.stopListening(Dw(p),m)}))}rVe(t,u)}return a}function Hse(t,e,n,s){const r=xU(t,s);if(r!=null){const i=OU(r),o=i.path,a=i.queryId,l=Ti(o,e),u=new Jp(SU(a),l,n);return DU(t,o,u)}else return[]}function tVe(t,e,n,s){const r=xU(t,s);if(r){const i=OU(r),o=i.path,a=i.queryId,l=Ti(o,e),u=Nn.fromObject(n),h=new oE(SU(a),l,u);return DU(t,o,h)}else return[]}function AD(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Ti(p,r);i=i||gd(m,w),o=o||Jd(m)});let a=t.syncPointTree_.get(r);a?(o=o||Jd(a),i=i||gd(a,Qt())):(a=new Use,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=je.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=gd(m,Qt());w&&(i=i.updateImmediateChild(p,w))}));const u=$se(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=zA(e);me(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=iVe();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=BA(t.pendingWriteTree_,r);let d=KFe(a,e,n,h,i,l);if(!u&&!o&&!s){const p=Bse(a,e);d=d.concat(oVe(t,e,p))}return d}function NU(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Ti(i,e),l=gd(o,a);if(l)return l});return Ose(s,e,r,n,!0)}function nVe(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Ti(u,n);s=s||gd(h,d)});let r=t.syncPointTree_.get(n);r?s=s||gd(r,Qt()):(r=new Use,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Xd(s,!0,!1):null,a=BA(t.pendingWriteTree_,e._path),l=qse(r,e,a,i?o.getNode():je.EMPTY_NODE,i);return qFe(l)}function PT(t,e){return Wse(e,t.syncPointTree_,null,BA(t.pendingWriteTree_,Qt()))}function Wse(t,e,n,s){if(Pt(t.path))return Kse(t,e,n,s);{const r=e.get(Qt());n==null&&r!=null&&(n=gd(r,Qt()));let i=[];const o=wt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=Dse(s,o);i=i.concat(Wse(a,l,u,h))}return r&&(i=i.concat(PU(r,t,s,n))),i}}function Kse(t,e,n,s){const r=e.get(Qt());n==null&&r!=null&&(n=gd(r,Qt()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Dse(s,o),h=t.operationForChild(o);h&&(i=i.concat(Kse(h,a,l,u)))}),r&&(i=i.concat(PU(r,t,s,n))),i}function Gse(t,e){const n=e.query,s=aE(t,n);return{hashFn:()=>(UFe(e)||je.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?eVe(t,n._path,s):ZFe(t,n._path);{const i=n2e(r,n);return FS(t,n,null,i)}}}}function aE(t,e){const n=zA(e);return t.queryToTagMap.get(n)}function zA(t){return t._path.toString()+"$"+t._queryIdentifier}function xU(t,e){return t.tagToQueryMap.get(e)}function OU(t){const e=t.indexOf("$");return me(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mn(t.substr(0,e))}}function DU(t,e,n){const s=t.syncPointTree_.get(e);me(s,"Missing sync point for query tag that we're tracking");const r=BA(t.pendingWriteTree_,e);return PU(s,n,r,null)}function sVe(t){return t.fold((e,n,s)=>{if(n&&Jd(n))return[$A(n)];{let r=[];return n&&(r=jse(n)),so(s,(i,o)=>{r=r.concat(o)}),r}})}function Dw(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(YFe())(t._repo,t._path):t}function rVe(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=zA(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function iVe(){return XFe++}function oVe(t,e,n){const s=e._path,r=aE(t,e),i=Gse(t,n),o=t.listenProvider_.startListening(Dw(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)me(!Jd(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!Pt(u)&&h&&Jd(h))return[$A(h).query];{let p=[];return h&&(p=p.concat(jse(h).map(m=>m.query))),so(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(Dw(h),aE(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LU{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new LU(n)}node(){return this.node_}}class MU{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Vs(this.path_,e);return new MU(this.syncTree_,n)}node(){return NU(this.syncTree_,this.path_)}}const aVe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},V5=function(t,e,n){if(!t||typeof t!="object")return t;if(me(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return cVe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lVe(t[".sv"],e);me(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},cVe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:me(!1,"Unexpected server value: "+t)}},lVe=function(t,e,n){t.hasOwnProperty("increment")||me(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&me(!1,"Unexpected increment value: "+s);const r=e.node();if(me(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},uVe=function(t,e,n,s){return FU(e,new MU(n,t),s)},Qse=function(t,e,n){return FU(t,new LU(e),n)};function FU(t,e,n){const s=t.getPriority().val(),r=V5(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=V5(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Gs(a,nr(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Gs(r))),o.forEachChild(Jn,(a,l)=>{const u=FU(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VU{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function UU(t,e){let n=e instanceof mn?e:new mn(e),s=t,r=wt(n);for(;r!==null;){const i=g_(s.node.children,r)||{children:{},childCount:0};s=new VU(r,s,i),n=Sn(n),r=wt(n)}return s}function ly(t){return t.node.value}function Yse(t,e){t.node.value=e,PD(t)}function Xse(t){return t.node.childCount>0}function hVe(t){return ly(t)===void 0&&!Xse(t)}function HA(t,e){so(t.node.children,(n,s)=>{e(new VU(n,t,s))})}function Jse(t,e,n,s){n&&e(t),HA(t,r=>{Jse(r,e,!0)})}function dVe(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function NT(t){return new mn(t.parent===null?t.name:NT(t.parent)+"/"+t.name)}function PD(t){t.parent!==null&&fVe(t.parent,t.name,t)}function fVe(t,e,n){const s=hVe(n),r=yu(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,PD(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,PD(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pVe=/[\[\].#$\/\u0000-\u001F\u007F]/,gVe=/[\[\].#$\u0000-\u001F\u007F]/,CN=10*1024*1024,Zse=function(t){return typeof t=="string"&&t.length!==0&&!pVe.test(t)},ere=function(t){return typeof t=="string"&&t.length!==0&&!gVe.test(t)},mVe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ere(t)},_Ve=function(t,e,n,s){qU(mV(t,"value"),e,n)},qU=function(t,e,n){const s=n instanceof mn?new L2e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Kf(s));if(typeof e=="function")throw new Error(t+"contains a function "+Kf(s)+" with contents = "+e.toString());if(Xne(e))throw new Error(t+"contains "+e.toString()+" "+Kf(s));if(typeof e=="string"&&e.length>CN/3&&pA(e)>CN)throw new Error(t+"contains a string greater than "+CN+" utf8 bytes "+Kf(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(so(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Zse(o)))throw new Error(t+" contains an invalid key ("+o+") "+Kf(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);M2e(s,o),qU(t,a,s),F2e(s)}),r&&i)throw new Error(t+' contains ".value" child '+Kf(s)+" in addition to actual children.")}},tre=function(t,e,n,s){if(!ere(n))throw new Error(mV(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},yVe=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),tre(t,e,n)},nre=function(t,e){if(wt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},vVe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zse(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!mVe(n))throw new Error(mV(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wVe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jU(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!wU(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function sre(t,e,n){jU(t,n),rre(t,s=>wU(s,e))}function Kc(t,e,n){jU(t,n),rre(t,s=>va(s,e)||va(e,s))}function rre(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(bVe(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function bVe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Pw&&Wr("event: "+n.toString()),cy(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const EVe="repo_interrupt",TVe=25;class CVe{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wVe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AS(),this.transactionQueueTree_=new VU,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function IVe(t,e,n){if(t.stats_=yU(t.repoInfo_),t.forceRestClient_||o2e())t.server_=new RS(t.repoInfo_,(s,r,i,o)=>{U5(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>q5(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ms(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Fl(t.repoInfo_,e,(s,r,i,o)=>{U5(t,s,r,i,o)},s=>{q5(t,s)},s=>{kVe(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=h2e(t.repoInfo_,()=>new lFe(t.stats_,t.server_)),t.infoData_=new rFe,t.infoSyncTree_=new F5({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=AT(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),$U(t,"connected",!1),t.serverSyncTree_=new F5({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Kc(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function SVe(t){const e=t.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function BU(t){return aVe({timestamp:SVe(t)})}function U5(t,e,n,s,r){t.dataUpdateCount++;const i=new mn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=oS(n,u=>nr(u));o=tVe(t.serverSyncTree_,i,l,r)}else{const l=nr(n);o=Hse(t.serverSyncTree_,i,l,r)}else if(s){const l=oS(n,u=>nr(u));o=JFe(t.serverSyncTree_,i,l)}else{const l=nr(n);o=AT(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=KA(t,i)),Kc(t.eventQueue_,a,o)}function q5(t,e){$U(t,"connected",e),e===!1&&PVe(t)}function kVe(t,e){so(e,(n,s)=>{$U(t,n,s)})}function $U(t,e,n){const s=new mn("/.info/"+e),r=nr(n);t.infoData_.updateSnapshot(s,r);const i=AT(t.infoSyncTree_,s,r);Kc(t.eventQueue_,s,i)}function ire(t){return t.nextWriteId_++}function RVe(t,e,n){const s=nVe(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=nr(r).withIndex(e._queryParams.getIndex());AD(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=AT(t.serverSyncTree_,e._path,i);else{const a=aE(t.serverSyncTree_,e);o=Hse(t.serverSyncTree_,e._path,i,a)}return Kc(t.eventQueue_,e._path,o),FS(t.serverSyncTree_,e,n,null,!0),i},r=>(WA(t,"get for query "+Ms(e)+" failed: "+r),Promise.reject(new Error(r))))}function AVe(t,e,n,s,r){WA(t,"set",{path:e.toString(),value:n,priority:s});const i=BU(t),o=nr(n,s),a=NU(t.serverSyncTree_,e),l=Qse(o,a,i),u=ire(t),h=zse(t.serverSyncTree_,e,l,u,!0);jU(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||eo("set at "+e+" failed: "+p);const k=up(t.serverSyncTree_,u,!w);Kc(t.eventQueue_,e,k),DVe(t,r,p,m)});const d=ure(t,e);KA(t,d),Kc(t.eventQueue_,d,[])}function PVe(t){WA(t,"onDisconnectEvents");const e=BU(t),n=AS();CD(t.onDisconnect_,Qt(),(r,i)=>{const o=uVe(r,i,t.serverSyncTree_,e);Rse(n,r,o)});let s=[];CD(n,Qt(),(r,i)=>{s=s.concat(AT(t.serverSyncTree_,r,i));const o=ure(t,r);KA(t,o)}),t.onDisconnect_=AS(),Kc(t.eventQueue_,Qt(),s)}function NVe(t,e,n){let s;wt(e._path)===".info"?s=AD(t.infoSyncTree_,e,n):s=AD(t.serverSyncTree_,e,n),sre(t.eventQueue_,e._path,s)}function xVe(t,e,n){let s;wt(e._path)===".info"?s=FS(t.infoSyncTree_,e,n):s=FS(t.serverSyncTree_,e,n),sre(t.eventQueue_,e._path,s)}function OVe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(EVe)}function WA(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Wr(n,...e)}function DVe(t,e,n,s){e&&cy(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function ore(t,e,n){return NU(t.serverSyncTree_,e,n)||je.EMPTY_NODE}function zU(t,e=t.transactionQueueTree_){if(e||GA(t,e),ly(e)){const n=cre(t,e);me(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&LVe(t,NT(e),n)}else Xse(e)&&HA(e,n=>{zU(t,n)})}function LVe(t,e,n){const s=n.map(u=>u.currentWriteId),r=ore(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];me(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ti(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{WA(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(up(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();GA(t,UU(t.transactionQueueTree_,e)),zU(t,t.transactionQueueTree_),Kc(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)cy(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{eo("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}KA(t,e)}},o)}function KA(t,e){const n=are(t,e),s=NT(n),r=cre(t,n);return MVe(t,r,s),s}function MVe(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],l=Ti(n,a.path);let u=!1,h;if(me(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)u=!0,h=a.abortReason,r=r.concat(up(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=TVe)u=!0,h="maxretry",r=r.concat(up(t.serverSyncTree_,a.currentWriteId,!0));else{const d=ore(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){qU("transaction failed: Data returned ",p,a.path);let m=nr(p);typeof p=="object"&&p!=null&&yu(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,k=BU(t),P=Qse(m,d,k);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=ire(t),i.splice(i.indexOf(w),1),r=r.concat(zse(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(up(t.serverSyncTree_,w,!0))}else u=!0,h="nodata",r=r.concat(up(t.serverSyncTree_,a.currentWriteId,!0))}Kc(t.eventQueue_,n,r),r=[],u&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}GA(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)cy(s[o]);zU(t,t.transactionQueueTree_)}function are(t,e){let n,s=t.transactionQueueTree_;for(n=wt(e);n!==null&&ly(s)===void 0;)s=UU(s,n),e=Sn(e),n=wt(e);return s}function cre(t,e){const n=[];return lre(t,e,n),n.sort((s,r)=>s.order-r.order),n}function lre(t,e,n){const s=ly(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);HA(e,r=>{lre(t,r,n)})}function GA(t,e){const n=ly(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Yse(e,n.length>0?n:void 0)}HA(e,s=>{GA(t,s)})}function ure(t,e){const n=NT(are(t,e)),s=UU(t.transactionQueueTree_,e);return dVe(s,r=>{IN(t,r)}),IN(t,s),Jse(s,r=>{IN(t,r)}),n}function IN(t,e){const n=ly(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(me(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(me(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(up(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Yse(e,void 0):n.length=i+1,Kc(t.eventQueue_,NT(e),r);for(let o=0;o<s.length;o++)cy(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FVe(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function VVe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):eo(`Invalid query segment '${n}' in query '${t}'`)}return e}const j5=function(t,e){const n=UVe(t),s=n.namespace;n.domain==="firebase.com"&&ru(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&ru("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||XMe();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lse(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new mn(n.pathString)}},UVe=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=FVe(t.substring(h,d)));const p=VVe(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qVe{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ms(this.snapshot.exportVal())}}class jVe{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hre{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return me(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HU{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Pt(this._path)?null:yse(this._path)}get ref(){return new vu(this._repo,this._path)}get _queryIdentifier(){const e=S5(this._queryParams),n=mU(e);return n==="{}"?"default":n}get _queryObject(){return S5(this._queryParams)}isEqual(e){if(e=un(e),!(e instanceof HU))return!1;const n=this._repo===e._repo,s=wU(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+D2e(this._path)}}class vu extends HU{constructor(e,n){super(e,n,new CU,!1)}get parent(){const e=wse(this._path);return e===null?null:new vu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class cE{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new mn(e),s=ND(this.ref,e);return new cE(this._node.getChild(n),s,Jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new cE(s,ND(this.ref,n),Jn)))}hasChild(e){const n=new mn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function BVe(t,e){return t=un(t),t._checkNotDeleted("ref"),e!==void 0?ND(t._root,e):t._root}function ND(t,e){return t=un(t),wt(t._path)===null?yVe("child","path",e):tre("child","path",e),new vu(t._repo,Vs(t._path,e))}function $Ve(t){return nre("remove",t._path),dre(t,null)}function dre(t,e){t=un(t),nre("set",t._path),_Ve("set",e,t._path);const n=new hA;return AVe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function zVe(t){t=un(t);const e=new hre(()=>{}),n=new QA(e);return RVe(t._repo,t,n).then(s=>new cE(s,new vu(t._repo,t._path),t._queryParams.getIndex()))}class QA{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new qVe("value",this,new cE(e.snapshotNode,new vu(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new jVe(this,e,n):null}matches(e){return e instanceof QA?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function HVe(t,e,n,s,r){const i=new hre(n,void 0),o=new QA(i);return NVe(t._repo,t,o),()=>xVe(t._repo,t,o)}function WVe(t,e,n,s){return HVe(t,"value",e)}zFe(vu);QFe(vu);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KVe="FIREBASE_DATABASE_EMULATOR_HOST",xD={};let GVe=!1;function QVe(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=el(i);t.repoInfo_=new lse(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function YVe(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||ru("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wr("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=j5(i,r),a=o.repoInfo,l;typeof process<"u"&&c5&&(l=c5[KVe]),l?(i=`http://${l}?ns=${a.namespace}`,o=j5(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new c2e(t.name,t.options,e);vVe("Invalid Firebase Database URL",o),Pt(o.path)||ru("Database URL must point to the root of a Firebase Database (not including a child path).");const h=JVe(a,t,u,new a2e(t,n));return new ZVe(h,t)}function XVe(t,e){const n=xD[e];(!n||n[t.key]!==t)&&ru(`Database ${e}(${t.repoInfo_}) has already been deleted.`),OVe(t),delete n[t.key]}function JVe(t,e,n,s){let r=xD[e.name];r||(r={},xD[e.name]=r);let i=r[t.toURLString()];return i&&ru("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new CVe(t,GVe,n,s),r[t.toURLString()]=i,i}class ZVe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(IVe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vu(this._repo,Qt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XVe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ru("Cannot call "+e+" on a deleted database.")}}function fre(t=mA(),e){const n=mT(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=fV("database");s&&eUe(n,...s)}return n}function eUe(t,e,n,s={}){t=un(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&jd(s,i.repoInfo_.emulatorOptions))return;ru("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&ru('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new RI(RI.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:pV(s.mockUserToken,t.app.options.projectId);o=new RI(a)}el(e)&&(dA(e),fA("Database",!0)),QVe(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tUe(t){HMe(bf),Bd(new Zl("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return YVe(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Lo(l5,u5,t),Lo(l5,u5,"esm2020")}Fl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Fl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tUe();var Lf={};const As={apiKey:Lf.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Lf.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Lf.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Lf.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Lf.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Lf.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Lf.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:As.apiKey?"설정됨":"설정 안됨",authDomain:As.authDomain?"설정됨":"설정 안됨",projectId:As.projectId?"설정됨":"설정 안됨",storageBucket:As.storageBucket?"설정됨":"설정 안됨",messagingSenderId:As.messagingSenderId?"설정됨":"설정 안됨",appId:As.appId?"설정됨":"설정 안됨",databaseURL:As.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:As.apiKey?`${As.apiKey.substring(0,10)}...`:"없음",authDomain:As.authDomain,projectId:As.projectId,databaseURL:As.databaseURL?"설정됨":"없음"});(!As.apiKey||!As.authDomain||!As.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let zn,Gn,hp,VS,US;As.apiKey&&As.authDomain&&As.projectId?(zn=uee(As),Gn=Zee(zn),hp=new _c,VS=bne(zn),US=jMe(zn),fre(zn)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Gn=null,hp=null,VS=null,US=null);const nUe=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Gn},get db(){return VS},get firebaseApp(){return zn},get googleProvider(){return hp},get storage(){return US}},Symbol.toStringTag,{value:"Module"}));function pre(){return wo(FZ)}const An=Jl(null),Xa=Jl(!0),PC=Jl(null);let Lg=null,B5=!1;function gre(){const t=pre(),e=zn?bne(zn):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),zn?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async l=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("🔍 사용자 정보 확인 중:",l.email,`(시도 ${h+1}/${u})`);const d=wne(e,"users",l.uid),p=await _D(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await yD(d,{lastLoginAt:kI()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(l.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:l.email,adminEmails:w,isAdminEmail:k});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:k?"admin":"student",createdAt:kI(),lastLoginAt:kI()};console.log("💾 새 사용자 정보 저장 중:",P),await yD(d,P),console.log("✅ 새 사용자 등록 완료:",l.email);const D=await _D(d);if(D.exists())console.log("✅ 사용자 등록 확인 완료:",D.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...l,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${u}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!zn,db:!!e,auth:!!Gn,userUid:l.uid,userEmail:l.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<u)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...l,role:"student"}},s=async()=>{if(!Xa.value){Xa.value=!0,PC.value=null;try{if(!Gn||!hp)throw new Error("Firebase is not configured.");const l=await Yee(Gn,hp);console.log("✅ Google 로그인 팝업 성공:",l.user.email);try{if(zn&&e)An.value=await n(l.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",An.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),An.value=null,Gn&&await tm(Gn),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),Xa.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!An.value,userRole:An.value?.role,userEmail:An.value?.email})}catch(u){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",u),An.value=null,Gn&&await tm(Gn),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),Xa.value=!1;return}Xa.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(l){console.error("❌ Google 로그인 팝업 실패:",l),PC.value=l.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),Xa.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Gn),!Gn){console.log("❌ useAuth: auth 객체가 없음");return}try{Lg&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Lg(),Lg=null),console.log("🔍 useAuth: Firebase signOut 실행"),await tm(Gn),console.log("✅ useAuth: Firebase signOut 성공"),An.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(l){console.error("❌ useAuth: 로그아웃 실패:",l),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!B5){if(B5=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!zn,auth:!!Gn,db:!!e}),!Gn){console.log("⚠️ Firebase Auth가 초기화되지 않음"),Xa.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Lg=Vee(Gn,async l=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",l?l.email:"없음"),l)if(console.log("✅ 인증된 사용자 감지:",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),zn&&e)try{An.value=await n(l),console.log("✅ 사용자 역할 설정 완료:",An.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!An.value,userRole:An.value?.role,userEmail:An.value?.email})}catch(u){console.error("❌ 사용자 역할 가져오기 실패:",u),console.error("❌ 오류 코드:",u.code),console.error("❌ 오류 메시지:",u.message),An.value=null,Gn&&await tm(Gn),PC.value=u.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),Xa.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),An.value=null,Gn&&await tm(Gn),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),An.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");Xa.value=!1})}};sA(()=>{Lg&&Lg()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:An.value,isAuthenticated:!!An.value,userRole:An.value?.role,firebaseApp:!!zn,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!zn),console.log("  - Firebase Auth:",!!Gn),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!hp),zn&&console.log("  - Firebase Config:",{apiKey:zn.options.apiKey?"설정됨":"설정 안됨",authDomain:zn.options.authDomain?"설정됨":"설정 안됨",projectId:zn.options.projectId?"설정됨":"설정 안됨",storageBucket:zn.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!zn,auth:!!Gn,db:!!e,googleProvider:!!hp});return{user:Oe(()=>An.value),loading:Oe(()=>Xa.value),error:Oe(()=>PC.value),isAuthenticated:Oe(()=>!!An.value),displayName:Oe(()=>An.value?.displayName||"사용자"),email:Oe(()=>An.value?.email||""),photoURL:Oe(()=>An.value?.photoURL||""),isFirebaseConfigured:Oe(()=>!!zn),userRole:Oe(()=>An.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const sUe={id:"app"},rUe=dT({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=gre(),o=XZ(),a=JZ();return tA(()=>{e()}),Pm([n,s,r],([l,u,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),l?u==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(l,u)=>{const h=WJ("router-view");return oV(),uZ("div",sUe,[Zr(h)])}}}),iUe=t=>t,oUe=iUe,aUe=[{path:"/",component:()=>yr(()=>Un(()=>import("./MainLayout-Bwj2wsFm-Cz6tEJ5A.js"),__vite__mapDeps([22,23,24,25,26,27,28,29,30,31,32,33])),fi([22,23,24,25,26,27,28,29,30,31,32,33,34,35])),children:[{path:"",component:()=>yr(()=>Un(()=>import("./IndexPage-CFs49cf4-DCFzd5a3.js"),__vite__mapDeps([34,23,24,25,32,35,30,31,36,33])),fi([36,23,24,25,32,37,30,31,38,34,39]))},{path:"survey-results",component:()=>yr(()=>Un(()=>import("./SurveyResults-DvN0U2_L-LlonMCsx.js"),__vite__mapDeps([37,28,25,23,24,27,38,35,39])),fi([40,28,25,23,24,27,41,37,42,43]))}]},{path:"/logout",component:()=>yr(()=>Un(()=>import("./LogoutPage-CtCownZv-BTcpQEl3.js"),__vite__mapDeps([40,24,25,32,35,26])),fi([44,24,25,32,37,26,45]))},{path:"/poll-result",component:()=>yr(()=>Un(()=>import("./PollResultPage-BsZ27FdJ-BqTU4Xdx.js"),__vite__mapDeps([41,28,25,35,39])),fi([46,28,25,37,42,43,47]))},{path:"/study/:courseId",component:()=>yr(()=>Un(()=>import("./StudentView-EHbgIK-q-CI38o4Vo.js"),__vite__mapDeps([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),fi([48,23,24,25,27,29,26,30,31,32,28,33,38,37,41,42,43,49])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>yr(()=>Un(()=>import("./ErrorNotFound-C3eQr692-UoAM-uVv.js"),[]),[])}],SN=oUe(function(){return DAe({scrollBehavior:()=>({left:0,top:0}),routes:aUe,history:lAe("/")})});async function cUe(t,e){const n=t(rUe);n.use(xRe,e);const s=J_(typeof SN=="function"?await SN({}):SN);return{app:n,router:s}}const OD={xs:18,sm:24,md:32,lg:38,xl:46},YA={size:String};function XA(t,e=OD){return Oe(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function mre(t,e){return t!==void 0&&t()||e}function lUe(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function pm(t,e){return t!==void 0?e.concat(t()):e}function _re(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function uUe(t,e,n,s,r,i){e.key=s+r;const o=Je(t,e,n);return r===!0?eV(o,i()):o}const $5="0 0 24 24",kN=t=>t,RN=t=>`ionicons ${t}`,yre={"mdi-":t=>`mdi ${t}`,"icon-":kN,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":RN,"ion-ios":RN,"ion-logo":RN,"iconfont ":kN,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":kN},vre={o_:"-outlined",r_:"-round",s_:"-sharp"},wre={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},hUe=new RegExp("^("+Object.keys(yre).join("|")+")"),dUe=new RegExp("^("+Object.keys(vre).join("|")+")"),z5=new RegExp("^("+Object.keys(wre).join("|")+")"),fUe=/^[Mm]\s?[-+]?\.?\d/,pUe=/^img:/,gUe=/^svguse:/,mUe=/^ion-/,_Ue=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,lE=Z_({name:"QIcon",props:{...YA,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=wf(),s=XA(t),r=Oe(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=Oe(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(fUe.test(a)===!0){const[h,d=$5]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return Je("path",{style:w,d:m,transform:k})})}}if(pUe.test(a)===!0)return{img:!0,src:a.substring(4)};if(gUe.test(a)===!0){const[h,d=$5]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(hUe);if(u!==null)o=yre[u[1]](a);else if(_Ue.test(a)===!0)o=a;else if(mUe.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(z5.test(a)===!0){o="notranslate material-symbols";const h=a.match(z5);h!==null&&(a=a.substring(6),o+=wre[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(dUe);h!==null&&(a=a.substring(2),o+=vre[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?Je(t.tag,o,mre(e.default)):i.value.img===!0?Je(t.tag,o,pm(e.default,[Je("img",{src:i.value.src})])):i.value.svg===!0?Je(t.tag,o,pm(e.default,[Je("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?Je(t.tag,o,pm(e.default,[Je("svg",{viewBox:i.value.viewBox},[Je("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),Je(t.tag,o,pm(e.default,[i.value.content])))}}}),bre=Z_({name:"QAvatar",props:{...YA,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=XA(t),s=Oe(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=Oe(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[Je(lE,{name:t.icon})]:void 0;return Je("div",{class:s.value,style:n.value},[Je("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},_re(e.default,i))])}}}),Ere={size:{type:[String,Number],default:"1em"},color:String};function Tre(t){return{cSize:Oe(()=>t.size in OD?`${OD[t.size]}px`:t.size),classes:Oe(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const WU=Z_({name:"QSpinner",props:{...Ere,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=Tre(t);return()=>Je("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Je("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Cre(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function yUe(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=cd(t);if(e)return e.$el||e}function vUe(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function wUe(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function H5(t,e,n,s){n.modifiers.stop===!0&&lV(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=RZ(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${l.left-u-w}px`,D=`${(p-m)/2}px`,M=i?D:`${l.top-h-w}px`;a.className="q-ripple__inner",Cre(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${D},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function W5(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const Ire=kZ({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&H5(r,t,s,r.qKeyEvent===!0)},keystart:wUe(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&tS(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&H5(r,t,s,!0)},300)};W5(s,e),t.__qripple=s,AZ(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&W5(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),PZ(e,"main"),delete t._qripple)}}),Sre={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},bUe=Object.keys(Sre),kre={align:{type:String,validator:t=>bUe.includes(t)}};function Rre(t){return Oe(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${Sre[e]}`})}function EUe(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function Are(t){return t.appContext.config.globalProperties.$router!==void 0}function TUe(t){return t.isUnmounted===!0||t.isDeactivated===!0}function K5(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function G5(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function CUe(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Q5(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function IUe(t,e){return Array.isArray(t)===!0?Q5(t,e):Array.isArray(e)===!0?Q5(e,t):t===e}function SUe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(IUe(t[n],e[n])===!1)return!1;return!0}const Pre={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},kUe={...Pre,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function Nre({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=wf(),{props:s,proxy:r,emit:i}=n,o=Are(n),a=Oe(()=>s.disable!==!0&&s.href!==void 0),l=Oe(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=Oe(()=>l.value===!0?M(s.to):null),h=Oe(()=>u.value!==null),d=Oe(()=>a.value===!0||h.value===!0),p=Oe(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=Oe(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=Oe(()=>{if(h.value===!1)return-1;const{matched:H}=u.value,{length:X}=H,I=H[X-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(G5.bind(null,I));if(y!==-1)return y;const C=K5(H[X-2]);return X>1&&K5(I)===C&&v[v.length-1].path!==C?v.findIndex(G5.bind(null,H[X-2])):y}),k=Oe(()=>h.value===!0&&w.value!==-1&&CUe(r.$route.params,u.value.params)),P=Oe(()=>k.value===!0&&w.value===r.$route.matched.length-1&&SUe(r.$route.params,u.value.params)),D=Oe(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:X,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return X===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const X=I=>V(H,I);i("click",H,X),H.defaultPrevented!==!0&&X()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:k,linkIsExactActive:P,linkClass:D,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const Y5={none:0,xs:4,sm:8,md:16,lg:24,xl:32},RUe={xs:8,sm:10,md:14,lg:20,xl:24},AUe=["button","submit","reset"],PUe=/[^\s]\/[^\s]/,NUe=["flat","outline","push","unelevated"];function xUe(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const OUe={...YA,...Pre,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...NUe.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...kre.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},DUe={...OUe,round:Boolean};function LUe(t){const e=XA(t,RUe),n=Rre(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=Nre({fallbackTag:"button"}),l=Oe(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(D=>D in Y5?Y5[D]+"px":D).join(" "),minWidth:"0",minHeight:"0"}):P}),u=Oe(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=Oe(()=>t.disable!==!0&&t.loading!==!0),d=Oe(()=>h.value===!0?t.tabindex||0:-1),p=Oe(()=>xUe(t,"standard")),m=Oe(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):AUe.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&PUe.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=Oe(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const D=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${D}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=Oe(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:Co}=qd;let Mg=null,Fg=null,Vg=null;const xre=Z_({name:"QBtn",props:{...DUe,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=wf(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=LUe(t),p=Jl(null),m=Jl(null);let w=null,k,P=null;const D=Oe(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=Oe(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=Oe(()=>({center:t.round})),q=Oe(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=Oe(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:C};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:Hf}}),X=Oe(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const de=()=>{document.removeEventListener("keydown",Hf,!0),document.removeEventListener("keyup",de,Co),p.value?.removeEventListener("blur",de,Co)};document.addEventListener("keydown",Hf,!0),document.addEventListener("keyup",de,Co),p.value.addEventListener("blur",de,Co)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),tS(K,[13,32])===!0&&Fg!==p.value&&(Fg!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),Fg=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,Co)),Hf(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&(Mg!==p.value&&(Mg!==null&&E(),Mg=p.value,w=K.target,w.addEventListener("touchcancel",S,Co),w.addEventListener("touchend",S,Co)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function C(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Vg!==p.value&&(Vg!==null&&E(),Vg=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,Co)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(Fg===p.value&&tS(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&eS(ne),K.cancelBubble===!0&&lV(ne),p.value.dispatchEvent(ne),Hf(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&(Mg===p.value||Vg===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Mg===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,Co),w.removeEventListener("touchend",S,Co)),Mg=w=null),Vg===p.value&&(document.removeEventListener("mouseup",S,Co),Vg=null),Fg===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,Co),Fg=null),p.value?.classList.remove("q-btn--active")}function b(K){Hf(K),K.qSkipRipple=!0}return nA(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(Je(lE,{name:t.icon,left:t.stack!==!0&&D.value===!0,role:"img"})),D.value===!0&&K.push(Je("span",{class:"block"},[t.label])),K=pm(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(Je(lE,{name:t.iconRight,right:t.stack!==!0&&D.value===!0,role:"img"}));const ne=[Je("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(Je("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Je("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(Je("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(Je(vZ,{name:"q-transition--fade"},()=>t.loading===!0?[Je("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Je(WU)])]:null)),eV(Je(u.value,X.value,ne),[[Ire,M.value,void 0,V.value]])}}});let MUe=1,FUe=document.body;function Ore(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${MUe++}`:t,sS.globalNodes!==void 0){const s=sS.globalNodes.class;s!==void 0&&(n.className=s)}return FUe.appendChild(n),n}function VUe(t){t.remove()}let UUe=0;const AI={},PI={},ia={},Dre={},qUe=/^\s*$/,Lre=[],jUe=[void 0,null,!0,!1,""],KU=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],BUe=["top-left","top-right","bottom-left","bottom-right"],Dv={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function Mre(t,e,n){if(!t)return lv("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,AI),d_(t)===!1&&(r.type&&Object.assign(r,Dv[r.type]),t={message:t}),Object.assign(r,Dv[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=WU),r.spinner=J_(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:X5(r.message)||X5(r.caption)},r.position){if(KU.includes(r.position)===!1)return lv("wrong position",t)}else r.position="bottom";if(jUe.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return lv("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(AI.actions)===!0?AI.actions:[]).concat(Array.isArray(Dv[t.type]?.actions)===!0?Dv[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=ia[r.position].value.indexOf(n.notif);ia[r.position].value[l]=r}else{const l=PI[r.meta.group];if(l===void 0){if(r.meta.uid=UUe++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)ia[r.position].value.splice(Math.floor(ia[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";ia[r.position].value[u](r)}r.group!==void 0&&(PI[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(BUe.includes(r.badgePosition)===!1)return lv("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=ia[r.position].value.indexOf(l);ia[r.position].value[u]=PI[r.meta.group]=r}}const a=()=>{$Ue(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?lv("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});Mre(u,e,s)}}}function $Ue(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=ia[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete PI[t.meta.group];const n=Lre[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}ia[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function X5(t){return t!=null&&qUe.test(t)!==!0}function lv(t,e){return console.error(`Notify: ${t}`,e),!1}function zUe(){return Z_({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Je("div",{class:"q-notifications"},KU.map(t=>Je(Hke,{key:t,class:Dre[t],tag:"div",name:`q-notification--${t}`},()=>ia[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(Je(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(Je(lE,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(Je(bre,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Je("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[Je("div",a),Je("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(Je("div",o,i))}const r=[Je("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(Je("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(Je("div",{class:n.actionsClass},e.actions.map(i=>Je(xre,i)))),n.badge>1&&r.push(Je("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Je("div",{ref:i=>{Lre[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[Je("div",{class:n.wrapperClass},r)])}))))}})}const HUe={setDefaults(t){d_(t)===!0&&Object.assign(AI,t)},registerType(t,e){d_(e)===!0&&(Dv[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>Mre(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){KU.forEach(s=>{ia[s]=Jl([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;Dre[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=Ore("q-notify");ARe(zUe(),e).mount(n)}}},WUe={config:{},plugins:{Notify:HUe}},KUe="/";async function GUe({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:KUe})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}cUe(IZ,WUe).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([yr(()=>Un(()=>import("./pinia-F5TpqEXP-CcuIgscM.js"),__vite__mapDeps([43,31])),fi([50,31]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");GUe(t,r)})});const OQe=Object.freeze(Object.defineProperty({__proto__:null,$:vp,A:l_,B:Q8,C:W8,D:CF,E:$E,F:F8,G:Ph,H:oK,I:zE,J:AM,K:q_,L:Gk,M:gM,N:UE,O:IF,get P(){return Vn},Q:TF,R:ac,S:OX,T:xX,U:Qk,V:EF,W:gf,X:pu,Y:RF,Z:Uc,_:yr,a:RM,get a$(){return Db},a0:DX,a1:j_,a2:hb,a3:xo,a4:Jk,a5:Mp,a6:Bl,a7:cM,a8:oM,a9:aM,aA:FX,aB:vm,aC:HX,aD:cK,aE:AF,aF:PF,aG:Jf,aH:n2,aI:$M,aJ:MM,aK:QM,aL:XM,aM:WM,aN:e2,aO:f0,aP:jM,aQ:KM,aR:uR,aS:s2,aT:JM,aU:YM,aV:mc,aW:Wl,aX:ca,aY:gc,aZ:pc,a_:lR,aa:op,ab:wM,ac:BX,ad:Yv,ae:CM,af:jk,ag:lM,ah:Hk,ai:db,aj:X8,ak:TM,al:LF,am:IM,an:dK,ao:hK,ap:Fp,aq:lT,ar:uT,as:qt,at:r2,au:LX,av:vM,aw:EM,ax:tK,ay:bM,az:Z8,b:fg,b$:lE,b0:x2,b1:R0,b2:zQ,b3:A0,get b4(){return Lb},b5:fY,b6:lY,b7:$Q,b8:iw,b9:hY,bA:yg,bB:V0e,bC:ir,bD:Cp,bE:zt,bF:Pm,bG:JF,bH:cSe,bI:J_,bJ:Oe,bK:aJ,bL:U0e,bM:wo,bN:USe,bO:Z_,bP:wf,bQ:Je,bR:mre,bS:IRe,bT:ERe,bU:TRe,bV:yUe,bW:Cre,bX:YA,bY:XA,bZ:uUe,b_:Ire,ba:uY,bb:dY,bc:HQ,bd:MF,be:OF,bf:DF,bg:c8,bh:ub,bi:VF,bj:eK,bk:jl,bl:zX,bm:GX,bn:aK,bo:NF,bp:jX,bq:kF,br:D7,bs:dg,bt:b8,bu:Bs,bv:Zh,bw:QL,bx:L7,by:Z7,bz:Jl,c:SF,c$:RZ,c0:_re,c1:Hf,c2:dT,c3:uZ,c4:aV,c5:Zr,c6:oV,c7:xre,c8:lV,c9:xa,get cA(){return VS},cB:wne,cC:_Le,cD:kI,cE:VMe,cF:FMe,cG:UMe,cH:yD,cI:_D,cJ:vLe,cK:yLe,cL:kUe,cM:Nre,cN:tS,cO:lUe,cP:gre,cQ:dre,cR:zVe,cS:QR,cT:YR,cU:cd,cV:$Ve,cW:eV,cX:kZ,cY:PZ,cZ:uRe,c_:AZ,ca:pT,cb:eS,cc:tA,cd:JZ,ce:hZ,cf:PJ,cg:lke,ch:rJ,ci:fZ,cj:XZ,ck:pre,cl:Ud,cm:nA,cn:h_,co:qd,cp:vw,cq:sA,cr:pm,get cs(){return zn},ct:fre,cu:WVe,cv:BVe,cw:OZ,get cx(){return US},cy:qMe,cz:MMe,d:lK,d0:cRe,d1:NZ,d2:BJ,d3:jJ,d4:TUe,d5:CRe,d6:d_,d7:Zee,d8:ko,d9:PSe,dA:IV,dB:wl,dC:bl,dD:_c,dE:$d,dF:El,dG:Fee,dH:jee,dI:Jee,dJ:kV,dK:Oee,dL:vee,dM:YO,dN:Kee,dO:xee,dP:Vee,dQ:Mee,dR:pee,dS:wee,dT:Yee,dU:tm,dV:Ere,dW:Tre,dX:C0e,dY:nUe,da:bre,db:Jke,dc:vZ,dd:QF,de:Rke,df:WU,dg:WJ,dh:zJ,di:vUe,dj:gI,dk:HJ,dl:nV,dm:Are,dn:MZ,dp:RRe,dq:kRe,dr:sRe,ds:Z0,dt:EUe,du:vSe,dv:Ore,dw:VUe,dx:lRe,dy:kre,dz:Rre,e:MX,f:yM,g:Ji,h:Uk,i:pM,j:rM,k:FF,l:Ll,m:mM,n:uM,o:Ne,p:Qe,q:GL,r:$R,s:_8,t:qE,u:Bk,v:BE,w:ao,x:xF,y:KX,z:Cr},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function GU(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const pn={},Vm=[],xc=()=>{},QUe=()=>!1,JA=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),QU=t=>t.startsWith("onUpdate:"),Ks=Object.assign,YU=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},YUe=Object.prototype.hasOwnProperty,nn=(t,e)=>YUe.call(t,e),Ge=Array.isArray,Um=t=>ZA(t)==="[object Map]",Fre=t=>ZA(t)==="[object Set]",ht=t=>typeof t=="function",rs=t=>typeof t=="string",Cf=t=>typeof t=="symbol",Fn=t=>t!==null&&typeof t=="object",Vre=t=>(Fn(t)||ht(t))&&ht(t.then)&&ht(t.catch),Ure=Object.prototype.toString,ZA=t=>Ure.call(t),XUe=t=>ZA(t).slice(8,-1),qre=t=>ZA(t)==="[object Object]",XU=t=>rs(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Lw=GU(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),e1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},JUe=/-(\w)/g,Bo=e1(t=>t.replace(JUe,(e,n)=>n?n.toUpperCase():"")),ZUe=/\B([A-Z])/g,Eg=e1(t=>t.replace(ZUe,"-$1").toLowerCase()),t1=e1(t=>t.charAt(0).toUpperCase()+t.slice(1)),AN=e1(t=>t?`on${t1(t)}`:""),md=(t,e)=>!Object.is(t,e),PN=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},DD=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},e4e=t=>{const e=parseFloat(t);return isNaN(e)?t:e},t4e=t=>{const e=rs(t)?Number(t):NaN;return isNaN(e)?t:e};let J5;const n1=()=>J5||(J5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function JU(t){if(Ge(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=rs(s)?i4e(s):JU(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(rs(t)||Fn(t))return t}const n4e=/;(?![^(]*\))/g,s4e=/:([^]+)/,r4e=/\/\*[^]*?\*\//g;function i4e(t){const e={};return t.replace(r4e,"").split(n4e).forEach(n=>{if(n){const s=n.split(s4e);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ZU(t){let e="";if(rs(t))e=t;else if(Ge(t))for(let n=0;n<t.length;n++){const s=ZU(t[n]);s&&(e+=s+" ")}else if(Fn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const o4e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a4e=GU(o4e);function jre(t){return!!t||t===""}const Bre=t=>!!(t&&t.__v_isRef===!0),c4e=t=>rs(t)?t:t==null?"":Ge(t)||Fn(t)&&(t.toString===Ure||!ht(t.toString))?Bre(t)?c4e(t.value):JSON.stringify(t,$re,2):String(t),$re=(t,e)=>Bre(e)?$re(t,e.value):Um(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[NN(s,i)+" =>"]=r,n),{})}:Fre(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>NN(n))}:Cf(e)?NN(e):Fn(e)&&!Ge(e)&&!qre(e)?String(e):e,NN=(t,e="")=>{var n;return Cf(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fr;class zre{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fr,!e&&Fr&&(this.index=(Fr.scopes||(Fr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Fr;try{return Fr=this,e()}finally{Fr=n}}}on(){++this._on===1&&(this.prevScope=Fr,Fr=this)}off(){this._on>0&&--this._on===0&&(Fr=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function DQe(t){return new zre(t)}function l4e(){return Fr}function LQe(t,e=!1){Fr&&Fr.cleanups.push(t)}let Cn;const xN=new WeakSet;class Hre{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fr&&Fr.active&&Fr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xN.has(this)&&(xN.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kre(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Z5(this),Gre(this);const e=Cn,n=Fa;Cn=this,Fa=!0;try{return this.fn()}finally{Qre(this),Cn=e,Fa=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)n4(e);this.deps=this.depsTail=void 0,Z5(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xN.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){LD(this)&&this.run()}get dirty(){return LD(this)}}let Wre=0,Mw,Fw;function Kre(t,e=!1){if(t.flags|=8,e){t.next=Fw,Fw=t;return}t.next=Mw,Mw=t}function e4(){Wre++}function t4(){if(--Wre>0)return;if(Fw){let e=Fw;for(Fw=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Mw;){let e=Mw;for(Mw=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Gre(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Qre(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),n4(s),u4e(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function LD(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Yre(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Yre(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===uE)||(t.globalVersion=uE,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!LD(t))))return;t.flags|=2;const e=t.dep,n=Cn,s=Fa;Cn=t,Fa=!0;try{Gre(t);const r=t.fn(t._value);(e.version===0||md(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Cn=n,Fa=s,Qre(t),t.flags&=-3}}function n4(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)n4(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function u4e(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Fa=!0;const Xre=[];function iu(){Xre.push(Fa),Fa=!1}function ou(){const t=Xre.pop();Fa=t===void 0?!0:t}function Z5(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Cn;Cn=void 0;try{e()}finally{Cn=n}}}let uE=0;class h4e{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class s4{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Cn||!Fa||Cn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Cn)n=this.activeLink=new h4e(Cn,this),Cn.deps?(n.prevDep=Cn.depsTail,Cn.depsTail.nextDep=n,Cn.depsTail=n):Cn.deps=Cn.depsTail=n,Jre(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Cn.depsTail,n.nextDep=void 0,Cn.depsTail.nextDep=n,Cn.depsTail=n,Cn.deps===n&&(Cn.deps=s)}return n}trigger(e){this.version++,uE++,this.notify(e)}notify(e){e4();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{t4()}}}function Jre(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Jre(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const qS=new WeakMap,Ap=Symbol(""),MD=Symbol(""),hE=Symbol("");function Kr(t,e,n){if(Fa&&Cn){let s=qS.get(t);s||qS.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new s4),r.map=s,r.key=n),r.track()}}function Tl(t,e,n,s,r,i){const o=qS.get(t);if(!o){uE++;return}const a=l=>{l&&l.trigger()};if(e4(),e==="clear")o.forEach(a);else{const l=Ge(t),u=l&&XU(n);if(l&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===hE||!Cf(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(hE)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ap)),Um(t)&&a(o.get(MD)));break;case"delete":l||(a(o.get(Ap)),Um(t)&&a(o.get(MD)));break;case"set":Um(t)&&a(o.get(Ap));break}}t4()}function d4e(t,e){const n=qS.get(t);return n&&n.get(e)}function Ug(t){const e=Wt(t);return e===t?e:(Kr(e,"iterate",hE),Mo(t)?e:e.map(br))}function s1(t){return Kr(t=Wt(t),"iterate",hE),t}const f4e={__proto__:null,[Symbol.iterator](){return ON(this,Symbol.iterator,br)},concat(...t){return Ug(this).concat(...t.map(e=>Ge(e)?Ug(e):e))},entries(){return ON(this,"entries",t=>(t[1]=br(t[1]),t))},every(t,e){return cl(this,"every",t,e,void 0,arguments)},filter(t,e){return cl(this,"filter",t,e,n=>n.map(br),arguments)},find(t,e){return cl(this,"find",t,e,br,arguments)},findIndex(t,e){return cl(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return cl(this,"findLast",t,e,br,arguments)},findLastIndex(t,e){return cl(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return cl(this,"forEach",t,e,void 0,arguments)},includes(...t){return DN(this,"includes",t)},indexOf(...t){return DN(this,"indexOf",t)},join(t){return Ug(this).join(t)},lastIndexOf(...t){return DN(this,"lastIndexOf",t)},map(t,e){return cl(this,"map",t,e,void 0,arguments)},pop(){return uv(this,"pop")},push(...t){return uv(this,"push",t)},reduce(t,...e){return ez(this,"reduce",t,e)},reduceRight(t,...e){return ez(this,"reduceRight",t,e)},shift(){return uv(this,"shift")},some(t,e){return cl(this,"some",t,e,void 0,arguments)},splice(...t){return uv(this,"splice",t)},toReversed(){return Ug(this).toReversed()},toSorted(t){return Ug(this).toSorted(t)},toSpliced(...t){return Ug(this).toSpliced(...t)},unshift(...t){return uv(this,"unshift",t)},values(){return ON(this,"values",br)}};function ON(t,e,n){const s=s1(t),r=s[e]();return s!==t&&!Mo(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const p4e=Array.prototype;function cl(t,e,n,s,r,i){const o=s1(t),a=o!==t&&!Mo(t),l=o[e];if(l!==p4e[e]){const d=l.apply(t,i);return a?br(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,br(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,s);return a&&r?r(h):h}function ez(t,e,n,s){const r=s1(t);let i=n;return r!==t&&(Mo(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,br(a),l,t)}),r[e](i,...s)}function DN(t,e,n){const s=Wt(t);Kr(s,"iterate",hE);const r=s[e](...n);return(r===-1||r===!1)&&o4(n[0])?(n[0]=Wt(n[0]),s[e](...n)):r}function uv(t,e,n=[]){iu(),e4();const s=Wt(t)[e].apply(t,n);return t4(),ou(),s}const g4e=GU("__proto__,__v_isRef,__isVue"),Zre=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cf));function m4e(t){Cf(t)||(t=String(t));const e=Wt(this);return Kr(e,"has",t),e.hasOwnProperty(t)}class eie{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?S4e:rie:i?sie:nie).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Ge(e);if(!r){let l;if(o&&(l=f4e[n]))return l;if(n==="hasOwnProperty")return m4e}const a=Reflect.get(e,n,Ir(e)?e:s);return(Cf(n)?Zre.has(n):g4e(n))||(r||Kr(e,"get",n),i)?a:Ir(a)?o&&XU(n)?a:a.value:Fn(a)?r?oie(a):uy(a):a}}class tie extends eie{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Zd(i);if(!Mo(s)&&!Zd(s)&&(i=Wt(i),s=Wt(s)),!Ge(e)&&Ir(i)&&!Ir(s))return l?!1:(i.value=s,!0)}const o=Ge(e)&&XU(n)?Number(n)<e.length:nn(e,n),a=Reflect.set(e,n,s,Ir(e)?e:r);return e===Wt(r)&&(o?md(s,i)&&Tl(e,"set",n,s):Tl(e,"add",n,s)),a}deleteProperty(e,n){const s=nn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Tl(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Cf(n)||!Zre.has(n))&&Kr(e,"has",n),s}ownKeys(e){return Kr(e,"iterate",Ge(e)?"length":Ap),Reflect.ownKeys(e)}}class _4e extends eie{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const y4e=new tie,v4e=new _4e,w4e=new tie(!0);const FD=t=>t,NC=t=>Reflect.getPrototypeOf(t);function b4e(t,e,n){return function(...s){const r=this.__v_raw,i=Wt(r),o=Um(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),h=n?FD:e?jS:br;return!e&&Kr(i,"iterate",l?MD:Ap),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function xC(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function E4e(t,e){const n={get(r){const i=this.__v_raw,o=Wt(i),a=Wt(r);t||(md(r,a)&&Kr(o,"get",r),Kr(o,"get",a));const{has:l}=NC(o),u=e?FD:t?jS:br;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Kr(Wt(r),"iterate",Ap),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Wt(i),a=Wt(r);return t||(md(r,a)&&Kr(o,"has",r),Kr(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Wt(a),u=e?FD:t?jS:br;return!t&&Kr(l,"iterate",Ap),a.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return Ks(n,t?{add:xC("add"),set:xC("set"),delete:xC("delete"),clear:xC("clear")}:{add(r){!e&&!Mo(r)&&!Zd(r)&&(r=Wt(r));const i=Wt(this);return NC(i).has.call(i,r)||(i.add(r),Tl(i,"add",r,r)),this},set(r,i){!e&&!Mo(i)&&!Zd(i)&&(i=Wt(i));const o=Wt(this),{has:a,get:l}=NC(o);let u=a.call(o,r);u||(r=Wt(r),u=a.call(o,r));const h=l.call(o,r);return o.set(r,i),u?md(i,h)&&Tl(o,"set",r,i):Tl(o,"add",r,i),this},delete(r){const i=Wt(this),{has:o,get:a}=NC(i);let l=o.call(i,r);l||(r=Wt(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&Tl(i,"delete",r,void 0),u},clear(){const r=Wt(this),i=r.size!==0,o=r.clear();return i&&Tl(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=b4e(r,t,e)}),n}function r4(t,e){const n=E4e(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(nn(n,r)&&r in s?n:s,r,i)}const T4e={get:r4(!1,!1)},C4e={get:r4(!1,!0)},I4e={get:r4(!0,!1)};const nie=new WeakMap,sie=new WeakMap,rie=new WeakMap,S4e=new WeakMap;function k4e(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function R4e(t){return t.__v_skip||!Object.isExtensible(t)?0:k4e(XUe(t))}function uy(t){return Zd(t)?t:i4(t,!1,y4e,T4e,nie)}function iie(t){return i4(t,!1,w4e,C4e,sie)}function oie(t){return i4(t,!0,v4e,I4e,rie)}function i4(t,e,n,s,r){if(!Fn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=R4e(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function qm(t){return Zd(t)?qm(t.__v_raw):!!(t&&t.__v_isReactive)}function Zd(t){return!!(t&&t.__v_isReadonly)}function Mo(t){return!!(t&&t.__v_isShallow)}function o4(t){return t?!!t.__v_raw:!1}function Wt(t){const e=t&&t.__v_raw;return e?Wt(e):t}function xT(t){return!nn(t,"__v_skip")&&Object.isExtensible(t)&&DD(t,"__v_skip",!0),t}const br=t=>Fn(t)?uy(t):t,jS=t=>Fn(t)?oie(t):t;function Ir(t){return t?t.__v_isRef===!0:!1}function ef(t){return aie(t,!1)}function A4e(t){return aie(t,!0)}function aie(t,e){return Ir(t)?t:new P4e(t,e)}class P4e{constructor(e,n){this.dep=new s4,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Wt(e),this._value=n?e:br(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Mo(e)||Zd(e);e=s?e:Wt(e),md(e,n)&&(this._rawValue=e,this._value=s?e:br(e),this.dep.trigger())}}function Pp(t){return Ir(t)?t.value:t}const N4e={get:(t,e,n)=>e==="__v_raw"?t:Pp(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ir(r)&&!Ir(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function cie(t){return qm(t)?t:new Proxy(t,N4e)}function MQe(t){const e=Ge(t)?new Array(t.length):{};for(const n in t)e[n]=O4e(t,n);return e}class x4e{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return d4e(Wt(this._object),this._key)}}function O4e(t,e,n){const s=t[e];return Ir(s)?s:new x4e(t,e,n)}class D4e{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new s4(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=uE-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Cn!==this)return Kre(this,!0),!0}get value(){const e=this.dep.track();return Yre(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function L4e(t,e,n=!1){let s,r;return ht(t)?s=t:(s=t.get,r=t.set),new D4e(s,r,n)}const OC={},BS=new WeakMap;let Gf;function M4e(t,e=!1,n=Gf){if(n){let s=BS.get(n);s||BS.set(n,s=[]),s.push(t)}}function F4e(t,e,n=pn){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,u=q=>r?q:Mo(q)||r===!1||r===0?Cl(q,1):Cl(q);let h,d,p,m,w=!1,k=!1;if(Ir(t)?(d=()=>t.value,w=Mo(t)):qm(t)?(d=()=>u(t),w=!0):Ge(t)?(k=!0,w=t.some(q=>qm(q)||Mo(q)),d=()=>t.map(q=>{if(Ir(q))return q.value;if(qm(q))return u(q);if(ht(q))return l?l(q,2):q()})):ht(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){iu();try{p()}finally{ou()}}const q=Gf;Gf=h;try{return l?l(t,3,[m]):t(m)}finally{Gf=q}}:d=xc,e&&r){const q=d,H=r===!0?1/0:r;d=()=>Cl(q(),H)}const P=l4e(),D=()=>{h.stop(),P&&P.active&&YU(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),D()}}let M=k?new Array(t.length).fill(OC):OC;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((X,I)=>md(X,M[I])):md(H,M))){p&&p();const X=Gf;Gf=h;try{const I=[H,M===OC?void 0:k&&M[0]===OC?[]:M,m];M=H,l?l(e,3,I):e(...I)}finally{Gf=X}}}else h.run()};return a&&a(V),h=new Hre(d),h.scheduler=o?()=>o(V,!1):V,m=q=>M4e(q,!1,h),p=h.onStop=()=>{const q=BS.get(h);if(q){if(l)l(q,4);else for(const H of q)H();BS.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function Cl(t,e=1/0,n){if(e<=0||!Fn(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ir(t))Cl(t.value,e,n);else if(Ge(t))for(let s=0;s<t.length;s++)Cl(t[s],e,n);else if(Fre(t)||Um(t))t.forEach(s=>{Cl(s,e,n)});else if(qre(t)){for(const s in t)Cl(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Cl(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function OT(t,e,n,s){try{return s?t(...s):t()}catch(r){r1(r,e,n)}}function Wa(t,e,n,s){if(ht(t)){const r=OT(t,e,n,s);return r&&Vre(r)&&r.catch(i=>{r1(i,e,n)}),r}if(Ge(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Wa(t[i],e,n,s));return r}}function r1(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||pn;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){iu(),OT(i,null,10,[t,l,u]),ou();return}}V4e(t,n,r,s,o)}function V4e(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const mi=[];let oc=-1;const jm=[];let Vh=null,om=0;const lie=Promise.resolve();let $S=null;function uie(t){const e=$S||lie;return t?e.then(this?t.bind(this):t):e}function U4e(t){let e=oc+1,n=mi.length;for(;e<n;){const s=e+n>>>1,r=mi[s],i=dE(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function a4(t){if(!(t.flags&1)){const e=dE(t),n=mi[mi.length-1];!n||!(t.flags&2)&&e>=dE(n)?mi.push(t):mi.splice(U4e(e),0,t),t.flags|=1,hie()}}function hie(){$S||($S=lie.then(fie))}function q4e(t){Ge(t)?jm.push(...t):Vh&&t.id===-1?Vh.splice(om+1,0,t):t.flags&1||(jm.push(t),t.flags|=1),hie()}function tz(t,e,n=oc+1){for(;n<mi.length;n++){const s=mi[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;mi.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function die(t){if(jm.length){const e=[...new Set(jm)].sort((n,s)=>dE(n)-dE(s));if(jm.length=0,Vh){Vh.push(...e);return}for(Vh=e,om=0;om<Vh.length;om++){const n=Vh[om];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Vh=null,om=0}}const dE=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fie(t){try{for(oc=0;oc<mi.length;oc++){const e=mi[oc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),OT(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;oc<mi.length;oc++){const e=mi[oc];e&&(e.flags&=-2)}oc=-1,mi.length=0,die(),$S=null,(mi.length||jm.length)&&fie()}}let _o=null,pie=null;function zS(t){const e=_o;return _o=t,pie=t&&t.type.__scopeId||null,e}function j4e(t,e=_o,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&gz(-1);const i=zS(e);let o;try{o=t(...r)}finally{zS(i),s._d&&gz(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function gie(t,e){if(_o===null)return t;const n=u1(_o),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=pn]=e[r];i&&(ht(i)&&(i={mounted:i,updated:i}),i.deep&&Cl(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Mf(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(iu(),Wa(l,n,8,[t.el,a,t,e]),ou())}}const mie=Symbol("_vte"),_ie=t=>t.__isTeleport,Vw=t=>t&&(t.disabled||t.disabled===""),nz=t=>t&&(t.defer||t.defer===""),sz=t=>typeof SVGElement<"u"&&t instanceof SVGElement,rz=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,VD=(t,e)=>{const n=t&&t.to;return rs(n)?e?e(n):null:n},yie={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=u,D=Vw(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),X=e.anchor=k("");m(H,n,s),m(X,n,s);const I=(y,C)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,C,r,i,o,a,l))},v=()=>{const y=e.target=VD(e.props,w),C=vie(y,e,k,m);y&&(o!=="svg"&&sz(y)?o="svg":o!=="mathml"&&rz(y)&&(o="mathml"),D||(I(y,C),NI(e,!1)))};D&&(I(n,X),NI(e,!0)),nz(e.props)?(e.el.__isMounted=!1,di(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(nz(e.props)&&t.el.__isMounted===!1){di(()=>{yie.process(t,e,n,s,r,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,X=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=Vw(t.props),y=v?n:X,C=v?H:I;if(o==="svg"||sz(X)?o="svg":(o==="mathml"||rz(X))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),p4(t,e,!0)):l||d(t,e,y,C,r,i,o,a,!1),D)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):DC(e,n,H,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=VD(e.props,w);S&&DC(e,S,null,u,0)}else v&&DC(e,X,I,u,1);NI(e,D)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(r(u),r(h)),i&&r(l),o&16){const m=i||!Vw(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:DC,hydrate:B4e};function DC(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||Vw(h))&&l&16)for(let p=0;p<u.length;p++)r(u[p],e,n,2);d&&s(a,e,n)}function B4e(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=VD(e.props,l);if(p){const m=Vw(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||vie(p,e,h,u),d(w&&o(w),e,p,n,s,r,i)}NI(e,m)}return e.anchor&&o(e.anchor)}const FQe=yie;function NI(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function vie(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[mie]=i,t&&(s(r,t),s(i,t)),i}const Uh=Symbol("_leaveCb"),LC=Symbol("_enterCb");function wie(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return l4(()=>{t.isMounted=!0}),u4(()=>{t.isUnmounting=!0}),t}const Io=[Function,Array],bie={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Io,onEnter:Io,onAfterEnter:Io,onEnterCancelled:Io,onBeforeLeave:Io,onLeave:Io,onAfterLeave:Io,onLeaveCancelled:Io,onBeforeAppear:Io,onAppear:Io,onAfterAppear:Io,onAppearCancelled:Io},Eie=t=>{const e=t.subTree;return e.component?Eie(e.component):e},$4e={name:"BaseTransition",props:bie,setup(t,{slots:e}){const n=Tg(),s=wie();return()=>{const r=e.default&&c4(e.default(),!0);if(!r||!r.length)return;const i=Tie(r),o=Wt(t),{mode:a}=o;if(s.isLeaving)return LN(i);const l=iz(i);if(!l)return LN(i);let u=fE(l,o,s,n,d=>u=d);l.type!==vi&&eg(l,u);let h=n.subTree&&iz(n.subTree);if(h&&h.type!==vi&&!ep(l,h)&&Eie(n).type!==vi){let d=fE(h,o,s,n);if(eg(h,d),a==="out-in"&&l.type!==vi)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},LN(i);a==="in-out"&&l.type!==vi?d.delayLeave=(p,m,w)=>{const k=Cie(s,h);k[String(h.key)]=h,p[Uh]=()=>{m(),p[Uh]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{w(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Tie(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==vi){e=n;break}}return e}const z4e=$4e;function Cie(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function fE(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:D,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=Cie(n,t),X=(y,C)=>{y&&Wa(y,s,9,C)},I=(y,C)=>{const S=C[1];X(y,C),Ge(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let C=l;if(!n.isMounted)if(i)C=P||l;else return;y[Uh]&&y[Uh](!0);const S=H[q];S&&ep(t,S)&&S.el[Uh]&&S.el[Uh](),X(C,[y])},enter(y){let C=u,S=h,E=d;if(!n.isMounted)if(i)C=D||u,S=M||h,E=V||d;else return;let b=!1;const K=y[LC]=ne=>{b||(b=!0,ne?X(E,[y]):X(S,[y]),v.delayedLeave&&v.delayedLeave(),y[LC]=void 0)};C?I(C,[y,K]):K()},leave(y,C){const S=String(t.key);if(y[LC]&&y[LC](!0),n.isUnmounting)return C();X(p,[y]);let E=!1;const b=y[Uh]=K=>{E||(E=!0,C(),K?X(k,[y]):X(w,[y]),y[Uh]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const C=fE(y,e,n,s,r);return r&&r(C),C}};return v}function LN(t){if(o1(t))return t=tf(t),t.children=null,t}function iz(t){if(!o1(t))return _ie(t.type)&&t.children?Tie(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&ht(n.default))return n.default()}}function eg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,eg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function c4(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===aa?(o.patchFlag&128&&r++,s=s.concat(c4(o.children,e,a))):(e||o.type!==vi)&&s.push(a!=null?tf(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function i1(t,e){return ht(t)?Ks({name:t.name},e,{setup:t}):t}function Iie(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Uw(t,e,n,s,r=!1){if(Ge(t)){t.forEach((w,k)=>Uw(w,e&&(Ge(e)?e[k]:e),n,s,r));return}if(qw(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Uw(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?u1(s.component):s.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===pn?a.refs={}:a.refs,d=a.setupState,p=Wt(d),m=d===pn?()=>!1:w=>nn(p,w);if(u!=null&&u!==l&&(rs(u)?(h[u]=null,m(u)&&(d[u]=null)):Ir(u)&&(u.value=null)),ht(l))OT(l,a,12,[o,h]);else{const w=rs(l),k=Ir(l);if(w||k){const P=()=>{if(t.f){const D=w?m(l)?d[l]:h[l]:l.value;r?Ge(D)&&YU(D,i):Ge(D)?D.includes(i)||D.push(i):w?(h[l]=[i],m(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else w?(h[l]=o,m(l)&&(d[l]=o)):k&&(l.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,di(P,n)):P()}}}n1().requestIdleCallback;n1().cancelIdleCallback;const qw=t=>!!t.type.__asyncLoader,o1=t=>t.type.__isKeepAlive;function H4e(t,e){Sie(t,"a",e)}function W4e(t,e){Sie(t,"da",e)}function Sie(t,e,n=Jr){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(a1(e,s,n),n){let r=n.parent;for(;r&&r.parent;)o1(r.parent.vnode)&&K4e(s,e,n,r),r=r.parent}}function K4e(t,e,n,s){const r=a1(e,t,s,!0);h4(()=>{YU(s[e],r)},n)}function a1(t,e,n=Jr,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{iu();const a=DT(n),l=Wa(e,n,t,o);return a(),ou(),l});return s?r.unshift(i):r.push(i),i}}const wu=t=>(e,n=Jr)=>{(!gE||t==="sp")&&a1(t,(...s)=>e(...s),n)},G4e=wu("bm"),l4=wu("m"),Q4e=wu("bu"),kie=wu("u"),u4=wu("bum"),h4=wu("um"),Y4e=wu("sp"),X4e=wu("rtg"),J4e=wu("rtc");function Z4e(t,e=Jr){a1("ec",t,e)}const e6e="components";function t6e(t,e){return s6e(e6e,t,!0,e)||t}const n6e=Symbol.for("v-ndc");function s6e(t,e,n=!0,s=!1){const r=_o||Jr;if(r){const i=r.type;{const a=W6e(i,!1);if(a&&(a===e||a===Bo(e)||a===t1(Bo(e))))return i}const o=oz(r[t]||i[t],e)||oz(r.appContext[t],e);return!o&&s?i:o}}function oz(t,e){return t&&(t[e]||t[Bo(e)]||t[t1(Bo(e))])}function VQe(t,e,n,s){let r;const i=n,o=Ge(t);if(o||rs(t)){const a=o&&qm(t);let l=!1,u=!1;a&&(l=!Mo(t),u=Zd(t),t=s1(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(l?u?jS(br(t[h])):br(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Fn(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];r[l]=e(t[h],h,l,i)}}else r=[];return r}const UD=t=>t?Gie(t)?u1(t):UD(t.parent):null,jw=Ks(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>UD(t.parent),$root:t=>UD(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Aie(t),$forceUpdate:t=>t.f||(t.f=()=>{a4(t.update)}),$nextTick:t=>t.n||(t.n=uie.bind(t.proxy)),$watch:t=>C6e.bind(t)}),MN=(t,e)=>t!==pn&&!t.__isScriptSetup&&nn(t,e),r6e={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(MN(s,e))return o[e]=1,s[e];if(r!==pn&&nn(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&nn(u,e))return o[e]=3,i[e];if(n!==pn&&nn(n,e))return o[e]=4,n[e];qD&&(o[e]=0)}}const h=jw[e];let d,p;if(h)return e==="$attrs"&&Kr(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==pn&&nn(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,nn(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return MN(r,e)?(r[e]=n,!0):s!==pn&&nn(s,e)?(s[e]=n,!0):nn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==pn&&nn(t,o)||MN(e,o)||(a=i[0])&&nn(a,o)||nn(s,o)||nn(jw,o)||nn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:nn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function az(t){return Ge(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let qD=!0;function i6e(t){const e=Aie(t),n=t.proxy,s=t.ctx;qD=!1,e.beforeCreate&&cz(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:D,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:X,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:C,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(u&&o6e(u,s,null),o)for(const ce in o){const we=o[ce];ht(we)&&(s[ce]=we.bind(n))}if(r){const ce=r.call(n,n);Fn(ce)&&(t.data=uy(ce))}if(qD=!0,i)for(const ce in i){const we=i[ce],Ht=ht(we)?we.bind(n,n):ht(we.get)?we.get.bind(n,n):xc,It=!ht(we)&&ht(we.set)?we.set.bind(n):xc,xt=xe({get:Ht,set:It});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>xt.value,set:ke=>xt.value=ke})}if(a)for(const ce in a)Rie(a[ce],s,n,ce);if(l){const ce=ht(l)?l.call(n):l;Reflect.ownKeys(ce).forEach(we=>{xI(we,ce[we])})}h&&cz(h,t,"c");function de(ce,we){Ge(we)?we.forEach(Ht=>ce(Ht.bind(n))):we&&ce(we.bind(n))}if(de(G4e,d),de(l4,p),de(Q4e,m),de(kie,w),de(H4e,k),de(W4e,P),de(Z4e,v),de(J4e,X),de(X4e,I),de(u4,M),de(h4,q),de(Y4e,y),Ge(C))if(C.length){const ce=t.exposed||(t.exposed={});C.forEach(we=>{Object.defineProperty(ce,we,{get:()=>n[we],set:Ht=>n[we]=Ht,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===xc&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&Iie(t)}function o6e(t,e,n=xc){Ge(t)&&(t=jD(t));for(const s in t){const r=t[s];let i;Fn(r)?"default"in r?i=Fo(r.from||s,r.default,!0):i=Fo(r.from||s):i=Fo(r),Ir(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function cz(t,e,n){Wa(Ge(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Rie(t,e,n,s){let r=s.includes(".")?jie(n,s):()=>n[s];if(rs(t)){const i=e[t];ht(i)&&Bw(r,i)}else if(ht(t))Bw(r,t.bind(n));else if(Fn(t))if(Ge(t))t.forEach(i=>Rie(i,e,n,s));else{const i=ht(t.handler)?t.handler.bind(n):e[t.handler];ht(i)&&Bw(r,i,t)}}function Aie(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>HS(l,u,o,!0)),HS(l,e,o)),Fn(e)&&i.set(e,l),l}function HS(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&HS(t,i,n,!0),r&&r.forEach(o=>HS(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=a6e[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const a6e={data:lz,props:uz,emits:uz,methods:Lv,computed:Lv,beforeCreate:li,created:li,beforeMount:li,mounted:li,beforeUpdate:li,updated:li,beforeDestroy:li,beforeUnmount:li,destroyed:li,unmounted:li,activated:li,deactivated:li,errorCaptured:li,serverPrefetch:li,components:Lv,directives:Lv,watch:l6e,provide:lz,inject:c6e};function lz(t,e){return e?t?function(){return Ks(ht(t)?t.call(this,this):t,ht(e)?e.call(this,this):e)}:e:t}function c6e(t,e){return Lv(jD(t),jD(e))}function jD(t){if(Ge(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function li(t,e){return t?[...new Set([].concat(t,e))]:e}function Lv(t,e){return t?Ks(Object.create(null),t,e):e}function uz(t,e){return t?Ge(t)&&Ge(e)?[...new Set([...t,...e])]:Ks(Object.create(null),az(t),az(e??{})):e}function l6e(t,e){if(!t)return e;if(!e)return t;const n=Ks(Object.create(null),t);for(const s in e)n[s]=li(t[s],e[s]);return n}function Pie(){return{app:null,config:{isNativeTag:QUe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let u6e=0;function h6e(t,e){return function(s,r=null){ht(s)||(s=Ks({},s)),r!=null&&!Fn(r)&&(r=null);const i=Pie(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:u6e++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:G6e,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&ht(h.install)?(o.add(h),h.install(u,...d)):ht(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,p){if(!l){const m=u._ceVNode||Ci(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,h,p),l=!0,u._container=h,h.__vue_app__=u,u1(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Wa(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Np;Np=u;try{return h()}finally{Np=d}}};return u}}let Np=null;function xI(t,e){if(Jr){let n=Jr.provides;const s=Jr.parent&&Jr.parent.provides;s===n&&(n=Jr.provides=Object.create(s)),n[t]=e}}function Fo(t,e,n=!1){const s=Tg();if(s||Np){let r=Np?Np._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&ht(e)?e.call(s&&s.proxy):e}}function UQe(){return!!(Tg()||Np)}const Nie={},xie=()=>Object.create(Nie),Oie=t=>Object.getPrototypeOf(t)===Nie;function d6e(t,e,n,s=!1){const r={},i=xie();t.propsDefaults=Object.create(null),Die(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:iie(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function f6e(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Wt(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(c1(t.emitsOptions,p))continue;const m=e[p];if(l)if(nn(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const w=Bo(p);r[w]=BD(l,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{Die(t,e,r,i)&&(u=!0);let h;for(const d in a)(!e||!nn(e,d)&&((h=Eg(d))===d||!nn(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=BD(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!nn(e,d))&&(delete i[d],u=!0)}u&&Tl(t.attrs,"set","")}function Die(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Lw(l))continue;const u=e[l];let h;r&&nn(r,h=Bo(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:c1(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Wt(n),u=a||pn;for(let h=0;h<i.length;h++){const d=i[h];n[d]=BD(r,l,d,u[d],t,!nn(u,d))}}return o}function BD(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=nn(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ht(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=DT(r);s=u[n]=l.call(null,e),h()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Eg(n))&&(s=!0))}return s}const p6e=new WeakMap;function Lie(t,e,n=!1){const s=n?p6e:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!ht(t)){const h=d=>{l=!0;const[p,m]=Lie(d,e,!0);Ks(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return Fn(t)&&s.set(t,Vm),Vm;if(Ge(i))for(let h=0;h<i.length;h++){const d=Bo(i[h]);hz(d)&&(o[d]=pn)}else if(i)for(const h in i){const d=Bo(h);if(hz(d)){const p=i[h],m=o[d]=Ge(p)||ht(p)?{type:p}:Ks({},p),w=m.type;let k=!1,P=!0;if(Ge(w))for(let D=0;D<w.length;++D){const M=w[D],V=ht(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=ht(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||nn(m,"default"))&&a.push(d)}}const u=[o,a];return Fn(t)&&s.set(t,u),u}function hz(t){return t[0]!=="$"&&!Lw(t)}const d4=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",f4=t=>Ge(t)?t.map(fc):[fc(t)],g6e=(t,e,n)=>{if(e._n)return e;const s=j4e((...r)=>f4(e(...r)),n);return s._c=!1,s},Mie=(t,e,n)=>{const s=t._ctx;for(const r in t){if(d4(r))continue;const i=t[r];if(ht(i))e[r]=g6e(r,i,s);else if(i!=null){const o=f4(i);e[r]=()=>o}}},Fie=(t,e)=>{const n=f4(e);t.slots.default=()=>n},Vie=(t,e,n)=>{for(const s in e)(n||!d4(s))&&(t[s]=e[s])},m6e=(t,e,n)=>{const s=t.slots=xie();if(t.vnode.shapeFlag&32){const r=e.__;r&&DD(s,"__",r,!0);const i=e._;i?(Vie(s,e,n),n&&DD(s,"_",i,!0)):Mie(e,s)}else e&&Fie(t,e)},_6e=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=pn;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Vie(r,e,n):(i=!e.$stable,Mie(e,r)),o=e}else e&&(Fie(t,e),o={default:1});if(i)for(const a in r)!d4(a)&&o[a]==null&&delete r[a]},di=N6e;function y6e(t){return v6e(t)}function v6e(t,e){const n=n1();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=xc,insertStaticContent:w}=t,k=(T,R,x,L=null,U=null,j=null,W=void 0,$=null,B=!!R.dynamicChildren)=>{if(T===R)return;T&&!ep(T,R)&&(L=F(T),ke(T,U,j,!0),T=null),R.patchFlag===-2&&(B=!1,R.dynamicChildren=null);const{type:Q,ref:J,shapeFlag:Z}=R;switch(Q){case l1:P(T,R,x,L);break;case vi:D(T,R,x,L);break;case VN:T==null&&M(R,x,L,W);break;case aa:E(T,R,x,L,U,j,W,$,B);break;default:Z&1?H(T,R,x,L,U,j,W,$,B):Z&6?b(T,R,x,L,U,j,W,$,B):(Z&64||Z&128)&&Q.process(T,R,x,L,U,j,W,$,B,ee)}J!=null&&U?Uw(J,T&&T.ref,j,R||T,!R):J==null&&T&&T.ref!=null&&Uw(T.ref,null,j,T,!0)},P=(T,R,x,L)=>{if(T==null)s(R.el=a(R.children),x,L);else{const U=R.el=T.el;R.children!==T.children&&u(U,R.children)}},D=(T,R,x,L)=>{T==null?s(R.el=l(R.children||""),x,L):R.el=T.el},M=(T,R,x,L)=>{[T.el,T.anchor]=w(T.children,R,x,L,T.el,T.anchor)},V=({el:T,anchor:R},x,L)=>{let U;for(;T&&T!==R;)U=p(T),s(T,x,L),T=U;s(R,x,L)},q=({el:T,anchor:R})=>{let x;for(;T&&T!==R;)x=p(T),r(T),T=x;r(R)},H=(T,R,x,L,U,j,W,$,B)=>{R.type==="svg"?W="svg":R.type==="math"&&(W="mathml"),T==null?X(R,x,L,U,j,W,$,B):y(T,R,U,j,W,$,B)},X=(T,R,x,L,U,j,W,$)=>{let B,Q;const{props:J,shapeFlag:Z,transition:te,dirs:ie}=T;if(B=T.el=o(T.type,j,J&&J.is,J),Z&8?h(B,T.children):Z&16&&v(T.children,B,null,L,U,FN(T,j),W,$),ie&&Mf(T,null,L,"created"),I(B,T,T.scopeId,W,L),J){for(const se in J)se!=="value"&&!Lw(se)&&i(B,se,null,J[se],j,L);"value"in J&&i(B,"value",null,J.value,j),(Q=J.onVnodeBeforeMount)&&Ja(Q,L,T)}ie&&Mf(T,null,L,"beforeMount");const re=w6e(U,te);re&&te.beforeEnter(B),s(B,R,x),((Q=J&&J.onVnodeMounted)||re||ie)&&di(()=>{Q&&Ja(Q,L,T),re&&te.enter(B),ie&&Mf(T,null,L,"mounted")},U)},I=(T,R,x,L,U)=>{if(x&&m(T,x),L)for(let j=0;j<L.length;j++)m(T,L[j]);if(U){let j=U.subTree;if(R===j||$ie(j.type)&&(j.ssContent===R||j.ssFallback===R)){const W=U.vnode;I(T,W,W.scopeId,W.slotScopeIds,U.parent)}}},v=(T,R,x,L,U,j,W,$,B=0)=>{for(let Q=B;Q<T.length;Q++){const J=T[Q]=$?qh(T[Q]):fc(T[Q]);k(null,J,R,x,L,U,j,W,$)}},y=(T,R,x,L,U,j,W)=>{const $=R.el=T.el;let{patchFlag:B,dynamicChildren:Q,dirs:J}=R;B|=T.patchFlag&16;const Z=T.props||pn,te=R.props||pn;let ie;if(x&&Ff(x,!1),(ie=te.onVnodeBeforeUpdate)&&Ja(ie,x,R,T),J&&Mf(R,T,x,"beforeUpdate"),x&&Ff(x,!0),(Z.innerHTML&&te.innerHTML==null||Z.textContent&&te.textContent==null)&&h($,""),Q?C(T.dynamicChildren,Q,$,x,L,FN(R,U),j):W||we(T,R,$,null,x,L,FN(R,U),j,!1),B>0){if(B&16)S($,Z,te,x,U);else if(B&2&&Z.class!==te.class&&i($,"class",null,te.class,U),B&4&&i($,"style",Z.style,te.style,U),B&8){const re=R.dynamicProps;for(let se=0;se<re.length;se++){const be=re[se],De=Z[be],rt=te[be];(rt!==De||be==="value")&&i($,be,De,rt,U,x)}}B&1&&T.children!==R.children&&h($,R.children)}else!W&&Q==null&&S($,Z,te,x,U);((ie=te.onVnodeUpdated)||J)&&di(()=>{ie&&Ja(ie,x,R,T),J&&Mf(R,T,x,"updated")},L)},C=(T,R,x,L,U,j,W)=>{for(let $=0;$<R.length;$++){const B=T[$],Q=R[$],J=B.el&&(B.type===aa||!ep(B,Q)||B.shapeFlag&198)?d(B.el):x;k(B,Q,J,null,L,U,j,W,!0)}},S=(T,R,x,L,U)=>{if(R!==x){if(R!==pn)for(const j in R)!Lw(j)&&!(j in x)&&i(T,j,R[j],null,U,L);for(const j in x){if(Lw(j))continue;const W=x[j],$=R[j];W!==$&&j!=="value"&&i(T,j,$,W,U,L)}"value"in x&&i(T,"value",R.value,x.value,U)}},E=(T,R,x,L,U,j,W,$,B)=>{const Q=R.el=T?T.el:a(""),J=R.anchor=T?T.anchor:a("");let{patchFlag:Z,dynamicChildren:te,slotScopeIds:ie}=R;ie&&($=$?$.concat(ie):ie),T==null?(s(Q,x,L),s(J,x,L),v(R.children||[],x,J,U,j,W,$,B)):Z>0&&Z&64&&te&&T.dynamicChildren?(C(T.dynamicChildren,te,x,U,j,W,$),(R.key!=null||U&&R===U.subTree)&&p4(T,R,!0)):we(T,R,x,J,U,j,W,$,B)},b=(T,R,x,L,U,j,W,$,B)=>{R.slotScopeIds=$,T==null?R.shapeFlag&512?U.ctx.activate(R,x,L,W,B):K(R,x,L,U,j,W,B):ne(T,R,B)},K=(T,R,x,L,U,j,W)=>{const $=T.component=j6e(T,L,U);if(o1(T)&&($.ctx.renderer=ee),B6e($,!1,W),$.asyncDep){if(U&&U.registerDep($,de,W),!T.el){const B=$.subTree=Ci(vi);D(null,B,R,x),T.placeholder=B.el}}else de($,T,R,x,U,j,W)},ne=(T,R,x)=>{const L=R.component=T.component;if(A6e(T,R,x))if(L.asyncDep&&!L.asyncResolved){ce(L,R,x);return}else L.next=R,L.update();else R.el=T.el,L.vnode=R},de=(T,R,x,L,U,j,W)=>{const $=()=>{if(T.isMounted){let{next:Z,bu:te,u:ie,parent:re,vnode:se}=T;{const mt=Uie(T);if(mt){Z&&(Z.el=se.el,ce(T,Z,W)),mt.asyncDep.then(()=>{T.isUnmounted||$()});return}}let be=Z,De;Ff(T,!1),Z?(Z.el=se.el,ce(T,Z,W)):Z=se,te&&PN(te),(De=Z.props&&Z.props.onVnodeBeforeUpdate)&&Ja(De,re,Z,se),Ff(T,!0);const rt=fz(T),yt=T.subTree;T.subTree=rt,k(yt,rt,d(yt.el),F(yt),T,U,j),Z.el=rt.el,be===null&&P6e(T,rt.el),ie&&di(ie,U),(De=Z.props&&Z.props.onVnodeUpdated)&&di(()=>Ja(De,re,Z,se),U)}else{let Z;const{el:te,props:ie}=R,{bm:re,m:se,parent:be,root:De,type:rt}=T,yt=qw(R);Ff(T,!1),re&&PN(re),!yt&&(Z=ie&&ie.onVnodeBeforeMount)&&Ja(Z,be,R),Ff(T,!0);{De.ce&&De.ce._def.shadowRoot!==!1&&De.ce._injectChildStyle(rt);const mt=T.subTree=fz(T);k(null,mt,x,L,T,U,j),R.el=mt.el}if(se&&di(se,U),!yt&&(Z=ie&&ie.onVnodeMounted)){const mt=R;di(()=>Ja(Z,be,mt),U)}(R.shapeFlag&256||be&&qw(be.vnode)&&be.vnode.shapeFlag&256)&&T.a&&di(T.a,U),T.isMounted=!0,R=x=L=null}};T.scope.on();const B=T.effect=new Hre($);T.scope.off();const Q=T.update=B.run.bind(B),J=T.job=B.runIfDirty.bind(B);J.i=T,J.id=T.uid,B.scheduler=()=>a4(J),Ff(T,!0),Q()},ce=(T,R,x)=>{R.component=T;const L=T.vnode.props;T.vnode=R,T.next=null,f6e(T,R.props,L,x),_6e(T,R.children,x),iu(),tz(T),ou()},we=(T,R,x,L,U,j,W,$,B=!1)=>{const Q=T&&T.children,J=T?T.shapeFlag:0,Z=R.children,{patchFlag:te,shapeFlag:ie}=R;if(te>0){if(te&128){It(Q,Z,x,L,U,j,W,$,B);return}else if(te&256){Ht(Q,Z,x,L,U,j,W,$,B);return}}ie&8?(J&16&&ct(Q,U,j),Z!==Q&&h(x,Z)):J&16?ie&16?It(Q,Z,x,L,U,j,W,$,B):ct(Q,U,j,!0):(J&8&&h(x,""),ie&16&&v(Z,x,L,U,j,W,$,B))},Ht=(T,R,x,L,U,j,W,$,B)=>{T=T||Vm,R=R||Vm;const Q=T.length,J=R.length,Z=Math.min(Q,J);let te;for(te=0;te<Z;te++){const ie=R[te]=B?qh(R[te]):fc(R[te]);k(T[te],ie,x,null,U,j,W,$,B)}Q>J?ct(T,U,j,!0,!1,Z):v(R,x,L,U,j,W,$,B,Z)},It=(T,R,x,L,U,j,W,$,B)=>{let Q=0;const J=R.length;let Z=T.length-1,te=J-1;for(;Q<=Z&&Q<=te;){const ie=T[Q],re=R[Q]=B?qh(R[Q]):fc(R[Q]);if(ep(ie,re))k(ie,re,x,null,U,j,W,$,B);else break;Q++}for(;Q<=Z&&Q<=te;){const ie=T[Z],re=R[te]=B?qh(R[te]):fc(R[te]);if(ep(ie,re))k(ie,re,x,null,U,j,W,$,B);else break;Z--,te--}if(Q>Z){if(Q<=te){const ie=te+1,re=ie<J?R[ie].el:L;for(;Q<=te;)k(null,R[Q]=B?qh(R[Q]):fc(R[Q]),x,re,U,j,W,$,B),Q++}}else if(Q>te)for(;Q<=Z;)ke(T[Q],U,j,!0),Q++;else{const ie=Q,re=Q,se=new Map;for(Q=re;Q<=te;Q++){const Ye=R[Q]=B?qh(R[Q]):fc(R[Q]);Ye.key!=null&&se.set(Ye.key,Q)}let be,De=0;const rt=te-re+1;let yt=!1,mt=0;const us=new Array(rt);for(Q=0;Q<rt;Q++)us[Q]=0;for(Q=ie;Q<=Z;Q++){const Ye=T[Q];if(De>=rt){ke(Ye,U,j,!0);continue}let Wn;if(Ye.key!=null)Wn=se.get(Ye.key);else for(be=re;be<=te;be++)if(us[be-re]===0&&ep(Ye,R[be])){Wn=be;break}Wn===void 0?ke(Ye,U,j,!0):(us[Wn-re]=Q+1,Wn>=mt?mt=Wn:yt=!0,k(Ye,R[Wn],x,null,U,j,W,$,B),De++)}const _t=yt?b6e(us):Vm;for(be=_t.length-1,Q=rt-1;Q>=0;Q--){const Ye=re+Q,Wn=R[Ye],Ri=R[Ye+1],Ai=Ye+1<J?Ri.el||Ri.placeholder:L;us[Q]===0?k(null,Wn,x,Ai,U,j,W,$,B):yt&&(be<0||Q!==_t[be]?xt(Wn,x,Ai,2):be--)}}},xt=(T,R,x,L,U=null)=>{const{el:j,type:W,transition:$,children:B,shapeFlag:Q}=T;if(Q&6){xt(T.component.subTree,R,x,L);return}if(Q&128){T.suspense.move(R,x,L);return}if(Q&64){W.move(T,R,x,ee);return}if(W===aa){s(j,R,x);for(let Z=0;Z<B.length;Z++)xt(B[Z],R,x,L);s(T.anchor,R,x);return}if(W===VN){V(T,R,x);return}if(L!==2&&Q&1&&$)if(L===0)$.beforeEnter(j),s(j,R,x),di(()=>$.enter(j),U);else{const{leave:Z,delayLeave:te,afterLeave:ie}=$,re=()=>{T.ctx.isUnmounted?r(j):s(j,R,x)},se=()=>{Z(j,()=>{re(),ie&&ie()})};te?te(j,re,se):se()}else s(j,R,x)},ke=(T,R,x,L=!1,U=!1)=>{const{type:j,props:W,ref:$,children:B,dynamicChildren:Q,shapeFlag:J,patchFlag:Z,dirs:te,cacheIndex:ie}=T;if(Z===-2&&(U=!1),$!=null&&(iu(),Uw($,null,x,T,!0),ou()),ie!=null&&(R.renderCache[ie]=void 0),J&256){R.ctx.deactivate(T);return}const re=J&1&&te,se=!qw(T);let be;if(se&&(be=W&&W.onVnodeBeforeUnmount)&&Ja(be,R,T),J&6)Kt(T.component,x,L);else{if(J&128){T.suspense.unmount(x,L);return}re&&Mf(T,null,R,"beforeUnmount"),J&64?T.type.remove(T,R,x,ee,L):Q&&!Q.hasOnce&&(j!==aa||Z>0&&Z&64)?ct(Q,R,x,!1,!0):(j===aa&&Z&384||!U&&J&16)&&ct(B,R,x),L&&Ee(T)}(se&&(be=W&&W.onVnodeUnmounted)||re)&&di(()=>{be&&Ja(be,R,T),re&&Mf(T,null,R,"unmounted")},x)},Ee=T=>{const{type:R,el:x,anchor:L,transition:U}=T;if(R===aa){yn(x,L);return}if(R===VN){q(T);return}const j=()=>{r(x),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(T.shapeFlag&1&&U&&!U.persisted){const{leave:W,delayLeave:$}=U,B=()=>W(x,j);$?$(T.el,j,B):B()}else j()},yn=(T,R)=>{let x;for(;T!==R;)x=p(T),r(T),T=x;r(R)},Kt=(T,R,x)=>{const{bum:L,scope:U,job:j,subTree:W,um:$,m:B,a:Q,parent:J,slots:{__:Z}}=T;dz(B),dz(Q),L&&PN(L),J&&Ge(Z)&&Z.forEach(te=>{J.renderCache[te]=void 0}),U.stop(),j&&(j.flags|=8,ke(W,T,R,x)),$&&di($,R),di(()=>{T.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ct=(T,R,x,L=!1,U=!1,j=0)=>{for(let W=j;W<T.length;W++)ke(T[W],R,x,L,U)},F=T=>{if(T.shapeFlag&6)return F(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const R=p(T.anchor||T.el),x=R&&R[mie];return x?p(x):R};let Y=!1;const G=(T,R,x)=>{T==null?R._vnode&&ke(R._vnode,null,null,!0):k(R._vnode||null,T,R,null,null,null,x),R._vnode=T,Y||(Y=!0,tz(),die(),Y=!1)},ee={p:k,um:ke,m:xt,r:Ee,mt:K,mc:v,pc:we,pbc:C,n:F,o:t};return{render:G,hydrate:void 0,createApp:h6e(G)}}function FN({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ff({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function w6e(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function p4(t,e,n=!1){const s=t.children,r=e.children;if(Ge(s)&&Ge(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=qh(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&p4(o,a)),a.type===l1&&(a.el=o.el),a.type===vi&&!a.el&&(a.el=o.el)}}function b6e(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Uie(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Uie(e)}function dz(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const E6e=Symbol.for("v-scx"),T6e=()=>Fo(E6e);function Bw(t,e,n){return qie(t,e,n)}function qie(t,e,n=pn){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ks({},n),l=e&&s||!e&&i!=="post";let u;if(gE){if(i==="sync"){const m=T6e();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=xc,m.resume=xc,m.pause=xc,m}}const h=Jr;a.call=(m,w,k)=>Wa(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{di(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():a4(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=F4e(t,e,a);return gE&&(u?u.push(p):l&&p()),p}function C6e(t,e,n){const s=this.proxy,r=rs(t)?t.includes(".")?jie(s,t):()=>s[t]:t.bind(s,s);let i;ht(e)?i=e:(i=e.handler,n=e);const o=DT(this),a=qie(r,i.bind(s),n);return o(),a}function jie(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const I6e=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Bo(e)}Modifiers`]||t[`${Eg(e)}Modifiers`];function S6e(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||pn;let r=n;const i=e.startsWith("update:"),o=i&&I6e(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>rs(h)?h.trim():h)),o.number&&(r=n.map(e4e)));let a,l=s[a=AN(e)]||s[a=AN(Bo(e))];!l&&i&&(l=s[a=AN(Eg(e))]),l&&Wa(l,t,6,r);const u=s[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Wa(u,t,6,r)}}function Bie(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ht(t)){const l=u=>{const h=Bie(u,e,!0);h&&(a=!0,Ks(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Fn(t)&&s.set(t,null),null):(Ge(i)?i.forEach(l=>o[l]=null):Ks(o,i),Fn(t)&&s.set(t,o),o)}function c1(t,e){return!t||!JA(e)?!1:(e=e.slice(2).replace(/Once$/,""),nn(t,e[0].toLowerCase()+e.slice(1))||nn(t,Eg(e))||nn(t,e))}function fz(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=zS(t);let D,M;try{if(n.shapeFlag&4){const q=r||s,H=q;D=fc(u.call(H,q,h,d,m,p,w)),M=a}else{const q=e;D=fc(q.length>1?q(d,{attrs:a,slots:o,emit:l}):q(d,null)),M=e.props?a:k6e(a)}}catch(q){$w.length=0,r1(q,t,1),D=Ci(vi)}let V=D;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(QU)&&(M=R6e(M,i)),V=tf(V,M,!1,!0))}return n.dirs&&(V=tf(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&eg(V,n.transition),D=V,zS(P),D}const k6e=t=>{let e;for(const n in t)(n==="class"||n==="style"||JA(n))&&((e||(e={}))[n]=t[n]);return e},R6e=(t,e)=>{const n={};for(const s in t)(!QU(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function A6e(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?pz(s,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!c1(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?pz(s,o,u):!0:!!o;return!1}function pz(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!c1(n,i))return!0}return!1}function P6e({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const $ie=t=>t.__isSuspense;function N6e(t,e){e&&e.pendingBranch?Ge(t)?e.effects.push(...t):e.effects.push(t):q4e(t)}const aa=Symbol.for("v-fgt"),l1=Symbol.for("v-txt"),vi=Symbol.for("v-cmt"),VN=Symbol.for("v-stc"),$w=[];let yo=null;function zie(t=!1){$w.push(yo=t?null:[])}function x6e(){$w.pop(),yo=$w[$w.length-1]||null}let pE=1;function gz(t,e=!1){pE+=t,t<0&&yo&&e&&(yo.hasOnce=!0)}function Hie(t){return t.dynamicChildren=pE>0?yo||Vm:null,x6e(),pE>0&&yo&&yo.push(t),t}function O6e(t,e,n,s,r,i){return Hie(Kie(t,e,n,s,r,i,!0))}function D6e(t,e,n,s,r){return Hie(Ci(t,e,n,s,r,!0))}function WS(t){return t?t.__v_isVNode===!0:!1}function ep(t,e){return t.type===e.type&&t.key===e.key}const Wie=({key:t})=>t??null,OI=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?rs(t)||Ir(t)||ht(t)?{i:_o,r:t,k:e,f:!!n}:t:null);function Kie(t,e=null,n=null,s=0,r=null,i=t===aa?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Wie(e),ref:e&&OI(e),scopeId:pie,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:_o};return a?(g4(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=rs(n)?8:16),pE>0&&!o&&yo&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&yo.push(l),l}const Ci=L6e;function L6e(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===n6e)&&(t=vi),WS(t)){const a=tf(t,e,!0);return n&&g4(a,n),pE>0&&!i&&yo&&(a.shapeFlag&6?yo[yo.indexOf(t)]=a:yo.push(a)),a.patchFlag=-2,a}if(K6e(t)&&(t=t.__vccOpts),e){e=M6e(e);let{class:a,style:l}=e;a&&!rs(a)&&(e.class=ZU(a)),Fn(l)&&(o4(l)&&!Ge(l)&&(l=Ks({},l)),e.style=JU(l))}const o=rs(t)?1:$ie(t)?128:_ie(t)?64:Fn(t)?4:ht(t)?2:0;return Kie(t,e,n,s,r,o,i,!0)}function M6e(t){return t?o4(t)||Oie(t)?Ks({},t):t:null}function tf(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?V6e(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Wie(u),ref:e&&e.ref?n&&i?Ge(i)?i.concat(OI(e)):[i,OI(e)]:OI(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==aa?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&tf(t.ssContent),ssFallback:t.ssFallback&&tf(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&eg(h,l.clone(h)),h}function F6e(t=" ",e=0){return Ci(l1,null,t,e)}function qQe(t="",e=!1){return e?(zie(),D6e(vi,null,t)):Ci(vi,null,t)}function fc(t){return t==null||typeof t=="boolean"?Ci(vi):Ge(t)?Ci(aa,null,t.slice()):WS(t)?qh(t):Ci(l1,null,String(t))}function qh(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:tf(t)}function g4(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Ge(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),g4(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Oie(e)?e._ctx=_o:r===3&&_o&&(_o.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ht(e)?(e={default:e,_ctx:_o},n=32):(e=String(e),s&64?(n=16,e=[F6e(e)]):n=8);t.children=e,t.shapeFlag|=n}function V6e(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ZU([e.class,s.class]));else if(r==="style")e.style=JU([e.style,s.style]);else if(JA(r)){const i=e[r],o=s[r];o&&i!==o&&!(Ge(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ja(t,e,n,s=null){Wa(t,e,7,[n,s])}const U6e=Pie();let q6e=0;function j6e(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||U6e,i={uid:q6e++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zre(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lie(s,r),emitsOptions:Bie(s,r),emit:null,emitted:null,propsDefaults:pn,inheritAttrs:s.inheritAttrs,ctx:pn,data:pn,props:pn,attrs:pn,slots:pn,refs:pn,setupState:pn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=S6e.bind(null,i),t.ce&&t.ce(i),i}let Jr=null;const Tg=()=>Jr||_o;let KS,$D;{const t=n1(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};KS=e("__VUE_INSTANCE_SETTERS__",n=>Jr=n),$D=e("__VUE_SSR_SETTERS__",n=>gE=n)}const DT=t=>{const e=Jr;return KS(t),t.scope.on(),()=>{t.scope.off(),KS(e)}},mz=()=>{Jr&&Jr.scope.off(),KS(null)};function Gie(t){return t.vnode.shapeFlag&4}let gE=!1;function B6e(t,e=!1,n=!1){e&&$D(e);const{props:s,children:r}=t.vnode,i=Gie(t);d6e(t,s,i,e),m6e(t,r,n||e);const o=i?$6e(t,e):void 0;return e&&$D(!1),o}function $6e(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,r6e);const{setup:s}=n;if(s){iu();const r=t.setupContext=s.length>1?H6e(t):null,i=DT(t),o=OT(s,t,0,[t.props,r]),a=Vre(o);if(ou(),i(),(a||t.sp)&&!qw(t)&&Iie(t),a){if(o.then(mz,mz),e)return o.then(l=>{_z(t,l)}).catch(l=>{r1(l,t,0)});t.asyncDep=o}else _z(t,o)}else Qie(t)}function _z(t,e,n){ht(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fn(e)&&(t.setupState=cie(e)),Qie(t)}function Qie(t,e,n){const s=t.type;t.render||(t.render=s.render||xc);{const r=DT(t);iu();try{i6e(t)}finally{ou(),r()}}}const z6e={get(t,e){return Kr(t,"get",""),t[e]}};function H6e(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,z6e),slots:t.slots,emit:t.emit,expose:e}}function u1(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(cie(xT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in jw)return jw[n](t)},has(e,n){return n in e||n in jw}})):t.proxy}function W6e(t,e=!0){return ht(t)?t.displayName||t.name:t.name||e&&t.__name}function K6e(t){return ht(t)&&"__vccOpts"in t}const xe=(t,e)=>L4e(t,e,gE);function st(t,e,n){const s=arguments.length;return s===2?Fn(e)&&!Ge(e)?WS(e)?Ci(t,null,[e]):Ci(t,e):Ci(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&WS(n)&&(n=[n]),Ci(t,e,n))}const G6e="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zD;const yz=typeof window<"u"&&window.trustedTypes;if(yz)try{zD=yz.createPolicy("vue",{createHTML:t=>t})}catch{}const Yie=zD?t=>zD.createHTML(t):t=>t,Q6e="http://www.w3.org/2000/svg",Y6e="http://www.w3.org/1998/Math/MathML",gl=typeof document<"u"?document:null,vz=gl&&gl.createElement("template"),X6e={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?gl.createElementNS(Q6e,t):e==="mathml"?gl.createElementNS(Y6e,t):n?gl.createElement(t,{is:n}):gl.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>gl.createTextNode(t),createComment:t=>gl.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>gl.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{vz.innerHTML=Yie(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=vz.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wh="transition",hv="animation",S_=Symbol("_vtc"),Xie={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jie=Ks({},bie,Xie),J6e=t=>(t.displayName="Transition",t.props=Jie,t),Z6e=J6e((t,{slots:e})=>st(z4e,Zie(t),e)),Vf=(t,e=[])=>{Ge(t)?t.forEach(n=>n(...e)):t&&t(...e)},wz=t=>t?Ge(t)?t.some(e=>e.length>1):t.length>1:!1;function Zie(t){const e={};for(const E in t)E in Xie||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=e9e(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:D,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:X=D,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Ih(E,b?h:a),Ih(E,b?u:o),K&&K()},C=(E,b)=>{E._isLeaving=!1,Ih(E,d),Ih(E,m),Ih(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,de=()=>y(b,E,K);Vf(ne,[b,de]),bz(()=>{Ih(b,E?l:i),nc(b,E?h:a),wz(ne)||Ez(b,s,k,de)})};return Ks(e,{onBeforeEnter(E){Vf(D,[E]),nc(E,i),nc(E,o)},onBeforeAppear(E){Vf(X,[E]),nc(E,l),nc(E,u)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>C(E,b);nc(E,d),E._enterCancelled?(nc(E,p),HD()):(HD(),nc(E,p)),bz(()=>{E._isLeaving&&(Ih(E,d),nc(E,m),wz(q)||Ez(E,s,P,K))}),Vf(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),Vf(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),Vf(v,[E])},onLeaveCancelled(E){C(E),Vf(H,[E])}})}function e9e(t){if(t==null)return null;if(Fn(t))return[UN(t.enter),UN(t.leave)];{const e=UN(t);return[e,e]}}function UN(t){return t4e(t)}function nc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[S_]||(t[S_]=new Set)).add(e)}function Ih(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[S_];n&&(n.delete(e),n.size||(t[S_]=void 0))}function bz(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let t9e=0;function Ez(t,e,n,s){const r=t._endId=++t9e,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=eoe(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function eoe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${wh}Delay`),i=s(`${wh}Duration`),o=Tz(r,i),a=s(`${hv}Delay`),l=s(`${hv}Duration`),u=Tz(a,l);let h=null,d=0,p=0;e===wh?o>0&&(h=wh,d=o,p=i.length):e===hv?u>0&&(h=hv,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?wh:hv:null,p=h?h===wh?i.length:l.length:0);const m=h===wh&&/\b(transform|all)(,|$)/.test(s(`${wh}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function Tz(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Cz(n)+Cz(t[s])))}function Cz(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function HD(){return document.body.offsetHeight}function n9e(t,e,n){const s=t[S_];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const GS=Symbol("_vod"),toe=Symbol("_vsh"),jQe={beforeMount(t,{value:e},{transition:n}){t[GS]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):dv(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),dv(t,!0),s.enter(t)):s.leave(t,()=>{dv(t,!1)}):dv(t,e))},beforeUnmount(t,{value:e}){dv(t,e)}};function dv(t,e){t.style.display=e?t[GS]:"none",t[toe]=!e}const s9e=Symbol(""),r9e=/(^|;)\s*display\s*:/;function i9e(t,e,n){const s=t.style,r=rs(n);let i=!1;if(n&&!r){if(e)if(rs(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&DI(s,a,"")}else for(const o in e)n[o]==null&&DI(s,o,"");for(const o in n)o==="display"&&(i=!0),DI(s,o,n[o])}else if(r){if(e!==n){const o=s[s9e];o&&(n+=";"+o),s.cssText=n,i=r9e.test(n)}}else e&&t.removeAttribute("style");GS in t&&(t[GS]=i?s.display:"",t[toe]&&(s.display="none"))}const Iz=/\s*!important$/;function DI(t,e,n){if(Ge(n))n.forEach(s=>DI(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=o9e(t,e);Iz.test(n)?t.setProperty(Eg(s),n.replace(Iz,""),"important"):t[s]=n}}const Sz=["Webkit","Moz","ms"],qN={};function o9e(t,e){const n=qN[e];if(n)return n;let s=Bo(e);if(s!=="filter"&&s in t)return qN[e]=s;s=t1(s);for(let r=0;r<Sz.length;r++){const i=Sz[r]+s;if(i in t)return qN[e]=i}return e}const kz="http://www.w3.org/1999/xlink";function Rz(t,e,n,s,r,i=a4e(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kz,e.slice(6,e.length)):t.setAttributeNS(kz,e,n):n==null||i&&!jre(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Cf(n)?String(n):n)}function Az(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Yie(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=jre(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function a9e(t,e,n,s){t.addEventListener(e,n,s)}function c9e(t,e,n,s){t.removeEventListener(e,n,s)}const Pz=Symbol("_vei");function l9e(t,e,n,s,r=null){const i=t[Pz]||(t[Pz]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=u9e(e);if(s){const u=i[e]=f9e(s,r);a9e(t,a,u,l)}else o&&(c9e(t,a,o,l),i[e]=void 0)}}const Nz=/(?:Once|Passive|Capture)$/;function u9e(t){let e;if(Nz.test(t)){e={};let s;for(;s=t.match(Nz);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Eg(t.slice(2)),e]}let jN=0;const h9e=Promise.resolve(),d9e=()=>jN||(h9e.then(()=>jN=0),jN=Date.now());function f9e(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Wa(p9e(s,n.value),e,5,[s])};return n.value=t,n.attached=d9e(),n}function p9e(t,e){if(Ge(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const xz=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,g9e=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?n9e(t,s,o):e==="style"?i9e(t,n,s):JA(e)?QU(e)||l9e(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):m9e(t,e,s,o))?(Az(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Rz(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!rs(s))?Az(t,Bo(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Rz(t,e,s,o))};function m9e(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&xz(e)&&ht(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return xz(e)&&rs(n)?!1:e in t}const noe=new WeakMap,soe=new WeakMap,QS=Symbol("_moveCb"),Oz=Symbol("_enterCb"),_9e=t=>(delete t.props.mode,t),y9e=_9e({name:"TransitionGroup",props:Ks({},Jie,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Tg(),s=wie();let r,i;return kie(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!T9e(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(w9e),r.forEach(b9e);const a=r.filter(E9e);HD(),a.forEach(l=>{const u=l.el,h=u.style;nc(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[QS]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[QS]=null,Ih(u,o))};u.addEventListener("transitionend",d)}),r=[]}),()=>{const o=Wt(t),a=Zie(o);let l=o.tag||aa;if(r=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(r.push(h),eg(h,fE(h,a,s,n)),noe.set(h,h.el.getBoundingClientRect()))}i=e.default?c4(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&eg(h,fE(h,a,s,n))}return Ci(l,null,i)}}}),v9e=y9e;function w9e(t){const e=t.el;e[QS]&&e[QS](),e[Oz]&&e[Oz]()}function b9e(t){soe.set(t,t.el.getBoundingClientRect())}function E9e(t){const e=noe.get(t),n=soe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function T9e(t,e,n){const s=t.cloneNode(),r=t[S_];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=eoe(s);return i.removeChild(s),o}const C9e=["ctrl","shift","alt","meta"],I9e={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>C9e.some(n=>t[`${n}Key`]&&!e.includes(n))},BQe=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=I9e[e[o]];if(a&&a(r,e))return}return t(r,...i)})},S9e=Ks({patchProp:g9e},X6e);let Dz;function k9e(){return Dz||(Dz=y6e(S9e))}const roe=(...t)=>{const e=k9e().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=A9e(s);if(!r)return;const i=e._component;!ht(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,R9e(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function R9e(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function A9e(t){return rs(t)?document.querySelector(t):t}function h1(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function $Qe(t,e){for(const n in e)h1(t,n,e[n]);return t}const tg=ef(!1);let WD;function P9e(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function N9e(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const ioe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function x9e(t){const e=t.toLowerCase(),n=N9e(e),s=P9e(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),tg.value===!0&&(WD={is:{...r}}),ioe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const Lz=navigator.userAgent||navigator.vendor||window.opera,O9e={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Oc={userAgent:Lz,is:x9e(Lz),has:{touch:ioe},within:{iframe:window.self!==window.top}},KD={install(t){const{$q:e}=t;tg.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Oc),tg.value=!1}),e.platform=uy(this)):e.platform=this}};{let t;h1(Oc.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(KD,Oc),tg.value===!0&&(Object.assign(KD,WD,O9e),WD=null)}function LT(t){return xT(i1(t))}function D9e(t){return xT(t)}const d1=(t,e)=>{const n=uy(t);for(const s in t)h1(e,s,()=>n[s],r=>{n[s]=r});return e},ng={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(ng,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function mE(){}function zQe(t){return t.button===0}function L9e(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function HQe(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function ooe(t){t.stopPropagation()}function GD(t){t.cancelable!==!1&&t.preventDefault()}function qg(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function WQe(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",GD,ng.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",GD,ng.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function M9e(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],ng[r[3]])})}function F9e(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],ng[s[3]])}),t[n]=void 0)}function V9e(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const BN=["sm","md","lg","xl"],{passive:Mz}=ng,U9e=d1({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:mE,setDebounce:mE,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Oc.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,l={},u=16;this.setSizes=d=>{BN.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&BN.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{BN.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,Mz),a=p>0?V9e(this.__update,p):this.__update,s.addEventListener("resize",a,Mz)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};tg.value===!0?e.push(h):h()}}),Dr=d1({isActive:!1,mode:!1},{__media:void 0,set(t){Dr.mode=t,t==="auto"?(Dr.__media===void 0&&(Dr.__media=window.matchMedia("(prefers-color-scheme: dark)"),Dr.__updateMedia=()=>{Dr.set("auto")},Dr.__media.addListener(Dr.__updateMedia)),t=Dr.__media.matches):Dr.__media!==void 0&&(Dr.__media.removeListener(Dr.__updateMedia),Dr.__media=void 0),Dr.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Dr.set(Dr.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function q9e(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let aoe=!1;function j9e(t){aoe=t.isComposing===!0}function B9e(t){return aoe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function QD(t,e){return B9e(t)===!0?!1:[].concat(e).includes(t.keyCode)}function coe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function $9e({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=coe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function z9e(){const{is:t}=Oc,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=coe(t);r!==void 0&&n.add(`platform-${r}`)}}Oc.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Oc.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function H9e(t){for(const e in t)q9e(e,t[e])}const W9e={install(t){if(this.__installed!==!0){if(tg.value===!0)z9e();else{const{$q:e}=t;e.config.brand!==void 0&&H9e(e.config.brand);const n=$9e(Oc,e.config);document.body.classList.add.apply(document.body.classList,n)}Oc.is.ios===!0&&document.body.addEventListener("touchstart",mE),window.addEventListener("keydown",j9e,!0)}}},loe=()=>!0;function K9e(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function G9e(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function Q9e(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return loe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(K9e).map(G9e)),()=>e.includes(window.location.hash)}const Y9e={__history:[],add:mE,remove:mE,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Oc.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=loe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=Q9e(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Fz={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Vz(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const jh=d1({__qLang:{}},{getLocale:Vz,set(t=Fz,e){const n={...t,rtl:t.rtl===!0,getLocale:Vz};{if(n.set=jh.set,jh.__langConfig===void 0||jh.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(jh.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=jh.__qLang,jh.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||Fz))}}),X9e={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},YS=d1({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=YS.set,Object.assign(YS.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,h1(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||X9e))}}),uoe="_q_",KQe="_q_l_",GQe="_q_pc_",QQe="_q_fo_";function YQe(){}const XS={};let hoe=!1;function J9e(){hoe=!0}function $N(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if($N(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if($N(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if($N(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function _E(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function XQe(t){return Object.prototype.toString.call(t)==="[object Date]"}function JQe(t){return typeof t=="number"&&isFinite(t)}const Uz=[KD,W9e,Dr,U9e,Y9e,jh,YS];function Z9e(t,e){const n=roe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function qz(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function eqe(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(uoe,n.$q),qz(n,Uz),e.components!==void 0&&Object.values(e.components).forEach(s=>{_E(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{_E(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&qz(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&Uz.includes(s)===!1)),tg.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const tqe=function(t,e={}){const n={version:"2.18.2"};hoe===!1?(e.config!==void 0&&Object.assign(XS,e.config),n.config={...XS},J9e()):n.config=e.config||{},eqe(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},nqe={name:"Quasar",version:"2.18.2",install:tqe,lang:jh,iconSet:YS};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const am=typeof document<"u";function doe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sqe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&doe(t.default)}const Zt=Object.assign;function zN(t,e){const n={};for(const s in e){const r=e[s];n[s]=Ka(r)?r.map(t):t(r)}return n}const zw=()=>{},Ka=Array.isArray,foe=/#/g,rqe=/&/g,iqe=/\//g,oqe=/=/g,aqe=/\?/g,poe=/\+/g,cqe=/%5B/g,lqe=/%5D/g,goe=/%5E/g,uqe=/%60/g,moe=/%7B/g,hqe=/%7C/g,_oe=/%7D/g,dqe=/%20/g;function m4(t){return encodeURI(""+t).replace(hqe,"|").replace(cqe,"[").replace(lqe,"]")}function fqe(t){return m4(t).replace(moe,"{").replace(_oe,"}").replace(goe,"^")}function YD(t){return m4(t).replace(poe,"%2B").replace(dqe,"+").replace(foe,"%23").replace(rqe,"%26").replace(uqe,"`").replace(moe,"{").replace(_oe,"}").replace(goe,"^")}function pqe(t){return YD(t).replace(oqe,"%3D")}function gqe(t){return m4(t).replace(foe,"%23").replace(aqe,"%3F")}function mqe(t){return t==null?"":gqe(t).replace(iqe,"%2F")}function yE(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const _qe=/\/$/,yqe=t=>t.replace(_qe,"");function HN(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Eqe(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:yE(o)}}function vqe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jz(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function wqe(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&k_(e.matched[s],n.matched[r])&&yoe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function k_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yoe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!bqe(t[n],e[n]))return!1;return!0}function bqe(t,e){return Ka(t)?Bz(t,e):Ka(e)?Bz(e,t):t===e}function Bz(t,e){return Ka(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Eqe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const bh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vE;(function(t){t.pop="pop",t.push="push"})(vE||(vE={}));var Hw;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hw||(Hw={}));function Tqe(t){if(!t)if(am){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),yqe(t)}const Cqe=/^[^#]+#/;function Iqe(t,e){return t.replace(Cqe,"#")+e}function Sqe(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const f1=()=>({left:window.scrollX,top:window.scrollY});function kqe(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Sqe(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function $z(t,e){return(history.state?history.state.position-e:-1)+t}const XD=new Map;function Rqe(t,e){XD.set(t,e)}function Aqe(t){const e=XD.get(t);return XD.delete(t),e}let Pqe=()=>location.protocol+"//"+location.host;function voe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),jz(l,"")}return jz(n,t)+s+r}function Nqe(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=voe(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(D=>{D(n.value,w,{delta:P,type:vE.pop,direction:P?P>0?Hw.forward:Hw.back:Hw.unknown})})};function l(){o=n.value}function u(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Zt({},p.state,{scroll:f1()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function zz(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?f1():null}}function xqe(t){const{history:e,location:n}=window,s={value:voe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:Pqe()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=Zt({},e.state,zz(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,h,!0),s.value=l}function a(l,u){const h=Zt({},r.value,e.state,{forward:l,scroll:f1()});i(h.current,h,!0);const d=Zt({},zz(s.value,l,null),{position:h.position+1},u);i(l,d,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function Oqe(t){t=Tqe(t);const e=xqe(t),n=Nqe(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Zt({location:"",base:t,go:s,createHref:Iqe.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Dqe(t){return typeof t=="string"||t&&typeof t=="object"}function woe(t){return typeof t=="string"||typeof t=="symbol"}const boe=Symbol("");var Hz;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Hz||(Hz={}));function R_(t,e){return Zt(new Error,{type:t,[boe]:!0},e)}function ll(t,e){return t instanceof Error&&boe in t&&(e==null||!!(t.type&e))}const Wz="[^/]+?",Lqe={sensitive:!1,strict:!1,start:!0,end:!0},Mqe=/[.+*?^${}()[\]/\\]/g;function Fqe(t,e){const n=Zt({},Lqe,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(Mqe,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:D}=p;i.push({name:w,repeatable:k,optional:P});const M=D||Wz;if(M!==Wz){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&u.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,D=w in u?u[w]:"";if(Ka(D)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Ka(D)?D.join("/"):D;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function Vqe(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Eoe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Vqe(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Kz(s))return 1;if(Kz(r))return-1}return r.length-s.length}function Kz(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Uqe={type:0,value:""},qqe=/[a-zA-Z0-9_]/;function jqe(t){if(!t)return[[]];if(t==="/")return[[Uqe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:qqe.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}function Bqe(t,e,n){const s=Fqe(jqe(t.path),n),r=Zt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function $qe(t,e){const n=[],s=new Map;e=Xz({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=Qz(d);k.aliasOf=m&&m.record;const P=Xz(e,d),D=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)D.push(Qz(Zt({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of D){const{path:H}=q;if(p&&H[0]!=="/"){const X=p.record.path,I=X[X.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=Bqe(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!Yz(M)&&o(d.name)),Toe(M)&&l(M),k.children){const X=k.children;for(let I=0;I<X.length;I++)i(X[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:zw}function o(d){if(woe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=Wqe(d,n);n.splice(p,0,d),d.record.name&&!Yz(d)&&s.set(d.record.name,d)}function u(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw R_(1,{location:d});P=m.record.name,w=Zt(Gz(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&Gz(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw R_(1,{location:d,currentLocation:p});P=m.record.name,w=Zt({},p.params,d.params),k=m.stringify(w)}const D=[];let M=m;for(;M;)D.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:D,meta:Hqe(D)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Gz(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Qz(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:zqe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function zqe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Yz(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hqe(t){return t.reduce((e,n)=>Zt(e,n.meta),{})}function Xz(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function Wqe(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Eoe(t,e[i])<0?s=i:n=i+1}const r=Kqe(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function Kqe(t){let e=t;for(;e=e.parent;)if(Toe(e)&&Eoe(t,e)===0)return e}function Toe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Gqe(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(poe," "),o=i.indexOf("="),a=yE(o<0?i:i.slice(0,o)),l=o<0?null:yE(i.slice(o+1));if(a in e){let u=e[a];Ka(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Jz(t){let e="";for(let n in t){const s=t[n];if(n=pqe(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ka(s)?s.map(i=>i&&YD(i)):[s&&YD(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function Qqe(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Ka(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Yqe=Symbol(""),Zz=Symbol(""),p1=Symbol(""),_4=Symbol(""),JD=Symbol("");function fv(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Bh(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(R_(4,{from:n,to:e})):p instanceof Error?l(p):Dqe(p)?l(R_(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function WN(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(doe(l)){const h=(l.__vccOpts||l)[e];h&&i.push(Bh(h,n,s,o,a,r))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=sqe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const m=(d.__vccOpts||d)[e];return m&&Bh(m,n,s,o,a,r)()}))}}return i}function eH(t){const e=Fo(p1),n=Fo(_4),s=xe(()=>{const l=Pp(t.to);return e.resolve(l)}),r=xe(()=>{const{matched:l}=s.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(k_.bind(null,h));if(p>-1)return p;const m=tH(l[u-2]);return u>1&&tH(h)===m&&d[d.length-1].path!==m?d.findIndex(k_.bind(null,l[u-2])):p}),i=xe(()=>r.value>-1&&tje(n.params,s.value.params)),o=xe(()=>r.value>-1&&r.value===n.matched.length-1&&yoe(n.params,s.value.params));function a(l={}){if(eje(l)){const u=e[Pp(t.replace)?"replace":"push"](Pp(t.to)).catch(zw);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:xe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Xqe(t){return t.length===1?t[0]:t}const Jqe=i1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:eH,setup(t,{slots:e}){const n=uy(eH(t)),{options:s}=Fo(p1),r=xe(()=>({[nH(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[nH(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Xqe(e.default(n));return t.custom?i:st("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Zqe=Jqe;function eje(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function tje(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Ka(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function tH(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const nH=(t,e,n)=>t??e??n,nje=i1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Fo(JD),r=xe(()=>t.route||s.value),i=Fo(Zz,0),o=xe(()=>{let u=Pp(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=xe(()=>r.value.matched[o.value]);xI(Zz,xe(()=>o.value+1)),xI(Yqe,a),xI(JD,r);const l=ef();return Bw(()=>[l.value,a.value,t.name],([u,h,d],[p,m,w])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!k_(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return sH(n.default,{Component:p,route:u});const m=d.props[h],w=m?m===!0?u.params:typeof m=="function"?m(u):m:null,P=st(p,Zt({},w,e,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return sH(n.default,{Component:P,route:u})||P}}});function sH(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const sje=nje;function rje(t){const e=$qe(t.routes,t),n=t.parseQuery||Gqe,s=t.stringifyQuery||Jz,r=t.history,i=fv(),o=fv(),a=fv(),l=A4e(bh);let u=bh;am&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=zN.bind(null,F=>""+F),d=zN.bind(null,mqe),p=zN.bind(null,yE);function m(F,Y){let G,ee;return woe(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function D(F,Y){if(Y=Zt({},Y||l.value),typeof F=="string"){const x=HN(n,F,Y.path),L=e.resolve({path:x.path},Y),U=r.createHref(x.fullPath);return Zt(x,L,{params:p(L.params),hash:yE(x.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Zt({},F,{path:HN(n,F.path,Y.path).path});else{const x=Zt({},F.params);for(const L in x)x[L]==null&&delete x[L];G=Zt({},F,{params:d(x)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const T=vqe(s,Zt({},F,{hash:fqe(A),path:ee.path})),R=r.createHref(T);return Zt({fullPath:T,hash:A,query:s===Jz?Qqe(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?HN(n,F,l.value.path):Zt({},F)}function V(F,Y){if(u!==F)return R_(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Zt(M(F),{replace:!0}))}function X(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Zt({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=u=D(F),ee=l.value,A=F.state,T=F.force,R=F.replace===!0,x=X(G);if(x)return I(Zt(M(x),{state:typeof x=="object"?Zt({},A,x.state):A,force:T,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!T&&wqe(s,ee,G)&&(U=R_(16,{to:L,from:ee}),xt(ee,ee,!0,!1)),(U?Promise.resolve(U):C(L,ee)).catch(j=>ll(j)?ll(j,2)?j:It(j):we(j,L,ee)).then(j=>{if(j){if(ll(j,2))return I(Zt({replace:R},M(j.to),{state:typeof j.to=="object"?Zt({},A,j.to.state):A,force:T}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=yn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function C(F,Y){let G;const[ee,A,T]=ije(F,Y);G=WN(ee.reverse(),"beforeRouteLeave",F,Y);for(const x of ee)x.leaveGuards.forEach(L=>{G.push(Bh(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),ct(G).then(()=>{G=[];for(const x of i.list())G.push(Bh(x,F,Y));return G.push(R),ct(G)}).then(()=>{G=WN(A,"beforeRouteUpdate",F,Y);for(const x of A)x.updateGuards.forEach(L=>{G.push(Bh(L,F,Y))});return G.push(R),ct(G)}).then(()=>{G=[];for(const x of T)if(x.beforeEnter)if(Ka(x.beforeEnter))for(const L of x.beforeEnter)G.push(Bh(L,F,Y));else G.push(Bh(x.beforeEnter,F,Y));return G.push(R),ct(G)}).then(()=>(F.matched.forEach(x=>x.enterCallbacks={}),G=WN(T,"beforeRouteEnter",F,Y,y),G.push(R),ct(G))).then(()=>{G=[];for(const x of o.list())G.push(Bh(x,F,Y));return G.push(R),ct(G)}).catch(x=>ll(x,8)?x:Promise.reject(x))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const T=V(F,Y);if(T)return T;const R=Y===bh,x=am?history.state:{};G&&(ee||R?r.replace(F.fullPath,Zt({scroll:R&&x&&x.scroll},A)):r.push(F.fullPath,A)),l.value=F,xt(F,Y,G,R),It()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Kt.listening)return;const ee=D(F),A=X(ee);if(A){I(Zt(A,{replace:!0,force:!0}),ee).catch(zw);return}u=ee;const T=l.value;am&&Rqe($z(T.fullPath,G.delta),f1()),C(ee,T).catch(R=>ll(R,12)?R:ll(R,2)?(I(Zt(M(R.to),{force:!0}),ee).then(x=>{ll(x,20)&&!G.delta&&G.type===vE.pop&&r.go(-1,!1)}).catch(zw),Promise.reject()):(G.delta&&r.go(-G.delta,!1),we(R,ee,T))).then(R=>{R=R||E(ee,T,!1),R&&(G.delta&&!ll(R,8)?r.go(-G.delta,!1):G.type===vE.pop&&ll(R,20)&&r.go(-1,!1)),S(ee,T,R)}).catch(zw)}))}let ne=fv(),de=fv(),ce;function we(F,Y,G){It(F);const ee=de.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Ht(){return ce&&l.value!==bh?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function It(F){return ce||(ce=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function xt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!am||!A)return Promise.resolve();const T=!G&&Aqe($z(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return uie().then(()=>A(F,Y,T)).then(R=>R&&kqe(R)).catch(R=>we(R,F,Y))}const ke=F=>r.go(F);let Ee;const yn=new Set,Kt={currentRoute:l,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:D,options:t,push:q,replace:H,go:ke,back:()=>ke(-1),forward:()=>ke(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Ht,install(F){const Y=this;F.component("RouterLink",Zqe),F.component("RouterView",sje),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Pp(l)}),am&&!Ee&&l.value===bh&&(Ee=!0,q(r.location).catch(A=>{}));const G={};for(const A in bh)Object.defineProperty(G,A,{get:()=>l.value[A],enumerable:!0});F.provide(p1,Y),F.provide(_4,iie(G)),F.provide(JD,l);const ee=F.unmount;yn.add(F),F.unmount=function(){yn.delete(F),yn.size<1&&(u=bh,b&&b(),b=null,l.value=bh,Ee=!1,ce=!1),ee()}}};function ct(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Kt}function ije(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>k_(u,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>k_(u,l))||r.push(l))}return[n,s,r]}function oje(){return Fo(p1)}function aje(t){return Fo(_4)}const cje=()=>{};var rH={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Coe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(t,e){if(!t)throw hy(e)},hy=function(t){return new Error("Firebase Database ("+Coe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ioe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},lje=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},y4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ioe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lje(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||d==null)throw new uje;const p=i<<2|a>>4;if(s.push(p),u!==64){const m=a<<4&240|u>>2;if(s.push(m),d!==64){const w=u<<6&192|d;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uje extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Soe=function(t){const e=Ioe(t);return y4.encodeByteArray(e,!0)},JS=function(t){return Soe(t).replace(/\./g,"")},ZS=function(t){try{return y4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hje(t){return koe(void 0,t)}function koe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!dje(n)||(t[n]=koe(t[n],e[n]));return t}function dje(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fje(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pje=()=>fje().__FIREBASE_DEFAULTS__,gje=()=>{if(typeof process>"u"||typeof rH>"u")return;const t=rH.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mje=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ZS(t[1]);return e&&JSON.parse(e)},g1=()=>{try{return cje()||pje()||gje()||mje()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Roe=t=>g1()?.emulatorHosts?.[t],v4=t=>{const e=Roe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Aoe=()=>g1()?.config,Poe=t=>g1()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[JS(JSON.stringify(n)),JS(JSON.stringify(o)),""].join(".")}const Ww={};function _je(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ww))Ww[e]?t.emulator.push(e):t.prod.push(e);return t}function yje(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iH=!1;function y1(t,e){if(typeof window>"u"||typeof document>"u"||!nl(window.location.host)||Ww[t]===e||Ww[t]||iH)return;Ww[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=_je().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{iH=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=yje(s),m=n("text"),w=document.getElementById(m)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),D=n("preprendIcon"),M=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const V=p.element;a(V),h(P,k);const q=u();l(M,D),V.append(M,w,P,q),document.body.appendChild(V)}i?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function vje(){const t=g1()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wje(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bje(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Noe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eje(){const t=si();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Tje(){return Coe.NODE_ADMIN===!0}function Cje(){return!vje()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ije(){try{return typeof indexedDB=="object"}catch{return!1}}function Sje(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kje="FirebaseError";class sl extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=kje,Object.setPrototypeOf(this,sl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,MT.prototype.create)}}class MT{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Rje(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new sl(r,a,s)}}function Rje(t,e){return t.replace(Aje,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Aje=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){return JSON.parse(t)}function Us(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xoe=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=wE(ZS(i[0])||""),n=wE(ZS(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Pje=function(t){const e=xoe(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Nje=function(t){const e=xoe(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A_(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ZD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ek(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function nf(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(oH(i)&&oH(o)){if(!nf(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function oH(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xje{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+u+l+h+s[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function Oje(t,e){const n=new Dje(t,e);return n.subscribe.bind(n)}class Dje{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Lje(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=KN),r.error===void 0&&(r.error=KN),r.complete===void 0&&(r.complete=KN);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lje(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function KN(){}function E4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mje=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,_e(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},v1=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){return t&&t._delegate?t._delegate:t}class au{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fje{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new m1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uje(e))try{this.getOrInitializeService({instanceIdentifier:Qf})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Qf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qf){return this.instances.has(e)}getOptions(e=Qf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vje(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qf){return this.component?this.component.multipleInstances?e:Qf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vje(t){return t===Qf?void 0:t}function Uje(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qje{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fje(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const jje={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},Bje=Rt.INFO,$je={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},zje=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=$je[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w1{constructor(e){this.name=e,this._logLevel=Bje,this._logHandler=zje,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jje[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const Hje=(t,e)=>e.some(n=>t instanceof n);let aH,cH;function Wje(){return aH||(aH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kje(){return cH||(cH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ooe=new WeakMap,eL=new WeakMap,Doe=new WeakMap,GN=new WeakMap,T4=new WeakMap;function Gje(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_d(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ooe.set(n,t)}).catch(()=>{}),T4.set(e,t),e}function Qje(t){if(eL.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});eL.set(t,e)}let tL={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eL.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Doe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _d(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yje(t){tL=t(tL)}function Xje(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(QN(this),e,...n);return Doe.set(s,e.sort?e.sort():[e]),_d(s)}:Kje().includes(t)?function(...e){return t.apply(QN(this),e),_d(Ooe.get(this))}:function(...e){return _d(t.apply(QN(this),e))}}function Jje(t){return typeof t=="function"?Xje(t):(t instanceof IDBTransaction&&Qje(t),Hje(t,Wje())?new Proxy(t,tL):t)}function _d(t){if(t instanceof IDBRequest)return Gje(t);if(GN.has(t))return GN.get(t);const e=Jje(t);return e!==t&&(GN.set(t,e),T4.set(e,t)),e}const QN=t=>T4.get(t);function Zje(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=_d(o);return s&&o.addEventListener("upgradeneeded",l=>{s(_d(o.result),l.oldVersion,l.newVersion,_d(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const e3e=["get","getKey","getAll","getAllKeys","count"],t3e=["put","add","delete","clear"],YN=new Map;function lH(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(YN.get(e))return YN.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=t3e.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||e3e.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return YN.set(e,i),i}Yje(t=>({...t,get:(e,n,s)=>lH(e,n)||t.get(e,n,s),has:(e,n)=>!!lH(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s3e(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function s3e(t){return t.getComponent()?.type==="VERSION"}const nL="@firebase/app",uH="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new w1("@firebase/app"),r3e="@firebase/app-compat",i3e="@firebase/analytics-compat",o3e="@firebase/analytics",a3e="@firebase/app-check-compat",c3e="@firebase/app-check",l3e="@firebase/auth",u3e="@firebase/auth-compat",h3e="@firebase/database",d3e="@firebase/data-connect",f3e="@firebase/database-compat",p3e="@firebase/functions",g3e="@firebase/functions-compat",m3e="@firebase/installations",_3e="@firebase/installations-compat",y3e="@firebase/messaging",v3e="@firebase/messaging-compat",w3e="@firebase/performance",b3e="@firebase/performance-compat",E3e="@firebase/remote-config",T3e="@firebase/remote-config-compat",C3e="@firebase/storage",I3e="@firebase/storage-compat",S3e="@firebase/firestore",k3e="@firebase/ai",R3e="@firebase/firestore-compat",A3e="firebase",P3e="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="[DEFAULT]",N3e={[nL]:"fire-core",[r3e]:"fire-core-compat",[o3e]:"fire-analytics",[i3e]:"fire-analytics-compat",[c3e]:"fire-app-check",[a3e]:"fire-app-check-compat",[l3e]:"fire-auth",[u3e]:"fire-auth-compat",[h3e]:"fire-rtdb",[d3e]:"fire-data-connect",[f3e]:"fire-rtdb-compat",[p3e]:"fire-fn",[g3e]:"fire-fn-compat",[m3e]:"fire-iid",[_3e]:"fire-iid-compat",[y3e]:"fire-fcm",[v3e]:"fire-fcm-compat",[w3e]:"fire-perf",[b3e]:"fire-perf-compat",[E3e]:"fire-rc",[T3e]:"fire-rc-compat",[C3e]:"fire-gcs",[I3e]:"fire-gcs-compat",[S3e]:"fire-fst",[R3e]:"fire-fst-compat",[k3e]:"fire-vertex","fire-js":"fire-js",[A3e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new Map,x3e=new Map,rL=new Map;function hH(t,e){try{t.container.addComponent(e)}catch(n){cu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sf(t){const e=t.name;if(rL.has(e))return cu.debug(`There were multiple attempts to register component ${e}.`),!1;rL.set(e,t);for(const n of tk.values())hH(n,t);for(const n of x3e.values())hH(n,t);return!0}function FT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function uo(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yd=new MT("app","Firebase",O3e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3e{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=P3e;function Loe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:sL,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw yd.create("bad-app-name",{appName:String(r)});if(n||(n=Aoe()),!n)throw yd.create("no-options");const i=tk.get(r);if(i){if(nf(n,i.options)&&nf(s,i.config))return i;throw yd.create("duplicate-app",{appName:r})}const o=new qje(r);for(const l of rL.values())o.addComponent(l);const a=new D3e(n,s,o);return tk.set(r,a),a}function b1(t=sL){const e=tk.get(t);if(!e&&t===sL&&Aoe())return Loe();if(!e)throw yd.create("no-app",{appName:t});return e}function Vo(t,e,n){let s=N3e[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cu.warn(o.join(" "));return}sf(new au(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3e="firebase-heartbeat-database",M3e=1,bE="firebase-heartbeat-store";let XN=null;function Moe(){return XN||(XN=Zje(L3e,M3e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bE)}catch(n){console.warn(n)}}}}).catch(t=>{throw yd.create("idb-open",{originalErrorMessage:t.message})})),XN}async function F3e(t){try{const n=(await Moe()).transaction(bE),s=await n.objectStore(bE).get(Foe(t));return await n.done,s}catch(e){if(e instanceof sl)cu.warn(e.message);else{const n=yd.create("idb-get",{originalErrorMessage:e?.message});cu.warn(n.message)}}}async function dH(t,e){try{const s=(await Moe()).transaction(bE,"readwrite");await s.objectStore(bE).put(e,Foe(t)),await s.done}catch(n){if(n instanceof sl)cu.warn(n.message);else{const s=yd.create("idb-set",{originalErrorMessage:n?.message});cu.warn(s.message)}}}function Foe(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3e=1024,U3e=30;class q3e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B3e(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fH();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>U3e){const r=$3e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fH(),{heartbeatsToSend:n,unsentEntries:s}=j3e(this._heartbeatsCache.heartbeats),r=JS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return cu.warn(e),""}}}function fH(){return new Date().toISOString().substring(0,10)}function j3e(t,e=V3e){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),pH(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),pH(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class B3e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ije()?Sje().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await F3e(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dH(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return dH(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function pH(t){return JS(JSON.stringify({version:2,heartbeats:t})).length}function $3e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3e(t){sf(new au("platform-logger",e=>new n3e(e),"PRIVATE")),sf(new au("heartbeat",e=>new q3e(e),"PRIVATE")),Vo(nL,uH,t),Vo(nL,uH,"esm2020"),Vo("fire-js","")}z3e("");function Voe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H3e=Voe,Uoe=new MT("auth","Firebase",Voe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new w1("@firebase/auth");function W3e(t,...e){nk.logLevel<=Rt.WARN&&nk.warn(`Auth (${If}): ${t}`,...e)}function LI(t,...e){nk.logLevel<=Rt.ERROR&&nk.error(`Auth (${If}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,...e){throw I4(t,...e)}function Va(t,...e){return I4(t,...e)}function C4(t,e,n){const s={...H3e(),[e]:n};return new MT("auth","Firebase",s).create(e,{appName:t.name})}function xp(t){return C4(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function K3e(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Gc(t,"argument-error"),C4(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I4(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Uoe.create(t,...e)}function tt(t,e,...n){if(!t)throw I4(e,...n)}function xl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw LI(e),new Error(e)}function lu(t,e){t||xl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(){return typeof self<"u"&&self.location?.href||""}function G3e(){return gH()==="http:"||gH()==="https:"}function gH(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G3e()||bje()||"connection"in navigator)?navigator.onLine:!0}function Y3e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.shortDelay=e,this.longDelay=n,lu(n>e,"Short delay should be less than long delay!"),this.isMobile=b4()||Noe()}get(){return Q3e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t,e){lu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qoe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z3e=new VT(3e4,6e4);function k4(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fy(t,e,n,s,r={}){return joe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=dy({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return wje()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&nl(t.emulatorConfig.host)&&(u.credentials="include"),qoe.fetch()(await Boe(t,t.config.apiHost,n,a),u)})}async function joe(t,e,n){t._canInitEmulator=!1;const s={...X3e,...e};try{const r=new tBe(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw MC(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw MC(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw MC(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw MC(t,"user-disabled",o);const h=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw C4(t,h,u);Gc(t,h)}}catch(r){if(r instanceof sl)throw r;Gc(t,"network-request-failed",{message:String(r)})}}async function eBe(t,e,n,s,r={}){const i=await fy(t,e,n,s,r);return"mfaPendingCredential"in i&&Gc(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Boe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?S4(t.config,r):`${t.config.apiScheme}://${r}`;return J3e.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class tBe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Va(this.auth,"network-request-failed")),Z3e.get())})}}function MC(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Va(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nBe(t,e){return fy(t,"POST","/v1/accounts:delete",e)}async function sk(t,e){return fy(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sBe(t,e=!1){const n=hn(t),s=await n.getIdToken(e),r=R4(s);tt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Kw(JN(r.auth_time)),issuedAtTime:Kw(JN(r.iat)),expirationTime:Kw(JN(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function JN(t){return Number(t)*1e3}function R4(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return LI("JWT malformed, contained fewer than 3 sections"),null;try{const r=ZS(n);return r?JSON.parse(r):(LI("Failed to decode base64 JWT payload"),null)}catch(r){return LI("Caught error parsing JWT payload as JSON",r?.toString()),null}}function mH(t){const e=R4(t);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EE(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof sl&&rBe(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function rBe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iBe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kw(this.lastLoginAt),this.creationTime=Kw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t){const e=t.auth,n=await t.getIdToken(),s=await EE(t,sk(e,{idToken:n}));tt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?$oe(r.providerUserInfo):[],o=aBe(t.providerData,i),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=a?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new oL(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function oBe(t){const e=hn(t);await rk(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aBe(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function $oe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cBe(t,e){const n=await joe(t,{},async()=>{const s=dy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Boe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:s};return t.emulatorConfig&&nl(t.emulatorConfig.host)&&(l.credentials="include"),qoe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lBe(t,e){return fy(t,"POST","/v2/accounts:revokeToken",k4(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mH(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const n=mH(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await cBe(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Bm;return s&&(tt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(tt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(tt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bm,this.toJSON())}_performRefresh(){return xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e){tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ba{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new iBe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new oL(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await EE(this,this.stsTokenManager.getToken(this.auth,e));return tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sBe(this,e)}reload(){return oBe(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ba({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await rk(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(uo(this.auth.app))return Promise.reject(xp(this.auth));const e=await this.getIdToken();return await EE(this,nBe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;tt(d&&k,e,"internal-error");const P=Bm.fromJSON(this.name,k);tt(typeof d=="string",e,"internal-error"),Eh(s,e.name),Eh(r,e.name),tt(typeof p=="boolean",e,"internal-error"),tt(typeof m=="boolean",e,"internal-error"),Eh(i,e.name),Eh(o,e.name),Eh(a,e.name),Eh(l,e.name),Eh(u,e.name),Eh(h,e.name);const D=new ba({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(D.providerData=w.map(M=>({...M}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,n,s=!1){const r=new Bm;r.updateFromServerResponse(n);const i=new ba({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await rk(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];tt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?$oe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new Bm;a.updateFromIdToken(s);const l=new ba({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new oL(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H=new Map;function Ol(t){lu(t instanceof Function,"Expected a class definition");let e=_H.get(t);return e?(lu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_H.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zoe.type="NONE";const yH=zoe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){return`firebase:${t}:${e}:${n}`}class $m{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=MI(this.userKey,r.apiKey,i),this.fullPersistenceKey=MI("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sk(this.auth,{idToken:e}).catch(()=>{});return n?ba._fromGetAccountInfoResponse(this.auth,n,e):null}return ba._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new $m(Ol(yH),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Ol(yH);const o=MI(s,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await sk(e,{idToken:h}).catch(()=>{});if(!p)break;d=await ba._fromGetAccountInfoResponse(e,p,h)}else d=ba._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new $m(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new $m(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Goe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hoe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yoe(e))return"Blackberry";if(Xoe(e))return"Webos";if(Woe(e))return"Safari";if((e.includes("chrome/")||Koe(e))&&!e.includes("edge/"))return"Chrome";if(Qoe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function Hoe(t=si()){return/firefox\//i.test(t)}function Woe(t=si()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Koe(t=si()){return/crios\//i.test(t)}function Goe(t=si()){return/iemobile/i.test(t)}function Qoe(t=si()){return/android/i.test(t)}function Yoe(t=si()){return/blackberry/i.test(t)}function Xoe(t=si()){return/webos/i.test(t)}function A4(t=si()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uBe(t=si()){return A4(t)&&!!window.navigator?.standalone}function hBe(){return Eje()&&document.documentMode===10}function Joe(t=si()){return A4(t)||Qoe(t)||Xoe(t)||Yoe(t)||/windows phone/i.test(t)||Goe(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zoe(t,e=[]){let n;switch(t){case"Browser":n=vH(si());break;case"Worker":n=`${vH(si())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${If}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dBe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fBe(t,e={}){return fy(t,"GET","/v2/passwordPolicy",k4(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pBe=6;class gBe{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pBe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mBe{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wH(this),this.idTokenSubscription=new wH(this),this.beforeStateQueue=new dBe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Uoe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ol(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $m.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sk(this,{idToken:e}),s=await ba._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(uo(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rk(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y3e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(uo(this.app))return Promise.reject(xp(this));const n=e?hn(e):null;return n&&tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return uo(this.app)?Promise.reject(xp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return uo(this.app)?Promise.reject(xp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ol(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fBe(this),n=new gBe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new MT("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await lBe(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ol(e)||this._popupRedirectResolver;tt(n,this,"argument-error"),this.redirectPersistenceManager=await $m.create(this,[Ol(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zoe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(uo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&W3e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function E1(t){return hn(t)}class wH{constructor(e){this.auth=e,this.observer=null,this.addObserver=Oje(n=>this.observer=n)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _Be(t){P4=t}function yBe(t){return P4.loadJS(t)}function vBe(){return P4.gapiScript}function wBe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bBe(t,e){const n=FT(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(nf(i,e??{}))return r;Gc(r,"already-initialized")}return n.initialize({options:e})}function EBe(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ol);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function TBe(t,e,n){const s=E1(t);tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=eae(e),{host:o,port:a}=CBe(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),tt(nf(u,s.config.emulator)&&nf(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,nl(o)?(_1(`${i}//${o}${l}`),y1("Auth",!0)):IBe()}function eae(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CBe(t){const e=eae(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:bH(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:bH(o)}}}function bH(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IBe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xl("not implemented")}_getIdTokenResponse(e){return xl("not implemented")}_linkToIdToken(e,n){return xl("not implemented")}_getReauthenticationResolver(e){return xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zm(t,e){return eBe(t,"POST","/v1/accounts:signInWithIdp",k4(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SBe="http://localhost";class sg extends tae{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new sg(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return zm(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,zm(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zm(e,n)}buildRequest(){const e={requestUri:SBe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dy(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends N4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends UT{constructor(){super("facebook.com")}static credential(e){return sg._fromParams({providerId:Hh.PROVIDER_ID,signInMethod:Hh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hh.credentialFromTaggedObject(e)}static credentialFromError(e){return Hh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hh.credential(e.oauthAccessToken)}catch{return null}}}Hh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends UT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sg._fromParams({providerId:Il.PROVIDER_ID,signInMethod:Il.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Il.credentialFromTaggedObject(e)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Il.credential(n,s)}catch{return null}}}Il.GOOGLE_SIGN_IN_METHOD="google.com";Il.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends UT{constructor(){super("github.com")}static credential(e){return sg._fromParams({providerId:Wh.PROVIDER_ID,signInMethod:Wh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wh.credentialFromTaggedObject(e)}static credentialFromError(e){return Wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wh.credential(e.oauthAccessToken)}catch{return null}}}Wh.GITHUB_SIGN_IN_METHOD="github.com";Wh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends UT{constructor(){super("twitter.com")}static credential(e,n){return sg._fromParams({providerId:Kh.PROVIDER_ID,signInMethod:Kh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kh.credentialFromTaggedObject(e)}static credentialFromError(e){return Kh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Kh.credential(n,s)}catch{return null}}}Kh.TWITTER_SIGN_IN_METHOD="twitter.com";Kh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await ba._fromIdTokenResponse(e,s,r),o=EH(s);return new P_({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=EH(s);return new P_({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function EH(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends sl{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ik.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ik(e,n,s,r)}}function nae(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ik._fromErrorAndOperation(t,i,e,s):i})}async function kBe(t,e,n=!1){const s=await EE(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return P_._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RBe(t,e,n=!1){const{auth:s}=t;if(uo(s.app))return Promise.reject(xp(s));const r="reauthenticate";try{const i=await EE(t,nae(s,r,e,t),n);tt(i.idToken,s,"internal-error");const o=R4(i.idToken);tt(o,s,"internal-error");const{sub:a}=o;return tt(t.uid===a,s,"user-mismatch"),P_._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Gc(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ABe(t,e,n=!1){if(uo(t.app))return Promise.reject(xp(t));const s="signIn",r=await nae(t,s,e),i=await P_._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function PBe(t,e,n,s){return hn(t).onIdTokenChanged(e,n,s)}function NBe(t,e,n){return hn(t).beforeAuthStateChanged(e,n)}function xBe(t,e,n,s){return hn(t).onAuthStateChanged(e,n,s)}function pv(t){return hn(t).signOut()}const ok="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sae{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ok,"1"),this.storage.removeItem(ok),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OBe=1e3,DBe=10;class rae extends sae{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Joe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);hBe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,DBe):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},OBe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rae.type="LOCAL";const LBe=rae;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae extends sae{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iae.type="SESSION";const oae=iae;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MBe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new T1(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await MBe(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}T1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FBe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=x4("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(){return window}function VBe(t){Dc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aae(){return typeof Dc().WorkerGlobalScope<"u"&&typeof Dc().importScripts=="function"}async function UBe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qBe(){return navigator?.serviceWorker?.controller||null}function jBe(){return aae()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cae="firebaseLocalStorageDb",BBe=1,ak="firebaseLocalStorage",lae="fbase_key";class qT{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function C1(t,e){return t.transaction([ak],e?"readwrite":"readonly").objectStore(ak)}function $Be(){const t=indexedDB.deleteDatabase(cae);return new qT(t).toPromise()}function aL(){const t=indexedDB.open(cae,BBe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ak,{keyPath:lae})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ak)?e(s):(s.close(),await $Be(),e(await aL()))})})}async function TH(t,e,n){const s=C1(t,!0).put({[lae]:e,value:n});return new qT(s).toPromise()}async function zBe(t,e){const n=C1(t,!1).get(e),s=await new qT(n).toPromise();return s===void 0?null:s.value}function CH(t,e){const n=C1(t,!0).delete(e);return new qT(n).toPromise()}const HBe=800,WBe=3;class uae{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await aL(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>WBe)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aae()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=T1._getInstance(jBe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UBe(),!this.activeServiceWorker)return;this.sender=new FBe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qBe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await aL();return await TH(e,ok,"1"),await CH(e,ok),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>TH(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>zBe(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CH(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=C1(r,!1).getAll();return new qT(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HBe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uae.type="LOCAL";const KBe=uae;new VT(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hae(t,e){return e?Ol(e):(tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4 extends tae{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GBe(t){return ABe(t.auth,new O4(t),t.bypassAuthState)}function QBe(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),RBe(n,new O4(t),t.bypassAuthState)}async function YBe(t){const{auth:e,user:n}=t;return tt(n,e,"internal-error"),kBe(n,new O4(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dae{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GBe;case"linkViaPopup":case"linkViaRedirect":return YBe;case"reauthViaPopup":case"reauthViaRedirect":return QBe;default:Gc(this.auth,"internal-error")}}resolve(e){lu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XBe=new VT(2e3,1e4);async function JBe(t,e,n){if(uo(t.app))return Promise.reject(Va(t,"operation-not-supported-in-this-environment"));const s=E1(t);K3e(t,e,N4);const r=hae(s,n);return new dp(s,"signInViaPopup",e,r).executeNotNull()}class dp extends dae{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,dp.currentPopupAction&&dp.currentPopupAction.cancel(),dp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){lu(this.filter.length===1,"Popup operations only handle one event");const e=x4();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Va(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Va(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dp.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Va(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XBe.get())};e()}}dp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZBe="pendingRedirect",FI=new Map;class e$e extends dae{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=FI.get(this.auth._key());if(!e){try{const s=await t$e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}FI.set(this.auth._key(),e)}return this.bypassAuthState||FI.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t$e(t,e){const n=r$e(e),s=s$e(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function n$e(t,e){FI.set(t._key(),e)}function s$e(t){return Ol(t._redirectPersistence)}function r$e(t){return MI(ZBe,t.config.apiKey,t.name)}async function i$e(t,e,n=!1){if(uo(t.app))return Promise.reject(xp(t));const s=E1(t),r=hae(s,e),o=await new e$e(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$e=600*1e3;class a$e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c$e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fae(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Va(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o$e&&this.cachedEventUids.clear(),this.cachedEventUids.has(IH(e))}saveEventToCache(e){this.cachedEventUids.add(IH(e)),this.lastProcessedEventTime=Date.now()}}function IH(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fae({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function c$e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fae(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$e(t,e={}){return fy(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h$e=/^https?/;async function d$e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await l$e(t);for(const n of e)try{if(f$e(n))return}catch{}Gc(t,"unauthorized-domain")}function f$e(t){const e=iL(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!h$e.test(n))return!1;if(u$e.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$e=new VT(3e4,6e4);function SH(){const t=Dc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function g$e(t){return new Promise((e,n)=>{function s(){SH(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SH(),n(Va(t,"network-request-failed"))},timeout:p$e.get()})}if(Dc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Dc().gapi?.load)s();else{const r=wBe("iframefcb");return Dc()[r]=()=>{gapi.load?s():n(Va(t,"network-request-failed"))},yBe(`${vBe()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw VI=null,e})}let VI=null;function m$e(t){return VI=VI||g$e(t),VI}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$e=new VT(5e3,15e3),y$e="__/auth/iframe",v$e="emulator/auth/iframe",w$e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b$e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E$e(t){const e=t.config;tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?S4(e,v$e):`https://${t.config.authDomain}/${y$e}`,s={apiKey:e.apiKey,appName:t.name,v:If},r=b$e.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${dy(s).slice(1)}`}async function T$e(t){const e=await m$e(t),n=Dc().gapi;return tt(n,t,"internal-error"),e.open({where:document.body,url:E$e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w$e,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Va(t,"network-request-failed"),a=Dc().setTimeout(()=>{i(o)},_$e.get());function l(){Dc().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I$e=500,S$e=600,k$e="_blank",R$e="http://localhost";class kH{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A$e(t,e,n,s=I$e,r=S$e){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l={...C$e,width:s.toString(),height:r.toString(),top:i,left:o},u=si().toLowerCase();n&&(a=Koe(u)?k$e:n),Hoe(u)&&(e=e||R$e,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(uBe(u)&&a!=="_self")return P$e(e||"",a),new kH(null);const d=window.open(e||"",a,h);tt(d,t,"popup-blocked");try{d.focus()}catch{}return new kH(d)}function P$e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$e="__/auth/handler",x$e="emulator/auth/handler",O$e=encodeURIComponent("fac");async function RH(t,e,n,s,r,i){tt(t.config.authDomain,t,"auth-domain-config-required"),tt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:If,eventId:r};if(e instanceof N4){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof UT){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${O$e}=${encodeURIComponent(l)}`:"";return`${D$e(t)}?${dy(a).slice(1)}${u}`}function D$e({config:t}){return t.emulator?S4(t,x$e):`https://${t.authDomain}/${N$e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="webStorageSupport";class L$e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oae,this._completeRedirectFn=i$e,this._overrideRedirectResult=n$e}async _openPopup(e,n,s,r){lu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await RH(e,n,s,iL(),r);return A$e(e,i,x4())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await RH(e,n,s,iL(),r);return VBe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(lu(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await T$e(e),s=new a$e(e);return n.register("authEvent",r=>(tt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ZN,{type:ZN},r=>{const i=r?.[0]?.[ZN];i!==void 0&&n(!!i),Gc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=d$e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Joe()||Woe()||A4()}}const M$e=L$e;var AH="@firebase/auth",PH="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U$e(t){sf(new au("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;tt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zoe(t)},u=new mBe(s,r,i,l);return EBe(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),sf(new au("auth-internal",e=>{const n=E1(e.getProvider("auth").getImmediate());return(s=>new F$e(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vo(AH,PH,V$e(t)),Vo(AH,PH,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$e=300,j$e=Poe("authIdTokenMaxAge")||q$e;let NH=null;const B$e=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>j$e)return;const r=n?.token;NH!==r&&(NH=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function $$e(t=b1()){const e=FT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bBe(t,{popupRedirectResolver:M$e,persistence:[KBe,LBe,oae]}),s=Poe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=B$e(i.toString());NBe(n,o,()=>o(n.currentUser)),PBe(n,a=>o(a))}}const r=Roe("auth");return r&&TBe(n,`http://${r}`),n}function z$e(){return document.getElementsByTagName("head")?.[0]??document}_Be({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Va("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",z$e().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U$e("Browser");var xH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vd,pae;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(C,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(C,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var C=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)C[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)C[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+C[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+C[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+C[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+C[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+C[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+C[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+C[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+C[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+C[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+C[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+C[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+C[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+C[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+C[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+C[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+C[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+C[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+C[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+C[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,C=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(C[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,C),S=0;break}}else for(;E<v;)if(C[S++]=I[E++],S==this.blockSize){r(this,C),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var C=0;32>C;C+=8)I[y++]=this.g[v]>>>C&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],C=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;C&&E==v||(y[S]=E,C=!1)}this.g=y}var a={};function l(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(u(-I));for(var v=[],y=1,C=0;I>=y;C++)v[C]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),C=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=u(Math.pow(v,E)),C=C.j(E).add(u(b))):(C=C.j(y),C=C.add(u(b)))}return C}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var C=this.i(y);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=u(Math.pow(I,6)),y=this,C="";;){var S=q(y,v).g;y=D(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+C;for(;6>E.length;)E="0"+E;C=E+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=D(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],C=0;C<v;C++)y[C]=~I.g[C];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0,S=0;S<=v;S++){var E=C+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);C=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function D(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],C=0;C<2*v;C++)y[C]=0;for(C=0;C<this.g.length;C++)for(var S=0;S<I.g.length;S++){var E=this.i(C)>>>16,b=this.i(C)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*C+2*S]+=b*ne,M(y,2*C+2*S),y[2*C+2*S+1]+=E*ne,M(y,2*C+2*S+1),y[2*C+2*S+1]+=b*K,M(y,2*C+2*S+1),y[2*C+2*S+2]+=E*K,M(y,2*C+2*S+2)}for(C=0;C<v;C++)y[C]=y[2*C+1]<<16|y[2*C];for(C=v;C<2*v;C++)y[C]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,C=v;0>=C.l(I);)y=H(y),C=H(C);var S=X(y,1),E=X(C,1);for(C=X(C,2),y=X(y,2);!w(C);){var b=E.add(C);0>=b.l(I)&&(S=S.add(y),E=b),C=X(C,1),y=X(y,1)}return v=D(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(y)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),E=u(y),b=E.j(v);k(b)||0<b.l(I);)y-=C,E=u(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=D(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)&I.i(C);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)|I.i(C);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],C=0;C<v;C++)y[C]=this.i(C)^I.i(C);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],C=0;C<v;C++)y[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(y,I.h)}function X(I,v){var y=v>>5;v%=32;for(var C=I.g.length-y,S=[],E=0;E<C;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pae=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,vd=o}).apply(typeof xH<"u"?xH:typeof self<"u"?self:typeof window<"u"?window:{});var FC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gae,Mv,mae,UI,cL,_ae,yae,vae;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof FC=="object"&&FC];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(c,f){if(f)e:{var g=s;c=c.split(".");for(var _=0;_<c.length-1;_++){var N=c[_];if(!(N in g))break e;g=g[N]}c=c[c.length-1],_=g[c],f=f(_),f!=_&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,_=!1,N={next:function(){if(!_&&g<c.length){var O=g++;return{value:f(O,c[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,_),c.apply(f,N)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function w(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(_,N,O){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[N].apply(_,z)}}function k(c){const f=c.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=c[_];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(l(_)){const N=c.length||0,O=_.length||0;c.length=N+O;for(let z=0;z<O;z++)c[N+z]=_[z]}else c.push(_)}}class D{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,f,g){for(const _ in c)f.call(g,c[_],_,c)}function I(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,f){let g,_;for(let N=1;N<arguments.length;N++){_=arguments[N];for(g in _)c[g]=_[g];for(let O=0;O<y.length;O++)g=y[O],Object.prototype.hasOwnProperty.call(_,g)&&(c[g]=_[g])}}function S(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function E(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Ht;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new D(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,we=!1,Ht=new K,It=()=>{const c=a.Promise.resolve(void 0);ce=()=>{c.then(xt)}};var xt=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(g){E(g)}var f=ne;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}we=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var yn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function Kt(c,f){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(H){e:{try{q(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ct[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Kt.aa.h.call(this)}}w(Kt,Ee);var ct={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(c,f,g,_,N){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=N,this.key=++Y,this.da=this.fa=!1}function ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function A(c){this.src=c,this.g={},this.h=0}A.prototype.add=function(c,f,g,_,N){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var z=R(c,f,_,N);return-1<z?(f=c[z],g||(f.fa=!1)):(f=new G(f,this.src,O,!!_,N),f.fa=g,c.push(f)),f};function T(c,f){var g=f.type;if(g in c.g){var _=c.g[g],N=Array.prototype.indexOf.call(_,f,void 0),O;(O=0<=N)&&Array.prototype.splice.call(_,N,1),O&&(ee(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function R(c,f,g,_){for(var N=0;N<c.length;++N){var O=c[N];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==_)return N}return-1}var x="closure_lm_"+(1e6*Math.random()|0),L={};function U(c,f,g,_,N){if(Array.isArray(f)){for(var O=0;O<f.length;O++)U(c,f[O],g,_,N);return null}return g=ie(g),c&&c[F]?c.K(f,g,u(_)?!!_.capture:!1,N):j(c,f,g,!1,_,N)}function j(c,f,g,_,N,O){if(!f)throw Error("Invalid event type");var z=u(N)?!!N.capture:!!N,ye=Z(c);if(ye||(c[x]=ye=new A(c)),g=ye.add(f,g,_,z,O),g.proxy)return g;if(_=W(),g.proxy=_,_.src=c,_.listener=g,c.addEventListener)yn||(N=z),N===void 0&&(N=!1),c.addEventListener(f.toString(),_,N);else if(c.attachEvent)c.attachEvent(Q(f.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function c(g){return f.call(c.src,c.listener,g)}const f=J;return c}function $(c,f,g,_,N){if(Array.isArray(f))for(var O=0;O<f.length;O++)$(c,f[O],g,_,N);else _=u(_)?!!_.capture:!!_,g=ie(g),c&&c[F]?(c=c.i,f=String(f).toString(),f in c.g&&(O=c.g[f],g=R(O,g,_,N),-1<g&&(ee(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete c.g[f],c.h--)))):c&&(c=Z(c))&&(f=c.g[f.toString()],c=-1,f&&(c=R(f,g,_,N)),(g=-1<c?f[c]:null)&&B(g))}function B(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[F])T(f.i,c);else{var g=c.type,_=c.proxy;f.removeEventListener?f.removeEventListener(g,_,c.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(T(g,c),g.h==0&&(g.src=null,f[x]=null)):ee(c)}}}function Q(c){return c in L?L[c]:L[c]="on"+c}function J(c,f){if(c.da)c=!0;else{f=new Kt(f,this);var g=c.listener,_=c.ha||c.src;c.fa&&B(c),c=g.call(_,f)}return c}function Z(c){return c=c[x],c instanceof A?c:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(c){return typeof c=="function"?c:(c[te]||(c[te]=function(f){return c.handleEvent(f)}),c[te])}function re(){ke.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,ke),re.prototype[F]=!0,re.prototype.removeEventListener=function(c,f,g,_){$(this,c,f,g,_)};function se(c,f){var g,_=c.F;if(_)for(g=[];_;_=_.F)g.push(_);if(c=c.M,_=f.type||f,typeof f=="string")f=new Ee(f,c);else if(f instanceof Ee)f.target=f.target||c;else{var N=f;f=new Ee(_,c),C(f,N)}if(N=!0,g)for(var O=g.length-1;0<=O;O--){var z=f.g=g[O];N=be(z,_,!0,f)&&N}if(z=f.g=c,N=be(z,_,!0,f)&&N,N=be(z,_,!1,f)&&N,g)for(O=0;O<g.length;O++)z=f.g=g[O],N=be(z,_,!1,f)&&N}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],_=0;_<g.length;_++)ee(g[_]);delete c.g[f],c.h--}}this.F=null},re.prototype.K=function(c,f,g,_){return this.i.add(String(c),f,!1,g,_)},re.prototype.L=function(c,f,g,_){return this.i.add(String(c),f,!0,g,_)};function be(c,f,g,_){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,O=0;O<f.length;++O){var z=f[O];if(z&&!z.da&&z.capture==g){var ye=z.listener,Le=z.ha||z.src;z.fa&&T(c.i,z),N=ye.call(Le,_)!==!1&&N}}return N&&!_.defaultPrevented}function De(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function rt(c){c.g=De(()=>{c.g=null,c.i&&(c.i=!1,rt(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class yt extends ke{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(c){ke.call(this),this.h=c,this.g={}}w(mt,ke);var us=[];function _t(c){X(c.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},c),c.g={}}mt.prototype.N=function(){mt.aa.N.call(this),_t(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=a.JSON.stringify,Wn=a.JSON.parse,Ri=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ai(){}Ai.prototype.h=null;function Tu(c){return c.h||(c.h=c.i())}function Cu(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $o(){Ee.call(this,"d")}w($o,Ee);function zo(){Ee.call(this,"c")}w(zo,Ee);var qn={},Iu=null;function Pi(){return Iu=Iu||new re}qn.La="serverreachability";function Su(c){Ee.call(this,qn.La,c)}w(Su,Ee);function ar(c){const f=Pi();se(f,new Su(f))}qn.STAT_EVENT="statevent";function ku(c,f){Ee.call(this,qn.STAT_EVENT,c),this.stat=f}w(ku,Ee);function Xe(c){const f=Pi();se(f,new ku(f,c))}qn.Ma="timingevent";function Ru(c,f){Ee.call(this,qn.Ma,c),this.size=f}w(Ru,Ee);function cr(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function lr(){this.g=!0}lr.prototype.xa=function(){this.g=!1};function by(c,f,g,_,N,O){c.info(function(){if(c.g)if(O)for(var z="",ye=O.split("&"),Le=0;Le<ye.length;Le++){var pe=ye[Le].split("=");if(1<pe.length){var Ue=pe[0];pe=pe[1];var nt=Ue.split("_");z=2<=nt.length&&nt[1]=="type"?z+(Ue+"="+pe+"&"):z+(Ue+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function Ey(c,f,g,_,N,O,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+N+"]: "+f+`
`+g+`
`+O+" "+z})}function hs(c,f,g,_){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+Cy(c,g)+(_?" "+_:"")})}function Ty(c,f){c.info(function(){return"TIMEOUT: "+f})}lr.prototype.info=function(){};function Cy(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var _=g[c];if(!(2>_.length)){var N=_[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Ye(g)}catch{return f}}var Ni={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ho;function xi(){}w(xi,Ai),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},Ho=new xi;function vn(c,f,g,_){this.j=c,this.i=f,this.l=g,this.R=_||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var Nu={},Wo={};function Ko(c,f,g){c.L=1,c.v=Mi(an(f)),c.m=g,c.P=!0,xu(c,null)}function xu(c,f){c.F=Date.now(),Oi(c),c.A=an(c.v);var g=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),Wu(g.i,"t",_),c.C=0,g=c.j.J,c.h=new Pu,c.g=uh(c.j,g?f:null,!c.m),0<c.O&&(c.M=new yt(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,_=c.ca;var N="readystatechange";Array.isArray(N)||(N&&(us[0]=N.toString()),N=us);for(var O=0;O<N.length;O++){var z=U(g,N[O],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),ar(),by(c.i,c.u,c.A,c.l,c.R,c.m)}vn.prototype.ca=function(c){c=c.target;const f=this.M;f&&cn(c)==3?f.j():this.Y(c)},vn.prototype.Y=function(c){try{if(c==this.g)e:{const nt=cn(this.g);var f=this.g.Ba();const ps=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||nt!=4||f==7||(f==8||0>=ps?ar(3):ar(2)),Go(this);var g=this.g.Z();this.X=g;t:if(Ou(this)){var _=Zu(this.g);c="";var N=_.length,O=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),ur(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,c+=this.h.i.decode(_[f],{stream:!(O&&f==N-1)});_.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,Ey(this.i,this.u,this.A,this.l,this.R,nt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Le=this.g;if((ye=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ye)){var pe=ye;break t}}pe=null}if(g=pe)hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,g);else{this.o=!1,this.s=3,Xe(12),jn(this),ur(this);break e}}if(this.P){g=!0;let Ut;for(;!this.J&&this.C<z.length;)if(Ut=Iy(this,z),Ut==Wo){nt==4&&(this.s=4,Xe(14),g=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Nu){this.s=4,Xe(15),hs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else hs(this.i,this.l,Ut,null),Qo(this,Ut);if(Ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||z.length!=0||this.h.h||(this.s=1,Xe(16),g=!1),this.o=this.o&&g,!g)hs(this.i,this.l,z,"[Invalid Chunked Response]"),jn(this),ur(this);else if(0<z.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ta(Ue),Ue.M=!0,Xe(11))}}else hs(this.i,this.l,z,null),Qo(this,z);nt==4&&jn(this),this.o&&!this.J&&(nt==4?oh(this.j,this):(this.o=!1,Oi(this)))}else By(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),jn(this),ur(this)}}}catch{}finally{}};function Ou(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Iy(c,f){var g=c.C,_=f.indexOf(`
`,g);return _==-1?Wo:(g=Number(f.substring(g,_)),isNaN(g)?Nu:(_+=1,_+g>f.length?Wo:(f=f.slice(_,_+g),c.C=_+g,f)))}vn.prototype.cancel=function(){this.J=!0,jn(this)};function Oi(c){c.S=Date.now()+c.I,Du(c,c.I)}function Du(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=cr(p(c.ba,c),f)}function Go(c){c.B&&(a.clearTimeout(c.B),c.B=null)}vn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ty(this.i,this.A),this.L!=2&&(ar(),Xe(17)),jn(this),this.s=2,ur(this)):Du(this,this.S-c)};function ur(c){c.j.G==0||c.J||oh(c.j,c)}function jn(c){Go(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,_t(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Qo(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||Yo(g.h,c))){if(!c.K&&Yo(g.h,c)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var N=_;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Bi(g),qi(g);else break e;ea(g),Xe(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=cr(p(g.Za,g),6e3));if(1>=Fu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else $n(g,11)}else if((c.K||g.g==c)&&Bi(g),!M(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let pe=N[f];if(g.T=pe[0],pe=pe[1],g.G==2)if(pe[0]=="c"){g.K=pe[1],g.ia=pe[2];const Ue=pe[3];Ue!=null&&(g.la=Ue,g.j.info("VER="+g.la));const nt=pe[4];nt!=null&&(g.Aa=nt,g.j.info("SVER="+g.Aa));const ps=pe[5];ps!=null&&typeof ps=="number"&&0<ps&&(_=1.5*ps,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const Ut=c.g;if(Ut){const zi=Ut.g?Ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zi){var O=_.h;O.g||zi.indexOf("spdy")==-1&&zi.indexOf("quic")==-1&&zi.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Xo(O,O.h),O.h=null))}if(_.D){const na=Ut.g?Ut.g.getResponseHeader("X-HTTP-Session-Id"):null;na&&(_.ya=na,ve(_.I,_.D,na))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=c;if(_.qa=lh(_,_.J?_.ia:null,_.W),z.K){Vu(_.h,z);var ye=z,Le=_.L;Le&&(ye.I=Le),ye.B&&(Go(ye),Oi(ye)),_.g=z}else rh(_);0<g.i.length&&ji(g)}else pe[0]!="stop"&&pe[0]!="close"||$n(g,7);else g.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?$n(g,7):Zo(g):pe[0]!="noop"&&g.l&&g.l.ta(pe),g.v=0)}}ar(4)}catch{}}var Sy=class{constructor(c,f){this.g=c,this.map=f}};function Lu(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fu(c){return c.h?1:c.g?c.g.size:0}function Yo(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Xo(c,f){c.g?c.g.add(f):c.h=f}function Vu(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Lu.prototype.cancel=function(){if(this.i=Uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Uu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return k(c.i)}function ky(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,_=0;_<g;_++)f.push(c[_]);return f}f=[],g=0;for(_ in c)f[g++]=c[_];return f}function Ry(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const _ in c)f[g++]=_;return f}}}function qu(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=Ry(c),_=ky(c),N=_.length,O=0;O<N;O++)f.call(void 0,_[O],g&&g[O],c)}var ju=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ay(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var _=c[g].indexOf("="),N=null;if(0<=_){var O=c[g].substring(0,_);N=c[g].substring(_+1)}else O=c[g];f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Bn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bn){this.h=c.h,Di(this,c.j),this.o=c.o,this.g=c.g,Li(this,c.s),this.l=c.l;var f=c.i,g=new fr;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Bu(this,g),this.m=c.m}else c&&(f=String(c).match(ju))?(this.h=!1,Di(this,f[1]||"",!0),this.o=hr(f[2]||""),this.g=hr(f[3]||"",!0),Li(this,f[4]),this.l=hr(f[5]||"",!0),Bu(this,f[6]||"",!0),this.m=hr(f[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}Bn.prototype.toString=function(){var c=[],f=this.j;f&&c.push(dr(f,$u,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(dr(f,$u,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(dr(g,g.charAt(0)=="/"?xy:Ny,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",dr(g,Dy)),c.join("")};function an(c){return new Bn(c)}function Di(c,f,g){c.j=g?hr(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Li(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Bu(c,f,g){f instanceof fr?(c.i=f,Ly(c.i,c.h)):(g||(f=dr(f,Oy)),c.i=new fr(f,c.h))}function ve(c,f,g){c.i.set(f,g)}function Mi(c){return ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function hr(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function dr(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,Py),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Py(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $u=/[#\/\?@]/g,Ny=/[#\?:]/g,xy=/[#\?]/g,Oy=/[#\?@]/g,Dy=/#/g;function fr(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function wn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ay(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=fr.prototype,t.add=function(c,f){wn(this),this.i=null,c=ds(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function zu(c,f){wn(c),f=ds(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Hu(c,f){return wn(c),f=ds(c,f),c.g.has(f)}t.forEach=function(c,f){wn(this),this.g.forEach(function(g,_){g.forEach(function(N){c.call(f,N,_,this)},this)},this)},t.na=function(){wn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const N=c[_];for(let O=0;O<N.length;O++)g.push(f[_])}return g},t.V=function(c){wn(this);let f=[];if(typeof c=="string")Hu(this,c)&&(f=f.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return wn(this),this.i=null,c=ds(this,c),Hu(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Wu(c,f,g){zu(c,f),0<g.length&&(c.i=null,c.g.set(ds(c,f),k(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var N=O;z[_]!==""&&(N+="="+encodeURIComponent(String(z[_]))),c.push(N)}}return this.i=c.join("&")};function ds(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Ly(c,f){f&&!c.j&&(wn(c),c.i=null,c.g.forEach(function(g,_){var N=_.toLowerCase();_!=N&&(zu(this,_),Wu(this,N,g))},c)),c.j=f}function My(c,f){const g=new lr;if(a.Image){const _=new Image;_.onload=m(bn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(bn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(bn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(bn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else f(!1)}function Fy(c,f){const g=new lr,_=new AbortController,N=setTimeout(()=>{_.abort(),bn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:_.signal}).then(O=>{clearTimeout(N),O.ok?bn(g,"TestPingServer: ok",!0,f):bn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),bn(g,"TestPingServer: error",!1,f)})}function bn(c,f,g,_,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),_(g)}catch{}}function Vy(){this.g=new Ri}function Uy(c,f,g){const _=g||"";try{qu(c,function(N,O){let z=N;u(N)&&(z=Ye(N)),f.push(_+O+"="+encodeURIComponent(z))})}catch(N){throw f.push(_+"type="+encodeURIComponent("_badmap")),N}}function Fi(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Fi,Ai),Fi.prototype.g=function(){return new Vi(this.l,this.j)},Fi.prototype.i=function(c){return function(){return c}}({});function Vi(c,f){re.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Vi,re),t=Vi.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,gr(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ku(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ku(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?pr(this):gr(this),this.readyState==3&&Ku(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,pr(this))},t.Qa=function(c){this.g&&(this.response=c,pr(this))},t.ga=function(){this.g&&pr(this)};function pr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,gr(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function gr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Gu(c){let f="";return X(c,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Jo(c,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=Gu(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):ve(c,f,g))}function Te(c){re.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Te,re);var qy=/^https?$/i,jy=["POST","PUT"];t=Te.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ho.g(),this.v=this.o?Tu(this.o):Tu(Ho),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(O){Qu(this,O);return}if(c=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var N in _)g.set(N,_[N]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())g.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),N=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jy,f,void 0))||_||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ju(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){Qu(this,O)}};function Qu(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Yu(c),Ui(c)}function Yu(c){c.A||(c.A=!0,se(c,"complete"),se(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,se(this,"complete"),se(this,"abort"),Ui(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xu(this):this.bb())},t.bb=function(){Xu(this)};function Xu(c){if(c.h&&typeof o<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)De(c.Ea,0,c);else if(se(c,"readystatechange"),cn(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var N=String(c.D).match(ju)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),_=!qy.test(N?N.toLowerCase():"")}g=_}if(g)se(c,"complete"),se(c,"success");else{c.m=6;try{var O=2<cn(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",Yu(c)}}finally{Ui(c)}}}}function Ui(c,f){if(c.g){Ju(c);const g=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||se(c,"ready");try{g.onreadystatechange=_}catch{}}}function Ju(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Wn(f)}};function Zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function By(c){const f={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(M(c[_]))continue;var g=S(c[_]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[N]||[];f[N]=O,O.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function eh(c){this.Aa=0,this.i=[],this.j=new lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mr("baseRetryDelayMs",5e3,c),this.cb=mr("retryDelaySeedMs",1e4,c),this.Wa=mr("forwardChannelMaxRetries",2,c),this.wa=mr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lu(c&&c.concurrentRequestLimit),this.Da=new Vy,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=eh.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,_){Xe(0),this.W=c,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=lh(this,null,this.W),ji(this)};function Zo(c){if(th(c),c.G==3){var f=c.U++,g=an(c.I);if(ve(g,"SID",c.K),ve(g,"RID",f),ve(g,"TYPE","terminate"),_r(c,g),f=new vn(c,c.j,f),f.L=2,f.v=Mi(an(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=uh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Oi(f)}ch(c)}function qi(c){c.g&&(ta(c),c.g.cancel(),c.g=null)}function th(c){qi(c),c.u&&(a.clearTimeout(c.u),c.u=null),Bi(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ji(c){if(!Mu(c.h)&&!c.s){c.s=!0;var f=c.Ga;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.B=0}}function $y(c,f){return Fu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=cr(p(c.Ga,c,f),ah(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const N=new vn(this,this.j,c);let O=this.o;if(this.S&&(O?(O=v(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=sh(this,N,f),g=an(this.I),ve(g,"RID",c),ve(g,"CVER",22),this.D&&ve(g,"X-HTTP-Session-Id",this.D),_r(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(Gu(O)))+"&"+f:this.m&&Jo(g,this.m,O)),Xo(this.h,N),this.Ua&&ve(g,"TYPE","init"),this.P?(ve(g,"$req",f),ve(g,"SID","null"),N.T=!0,Ko(N,g,null)):Ko(N,g,f),this.G=2}}else this.G==3&&(c?nh(this,c):this.i.length==0||Mu(this.h)||nh(this))};function nh(c,f){var g;f?g=f.l:g=c.U++;const _=an(c.I);ve(_,"SID",c.K),ve(_,"RID",g),ve(_,"AID",c.T),_r(c,_),c.m&&c.o&&Jo(_,c.m,c.o),g=new vn(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=sh(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xo(c.h,g),Ko(g,_,f)}function _r(c,f){c.H&&X(c.H,function(g,_){ve(f,_,g)}),c.l&&qu({},function(g,_){ve(f,_,g)})}function sh(c,f,g){g=Math.min(c.i.length,g);var _=c.l?p(c.l.Na,c.l,c):null;e:{var N=c.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ye=!0;for(let Le=0;Le<g;Le++){let pe=N[Le].g;const Ue=N[Le].map;if(pe-=O,0>pe)O=Math.max(0,N[Le].g-100),ye=!1;else try{Uy(Ue,z,"req"+pe+"_")}catch{_&&_(Ue)}}if(ye){_=z.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,_}function rh(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ce||It(),we||(ce(),we=!0),Ht.add(f,c),c.v=0}}function ea(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=cr(p(c.Fa,c),ah(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=cr(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xe(10),qi(this),ih(this))};function ta(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ih(c){c.g=new vn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=an(c.qa);ve(f,"RID","rpc"),ve(f,"SID",c.K),ve(f,"AID",c.T),ve(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&ve(f,"TO",c.ja),ve(f,"TYPE","xmlhttp"),_r(c,f),c.m&&c.o&&Jo(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Mi(an(f)),g.m=null,g.P=!0,xu(g,c)}t.Za=function(){this.C!=null&&(this.C=null,qi(this),ea(this),Xe(19))};function Bi(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function oh(c,f){var g=null;if(c.g==f){Bi(c),ta(c),c.g=null;var _=2}else if(Yo(c.h,f))g=f.D,Vu(c.h,f),_=1;else return;if(c.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=c.B;_=Pi(),se(_,new Ru(_,g)),ji(c)}else rh(c);else if(N=f.s,N==3||N==0&&0<f.X||!(_==1&&$y(c,f)||_==2&&ea(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),N){case 1:$n(c,5);break;case 4:$n(c,10);break;case 3:$n(c,6);break;default:$n(c,2)}}}function ah(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function $n(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),_=c.Xa;const N=!_;_=new Bn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Di(_,"https"),Mi(_),N?My(_.toString(),g):Fy(_.toString(),g)}else Xe(2);c.G=0,c.l&&c.l.sa(f),ch(c),th(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Xe(2)):(this.j.info("Failed to ping google.com"),Xe(1))};function ch(c){if(c.G=0,c.ka=[],c.l){const f=Uu(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function lh(c,f,g){var _=g instanceof Bn?an(g):new Bn(g);if(_.g!="")f&&(_.g=f+"."+_.g),Li(_,_.s);else{var N=a.location;_=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var O=new Bn(null);_&&Di(O,_),f&&(O.g=f),N&&Li(O,N),g&&(O.l=g),_=O}return g=c.D,f=c.ya,g&&f&&ve(_,g,f),ve(_,"VER",c.la),_r(c,_),_}function uh(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Te(new Fi({eb:g})):new Te(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}t=hh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $i(){}$i.prototype.g=function(c,f){return new gt(c,f)};function gt(c,f){re.call(this),this.g=new eh(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!M(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new fs(this)}w(gt,re),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Zo(this.g)},gt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Ye(c),c=g);f.i.push(new Sy(f.Ya++,c)),f.G==3&&ji(f)},gt.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,gt.aa.N.call(this)};function dh(c){$o.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}w(dh,$o);function fh(){zo.call(this),this.status=1}w(fh,zo);function fs(c){this.g=c}w(fs,hh),fs.prototype.ua=function(){se(this.g,"a")},fs.prototype.ta=function(c){se(this.g,new dh(c))},fs.prototype.sa=function(c){se(this.g,new fh)},fs.prototype.ra=function(){se(this.g,"b")},$i.prototype.createWebChannel=$i.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,vae=function(){return new $i},yae=function(){return Pi()},_ae=qn,cL={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ni.NO_ERROR=0,Ni.TIMEOUT=8,Ni.HTTP_ERROR=6,UI=Ni,Au.COMPLETE="complete",mae=Au,Cu.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",re.prototype.listen=re.prototype.K,Mv=Cu,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,gae=Te}).apply(typeof FC<"u"?FC:typeof self<"u"?self:typeof window<"u"?window:{});const OH="@firebase/firestore",DH="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let py="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=new w1("@firebase/firestore");function cm(){return rg.logLevel}function Se(t,...e){if(rg.logLevel<=Rt.DEBUG){const n=e.map(D4);rg.debug(`Firestore (${py}): ${t}`,...n)}}function uu(t,...e){if(rg.logLevel<=Rt.ERROR){const n=e.map(D4);rg.error(`Firestore (${py}): ${t}`,...n)}}function N_(t,...e){if(rg.logLevel<=Rt.WARN){const n=e.map(D4);rg.warn(`Firestore (${py}): ${t}`,...n)}}function D4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,wae(t,s,n)}function wae(t,e,n){let s=`FIRESTORE (${py}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw uu(s),new Error(s)}function on(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||wae(e,r,s)}function pt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends sl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H$e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qr.UNAUTHENTICATED))}shutdown(){}}class W$e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K$e{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){on(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new wd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wd,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wd)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(on(typeof s.accessToken=="string",31837,{l:s}),new bae(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return on(e===null||typeof e=="string",2055,{h:e}),new qr(e)}}class G$e{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q$e{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new G$e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LH{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y$e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,uo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){on(this.o===void 0,3512);const s=i=>{i.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new LH(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(on(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LH(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=X$e(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Lt(t,e){return t<e?-1:t>e?1:0}function lL(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return ex(r)===ex(i)?Lt(r,i):ex(r)?1:-1}return Lt(t.length,e.length)}const J$e=55296,Z$e=57343;function ex(t){const e=t.charCodeAt(0);return e>=J$e&&e<=Z$e}function x_(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH="__name__";class uc{constructor(e,n,s){n===void 0?n=0:n>e.length&&He(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&He(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return uc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof uc?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=uc.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Lt(e.length,n.length)}static compareSegments(e,n){const s=uc.isNumericId(e),r=uc.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?uc.extractNumericId(e).compare(uc.extractNumericId(n)):lL(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vd.fromString(e.substring(4,e.length-2))}}class Hn extends uc{construct(e,n,s){return new Hn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Hn(n)}static emptyPath(){return new Hn([])}}const e5e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends uc{construct(e,n,s){return new Tr(e,n,s)}static isValidIdentifier(e){return e5e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MH}static keyField(){return new Tr([MH])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Pe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Pe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Pe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Pe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(n)}static emptyPath(){return new Tr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Hn.fromString(e))}static fromName(e){return new Ve(Hn.fromString(e).popFirst(5))}static empty(){return new Ve(Hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Hn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Hn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Hn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5e(t,e,n){if(!n)throw new Pe(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n5e(t,e,n,s){if(e===!0&&s===!0)throw new Pe(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FH(t){if(!Ve.isDocumentKey(t))throw new Pe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Eae(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function M4(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He(12329,{type:typeof t})}function Ua(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=M4(t);throw new Pe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){const n={typeString:t};return e&&(n.value=e),n}function jT(t,e){if(!Eae(t))throw new Pe(he.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Pe(he.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=-62135596800,UH=1e6;class Dn{static now(){return Dn.fromMillis(Date.now())}static fromDate(e){return Dn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*UH);return new Dn(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<VH)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UH}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jT(e,Dn._jsonSchema))return new Dn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VH;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dn._jsonSchemaVersion="firestore/timestamp/1.0",Dn._jsonSchema={type:bs("string",Dn._jsonSchemaVersion),seconds:bs("number"),nanoseconds:bs("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static fromTimestamp(e){return new at(e)}static min(){return new at(new Dn(0,0))}static max(){return new at(new Dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=-1;function s5e(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=at.fromTimestamp(s===1e9?new Dn(n+1,0):new Dn(n,s));return new rf(r,Ve.empty(),e)}function r5e(t){return new rf(t.readTime,t.key,TE)}class rf{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new rf(at.min(),Ve.empty(),TE)}static max(){return new rf(at.max(),Ve.empty(),TE)}}function i5e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ve.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a5e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==o5e)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,s)=>{n(e)})}static reject(e){return new ae((n,s)=>{s(e)})}static waitFor(e){return new ae((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=ae.resolve(!1);for(const s of e)n=n.next(r=>r?ae.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new ae((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new ae((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function c5e(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function my(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}I1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=-1;function S1(t){return t==null}function ck(t){return t===0&&1/t==-1/0}function l5e(t){return typeof t=="number"&&Number.isInteger(t)&&!ck(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tae="";function u5e(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qH(e)),e=h5e(t.get(n),e);return qH(e)}function h5e(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Tae:n+="";break;default:n+=i}}return n}function qH(t){return t+Tae+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sf(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cae(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=class uL{constructor(e,n){this.comparator=e,this.root=n||bd.EMPTY}insert(e,n){return new uL(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bd.BLACK,null,null))}remove(e){return new uL(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bd.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new VC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new VC(this.root,e,this.comparator,!1)}getReverseIterator(){return new VC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new VC(this.root,e,this.comparator,!0)}},VC=class{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bd=class dl{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??dl.RED,this.left=r??dl.EMPTY,this.right=i??dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new dl(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return dl.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}};bd.EMPTY=null,bd.RED=!0,bd.BLACK=!1;bd.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new bd(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.comparator=e,this.data=new Is(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new BH(this.data.getIterator())}getIteratorFrom(e){return new BH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zs(this.comparator);return n.data=e,n}}class BH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new vo([])}unionWith(e){let n=new zs(Tr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new vo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return x_(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iae extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Iae("Invalid base64 string: "+i):i}}(e);return new Rr(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const d5e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function of(t){if(on(!!t,39018),typeof t=="string"){let e=0;const n=d5e.exec(t);if(on(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ls(t.seconds),nanos:ls(t.nanos)}}function ls(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function af(t){return typeof t=="string"?Rr.fromBase64String(t):Rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sae="server_timestamp",kae="__type__",Rae="__previous_value__",Aae="__local_write_time__";function V4(t){return(t?.mapValue?.fields||{})[kae]?.stringValue===Sae}function k1(t){const e=t.mapValue.fields[Rae];return V4(e)?k1(e):e}function CE(t){const e=of(t.mapValue.fields[Aae].timestampValue);return new Dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5e{constructor(e,n,s,r,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const lk="(default)";class IE{constructor(e,n){this.projectId=e,this.database=n||lk}static empty(){return new IE("","")}get isDefaultDatabase(){return this.database===lk}isEqual(e){return e instanceof IE&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pae="__type__",p5e="__max__",UC={mapValue:{}},Nae="__vector__",uk="value";function cf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?V4(t)?4:m5e(t)?9007199254740991:g5e(t)?10:11:He(28295,{value:t})}function Qc(t,e){if(t===e)return!0;const n=cf(t);if(n!==cf(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return CE(t).isEqual(CE(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=of(r.timestampValue),a=of(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return af(r.bytesValue).isEqual(af(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return ls(r.geoPointValue.latitude)===ls(i.geoPointValue.latitude)&&ls(r.geoPointValue.longitude)===ls(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ls(r.integerValue)===ls(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=ls(r.doubleValue),a=ls(i.doubleValue);return o===a?ck(o)===ck(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return x_(t.arrayValue.values||[],e.arrayValue.values||[],Qc);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(jH(o)!==jH(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qc(o[l],a[l])))return!1;return!0}(t,e);default:return He(52216,{left:t})}}function SE(t,e){return(t.values||[]).find(n=>Qc(n,e))!==void 0}function O_(t,e){if(t===e)return 0;const n=cf(t),s=cf(e);if(n!==s)return Lt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ls(i.integerValue||i.doubleValue),l=ls(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return $H(t.timestampValue,e.timestampValue);case 4:return $H(CE(t),CE(e));case 5:return lL(t.stringValue,e.stringValue);case 6:return function(i,o){const a=af(i),l=af(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Lt(a[u],l[u]);if(h!==0)return h}return Lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Lt(ls(i.latitude),ls(o.latitude));return a!==0?a:Lt(ls(i.longitude),ls(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zH(t.arrayValue,e.arrayValue);case 10:return function(i,o){const a=i.fields||{},l=o.fields||{},u=a[uk]?.arrayValue,h=l[uk]?.arrayValue,d=Lt(u?.values?.length||0,h?.values?.length||0);return d!==0?d:zH(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===UC.mapValue&&o===UC.mapValue)return 0;if(i===UC.mapValue)return 1;if(o===UC.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=lL(l[d],h[d]);if(p!==0)return p;const m=O_(a[l[d]],u[h[d]]);if(m!==0)return m}return Lt(l.length,h.length)}(t.mapValue,e.mapValue);default:throw He(23264,{he:n})}}function $H(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=of(t),s=of(e),r=Lt(n.seconds,s.seconds);return r!==0?r:Lt(n.nanos,s.nanos)}function zH(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=O_(n[r],s[r]);if(i)return i}return Lt(n.length,s.length)}function D_(t){return hL(t)}function hL(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=of(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return af(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=hL(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${hL(n.fields[o])}`;return r+"}"}(t.mapValue):He(61005,{value:t})}function qI(t){switch(cf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=k1(t);return e?16+qI(e):16;case 5:return 2*t.stringValue.length;case 6:return af(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+qI(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Sf(s.fields,(i,o)=>{r+=i.length+qI(o)}),r}(t.mapValue);default:throw He(13486,{value:t})}}function dL(t){return!!t&&"integerValue"in t}function U4(t){return!!t&&"arrayValue"in t}function HH(t){return!!t&&"nullValue"in t}function WH(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jI(t){return!!t&&"mapValue"in t}function g5e(t){return(t?.mapValue?.fields||{})[Pae]?.stringValue===Nae}function Gw(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Sf(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Gw(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gw(t.arrayValue.values[n]);return e}return{...t}}function m5e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===p5e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.value=e}static empty(){return new Qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!jI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gw(n)}setAll(e){let n=Tr.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Gw(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());jI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qc(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];jI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Sf(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Qi(Gw(this.value))}}function xae(t){const e=[];return Sf(t.fields,(n,s)=>{const r=new Tr([n]);if(jI(s)){const i=xae(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new vo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Gr(e,0,at.min(),at.min(),at.min(),Qi.empty(),0)}static newFoundDocument(e,n,s,r){return new Gr(e,1,n,at.min(),s,r,0)}static newNoDocument(e,n){return new Gr(e,2,n,at.min(),at.min(),Qi.empty(),0)}static newUnknownDocument(e,n){return new Gr(e,3,n,at.min(),at.min(),Qi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.position=e,this.inclusive=n}}function KH(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Ve.comparator(Ve.fromName(o.referenceValue),n.key):s=O_(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function GH(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qc(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n="asc"){this.field=e,this.dir=n}}function _5e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{}class qs extends Oae{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new v5e(e,n,s):n==="array-contains"?new E5e(e,s):n==="in"?new T5e(e,s):n==="not-in"?new C5e(e,s):n==="array-contains-any"?new I5e(e,s):new qs(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new w5e(e,s):new b5e(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(O_(n,this.value)):n!==null&&cf(this.value)===cf(n)&&this.matchesComparison(O_(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yc extends Oae{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yc(e,n)}matches(e){return Dae(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Dae(t){return t.op==="and"}function Lae(t){return y5e(t)&&Dae(t)}function y5e(t){for(const e of t.filters)if(e instanceof Yc)return!1;return!0}function fL(t){if(t instanceof qs)return t.field.canonicalString()+t.op.toString()+D_(t.value);if(Lae(t))return t.filters.map(e=>fL(e)).join(",");{const e=t.filters.map(n=>fL(n)).join(",");return`${t.op}(${e})`}}function Mae(t,e){return t instanceof qs?function(s,r){return r instanceof qs&&s.op===r.op&&s.field.isEqual(r.field)&&Qc(s.value,r.value)}(t,e):t instanceof Yc?function(s,r){return r instanceof Yc&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&Mae(o,r.filters[a]),!0):!1}(t,e):void He(19439)}function Fae(t){return t instanceof qs?function(n){return`${n.field.canonicalString()} ${n.op} ${D_(n.value)}`}(t):t instanceof Yc?function(n){return n.op.toString()+" {"+n.getFilters().map(Fae).join(" ,")+"}"}(t):"Filter"}class v5e extends qs{constructor(e,n,s){super(e,n,s),this.key=Ve.fromName(s.referenceValue)}matches(e){const n=Ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class w5e extends qs{constructor(e,n){super(e,"in",n),this.keys=Vae("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class b5e extends qs{constructor(e,n){super(e,"not-in",n),this.keys=Vae("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vae(t,e){return(e.arrayValue?.values||[]).map(n=>Ve.fromName(n.referenceValue))}class E5e extends qs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return U4(n)&&SE(n.arrayValue,this.value)}}class T5e extends qs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&SE(this.value.arrayValue,n)}}class C5e extends qs{constructor(e,n){super(e,"not-in",n)}matches(e){if(SE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!SE(this.value.arrayValue,n)}}class I5e extends qs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!U4(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>SE(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5e{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function QH(t,e=null,n=[],s=[],r=null,i=null,o=null){return new S5e(t,e,n,s,r,i,o)}function q4(t){const e=pt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>fL(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),S1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>D_(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>D_(s)).join(",")),e.Te=n}return e.Te}function j4(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_5e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mae(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GH(t.startAt,e.startAt)&&GH(t.endAt,e.endAt)}function pL(t){return Ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function k5e(t,e,n,s,r,i,o,a){return new R1(t,e,n,s,r,i,o,a)}function A1(t){return new R1(t)}function YH(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function R5e(t){return t.collectionGroup!==null}function Qw(t){const e=pt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zs(Tr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new dk(i,s))}),n.has(Tr.keyField().canonicalString())||e.Ie.push(new dk(Tr.keyField(),s))}return e.Ie}function Lc(t){const e=pt(t);return e.Ee||(e.Ee=A5e(e,Qw(t))),e.Ee}function A5e(t,e){if(t.limitType==="F")return QH(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new dk(r.field,i)});const n=t.endAt?new hk(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new hk(t.startAt.position,t.startAt.inclusive):null;return QH(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function gL(t,e,n){return new R1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function P1(t,e){return j4(Lc(t),Lc(e))&&t.limitType===e.limitType}function Uae(t){return`${q4(Lc(t))}|lt:${t.limitType}`}function lm(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>Fae(r)).join(", ")}]`),S1(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>D_(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>D_(r)).join(",")),`Target(${s})`}(Lc(t))}; limitType=${t.limitType})`}function N1(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Ve.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Qw(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const u=KH(o,a,l);return o.inclusive?u<=0:u<0}(s.startAt,Qw(s),r)||s.endAt&&!function(o,a,l){const u=KH(o,a,l);return o.inclusive?u>=0:u>0}(s.endAt,Qw(s),r))}(t,e)}function P5e(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qae(t){return(e,n)=>{let s=!1;for(const r of Qw(t)){const i=N5e(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function N5e(t,e,n){const s=t.field.isKeyField()?Ve.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?O_(l,u):He(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return He(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Sf(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Cae(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5e=new Is(Ve.comparator);function hu(){return x5e}const jae=new Is(Ve.comparator);function Fv(...t){let e=jae;for(const n of t)e=e.insert(n.key,n);return e}function Bae(t){let e=jae;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function fp(){return Yw()}function $ae(){return Yw()}function Yw(){return new Cg(t=>t.toString(),(t,e)=>t.isEqual(e))}const O5e=new Is(Ve.comparator),D5e=new zs(Ve.comparator);function Vt(...t){let e=D5e;for(const n of t)e=e.add(n);return e}const L5e=new zs(Lt);function M5e(){return L5e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ck(e)?"-0":e}}function zae(t){return{integerValue:""+t}}function F5e(t,e){return l5e(e)?zae(e):B4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this._=void 0}}function V5e(t,e,n){return t instanceof kE?function(r,i){const o={fields:{[kae]:{stringValue:Sae},[Aae]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&V4(i)&&(i=k1(i)),i&&(o.fields[Rae]=i),{mapValue:o}}(n,e):t instanceof RE?Wae(t,e):t instanceof AE?Kae(t,e):function(r,i){const o=Hae(r,i),a=XH(o)+XH(r.Ae);return dL(o)&&dL(r.Ae)?zae(a):B4(r.serializer,a)}(t,e)}function U5e(t,e,n){return t instanceof RE?Wae(t,e):t instanceof AE?Kae(t,e):n}function Hae(t,e){return t instanceof fk?function(s){return dL(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class kE extends x1{}class RE extends x1{constructor(e){super(),this.elements=e}}function Wae(t,e){const n=Gae(e);for(const s of t.elements)n.some(r=>Qc(r,s))||n.push(s);return{arrayValue:{values:n}}}class AE extends x1{constructor(e){super(),this.elements=e}}function Kae(t,e){let n=Gae(e);for(const s of t.elements)n=n.filter(r=>!Qc(r,s));return{arrayValue:{values:n}}}class fk extends x1{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function XH(t){return ls(t.integerValue||t.doubleValue)}function Gae(t){return U4(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5e{constructor(e,n){this.field=e,this.transform=n}}function j5e(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof RE&&r instanceof RE||s instanceof AE&&r instanceof AE?x_(s.elements,r.elements,Qc):s instanceof fk&&r instanceof fk?Qc(s.Ae,r.Ae):s instanceof kE&&r instanceof kE}(t.transform,e.transform)}class B5e{constructor(e,n){this.version=e,this.transformResults=n}}class qa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qa}static exists(e){return new qa(void 0,e)}static updateTime(e){return new qa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function BI(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class O1{}function Qae(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $4(t.key,qa.none()):new BT(t.key,t.data,qa.none());{const n=t.data,s=Qi.empty();let r=new zs(Tr.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new kf(t.key,s,new vo(r.toArray()),qa.none())}}function $5e(t,e,n){t instanceof BT?function(r,i,o){const a=r.value.clone(),l=ZH(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof kf?function(r,i,o){if(!BI(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ZH(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Yae(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xw(t,e,n,s){return t instanceof BT?function(i,o,a,l){if(!BI(i.precondition,o))return a;const u=i.value.clone(),h=eW(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof kf?function(i,o,a,l){if(!BI(i.precondition,o))return a;const u=eW(i.fieldTransforms,l,o),h=o.data;return h.setAll(Yae(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,s):function(i,o,a){return BI(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function z5e(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Hae(s.transform,r||null);i!=null&&(n===null&&(n=Qi.empty()),n.set(s.field,i))}return n||null}function JH(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&x_(s,r,(i,o)=>j5e(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class BT extends O1{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kf extends O1{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Yae(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ZH(t,e,n){const s=new Map;on(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,U5e(o,a,n[r]))}return s}function eW(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,V5e(i,o,e))}return s}class $4 extends O1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H5e extends O1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5e{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&$5e(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Xw(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Xw(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=$ae();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Qae(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(at.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vt())}isEqual(e){return this.batchId===e.batchId&&x_(this.mutations,e.mutations,(n,s)=>JH(n,s))&&x_(this.baseMutations,e.baseMutations,(n,s)=>JH(n,s))}}class z4{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){on(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return O5e}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new z4(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5e{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5e{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _s,$t;function Q5e(t){switch(t){case he.OK:return He(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return He(15467,{code:t})}}function Xae(t){if(t===void 0)return uu("GRPC error has no .code"),he.UNKNOWN;switch(t){case _s.OK:return he.OK;case _s.CANCELLED:return he.CANCELLED;case _s.UNKNOWN:return he.UNKNOWN;case _s.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case _s.INTERNAL:return he.INTERNAL;case _s.UNAVAILABLE:return he.UNAVAILABLE;case _s.UNAUTHENTICATED:return he.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case _s.NOT_FOUND:return he.NOT_FOUND;case _s.ALREADY_EXISTS:return he.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return he.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case _s.ABORTED:return he.ABORTED;case _s.OUT_OF_RANGE:return he.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return he.UNIMPLEMENTED;case _s.DATA_LOSS:return he.DATA_LOSS;default:return He(39323,{code:t})}}($t=_s||(_s={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5e(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5e=new vd([4294967295,4294967295],0);function tW(t){const e=Y5e().encode(t),n=new pae;return n.update(e),new Uint8Array(n.digest())}function nW(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vd([n,s],0),new vd([r,i],0)]}class H4{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Vv(`Invalid padding: ${n}`);if(s<0)throw new Vv(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vv(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Vv(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vd.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(vd.fromNumber(s)));return r.compare(X5e)===1&&(r=new vd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tW(e),[s,r]=nW(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new H4(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=tW(e),[s,r]=nW(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Vv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,$T.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new D1(at.min(),r,new Is(Lt),hu(),Vt())}}class $T{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $T(s,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Jae{constructor(e,n){this.targetId=e,this.Ce=n}}class Zae{constructor(e,n,s=Rr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class sW{constructor(){this.ve=0,this.Fe=rW(),this.Me=Rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),n=Vt(),s=Vt();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:He(38017,{changeType:i})}}),new $T(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=rW()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,on(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J5e{constructor(e){this.Ge=e,this.ze=new Map,this.je=hu(),this.Je=qC(),this.He=qC(),this.Ye=new Is(Lt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:He(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(pL(i))if(s===0){const o=new Ve(i.path);this.et(n,o,Gr.newNoDocument(o,at.min()))}else on(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=af(s).toUint8Array()}catch(l){if(l instanceof Iae)return N_("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new H4(o,r,i)}catch(l){return N_(l instanceof Vv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&pL(a.target)){const l=new Ve(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Gr.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=Vt();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new D1(e,n,this.Ye,this.je,s);return this.je=hu(),this.Je=qC(),this.He=qC(),this.Ye=new Is(Lt),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sW,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new zs(Lt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new zs(Lt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sW),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qC(){return new Is(Ve.comparator)}function rW(){return new Is(Ve.comparator)}const Z5e={asc:"ASCENDING",desc:"DESCENDING"},eze={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tze={and:"AND",or:"OR"};class nze{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mL(t,e){return t.useProto3Json||S1(e)?e:{value:e}}function pk(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ece(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sze(t,e){return pk(t,e.toTimestamp())}function Mc(t){return on(!!t,49232),at.fromTimestamp(function(n){const s=of(n);return new Dn(s.seconds,s.nanos)}(t))}function W4(t,e){return _L(t,e).canonicalString()}function _L(t,e){const n=function(r){return new Hn(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tce(t){const e=Hn.fromString(t);return on(oce(e),10190,{key:e.toString()}),e}function yL(t,e){return W4(t.databaseId,e.path)}function tx(t,e){const n=tce(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ve(sce(n))}function nce(t,e){return W4(t.databaseId,e)}function rze(t){const e=tce(t);return e.length===4?Hn.emptyPath():sce(e)}function vL(t){return new Hn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sce(t){return on(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iW(t,e,n){return{name:yL(t,e),fields:n.value.mapValue.fields}}function ize(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:He(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(on(h===void 0||typeof h=="string",58123),Rr.fromBase64String(h||"")):(on(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Rr.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?he.UNKNOWN:Xae(u.code);return new Pe(h,u.message||"")}(o);n=new Zae(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=tx(t,s.document.name),i=Mc(s.document.updateTime),o=s.document.createTime?Mc(s.document.createTime):at.min(),a=new Qi({mapValue:{fields:s.document.fields}}),l=Gr.newFoundDocument(r,i,o,a),u=s.targetIds||[],h=s.removedTargetIds||[];n=new $I(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=tx(t,s.document),i=s.readTime?Mc(s.readTime):at.min(),o=Gr.newNoDocument(r,i),a=s.removedTargetIds||[];n=new $I([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=tx(t,s.document),i=s.removedTargetIds||[];n=new $I([],i,r,null)}else{if(!("filter"in e))return He(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new G5e(r,i),a=s.targetId;n=new Jae(a,o)}}return n}function oze(t,e){let n;if(e instanceof BT)n={update:iW(t,e.key,e.value)};else if(e instanceof $4)n={delete:yL(t,e.key)};else if(e instanceof kf)n={update:iW(t,e.key,e.data),updateMask:gze(e.fieldMask)};else{if(!(e instanceof H5e))return He(16599,{Vt:e.type});n={verify:yL(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof kE)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof RE)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof AE)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fk)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw He(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:sze(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:He(27497)}(t,e.precondition)),n}function aze(t,e){return t&&t.length>0?(on(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Mc(r.updateTime):Mc(i);return o.isEqual(at.min())&&(o=Mc(i)),new B5e(o,r.transformResults||[])}(n,e))):[]}function cze(t,e){return{documents:[nce(t,e.path)]}}function lze(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=nce(t,r);const i=function(u){if(u.length!==0)return ice(Yc.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:um(p.field),direction:dze(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mL(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function uze(t){let e=rze(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){on(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=rce(d);return p instanceof Yc&&Lae(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(w){return new dk(hm(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,S1(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new hk(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const p=!d.before,m=d.values||[];return new hk(m,p)}(n.endAt)),k5e(e,r,o,i,a,"F",l,u)}function hze(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rce(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=hm(n.unaryFilter.field);return qs.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=hm(n.unaryFilter.field);return qs.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hm(n.unaryFilter.field);return qs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hm(n.unaryFilter.field);return qs.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}}(t):t.fieldFilter!==void 0?function(n){return qs.create(hm(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yc.create(n.compositeFilter.filters.map(s=>rce(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return He(1026)}}(n.compositeFilter.op))}(t):He(30097,{filter:t})}function dze(t){return Z5e[t]}function fze(t){return eze[t]}function pze(t){return tze[t]}function um(t){return{fieldPath:t.canonicalString()}}function hm(t){return Tr.fromServerFormat(t.fieldPath)}function ice(t){return t instanceof qs?function(n){if(n.op==="=="){if(WH(n.value))return{unaryFilter:{field:um(n.field),op:"IS_NAN"}};if(HH(n.value))return{unaryFilter:{field:um(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WH(n.value))return{unaryFilter:{field:um(n.field),op:"IS_NOT_NAN"}};if(HH(n.value))return{unaryFilter:{field:um(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:um(n.field),op:fze(n.op),value:n.value}}}(t):t instanceof Yc?function(n){const s=n.getFilters().map(r=>ice(r));return s.length===1?s[0]:{compositeFilter:{op:pze(n.op),filters:s}}}(t):He(54877,{filter:t})}function gze(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oce(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,s,r,i=at.min(),o=at.min(),a=Rr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mze{constructor(e){this.yt=e}}function _ze(t){const e=uze({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gL(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yze{constructor(){this.Cn=new vze}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(rf.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(rf.min())}updateCollectionGroup(e,n,s){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class vze{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new zs(Hn.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new zs(Hn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ace=41943040;class Ki{static withCacheSize(e){return new Ki(e,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ki.DEFAULT_COLLECTION_PERCENTILE=10,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ki.DEFAULT=new Ki(ace,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ki.DISABLED=new Ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new L_(0)}static cr(){return new L_(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW="LruGarbageCollector",wze=1048576;function cW([t,e],[n,s]){const r=Lt(t,n);return r===0?Lt(e,s):r}class bze{constructor(e){this.Ir=e,this.buffer=new zs(cW),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();cW(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Eze{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(aW,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){my(n)?Se(aW,"Ignoring IndexedDB error during garbage collection: ",n):await gy(n)}await this.Vr(3e5)})}}class Tze{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(I1.ce);const s=new bze(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(oW)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oW):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(u=Date.now(),cm()<=Rt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function Cze(t,e){return new Tze(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ize{constructor(){this.changes=new Cg(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ae.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sze{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kze{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Xw(s.mutation,r,vo.empty(),Dn.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Vt()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Vt()){const r=fp();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Fv();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=fp();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Vt()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=hu();const o=Yw(),a=function(){return Yw()}();return n.forEach((l,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof kf)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Xw(h.mutation,u,h.mutation.getFieldMask(),Dn.now())):o.set(u.key,vo.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new Sze(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const s=Yw();let r=new Is((o,a)=>o-a),i=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=s.get(l)||vo.empty();h=a.applyToLocalView(u,h),s.set(l,h);const d=(r.get(a.batchId)||Vt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=$ae();h.forEach(p=>{if(!i.has(p)){const m=Qae(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ae.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):R5e(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ae.resolve(fp());let a=TE,l=i;return o.next(u=>ae.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ae.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Vt())).next(h=>({batchId:a,changes:Bae(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ve(n)).next(s=>{let r=Fv();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Fv();return this.indexManager.getCollectionParents(e,i).next(a=>ae.forEach(a,l=>{const u=function(d,p){return new R1(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Gr.newInvalidDocument(h)))});let a=Fv();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&Xw(h.mutation,u,vo.empty(),Dn.now()),N1(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rze{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Mc(r.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:_ze(r.bundledQuery),readTime:Mc(r.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aze{constructor(){this.overlays=new Is(Ve.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const s=fp();return ae.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ae.resolve()}getOverlaysForCollection(e,n,s){const r=fp(),i=n.length+1,o=new Ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Is((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=fp(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=fp(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return ae.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new K5e(n,s));let i=this.qr.get(n);i===void 0&&(i=Vt(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pze{constructor(){this.sessionToken=Rr.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.Qr=new zs(Js.$r),this.Ur=new zs(Js.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Js(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Js(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Ve(new Hn([])),s=new Js(n,e),r=new Js(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ve(new Hn([])),s=new Js(n,e),r=new Js(n,e+1);let i=Vt();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Js(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Js{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ve.comparator(e.key,n.key)||Lt(e.Yr,n.Yr)}static Kr(e,n){return Lt(e.Yr,n.Yr)||Ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nze{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new zs(Js.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W5e(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Js(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?F4:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Js(n,0),r=new Js(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zs(Lt);return n.forEach(r=>{const i=new Js(r,0),o=new Js(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ae.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Ve.isDocumentKey(i)||(i=i.child(""));const o=new Js(new Ve(i),0);let a=new zs(Lt);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.Yr)),!0)},o),ae.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){on(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ae.forEach(n.mutations,r=>{const i=new Js(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Js(n,0),r=this.Zr.firstAfterOrEqual(s);return ae.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xze{constructor(e){this.ri=e,this.docs=function(){return new Is(Ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ae.resolve(s?s.document.mutableCopy():Gr.newInvalidDocument(n))}getEntries(e,n){let s=hu();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Gr.newInvalidDocument(r))}),ae.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=hu();const o=n.path,a=new Ve(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||i5e(r5e(h),s)<=0||(r.has(h.key)||N1(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,n,s,r){He(9500)}ii(e,n){return ae.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Oze(this)}getSize(e){return ae.resolve(this.size)}}class Oze extends Ize{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dze{constructor(e){this.persistence=e,this.si=new Cg(n=>q4(n),j4),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.oi=0,this._i=new K4,this.targetCount=0,this.ai=L_.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new L_(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ae.waitFor(i).next(()=>r)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ae.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ae.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ae.resolve(s)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cce{constructor(e,n){this.ui={},this.overlays={},this.ci=new I1(0),this.li=!1,this.li=!0,this.hi=new Pze,this.referenceDelegate=e(this),this.Pi=new Dze(this),this.indexManager=new yze,this.remoteDocumentCache=function(r){return new xze(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new mze(n),this.Ii=new Rze(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Aze,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new Nze(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Se("MemoryPersistence","Starting transaction:",e);const r=new Lze(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ae.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Lze extends a5e{constructor(e){super(),this.currentSequenceNumber=e}}class G4{constructor(e){this.persistence=e,this.Ri=new K4,this.Vi=null}static mi(e){return new G4(e)}get fi(){if(this.Vi)return this.Vi;throw He(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ae.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,s=>{const r=Ve.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,at.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gk{constructor(e,n){this.persistence=e,this.pi=new Cg(s=>u5e(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Cze(this,n)}static mi(e,n){return new gk(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ae.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ae.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,at.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qI(e.data.value)),n}br(e,n,s){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ae.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Vt(),r=Vt();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Q4(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mze{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fze{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Cje()?8:c5e(si())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Mze;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(cm()<=Rt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",lm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(cm()<=Rt.DEBUG&&Se("QueryEngine","Query:",lm(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(cm()<=Rt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",lm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lc(n))):ae.resolve())}ys(e,n){if(YH(n))return ae.resolve(null);let s=Lc(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=gL(n,null,"F"),s=Lc(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Vt(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,gL(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,s,r){return YH(n)||r.isEqual(at.min())?ae.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ae.resolve(null):(cm()<=Rt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lm(n)),this.vs(e,o,n,s5e(r,TE)).next(a=>a))})}Ds(e,n){let s=new zs(qae(e));return n.forEach((r,i)=>{N1(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return cm()<=Rt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",lm(n)),this.ps.getDocumentsMatchingQuery(e,n,rf.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="LocalStore",Vze=3e8;class Uze{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Is(Lt),this.xs=new Cg(i=>q4(i),j4),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kze(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function qze(t,e,n,s){return new Uze(t,e,n,s)}async function lce(t,e){const n=pt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Vt();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(s,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function jze(t,e){const n=pt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,p=d.keys();let m=ae.resolve();return p.forEach(w=>{m=m.next(()=>h.getEntry(l,w)).next(k=>{const P=u.docVersions.get(w);on(P!==null,48541),k.version.compareTo(P)<0&&(d.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function uce(t){const e=pt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Bze(t,e){const n=pt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Rr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(k,P,D){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Vze?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let l=hu(),u=Vt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push($ze(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!s.isEqual(at.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ae.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=r,i))}function $ze(t,e,n){let s=Vt(),r=Vt();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=hu();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(at.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Se(Y4,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:r}})}function zze(t,e){const n=pt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=F4),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Hze(t,e){const n=pt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ae.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new Xh(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function wL(t,e,n){const s=pt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!my(o))throw o;Se(Y4,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function lW(t,e,n){const s=pt(t);let r=at.min(),i=Vt();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=pt(l),p=d.xs.get(h);return p!==void 0?ae.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)}(s,o,Lc(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:at.min(),n?i:Vt())).next(a=>(Wze(s,P5e(e),a),{documents:a,Qs:i})))}function Wze(t,e,n){let s=t.Os.get(e)||at.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class uW{constructor(){this.activeTargetIds=M5e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kze{constructor(){this.Mo=new uW,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uW,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gze{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW="ConnectivityMonitor";class dW{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(hW,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(hW,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jC=null;function bL(){return jC===null?jC=function(){return 268435456+Math.round(2147483648*Math.random())}():jC++,"0x"+jC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="RestConnection",Qze={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yze{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===lk?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=bL(),a=this.zo(e,n.toUriEncodedString());Se(nx,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(a),h=nl(u);return this.Jo(e,a,l,s,h).then(d=>(Se(nx,`Received RPC '${e}' ${o}: `,d),d),d=>{throw N_(nx,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+py}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=Qze[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xze{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="WebChannelConnection";class Jze extends Yze{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=bL();return new Promise((a,l)=>{const u=new gae;u.setWithCredentials(!0),u.listenOnce(mae.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case UI.NO_ERROR:const d=u.getResponseJson();Se(Nr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case UI.TIMEOUT:Se(Nr,`RPC '${e}' ${o} timed out`),l(new Pe(he.DEADLINE_EXCEEDED,"Request time out"));break;case UI.HTTP_ERROR:const p=u.getStatus();if(Se(Nr,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(D){const M=D.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(M)>=0?M:he.UNKNOWN}(w.status);l(new Pe(k,w.message))}else l(new Pe(he.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Pe(he.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Se(Nr,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Se(Nr,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=bL(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vae(),a=yae(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const h=i.join("");Se(Nr,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,m=!1;const w=new Xze({Yo:P=>{m?Se(Nr,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Se(Nr,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Se(Nr,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,D,M)=>{P.listen(D,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,Mv.EventType.OPEN,()=>{m||(Se(Nr,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,Mv.EventType.CLOSE,()=>{m||(m=!0,Se(Nr,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,Mv.EventType.ERROR,P=>{m||(m=!0,N_(Nr,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Pe(he.UNAVAILABLE,"The operation could not be completed")))}),k(d,Mv.EventType.MESSAGE,P=>{if(!m){const D=P.data[0];on(!!D,16349);const M=D,V=M?.error||M[0]?.error;if(V){Se(Nr,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(v){const y=_s[v];if(y!==void 0)return Xae(y)}(q),X=V.message;H===void 0&&(H=he.INTERNAL,X="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Pe(H,X)),d.close()}else Se(Nr,`RPC '${e}' stream ${r} received:`,D),w.u_(D)}}),k(a,_ae.STAT_EVENT,P=>{P.stat===cL.PROXY?Se(Nr,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===cL.NOPROXY&&Se(Nr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function sx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){return new nze(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fW="PersistentStream";class dce{constructor(e,n,s,r,i,o,a,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hce(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(uu(n.toString()),uu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Pe(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Se(fW,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Se(fW,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zze extends dce{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ize(this.serializer,e),s=function(i){if(!("targetChange"in i))return at.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?Mc(o.readTime):at.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=vL(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=pL(l)?{documents:cze(i,l)}:{query:lze(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ece(i,o.resumeToken);const u=mL(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(at.min())>0){a.readTime=pk(i,o.snapshotVersion.toTimestamp());const u=mL(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const s=hze(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=vL(this.serializer),n.removeTarget=e,this.q_(n)}}class eHe extends dce{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return on(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,on(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){on(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aze(e.writeResults,e.commitTime),s=Mc(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vL(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>oze(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tHe{}class nHe extends tHe{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,_L(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(he.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,_L(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(he.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sHe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(uu(n),this.aa=!1):Se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="RemoteStore";class rHe{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{Ig(this)&&(Se(ig,"Restarting streams for network reachability change."),await async function(l){const u=pt(l);u.Ea.add(4),await zT(u),u.Ra.set("Unknown"),u.Ea.delete(4),await M1(u)}(this))})}),this.Ra=new sHe(s,r)}}async function M1(t){if(Ig(t))for(const e of t.da)await e(!0)}async function zT(t){for(const e of t.da)await e(!1)}function fce(t,e){const n=pt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),e6(n)?Z4(n):_y(n).O_()&&J4(n,e))}function X4(t,e){const n=pt(t),s=_y(n);n.Ia.delete(e),s.O_()&&pce(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ig(n)&&n.Ra.set("Unknown"))}function J4(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(at.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_y(t).Y_(e)}function pce(t,e){t.Va.Ue(e),_y(t).Z_(e)}function Z4(t){t.Va=new J5e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_y(t).start(),t.Ra.ua()}function e6(t){return Ig(t)&&!_y(t).x_()&&t.Ia.size>0}function Ig(t){return pt(t).Ea.size===0}function gce(t){t.Va=void 0}async function iHe(t){t.Ra.set("Online")}async function oHe(t){t.Ia.forEach((e,n)=>{J4(t,e)})}async function aHe(t,e){gce(t),e6(t)?(t.Ra.ha(e),Z4(t)):t.Ra.set("Unknown")}async function cHe(t,e,n){if(t.Ra.set("Online"),e instanceof Zae&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))}(t,e)}catch(s){Se(ig,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await mk(t,s)}else if(e instanceof $I?t.Va.Ze(e):e instanceof Jae?t.Va.st(e):t.Va.tt(e),!n.isEqual(at.min()))try{const s=await uce(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Rr.EMPTY_BYTE_STRING,h.snapshotVersion)),pce(i,l);const d=new Xh(h.target,l,u,h.sequenceNumber);J4(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){Se(ig,"Failed to raise snapshot:",s),await mk(t,s)}}async function mk(t,e,n){if(!my(e))throw e;t.Ea.add(1),await zT(t),t.Ra.set("Offline"),n||(n=()=>uce(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Se(ig,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await M1(t)})}function mce(t,e){return e().catch(n=>mk(t,n,e))}async function F1(t){const e=pt(t),n=lf(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:F4;for(;lHe(e);)try{const r=await zze(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,uHe(e,r)}catch(r){await mk(e,r)}_ce(e)&&yce(e)}function lHe(t){return Ig(t)&&t.Ta.length<10}function uHe(t,e){t.Ta.push(e);const n=lf(t);n.O_()&&n.X_&&n.ea(e.mutations)}function _ce(t){return Ig(t)&&!lf(t).x_()&&t.Ta.length>0}function yce(t){lf(t).start()}async function hHe(t){lf(t).ra()}async function dHe(t){const e=lf(t);for(const n of t.Ta)e.ea(n.mutations)}async function fHe(t,e,n){const s=t.Ta.shift(),r=z4.from(s,e,n);await mce(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await F1(t)}async function pHe(t,e){e&&lf(t).X_&&await async function(s,r){if(function(o){return Q5e(o)&&o!==he.ABORTED}(r.code)){const i=s.Ta.shift();lf(s).B_(),await mce(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await F1(s)}}(t,e),_ce(t)&&yce(t)}async function pW(t,e){const n=pt(t);n.asyncQueue.verifyOperationInProgress(),Se(ig,"RemoteStore received new credentials");const s=Ig(n);n.Ea.add(3),await zT(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await M1(n)}async function gHe(t,e){const n=pt(t);e?(n.Ea.delete(2),await M1(n)):e||(n.Ea.add(2),await zT(n),n.Ra.set("Unknown"))}function _y(t){return t.ma||(t.ma=function(n,s,r){const i=pt(n);return i.sa(),new Zze(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:iHe.bind(null,t),t_:oHe.bind(null,t),r_:aHe.bind(null,t),H_:cHe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),e6(t)?Z4(t):t.Ra.set("Unknown")):(await t.ma.stop(),gce(t))})),t.ma}function lf(t){return t.fa||(t.fa=function(n,s,r){const i=pt(n);return i.sa(),new eHe(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hHe.bind(null,t),r_:pHe.bind(null,t),ta:dHe.bind(null,t),na:fHe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await F1(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(ig,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new wd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new t6(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n6(t,e){if(uu("AsyncQueue",`${e}: ${t}`),my(t))return new Pe(he.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{static emptySet(e){return new Hm(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ve.comparator(n.key,s.key):(n,s)=>Ve.comparator(n.key,s.key),this.keyedMap=Fv(),this.sortedSet=new Is(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Hm;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(){this.ga=new Is(Ve.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):He(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class M_{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new M_(e,n,Hm.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&P1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mHe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _He{constructor(){this.queries=mW(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=pt(n),i=r.queries;r.queries=mW(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(s)})})(this,new Pe(he.ABORTED,"Firestore shutting down"))}}function mW(){return new Cg(t=>Uae(t),P1)}async function vce(t,e){const n=pt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new mHe,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=n6(o,`Initialization of query '${lm(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&s6(n)}async function wce(t,e){const n=pt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function yHe(t,e){const n=pt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&s6(n)}function vHe(t,e,n){const s=pt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function s6(t){t.Ca.forEach(e=>{e.next()})}var EL,_W;(_W=EL||(EL={})).Ma="default",_W.Cache="cache";class bce{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new M_(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=M_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==EL.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ece{constructor(e){this.key=e}}class Tce{constructor(e){this.key=e}}class wHe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=qae(e),this.tu=new Hm(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new gW,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=N1(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(l&&this.eu(m,l)>0||u&&this.eu(m,u)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,w){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Rt:P})}};return k(m)-k(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new M_(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gW,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new Tce(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new Ece(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return M_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const r6="SyncEngine";class bHe{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class EHe{constructor(e){this.key=e,this.hu=!1}}class THe{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Cg(a=>Uae(a),P1),this.Iu=new Map,this.Eu=new Set,this.du=new Is(Ve.comparator),this.Au=new Map,this.Ru=new K4,this.Vu={},this.mu=new Map,this.fu=L_.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CHe(t,e,n=!0){const s=Ace(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await Cce(s,e,n,!0),r}async function IHe(t,e){const n=Ace(t);await Cce(n,e,!0,!1)}async function Cce(t,e,n,s){const r=await Hze(t.localStore,Lc(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await SHe(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&fce(t.remoteStore,r),a}async function SHe(t,e,n,s,r){t.pu=(d,p,m)=>async function(k,P,D,M){let V=P.view.ru(D);V.Cs&&(V=await lW(k.localStore,P.query,!1).then(({documents:I})=>P.view.ru(I,V)));const q=M&&M.targetChanges.get(P.targetId),H=M&&M.targetMismatches.get(P.targetId)!=null,X=P.view.applyChanges(V,k.isPrimaryClient,q,H);return vW(k,P.targetId,X.au),X.snapshot}(t,d,p,m);const i=await lW(t.localStore,e,!0),o=new wHe(e,i.Qs),a=o.ru(i.documents),l=$T.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);vW(t,n,u.au);const h=new bHe(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function kHe(t,e,n){const s=pt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!P1(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await wL(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&X4(s.remoteStore,r.targetId),TL(s,r.targetId)}).catch(gy)):(TL(s,r.targetId),await wL(s.localStore,r.targetId,!0))}async function RHe(t,e){const n=pt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),X4(n.remoteStore,s.targetId))}async function AHe(t,e,n){const s=MHe(t);try{const r=await function(o,a){const l=pt(o),u=Dn.now(),h=a.reduce((m,w)=>m.add(w.key),Vt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=hu(),k=Vt();return l.Ns.getEntries(m,h).next(P=>{w=P,w.forEach((D,M)=>{M.isValidDocument()||(k=k.add(D))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(P=>{d=P;const D=[];for(const M of a){const V=z5e(M,d.get(M.key).overlayedDocument);V!=null&&D.push(new kf(M.key,V,xae(V.value.mapValue),qa.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,D,a)}).next(P=>{p=P;const D=P.applyToLocalDocumentSet(d,k);return l.documentOverlayCache.saveOverlays(m,P.batchId,D)})}).then(()=>({batchId:p.batchId,changes:Bae(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Is(Lt)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(s,r.batchId,n),await HT(s,r.changes),await F1(s.remoteStore)}catch(r){const i=n6(r,"Failed to persist write");n.reject(i)}}async function Ice(t,e){const n=pt(t);try{const s=await Bze(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(on(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?on(o.hu,14607):r.removedDocuments.size>0&&(on(o.hu,42227),o.hu=!1))}),await HT(n,s,e)}catch(s){await gy(s)}}function yW(t,e,n){const s=pt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=pt(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)}),u&&s6(l)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function PHe(t,e,n){const s=pt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Is(Ve.comparator);o=o.insert(i,Gr.newNoDocument(i,at.min()));const a=Vt().add(i),l=new D1(at.min(),new Map,new Is(Lt),o,a);await Ice(s,l),s.du=s.du.remove(i),s.Au.delete(e),i6(s)}else await wL(s.localStore,e,!1).then(()=>TL(s,e,n)).catch(gy)}async function NHe(t,e){const n=pt(t),s=e.batch.batchId;try{const r=await jze(n.localStore,e);kce(n,s,null),Sce(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await HT(n,r)}catch(r){await gy(r)}}async function xHe(t,e,n){const s=pt(t);try{const r=await function(o,a){const l=pt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(on(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(s.localStore,e);kce(s,e,n),Sce(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await HT(s,r)}catch(r){await gy(r)}}function Sce(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function kce(t,e,n){const s=pt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function TL(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||Rce(t,s)})}function Rce(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(X4(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),i6(t))}function vW(t,e,n){for(const s of n)s instanceof Ece?(t.Ru.addReference(s.key,e),OHe(t,s)):s instanceof Tce?(Se(r6,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Rce(t,s.key)):He(19791,{wu:s})}function OHe(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Se(r6,"New document in limbo: "+n),t.Eu.add(s),i6(t))}function i6(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ve(Hn.fromString(e)),s=t.fu.next();t.Au.set(s,new EHe(n)),t.du=t.du.insert(n,s),fce(t.remoteStore,new Xh(Lc(A1(n.path)),s,"TargetPurposeLimboResolution",I1.ce))}}async function HT(t,e,n){const s=pt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,l)=>{o.push(s.pu(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){r.push(u);const h=Q4.As(l.targetId,u);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(l,u){const h=pt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ae.forEach(u,p=>ae.forEach(p.Es,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>ae.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!my(d))throw d;Se(Y4,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const m=h.Ms.get(p),w=m.snapshotVersion,k=m.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,k)}}}(s.localStore,i))}async function DHe(t,e){const n=pt(t);if(!n.currentUser.isEqual(e)){Se(r6,"User change. New user:",e.toKey());const s=await lce(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Pe(he.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await HT(n,s.Ls)}}function LHe(t,e){const n=pt(t),s=n.Au.get(e);if(s&&s.hu)return Vt().add(s.key);{let r=Vt();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function Ace(t){const e=pt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ice.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LHe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PHe.bind(null,e),e.Pu.H_=yHe.bind(null,e.eventManager),e.Pu.yu=vHe.bind(null,e.eventManager),e}function MHe(t){const e=pt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NHe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xHe.bind(null,e),e}class _k{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qze(this.persistence,new Fze,e.initialUser,this.serializer)}Cu(e){return new cce(G4.mi,this.serializer)}Du(e){return new Kze}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_k.provider={build:()=>new _k};class FHe extends _k{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){on(this.persistence.referenceDelegate instanceof gk,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Eze(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ki.withCacheSize(this.cacheSizeBytes):Ki.DEFAULT;return new cce(s=>gk.mi(s,n),this.serializer)}}class CL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>yW(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=DHe.bind(null,this.syncEngine),await gHe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _He}()}createDatastore(e){const n=L1(e.databaseInfo.databaseId),s=function(i){return new Jze(i)}(e.databaseInfo);return function(i,o,a,l){return new nHe(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new rHe(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yW(this.syncEngine,n,0),function(){return dW.v()?new dW:new Gze}())}createSyncEngine(e,n){return function(r,i,o,a,l,u,h){const d=new THe(r,i,o,a,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=pt(n);Se(ig,"RemoteStore shutting down."),s.Ea.add(5),await zT(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}CL.provider={build:()=>new CL};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pce{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):uu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="FirestoreClient";class VHe{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=qr.UNAUTHENTICATED,this.clientId=L4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Se(uf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Se(uf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=n6(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function rx(t,e){t.asyncQueue.verifyOperationInProgress(),Se(uf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await lce(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wW(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UHe(t);Se(uf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>pW(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>pW(e.remoteStore,r)),t._onlineComponents=e}async function UHe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(uf,"Using user provided OfflineComponentProvider");try{await rx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===he.FAILED_PRECONDITION||r.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;N_("Error using user provided cache. Falling back to memory cache: "+n),await rx(t,new _k)}}else Se(uf,"Using default OfflineComponentProvider"),await rx(t,new FHe(void 0));return t._offlineComponents}async function Nce(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(uf,"Using user provided OnlineComponentProvider"),await wW(t,t._uninitializedComponentsProvider._online)):(Se(uf,"Using default OnlineComponentProvider"),await wW(t,new CL))),t._onlineComponents}function qHe(t){return Nce(t).then(e=>e.syncEngine)}async function IL(t){const e=await Nce(t),n=e.eventManager;return n.onListen=CHe.bind(null,e.syncEngine),n.onUnlisten=kHe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IHe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RHe.bind(null,e.syncEngine),n}function jHe(t,e,n={}){const s=new wd;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new Pce({next:p=>{h.Nu(),o.enqueueAndForget(()=>wce(i,d));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new Pe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new Pe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new bce(A1(a.path),h,{includeMetadataChanges:!0,qa:!0});return vce(i,d)}(await IL(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xce(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bW=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oce="firestore.googleapis.com",EW=!0;class TW{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Oce,this.ssl=EW}else this.host=e.host,this.ssl=e.ssl??EW;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ace;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wze)throw new Pe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n5e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xce(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Pe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o6{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TW({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TW(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new H$e;switch(s.type){case"firstParty":return new Q$e(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Pe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=bW.get(n);s&&(Se("ComponentProvider","Removing Datastore"),bW.delete(n),s.terminate())}(this),Promise.resolve()}}function BHe(t,e,n,s={}){t=Ua(t,o6);const r=nl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(_1(`https://${a}`),y1("Firestore",!0)),i.host!==Oce&&i.host!==a&&N_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:r,emulatorOptions:s};if(!nf(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=qr.MOCK_USER;else{u=w4(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Pe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new qr(d)}t._authCredentials=new W$e(new bae(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new V1(this.firestore,e,this._query)}}class Es{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new PE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Es(this.firestore,e,this._key)}toJSON(){return{type:Es._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(jT(n,Es._jsonSchema))return new Es(e,s||null,new Ve(Hn.fromString(n.referencePath)))}}Es._jsonSchemaVersion="firestore/documentReference/1.0",Es._jsonSchema={type:bs("string",Es._jsonSchemaVersion),referencePath:bs("string")};class PE extends V1{constructor(e,n,s){super(e,n,A1(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Es(this.firestore,null,new Ve(e))}withConverter(e){return new PE(this.firestore,e,this._path)}}function $He(t,e,...n){if(t=hn(t),arguments.length===1&&(e=L4.newId()),t5e("doc","path",e),t instanceof o6){const s=Hn.fromString(e,...n);return FH(s),new Es(t,null,new Ve(s))}{if(!(t instanceof Es||t instanceof PE))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Hn.fromString(e,...n));return FH(s),new Es(t.firestore,t instanceof PE?t.converter:null,new Ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW="AsyncQueue";class IW{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hce(this,"async_queue_retry"),this._c=()=>{const s=sx();s&&Se(CW,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=sx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!my(e))throw e;Se(CW,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,uu("INTERNAL UNHANDLED ERROR: ",SW(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=t6.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&He(47125,{Pc:SW(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function SW(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class og extends o6{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new IW,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IW(e),this._firestoreClient=void 0,await e}}}function Dce(t,e){const n=typeof t=="object"?t:b1(),s=typeof t=="string"?t:lk,r=FT(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=v4("firestore");i&&BHe(r,...i)}return r}function a6(t){if(t._terminated)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zHe(t),t._firestoreClient}function zHe(t){const e=t._freezeSettings(),n=function(r,i,o,a){return new f5e(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,xce(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new VHe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Po(Rr.fromBase64String(e))}catch(n){throw new Pe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Po(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Po._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jT(e,Po._jsonSchema))return Po.fromBase64String(e.bytes)}}Po._jsonSchemaVersion="firestore/bytes/1.0",Po._jsonSchema={type:bs("string",Po._jsonSchemaVersion),bytes:bs("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fc._jsonSchemaVersion}}static fromJSON(e){if(jT(e,Fc._jsonSchema))return new Fc(e.latitude,e.longitude)}}Fc._jsonSchemaVersion="firestore/geoPoint/1.0",Fc._jsonSchema={type:bs("string",Fc._jsonSchemaVersion),latitude:bs("number"),longitude:bs("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jT(e,Vc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vc(e.vectorValues);throw new Pe(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vc._jsonSchemaVersion="firestore/vectorValue/1.0",Vc._jsonSchema={type:bs("string",Vc._jsonSchemaVersion),vectorValues:bs("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HHe=/^__.*__$/;class WHe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new kf(e,this.data,this.fieldMask,n,this.fieldTransforms):new BT(e,this.data,n,this.fieldTransforms)}}class Lce{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new kf(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Mce(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{Ac:t})}}class c6{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new c6({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yk(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Mce(this.Ac)&&HHe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KHe{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||L1(e)}Cc(e,n,s,r=!1){return new c6({Ac:e,methodName:n,Dc:s,path:Tr.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fce(t){const e=t._freezeSettings(),n=L1(t._databaseId);return new KHe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GHe(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);u6("Data must be an object, but it was:",o,s);const a=Vce(s,o);let l,u;if(i.merge)l=new vo(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=SL(e,d,n);if(!o.contains(p))throw new Pe(he.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);qce(h,p)||h.push(p)}l=new vo(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new WHe(new Qi(a),l,u)}class j1 extends q1{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j1}}class l6 extends q1{_toFieldTransform(e){return new q5e(e.path,new kE)}isEqual(e){return e instanceof l6}}function QHe(t,e,n,s){const r=t.Cc(1,e,n);u6("Data must be an object, but it was:",r,s);const i=[],o=Qi.empty();Sf(s,(l,u)=>{const h=h6(e,l,n);u=hn(u);const d=r.yc(h);if(u instanceof j1)i.push(h);else{const p=B1(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new vo(i);return new Lce(o,a,r.fieldTransforms)}function YHe(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[SL(e,s,n)],l=[r];if(i.length%2!=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(SL(e,i[p])),l.push(i[p+1]);const u=[],h=Qi.empty();for(let p=a.length-1;p>=0;--p)if(!qce(u,a[p])){const m=a[p];let w=l[p];w=hn(w);const k=o.yc(m);if(w instanceof j1)u.push(m);else{const P=B1(w,k);P!=null&&(u.push(m),h.set(m,P))}}const d=new vo(u);return new Lce(h,d,o.fieldTransforms)}function B1(t,e){if(Uce(t=hn(t)))return u6("Unsupported field value:",e,t),Vce(t,e);if(t instanceof q1)return function(s,r){if(!Mce(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=B1(a,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=hn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return F5e(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Dn.fromDate(s);return{timestampValue:pk(r.serializer,i)}}if(s instanceof Dn){const i=new Dn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:pk(r.serializer,i)}}if(s instanceof Fc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Po)return{bytesValue:ece(r.serializer,s._byteString)};if(s instanceof Es){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:W4(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Vc)return function(o,a){return{mapValue:{fields:{[Pae]:{stringValue:Nae},[uk]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return B4(a.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${M4(s)}`)}(t,e)}function Vce(t,e){const n={};return Cae(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sf(t,(s,r)=>{const i=B1(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Uce(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dn||t instanceof Fc||t instanceof Po||t instanceof Es||t instanceof q1||t instanceof Vc)}function u6(t,e,n){if(!Uce(n)||!Eae(n)){const s=M4(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function SL(t,e,n){if((e=hn(e))instanceof U1)return e._internalPath;if(typeof e=="string")return h6(t,e);throw yk("Field path arguments must be of type string or ",t,!1,void 0,n)}const XHe=new RegExp("[~\\*/\\[\\]]");function h6(t,e,n){if(e.search(XHe)>=0)throw yk(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new U1(...e.split("."))._internalPath}catch{throw yk(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yk(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new Pe(he.INVALID_ARGUMENT,a+t+l)}function qce(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JHe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bce("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JHe extends jce{data(){return super.data()}}function Bce(t,e){return typeof e=="string"?h6(t,e):e instanceof U1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZHe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eWe{convertValue(e,n="none"){switch(cf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ls(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(af(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Sf(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[uk].arrayValue?.values?.map(s=>ls(s.doubleValue));return new Vc(n)}convertGeoPoint(e){return new Fc(ls(e.latitude),ls(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=k1(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(CE(e));default:return null}}convertTimestamp(e){const n=of(e);return new Dn(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Hn.fromString(e);on(oce(s),9688,{name:e});const r=new IE(s.get(1),s.get(3)),i=new Ve(s.popFirst(5));return r.isEqual(n)||uu(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tWe(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Uv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Op extends jce{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Bce("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Op._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Op._jsonSchemaVersion="firestore/documentSnapshot/1.0",Op._jsonSchema={type:bs("string",Op._jsonSchemaVersion),bundleSource:bs("string","DocumentSnapshot"),bundleName:bs("string"),bundle:bs("string")};class zI extends Op{data(e={}){return super.data(e)}}class Wm{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Uv(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new zI(this._firestore,this._userDataWriter,s.key,s,new Uv(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new zI(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uv(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new zI(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Uv(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:nWe(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=L4.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nWe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RW(t){t=Ua(t,Es);const e=Ua(t.firestore,og);return jHe(a6(e),t._key).then(n=>zce(e,t,n))}Wm._jsonSchemaVersion="firestore/querySnapshot/1.0",Wm._jsonSchema={type:bs("string",Wm._jsonSchemaVersion),bundleSource:bs("string","QuerySnapshot"),bundleName:bs("string"),bundle:bs("string")};class $ce extends eWe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Es(this.firestore,null,n)}}function AW(t,e,n){t=Ua(t,Es);const s=Ua(t.firestore,og),r=tWe(t.converter,e,n);return d6(s,[GHe(Fce(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,qa.none())])}function tYe(t,e,n,...s){t=Ua(t,Es);const r=Ua(t.firestore,og),i=Fce(r);let o;return o=typeof(e=hn(e))=="string"||e instanceof U1?YHe(i,"updateDoc",t._key,e,n,s):QHe(i,"updateDoc",t._key,e),d6(r,[o.toMutation(t._key,qa.exists(!0))])}function nYe(t){return d6(Ua(t.firestore,og),[new $4(t._key,qa.none())])}function sYe(t,...e){t=hn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||kW(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(kW(e[s])){const l=e[s];e[s]=l.next?.bind(l),e[s+1]=l.error?.bind(l),e[s+2]=l.complete?.bind(l)}let i,o,a;if(t instanceof Es)o=Ua(t.firestore,og),a=A1(t._key.path),i={next:l=>{e[s]&&e[s](zce(o,t,l))},error:e[s+1],complete:e[s+2]};else{const l=Ua(t,V1);o=Ua(l.firestore,og),a=l._query;const u=new $ce(o);i={next:h=>{e[s]&&e[s](new Wm(o,u,l,h))},error:e[s+1],complete:e[s+2]},ZHe(t._query)}return function(u,h,d,p){const m=new Pce(p),w=new bce(h,m,d);return u.asyncQueue.enqueueAndForget(async()=>vce(await IL(u),w)),()=>{m.Nu(),u.asyncQueue.enqueueAndForget(async()=>wce(await IL(u),w))}}(a6(o),a,r,i)}function d6(t,e){return function(s,r){const i=new wd;return s.asyncQueue.enqueueAndForget(async()=>AHe(await qHe(s),r,i)),i.promise}(a6(t),e)}function zce(t,e,n){const s=n.docs.get(e._key),r=new $ce(t);return new Op(t,r,e._key,s,new Uv(n.hasPendingWrites,n.fromCache),e.converter)}function ix(){return new l6("serverTimestamp")}(function(e,n=!0){(function(r){py=r})(If),sf(new au("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new og(new K$e(s.getProvider("auth-internal")),new Y$e(o,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Pe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new IE(u.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Vo(OH,DH,e),Vo(OH,DH,"esm2020")})();var sWe="firebase",rWe="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo(sWe,rWe,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hce="firebasestorage.googleapis.com",Wce="storageBucket",iWe=120*1e3,oWe=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends sl{constructor(e,n,s=0){super(ox(e),`Firebase Storage: ${n} (${ox(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,os.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ox(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var is;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(is||(is={}));function ox(t){return"storage/"+t}function f6(){const t="An unknown error occurred, please check the error payload for server response.";return new os(is.UNKNOWN,t)}function aWe(t){return new os(is.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cWe(t){return new os(is.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lWe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new os(is.UNAUTHENTICATED,t)}function uWe(){return new os(is.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hWe(t){return new os(is.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function dWe(){return new os(is.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fWe(){return new os(is.CANCELED,"User canceled the upload/download.")}function pWe(t){return new os(is.INVALID_URL,"Invalid URL '"+t+"'.")}function gWe(t){return new os(is.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mWe(){return new os(is.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wce+"' property when initializing the app?")}function _We(){return new os(is.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yWe(){return new os(is.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vWe(t){return new os(is.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kL(t){return new os(is.INVALID_ARGUMENT,t)}function Kce(){return new os(is.APP_DELETED,"The Firebase app was deleted.")}function wWe(t){return new os(is.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jw(t,e){return new os(is.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function gv(t){throw new os(is.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ii.makeFromUrl(e,n)}catch{return new Ii(e,"")}if(s.path==="")return s;throw gWe(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===Hce?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",D=new RegExp(`^https?://${k}/${r}/${P}`,"i"),V=[{regex:a,indices:l,postModify:i},{regex:m,indices:w,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let q=0;q<V.length;q++){const H=V[q],X=H.regex.exec(e);if(X){const I=X[H.indices.bucket];let v=X[H.indices.path];v||(v=""),s=new Ii(I,v),H.postModify(s);break}}if(s==null)throw pWe(e);return s}}class bWe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EWe(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...D){if(u){p();return}if(P){p(),h.call(null,P,...D);return}if(l()||o){p(),h.call(null,P,...D);return}s<64&&(s*=2);let V;a===1?(a=2,V=0):V=(s+Math.random())*1e3,d(V)}let w=!1;function k(P){w||(w=!0,p(),!u&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function TWe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CWe(t){return t!==void 0}function IWe(t){return typeof t=="object"&&!Array.isArray(t)}function p6(t){return typeof t=="string"||t instanceof String}function PW(t){return g6()&&t instanceof Blob}function g6(){return typeof Blob<"u"}function RL(t,e,n,s){if(s<e)throw kL(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw kL(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Gce(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Dp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Dp||(Dp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SWe(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kWe{constructor(e,n,s,r,i,o,a,l,u,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new BC(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Dp.NO_ERROR,l=i.getStatus();if(!a||SWe(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Dp.ABORT;s(!1,new BC(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;s(!0,new BC(u,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());CWe(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=f6();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?Kce():fWe();o(l)}else{const l=dWe();o(l)}};this.canceled_?n(!1,new BC(!1,null,!0)):this.backoffId_=EWe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TWe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class BC{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function RWe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AWe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PWe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NWe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function xWe(t,e,n,s,r,i,o=!0,a=!1){const l=Gce(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return PWe(h,e),RWe(h,n),AWe(h,i),NWe(h,s),new kWe(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OWe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DWe(...t){const e=OWe();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(g6())return new Blob(t);throw new os(is.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LWe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MWe(t){if(typeof atob>"u")throw vWe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ax{constructor(e,n){this.data=e,this.contentType=n||null}}function Qce(t,e){switch(t){case Ea.RAW:return new ax(Yce(e));case Ea.BASE64:case Ea.BASE64URL:return new ax(Xce(t,e));case Ea.DATA_URL:return new ax(VWe(e),UWe(e))}throw f6()}function Yce(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=t.charCodeAt(++n);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function FWe(t){let e;try{e=decodeURIComponent(t)}catch{throw Jw(Ea.DATA_URL,"Malformed data URL.")}return Yce(e)}function Xce(t,e){switch(t){case Ea.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Jw(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ea.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Jw(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MWe(e)}catch(r){throw r.message.includes("polyfill")?r:Jw(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class Jce{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jw(Ea.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=qWe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function VWe(t){const e=new Jce(t);return e.base64?Xce(Ea.BASE64,e.rest):FWe(e.rest)}function UWe(t){return new Jce(t).contentType}function qWe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){let s=0,r="";PW(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(PW(this.data_)){const s=this.data_,r=LWe(s,e,n);return r===null?null:new Gh(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Gh(s,!0)}}static getBlob(...e){if(g6()){const n=e.map(s=>s instanceof Gh?s.data_:s);return new Gh(DWe.apply(null,n))}else{const n=e.map(o=>p6(o)?Qce(Ea.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new Gh(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t){let e;try{e=JSON.parse(t)}catch{return null}return IWe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jWe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function BWe(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Zce(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $We(t,e){return e}class oi{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||$We}}let $C=null;function zWe(t){return!p6(t)||t.length<2?t:Zce(t)}function ele(){if($C)return $C;const t=[];t.push(new oi("bucket")),t.push(new oi("generation")),t.push(new oi("metageneration")),t.push(new oi("name","fullPath",!0));function e(i,o){return zWe(o)}const n=new oi("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new oi("size");return r.xform=s,t.push(r),t.push(new oi("timeCreated")),t.push(new oi("updated")),t.push(new oi("md5Hash",null,!0)),t.push(new oi("cacheControl",null,!0)),t.push(new oi("contentDisposition",null,!0)),t.push(new oi("contentEncoding",null,!0)),t.push(new oi("contentLanguage",null,!0)),t.push(new oi("contentType",null,!0)),t.push(new oi("metadata","customMetadata",!0)),$C=t,$C}function HWe(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Ii(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function WWe(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return HWe(s,t),s}function tle(t,e,n){const s=m6(e);return s===null?null:WWe(t,s,n)}function KWe(t,e,n,s){const r=m6(e);if(r===null||!p6(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),m=WT(p,n,s),w=Gce({alt:"media",token:u});return m+w})[0]}function GWe(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="prefixes",xW="items";function QWe(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[NW])for(const r of n[NW]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Ii(e,i));s.prefixes.push(o)}if(n[xW])for(const r of n[xW]){const i=t._makeStorageReference(new Ii(e,r.name));s.items.push(i)}return s}function YWe(t,e,n){const s=m6(n);return s===null?null:QWe(t,e,s)}class $1{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(t){if(!t)throw f6()}function XWe(t,e){function n(s,r){const i=tle(t,r,e);return _6(i!==null),i}return n}function JWe(t,e){function n(s,r){const i=YWe(t,e,r);return _6(i!==null),i}return n}function ZWe(t,e){function n(s,r){const i=tle(t,r,e);return _6(i!==null),KWe(i,r,t.host,t._protocol)}return n}function y6(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=uWe():r=lWe():n.getStatus()===402?r=cWe(t.bucket):n.getStatus()===403?r=hWe(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function nle(t){const e=y6(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=aWe(t.path)),i.serverResponse=r.serverResponse,i}return n}function e7e(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=WT(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,h=new $1(a,l,JWe(t,e.bucket),u);return h.urlParams=i,h.errorHandler=y6(e),h}function t7e(t,e,n){const s=e.fullServerUrl(),r=WT(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new $1(r,i,ZWe(t,n),o);return a.errorHandler=nle(e),a}function n7e(t,e){const n=e.fullServerUrl(),s=WT(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new $1(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=nle(e),a}function s7e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r7e(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=s7e(null,e)),s}function i7e(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=r7e(e,s,r),h=GWe(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Gh.getBlob(d,s,p);if(m===null)throw _We();const w={name:u.fullPath},k=WT(i,t.host,t._protocol),P="POST",D=t.maxUploadRetryTime,M=new $1(k,P,XWe(t,n),D);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=y6(e),M}class o7e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw gv("cannot .send() more than once");if(nl(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class a7e extends o7e{initXhr(){this.xhr_.responseType="text"}}function z1(){return new a7e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this._service=e,n instanceof Ii?this._location=n:this._location=Ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ag(e,n)}get root(){const e=new Ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zce(this._location.path)}get storage(){return this._service}get parent(){const e=jWe(this._location.path);if(e===null)return null;const n=new Ii(this._location.bucket,e);return new ag(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wWe(e)}}function c7e(t,e,n){t._throwIfRoot("uploadBytes");const s=i7e(t.storage,t._location,ele(),new Gh(e,!0),n);return t.storage.makeRequestWithTokens(s,z1).then(r=>({metadata:r,ref:t}))}function l7e(t,e,n=Ea.RAW,s){t._throwIfRoot("uploadString");const r=Qce(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),c7e(t,r.data,i)}function u7e(t){const e={prefixes:[],items:[]};return sle(t,e).then(()=>e)}async function sle(t,e,n){const r=await h7e(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await sle(t,e,r.nextPageToken)}function h7e(t,e){e!=null&&typeof e.maxResults=="number"&&RL("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=e7e(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,z1)}function d7e(t){t._throwIfRoot("getDownloadURL");const e=t7e(t.storage,t._location,ele());return t.storage.makeRequestWithTokens(e,z1).then(n=>{if(n===null)throw yWe();return n})}function f7e(t){t._throwIfRoot("deleteObject");const e=n7e(t.storage,t._location);return t.storage.makeRequestWithTokens(e,z1)}function p7e(t,e){const n=BWe(t._location.path,e),s=new Ii(t._location.bucket,n);return new ag(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7e(t){return/^[A-Za-z]+:\/\//.test(t)}function m7e(t,e){return new ag(t,e)}function rle(t,e){if(t instanceof v6){const n=t;if(n._bucket==null)throw mWe();const s=new ag(n,n._bucket);return e!=null?rle(s,e):s}else return e!==void 0?p7e(t,e):t}function _7e(t,e){if(e&&g7e(e)){if(t instanceof v6)return m7e(t,e);throw kL("To use ref(service, url), the first argument must be a Storage instance.")}else return rle(t,e)}function OW(t,e){const n=e?.[Wce];return n==null?null:Ii.makeFromBucketSpec(n,t)}function y7e(t,e,n,s={}){t.host=`${e}:${n}`;const r=nl(e);r&&(_1(`https://${t.host}/b`),y1("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:w4(i,t.app.options.projectId))}class v6{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Hce,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iWe,this._maxUploadRetryTime=oWe,this._requests=new Set,r!=null?this._bucket=Ii.makeFromBucketSpec(r,this._host):this._bucket=OW(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ii.makeFromBucketSpec(this._url,e):this._bucket=OW(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(uo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ag(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new bWe(Kce());{const o=xWe(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const DW="@firebase/storage",LW="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile="storage";function rYe(t,e,n,s){return t=hn(t),l7e(t,e,n,s)}function iYe(t){return t=hn(t),u7e(t)}function oYe(t){return t=hn(t),d7e(t)}function aYe(t){return t=hn(t),f7e(t)}function cYe(t,e){return t=hn(t),_7e(t,e)}function v7e(t=b1(),e){t=hn(t);const s=FT(t,ile).getImmediate({identifier:e}),r=v4("storage");return r&&w7e(s,...r),s}function w7e(t,e,n,s={}){y7e(t,e,n,s)}function b7e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new v6(n,s,r,e,If)}function E7e(){sf(new au(ile,b7e,"PUBLIC").setMultipleInstances(!0)),Vo(DW,LW,""),Vo(DW,LW,"esm2020")}E7e();var MW={};const FW="@firebase/database",VW="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ole="";function T7e(t){ole=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Us(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:wE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return bu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ale=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C7e(e)}}catch{}return new I7e},pp=ale("localStorage"),S7e=ale("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new w1("@firebase/database"),k7e=function(){let t=1;return function(){return t++}}(),cle=function(t){const e=Mje(t),n=new xje;n.update(e);const s=n.digest();return y4.encodeByteArray(s)},KT=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=KT.apply(null,s):typeof s=="object"?e+=Us(s):e+=s,e+=" "}return e};let Zw=null,UW=!0;const R7e=function(t,e){_e(!0,"Can't turn on custom loggers persistently."),Km.logLevel=Rt.VERBOSE,Zw=Km.log.bind(Km)},Qr=function(...t){if(UW===!0&&(UW=!1,Zw===null&&S7e.get("logging_enabled")===!0&&R7e()),Zw){const e=KT.apply(null,t);Zw(e)}},GT=function(t){return function(...e){Qr(t,...e)}},AL=function(...t){const e="FIREBASE INTERNAL ERROR: "+KT(...t);Km.error(e)},du=function(...t){const e=`FIREBASE FATAL ERROR: ${KT(...t)}`;throw Km.error(e),new Error(e)},to=function(...t){const e="FIREBASE WARNING: "+KT(...t);Km.warn(e)},A7e=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&to("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lle=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},P7e=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},F_="[MIN_NAME]",cg="[MAX_NAME]",yy=function(t,e){if(t===e)return 0;if(t===F_||e===cg)return-1;if(e===F_||t===cg)return 1;{const n=qW(t),s=qW(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},N7e=function(t,e){return t===e?0:t<e?-1:1},mv=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Us(e))},w6=function(t){if(typeof t!="object"||t===null)return Us(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Us(e[s]),n+=":",n+=w6(t[e[s]]);return n+="}",n},ule=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function ro(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const hle=function(t){_e(!lle(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,l;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},x7e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},O7e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function D7e(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const L7e=new RegExp("^-?(0*)\\d{1,10}$"),M7e=-2147483648,F7e=2147483647,qW=function(t){if(L7e.test(t)){const e=Number(t);if(e>=M7e&&e<=F7e)return e}return null},vy=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw to("Exception was thrown by user callback.",n),e},Math.floor(0))}},V7e=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},eb=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7e{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,uo(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){to(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7e{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Qr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',to(e)}}class HI{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}HI.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="5",dle="v",fle="s",ple="r",gle="f",mle=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_le="ls",yle="p",PL="ac",vle="websocket",wle="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ble{constructor(e,n,s,r,i=!1,o="",a=!1,l=!1,u=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function j7e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ele(t,e,n){_e(typeof e=="string","typeof type must == string"),_e(typeof n=="object","typeof params must == object");let s;if(e===vle)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===wle)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);j7e(t)&&(n.ns=t.namespace);const r=[];return ro(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7e{constructor(){this.counters_={}}incrementCounter(e,n=1){bu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hje(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={},lx={};function E6(t){const e=t.toString();return cx[e]||(cx[e]=new B7e),cx[e]}function $7e(t,e){const n=t.toString();return lx[n]||(lx[n]=e()),lx[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&vy(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW="start",H7e="close",W7e="pLPCommand",K7e="pRTLPCB",Tle="id",Cle="pw",Ile="ser",G7e="cb",Q7e="seg",Y7e="ts",X7e="d",J7e="dframe",Sle=1870,kle=30,Z7e=Sle-kle,e8e=25e3,t8e=3e4;class gm{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GT(e),this.stats_=E6(n),this.urlFn=l=>(this.appCheckToken&&(l[PL]=this.appCheckToken),Ele(n,wle,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new z7e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t8e)),P7e(()=>{if(this.isClosed_)return;this.scriptTagHolder=new T6((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jW)this.id=a,this.password=l;else if(o===H7e)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[jW]="t",s[Ile]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[G7e]=this.scriptTagHolder.uniqueCallbackIdentifier),s[dle]=b6,this.transportSessionId&&(s[fle]=this.transportSessionId),this.lastSessionId&&(s[_le]=this.lastSessionId),this.applicationId&&(s[yle]=this.applicationId),this.appCheckToken&&(s[PL]=this.appCheckToken),typeof location<"u"&&location.hostname&&mle.test(location.hostname)&&(s[ple]=gle);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gm.forceAllow_=!0}static forceDisallow(){gm.forceDisallow_=!0}static isAvailable(){return gm.forceAllow_?!0:!gm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!x7e()&&!O7e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Us(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Soe(n),r=ule(s,Z7e);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[J7e]="t",s[Tle]=e,s[Cle]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Us(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class T6{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=k7e(),window[W7e+this.uniqueCallbackIdentifier]=e,window[K7e+this.uniqueCallbackIdentifier]=n,this.myIFrame=T6.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Qr("frame writing exception"),a.stack&&Qr(a.stack),Qr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qr("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Tle]=this.myID,e[Cle]=this.myPW,e[Ile]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kle+s.length<=Sle;){const o=this.pendingSegs.shift();s=s+"&"+Q7e+r+"="+o.seg+"&"+Y7e+r+"="+o.ts+"&"+X7e+r+"="+o.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(e8e)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Qr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8e=16384,s8e=45e3;let vk=null;typeof MozWebSocket<"u"?vk=MozWebSocket:typeof WebSocket<"u"&&(vk=WebSocket);class da{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GT(this.connId),this.stats_=E6(n),this.connURL=da.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[dle]=b6,typeof location<"u"&&location.hostname&&mle.test(location.hostname)&&(o[ple]=gle),n&&(o[fle]=n),s&&(o[_le]=s),r&&(o[PL]=r),i&&(o[yle]=i),Ele(e,vle,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pp.set("previous_websocket_failure",!0);try{let s;Tje(),this.mySock=new vk(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){da.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&vk!==null&&!da.forceDisallow_}static previouslyFailed(){return pp.isInMemoryStorage||pp.get("previous_websocket_failure")===!0}markConnectionHealthy(){pp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=wE(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_e(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Us(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ule(n,n8e);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(s8e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}da.responsesRequiredToBeHealthy=2;da.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static get ALL_TRANSPORTS(){return[gm,da]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=da&&da.isAvailable();let s=n&&!da.previouslyFailed();if(e.webSocketOnly&&(n||to("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[da];else{const r=this.transports_=[];for(const i of NE.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);NE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}NE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8e=6e4,i8e=5e3,o8e=10*1024,a8e=100*1024,ux="t",BW="d",c8e="s",$W="r",l8e="e",zW="o",HW="a",WW="n",KW="p",u8e="h";class h8e{constructor(e,n,s,r,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GT("c:"+this.id+":"),this.transportManager_=new NE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=eb(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a8e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o8e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ux in e){const n=e[ux];n===HW?this.upgradeIfSecondaryHealthy_():n===$W?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===zW&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=mv("t",e),s=mv("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KW,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:HW,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:WW,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=mv("t",e),s=mv("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=mv(ux,e);if(BW in e){const s=e[BW];if(n===u8e){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===WW){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===c8e?this.onConnectionShutdown_(s):n===$W?this.onReset_(s):n===l8e?AL("Server Error: "+s):n===zW?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AL("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),b6!==s&&to("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),eb(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(r8e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eb(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(i8e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KW,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rle{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ale{constructor(e){this.allowedEvents_=e,this.listeners_={},_e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){_e(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends Ale{static getInstance(){return new wk}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!b4()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return _e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=32,QW=768;class _n{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Yt(){return new _n("")}function bt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function hf(t){return t.pieces_.length-t.pieceNum_}function kn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _n(t.pieces_,e)}function Ple(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function d8e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Nle(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xle(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new _n(e,0)}function js(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof _n)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new _n(n,0)}function Nt(t){return t.pieceNum_>=t.pieces_.length}function Si(t,e){const n=bt(t),s=bt(e);if(n===null)return e;if(n===s)return Si(kn(t),kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function C6(t,e){if(hf(t)!==hf(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ta(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(hf(t)>hf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class f8e{constructor(e,n){this.errorPrefix_=n,this.parts_=Nle(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=v1(this.parts_[s]);Ole(this)}}function p8e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=v1(e),Ole(t)}function g8e(t){const e=t.parts_.pop();t.byteLength_-=v1(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ole(t){if(t.byteLength_>QW)throw new Error(t.errorPrefix_+"has a key path longer than "+QW+" bytes ("+t.byteLength_+").");if(t.parts_.length>GW)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GW+") or object contains a cycle "+Yf(t))}function Yf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6 extends Ale{static getInstance(){return new I6}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return _e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=1e3,m8e=300*1e3,YW=30*1e3,_8e=1.3,y8e=3e4,v8e="server_kill",XW=3;class Vl extends Rle{constructor(e,n,s,r,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Vl.nextPersistentConnectionId_++,this.log_=GT("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_v,this.maxReconnectDelay_=m8e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");I6.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wk.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(Us(i)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new m1,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Vl.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&bu(e,"w")){const s=A_(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();to(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Nje(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YW)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Pje(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Us(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):AL("Unrecognized action received from server: "+Us(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_v,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_v,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>y8e&&(this.reconnectDelay_=_v),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_8e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Vl.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},u=function(d){_e(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Qr("getToken() completed but was canceled"):(Qr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new h8e(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{to(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(v8e)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&to(d),l())}}}interrupt(e){Qr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Qr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ZD(this.interruptReasons_)&&(this.reconnectDelay_=_v,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>w6(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new _n(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Qr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=XW&&(this.reconnectDelay_=YW,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Qr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=XW&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+ole.replace(/\./g,"-")]=1,b4()?e["framework.cordova"]=1:Noe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wk.getInstance().currentlyOnline();return ZD(this.interruptReasons_)&&e}}Vl.nextPersistentConnectionId_=0;Vl.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ct(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Ct(F_,e),r=new Ct(F_,n);return this.compare(s,r)!==0}minPost(){return Ct.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC;class Dle extends H1{static get __EMPTY_NODE(){return zC}static set __EMPTY_NODE(e){zC=e}compare(e,n){return yy(e.name,n.name)}isDefinedOn(e){throw hy("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ct.MIN}maxPost(){return new Ct(cg,zC)}makePost(e,n){return _e(typeof e=="string","KeyIndex indexValue must always be a string."),new Ct(e,zC)}toString(){return".key"}}const Gm=new Dle;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class er{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??er.RED,this.left=r??Xi.EMPTY_NODE,this.right=i??Xi.EMPTY_NODE}copy(e,n,s,r,i){return new er(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Xi.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}er.RED=!0;er.BLACK=!1;class w8e{copy(e,n,s,r,i){return this}insert(e,n,s){return new er(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Xi{constructor(e,n=Xi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Xi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,er.BLACK,null,null))}remove(e){return new Xi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,er.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new HC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new HC(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new HC(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new HC(this.root_,null,this.comparator_,!0,e)}}Xi.EMPTY_NODE=new w8e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8e(t,e){return yy(t.name,e.name)}function S6(t,e){return yy(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NL;function E8e(t){NL=t}const Lle=function(t){return typeof t=="number"?"number:"+hle(t):"string:"+t},Mle=function(t){if(t.isLeafNode()){const e=t.val();_e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&bu(e,".sv"),"Priority must be a string or number.")}else _e(t===NL||t.isEmpty(),"priority of unexpected type.");_e(t===NL||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JW;class Qs{static set __childrenNodeConstructor(e){JW=e}static get __childrenNodeConstructor(){return JW}constructor(e,n=Qs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Mle(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Nt(e)?this:bt(e)===".priority"?this.priorityNode_:Qs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=bt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(_e(s!==".priority"||hf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Qs.__childrenNodeConstructor.EMPTY_NODE.updateChild(kn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Lle(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=hle(this.value_):e+=this.value_,this.lazyHash_=cle(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qs.__childrenNodeConstructor?-1:(_e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Qs.VALUE_TYPE_ORDER.indexOf(n),i=Qs.VALUE_TYPE_ORDER.indexOf(s);return _e(r>=0,"Unknown leaf type: "+n),_e(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fle,Vle;function T8e(t){Fle=t}function C8e(t){Vle=t}class I8e extends H1{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?yy(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ct.MIN}maxPost(){return new Ct(cg,new Qs("[PRIORITY-POST]",Vle))}makePost(e,n){const s=Fle(e);return new Ct(n,new Qs("[PRIORITY-POST]",s))}toString(){return".priority"}}const Zn=new I8e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8e=Math.log(2);class k8e{constructor(e){const n=i=>parseInt(Math.log(i)/S8e,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bk=function(t,e,n,s){t.sort(e);const r=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new er(p,d.node,er.BLACK,null,null);{const m=parseInt(h/2,10)+l,w=r(l,m),k=r(m+1,u);return d=t[m],p=n?n(d):d,new er(p,d.node,er.BLACK,w,k)}},i=function(l){let u=null,h=null,d=t.length;const p=function(w,k){const P=d-w,D=d;d-=w;const M=r(P+1,D),V=t[P],q=n?n(V):V;m(new er(q,V.node,k,null,M))},m=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<l.count;++w){const k=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));k?p(P,er.BLACK):(p(P,er.BLACK),p(P,er.RED))}return h},o=new k8e(t.length),a=i(o);return new Xi(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx;const jg={};class Dl{static get Default(){return _e(jg&&Zn,"ChildrenNode.ts has not been loaded"),hx=hx||new Dl({".priority":jg},{".priority":Zn}),hx}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=A_(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xi?n:null}hasIndex(e){return bu(this.indexSet_,e.toString())}addIndex(e,n){_e(e!==Gm,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Ct.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=bk(s,e.getCompare()):a=jg;const l=e.toString(),u={...this.indexSet_};u[l]=e;const h={...this.indexes_};return h[l]=a,new Dl(h,u)}addToIndexes(e,n){const s=ek(this.indexes_,(r,i)=>{const o=A_(this.indexSet_,i);if(_e(o,"Missing index implementation for "+i),r===jg)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ct.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),bk(a,o.getCompare())}else return jg;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new Ct(e.name,a))),l.insert(e,e.node)}});return new Dl(s,this.indexSet_)}removeFromIndexes(e,n){const s=ek(this.indexes_,r=>{if(r===jg)return r;{const i=n.get(e.name);return i?r.remove(new Ct(e.name,i)):r}});return new Dl(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yv;class Be{static get EMPTY_NODE(){return yv||(yv=new Be(new Xi(S6),null,Dl.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Mle(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yv}updatePriority(e){return this.children_.isEmpty()?this:new Be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?yv:n}}getChild(e){const n=bt(e);return n===null?this:this.getImmediateChild(n).getChild(kn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(_e(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Ct(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?yv:this.priorityNode_;return new Be(r,o,i)}}updateChild(e,n){const s=bt(e);if(s===null)return n;{_e(bt(e)!==".priority"||hf(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(kn(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(Zn,(o,a)=>{n[o]=a.val(e),s++,i&&Be.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Lle(this.getPriority().val())+":"),this.forEachChild(Zn,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":cle(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Ct(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ct(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ct(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ct.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ct.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===QT?-1:0}withIndex(e){if(e===Gm||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Be(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Gm||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Zn),r=n.getIterator(Zn);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Gm?null:this.indexMap_.get(e.toString())}}Be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class R8e extends Be{constructor(){super(new Xi(S6),Be.EMPTY_NODE,Dl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Be.EMPTY_NODE}isEmpty(){return!1}}const QT=new R8e;Object.defineProperties(Ct,{MIN:{value:new Ct(F_,Be.EMPTY_NODE)},MAX:{value:new Ct(cg,QT)}});Dle.__EMPTY_NODE=Be.EMPTY_NODE;Qs.__childrenNodeConstructor=Be;E8e(QT);C8e(QT);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8e=!0;function sr(t,e=null){if(t===null)return Be.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),_e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qs(n,sr(e))}if(!(t instanceof Array)&&A8e){const n=[];let s=!1;if(ro(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=sr(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new Ct(o,l)))}}),n.length===0)return Be.EMPTY_NODE;const i=bk(n,b8e,o=>o.name,S6);if(s){const o=bk(n,Zn.getCompare());return new Be(i,sr(e),new Dl({".priority":o},{".priority":Zn}))}else return new Be(i,sr(e),Dl.Default)}else{let n=Be.EMPTY_NODE;return ro(t,(s,r)=>{if(bu(t,s)&&s.substring(0,1)!=="."){const i=sr(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(sr(e))}}T8e(sr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8e extends H1{constructor(e){super(),this.indexPath_=e,_e(!Nt(e)&&bt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?yy(e.name,n.name):i}makePost(e,n){const s=sr(e),r=Be.EMPTY_NODE.updateChild(this.indexPath_,s);return new Ct(n,r)}maxPost(){const e=Be.EMPTY_NODE.updateChild(this.indexPath_,QT);return new Ct(cg,e)}toString(){return Nle(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8e extends H1{compare(e,n){const s=e.node.compareTo(n.node);return s===0?yy(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ct.MIN}maxPost(){return Ct.MAX}makePost(e,n){const s=sr(e);return new Ct(n,s)}toString(){return".value"}}const x8e=new N8e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ule(t){return{type:"value",snapshotNode:t}}function V_(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function xE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function OE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function O8e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){_e(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(xE(n,a)):_e(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(V_(n,s)):o.trackChildChange(OE(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Zn,(r,i)=>{n.hasChild(r)||s.trackChildChange(xE(r,i))}),n.isLeafNode()||n.forEachChild(Zn,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(OE(r,i,o))}else s.trackChildChange(V_(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Be.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.indexedFilter_=new k6(e.getIndex()),this.index_=e.getIndex(),this.startPost_=DE.getStartPost_(e),this.endPost_=DE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Ct(n,s))||(s=Be.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=Be.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(Be.EMPTY_NODE);const i=this;return n.forEachChild(Zn,(o,a)=>{i.matches(new Ct(o,a))||(r=r.updateImmediateChild(o,Be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new DE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Ct(n,s))||(s=Be.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=Be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=Be.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(Be.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,Be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;_e(a.numChildren()===this.limit_,"");const l=new Ct(n,s),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,u,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,l);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(OE(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(xE(n,d));const k=a.updateImmediateChild(n,Be.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(V_(p.name,p.node)),k.updateImmediateChild(p.name,p.node)):k}}else return s.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(xE(u.name,u.node)),i.trackChildChange(V_(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(u.name,Be.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:F_}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new R6;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L8e(t){return t.loadsAllData()?new k6(t.getIndex()):t.hasLimit()?new D8e(t):new DE(t)}function ZW(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Zn?n="$priority":t.index_===x8e?n="$value":t.index_===Gm?n="$key":(_e(t.index_ instanceof P8e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Us(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Us(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Us(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Us(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Us(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function e7(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Zn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends Rle{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(_e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=GT("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ek.getListenId_(e,s),a={};this.listens_[o]=a;const l=ZW(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,s),A_(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",r(p,null)}})}unlisten(e,n){const s=Ek.getListenId_(e,n);delete this.listens_[s]}get(e){const n=ZW(e._queryParams),s=e._path.toString(),r=new m1;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dy(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=wE(a.responseText)}catch{to("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&to("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8e{constructor(){this.rootNode_=Be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(){return{value:null,children:new Map}}function qle(t,e,n){if(Nt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=bt(e);t.children.has(s)||t.children.set(s,Tk());const r=t.children.get(s);e=kn(e),qle(r,e,n)}}function xL(t,e,n){t.value!==null?n(e,t.value):F8e(t,(s,r)=>{const i=new _n(e.toString()+"/"+s);xL(r,i,n)})}function F8e(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&ro(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=10*1e3,U8e=30*1e3,q8e=300*1e3;class j8e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new V8e(e);const s=t7+(U8e-t7)*Math.random();eb(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;ro(e,(r,i)=>{i>0&&bu(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),eb(this.reportStats_.bind(this),Math.floor(Math.random()*2*q8e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ca;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ca||(Ca={}));function jle(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function A6(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function P6(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Ca.ACK_USER_WRITE,this.source=jle()}operationForChild(e){if(Nt(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new _n(e));return new Ck(Yt(),n,this.revert)}}else return _e(bt(this.path)===e,"operationForChild called for unrelated child."),new Ck(kn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.source=e,this.path=n,this.type=Ca.LISTEN_COMPLETE}operationForChild(e){return Nt(this.path)?new LE(this.source,Yt()):new LE(this.source,kn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Ca.OVERWRITE}operationForChild(e){return Nt(this.path)?new lg(this.source,Yt(),this.snap.getImmediateChild(e)):new lg(this.source,kn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Ca.MERGE}operationForChild(e){if(Nt(this.path)){const n=this.children.subtree(new _n(e));return n.isEmpty()?null:n.value?new lg(this.source,Yt(),n.value):new ME(this.source,Yt(),n)}else return _e(bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ME(this.source,kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Nt(e))return this.isFullyInitialized()&&!this.filtered_;const n=bt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $8e(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(O8e(o.childName,o.snapshotNode))}),vv(t,r,"child_removed",e,s,n),vv(t,r,"child_added",e,s,n),vv(t,r,"child_moved",i,s,n),vv(t,r,"child_changed",e,s,n),vv(t,r,"value",e,s,n),r}function vv(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,l)=>H8e(t,a,l)),o.forEach(a=>{const l=z8e(t,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function z8e(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function H8e(t,e,n){if(e.childName==null||n.childName==null)throw hy("Should only compare child_ events.");const s=new Ct(e.childName,e.snapshotNode),r=new Ct(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){return{eventCache:t,serverCache:e}}function tb(t,e,n,s){return W1(new df(e,n,s),t.serverCache)}function Ble(t,e,n,s){return W1(t.eventCache,new df(e,n,s))}function Ik(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ug(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dx;const W8e=()=>(dx||(dx=new Xi(N7e)),dx);class xn{static fromObject(e){let n=new xn(null);return ro(e,(s,r)=>{n=n.set(new _n(s),r)}),n}constructor(e,n=W8e()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Yt(),value:this.value};if(Nt(e))return null;{const s=bt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(kn(e),n);return i!=null?{path:js(new _n(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Nt(e))return this;{const n=bt(e),s=this.children.get(n);return s!==null?s.subtree(kn(e)):new xn(null)}}set(e,n){if(Nt(e))return new xn(n,this.children);{const s=bt(e),i=(this.children.get(s)||new xn(null)).set(kn(e),n),o=this.children.insert(s,i);return new xn(this.value,o)}}remove(e){if(Nt(e))return this.children.isEmpty()?new xn(null):new xn(null,this.children);{const n=bt(e),s=this.children.get(n);if(s){const r=s.remove(kn(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new xn(null):new xn(this.value,i)}else return this}}get(e){if(Nt(e))return this.value;{const n=bt(e),s=this.children.get(n);return s?s.get(kn(e)):null}}setTree(e,n){if(Nt(e))return n;{const s=bt(e),i=(this.children.get(s)||new xn(null)).setTree(kn(e),n);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new xn(this.value,o)}}fold(e){return this.fold_(Yt(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(js(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Yt(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Nt(e))return null;{const i=bt(e),o=this.children.get(i);return o?o.findOnPath_(kn(e),js(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Yt(),n)}foreachOnPath_(e,n,s){if(Nt(e))return this;{this.value&&s(n,this.value);const r=bt(e),i=this.children.get(r);return i?i.foreachOnPath_(kn(e),js(n,r),s):new xn(null)}}foreach(e){this.foreach_(Yt(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(js(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.writeTree_=e}static empty(){return new ja(new xn(null))}}function nb(t,e,n){if(Nt(e))return new ja(new xn(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Si(r,e);return i=i.updateChild(o,n),new ja(t.writeTree_.set(r,i))}else{const r=new xn(n),i=t.writeTree_.setTree(e,r);return new ja(i)}}}function n7(t,e,n){let s=t;return ro(n,(r,i)=>{s=nb(s,js(e,r),i)}),s}function s7(t,e){if(Nt(e))return ja.empty();{const n=t.writeTree_.setTree(e,new xn(null));return new ja(n)}}function OL(t,e){return Sg(t,e)!=null}function Sg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Si(n.path,e)):null}function r7(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Zn,(s,r)=>{e.push(new Ct(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Ct(s,r.value))}),e}function Ed(t,e){if(Nt(e))return t;{const n=Sg(t,e);return n!=null?new ja(new xn(n)):new ja(t.writeTree_.subtree(e))}}function DL(t){return t.writeTree_.isEmpty()}function U_(t,e){return $le(Yt(),t.writeTree_,e)}function $le(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(_e(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=$le(js(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(js(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e){return Kle(e,t)}function K8e(t,e,n,s,r){_e(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=nb(t.visibleWrites,e,n)),t.lastWriteId=s}function G8e(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Q8e(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);_e(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Y8e(a,s.path)?r=!1:Ta(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return X8e(t),!0;if(s.snap)t.visibleWrites=s7(t.visibleWrites,s.path);else{const a=s.children;ro(a,l=>{t.visibleWrites=s7(t.visibleWrites,js(s.path,l))})}return!0}else return!1}function Y8e(t,e){if(t.snap)return Ta(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ta(js(t.path,n),e))return!0;return!1}function X8e(t){t.visibleWrites=zle(t.allWrites,J8e,Yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function J8e(t){return t.visible}function zle(t,e,n){let s=ja.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)Ta(n,o)?(a=Si(n,o),s=nb(s,a,i.snap)):Ta(o,n)&&(a=Si(o,n),s=nb(s,Yt(),i.snap.getChild(a)));else if(i.children){if(Ta(n,o))a=Si(n,o),s=n7(s,a,i.children);else if(Ta(o,n))if(a=Si(o,n),Nt(a))s=n7(s,Yt(),i.children);else{const l=A_(i.children,bt(a));if(l){const u=l.getChild(kn(a));s=nb(s,Yt(),u)}}}else throw hy("WriteRecord should have .snap or .children")}}return s}function Hle(t,e,n,s,r){if(!s&&!r){const i=Sg(t.visibleWrites,e);if(i!=null)return i;{const o=Ed(t.visibleWrites,e);if(DL(o))return n;if(n==null&&!OL(o,Yt()))return null;{const a=n||Be.EMPTY_NODE;return U_(o,a)}}}else{const i=Ed(t.visibleWrites,e);if(!r&&DL(i))return n;if(!r&&n==null&&!OL(i,Yt()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(Ta(u.path,e)||Ta(e,u.path))},a=zle(t.allWrites,o,e),l=n||Be.EMPTY_NODE;return U_(a,l)}}}function Z8e(t,e,n){let s=Be.EMPTY_NODE;const r=Sg(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Zn,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Ed(t.visibleWrites,e);return n.forEachChild(Zn,(o,a)=>{const l=U_(Ed(i,new _n(o)),a);s=s.updateImmediateChild(o,l)}),r7(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Ed(t.visibleWrites,e);return r7(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function eKe(t,e,n,s,r){_e(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=js(e,n);if(OL(t.visibleWrites,i))return null;{const o=Ed(t.visibleWrites,i);return DL(o)?r.getChild(n):U_(o,r.getChild(n))}}function tKe(t,e,n,s){const r=js(e,n),i=Sg(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Ed(t.visibleWrites,r);return U_(o,s.getNode().getImmediateChild(n))}else return null}function nKe(t,e){return Sg(t.visibleWrites,e)}function sKe(t,e,n,s,r,i,o){let a;const l=Ed(t.visibleWrites,e),u=Sg(l,Yt());if(u!=null)a=u;else if(n!=null)a=U_(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function rKe(){return{visibleWrites:ja.empty(),allWrites:[],lastWriteId:-1}}function Sk(t,e,n,s){return Hle(t.writeTree,t.treePath,e,n,s)}function N6(t,e){return Z8e(t.writeTree,t.treePath,e)}function i7(t,e,n,s){return eKe(t.writeTree,t.treePath,e,n,s)}function kk(t,e){return nKe(t.writeTree,js(t.treePath,e))}function iKe(t,e,n,s,r,i){return sKe(t.writeTree,t.treePath,e,n,s,r,i)}function x6(t,e,n){return tKe(t.writeTree,t.treePath,e,n)}function Wle(t,e){return Kle(js(t.treePath,e),t.writeTree)}function Kle(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oKe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;_e(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),_e(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,OE(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,xE(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,V_(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,OE(s,e.snapshotNode,r.oldSnap));else throw hy("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aKe{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Gle=new aKe;class O6{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new df(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return x6(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ug(this.viewCache_),i=iKe(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cKe(t){return{filter:t}}function lKe(t,e){_e(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),_e(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function uKe(t,e,n,s,r){const i=new oKe;let o,a;if(n.type===Ca.OVERWRITE){const u=n;u.source.fromUser?o=LL(t,e,u.path,u.snap,s,r,i):(_e(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Nt(u.path),o=Rk(t,e,u.path,u.snap,s,r,a,i))}else if(n.type===Ca.MERGE){const u=n;u.source.fromUser?o=dKe(t,e,u.path,u.children,s,r,i):(_e(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=ML(t,e,u.path,u.children,s,r,a,i))}else if(n.type===Ca.ACK_USER_WRITE){const u=n;u.revert?o=gKe(t,e,u.path,s,r,i):o=fKe(t,e,u.path,u.affectedTree,s,r,i)}else if(n.type===Ca.LISTEN_COMPLETE)o=pKe(t,e,n.path,s,i);else throw hy("Unknown operation type: "+n.type);const l=i.getChanges();return hKe(e,o,l),{viewCache:o,changes:l}}function hKe(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=Ik(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(Ule(Ik(e)))}}function Qle(t,e,n,s,r,i){const o=e.eventCache;if(kk(s,n)!=null)return e;{let a,l;if(Nt(n))if(_e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=ug(e),h=u instanceof Be?u:Be.EMPTY_NODE,d=N6(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Sk(s,ug(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=bt(n);if(u===".priority"){_e(hf(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=i7(s,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=kn(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=i7(s,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=x6(s,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,r,i):a=o.getNode()}}return tb(e,a,o.isFullyInitialized()||Nt(n),t.filter.filtersNodes())}}function Rk(t,e,n,s,r,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Nt(n))u=h.updateFullNode(l.getNode(),s,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,s);u=h.updateFullNode(l.getNode(),m,null)}else{const m=bt(n);if(!l.isCompleteForPath(n)&&hf(n)>1)return e;const w=kn(n),P=l.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?u=h.updatePriority(l.getNode(),P):u=h.updateChild(l.getNode(),m,P,w,Gle,null)}const d=Ble(e,u,l.isFullyInitialized()||Nt(n),h.filtersNodes()),p=new O6(r,d,i);return Qle(t,d,n,r,p,a)}function LL(t,e,n,s,r,i,o){const a=e.eventCache;let l,u;const h=new O6(r,e,i);if(Nt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=tb(e,u,!0,t.filter.filtersNodes());else{const d=bt(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),s),l=tb(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=kn(n),m=a.getNode().getImmediateChild(d);let w;if(Nt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?Ple(p)===".priority"&&k.getChild(xle(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=Be.EMPTY_NODE}if(m.equals(w))l=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);l=tb(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function o7(t,e){return t.eventCache.isCompleteForChild(e)}function dKe(t,e,n,s,r,i,o){let a=e;return s.foreach((l,u)=>{const h=js(n,l);o7(e,bt(h))&&(a=LL(t,a,h,u,r,i,o))}),s.foreach((l,u)=>{const h=js(n,l);o7(e,bt(h))||(a=LL(t,a,h,u,r,i,o))}),a}function a7(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function ML(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Nt(n)?u=s:u=new xn(null).setTree(n,s);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=a7(t,m,p);l=Rk(t,l,new _n(d),w,r,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=a7(t,w,p);l=Rk(t,l,new _n(d),k,r,i,o,a)}}),l}function fKe(t,e,n,s,r,i,o){if(kk(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Nt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Rk(t,e,n,l.getNode().getChild(n),r,i,a,o);if(Nt(n)){let u=new xn(null);return l.getNode().forEachChild(Gm,(h,d)=>{u=u.set(new _n(h),d)}),ML(t,e,n,u,r,i,a,o)}else return e}else{let u=new xn(null);return s.foreach((h,d)=>{const p=js(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),ML(t,e,n,u,r,i,a,o)}}function pKe(t,e,n,s,r){const i=e.serverCache,o=Ble(e,i.getNode(),i.isFullyInitialized()||Nt(n),i.isFiltered());return Qle(t,o,n,s,Gle,r)}function gKe(t,e,n,s,r,i){let o;if(kk(s,n)!=null)return e;{const a=new O6(s,e,r),l=e.eventCache.getNode();let u;if(Nt(n)||bt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Sk(s,ug(e));else{const d=e.serverCache.getNode();_e(d instanceof Be,"serverChildren would be complete if leaf node"),h=N6(s,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=bt(n);let d=x6(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,kn(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,Be.EMPTY_NODE,kn(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Sk(s,ug(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||kk(s,Yt())!=null,tb(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mKe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new k6(s.getIndex()),i=L8e(s);this.processor_=cKe(i);const o=n.serverCache,a=n.eventCache,l=r.updateFullNode(Be.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Be.EMPTY_NODE,a.getNode(),null),h=new df(l,o.isFullyInitialized(),r.filtersNodes()),d=new df(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=W1(d,h),this.eventGenerator_=new B8e(this.query_)}get query(){return this.query_}}function _Ke(t){return t.viewCache_.serverCache.getNode()}function yKe(t){return Ik(t.viewCache_)}function vKe(t,e){const n=ug(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Nt(e)&&!n.getImmediateChild(bt(e)).isEmpty())?n.getChild(e):null}function c7(t){return t.eventRegistrations_.length===0}function wKe(t,e){t.eventRegistrations_.push(e)}function l7(t,e,n){const s=[];if(n){_e(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function u7(t,e,n,s){e.type===Ca.MERGE&&e.source.queryId!==null&&(_e(ug(t.viewCache_),"We should always have a full cache before handling merges"),_e(Ik(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=uKe(t.processor_,r,e,n,s);return lKe(t.processor_,i.viewCache),_e(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Yle(t,i.changes,i.viewCache.eventCache.getNode(),null)}function bKe(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Zn,(i,o)=>{s.push(V_(i,o))}),n.isFullyInitialized()&&s.push(Ule(n.getNode())),Yle(t,s,n.getNode(),e)}function Yle(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return $8e(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ak;class Xle{constructor(){this.views=new Map}}function EKe(t){_e(!Ak,"__referenceConstructor has already been defined"),Ak=t}function TKe(){return _e(Ak,"Reference.ts has not been loaded"),Ak}function CKe(t){return t.views.size===0}function D6(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return _e(i!=null,"SyncTree gave us an op for an invalid query."),u7(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(u7(o,e,n,s));return i}}function Jle(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Sk(n,r?s:null),l=!1;a?l=!0:s instanceof Be?(a=N6(n,s),l=!1):(a=Be.EMPTY_NODE,l=!1);const u=W1(new df(a,l,!1),new df(s,r,!1));return new mKe(e,u)}return o}function IKe(t,e,n,s,r,i){const o=Jle(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),wKe(o,n),bKe(o,n)}function SKe(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=ff(t);if(r==="default")for(const[l,u]of t.views.entries())o=o.concat(l7(u,n,s)),c7(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(r);l&&(o=o.concat(l7(l,n,s)),c7(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!ff(t)&&i.push(new(TKe())(e._repo,e._path)),{removed:i,events:o}}function Zle(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Td(t,e){let n=null;for(const s of t.views.values())n=n||vKe(s,e);return n}function eue(t,e){if(e._queryParams.loadsAllData())return G1(t);{const s=e._queryIdentifier;return t.views.get(s)}}function tue(t,e){return eue(t,e)!=null}function ff(t){return G1(t)!=null}function G1(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pk;function kKe(t){_e(!Pk,"__referenceConstructor has already been defined"),Pk=t}function RKe(){return _e(Pk,"Reference.ts has not been loaded"),Pk}let AKe=1;class h7{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xn(null),this.pendingWriteTree_=rKe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nue(t,e,n,s,r){return K8e(t.pendingWriteTree_,e,n,s,r),r?XT(t,new lg(jle(),e,n)):[]}function gp(t,e,n=!1){const s=G8e(t.pendingWriteTree_,e);if(Q8e(t.pendingWriteTree_,e)){let i=new xn(null);return s.snap!=null?i=i.set(Yt(),!0):ro(s.children,o=>{i=i.set(new _n(o),!0)}),XT(t,new Ck(s.path,i,n))}else return[]}function YT(t,e,n){return XT(t,new lg(A6(),e,n))}function PKe(t,e,n){const s=xn.fromObject(n);return XT(t,new ME(A6(),e,s))}function NKe(t,e){return XT(t,new LE(A6(),e))}function xKe(t,e,n){const s=M6(t,n);if(s){const r=F6(s),i=r.path,o=r.queryId,a=Si(i,e),l=new LE(P6(o),a);return V6(t,i,l)}else return[]}function Nk(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||tue(o,e))){const l=SKe(o,e,n,s);CKe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!r){const h=u.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>ff(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=LKe(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,D=oue(t,k);t.listenProvider_.startListening(sb(P),FE(t,P),D.hashFn,D.onComplete)}}}!d&&u.length>0&&!s&&(h?t.listenProvider_.stopListening(sb(e),null):u.forEach(p=>{const m=t.queryToTagMap.get(Q1(p));t.listenProvider_.stopListening(sb(p),m)}))}MKe(t,u)}return a}function sue(t,e,n,s){const r=M6(t,s);if(r!=null){const i=F6(r),o=i.path,a=i.queryId,l=Si(o,e),u=new lg(P6(a),l,n);return V6(t,o,u)}else return[]}function OKe(t,e,n,s){const r=M6(t,s);if(r){const i=F6(r),o=i.path,a=i.queryId,l=Si(o,e),u=xn.fromObject(n),h=new ME(P6(a),l,u);return V6(t,o,h)}else return[]}function FL(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Si(p,r);i=i||Td(m,w),o=o||ff(m)});let a=t.syncPointTree_.get(r);a?(o=o||ff(a),i=i||Td(a,Yt())):(a=new Xle,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;i!=null?l=!0:(l=!1,i=Be.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,w)=>{const k=Td(w,Yt());k&&(i=i.updateImmediateChild(m,k))}));const u=tue(a,e);if(!u&&!e._queryParams.loadsAllData()){const p=Q1(e);_e(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=FKe();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=K1(t.pendingWriteTree_,r);let d=IKe(a,e,n,h,i,l);if(!u&&!o&&!s){const p=eue(a,e);d=d.concat(VKe(t,e,p))}return d}function L6(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Si(o,e),u=Td(a,l);if(u)return u});return Hle(r,e,i,n,!0)}function DKe(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Si(u,n);s=s||Td(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Td(r,Yt()):(r=new Xle,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new df(s,!0,!1):null,a=K1(t.pendingWriteTree_,e._path),l=Jle(r,e,a,i?o.getNode():Be.EMPTY_NODE,i);return yKe(l)}function XT(t,e){return rue(e,t.syncPointTree_,null,K1(t.pendingWriteTree_,Yt()))}function rue(t,e,n,s){if(Nt(t.path))return iue(t,e,n,s);{const r=e.get(Yt());n==null&&r!=null&&(n=Td(r,Yt()));let i=[];const o=bt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=Wle(s,o);i=i.concat(rue(a,l,u,h))}return r&&(i=i.concat(D6(r,t,s,n))),i}}function iue(t,e,n,s){const r=e.get(Yt());n==null&&r!=null&&(n=Td(r,Yt()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Wle(s,o),h=t.operationForChild(o);h&&(i=i.concat(iue(h,a,l,u)))}),r&&(i=i.concat(D6(r,t,s,n))),i}function oue(t,e){const n=e.query,s=FE(t,n);return{hashFn:()=>(_Ke(e)||Be.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?xKe(t,n._path,s):NKe(t,n._path);{const i=D7e(r,n);return Nk(t,n,null,i)}}}}function FE(t,e){const n=Q1(e);return t.queryToTagMap.get(n)}function Q1(t){return t._path.toString()+"$"+t._queryIdentifier}function M6(t,e){return t.tagToQueryMap.get(e)}function F6(t){const e=t.indexOf("$");return _e(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _n(t.substr(0,e))}}function V6(t,e,n){const s=t.syncPointTree_.get(e);_e(s,"Missing sync point for query tag that we're tracking");const r=K1(t.pendingWriteTree_,e);return D6(s,n,r,null)}function LKe(t){return t.fold((e,n,s)=>{if(n&&ff(n))return[G1(n)];{let r=[];return n&&(r=Zle(n)),ro(s,(i,o)=>{r=r.concat(o)}),r}})}function sb(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(RKe())(t._repo,t._path):t}function MKe(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=Q1(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function FKe(){return AKe++}function VKe(t,e,n){const s=e._path,r=FE(t,e),i=oue(t,n),o=t.listenProvider_.startListening(sb(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)_e(!ff(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!Nt(u)&&h&&ff(h))return[G1(h).query];{let p=[];return h&&(p=p.concat(Zle(h).map(m=>m.query))),ro(d,(m,w)=>{p=p.concat(w)}),p}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(sb(h),FE(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new U6(n)}node(){return this.node_}}class q6{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=js(this.path_,e);return new q6(this.syncTree_,n)}node(){return L6(this.syncTree_,this.path_)}}const UKe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},d7=function(t,e,n){if(!t||typeof t!="object")return t;if(_e(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return qKe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jKe(t[".sv"],e);_e(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},qKe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:_e(!1,"Unexpected server value: "+t)}},jKe=function(t,e,n){t.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&_e(!1,"Unexpected increment value: "+s);const r=e.node();if(_e(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const o=r.getValue();return typeof o!="number"?s:o+s},BKe=function(t,e,n,s){return j6(e,new q6(n,t),s)},aue=function(t,e,n){return j6(t,new U6(e),n)};function j6(t,e,n){const s=t.getPriority().val(),r=d7(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=d7(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Qs(a,sr(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Qs(r))),o.forEachChild(Zn,(a,l)=>{const u=j6(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function $6(t,e){let n=e instanceof _n?e:new _n(e),s=t,r=bt(n);for(;r!==null;){const i=A_(s.node.children,r)||{children:{},childCount:0};s=new B6(r,s,i),n=kn(n),r=bt(n)}return s}function wy(t){return t.node.value}function cue(t,e){t.node.value=e,VL(t)}function lue(t){return t.node.childCount>0}function $Ke(t){return wy(t)===void 0&&!lue(t)}function Y1(t,e){ro(t.node.children,(n,s)=>{e(new B6(n,t,s))})}function uue(t,e,n,s){n&&e(t),Y1(t,r=>{uue(r,e,!0)})}function zKe(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function JT(t){return new _n(t.parent===null?t.name:JT(t.parent)+"/"+t.name)}function VL(t){t.parent!==null&&HKe(t.parent,t.name,t)}function HKe(t,e,n){const s=$Ke(n),r=bu(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,VL(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,VL(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WKe=/[\[\].#$\/\u0000-\u001F\u007F]/,KKe=/[\[\].#$\u0000-\u001F\u007F]/,fx=10*1024*1024,hue=function(t){return typeof t=="string"&&t.length!==0&&!WKe.test(t)},due=function(t){return typeof t=="string"&&t.length!==0&&!KKe.test(t)},GKe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),due(t)},QKe=function(t,e,n,s){z6(E4(t,"value"),e,n)},z6=function(t,e,n){const s=n instanceof _n?new f8e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Yf(s));if(typeof e=="function")throw new Error(t+"contains a function "+Yf(s)+" with contents = "+e.toString());if(lle(e))throw new Error(t+"contains "+e.toString()+" "+Yf(s));if(typeof e=="string"&&e.length>fx/3&&v1(e)>fx)throw new Error(t+"contains a string greater than "+fx+" utf8 bytes "+Yf(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(ro(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!hue(o)))throw new Error(t+" contains an invalid key ("+o+") "+Yf(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p8e(s,o),z6(t,a,s),g8e(s)}),r&&i)throw new Error(t+' contains ".value" child '+Yf(s)+" in addition to actual children.")}},fue=function(t,e,n,s){if(!due(n))throw new Error(E4(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},YKe=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fue(t,e,n)},pue=function(t,e){if(bt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},XKe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hue(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!GKe(n))throw new Error(E4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JKe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function H6(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!C6(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function gue(t,e,n){H6(t,n),mue(t,s=>C6(s,e))}function Xc(t,e,n){H6(t,n),mue(t,s=>Ta(s,e)||Ta(e,s))}function mue(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(ZKe(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ZKe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Zw&&Qr("event: "+n.toString()),vy(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eGe="repo_interrupt",tGe=25;class nGe{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new JKe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tk(),this.transactionQueueTree_=new B6,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sGe(t,e,n){if(t.stats_=E6(t.repoInfo_),t.forceRestClient_||V7e())t.server_=new Ek(t.repoInfo_,(s,r,i,o)=>{f7(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>p7(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Us(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Vl(t.repoInfo_,e,(s,r,i,o)=>{f7(t,s,r,i,o)},s=>{p7(t,s)},s=>{iGe(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=$7e(t.repoInfo_,()=>new j8e(t.stats_,t.server_)),t.infoData_=new M8e,t.infoSyncTree_=new h7({startListening:(s,r,i,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=YT(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),K6(t,"connected",!1),t.serverSyncTree_=new h7({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,l)=>{const u=o(a,l);Xc(t.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function rGe(t){const n=t.infoData_.getNode(new _n(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function W6(t){return UKe({timestamp:rGe(t)})}function f7(t,e,n,s,r){t.dataUpdateCount++;const i=new _n(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const l=ek(n,u=>sr(u));o=OKe(t.serverSyncTree_,i,l,r)}else{const l=sr(n);o=sue(t.serverSyncTree_,i,l,r)}else if(s){const l=ek(n,u=>sr(u));o=PKe(t.serverSyncTree_,i,l)}else{const l=sr(n);o=YT(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=J1(t,i)),Xc(t.eventQueue_,a,o)}function p7(t,e){K6(t,"connected",e),e===!1&&cGe(t)}function iGe(t,e){ro(e,(n,s)=>{K6(t,n,s)})}function K6(t,e,n){const s=new _n("/.info/"+e),r=sr(n);t.infoData_.updateSnapshot(s,r);const i=YT(t.infoSyncTree_,s,r);Xc(t.eventQueue_,s,i)}function _ue(t){return t.nextWriteId_++}function oGe(t,e,n){const s=DKe(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=sr(r).withIndex(e._queryParams.getIndex());FL(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=YT(t.serverSyncTree_,e._path,i);else{const a=FE(t.serverSyncTree_,e);o=sue(t.serverSyncTree_,e._path,i,a)}return Xc(t.eventQueue_,e._path,o),Nk(t.serverSyncTree_,e,n,null,!0),i},r=>(X1(t,"get for query "+Us(e)+" failed: "+r),Promise.reject(new Error(r))))}function aGe(t,e,n,s,r){X1(t,"set",{path:e.toString(),value:n,priority:s});const i=W6(t),o=sr(n,s),a=L6(t.serverSyncTree_,e),l=aue(o,a,i),u=_ue(t),h=nue(t.serverSyncTree_,e,l,u,!0);H6(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||to("set at "+e+" failed: "+p);const k=gp(t.serverSyncTree_,u,!w);Xc(t.eventQueue_,e,k),dGe(t,r,p,m)});const d=Eue(t,e);J1(t,d),Xc(t.eventQueue_,d,[])}function cGe(t){X1(t,"onDisconnectEvents");const e=W6(t),n=Tk();xL(t.onDisconnect_,Yt(),(r,i)=>{const o=BKe(r,i,t.serverSyncTree_,e);qle(n,r,o)});let s=[];xL(n,Yt(),(r,i)=>{s=s.concat(YT(t.serverSyncTree_,r,i));const o=Eue(t,r);J1(t,o)}),t.onDisconnect_=Tk(),Xc(t.eventQueue_,Yt(),s)}function lGe(t,e,n){let s;bt(e._path)===".info"?s=FL(t.infoSyncTree_,e,n):s=FL(t.serverSyncTree_,e,n),gue(t.eventQueue_,e._path,s)}function uGe(t,e,n){let s;bt(e._path)===".info"?s=Nk(t.infoSyncTree_,e,n):s=Nk(t.serverSyncTree_,e,n),gue(t.eventQueue_,e._path,s)}function hGe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(eGe)}function X1(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Qr(n,...e)}function dGe(t,e,n,s){e&&vy(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function yue(t,e,n){return L6(t.serverSyncTree_,e,n)||Be.EMPTY_NODE}function G6(t,e=t.transactionQueueTree_){if(e||Z1(t,e),wy(e)){const n=wue(t,e);_e(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&fGe(t,JT(e),n)}else lue(e)&&Y1(e,n=>{G6(t,n)})}function fGe(t,e,n){const s=n.map(u=>u.currentWriteId),r=yue(t,e,s);let i=r;const o=r.hash();for(let u=0;u<n.length;u++){const h=n[u];_e(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Si(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{X1(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(gp(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Z1(t,$6(t.transactionQueueTree_,e)),G6(t,t.transactionQueueTree_),Xc(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)vy(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{to("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}J1(t,e)}},o)}function J1(t,e){const n=vue(t,e),s=JT(n),r=wue(t,n);return pGe(t,r,s),s}function pGe(t,e,n){if(e.length===0)return;const s=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Si(n,l.path);let h=!1,d;if(_e(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,r=r.concat(gp(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=tGe)h=!0,d="maxretry",r=r.concat(gp(t.serverSyncTree_,l.currentWriteId,!0));else{const p=yue(t,l.path,o);l.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){z6("transaction failed: Data returned ",m,l.path);let w=sr(m);typeof m=="object"&&m!=null&&bu(m,".priority")||(w=w.updatePriority(p.getPriority()));const P=l.currentWriteId,D=W6(t),M=aue(w,p,D);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=M,l.currentWriteId=_ue(t),o.splice(o.indexOf(P),1),r=r.concat(nue(t.serverSyncTree_,l.path,M,l.currentWriteId,l.applyLocally)),r=r.concat(gp(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",r=r.concat(gp(t.serverSyncTree_,l.currentWriteId,!0))}Xc(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(d),!1,null))))}Z1(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)vy(s[a]);G6(t,t.transactionQueueTree_)}function vue(t,e){let n,s=t.transactionQueueTree_;for(n=bt(e);n!==null&&wy(s)===void 0;)s=$6(s,n),e=kn(e),n=bt(e);return s}function wue(t,e){const n=[];return bue(t,e,n),n.sort((s,r)=>s.order-r.order),n}function bue(t,e,n){const s=wy(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);Y1(e,r=>{bue(t,r,n)})}function Z1(t,e){const n=wy(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,cue(e,n.length>0?n:void 0)}Y1(e,s=>{Z1(t,s)})}function Eue(t,e){const n=JT(vue(t,e)),s=$6(t.transactionQueueTree_,e);return zKe(s,r=>{px(t,r)}),px(t,s),uue(s,r=>{px(t,r)}),n}function px(t,e){const n=wy(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(_e(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(_e(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(gp(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?cue(e,void 0):n.length=i+1,Xc(t.eventQueue_,JT(e),r);for(let o=0;o<s.length;o++)vy(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gGe(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function mGe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):to(`Invalid query segment '${n}' in query '${t}'`)}return e}const g7=function(t,e){const n=_Ge(t),s=n.namespace;n.domain==="firebase.com"&&du(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&du("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||A7e();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ble(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new _n(n.pathString)}},_Ge=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=gGe(t.substring(h,d)));const p=mGe(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yGe{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Us(this.snapshot.exportVal())}}class vGe{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return _e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Nt(this._path)?null:Ple(this._path)}get ref(){return new Eu(this._repo,this._path)}get _queryIdentifier(){const e=e7(this._queryParams),n=w6(e);return n==="{}"?"default":n}get _queryObject(){return e7(this._queryParams)}isEqual(e){if(e=hn(e),!(e instanceof Q6))return!1;const n=this._repo===e._repo,s=C6(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+d8e(this._path)}}class Eu extends Q6{constructor(e,n){super(e,n,new R6,!1)}get parent(){const e=xle(this._path);return e===null?null:new Eu(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class VE{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new _n(e),s=UL(this.ref,e);return new VE(this._node.getChild(n),s,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new VE(r,UL(this.ref,s),Zn)))}hasChild(e){const n=new _n(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lYe(t,e){return t=hn(t),t._checkNotDeleted("ref"),e!==void 0?UL(t._root,e):t._root}function UL(t,e){return t=hn(t),bt(t._path)===null?YKe("child","path",e):fue("child","path",e),new Eu(t._repo,js(t._path,e))}function uYe(t){return pue("remove",t._path),wGe(t,null)}function wGe(t,e){t=hn(t),pue("set",t._path),QKe("set",e,t._path);const n=new m1;return aGe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function hYe(t){t=hn(t);const e=new Tue(()=>{}),n=new eP(e);return oGe(t._repo,t,n).then(s=>new VE(s,new Eu(t._repo,t._path),t._queryParams.getIndex()))}class eP{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new yGe("value",this,new VE(e.snapshotNode,new Eu(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vGe(this,e,n):null}matches(e){return e instanceof eP?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function bGe(t,e,n,s,r){const i=new Tue(n,void 0),o=new eP(i);return lGe(t._repo,t,o),()=>uGe(t._repo,t,o)}function dYe(t,e,n,s){return bGe(t,"value",e)}EKe(Eu);kKe(Eu);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EGe="FIREBASE_DATABASE_EMULATOR_HOST",qL={};let TGe=!1;function CGe(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=nl(i);t.repoInfo_=new ble(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function IGe(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||du("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qr("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=g7(i,r),a=o.repoInfo,l;typeof process<"u"&&MW&&(l=MW[EGe]),l?(i=`http://${l}?ns=${a.namespace}`,o=g7(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new q7e(t.name,t.options,e);XKe("Invalid Firebase Database URL",o),Nt(o.path)||du("Database URL must point to the root of a Firebase Database (not including a child path).");const h=kGe(a,t,u,new U7e(t,n));return new RGe(h,t)}function SGe(t,e){const n=qL[e];(!n||n[t.key]!==t)&&du(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hGe(t),delete n[t.key]}function kGe(t,e,n,s){let r=qL[e.name];r||(r={},qL[e.name]=r);let i=r[t.toURLString()];return i&&du("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new nGe(t,TGe,n,s),r[t.toURLString()]=i,i}class RGe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sGe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Eu(this._repo,Yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SGe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&du("Cannot call "+e+" on a deleted database.")}}function AGe(t=b1(),e){const n=FT(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=v4("database");s&&PGe(n,...s)}return n}function PGe(t,e,n,s={}){t=hn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&nf(s,i.repoInfo_.emulatorOptions))return;du("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&du('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new HI(HI.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:w4(s.mockUserToken,t.app.options.projectId);o=new HI(a)}nl(e)&&(_1(e),y1("Database",!0)),CGe(i,r,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NGe(t){T7e(If),sf(new au("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return IGe(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Vo(FW,VW,t),Vo(FW,VW,"esm2020")}Vl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Vl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NGe();var Uf={};const Ps={apiKey:Uf.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Uf.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Uf.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Uf.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Uf.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Uf.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Uf.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:Ps.apiKey?"설정됨":"설정 안됨",authDomain:Ps.authDomain?"설정됨":"설정 안됨",projectId:Ps.projectId?"설정됨":"설정 안됨",storageBucket:Ps.storageBucket?"설정됨":"설정 안됨",messagingSenderId:Ps.messagingSenderId?"설정됨":"설정 안됨",appId:Ps.appId?"설정됨":"설정 안됨",databaseURL:Ps.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:Ps.apiKey?`${Ps.apiKey.substring(0,10)}...`:"없음",authDomain:Ps.authDomain,projectId:Ps.projectId,databaseURL:Ps.databaseURL?"설정됨":"없음"});(!Ps.apiKey||!Ps.authDomain||!Ps.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let Yn,Qn,mp,jL,BL;Ps.apiKey&&Ps.authDomain&&Ps.projectId?(Yn=Loe(Ps),Qn=$$e(Yn),mp=new Il,jL=Dce(Yn),BL=v7e(Yn),AGe(Yn)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Qn=null,mp=null,jL=null,BL=null);const fYe=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Qn},get db(){return jL},get firebaseApp(){return Yn},get googleProvider(){return mp},get storage(){return BL}},Symbol.toStringTag,{value:"Module"}));function xGe(){return Fo(uoe)}const Pn=ef(null),Za=ef(!0),WC=ef(null);let Bg=null,m7=!1;function OGe(){const t=xGe(),e=Yn?Dce(Yn):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),Yn?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async l=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const u=3;let h=0;for(;h<u;)try{console.log("🔍 사용자 정보 확인 중:",l.email,`(시도 ${h+1}/${u})`);const d=$He(e,"users",l.uid),p=await RW(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await AW(d,{lastLoginAt:ix()},{merge:!0}),{...l,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",l.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(l.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:l.email,adminEmails:w,isAdminEmail:k});const P={uid:l.uid,email:l.email,displayName:l.displayName,photoURL:l.photoURL,role:k?"admin":"student",createdAt:ix(),lastLoginAt:ix()};console.log("💾 새 사용자 정보 저장 중:",P),await AW(d,P),console.log("✅ 새 사용자 등록 완료:",l.email);const D=await RW(d);if(D.exists())console.log("✅ 사용자 등록 확인 완료:",D.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...l,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${u}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!Yn,db:!!e,auth:!!Qn,userUid:l.uid,userEmail:l.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<u)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...l,role:"student"}},s=async()=>{if(!Za.value){Za.value=!0,WC.value=null;try{if(!Qn||!mp)throw new Error("Firebase is not configured.");const l=await JBe(Qn,mp);console.log("✅ Google 로그인 팝업 성공:",l.user.email);try{if(Yn&&e)Pn.value=await n(l.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",Pn.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),Pn.value=null,Qn&&await pv(Qn),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),Za.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!Pn.value,userRole:Pn.value?.role,userEmail:Pn.value?.email})}catch(u){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",u),Pn.value=null,Qn&&await pv(Qn),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),Za.value=!1;return}Za.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(l){console.error("❌ Google 로그인 팝업 실패:",l),WC.value=l.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),Za.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Qn),!Qn){console.log("❌ useAuth: auth 객체가 없음");return}try{Bg&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Bg(),Bg=null),console.log("🔍 useAuth: Firebase signOut 실행"),await pv(Qn),console.log("✅ useAuth: Firebase signOut 성공"),Pn.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(l){console.error("❌ useAuth: 로그아웃 실패:",l),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!m7){if(m7=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!Yn,auth:!!Qn,db:!!e}),!Qn){console.log("⚠️ Firebase Auth가 초기화되지 않음"),Za.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Bg=xBe(Qn,async l=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",l?l.email:"없음"),l)if(console.log("✅ 인증된 사용자 감지:",{uid:l.uid,email:l.email,displayName:l.displayName,emailVerified:l.emailVerified}),Yn&&e)try{Pn.value=await n(l),console.log("✅ 사용자 역할 설정 완료:",Pn.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!Pn.value,userRole:Pn.value?.role,userEmail:Pn.value?.email})}catch(u){console.error("❌ 사용자 역할 가져오기 실패:",u),console.error("❌ 오류 코드:",u.code),console.error("❌ 오류 메시지:",u.message),Pn.value=null,Qn&&await pv(Qn),WC.value=u.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),Za.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),Pn.value=null,Qn&&await pv(Qn),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),Pn.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");Za.value=!1})}};h4(()=>{Bg&&Bg()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:Pn.value,isAuthenticated:!!Pn.value,userRole:Pn.value?.role,firebaseApp:!!Yn,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!Yn),console.log("  - Firebase Auth:",!!Qn),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!mp),Yn&&console.log("  - Firebase Config:",{apiKey:Yn.options.apiKey?"설정됨":"설정 안됨",authDomain:Yn.options.authDomain?"설정됨":"설정 안됨",projectId:Yn.options.projectId?"설정됨":"설정 안됨",storageBucket:Yn.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!Yn,auth:!!Qn,db:!!e,googleProvider:!!mp});return{user:xe(()=>Pn.value),loading:xe(()=>Za.value),error:xe(()=>WC.value),isAuthenticated:xe(()=>!!Pn.value),displayName:xe(()=>Pn.value?.displayName||"사용자"),email:xe(()=>Pn.value?.email||""),photoURL:xe(()=>Pn.value?.photoURL||""),isFirebaseConfigured:xe(()=>!!Yn),userRole:xe(()=>Pn.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const DGe={id:"app"},LGe=i1({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=OGe(),o=oje(),a=aje();return l4(()=>{e()}),Bw([n,s,r],([l,u,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${l}, userRole=${u}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),l?u==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):u==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(l,u)=>{const h=t6e("router-view");return zie(),O6e("div",DGe,[Ci(h)])}}}),MGe=t=>t,FGe=MGe,VGe=[{path:"/",component:()=>Un(()=>import("./MainLayout-DWpWAzPm.js"),__vite__mapDeps([44,45,46,47,48,49,50,51,52,53,54,55,56,57])),children:[{path:"",component:()=>Un(()=>import("./IndexPage-DdKp2QWP.js"),__vite__mapDeps([58,45,46,47,54,59,52,53,60,56,61]))},{path:"survey-results",component:()=>Un(()=>import("./SurveyResults-Dr3yr6i_.js"),__vite__mapDeps([62,50,47,45,46,49,63,59,64,65]))}]},{path:"/logout",component:()=>Un(()=>import("./LogoutPage-4UfyfpuW.js"),__vite__mapDeps([66,46,47,54,59,48,67]))},{path:"/poll-result",component:()=>Un(()=>import("./PollResultPage-C5no3dXq.js"),__vite__mapDeps([68,50,47,59,64,65,69]))},{path:"/study/:courseId",component:()=>Un(()=>import("./StudentView-Yd_YbX30.js"),__vite__mapDeps([70,45,46,47,49,51,48,52,53,54,50,55,60,59,63,64,65,71])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",l=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:l,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:l,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>Un(()=>import("./ErrorNotFound-BDIBmV6S.js"),[])}],gx=FGe(function(){return rje({scrollBehavior:()=>({left:0,top:0}),routes:VGe,history:Oqe("/")})});async function UGe(t,e){const n=t(LGe);n.use(nqe,e);const s=xT(typeof gx=="function"?await gx({}):gx);return{app:n,router:s}}const $L={xs:18,sm:24,md:32,lg:38,xl:46},Y6={size:String};function X6(t,e=$L){return xe(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function qGe(t,e){return t!==void 0&&t()||e}function pYe(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function qv(t,e){return t!==void 0?e.concat(t()):e}function jGe(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function gYe(t,e,n,s,r,i){e.key=s+r;const o=st(t,e,n);return r===!0?gie(o,i()):o}const _7="0 0 24 24",mx=t=>t,_x=t=>`ionicons ${t}`,Cue={"mdi-":t=>`mdi ${t}`,"icon-":mx,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":_x,"ion-ios":_x,"ion-logo":_x,"iconfont ":mx,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":mx},Iue={o_:"-outlined",r_:"-round",s_:"-sharp"},Sue={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},BGe=new RegExp("^("+Object.keys(Cue).join("|")+")"),$Ge=new RegExp("^("+Object.keys(Iue).join("|")+")"),y7=new RegExp("^("+Object.keys(Sue).join("|")+")"),zGe=/^[Mm]\s?[-+]?\.?\d/,HGe=/^img:/,WGe=/^svguse:/,KGe=/^ion-/,GGe=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,xk=LT({name:"QIcon",props:{...Y6,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=Tg(),s=X6(t),r=xe(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=xe(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(zGe.test(a)===!0){const[h,d=_7]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return st("path",{style:w,d:m,transform:k})})}}if(HGe.test(a)===!0)return{img:!0,src:a.substring(4)};if(WGe.test(a)===!0){const[h,d=_7]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(BGe);if(u!==null)o=Cue[u[1]](a);else if(GGe.test(a)===!0)o=a;else if(KGe.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(y7.test(a)===!0){o="notranslate material-symbols";const h=a.match(y7);h!==null&&(a=a.substring(6),o+=Sue[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match($Ge);h!==null&&(a=a.substring(2),o+=Iue[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?st(t.tag,o,qGe(e.default)):i.value.img===!0?st(t.tag,o,qv(e.default,[st("img",{src:i.value.src})])):i.value.svg===!0?st(t.tag,o,qv(e.default,[st("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?st(t.tag,o,qv(e.default,[st("svg",{viewBox:i.value.viewBox},[st("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),st(t.tag,o,qv(e.default,[i.value.content])))}}}),QGe=LT({name:"QAvatar",props:{...Y6,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=X6(t),s=xe(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=xe(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[st(xk,{name:t.icon})]:void 0;return st("div",{class:s.value,style:n.value},[st("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},jGe(e.default,i))])}}}),YGe={size:{type:[String,Number],default:"1em"},color:String};function XGe(t){return{cSize:xe(()=>t.size in $L?`${$L[t.size]}px`:t.size),classes:xe(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const kue=LT({name:"QSpinner",props:{...YGe,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=XGe(t);return()=>st("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[st("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function JGe(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function mYe(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Pp(t);if(e)return e.$el||e}function _Ye(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function ZGe(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function v7(t,e,n,s){n.modifiers.stop===!0&&ooe(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),l=L9e(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${l.left-u-w}px`,D=`${(p-m)/2}px`,M=i?D:`${l.top-h-w}px`;a.className="q-ripple__inner",JGe(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${D},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function w7(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const eQe=D9e({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&v7(r,t,s,r.qKeyEvent===!0)},keystart:ZGe(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&QD(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&v7(r,t,s,!0)},300)};w7(s,e),t.__qripple=s,M9e(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&w7(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),F9e(e,"main"),delete t._qripple)}}),Rue={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},tQe=Object.keys(Rue),nQe={align:{type:String,validator:t=>tQe.includes(t)}};function sQe(t){return xe(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${Rue[e]}`})}function yYe(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function rQe(t){return t.appContext.config.globalProperties.$router!==void 0}function vYe(t){return t.isUnmounted===!0||t.isDeactivated===!0}function b7(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function E7(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iQe(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function T7(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function oQe(t,e){return Array.isArray(t)===!0?T7(t,e):Array.isArray(e)===!0?T7(e,t):t===e}function aQe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(oQe(t[n],e[n])===!1)return!1;return!0}const Aue={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},wYe={...Aue,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function cQe({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=Tg(),{props:s,proxy:r,emit:i}=n,o=rQe(n),a=xe(()=>s.disable!==!0&&s.href!==void 0),l=xe(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),u=xe(()=>l.value===!0?M(s.to):null),h=xe(()=>u.value!==null),d=xe(()=>a.value===!0||h.value===!0),p=xe(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=xe(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:u.value.href,target:s.target}:{}),w=xe(()=>{if(h.value===!1)return-1;const{matched:H}=u.value,{length:X}=H,I=H[X-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(E7.bind(null,I));if(y!==-1)return y;const C=b7(H[X-2]);return X>1&&b7(I)===C&&v[v.length-1].path!==C?v.findIndex(E7.bind(null,H[X-2])):y}),k=xe(()=>h.value===!0&&w.value!==-1&&iQe(r.$route.params,u.value.params)),P=xe(()=>k.value===!0&&w.value===r.$route.matched.length-1&&aQe(r.$route.params,u.value.params)),D=xe(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:X,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return X===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const X=I=>V(H,I);i("click",H,X),H.defaultPrevented!==!0&&X()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:k,linkIsExactActive:P,linkClass:D,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const C7={none:0,xs:4,sm:8,md:16,lg:24,xl:32},lQe={xs:8,sm:10,md:14,lg:20,xl:24},uQe=["button","submit","reset"],hQe=/[^\s]\/[^\s]/,dQe=["flat","outline","push","unelevated"];function fQe(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const pQe={...Y6,...Aue,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...dQe.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...nQe.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},gQe={...pQe,round:Boolean};function mQe(t){const e=X6(t,lQe),n=sQe(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=cQe({fallbackTag:"button"}),l=xe(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(D=>D in C7?C7[D]+"px":D).join(" "),minWidth:"0",minHeight:"0"}):P}),u=xe(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=xe(()=>t.disable!==!0&&t.loading!==!0),d=xe(()=>h.value===!0?t.tabindex||0:-1),p=xe(()=>fQe(t,"standard")),m=xe(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):uQe.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&hQe.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=xe(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const D=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${D}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=xe(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:l,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:So}=ng;let $g=null,zg=null,Hg=null;const _Qe=LT({name:"QBtn",props:{...gQe,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=Tg(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=mQe(t),p=ef(null),m=ef(null);let w=null,k,P=null;const D=xe(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=xe(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=xe(()=>({center:t.round})),q=xe(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=xe(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:C};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:qg}}),X=xe(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const de=()=>{document.removeEventListener("keydown",qg,!0),document.removeEventListener("keyup",de,So),p.value?.removeEventListener("blur",de,So)};document.addEventListener("keydown",qg,!0),document.addEventListener("keyup",de,So),p.value.addEventListener("blur",de,So)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),QD(K,[13,32])===!0&&zg!==p.value&&(zg!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),zg=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,So)),qg(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&($g!==p.value&&($g!==null&&E(),$g=p.value,w=K.target,w.addEventListener("touchcancel",S,So),w.addEventListener("touchend",S,So)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function C(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Hg!==p.value&&(Hg!==null&&E(),Hg=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,So)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(zg===p.value&&QD(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&GD(ne),K.cancelBubble===!0&&ooe(ne),p.value.dispatchEvent(ne),qg(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&($g===p.value||Hg===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),$g===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,So),w.removeEventListener("touchend",S,So)),$g=w=null),Hg===p.value&&(document.removeEventListener("mouseup",S,So),Hg=null),zg===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,So),zg=null),p.value?.classList.remove("q-btn--active")}function b(K){qg(K),K.qSkipRipple=!0}return u4(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(st(xk,{name:t.icon,left:t.stack!==!0&&D.value===!0,role:"img"})),D.value===!0&&K.push(st("span",{class:"block"},[t.label])),K=qv(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(st(xk,{name:t.iconRight,right:t.stack!==!0&&D.value===!0,role:"img"}));const ne=[st("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(st("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[st("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(st("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(st(Z6e,{name:"q-transition--fade"},()=>t.loading===!0?[st("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[st(kue)])]:null)),gie(st(u.value,X.value,ne),[[eQe,M.value,void 0,V.value]])}}});let yQe=1,vQe=document.body;function wQe(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${yQe++}`:t,XS.globalNodes!==void 0){const s=XS.globalNodes.class;s!==void 0&&(n.className=s)}return vQe.appendChild(n),n}function bYe(t){t.remove()}let bQe=0;const WI={},KI={},oa={},Pue={},EQe=/^\s*$/,Nue=[],TQe=[void 0,null,!0,!1,""],J6=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],CQe=["top-left","top-right","bottom-left","bottom-right"],jv={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function xue(t,e,n){if(!t)return wv("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,WI),_E(t)===!1&&(r.type&&Object.assign(r,jv[r.type]),t={message:t}),Object.assign(r,jv[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=kue),r.spinner=xT(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:I7(r.message)||I7(r.caption)},r.position){if(J6.includes(r.position)===!1)return wv("wrong position",t)}else r.position="bottom";if(TQe.includes(r.timeout)===!0)r.timeout=5e3;else{const l=Number(r.timeout);if(isNaN(l)||l<0)return wv("wrong timeout",t);r.timeout=Number.isFinite(l)?l:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(WI.actions)===!0?WI.actions:[]).concat(Array.isArray(jv[t.type]?.actions)===!0?jv[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const l=oa[r.position].value.indexOf(n.notif);oa[r.position].value[l]=r}else{const l=KI[r.meta.group];if(l===void 0){if(r.meta.uid=bQe++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)oa[r.position].value.splice(Math.floor(oa[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")!==-1?"unshift":"push";oa[r.position].value[u](r)}r.group!==void 0&&(KI[r.meta.group]=r)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),r.badgePosition!==void 0){if(CQe.includes(r.badgePosition)===!1)return wv("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=oa[r.position].value.indexOf(l);oa[r.position].value[u]=KI[r.meta.group]=r}}const a=()=>{IQe(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?wv("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return l=>{if(s!==void 0)if(l===void 0)s.dismiss();else{const u=Object.assign({},s.config,l,{group:!1,position:r.position});xue(u,e,s)}}}function IQe(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=oa[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete KI[t.meta.group];const n=Nue[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}oa[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function I7(t){return t!=null&&EQe.test(t)!==!0}function wv(t,e){return console.error(`Notify: ${t}`,e),!1}function SQe(){return LT({name:"QNotifications",devtools:{hide:!0},setup(){return()=>st("div",{class:"q-notifications"},J6.map(t=>st(v9e,{key:t,class:Pue[t],tag:"div",name:`q-notification--${t}`},()=>oa[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(st(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(st(xk,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(st(QGe,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>st("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[st("div",a),st("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(st("div",o,i))}const r=[st("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(st("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(st("div",{class:n.actionsClass},e.actions.map(i=>st(_Qe,i)))),n.badge>1&&r.push(st("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),st("div",{ref:i=>{Nue[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[st("div",{class:n.wrapperClass},r)])}))))}})}const kQe={setDefaults(t){_E(t)===!0&&Object.assign(WI,t)},registerType(t,e){_E(e)===!0&&(jv[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>xue(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){J6.forEach(s=>{oa[s]=ef([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;Pue[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=wQe("q-notify");Z9e(SQe(),e).mount(n)}}},RQe={config:{},plugins:{Notify:kQe}},AQe="/";async function PQe({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=r(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:AQe})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}s!==!0&&(t.use(e),t.mount("#q-app"))}UGe(roe,RQe).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([Un(()=>import("./pinia-BFGcd6GC.js"),__vite__mapDeps([72,53]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");PQe(t,r)})});export{xX as $,pM as A,fg as B,W8 as C,q_ as D,yM as E,F8 as F,rM as G,vp as H,RF as I,Ph as J,zE as K,AM as L,BE as M,CF as N,Qe as O,UE as P,FF as Q,Q8 as R,Vn as S,Qk as T,TF as U,$E as V,ac as W,oK as X,yr as Y,OX as Z,Un as _,Gk as a,lR as a$,EF as a0,DX as a1,j_ as a2,hb as a3,xo as a4,Jk as a5,X8 as a6,LF as a7,IM as a8,cM as a9,bM as aA,Z8 as aB,vm as aC,HX as aD,cK as aE,AF as aF,PF as aG,Jf as aH,n2 as aI,$M as aJ,MM as aK,QM as aL,XM as aM,WM as aN,e2 as aO,f0 as aP,jM as aQ,KM as aR,uR as aS,s2 as aT,JM as aU,YM as aV,mc as aW,Wl as aX,ca as aY,gc as aZ,pc as a_,jk as aa,dK as ab,hK as ac,Bl as ad,oM as ae,aM as af,op as ag,Yv as ah,CM as ai,lM as aj,Hk as ak,db as al,Fp as am,TM as an,wM as ao,Mp as ap,BX as aq,r2 as ar,LX as as,lT as at,uT as au,qt as av,vM as aw,FX as ax,EM as ay,tK as az,Ne as b,xre as b$,Db as b0,x2 as b1,R0 as b2,zQ as b3,A0 as b4,Lb as b5,fY as b6,lY as b7,$Q as b8,iw as b9,dT as bA,pre as bB,XZ as bC,gre as bD,Jl as bE,Oe as bF,yg as bG,Pm as bH,tA as bI,nA as bJ,WJ as bK,hZ as bL,oV as bM,PJ as bN,Z_ as bO,Je as bP,mre as bQ,wf as bR,wo as bS,IRe as bT,lUe as bU,vZ as bV,QF as bW,kUe as bX,Zr as bY,lke as bZ,uZ as b_,hY as ba,uY as bb,dY as bc,HQ as bd,MF as be,OF as bf,DF as bg,c8 as bh,ub as bi,VF as bj,jl as bk,zX as bl,eK as bm,GX as bn,aK as bo,kF as bp,jX as bq,NF as br,D7 as bs,dg as bt,b8 as bu,Bs as bv,Zh as bw,QL as bx,L7 as by,Z7 as bz,Cr as c,CRe as c$,cd as c0,fZ as c1,rJ as c2,aV as c3,WU as c4,ko as c5,PSe as c6,YR as c7,eV as c8,Jke as c9,vUe as cA,gI as cB,OZ as cC,JF as cD,HJ as cE,nV as cF,tS as cG,sRe as cH,NZ as cI,Are as cJ,MZ as cK,RRe as cL,kRe as cM,d_ as cN,YA as cO,XA as cP,zt as cQ,Zee as cR,WVe as cS,kZ as cT,PZ as cU,uRe as cV,AZ as cW,cRe as cX,uUe as cY,vw as cZ,TUe as c_,Ire as ca,lE as cb,Rke as cc,bre as cd,Hf as ce,ERe as cf,sA as cg,JZ as ch,QR as ci,zn as cj,fre as ck,$Ve as cl,BVe as cm,dre as cn,zVe as co,pT as cp,eS as cq,xa as cr,lV as cs,h_ as ct,qd as cu,zJ as cv,jJ as cw,BJ as cx,pm as cy,RZ as cz,Ll as d,Ir as d$,Ere as d0,Tre as d1,tm as d2,Yee as d3,wee as d4,pee as d5,Mee as d6,Vee as d7,xee as d8,Kee as d9,UMe as dA,vLe as dB,Nre as dC,kre as dD,Rre as dE,vSe as dF,Z0 as dG,Ore as dH,lRe as dI,Ud as dJ,EUe as dK,VUe as dL,TRe as dM,Cre as dN,yUe as dO,_re as dP,V0e as dQ,J_ as dR,USe as dS,ir as dT,Cp as dU,aJ as dV,U0e as dW,cSe as dX,ef as dY,uy as dZ,DQe as d_,YO as da,vee as db,Oee as dc,kV as dd,Jee as de,jee as df,Fee as dg,El as dh,$d as di,_c as dj,bl as dk,wl as dl,IV as dm,VS as dn,wne as dp,_D as dq,yLe as dr,yD as ds,US as dt,qMe as du,MMe as dv,_Le as dw,kI as dx,VMe as dy,FMe as dz,mM as e,tYe as e$,qm as e0,Wt as e1,Bw as e2,uie as e3,MQe as e4,xT as e5,xe as e6,l4e as e7,LQe as e8,Fo as e9,GD as eA,l4 as eB,aje as eC,D6e as eD,j4e as eE,qQe as eF,c4e as eG,F6e as eH,oje as eI,xGe as eJ,tg as eK,u4 as eL,mE as eM,ng as eN,xI as eO,h4 as eP,qv as eQ,Yn as eR,AGe as eS,dYe as eT,lYe as eU,B9e as eV,BL as eW,cYe as eX,rYe as eY,jL as eZ,$He as e_,UQe as ea,LT as eb,Tg as ec,st as ed,qGe as ee,YQe as ef,KQe as eg,GQe as eh,mYe as ei,JGe as ej,Y6 as ek,X6 as el,gYe as em,eQe as en,xk as eo,jGe as ep,qg as eq,i1 as er,O6e as es,Kie as et,Ci as eu,zie as ev,_Qe as ew,ooe as ex,Oc as ey,h1 as ez,GL as f,Il as f$,ix as f0,oYe as f1,iYe as f2,aYe as f3,AW as f4,RW as f5,sYe as f6,nYe as f7,wYe as f8,cQe as f9,BQe as fA,Z6e as fB,iie as fC,jQe as fD,kue as fE,t6e as fF,G4e as fG,_Ye as fH,$N as fI,Q4e as fJ,kie as fK,rQe as fL,Y9e as fM,JQe as fN,XQe as fO,$Qe as fP,KD as fQ,yYe as fR,FQe as fS,wQe as fT,bYe as fU,HQe as fV,nQe as fW,sQe as fX,tae as fY,Hh as fZ,Wh as f_,QD as fa,pYe as fb,OGe as fc,wGe as fd,hYe as fe,JU as ff,ZU as fg,Pp as fh,uYe as fi,gie as fj,D9e as fk,F9e as fl,WQe as fm,M9e as fn,L9e as fo,zQe as fp,V9e as fq,W4e as fr,H4e as fs,vYe as ft,QQe as fu,_E as fv,$$e as fw,aa as fx,VQe as fy,QGe as fz,RM as g,sg as g0,Kh as g1,NBe as g2,LBe as g3,M$e as g4,oae as g5,TBe as g6,sBe as g7,yH as g8,KBe as g9,bBe as ga,xBe as gb,PBe as gc,H3e as gd,oBe as ge,JBe as gf,pv as gg,YGe as gh,XGe as gi,OQe as gj,fYe as gk,ao as h,_8 as i,Uc as j,gM as k,$R as l,qE as m,Bk as n,xF as o,l_ as p,pu as q,Ji as r,gf as s,lK as t,uM as u,MX as v,SF as w,IF as x,KX as y,Uk as z};
