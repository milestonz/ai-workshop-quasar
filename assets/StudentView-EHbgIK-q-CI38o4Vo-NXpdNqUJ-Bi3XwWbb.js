const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js","assets/index-bfaO29LJ.js","assets/index-DJuvGez9.css"])))=>i.map(i=>d[i]);
import{bC as qe,bD as Me,cj as zl,bE as Al,bF as Ze,bG as U,bH as b,bJ as pe,bK as Qe,cl as z,cm as ie,ci as xe,bN as B,bO as c,bP as v,bR as I,bQ as s,bV as S,bY as t,bW as N,c4 as ee,bX as V,bT as w,b_ as we,b$ as ke,bU as O,cg as Ve,c2 as ne,bS as Pe,c1 as el,R as Le,U as Ue,X as De,_ as Oe,cq as ye,co as X,cp as Ne,cn as El,cQ as ll,cR as _e,ck as Tl,c5 as Ge,c6 as Wl,c7 as Re,c8 as jl,cb as nl,ca as M,cL as Nl,cS as Bl,cT as Fl,cU as tl,cF as Hl,ch as ol}from"./index-bfaO29LJ.js";import{t as me,U as le,W as ve,o as Be,e as Fe,N as Ml,s as Ql}from"./QDialog-Dn9VjDcM-Dk_wZ3Rn-ctNmsRdv-C7dEt991.js";import{s as Pl,o as Gl,n as ze,u as Xl,r as He,e as Jl,M as Kl}from"./use-checkbox-ClSmRWjY-BHpvY2Y3-DTtME0RC-C6HguhVt.js";import{m as Yl,f as Zl,i as al,h as et,b as lt,p as tt}from"./GuestLoginDialog-6vHhwSmg-C3RCaOBT-h21m0_Zw-BClRmXLr.js";import{U as Ae}from"./QChip-DM6F31S0-CjJFSHfx-htvUgpWw-B6C49kGl.js";import{_ as ot}from"./QBanner-DKpXtl0l-CoEeIaNs-q0N_FVYe-CDOnFhp0.js";import{Q as at}from"./QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js";import{m as st}from"./QPage-CLbIAi8L-DDHzNr23-Cd5VgrA8-CUh4PsUm.js";import{a as nt,s as it}from"./QLayout-BQ9g_6yu-Chj62EVq-BBQIb_HL-w8ZT01gj.js";import{Q as rt,e as ut,R as Ee,H as ct,Y as dt}from"./useGuestAuth-BRpWhMZD-BE4cfEkc-Bi0EpWEu-D74WuHXn.js";import{u as Ie,a as il,l as rl}from"./_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv-K94wZDnO-DtgneFYW.js";import{y as vt,g as pt,k as mt,p as ft,_ as yt}from"./survey-DsL-eoSy-BaL70OSo-i6SJNP2j-DFglVz1r.js";import{Z as gt}from"./PollResultBar-CeuqJwy4-CLNXaeBh-BkCeYv0t-Bok4-Zd3.js";import"./QSeparator-BcYH26Md-D4-nJUmN-HaXOYAi2-D2QFjN5p.js";import"./pinia-CUn_f_AT-BAm4BR34-CFOg6xp9-Bxf8Vsb9.js";const ge=(o,i=ge,y=i.f||(i.f=["assets/QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT.js","assets/index-CyCqcZIQ.js","assets/index-D7VONvhQ.css"]))=>o.map(k=>y[k]),be=(o,i=be,y=i.f||(i.f=["assets/QSpinnerDots-55T99jjC-UJYzsw9M.js","assets/index-D1vT6N3s.js","assets/index-C_LQcHkP.css"]))=>o.map(k=>y[k]),he=(o,i=he,y=i.f||(i.f=["assets/QSpinnerDots-55T99jjC.js","assets/index-Bw1AfG2u.js","assets/index-B0WZdqPn.css"]))=>o.map(k=>y[k]),bt={position:{type:String,default:"bottom-right",validator:o=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(o)},offset:{type:Array,validator:o=>o.length===2},expand:Boolean};function ht(){const{props:o,proxy:{$q:i}}=Ge(),y=Wl(jl,Re);if(y===Re)return console.error("QPageSticky needs to be child of QLayout"),Re;const k=b(()=>{const q=o.position;return{top:q.indexOf("top")!==-1,right:q.indexOf("right")!==-1,bottom:q.indexOf("bottom")!==-1,left:q.indexOf("left")!==-1,vertical:q==="top"||q==="bottom",horizontal:q==="left"||q==="right"}}),m=b(()=>y.header.offset),d=b(()=>y.right.offset),f=b(()=>y.footer.offset),_=b(()=>y.left.offset),A=b(()=>{let q=0,L=0;const x=k.value,r=i.lang.rtl===!0?-1:1;x.top===!0&&m.value!==0?L=`${m.value}px`:x.bottom===!0&&f.value!==0&&(L=`${-f.value}px`),x.left===!0&&_.value!==0?q=`${r*_.value}px`:x.right===!0&&d.value!==0&&(q=`${-r*d.value}px`);const C={transform:`translate(${q}, ${L})`};return o.offset&&(C.margin=`${o.offset[1]}px ${o.offset[0]}px`),x.vertical===!0?(_.value!==0&&(C[i.lang.rtl===!0?"right":"left"]=`${_.value}px`),d.value!==0&&(C[i.lang.rtl===!0?"left":"right"]=`${d.value}px`)):x.horizontal===!0&&(m.value!==0&&(C.top=`${m.value}px`),f.value!==0&&(C.bottom=`${f.value}px`)),C}),D=b(()=>`q-page-sticky row flex-center fixed-${o.position} q-page-sticky--${o.expand===!0?"expand":"shrink"}`);function $(q){const L=nl(q.default);return M("div",{class:D.value,style:A.value},o.expand===!0?L:[M("div",L)])}return{$layout:y,getStickyContent:$}}const sl=Pe({name:"QPageSticky",props:bt,setup(o,{slots:i}){const{getStickyContent:y}=ht();return()=>y(i)}}),xt=()=>M("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[M("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),M("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),wt=Pe({name:"QRadio",props:{...il,...Bl,...Ml,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(o,{slots:i,emit:y}){const{proxy:k}=Ge(),m=rl(o,k.$q),d=Fl(o,Jl),f=U(null),{refocusTargetEl:_,refocusTarget:A}=Kl(o,f),D=b(()=>tl(o.modelValue)===tl(o.val)),$=b(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(o.disable===!0?" disabled":"")+(m.value===!0?" q-radio--dark":"")+(o.dense===!0?" q-radio--dense":"")+(o.leftLabel===!0?" reverse":"")),q=b(()=>{const h=o.color!==void 0&&(o.keepColor===!0||D.value===!0)?` text-${o.color}`:"";return`q-radio__inner relative-position q-radio__inner--${D.value===!0?"truthy":"falsy"}${h}`}),L=b(()=>(D.value===!0?o.checkedIcon:o.uncheckedIcon)||null),x=b(()=>o.disable===!0?-1:o.tabindex||0),r=b(()=>{const h={type:"radio"};return o.name!==void 0&&Object.assign(h,{".checked":D.value===!0,"^checked":D.value===!0?"checked":void 0,name:o.name,value:o.val}),h}),C=Ql(r);function u(h){h!==void 0&&(ol(h),A(h)),o.disable!==!0&&D.value!==!0&&y("update:modelValue",o.val,h)}function W(h){(h.keyCode===13||h.keyCode===32)&&ol(h)}function H(h){(h.keyCode===13||h.keyCode===32)&&u(h)}Object.assign(k,{set:u});const g=xt();return()=>{const h=L.value!==null?[M("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[M(ee,{class:"q-radio__icon",name:L.value})])]:[g];o.disable!==!0&&C(h,"unshift"," q-radio__native q-ma-none q-pa-none");const te=[M("div",{class:q.value,style:d.value,"aria-hidden":"true"},h)];_.value!==null&&te.push(_.value);const re=o.label!==void 0?Hl(i.default,[o.label]):nl(i.default);return re!==void 0&&te.push(M("div",{class:"q-radio__label q-anchor--skip"},re)),M("div",{ref:f,class:$.value,tabindex:x.value,role:"radio","aria-label":o.label,"aria-checked":D.value===!0?"true":"false","aria-disabled":o.disable===!0?"true":void 0,onClick:u,onKeydown:W,onKeyup:H},te)}}}),ul={radio:wt,checkbox:yt,toggle:tt},kt=Object.keys(ul);function Te(o,i){if(typeof o=="function")return o;const y=o!==void 0?o:i;return k=>k[y]}const We=Pe({name:"QOptionGroup",props:{...il,modelValue:{required:!0},options:{type:Array,validator:o=>o.every(Nl),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:o=>kt.includes(o)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(o,{emit:i,slots:y}){const{proxy:{$q:k}}=Ge(),m=Array.isArray(o.modelValue);o.type==="radio"?m===!0&&console.error("q-option-group: model should not be array"):m===!1&&console.error("q-option-group: model should be array in your case");const d=rl(o,k),f=b(()=>ul[o.type]),_=b(()=>Te(o.optionValue,"value")),A=b(()=>Te(o.optionLabel,"label")),D=b(()=>Te(o.optionDisable,"disable")),$=b(()=>o.options.map(r=>({val:_.value(r),name:r.name===void 0?o.name:r.name,disable:o.disable||D.value(r),leftLabel:r.leftLabel===void 0?o.leftLabel:r.leftLabel,color:r.color===void 0?o.color:r.color,checkedIcon:r.checkedIcon,uncheckedIcon:r.uncheckedIcon,dark:r.dark===void 0?d.value:r.dark,size:r.size===void 0?o.size:r.size,dense:o.dense,keepColor:r.keepColor===void 0?o.keepColor:r.keepColor}))),q=b(()=>"q-option-group q-gutter-x-sm"+(o.inline===!0?" q-option-group--inline":"")),L=b(()=>{const r={role:"group"};return o.type==="radio"&&(r.role="radiogroup",o.disable===!0&&(r["aria-disabled"]="true")),r});function x(r){i("update:modelValue",r)}return()=>M("div",{class:q.value,...L.value},o.options.map((r,C)=>{const u=y["label-"+C]!==void 0?()=>y["label-"+C](r):y.label!==void 0?()=>y.label(r):void 0;return M("div",[M(f.value,{label:u===void 0?A.value(r):null,modelValue:o.modelValue,"onUpdate:modelValue":x,...$.value[C]},u)])}))}}),_t={class:"survey-container"},qt={class:"progress-section q-mb-lg"},It={class:"text-caption text-grey-6"},$t={class:"survey-content"},Ct={key:0,class:"survey-step"},St={key:1,class:"survey-step"},Vt={key:2,class:"survey-step"},Lt={key:3,class:"survey-step"},Ut={key:4,class:"survey-step text-center"},Dt={class:"q-mb-lg"},je=5,Ot=qe({__name:"SurveyDialog",props:{modelValue:{type:Boolean}},emits:["update:modelValue","submit","completed"],setup(o,{emit:i}){const y=o,k=i,m=Me(),d=U(1),f=U({satisfaction:"",recommendation:"",additionalEducation:"",feedback:""}),_=pt,A=mt,D=ft,$=b({get:()=>y.modelValue,set:H=>k("update:modelValue",H)}),q=b(()=>d.value/je),L=b(()=>{switch(d.value){case 1:return f.value.satisfaction!=="";case 2:return f.value.recommendation!=="";case 3:return f.value.additionalEducation!=="";case 4:return f.value.feedback.trim()!=="";default:return!0}}),x=()=>{d.value<je&&d.value++,d.value===5&&C()},r=()=>{d.value>1&&d.value--},C=()=>{k("submit",{...f.value}),m.notify({type:"positive",message:"설문조사가 성공적으로 제출되었습니다!",position:"top",timeout:3e3}),k("completed")},u=()=>{$.value=!1,W()},W=()=>{d.value=1,f.value={satisfaction:"",recommendation:"",additionalEducation:"",feedback:""}};return pe($,H=>{H||W()}),(H,g)=>(c(),B(Be,{modelValue:$.value,"onUpdate:modelValue":g[4]||(g[4]=h=>$.value=h),persistent:"",maximized:""},{default:v(()=>[s(me,{class:"survey-dialog"},{default:v(()=>[s(le,{class:"bg-primary text-white text-center"},{default:v(()=>g[5]||(g[5]=[t("h4",{class:"q-my-md"},"🎓 학습 완료 설문조사",-1),t("p",{class:"q-mb-none"},"강의 수강을 완료하셨습니다! 소중한 의견을 들려주세요.",-1)])),_:1,__:[5]}),s(le,{class:"q-pa-lg"},{default:v(()=>[t("div",_t,[t("div",qt,[s(He,{value:q.value,color:"primary",class:"q-mb-sm"},null,8,["value"]),t("div",It,V(d.value)+"/"+V(je)+" 단계",1)]),t("div",$t,[d.value===1?(c(),w("div",Ct,[g[6]||(g[6]=t("h5",{class:"q-mb-md"},"1. 전반적인 강의 만족도",-1)),g[7]||(g[7]=t("p",{class:"text-grey-7 q-mb-lg"},"이번 강의에 대한 전반적인 만족도를 평가해주세요.",-1)),s(We,{modelValue:f.value.satisfaction,"onUpdate:modelValue":g[0]||(g[0]=h=>f.value.satisfaction=h),options:S(_),color:"primary",inline:""},null,8,["modelValue","options"])])):I("",!0),d.value===2?(c(),w("div",St,[g[8]||(g[8]=t("h5",{class:"q-mb-md"},"2. 지인 추천 의향",-1)),g[9]||(g[9]=t("p",{class:"text-grey-7 q-mb-lg"},"이 강의를 지인이나 동료에게 추천하시겠습니까?",-1)),s(We,{modelValue:f.value.recommendation,"onUpdate:modelValue":g[1]||(g[1]=h=>f.value.recommendation=h),options:S(A),color:"primary",inline:""},null,8,["modelValue","options"])])):I("",!0),d.value===3?(c(),w("div",Vt,[g[10]||(g[10]=t("h5",{class:"q-mb-md"},"3. 추가 교육 의향",-1)),g[11]||(g[11]=t("p",{class:"text-grey-7 q-mb-lg"}," AI 관련 추가 교육이 있다면 참여하실 의향이 있으신가요? ",-1)),s(We,{modelValue:f.value.additionalEducation,"onUpdate:modelValue":g[2]||(g[2]=h=>f.value.additionalEducation=h),options:S(D),color:"primary",inline:""},null,8,["modelValue","options"])])):I("",!0),d.value===4?(c(),w("div",Lt,[g[12]||(g[12]=t("h5",{class:"q-mb-md"},"4. 자유 의견",-1)),g[13]||(g[13]=t("p",{class:"text-grey-7 q-mb-lg"}," 강의에 대한 의견이나 개선사항을 자유롭게 작성해주세요. ",-1)),s(dt,{modelValue:f.value.feedback,"onUpdate:modelValue":g[3]||(g[3]=h=>f.value.feedback=h),type:"textarea",placeholder:"강의에 대한 의견, 개선사항, 또는 추가로 궁금한 점을 자유롭게 작성해주세요...",rows:"6",outlined:"",autogrow:""},null,8,["modelValue"])])):I("",!0),d.value===5?(c(),w("div",Ut,[t("div",Dt,[s(ee,{name:"check_circle",size:"80px",color:"positive"})]),g[14]||(g[14]=t("h5",{class:"q-mb-md"},"설문조사 완료!",-1)),g[15]||(g[15]=t("p",{class:"text-grey-7"},[N(" 소중한 의견을 주셔서 감사합니다."),t("br"),N(" 더 나은 강의를 만들기 위해 노력하겠습니다. ")],-1))])):I("",!0)])])]),_:1}),s(Fe,{align:"right",class:"q-pa-lg"},{default:v(()=>[d.value>1&&d.value<5?(c(),B(O,{key:0,flat:"",label:"이전",onClick:r,class:"q-mr-sm"})):I("",!0),d.value<5?(c(),B(O,{key:1,label:d.value===4?"완료":"다음",color:d.value===4?"positive":"primary",onClick:x,disable:!L.value},null,8,["label","color","disable"])):I("",!0),d.value===5?(c(),B(O,{key:2,flat:"",label:"닫기",onClick:u,color:"primary"})):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Rt=Ie(Ot,[["__scopeId","data-v-faec0bd2"]]),zt={key:0,class:"poll-vote"},At={class:"poll-header"},Et={class:"title"},Tt={key:0,class:"subtitle"},Wt={key:0,class:"options"},jt={key:1,class:"voted"},Nt=qe({__name:"PollVote",props:{pollId:{}},setup(o){const i=o,y=Me(),k=z?ie(z):null,m=z?ll(z):ll(),d=U(null),f=U(null),_=U(!1);let A=null,D=null,$=null;Qe(async()=>{if(!k){console.warn("⚠️ RTDB 미초기화: 투표 비활성"),_.value=!1;return}console.log("🗳️ PollVote mount:",{pollId:i.pollId,rtdbUrl:"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/",appDbUrl:z?.options?.databaseURL||null});try{A=_e(X(k,`polls/${i.pollId}/meta`),r=>{d.value=r.val()||null,console.log("🗳️ meta:",d.value)});const x=m.currentUser?.uid;console.log("🗳️ auth uid:",x),x?D=_e(X(k,`polls/${i.pollId}/votes/${x}`),r=>{f.value=r.exists()?r.val():null,console.log("🗳️ myVote:",f.value),_.value=!0}):_.value=!0}catch(x){console.error("🗳️ RTDB 구독 실패:",x),_.value=!0}$=window.setTimeout(()=>{_.value||(_.value=!0)},2500)}),xe(()=>{A&&A(),D&&D(),$&&window.clearTimeout($)});const q=b(()=>d.value?.open!==!1),L=async x=>{try{if(console.log("🗳️ vote click:",{pollId:i.pollId,optionId:x}),!k)throw new Error("DB not ready");if(!q.value){y.notify({type:"warning",message:"현재 투표는 종료되었습니다."});return}const r=m.currentUser?.uid;if(!r){y.notify({type:"warning",message:"로그인이 필요합니다."});return}const C=`polls/${i.pollId}/votes/${r}`;console.log("🗳️ set path:",C),await Ne(X(k,C),x);const u=await ye(X(k,C));console.log("🗳️ verify read:",{path:C,value:u.val()}),y.notify({type:"positive",message:"투표가 완료되었습니다."})}catch(r){console.error("투표 실패:",r),y.notify({type:"negative",message:r?.message||"투표 실패"})}};return(x,r)=>d.value?(c(),w("div",zt,[t("div",At,[t("div",Et,V(d.value?.question||"투표"),1),d.value?.description?(c(),w("div",Tt,V(d.value?.description),1)):I("",!0)]),_.value?(c(),w("div",Wt,[(c(!0),w(we,null,ke(d.value?.options||{},(C,u)=>(c(),w("div",{key:u,class:"option-item"},[s(O,{unelevated:"",color:"primary",class:"full-width q-mb-sm",label:C,disable:!!f.value,onClick:W=>L(u)},null,8,["label","disable","onClick"])]))),128))])):I("",!0),f.value?(c(),w("div",jt,"투표 완료: "+V(d.value?.options?.[f.value]),1)):I("",!0)])):I("",!0)}}),Bt=Ie(Nt,[["__scopeId","data-v-03dfac5f"]]),Ft={class:"poll-word"},Ht={class:"title"},Mt={key:0,class:"loading"},Qt={key:1,class:"cloud"},Pt=qe({__name:"PollResultWord",props:{pollId:{}},setup(o){const i=o,y=z?ie(z):null,k=U(null),m=U({}),d=U(!1);let f=null,_=null;Qe(()=>{y&&(f=_e(X(y,`polls/${i.pollId}/meta`),$=>{k.value=$.val()||null,d.value=!0}),_=_e(X(y,`polls/${i.pollId}/tally`),$=>{m.value=$.val()||{}}))}),xe(()=>{f&&f(),_&&_()});const A=b(()=>{const $=Object.values(m.value||{});return $.length?Math.max(...$):0}),D=$=>{const q=A.value||1,L=Math.round(12+24*($/q)),x=.5+.5*($/q);return{fontSize:L+"px",opacity:x.toFixed(2),color:`hsl(210, 70%, ${Math.round(30+30*($/q))}%)`}};return($,q)=>(c(),w("div",Ft,[t("div",Ht,V(k.value?.question||"투표 결과"),1),d.value?(c(),w("div",Qt,[(c(!0),w(we,null,ke(k.value?.options||{},(L,x)=>(c(),w("span",{key:x,class:"word",style:Tl(D(m.value[x]||0))},V(L),5))),128))])):(c(),w("div",Mt,"로딩 중..."))]))}}),Gt=Ie(Pt,[["__scopeId","data-v-604aff85"]]),Xt={class:"q-pa-md"},Jt={class:"course-info q-mb-lg"},Kt={class:"text-caption text-grey-7 q-mt-sm"},Yt={class:"text-caption text-grey-7"},Zt={class:"q-mt-lg"},eo={class:"text-caption text-grey-7"},lo={class:"q-mt-lg"},to={class:"row q-col-gutter-sm"},oo={class:"col-6"},ao={class:"text-h6 text-primary"},so={class:"col-6"},no={class:"text-h6 text-positive"},io={class:"q-mt-sm"},ro={class:"text-caption text-grey-7 q-mt-xs"},uo={key:0,class:"login-required"},co={class:"text-center q-pa-xl"},vo={class:"row justify-center q-gutter-md"},po={class:"row items-center q-mb-sm"},mo={class:"col"},fo={class:"text-h5 text-weight-bold"},yo={class:"text-subtitle1 text-grey-7"},go={class:"col-auto"},bo={class:"row items-center q-gutter-sm"},ho={key:0,class:"col-auto"},xo={key:1,class:"col-auto"},wo={key:2,class:"col-auto"},ko={key:3,class:"col-auto"},_o=["src","alt"],qo={class:"col-auto"},Io={class:"slide-container"},$o={key:0,class:"slide-viewer-container"},Co=["src"],So={class:"quiz-card"},Vo={class:"text-subtitle1 q-mb-sm"},Lo={class:"row q-col-gutter-md options-grid"},Uo={key:0,class:"q-mt-md q-pa-sm bg-grey-1 rounded-borders"},Do={key:0,class:"text-positive text-weight-bold q-mb-xs"},Oo={class:"text-body2"},Ro={key:0,class:"q-mb-xs"},zo=["innerHTML"],Ao={key:1,class:"loading-state"},Eo={class:"fixed-navigation-bar"},To={class:"row items-center justify-center q-pa-sm"},Wo={class:"col-auto q-mr-lg"},jo={class:"col-auto q-mx-lg"},No={class:"text-center"},Bo={class:"text-h6 text-weight-bold"},Fo={class:"text-caption text-grey-7"},Ho={key:0,class:"col-auto q-mx-lg"},Mo={class:"col-auto q-ml-lg"},Qo={class:"q-ml-sm text-h6"},Po={class:"text-body1 q-mb-md"},Go=qe({__name:"StudentView",setup(o){const i=Me(),y=zl(),k=Al(),m=rt(),{user:d,isAuthenticated:f,displayName:_,photoURL:A,logout:D,initAuth:$,signInWithGoogle:q}=Ze(),{userRole:L}=Ze(),{guestUser:x,isGuestAuthenticated:r}=ut(),C=U(!0),u=U(0),W=U([]),H=U(!1),g=U(!1),h=U(!1),te=U(!1),re=U(!1),cl=U("학습 종료"),ue=U(!1),fe=U(localStorage.getItem("requireStudentLogin")!=="false"),Q=b(()=>y.params.courseId),j=b(()=>J.value.length),J=b(()=>{if(m.lessons.length===0)return[];const l=[];return m.lessons.forEach((e,a)=>{if(m.isChapterLocked(a)){console.log(`🔒 Chapter ${a}가 잠겨있어서 건너뜀`);return}for(let n=0;n<e.slides;n++){const p=`${a}-${n}`,F=!!Xe[p];if(m.isSlideLocked(a,n))if(F)console.log(`🔓 Poll 슬라이드(${p})는 잠금 무시하고 표시`);else{console.log(`🔒 Slide ${p}가 잠겨있어서 건너뜀`);continue}const T=e.slideTitles?.[n]||`슬라이드 ${l.length+1}`;l.push({index:l.length,title:T,fileName:`slide-${a}-${n}.md`,lessonIndex:a,slideIndex:n})}}),l}),ce=b(()=>m.lessons.length===0||u.value>=j.value?"슬라이드 로딩 중...":J.value[u.value]?.title||`슬라이드 ${u.value+1}`),$e=b(()=>{if(m.lessons.length===0||u.value>=j.value)return console.log("🚫 슬라이드 URL 생성 실패:",{hasLessons:m.lessons.length>0,currentIndex:u.value,totalSlides:j.value}),null;const l=J.value[u.value];if(!l)return console.warn("🚫 슬라이드 정보를 찾을 수 없음:",u.value),null;const e=l.fileName.replace(".md",".html"),a=`/generated/slides/${e}`;return console.log("🔗 슬라이드 URL 생성:",{index:u.value,fileName:l.fileName,slideFileName:e,url:a}),a}),dl=()=>{console.log("✅ 슬라이드 로드 완료:",{index:u.value,title:ce.value,url:$e.value}),setTimeout(()=>{try{const l=document.querySelector(".slide-viewer");l&&l.contentWindow&&l.contentDocument&&(l.contentDocument.addEventListener("click",async e=>{const a=e.target;if(a.classList.contains("copy-button")){const n=a.closest(".code-block-wrapper");if(n){const p=n.querySelector("pre code");p&&vl(p.textContent||"",a)}return}a.closest(".code-block-wrapper")||a.closest("pre")||a.closest("code")}),console.log("✅ iframe 내부 복사 기능 및 네비게이션 기능 주입 완료"))}catch(l){console.log("⚠️ iframe 내부 기능 주입 실패 (CORS 정책):",l)}},100),Sl().catch(()=>{}),oe.value&&Vl().catch(()=>{}),Ol().catch(()=>{});try{E.value&&de.value?H.value=!0:H.value=!1}catch{}},vl=async(l,e)=>{try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(l);else{const p=document.createElement("textarea");p.value=l,p.style.position="fixed",p.style.top="0",p.style.left="0",p.style.width="2em",p.style.height="2em",p.style.padding="0",p.style.border="none",p.style.outline="none",p.style.boxShadow="none",p.style.background="transparent",document.body.appendChild(p),p.focus(),p.select(),document.execCommand("copy"),document.body.removeChild(p)}const a=e.textContent,n=e.style.backgroundColor;e.textContent="복사됨!",e.style.backgroundColor="#10b981",setTimeout(()=>{e.textContent=a,e.style.backgroundColor=n},1e3),i.notify({type:"positive",message:"코드가 클립보드에 복사되었습니다.",position:"top",timeout:1e3})}catch(a){console.error("클립보드 복사 실패:",a),i.notify({type:"negative",message:"코드 복사에 실패했습니다.",position:"top",timeout:2e3})}},pl=b(()=>j.value===0?0:W.value.length/j.value),K=b(()=>u.value!==j.value-1?!1:W.value.includes(u.value));b(()=>m.lessons.some((l,e)=>{if(m.isChapterLocked(e))return!0;for(let a=0;a<l.slides;a++)if(m.isSlideLocked(e,a))return!0;return!1}));const Xe={"1-2":{pollId:"poll-1-2",result:"bar"},"1-3":{pollId:"poll-1-3",result:"bar"},"1-4":{pollId:"poll-1-4",result:"bar"},"1-5":{pollId:"poll-1-5",result:"bar"},"1-6":{pollId:"poll-1-6",result:"bar"}},se=U(null),de=b(()=>L.value==="student"),oe=b(()=>L.value==="admin"),ml=b(()=>{const l=J.value[u.value];return l?`${l.lessonIndex}-${l.slideIndex}`:""}),E=b(()=>se.value||Xe[ml.value]);pe([u,J],async()=>{try{const l=J.value[u.value];if(!l){se.value=null;return}const e=`/slides/slide-${l.lessonIndex}-${l.slideIndex}.md`,a=await fetch(e,{cache:"no-store"});if(!a.ok){se.value=null;return}const n=(await a.text()).toLowerCase();if(n.trim().startsWith("@poll")){const p=/@word|word\s*cloud|워드/.test(n);se.value={pollId:`poll-${l.lessonIndex}-${l.slideIndex}`,result:p?"word":"bar"}}else se.value=null}catch{se.value=null}},{immediate:!0});const fl=async()=>{try{console.log("🔐 학생 모드 - 직접 로그인 시작..."),await q(),console.log("✅ 학생 모드 - 직접 로그인 완료")}catch(l){console.error("❌ 학생 모드 - 직접 로그인 실패:",l),i.notify({type:"negative",message:"로그인에 실패했습니다. 다시 시도해주세요.",position:"top",timeout:3e3})}},yl=()=>{h.value=!0},gl=l=>{console.log("🎭 게스트 로그인 성공:",l),h.value=!1,i.notify({type:"positive",message:"게스트 모드로 로그인되었습니다!",position:"top",timeout:2e3})},bl=()=>{h.value=!1,g.value=!0},Je=async()=>{if(console.log("🎓 학생 모드 - 강의 로드 시작:",Q.value),!Q.value){console.warn("🚫 강의 ID가 없습니다."),i.notify({type:"negative",message:"강의 ID가 없습니다.",position:"top"});return}try{await m.initializeCourseOutline();const l=Q.value||"ai-workshop";m.setCurrentCourseId(l);const e=await m.loadLockStatusFromFirestore(l);console.log("🔄 Firestore 잠금 로드 결과:",e),m.subscribeLockStatus(l),console.log("📚 강의 데이터 로드 완료:",{lessonsCount:m.lessons.length,lessons:m.lessons.slice(0,3)});const a=parseInt(y.query.slide)||0;J.value.length>0?a>=0&&a<J.value.length?u.value=a:(u.value=0,console.log("🔒 URL의 슬라이드 인덱스가 유효하지 않아 첫 번째 슬라이드로 이동")):(u.value=0,console.log("🔒 잠금 해제된 슬라이드가 없음")),console.log("📄 현재 슬라이드 인덱스:",u.value),Il()}catch(l){console.error("❌ 강의 로드 실패:",l),i.notify({type:"negative",message:"강의 로드에 실패했습니다.",position:"top"})}},P=l=>{l>=0&&l<j.value?(u.value=l,hl()):console.warn(`🚫 슬라이드 인덱스 ${l}가 범위를 벗어남 (0-${j.value-1})`)},hl=()=>{console.log("🔄 라우트 업데이트:",{courseId:Q.value,slideIndex:u.value,path:`/study/${Q.value}`,query:{slide:u.value.toString()}}),k.push({path:`/study/${Q.value}`,query:{slide:u.value.toString()}})},Ke=async()=>{Ee()&&(ue.value=!0)},xl=()=>{try{window.close(),setTimeout(()=>{i.notify({type:"info",message:"브라우저 탭을 직접 닫아주세요.",position:"top",timeout:5e3})},1e3)}catch(l){console.error("브라우저 종료 실패:",l),i.notify({type:"info",message:"브라우저 탭을 직접 닫아주세요.",position:"top",timeout:5e3})}},wl=async()=>{try{ue.value=!1;const l=_.value||x.value?.name||"사용자",e=d.value?.email||x.value?.email||"",a=r.value;await D(),k.push({path:"/logout",query:{name:l,email:e,isGuest:a.toString()}})}catch(l){console.error("로그아웃 오류:",l),i.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다.",position:"top"})}},kl=async()=>{if(u.value!==j.value-1){i.notify({type:"warning",message:"마지막 슬라이드에서만 학습 완료를 표시할 수 있습니다.",position:"top"});return}const l=u.value;if(K.value){const e=W.value.filter(a=>a!==l);W.value=e}else W.value.push(l),te.value=!0;$l(),i.notify({type:K.value?"positive":"info",message:K.value?"학습 완료!":"학습 완료 취소",position:"top"})},_l=async l=>{console.log("설문조사 데이터:",l);try{const e=await vt.submitSurvey(l);if(!e.success)throw new Error(e.message);const a=`survey-data-${Q.value}`,n={...l,submittedAt:new Date().toISOString(),courseId:Q.value,userId:d.value?.uid,userEmail:d.value?.email};localStorage.setItem(a,JSON.stringify(n));const p=d.value?.email||x.value?.email,F=d.value?.displayName||x.value?.name||"학습자";if(p)try{const T=await ct.sendLearningCompletionEmail(p,F,"AI Workshop 강의");T.success?i.notify({type:"positive",message:"학습 완료! 축하 이메일이 전송되었습니다.",position:"top"}):(console.warn("이메일 전송 실패:",T.message),i.notify({type:"warning",message:"이메일 전송에 실패했습니다: "+T.message,position:"top"}))}catch(T){console.error("이메일 전송 오류:",T),i.notify({type:"negative",message:"이메일 전송 중 오류가 발생했습니다.",position:"top"})}else console.warn("이메일 주소가 없어서 이메일을 전송할 수 없습니다.");i.notify({type:"positive",message:"설문조사가 성공적으로 제출되었습니다!",position:"top"})}catch(e){console.error("설문조사 제출 실패:",e),i.notify({type:"negative",message:"설문조사 제출에 실패했습니다.",position:"top"})}},ql=()=>{console.log("설문조사가 완료되었습니다."),Ee()&&(ue.value=!0)},Il=()=>{try{const l=`completed-slides-${Q.value}`,e=localStorage.getItem(l);e&&(W.value=JSON.parse(e))}catch(l){console.error("완료된 슬라이드 로드 실패:",l),W.value=[]}},$l=()=>{try{const l=`completed-slides-${Q.value}`;localStorage.setItem(l,JSON.stringify(W.value))}catch(l){console.error("완료된 슬라이드 저장 실패:",l)}},Cl=l=>new Date(l).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),Ce=U(!1),Ye=l=>{if(m.lessons.length!==0)switch(l.key){case"ArrowRight":case"ArrowDown":case"PageDown":case" ":l.preventDefault(),P(u.value+1);break;case"ArrowLeft":case"ArrowUp":case"PageUp":l.preventDefault(),P(u.value-1);break;case"Home":l.preventDefault(),P(0);break;case"End":l.preventDefault(),P(j.value-1);break;case"?":l.preventDefault(),Ce.value=!Ce.value;break}},Sl=async()=>{try{const l=E.value;if(!l)return;const e=z?ie(z):null;if(!e)return;const{getAuth:a}=await Le(async()=>{const{getAuth:ae}=await Ue(()=>De(()=>Oe(()=>import("./QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js"),__vite__mapDeps([0,1,2])),ge([0,1,2])),be([0,1,2])).then(Z=>Z.i);return{getAuth:ae}},he([0,1,2])),n=a(z).currentUser?.uid;if(!n)return;const p=de.value?`polls/${l.pollId}/votes/${n}`:`polls/${l.pollId}/userVotes/${n}`,F=await ye(X(e,p));if(!F.exists())return;const T=F.val(),Y=document.querySelector(".slide-viewer");if(!Y||!Y.contentWindow)return;typeof T=="string"&&/^\d+$/.test(T)?Y.contentWindow.postMessage({type:"poll-state",pollId:l.pollId,optionId:String(T)},"*"):T&&Y.contentWindow.postMessage({type:"poll-state",pollId:l.pollId,text:String(T)},"*")}catch(l){console.warn("⚠️ poll 상태 동기화 실패:",l)}},Vl=async()=>{try{if(!oe.value)return;const l=E.value;if(!l)return;const e=z?ie(z):null;if(!e)return;const a=X(e,`polls/${l.pollId}/meta`),n=(await ye(a)).val()||{};(!n.question||String(n.question).trim()==="")&&(await Ne(a,{...n,question:ce.value}),console.log("📝 meta.question 보강:",l.pollId,ce.value))}catch(l){console.warn("⚠️ meta.question 보강 실패:",l)}};Qe(async()=>{$(),await Je(),document.addEventListener("keydown",Ye);const l=z?ie(z):null,e=async a=>{try{const n=a.data||{};if(n&&typeof n.type=="string"){if(n.type==="slide-next"){P(u.value+1);return}else if(n.type==="slide-prev"){P(u.value-1);return}else if(n.type==="slide-first"){P(0);return}else if(n.type==="slide-last"){P(j.value-1);return}}if(!n||n.type!=="poll-vote"||!l||L.value!=="student")return;const{pollId:p,optionId:F,text:T}=n,Y=(await Le(async()=>{const{getAuth:G}=await Ue(()=>De(()=>Oe(()=>import("./QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js"),__vite__mapDeps([0,1,2])),ge([0,1,2])),be([0,1,2])).then(Se=>Se.i);return{getAuth:G}},he([0,1,2]))).getAuth(z).currentUser?.uid;if(!Y||!p)return;const ae=X(l,`polls/${p}/votes/${Y}`);if((await ye(ae)).exists())return;const Z=T||String(F);await Ne(ae,Z),console.log("🗳️ parent saved:",{pollId:p,value:Z})}catch(n){console.warn("🗳️ parent save failed:",n)}};window.addEventListener("message",e),xe(()=>{window.removeEventListener("message",e)})}),xe(()=>{document.removeEventListener("keydown",Ye)}),pe(()=>y.params.courseId,l=>{l&&Je()},{immediate:!0}),pe(()=>y.query.slide,l=>{if(l&&m.lessons.length>0){const e=parseInt(l)||0;u.value=Math.min(e,j.value-1)}}),pe(()=>m.lessons.map(l=>l?.slides).join(","),async()=>{try{const l=Q.value||"ai-workshop";await m.loadLockStatusFromFirestore(l),console.log("🔒 StudentView: lessons 갱신 → Firestore 잠금 재적용 완료")}catch(l){console.warn("⚠️ StudentView: Firestore 잠금 재적용 실패(무시 가능):",l)}},{immediate:!1});const Ll=l=>{const e=`/#/poll-result?pollId=${encodeURIComponent(l)}`;window.open(e,"_blank","noopener,noreferrer,width=520,height=420")},Ul=async l=>{try{if(!oe.value||!await i.dialog({title:"결과 초기화",message:`해당 투표의 나의 선택(LocalStorage)과 RTDB의 표기를 삭제할까요?
이 작업은 되돌릴 수 없습니다.`,cancel:!0,ok:{label:"초기화",color:"negative"}}).onOk(()=>!0).onCancel(()=>!1))return;try{Object.keys(localStorage).filter(a=>a.toLowerCase().includes("poll")).forEach(a=>localStorage.removeItem(a))}catch{}const e=z?ie(z):null;if(e){const{getAuth:a}=await Le(async()=>{const{getAuth:p}=await Ue(()=>De(()=>Oe(()=>import("./QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT-4IULfpjV.js"),__vite__mapDeps([0,1,2])),ge([0,1,2])),be([0,1,2])).then(F=>F.i);return{getAuth:p}},he([0,1,2])),n=a(z).currentUser?.uid;n&&await El(X(e,`polls/${l}/userVotes/${n}`)).catch(()=>{})}i.notify({type:"positive",message:"투표 결과가 초기화되었습니다.",position:"top"});try{document.querySelector(".slide-viewer")?.contentWindow?.postMessage({type:"poll-state",pollId:l,optionId:""},"*")}catch{}}catch{i.notify({type:"negative",message:"초기화 중 오류가 발생했습니다.",position:"top"})}},R=U({visible:!1,question:"",options:[],correctIndex:null,answerText:"",lastChoice:null,isOX:!1,revealed:!1}),Dl=()=>{try{const l=document.querySelector(".slide-viewer");if(!l||!l.contentDocument)return null;const e=l.contentDocument;if(!e.body.classList.contains("quiz-slide"))return null;const a=(e.querySelector(".quiz-question")?.textContent||"").trim(),n=Array.from(e.querySelectorAll(".quiz-option")).map(G=>(G.textContent||"").replace(/^\d+\.\s*/,"").trim()),p=(e.getElementById("quiz-answer-data")?.textContent||"").trim(),F=n.map(G=>G.replace(/\s+/g,"")),T=F[0]??"",Y=F[1]??"",ae=F.length===2&&(/^(맞다|그렇다|O)$/i.test(T)||/^(아니다|아니오|그렇지않다|X)$/i.test(Y))||/정답\s*[:\-–]?\s*[OX]/i.test(p);let Z=null;if(ae){const G=/정답\s*[:\-–]?\s*O/i.test(p),Se=/정답\s*[:\-–]?\s*X/i.test(p);G?Z=1:Se&&(Z=2)}else{const G=p.match(/(^|\D)(\d+)(?=\D|$)/);Z=G?Number(G[2]):null}return{question:a,options:n,correctIndex:Z,answerText:p,isOX:!!ae}}catch{return null}},Ol=async()=>{const l=Dl();if(!l||!l.question||l.options.length===0){R.value={visible:!1,question:"",options:[],correctIndex:null,answerText:"",lastChoice:null,isOX:!1,revealed:!1};return}R.value={visible:!0,question:l.question,options:l.options,correctIndex:l.correctIndex,answerText:l.answerText,lastChoice:null,isOX:l.isOX,revealed:!1}},Rl=l=>{R.value.visible&&(R.value.lastChoice=l,R.value.revealed=!0)};return(l,e)=>(c(),B(it,{view:"hHh LpR fFf"},{default:v(()=>[!fe.value||S(f)||S(r)?(c(),B(Yl,{key:0,modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=a=>C.value=a),"show-if-above":"",bordered:"",class:"bg-grey-1",width:300},{default:v(()=>[s(Zl,{class:"fit"},{default:v(()=>[t("div",Xt,[e[24]||(e[24]=t("div",{class:"text-h6 text-weight-bold q-mb-md"},"📚 AI Workshop 강의",-1)),t("div",Jt,[e[19]||(e[19]=t("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"},"📖 강의 정보",-1)),s(me,{flat:"",bordered:""},{default:v(()=>[s(le,null,{default:v(()=>[e[18]||(e[18]=t("div",{class:"text-body2"}," AI Workshop 강의입니다. 마크다운 슬라이드를 HTML로 변환하여 학습할 수 있습니다. ",-1)),t("div",Kt,[s(ee,{name:"person",size:"xs"}),e[17]||(e[17]=N(" AI Workshop ",-1))]),t("div",Yt,[s(ee,{name:"schedule",size:"xs"}),N(" "+V(Cl(new Date().toISOString())),1)])]),_:1,__:[18]})]),_:1})]),e[25]||(e[25]=t("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"},"📖 강의 목차",-1)),s(Pl,null,{default:v(()=>[(c(!0),w(we,null,ke(J.value,(a,n)=>(c(),B(Gl,{key:n,clickable:"",active:n===u.value,onClick:p=>P(n),class:"q-mb-sm"},{default:v(()=>[s(ze,{avatar:""},{default:v(()=>[s(ee,{name:(u.value,"slideshow"),color:n===u.value?"primary":"grey",size:"sm"},null,8,["name","color"])]),_:2},1024),s(ze,null,{default:v(()=>[s(Xl,null,{default:v(()=>[N(V(a.title),1)]),_:2},1024)]),_:2},1024),s(ze,{side:""},{default:v(()=>[W.value.includes(n)?(c(),B(ee,{key:0,name:"check_circle",color:"positive",size:"sm"})):I("",!0)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1}),t("div",Zt,[e[20]||(e[20]=t("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"},"📊 학습 진행률",-1)),s(He,{value:pl.value,color:"primary",class:"q-mb-sm"},null,8,["value"]),t("div",eo,V(W.value.length)+" / "+V(j.value)+" 슬라이드 완료 ",1)]),t("div",lo,[e[23]||(e[23]=t("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"},"📈 학습 통계",-1)),s(me,{flat:"",bordered:""},{default:v(()=>[s(le,null,{default:v(()=>[t("div",to,[t("div",oo,[t("div",ao,V(j.value),1),e[21]||(e[21]=t("div",{class:"text-caption"},"전체 슬라이드",-1))]),t("div",so,[t("div",no,V(K.value?1:0),1),e[22]||(e[22]=t("div",{class:"text-caption"},"학습 완료",-1))])]),t("div",io,[s(He,{value:K.value?1:0,color:"positive",class:"q-mt-xs"},null,8,["value"]),t("div",ro,V(K.value?"학습 완료!":"마지막 슬라이드에서 완료 가능"),1)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["modelValue"])):I("",!0),s(nt,null,{default:v(()=>[fe.value&&!S(f)&&!S(r)?(c(),w("div",uo,[t("div",co,[s(ee,{name:"school",size:"100px",color:"primary",class:"q-mb-lg"}),e[26]||(e[26]=t("div",{class:"text-h4 text-weight-bold q-mb-md"},"학습을 위해 로그인이 필요합니다",-1)),e[27]||(e[27]=t("div",{class:"text-body1 text-grey-7 q-mb-lg"}," AI Workshop 강의를 수강하려면 Google 계정으로 로그인하거나 게스트 모드를 이용하세요. ",-1)),t("div",vo,[s(O,{color:"primary",icon:"login",label:"Google로 로그인",size:"lg",onClick:fl}),s(O,{color:"orange",icon:"person",label:"게스트 모드",size:"lg",onClick:yl})])])])):(c(),B(st,{key:1,class:"q-pa-sm"},{default:v(()=>[t("div",po,[t("div",mo,[t("div",fo,V(S(m).lessons.length>0?"AI Workshop 강의":"강의 로딩 중..."),1),t("div",yo,V(ce.value),1)]),t("div",go,[t("div",bo,[S(f)?(c(),w("div",ho,[s(Ae,{color:"secondary","text-color":"white",icon:"person",label:S(_)},null,8,["label"])])):S(r)?(c(),w("div",xo,[s(Ae,{color:"orange","text-color":"white",icon:"person",label:S(x)?.name||"게스트"},null,8,["label"])])):I("",!0),S(Ee)()?(c(),w("div",wo,[s(O,{flat:"",round:"",dense:"",icon:"logout",color:"grey-7",onClick:Ke},{default:v(()=>[s(ve,null,{default:v(()=>e[28]||(e[28]=[N("학습 종료",-1)])),_:1,__:[28]})]),_:1})])):fe.value&&(S(f)||S(r))?(c(),w("div",ko,[s(O,{flat:"",round:"",dense:"",icon:S(A)?void 0:"logout",color:"grey-7",onClick:Ke},{default:v(()=>[S(A)?(c(),B(Ve,{key:0,size:"24px",class:"q-mr-xs"},{default:v(()=>[t("img",{src:S(A),alt:S(_)},null,8,_o)]),_:1})):I("",!0),s(ve,null,{default:v(()=>[N(V(S(_)||S(x)?.name||"사용자")+" (로그아웃)",1)]),_:1})]),_:1},8,["icon"])])):I("",!0),t("div",qo,[s(Ae,{color:"primary","text-color":"white",icon:"school",label:"학습 모드"})])])])]),Ce.value?(c(),B(ot,{key:0,class:"bg-info text-white q-mb-md",rounded:""},{avatar:v(()=>[s(ee,{name:"keyboard"})]),default:v(()=>[e[29]||(e[29]=t("div",{class:"text-body2"},[t("strong",null,"키보드 단축키:"),t("br"),N(" ← → : 이전/다음 슬라이드 | ↑ ↓ : 이전/다음 슬라이드"),t("br"),N(" Home/End : 첫/마지막 슬라이드 | Space : 다음 슬라이드"),t("br"),N(" ? : 이 도움말 토글 ")],-1))]),_:1,__:[29]})):I("",!0),t("div",Io,[$e.value?(c(),w("div",$o,[t("iframe",{src:$e.value,class:"slide-viewer",onLoad:dl},null,40,Co),R.value.visible?(c(),w("div",{key:0,class:"quiz-overlay",onClick:e[1]||(e[1]=ne(()=>{},["stop"]))},[t("div",So,[t("div",Vo,V(R.value.question),1),t("div",Lo,[(c(!0),w(we,null,ke(R.value.options,(a,n)=>(c(),w("div",{class:"col-12 col-sm-6",key:n},[s(O,{outline:"",rounded:"",size:"lg",class:"full-width text-left option-btn",label:n+1+". "+a,onClick:ne(p=>Rl(n+1),["stop"])},null,8,["label","onClick"])]))),128))]),R.value.revealed&&R.value.answerText?(c(),w("div",Uo,[R.value.revealed&&R.value.correctIndex&&R.value.lastChoice?(c(),w("div",Do,V(R.value.lastChoice===R.value.correctIndex?"정답입니다! ✅":"오답입니다. ❌"),1)):I("",!0),t("div",Oo,[R.value.isOX?I("",!0):(c(),w("div",Ro,[e[30]||(e[30]=t("b",null,"정답:",-1)),N(" "+V(R.value.correctIndex),1)])),t("div",{innerHTML:R.value.answerText.replace(/\n/g,"<br/>")},null,8,zo)])])):I("",!0)])])):I("",!0),E.value&&de.value&&H.value?(c(),w("div",{key:1,class:"iframe-blocker",onClick:e[2]||(e[2]=ne(()=>{},["stop"]))})):I("",!0),E.value&&de.value&&H.value?(c(),w("div",{key:2,class:"poll-overlay",onClick:e[3]||(e[3]=ne(()=>{},["stop"]))},[s(Bt,{"poll-id":E.value.pollId},null,8,["poll-id"])])):E.value&&oe.value&&E.value.result==="bar"?(c(),w("div",{key:3,class:"poll-overlay",onClick:e[4]||(e[4]=ne(()=>{},["stop"]))},[s(gt,{"poll-id":E.value.pollId},null,8,["poll-id"])])):E.value&&oe.value&&E.value.result==="word"?(c(),w("div",{key:4,class:"poll-overlay",onClick:e[5]||(e[5]=ne(()=>{},["stop"]))},[s(Gt,{"poll-id":E.value.pollId},null,8,["poll-id"])])):I("",!0),E.value&&de.value&&!H.value?(c(),B(O,{key:5,class:"poll-fab",round:"",color:"primary",icon:"how_to_vote",onClick:e[6]||(e[6]=a=>H.value=!0)},{default:v(()=>[s(ve,null,{default:v(()=>e[31]||(e[31]=[N("투표하기",-1)])),_:1,__:[31]})]),_:1})):I("",!0),E.value&&oe.value?(c(),B(O,{key:6,class:"poll-fab q-mr-md",round:"",color:"secondary",icon:"insights",onClick:e[7]||(e[7]=a=>Ll(E.value.pollId)),style:{right:"80px"}},{default:v(()=>[s(ve,null,{default:v(()=>e[32]||(e[32]=[N("결과 보기",-1)])),_:1,__:[32]})]),_:1})):I("",!0),E.value&&oe.value?(c(),B(O,{key:7,class:"poll-fab q-mr-md",round:"",color:"negative",icon:"delete",onClick:e[8]||(e[8]=a=>Ul(E.value.pollId)),style:{right:"140px"}},{default:v(()=>[s(ve,null,{default:v(()=>e[33]||(e[33]=[N("결과 초기화",-1)])),_:1,__:[33]})]),_:1})):I("",!0)])):(c(),w("div",Ao,[s(at,{size:"50px",color:"primary"}),e[34]||(e[34]=t("div",{class:"text-h6 q-mt-md"},"슬라이드를 로딩하는 중...",-1))]))])]),_:1}))]),_:1}),!fe.value||S(f)||S(r)?(c(),B(sl,{key:1,position:"bottom",offset:[0,0]},{default:v(()=>[t("div",Eo,[t("div",To,[t("div",Wo,[s(O,{round:"",size:"lg",icon:"chevron_left",color:"blue","text-color":"white",disable:u.value===0,onClick:e[9]||(e[9]=a=>P(u.value-1))},null,8,["disable"])]),t("div",jo,[t("div",No,[t("div",Bo,V(u.value+1),1),t("div",Fo,V(ce.value),1)])]),u.value===j.value-1?(c(),w("div",Ho,[s(O,{color:K.value?"positive":"primary",icon:K.value?"check_circle":"done",label:K.value?"완료됨":"학습 완료",onClick:kl,size:"md"},null,8,["color","icon","label"])])):I("",!0),t("div",Mo,[s(O,{round:"",size:"lg",icon:"chevron_right",color:"blue","text-color":"white",disable:u.value===j.value-1,onClick:e[10]||(e[10]=a=>P(u.value+1))},null,8,["disable"])])])])]),_:1})):I("",!0),s(sl,{position:"bottom-right",offset:[18,80]},{default:v(()=>[s(O,{fab:"",icon:"menu",color:"primary",onClick:e[11]||(e[11]=a=>C.value=!C.value)})]),_:1}),s(Be,{modelValue:re.value,"onUpdate:modelValue":e[12]||(e[12]=a=>re.value=a),persistent:""},{default:v(()=>[s(me,{style:{"min-width":"350px"}},{default:v(()=>[s(le,{class:"row items-center"},{default:v(()=>[s(Ve,{icon:"exit_to_app",color:"primary","text-color":"white"}),t("span",Qo,V(cl.value),1)]),_:1}),s(le,null,{default:v(()=>e[35]||(e[35]=[t("p",null,"화면을 종료하시겠습니까?",-1)])),_:1,__:[35]}),s(Fe,{align:"right"},{default:v(()=>[el(s(O,{flat:"",label:"아니오",color:"grey"},null,512),[[al]]),s(O,{unelevated:"",label:"예",color:"primary",onClick:xl})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Be,{modelValue:ue.value,"onUpdate:modelValue":e[13]||(e[13]=a=>ue.value=a),persistent:""},{default:v(()=>[s(me,{style:{"min-width":"400px"}},{default:v(()=>[s(le,{class:"row items-center"},{default:v(()=>[s(Ve,{icon:"logout",color:"orange","text-color":"white"}),e[36]||(e[36]=t("span",{class:"q-ml-sm text-h6"},"로그아웃 확인",-1))]),_:1,__:[36]}),s(le,null,{default:v(()=>[t("div",Po,[t("strong",null,V(S(_)||S(x)?.name||"사용자"),1),e[37]||(e[37]=N("님, 정말로 로그아웃하시겠습니까? ",-1))]),e[38]||(e[38]=t("div",{class:"text-caption text-grey-7"},"로그아웃하면 현재 학습 진행 상황이 저장됩니다.",-1))]),_:1,__:[38]}),s(Fe,{align:"right"},{default:v(()=>[el(s(O,{flat:"",label:"취소",color:"grey"},null,512),[[al]]),s(O,{unelevated:"",label:"로그아웃",color:"orange",onClick:wl})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(et,{modelValue:g.value,"onUpdate:modelValue":e[14]||(e[14]=a=>g.value=a)},null,8,["modelValue"]),s(lt,{modelValue:h.value,"onUpdate:modelValue":e[15]||(e[15]=a=>h.value=a),onGuestLoginSuccess:gl,onGoogleLoginRequest:bl},null,8,["modelValue"]),s(Rt,{modelValue:te.value,"onUpdate:modelValue":e[16]||(e[16]=a=>te.value=a),onSubmit:_l,onCompleted:ql},null,8,["modelValue"])]),_:1}))}}),ca=Ie(Go,[["__scopeId","data-v-4f817430"]]);export{ca as default};
