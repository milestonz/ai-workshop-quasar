const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE-BaJy3rXd.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn-Ct8CcPim.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2-XBnHkNao.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs-W54BP04g.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8-BbVbuoQW.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz-H1cNXnvb.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF-D0D5g8uB.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC-BcTnplim.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw-Cc0JXHbt.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M-BcPAhq85.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS-cN7vJrVL.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB-BbWEG7lg.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi-Dav2vSnU.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY-Dn1durxV.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm-Dz7aj0ta.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd-BJUyk6is.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf-CR01ab35.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p-Cww5eWtn.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh-Bhu1IBHp.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO-Cl7Zdf_z.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O-C_q9m6Eq.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7-BANrqH3G.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A-BqhNFaGb.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn-ctNmsRdv.js","assets/QChip-DM6F31S0-CjJFSHfx-htvUgpWw.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv-K94wZDnO.js","assets/QLayout-BQ9g_6yu-Chj62EVq-BBQIb_HL.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3-DTtME0RC.js","assets/QSeparator-BcYH26Md-D4-nJUmN-HaXOYAi2.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT-h21m0_Zw.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc-Bi0EpWEu.js","assets/pinia-CUn_f_AT-BAm4BR34-CFOg6xp9.js","assets/QBanner-DKpXtl0l-CoEeIaNs-q0N_FVYe.js","assets/marked.esm-CTrcEICt-BUcm6MtN-CbCcALHQ.js","assets/IndexPage-CFs49cf4-DCFzd5a3-BgfGDant.js","assets/QPage-CLbIAi8L-DDHzNr23-Cd5VgrA8.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M-DDn67JgT.js","assets/SurveyResults-DvN0U2_L-LlonMCsx-BnTA3nZB.js","assets/survey-DsL-eoSy-BaL70OSo-i6SJNP2j.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh-BkCeYv0t.js","assets/LogoutPage-CtCownZv-BTcpQEl3-n4ns1Z9p.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx-BVDVEe2h.js","assets/StudentView-EHbgIK-q-CI38o4Vo-NXpdNqUJ.js","assets/pinia-F5TpqEXP-CcuIgscM-CCJFe5VR.js","assets/MainLayout-DWpWAzPm-DxBUie-I.js","assets/QDialog-DCVptsUO-BjjrB4_Q.js","assets/QChip-nX3S8ibB-BQad_HXT.js","assets/_plugin-vue_export-helper-CJfoBXcF-BV1JEARH.js","assets/QLayout-DYpYNAz--CGJ4bGzo.js","assets/use-checkbox-CbTZvoI2-DT4-uIEu.js","assets/QSeparator-BO07bsuT-lRT0fv-d.js","assets/GuestLoginDialog-CSLLp_FG-BJ7s_Fzi.js","assets/useGuestAuth-B3dUk0QH-BQz37ZyD.js","assets/pinia-CwhW7gbT-DgIwZFmV.js","assets/QBanner-DSaL6E1A-Cv2hl2L_.js","assets/marked.esm-ChVohG0P-BAM_JNgt.js","assets/IndexPage-DdKp2QWP-D1s0LB9j.js","assets/QPage-CATcdJAM-BLG2WZ4G.js","assets/QSpinnerDots-CW_TS37f-DHTnbCLH.js","assets/SurveyResults-Dr3yr6i_-DyDTVqvG.js","assets/survey-C5GwGR2o-CqgkgVv6.js","assets/PollResultBar-CcboJKVZ-DXx2v2RY.js","assets/LogoutPage-4UfyfpuW-DSspP6jT.js","assets/PollResultPage-C5no3dXq-D30XDp5c.js","assets/StudentView-Yd_YbX30-DTQa4fZ0.js","assets/pinia-BFGcd6GC-l0KS0nH_.js","assets/MainLayout-CDS1Q2ag.js","assets/QDialog-B8pEesiq.js","assets/QChip-5D8RM28h.js","assets/_plugin-vue_export-helper-BIy862K0.js","assets/QLayout-Ch1tPNld.js","assets/use-checkbox-v9zadS43.js","assets/QSeparator-BvYjkyh3.js","assets/GuestLoginDialog-C8shKX0C.js","assets/useGuestAuth-DCU4zYbt.js","assets/pinia-Bs2obeVG.js","assets/QBanner-Dj1wXmJN.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-Bd18tbQr.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-BBOp0ox0.js","assets/QPage-ByY5YaQR.js","assets/QSpinnerDots-CtV_sSP1.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-CG0MlidS.js","assets/survey-BsPVZuTD.js","assets/PollResultBar-CZnSW1dy.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-Ds-LyEnk.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-D9Rdlzlq.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-BxnDG6Z3.js","assets/StudentView-B_NZFY6r.css","assets/pinia-Cp8Yfd-4.js"])))=>i.map(i=>d[i]);
const gDe=function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),mDe=function(t){return"/"+t},wY={},Cn=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");r=o(n.map(c=>{if(c=mDe(c),c in wY)return;wY[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":gDe,h||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),h)return new Promise((m,w)=>{p.addEventListener("load",m),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},er=(t,e=er,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV-BF4eerBE.js","assets/QDialog-CXn2kBax-C53UdG9D-kpCzhlJn.js","assets/QChip-BJIOjoIv-Djywe0kj-DBt41SH2.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50-BTORSsEs.js","assets/QLayout-s6SDzMwt-C7GQ1361-CntuJlM8.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL-3mf2MSmz.js","assets/QSeparator-Chi7pIZw-Dfi-b9On-D1KUGwCF.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev-CpKj9GjC.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu-DqDS1hTw.js","assets/pinia-DRC1X92K-CVhvq81r-C7Q22G7M.js","assets/QBanner-BY0ggvyL-C3yUuPRa-BwL-ftRS.js","assets/marked.esm-mI6KSz_d-CXpNVb3h-Dfg0gaKB.js","assets/IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi.js","assets/QPage-B1iJaq8H-BMxUDXKn-BbD7X6VY.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd-DEZvrJgm.js","assets/SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd.js","assets/survey-DXHWirsQ-BJaxGuvV-CPH2sThf.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3-DtrZHy0p.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O.js","assets/pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7.js","assets/MainLayout-Bwj2wsFm-Cz6tEJ5A.js","assets/QDialog-Dn9VjDcM-Dk_wZ3Rn.js","assets/QChip-DM6F31S0-CjJFSHfx.js","assets/_plugin-vue_export-helper-DdgHTl4p-SnyTrKLv.js","assets/QLayout-BQ9g_6yu-Chj62EVq.js","assets/use-checkbox-ClSmRWjY-BHpvY2Y3.js","assets/QSeparator-BcYH26Md-D4-nJUmN.js","assets/GuestLoginDialog-6vHhwSmg-C3RCaOBT.js","assets/useGuestAuth-BRpWhMZD-BE4cfEkc.js","assets/pinia-CUn_f_AT-BAm4BR34.js","assets/QBanner-DKpXtl0l-CoEeIaNs.js","assets/marked.esm-CTrcEICt-BUcm6MtN.js","assets/IndexPage-CFs49cf4-DCFzd5a3.js","assets/QPage-CLbIAi8L-DDHzNr23.js","assets/QSpinnerDots-55T99jjC-UJYzsw9M.js","assets/SurveyResults-DvN0U2_L-LlonMCsx.js","assets/survey-DsL-eoSy-BaL70OSo.js","assets/PollResultBar-CeuqJwy4-CLNXaeBh.js","assets/LogoutPage-CtCownZv-BTcpQEl3.js","assets/PollResultPage-BsZ27FdJ-BqTU4Xdx.js","assets/StudentView-EHbgIK-q-CI38o4Vo.js","assets/pinia-F5TpqEXP-CcuIgscM.js","assets/MainLayout-DWpWAzPm.js","assets/QDialog-DCVptsUO.js","assets/QChip-nX3S8ibB.js","assets/_plugin-vue_export-helper-CJfoBXcF.js","assets/QLayout-DYpYNAz-.js","assets/use-checkbox-CbTZvoI2.js","assets/QSeparator-BO07bsuT.js","assets/GuestLoginDialog-CSLLp_FG.js","assets/useGuestAuth-B3dUk0QH.js","assets/pinia-CwhW7gbT.js","assets/QBanner-DSaL6E1A.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-ChVohG0P.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-DdKp2QWP.js","assets/QPage-CATcdJAM.js","assets/QSpinnerDots-CW_TS37f.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-Dr3yr6i_.js","assets/survey-C5GwGR2o.js","assets/PollResultBar-CcboJKVZ.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-4UfyfpuW.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-C5no3dXq.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-Yd_YbX30.js","assets/StudentView-B_NZFY6r.css","assets/pinia-BFGcd6GC.js"]))=>t.map(s=>n[s]),_De=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),yDe=function(t){return"/"+t},bY={},Is=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(u=>{if(u=yDe(u),u in bY)return;bY[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":_De,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},pa=(t,e=pa,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9-h46N59WV.js","assets/QDialog-CXn2kBax-C53UdG9D.js","assets/QChip-BJIOjoIv-Djywe0kj.js","assets/_plugin-vue_export-helper-DXafCR7g-cPVpln50.js","assets/QLayout-s6SDzMwt-C7GQ1361.js","assets/use-checkbox-Hdp5Jlzs-BYBvyloL.js","assets/QSeparator-Chi7pIZw-Dfi-b9On.js","assets/GuestLoginDialog-C7xr6EXW-B9BOrQev.js","assets/useGuestAuth-Mxd3jo-z-qhm8zfOu.js","assets/pinia-DRC1X92K-CVhvq81r.js","assets/QBanner-BY0ggvyL-C3yUuPRa.js","assets/marked.esm-mI6KSz_d-CXpNVb3h.js","assets/IndexPage-BLAmILuN-HA-OPItk.js","assets/QPage-B1iJaq8H-BMxUDXKn.js","assets/QSpinnerDots-DmD6LJEW-mqbZkDZd.js","assets/SurveyResults-DhayuQfj-D0iteWpb.js","assets/survey-DXHWirsQ-BJaxGuvV.js","assets/PollResultBar-Bydgm1gR-BKNOXBq3.js","assets/LogoutPage-D1GfaPnm-1CZDGcS4.js","assets/PollResultPage-B3rDVM-7-BRBHzC5g.js","assets/StudentView-ZIAbzNqK-CBiLqkGJ.js","assets/pinia-CU9SUkzn-Dk66cb7x.js","assets/MainLayout-Bwj2wsFm.js","assets/QDialog-Dn9VjDcM.js","assets/QChip-DM6F31S0.js","assets/_plugin-vue_export-helper-DdgHTl4p.js","assets/QLayout-BQ9g_6yu.js","assets/use-checkbox-ClSmRWjY.js","assets/QSeparator-BcYH26Md.js","assets/GuestLoginDialog-6vHhwSmg.js","assets/useGuestAuth-BRpWhMZD.js","assets/pinia-CUn_f_AT.js","assets/QBanner-DKpXtl0l.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-CTrcEICt.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-CFs49cf4.js","assets/QPage-CLbIAi8L.js","assets/QSpinnerDots-55T99jjC.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DvN0U2_L.js","assets/survey-DsL-eoSy.js","assets/PollResultBar-CeuqJwy4.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-CtCownZv.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-BsZ27FdJ.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-EHbgIK-q.js","assets/StudentView-B_NZFY6r.css","assets/pinia-F5TpqEXP.js"]))=>t.map(s=>n[s]),vDe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),wDe=function(t){return"/"+t},EY={},Mi=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(u=>{if(u=wDe(u),u in EY)return;EY[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":vDe,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})},Dp=(t,e=Dp,n=e.f||(e.f=["assets/MainLayout-CbUPrBs9.js","assets/QDialog-CXn2kBax.js","assets/QChip-BJIOjoIv.js","assets/_plugin-vue_export-helper-DXafCR7g.js","assets/QLayout-s6SDzMwt.js","assets/use-checkbox-Hdp5Jlzs.js","assets/QSeparator-Chi7pIZw.js","assets/GuestLoginDialog-C7xr6EXW.js","assets/useGuestAuth-Mxd3jo-z.js","assets/pinia-DRC1X92K.js","assets/QBanner-BY0ggvyL.js","assets/GuestLoginDialog-CO-sD7Pe.css","assets/marked.esm-mI6KSz_d.js","assets/MainLayout-iA6VSpwX.css","assets/IndexPage-BLAmILuN.js","assets/QPage-B1iJaq8H.js","assets/QSpinnerDots-DmD6LJEW.js","assets/IndexPage-BrNRmG7v.css","assets/SurveyResults-DhayuQfj.js","assets/survey-DXHWirsQ.js","assets/PollResultBar-Bydgm1gR.js","assets/PollResultBar-C3-Zmgie.css","assets/LogoutPage-D1GfaPnm.js","assets/LogoutPage-DiXRWHA0.css","assets/PollResultPage-B3rDVM-7.js","assets/PollResultPage-CzQ9mg6m.css","assets/StudentView-ZIAbzNqK.js","assets/StudentView-B_NZFY6r.css","assets/pinia-CU9SUkzn.js"]))=>t.map(s=>n[s]),bDe=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),EDe=function(t){return"/"+t},TY={},ju=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=i(e.map(u=>{if(u=EDe(u),u in TY)return;TY[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":bDe,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function A$(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const es={},Tb=[],Sh=()=>{},TDe=()=>!1,SL=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),R$=t=>t.startsWith("onUpdate:"),bi=Object.assign,P$=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},CDe=Object.prototype.hasOwnProperty,Fn=(t,e)=>CDe.call(t,e),dt=Array.isArray,Cb=t=>kL(t)==="[object Map]",vce=t=>kL(t)==="[object Set]",kt=t=>typeof t=="function",ir=t=>typeof t=="string",Zm=t=>typeof t=="symbol",Rs=t=>t!==null&&typeof t=="object",wce=t=>(Rs(t)||kt(t))&&kt(t.then)&&kt(t.catch),bce=Object.prototype.toString,kL=t=>bce.call(t),IDe=t=>kL(t).slice(8,-1),Ece=t=>kL(t)==="[object Object]",x$=t=>ir(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,MI=A$(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),AL=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},SDe=/-(\w)/g,zl=AL(t=>t.replace(SDe,(e,n)=>n?n.toUpperCase():"")),kDe=/\B([A-Z])/g,Zv=AL(t=>t.replace(kDe,"-$1").toLowerCase()),RL=AL(t=>t.charAt(0).toUpperCase()+t.slice(1)),K4=AL(t=>t?`on${RL(t)}`:""),pg=(t,e)=>!Object.is(t,e),G4=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},X9=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},ADe=t=>{const e=parseFloat(t);return isNaN(e)?t:e},RDe=t=>{const e=ir(t)?Number(t):NaN;return isNaN(e)?t:e};let CY;const PL=()=>CY||(CY=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function CT(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ir(s)?DDe(s):CT(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ir(t)||Rs(t))return t}const PDe=/;(?![^(]*\))/g,xDe=/:([^]+)/,NDe=/\/\*[^]*?\*\//g;function DDe(t){const e={};return t.replace(NDe,"").split(PDe).forEach(n=>{if(n){const s=n.split(xDe);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function IT(t){let e="";if(ir(t))e=t;else if(dt(t))for(let n=0;n<t.length;n++){const s=IT(t[n]);s&&(e+=s+" ")}else if(Rs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ODe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LDe=A$(ODe);function Tce(t){return!!t||t===""}const Cce=t=>!!(t&&t.__v_isRef===!0),xL=t=>ir(t)?t:t==null?"":dt(t)||Rs(t)&&(t.toString===bce||!kt(t.toString))?Cce(t)?xL(t.value):JSON.stringify(t,Ice,2):String(t),Ice=(t,e)=>Cce(e)?Ice(t,e.value):Cb(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Q4(s,i)+" =>"]=r,n),{})}:vce(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Q4(n))}:Zm(e)?Q4(e):Rs(e)&&!dt(e)&&!Ece(e)?String(e):e,Q4=(t,e="")=>{var n;return Zm(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ho;class Sce{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ho,!e&&ho&&(this.index=(ho.scopes||(ho.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ho;try{return ho=this,e()}finally{ho=n}}}on(){++this._on===1&&(this.prevScope=ho,ho=this)}off(){this._on>0&&--this._on===0&&(ho=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function N$(t){return new Sce(t)}function NL(){return ho}function D$(t,e=!1){ho&&ho.cleanups.push(t)}let us;const Y4=new WeakSet;class kce{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ho&&ho.active&&ho.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Y4.has(this)&&(Y4.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rce(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,IY(this),Pce(this);const e=us,n=yc;us=this,yc=!0;try{return this.fn()}finally{xce(this),us=e,yc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)M$(e);this.deps=this.depsTail=void 0,IY(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Y4.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){J9(this)&&this.run()}get dirty(){return J9(this)}}let Ace=0,FI,VI;function Rce(t,e=!1){if(t.flags|=8,e){t.next=VI,VI=t;return}t.next=FI,FI=t}function O$(){Ace++}function L$(){if(--Ace>0)return;if(VI){let e=VI;for(VI=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;FI;){let e=FI;for(FI=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Pce(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xce(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),M$(s),MDe(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function J9(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Nce(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Nce(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wS)||(t.globalVersion=wS,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!J9(t))))return;t.flags|=2;const e=t.dep,n=us,s=yc;us=t,yc=!0;try{Pce(t);const r=t.fn(t._value);(e.version===0||pg(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{us=n,yc=s,xce(t),t.flags&=-3}}function M$(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)M$(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function MDe(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let yc=!0;const Dce=[];function bf(){Dce.push(yc),yc=!1}function Ef(){const t=Dce.pop();yc=t===void 0?!0:t}function IY(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=us;us=void 0;try{e()}finally{us=n}}}let wS=0;class FDe{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class F${constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!us||!yc||us===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==us)n=this.activeLink=new FDe(us,this),us.deps?(n.prevDep=us.depsTail,us.depsTail.nextDep=n,us.depsTail=n):us.deps=us.depsTail=n,Oce(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=us.depsTail,n.nextDep=void 0,us.depsTail.nextDep=n,us.depsTail=n,us.deps===n&&(us.deps=s)}return n}trigger(e){this.version++,wS++,this.notify(e)}notify(e){O$();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{L$()}}}function Oce(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Oce(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Qx=new WeakMap,zy=Symbol(""),Z9=Symbol(""),bS=Symbol("");function wo(t,e,n){if(yc&&us){let s=Qx.get(t);s||Qx.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new F$),r.map=s,r.key=n),r.track()}}function zd(t,e,n,s,r,i){const o=Qx.get(t);if(!o){wS++;return}const a=u=>{u&&u.trigger()};if(O$(),e==="clear")o.forEach(a);else{const u=dt(t),c=u&&x$(n);if(u&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===bS||!Zm(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(bS)),e){case"add":u?c&&a(o.get("length")):(a(o.get(zy)),Cb(t)&&a(o.get(Z9)));break;case"delete":u||(a(o.get(zy)),Cb(t)&&a(o.get(Z9)));break;case"set":Cb(t)&&a(o.get(zy));break}}L$()}function VDe(t,e){const n=Qx.get(t);return n&&n.get(e)}function bw(t){const e=en(t);return e===t?e:(wo(e,"iterate",bS),Ol(t)?e:e.map(zi))}function DL(t){return wo(t=en(t),"iterate",bS),t}const UDe={__proto__:null,[Symbol.iterator](){return X4(this,Symbol.iterator,zi)},concat(...t){return bw(this).concat(...t.map(e=>dt(e)?bw(e):e))},entries(){return X4(this,"entries",t=>(t[1]=zi(t[1]),t))},every(t,e){return kd(this,"every",t,e,void 0,arguments)},filter(t,e){return kd(this,"filter",t,e,n=>n.map(zi),arguments)},find(t,e){return kd(this,"find",t,e,zi,arguments)},findIndex(t,e){return kd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return kd(this,"findLast",t,e,zi,arguments)},findLastIndex(t,e){return kd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return kd(this,"forEach",t,e,void 0,arguments)},includes(...t){return J4(this,"includes",t)},indexOf(...t){return J4(this,"indexOf",t)},join(t){return bw(this).join(t)},lastIndexOf(...t){return J4(this,"lastIndexOf",t)},map(t,e){return kd(this,"map",t,e,void 0,arguments)},pop(){return EC(this,"pop")},push(...t){return EC(this,"push",t)},reduce(t,...e){return SY(this,"reduce",t,e)},reduceRight(t,...e){return SY(this,"reduceRight",t,e)},shift(){return EC(this,"shift")},some(t,e){return kd(this,"some",t,e,void 0,arguments)},splice(...t){return EC(this,"splice",t)},toReversed(){return bw(this).toReversed()},toSorted(t){return bw(this).toSorted(t)},toSpliced(...t){return bw(this).toSpliced(...t)},unshift(...t){return EC(this,"unshift",t)},values(){return X4(this,"values",zi)}};function X4(t,e,n){const s=DL(t),r=s[e]();return s!==t&&!Ol(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const qDe=Array.prototype;function kd(t,e,n,s,r,i){const o=DL(t),a=o!==t&&!Ol(t),u=o[e];if(u!==qDe[e]){const d=u.apply(t,i);return a?zi(d):d}let c=n;o!==t&&(a?c=function(d,p){return n.call(this,zi(d),p,t)}:n.length>2&&(c=function(d,p){return n.call(this,d,p,t)}));const h=u.call(o,c,s);return a&&r?r(h):h}function SY(t,e,n,s){const r=DL(t);let i=n;return r!==t&&(Ol(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,zi(a),u,t)}),r[e](i,...s)}function J4(t,e,n){const s=en(t);wo(s,"iterate",bS);const r=s[e](...n);return(r===-1||r===!1)&&q$(n[0])?(n[0]=en(n[0]),s[e](...n)):r}function EC(t,e,n=[]){bf(),O$();const s=en(t)[e].apply(t,n);return L$(),Ef(),s}const jDe=A$("__proto__,__v_isRef,__isVue"),Lce=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zm));function BDe(t){Zm(t)||(t=String(t));const e=en(this);return wo(e,"has",t),e.hasOwnProperty(t)}class Mce{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?JDe:qce:i?Uce:Vce).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=dt(e);if(!r){let u;if(o&&(u=UDe[n]))return u;if(n==="hasOwnProperty")return BDe}const a=Reflect.get(e,n,Pr(e)?e:s);return(Zm(n)?Lce.has(n):jDe(n))||(r||wo(e,"get",n),i)?a:Pr(a)?o&&x$(n)?a:a.value:Rs(a)?r?jce(a):sp(a):a}}class Fce extends Mce{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=Qg(i);if(!Ol(s)&&!Qg(s)&&(i=en(i),s=en(s)),!dt(e)&&Pr(i)&&!Pr(s))return u?!1:(i.value=s,!0)}const o=dt(e)&&x$(n)?Number(n)<e.length:Fn(e,n),a=Reflect.set(e,n,s,Pr(e)?e:r);return e===en(r)&&(o?pg(s,i)&&zd(e,"set",n,s):zd(e,"add",n,s)),a}deleteProperty(e,n){const s=Fn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&zd(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Zm(n)||!Lce.has(n))&&wo(e,"has",n),s}ownKeys(e){return wo(e,"iterate",dt(e)?"length":zy),Reflect.ownKeys(e)}}class $De extends Mce{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zDe=new Fce,HDe=new $De,WDe=new Fce(!0),eq=t=>t,w1=t=>Reflect.getPrototypeOf(t);function KDe(t,e,n){return function(...s){const r=this.__v_raw,i=en(r),o=Cb(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),h=n?eq:e?Yx:zi;return!e&&wo(i,"iterate",u?Z9:zy),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function b1(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function GDe(t,e){const n={get(s){const r=this.__v_raw,i=en(r),o=en(s);t||(pg(s,o)&&wo(i,"get",s),wo(i,"get",o));const{has:a}=w1(i),u=e?eq:t?Yx:zi;if(a.call(i,s))return u(r.get(s));if(a.call(i,o))return u(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&wo(en(s),"iterate",zy),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=en(r),o=en(s);return t||(pg(s,o)&&wo(i,"has",s),wo(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=en(o),u=e?eq:t?Yx:zi;return!t&&wo(a,"iterate",zy),o.forEach((c,h)=>s.call(r,u(c),u(h),i))}};return bi(n,t?{add:b1("add"),set:b1("set"),delete:b1("delete"),clear:b1("clear")}:{add(s){!e&&!Ol(s)&&!Qg(s)&&(s=en(s));const r=en(this);return w1(r).has.call(r,s)||(r.add(s),zd(r,"add",s,s)),this},set(s,r){!e&&!Ol(r)&&!Qg(r)&&(r=en(r));const i=en(this),{has:o,get:a}=w1(i);let u=o.call(i,s);u||(s=en(s),u=o.call(i,s));const c=a.call(i,s);return i.set(s,r),u?pg(r,c)&&zd(i,"set",s,r):zd(i,"add",s,r),this},delete(s){const r=en(this),{has:i,get:o}=w1(r);let a=i.call(r,s);a||(s=en(s),a=i.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return a&&zd(r,"delete",s,void 0),u},clear(){const s=en(this),r=s.size!==0,i=s.clear();return r&&zd(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=KDe(s,t,e)}),n}function V$(t,e){const n=GDe(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Fn(n,r)&&r in s?n:s,r,i)}const QDe={get:V$(!1,!1)},YDe={get:V$(!1,!0)},XDe={get:V$(!0,!1)},Vce=new WeakMap,Uce=new WeakMap,qce=new WeakMap,JDe=new WeakMap;function ZDe(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eOe(t){return t.__v_skip||!Object.isExtensible(t)?0:ZDe(IDe(t))}function sp(t){return Qg(t)?t:U$(t,!1,zDe,QDe,Vce)}function xA(t){return U$(t,!1,WDe,YDe,Uce)}function jce(t){return U$(t,!0,HDe,XDe,qce)}function U$(t,e,n,s,r){if(!Rs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=eOe(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function gf(t){return Qg(t)?gf(t.__v_raw):!!(t&&t.__v_isReactive)}function Qg(t){return!!(t&&t.__v_isReadonly)}function Ol(t){return!!(t&&t.__v_isShallow)}function q$(t){return t?!!t.__v_raw:!1}function en(t){const e=t&&t.__v_raw;return e?en(e):t}function e_(t){return!Fn(t,"__v_skip")&&Object.isExtensible(t)&&X9(t,"__v_skip",!0),t}const zi=t=>Rs(t)?sp(t):t,Yx=t=>Rs(t)?jce(t):t;function Pr(t){return t?t.__v_isRef===!0:!1}function qc(t){return Bce(t,!1)}function tOe(t){return Bce(t,!0)}function Bce(t,e){return Pr(t)?t:new nOe(t,e)}class nOe{constructor(e,n){this.dep=new F$,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:en(e),this._value=n?e:zi(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ol(e)||Qg(e);e=s?e:en(e),pg(e,n)&&(this._rawValue=e,this._value=s?e:zi(e),this.dep.trigger())}}function kh(t){return Pr(t)?t.value:t}const sOe={get:(t,e,n)=>e==="__v_raw"?t:kh(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Pr(r)&&!Pr(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function $ce(t){return gf(t)?t:new Proxy(t,sOe)}function j$(t){const e=dt(t)?new Array(t.length):{};for(const n in t)e[n]=iOe(t,n);return e}class rOe{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return VDe(en(this._object),this._key)}}function iOe(t,e,n){const s=t[e];return Pr(s)?s:new rOe(t,e,n)}class oOe{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new F$(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wS-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&us!==this)return Rce(this,!0),!0}get value(){const e=this.dep.track();return Nce(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function aOe(t,e,n=!1){let s,r;return kt(t)?s=t:(s=t.get,r=t.set),new oOe(s,r,n)}const E1={},Xx=new WeakMap;let ry;function lOe(t,e=!1,n=ry){if(n){let s=Xx.get(n);s||Xx.set(n,s=[]),s.push(t)}}function uOe(t,e,n=es){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:u}=n,c=q=>r?q:Ol(q)||r===!1||r===0?Hd(q,1):Hd(q);let h,d,p,m,w=!1,k=!1;if(Pr(t)?(d=()=>t.value,w=Ol(t)):gf(t)?(d=()=>c(t),w=!0):dt(t)?(k=!0,w=t.some(q=>gf(q)||Ol(q)),d=()=>t.map(q=>{if(Pr(q))return q.value;if(gf(q))return c(q);if(kt(q))return u?u(q,2):q()})):kt(t)?e?d=u?()=>u(t,2):t:d=()=>{if(p){bf();try{p()}finally{Ef()}}const q=ry;ry=h;try{return u?u(t,3,[m]):t(m)}finally{ry=q}}:d=Sh,e&&r){const q=d,H=r===!0?1/0:r;d=()=>Hd(q(),H)}const P=NL(),O=()=>{h.stop(),P&&P.active&&P$(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),O()}}let M=k?new Array(t.length).fill(E1):E1;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((J,I)=>pg(J,M[I])):pg(H,M))){p&&p();const J=ry;ry=h;try{const I=[H,M===E1?void 0:k&&M[0]===E1?[]:M,m];M=H,u?u(e,3,I):e(...I)}finally{ry=J}}}else h.run()};return a&&a(V),h=new kce(d),h.scheduler=o?()=>o(V,!1):V,m=q=>lOe(q,!1,h),p=h.onStop=()=>{const q=Xx.get(h);if(q){if(u)u(q,4);else for(const H of q)H();Xx.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function Hd(t,e=1/0,n){if(e<=0||!Rs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Pr(t))Hd(t.value,e,n);else if(dt(t))for(let s=0;s<t.length;s++)Hd(t[s],e,n);else if(vce(t)||Cb(t))t.forEach(s=>{Hd(s,e,n)});else if(Ece(t)){for(const s in t)Hd(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Hd(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function NA(t,e,n,s){try{return s?t(...s):t()}catch(r){OL(r,e,n)}}function jc(t,e,n,s){if(kt(t)){const r=NA(t,e,n,s);return r&&wce(r)&&r.catch(i=>{OL(i,e,n)}),r}if(dt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(jc(t[i],e,n,s));return r}}function OL(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||es;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,u,c)===!1)return}a=a.parent}if(i){bf(),NA(i,null,10,[t,u,c]),Ef();return}}cOe(t,n,r,s,o)}function cOe(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const ga=[];let ah=-1;const Ib=[];let Op=null,Ww=0;const zce=Promise.resolve();let Jx=null;function DA(t){const e=Jx||zce;return t?e.then(this?t.bind(this):t):e}function hOe(t){let e=ah+1,n=ga.length;for(;e<n;){const s=e+n>>>1,r=ga[s],i=ES(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function B$(t){if(!(t.flags&1)){const e=ES(t),n=ga[ga.length-1];!n||!(t.flags&2)&&e>=ES(n)?ga.push(t):ga.splice(hOe(e),0,t),t.flags|=1,Hce()}}function Hce(){Jx||(Jx=zce.then(Kce))}function dOe(t){dt(t)?Ib.push(...t):Op&&t.id===-1?Op.splice(Ww+1,0,t):t.flags&1||(Ib.push(t),t.flags|=1),Hce()}function kY(t,e,n=ah+1){for(;n<ga.length;n++){const s=ga[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;ga.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Wce(t){if(Ib.length){const e=[...new Set(Ib)].sort((n,s)=>ES(n)-ES(s));if(Ib.length=0,Op){Op.push(...e);return}for(Op=e,Ww=0;Ww<Op.length;Ww++){const n=Op[Ww];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Op=null,Ww=0}}const ES=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Kce(t){try{for(ah=0;ah<ga.length;ah++){const e=ga[ah];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),NA(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ah<ga.length;ah++){const e=ga[ah];e&&(e.flags&=-2)}ah=-1,ga.length=0,Wce(),Jx=null,(ga.length||Ib.length)&&Kce()}}let al=null,Gce=null;function Zx(t){const e=al;return al=t,Gce=t&&t.type.__scopeId||null,e}function LL(t,e=al,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&jY(-1);const i=Zx(e);let o;try{o=t(...r)}finally{Zx(i),s._d&&jY(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function OA(t,e){if(al===null)return t;const n=GL(al),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,u=es]=e[r];i&&(kt(i)&&(i={mounted:i,updated:i}),i.deep&&Hd(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function B_(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let u=a.dir[s];u&&(bf(),jc(u,n,8,[t.el,a,t,e]),Ef())}}const Qce=Symbol("_vte"),Yce=t=>t.__isTeleport,UI=t=>t&&(t.disabled||t.disabled===""),AY=t=>t&&(t.defer||t.defer===""),RY=t=>typeof SVGElement<"u"&&t instanceof SVGElement,PY=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,tq=(t,e)=>{const n=t&&t.to;return ir(n)?e?e(n):null:n},Xce={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,u,c){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=c,O=UI(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),J=e.anchor=k("");m(H,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,u))},v=()=>{const y=e.target=tq(e.props,w),T=Jce(y,e,k,m);y&&(o!=="svg"&&RY(y)?o="svg":o!=="mathml"&&PY(y)&&(o="mathml"),O||(I(y,T),PP(e,!1)))};O&&(I(n,J),PP(e,!0)),AY(e.props)?(e.el.__isMounted=!1,ca(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(AY(e.props)&&t.el.__isMounted===!1){ca(()=>{Xce.process(t,e,n,s,r,i,o,a,u,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=UI(t.props),y=v?n:J,T=v?H:I;if(o==="svg"||RY(J)?o="svg":(o==="mathml"||PY(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),Q$(t,e,!0)):u||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):T1(e,n,H,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=tq(e.props,w);S&&T1(e,S,null,c,0)}else v&&T1(e,J,I,c,1);PP(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:c,targetAnchor:h,target:d,props:p}=t;if(d&&(r(c),r(h)),i&&r(u),o&16){const m=i||!UI(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:T1,hydrate:fOe};function T1(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||UI(h))&&u&16)for(let p=0;p<c.length;p++)r(c[p],e,n,2);d&&s(a,e,n)}function fOe(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:c,createText:h}},d){const p=e.target=tq(e.props,u);if(p){const m=UI(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||Jce(p,e,h,c),d(w&&o(w),e,p,n,s,r,i)}PP(e,m)}return e.anchor&&o(e.anchor)}const $$=Xce;function PP(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function Jce(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[Qce]=i,t&&(s(r,t),s(i,t)),i}const Lp=Symbol("_leaveCb"),C1=Symbol("_enterCb");function Zce(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ST(()=>{t.isMounted=!0}),kT(()=>{t.isUnmounting=!0}),t}const wl=[Function,Array],ehe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wl,onEnter:wl,onAfterEnter:wl,onEnterCancelled:wl,onBeforeLeave:wl,onLeave:wl,onAfterLeave:wl,onLeaveCancelled:wl,onBeforeAppear:wl,onAppear:wl,onAfterAppear:wl,onAppearCancelled:wl},the=t=>{const e=t.subTree;return e.component?the(e.component):e},pOe={name:"BaseTransition",props:ehe,setup(t,{slots:e}){const n=yd(),s=Zce();return()=>{const r=e.default&&z$(e.default(),!0);if(!r||!r.length)return;const i=nhe(r),o=en(t),{mode:a}=o;if(s.isLeaving)return Z4(i);const u=xY(i);if(!u)return Z4(i);let c=TS(u,o,s,n,d=>c=d);u.type!==va&&pv(u,c);let h=n.subTree&&xY(n.subTree);if(h&&h.type!==va&&!yy(u,h)&&the(n).type!==va){let d=TS(h,o,s,n);if(pv(h,d),a==="out-in"&&u.type!==va)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Z4(i);a==="in-out"&&u.type!==va?d.delayLeave=(p,m,w)=>{const k=she(s,h);k[String(h.key)]=h,p[Lp]=()=>{m(),p[Lp]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function nhe(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==va){e=n;break}}return e}const gOe=pOe;function she(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function TS(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=she(n,t),J=(y,T)=>{y&&jc(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),dt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=u;if(!n.isMounted)if(i)T=P||u;else return;y[Lp]&&y[Lp](!0);const S=H[q];S&&yy(t,S)&&S.el[Lp]&&S.el[Lp](),J(T,[y])},enter(y){let T=c,S=h,E=d;if(!n.isMounted)if(i)T=O||c,S=M||h,E=V||d;else return;let b=!1;const K=y[C1]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[C1]=void 0)};T?I(T,[y,K]):K()},leave(y,T){const S=String(t.key);if(y[C1]&&y[C1](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Lp]=K=>{E||(E=!0,T(),K?J(k,[y]):J(w,[y]),y[Lp]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const T=TS(y,e,n,s,r);return r&&r(T),T}};return v}function Z4(t){if(ML(t))return t=Yg(t),t.children=null,t}function xY(t){if(!ML(t))return Yce(t.type)&&t.children?nhe(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&kt(n.default))return n.default()}}function pv(t,e){t.shapeFlag&6&&t.component?(t.transition=e,pv(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function z$(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Va?(o.patchFlag&128&&r++,s=s.concat(z$(o.children,e,a))):(e||o.type!==va)&&s.push(a!=null?Yg(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ew(t,e){return kt(t)?bi({name:t.name},e,{setup:t}):t}function rhe(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function qI(t,e,n,s,r=!1){if(dt(t)){t.forEach((w,k)=>qI(w,e&&(dt(e)?e[k]:e),n,s,r));return}if(jI(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&qI(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?GL(s.component):s.el,o=r?null:i,{i:a,r:u}=t,c=e&&e.r,h=a.refs===es?a.refs={}:a.refs,d=a.setupState,p=en(d),m=d===es?()=>!1:w=>Fn(p,w);if(c!=null&&c!==u&&(ir(c)?(h[c]=null,m(c)&&(d[c]=null)):Pr(c)&&(c.value=null)),kt(u))NA(u,a,12,[o,h]);else{const w=ir(u),k=Pr(u);if(w||k){const P=()=>{if(t.f){const O=w?m(u)?d[u]:h[u]:u.value;r?dt(O)&&P$(O,i):dt(O)?O.includes(i)||O.push(i):w?(h[u]=[i],m(u)&&(d[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else w?(h[u]=o,m(u)&&(d[u]=o)):k&&(u.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,ca(P,n)):P()}}}PL().requestIdleCallback;PL().cancelIdleCallback;const jI=t=>!!t.type.__asyncLoader,ML=t=>t.type.__isKeepAlive;function FL(t,e){ihe(t,"a",e)}function VL(t,e){ihe(t,"da",e)}function ihe(t,e,n=No){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(UL(e,s,n),n){let r=n.parent;for(;r&&r.parent;)ML(r.parent.vnode)&&mOe(s,e,n,r),r=r.parent}}function mOe(t,e,n,s){const r=UL(e,t,s,!0);AT(()=>{P$(s[e],r)},n)}function UL(t,e,n=No,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{bf();const a=VA(n),u=jc(e,n,t,o);return a(),Ef(),u});return s?r.unshift(i):r.push(i),i}}const rp=t=>(e,n=No)=>{(!IS||t==="sp")&&UL(t,(...s)=>e(...s),n)},qL=rp("bm"),ST=rp("m"),jL=rp("bu"),LA=rp("u"),kT=rp("bum"),AT=rp("um"),_Oe=rp("sp"),yOe=rp("rtg"),vOe=rp("rtc");function wOe(t,e=No){UL("ec",t,e)}const bOe="components";function BL(t,e){return TOe(bOe,t,!0,e)||t}const EOe=Symbol.for("v-ndc");function TOe(t,e,n=!0,s=!1){const r=al||No;if(r){const i=r.type;{const a=uLe(i,!1);if(a&&(a===e||a===zl(e)||a===RL(zl(e))))return i}const o=NY(r[t]||i[t],e)||NY(r.appContext[t],e);return!o&&s?i:o}}function NY(t,e){return t&&(t[e]||t[zl(e)]||t[RL(zl(e))])}function H$(t,e,n,s){let r;const i=n,o=dt(t);if(o||ir(t)){const a=o&&gf(t);let u=!1,c=!1;a&&(u=!Ol(t),c=Qg(t),t=DL(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(u?c?Yx(zi(t[h])):zi(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Rs(t))if(t[Symbol.iterator])r=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const h=a[u];r[u]=e(t[h],h,u,i)}}else r=[];return r}const nq=t=>t?Che(t)?GL(t):nq(t.parent):null,BI=bi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nq(t.parent),$root:t=>nq(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ahe(t),$forceUpdate:t=>t.f||(t.f=()=>{B$(t.update)}),$nextTick:t=>t.n||(t.n=DA.bind(t.proxy)),$watch:t=>zOe.bind(t)}),eU=(t,e)=>t!==es&&!t.__isScriptSetup&&Fn(t,e),COe={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(eU(s,e))return o[e]=1,s[e];if(r!==es&&Fn(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Fn(c,e))return o[e]=3,i[e];if(n!==es&&Fn(n,e))return o[e]=4,n[e];sq&&(o[e]=0)}}const h=BI[e];let d,p;if(h)return e==="$attrs"&&wo(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==es&&Fn(n,e))return o[e]=4,n[e];if(p=u.config.globalProperties,Fn(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return eU(r,e)?(r[e]=n,!0):s!==es&&Fn(s,e)?(s[e]=n,!0):Fn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==es&&Fn(t,o)||eU(e,o)||(a=i[0])&&Fn(a,o)||Fn(s,o)||Fn(BI,o)||Fn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function DY(t){return dt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let sq=!0;function IOe(t){const e=ahe(t),n=t.proxy,s=t.ctx;sq=!1,e.beforeCreate&&OY(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(c&&SOe(c,s,null),o)for(const ae in o){const oe=o[ae];kt(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);Rs(ae)&&(t.data=sp(ae))}if(sq=!0,i)for(const ae in i){const oe=i[ae],ve=kt(oe)?oe.bind(n,n):kt(oe.get)?oe.get.bind(n,n):Sh,Lt=!kt(oe)&&kt(oe.set)?oe.set.bind(n):Sh,nt=He({get:ve,set:Lt});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>nt.value,set:mt=>nt.value=mt})}if(a)for(const ae in a)ohe(a[ae],s,n,ae);if(u){const ae=kt(u)?u.call(n):u;Reflect.ownKeys(ae).forEach(oe=>{Wy(oe,ae[oe])})}h&&OY(h,t,"c");function ne(ae,oe){dt(oe)?oe.forEach(ve=>ae(ve.bind(n))):oe&&ae(oe.bind(n))}if(ne(qL,d),ne(ST,p),ne(jL,m),ne(LA,w),ne(FL,k),ne(VL,P),ne(wOe,v),ne(vOe,J),ne(yOe,I),ne(kT,M),ne(AT,q),ne(_Oe,y),dt(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:ve=>n[oe]=ve,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===Sh&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&rhe(t)}function SOe(t,e,n=Sh){dt(t)&&(t=rq(t));for(const s in t){const r=t[s];let i;Rs(r)?"default"in r?i=Na(r.from||s,r.default,!0):i=Na(r.from||s):i=Na(r),Pr(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function OY(t,e,n){jc(dt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function ohe(t,e,n,s){let r=s.includes(".")?vhe(n,s):()=>n[s];if(ir(t)){const i=e[t];kt(i)&&gg(r,i)}else if(kt(t))gg(r,t.bind(n));else if(Rs(t))if(dt(t))t.forEach(i=>ohe(i,e,n,s));else{const i=kt(t.handler)?t.handler.bind(n):e[t.handler];kt(i)&&gg(r,i,t)}}function ahe(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>eN(u,c,o,!0)),eN(u,e,o)),Rs(e)&&i.set(e,u),u}function eN(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&eN(t,i,n,!0),r&&r.forEach(o=>eN(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=kOe[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const kOe={data:LY,props:MY,emits:MY,methods:uI,computed:uI,beforeCreate:oa,created:oa,beforeMount:oa,mounted:oa,beforeUpdate:oa,updated:oa,beforeDestroy:oa,beforeUnmount:oa,destroyed:oa,unmounted:oa,activated:oa,deactivated:oa,errorCaptured:oa,serverPrefetch:oa,components:uI,directives:uI,watch:ROe,provide:LY,inject:AOe};function LY(t,e){return e?t?function(){return bi(kt(t)?t.call(this,this):t,kt(e)?e.call(this,this):e)}:e:t}function AOe(t,e){return uI(rq(t),rq(e))}function rq(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function oa(t,e){return t?[...new Set([].concat(t,e))]:e}function uI(t,e){return t?bi(Object.create(null),t,e):e}function MY(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:bi(Object.create(null),DY(t),DY(e??{})):e}function ROe(t,e){if(!t)return e;if(!e)return t;const n=bi(Object.create(null),t);for(const s in e)n[s]=oa(t[s],e[s]);return n}function lhe(){return{app:null,config:{isNativeTag:TDe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let POe=0;function xOe(t,e){return function(n,s=null){kt(n)||(n=bi({},n)),s!=null&&!Rs(s)&&(s=null);const r=lhe(),i=new WeakSet,o=[];let a=!1;const u=r.app={_uid:POe++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:hLe,get config(){return r.config},set config(c){},use(c,...h){return i.has(c)||(c&&kt(c.install)?(i.add(c),c.install(u,...h)):kt(c)&&(i.add(c),c(u,...h))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,h){return h?(r.components[c]=h,u):r.components[c]},directive(c,h){return h?(r.directives[c]=h,u):r.directives[c]},mount(c,h,d){if(!a){const p=u._ceVNode||ji(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,c,d),a=!0,u._container=c,c.__vue_app__=u,GL(p.component)}},onUnmount(c){o.push(c)},unmount(){a&&(jc(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return r.provides[c]=h,u},runWithContext(c){const h=Hy;Hy=u;try{return c()}finally{Hy=h}}};return u}}let Hy=null;function Wy(t,e){if(No){let n=No.provides;const s=No.parent&&No.parent.provides;s===n&&(n=No.provides=Object.create(s)),n[t]=e}}function Na(t,e,n=!1){const s=yd();if(s||Hy){let r=Hy?Hy._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&kt(e)?e.call(s&&s.proxy):e}}function W$(){return!!(yd()||Hy)}const uhe={},che=()=>Object.create(uhe),hhe=t=>Object.getPrototypeOf(t)===uhe;function NOe(t,e,n,s=!1){const r={},i=che();t.propsDefaults=Object.create(null),dhe(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:xA(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function DOe(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=en(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if($L(t.emitsOptions,p))continue;const m=e[p];if(u)if(Fn(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const w=zl(p);r[w]=iq(u,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{dhe(t,e,r,i)&&(c=!0);let h;for(const d in a)(!e||!Fn(e,d)&&((h=Zv(d))===d||!Fn(e,h)))&&(u?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=iq(u,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!Fn(e,d))&&(delete i[d],c=!0)}c&&zd(t.attrs,"set","")}function dhe(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(MI(u))continue;const c=e[u];let h;r&&Fn(r,h=zl(u))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:$L(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=en(n),c=a||es;for(let h=0;h<i.length;h++){const d=i[h];n[d]=iq(r,u,d,c[d],t,!Fn(c,d))}}return o}function iq(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Fn(o,"default");if(a&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&kt(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=VA(r);s=c[n]=u.call(null,e),h()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Zv(n))&&(s=!0))}return s}const OOe=new WeakMap;function fhe(t,e,n=!1){const s=n?OOe:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let u=!1;if(!kt(t)){const h=d=>{u=!0;const[p,m]=fhe(d,e,!0);bi(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return Rs(t)&&s.set(t,Tb),Tb;if(dt(i))for(let h=0;h<i.length;h++){const d=zl(i[h]);FY(d)&&(o[d]=es)}else if(i)for(const h in i){const d=zl(h);if(FY(d)){const p=i[h],m=o[d]=dt(p)||kt(p)?{type:p}:bi({},p),w=m.type;let k=!1,P=!0;if(dt(w))for(let O=0;O<w.length;++O){const M=w[O],V=kt(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=kt(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||Fn(m,"default"))&&a.push(d)}}const c=[o,a];return Rs(t)&&s.set(t,c),c}function FY(t){return t[0]!=="$"&&!MI(t)}const K$=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",G$=t=>dt(t)?t.map(mh):[mh(t)],LOe=(t,e,n)=>{if(e._n)return e;const s=LL((...r)=>G$(e(...r)),n);return s._c=!1,s},phe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(K$(r))continue;const i=t[r];if(kt(i))e[r]=LOe(r,i,s);else if(i!=null){const o=G$(i);e[r]=()=>o}}},ghe=(t,e)=>{const n=G$(e);t.slots.default=()=>n},mhe=(t,e,n)=>{for(const s in e)(n||!K$(s))&&(t[s]=e[s])},MOe=(t,e,n)=>{const s=t.slots=che();if(t.vnode.shapeFlag&32){const r=e.__;r&&X9(s,"__",r,!0);const i=e._;i?(mhe(s,e,n),n&&X9(s,"_",i,!0)):phe(e,s)}else e&&ghe(t,e)},FOe=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=es;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:mhe(r,e,n):(i=!e.$stable,phe(e,r)),o=e}else e&&(ghe(t,e),o={default:1});if(i)for(const a in r)!K$(a)&&o[a]==null&&delete r[a]},ca=XOe;function VOe(t){return UOe(t)}function UOe(t,e){const n=PL();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Sh,insertStaticContent:w}=t,k=(A,C,R,N=null,L=null,U=null,j=void 0,W=null,$=!!C.dynamicChildren)=>{if(A===C)return;A&&!yy(A,C)&&(N=F(A),Te(A,L,U,!0),A=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Q,shapeFlag:X}=C;switch(B){case zL:P(A,C,R,N);break;case va:O(A,C,R,N);break;case nU:A==null&&M(C,R,N,j);break;case Va:E(A,C,R,N,L,U,j,W,$);break;default:X&1?H(A,C,R,N,L,U,j,W,$):X&6?b(A,C,R,N,L,U,j,W,$):(X&64||X&128)&&B.process(A,C,R,N,L,U,j,W,$,ee)}Q!=null&&L?qI(Q,A&&A.ref,U,C||A,!C):Q==null&&A&&A.ref!=null&&qI(A.ref,null,U,A,!0)},P=(A,C,R,N)=>{if(A==null)s(C.el=a(C.children),R,N);else{const L=C.el=A.el;C.children!==A.children&&c(L,C.children)}},O=(A,C,R,N)=>{A==null?s(C.el=u(C.children||""),R,N):C.el=A.el},M=(A,C,R,N)=>{[A.el,A.anchor]=w(A.children,C,R,N,A.el,A.anchor)},V=({el:A,anchor:C},R,N)=>{let L;for(;A&&A!==C;)L=p(A),s(A,R,N),A=L;s(C,R,N)},q=({el:A,anchor:C})=>{let R;for(;A&&A!==C;)R=p(A),r(A),A=R;r(C)},H=(A,C,R,N,L,U,j,W,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),A==null?J(C,R,N,L,U,j,W,$):y(A,C,L,U,j,W,$)},J=(A,C,R,N,L,U,j,W)=>{let $,B;const{props:Q,shapeFlag:X,transition:Z,dirs:te}=A;if($=A.el=o(A.type,U,Q&&Q.is,Q),X&8?h($,A.children):X&16&&v(A.children,$,null,N,L,tU(A,U),j,W),te&&B_(A,null,N,"created"),I($,A,A.scopeId,j,N),Q){for(const re in Q)re!=="value"&&!MI(re)&&i($,re,null,Q[re],U,N);"value"in Q&&i($,"value",null,Q.value,U),(B=Q.onVnodeBeforeMount)&&Qc(B,N,A)}te&&B_(A,null,N,"beforeMount");const ie=qOe(L,Z);ie&&Z.beforeEnter($),s($,C,R),((B=Q&&Q.onVnodeMounted)||ie||te)&&ca(()=>{B&&Qc(B,N,A),ie&&Z.enter($),te&&B_(A,null,N,"mounted")},L)},I=(A,C,R,N,L)=>{if(R&&m(A,R),N)for(let U=0;U<N.length;U++)m(A,N[U]);if(L){let U=L.subTree;if(C===U||bhe(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(A,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(A,C,R,N,L,U,j,W,$=0)=>{for(let B=$;B<A.length;B++){const Q=A[B]=W?Mp(A[B]):mh(A[B]);k(null,Q,C,R,N,L,U,j,W)}},y=(A,C,R,N,L,U,j)=>{const W=C.el=A.el;let{patchFlag:$,dynamicChildren:B,dirs:Q}=C;$|=A.patchFlag&16;const X=A.props||es,Z=C.props||es;let te;if(R&&$_(R,!1),(te=Z.onVnodeBeforeUpdate)&&Qc(te,R,C,A),Q&&B_(C,A,R,"beforeUpdate"),R&&$_(R,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(W,""),B?T(A.dynamicChildren,B,W,R,N,tU(C,L),U):j||ve(A,C,W,null,R,N,tU(C,L),U,!1),$>0){if($&16)S(W,X,Z,R,L);else if($&2&&X.class!==Z.class&&i(W,"class",null,Z.class,L),$&4&&i(W,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],be=X[se],Ae=Z[se];(Ae!==be||se==="value")&&i(W,se,be,Ae,L,R)}}$&1&&A.children!==C.children&&h(W,C.children)}else!j&&B==null&&S(W,X,Z,R,L);((te=Z.onVnodeUpdated)||Q)&&ca(()=>{te&&Qc(te,R,C,A),Q&&B_(C,A,R,"updated")},N)},T=(A,C,R,N,L,U,j)=>{for(let W=0;W<C.length;W++){const $=A[W],B=C[W],Q=$.el&&($.type===Va||!yy($,B)||$.shapeFlag&198)?d($.el):R;k($,B,Q,null,N,L,U,j,!0)}},S=(A,C,R,N,L)=>{if(C!==R){if(C!==es)for(const U in C)!MI(U)&&!(U in R)&&i(A,U,C[U],null,L,N);for(const U in R){if(MI(U))continue;const j=R[U],W=C[U];j!==W&&U!=="value"&&i(A,U,W,j,L,N)}"value"in R&&i(A,"value",C.value,R.value,L)}},E=(A,C,R,N,L,U,j,W,$)=>{const B=C.el=A?A.el:a(""),Q=C.anchor=A?A.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(W=W?W.concat(te):te),A==null?(s(B,R,N),s(Q,R,N),v(C.children||[],R,Q,L,U,j,W,$)):X>0&&X&64&&Z&&A.dynamicChildren?(T(A.dynamicChildren,Z,R,L,U,j,W),(C.key!=null||L&&C===L.subTree)&&Q$(A,C,!0)):ve(A,C,R,Q,L,U,j,W,$)},b=(A,C,R,N,L,U,j,W,$)=>{C.slotScopeIds=W,A==null?C.shapeFlag&512?L.ctx.activate(C,R,N,j,$):K(C,R,N,L,U,j,$):ne(A,C,$)},K=(A,C,R,N,L,U,j)=>{const W=A.component=rLe(A,N,L);if(ML(A)&&(W.ctx.renderer=ee),iLe(W,!1,j),W.asyncDep){if(L&&L.registerDep(W,ae,j),!A.el){const $=W.subTree=ji(va);O(null,$,C,R),A.placeholder=$.el}}else ae(W,A,C,R,L,U,j)},ne=(A,C,R)=>{const N=C.component=A.component;if(QOe(A,C,R))if(N.asyncDep&&!N.asyncResolved){oe(N,C,R);return}else N.next=C,N.update();else C.el=A.el,N.vnode=C},ae=(A,C,R,N,L,U,j)=>{const W=()=>{if(A.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=A;{const tt=_he(A);if(tt){X&&(X.el=re.el,oe(A,X,j)),tt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let se=X,be;$_(A,!1),X?(X.el=re.el,oe(A,X,j)):X=re,Z&&G4(Z),(be=X.props&&X.props.onVnodeBeforeUpdate)&&Qc(be,ie,X,re),$_(A,!0);const Ae=UY(A),Ue=A.subTree;A.subTree=Ae,k(Ue,Ae,d(Ue.el),F(Ue),A,L,U),X.el=Ae.el,se===null&&YOe(A,Ae.el),te&&ca(te,L),(be=X.props&&X.props.onVnodeUpdated)&&ca(()=>Qc(be,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:be,type:Ae}=A,Ue=jI(C);$_(A,!1),ie&&G4(ie),!Ue&&(X=te&&te.onVnodeBeforeMount)&&Qc(X,se,C),$_(A,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(Ae);const tt=A.subTree=UY(A);k(null,tt,R,N,A,L,U),C.el=tt.el}if(re&&ca(re,L),!Ue&&(X=te&&te.onVnodeMounted)){const tt=C;ca(()=>Qc(X,se,tt),L)}(C.shapeFlag&256||se&&jI(se.vnode)&&se.vnode.shapeFlag&256)&&A.a&&ca(A.a,L),A.isMounted=!0,C=R=N=null}};A.scope.on();const $=A.effect=new kce(W);A.scope.off();const B=A.update=$.run.bind($),Q=A.job=$.runIfDirty.bind($);Q.i=A,Q.id=A.uid,$.scheduler=()=>B$(Q),$_(A,!0),B()},oe=(A,C,R)=>{C.component=A;const N=A.vnode.props;A.vnode=C,A.next=null,DOe(A,C.props,N,R),FOe(A,C.children,R),bf(),kY(A),Ef()},ve=(A,C,R,N,L,U,j,W,$=!1)=>{const B=A&&A.children,Q=A?A.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){nt(B,X,R,N,L,U,j,W,$);return}else if(Z&256){Lt(B,X,R,N,L,U,j,W,$);return}}te&8?(Q&16&&Ve(B,L,U),X!==B&&h(R,X)):Q&16?te&16?nt(B,X,R,N,L,U,j,W,$):Ve(B,L,U,!0):(Q&8&&h(R,""),te&16&&v(X,R,N,L,U,j,W,$))},Lt=(A,C,R,N,L,U,j,W,$)=>{A=A||Tb,C=C||Tb;const B=A.length,Q=C.length,X=Math.min(B,Q);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?Mp(C[Z]):mh(C[Z]);k(A[Z],te,R,null,L,U,j,W,$)}B>Q?Ve(A,L,U,!0,!1,X):v(C,R,N,L,U,j,W,$,X)},nt=(A,C,R,N,L,U,j,W,$)=>{let B=0;const Q=C.length;let X=A.length-1,Z=Q-1;for(;B<=X&&B<=Z;){const te=A[B],ie=C[B]=$?Mp(C[B]):mh(C[B]);if(yy(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;B++}for(;B<=X&&B<=Z;){const te=A[X],ie=C[Z]=$?Mp(C[Z]):mh(C[Z]);if(yy(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Q?C[te].el:N;for(;B<=Z;)k(null,C[B]=$?Mp(C[B]):mh(C[B]),R,ie,L,U,j,W,$),B++}}else if(B>Z)for(;B<=X;)Te(A[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const ze=C[B]=$?Mp(C[B]):mh(C[B]);ze.key!=null&&re.set(ze.key,B)}let se,be=0;const Ae=Z-ie+1;let Ue=!1,tt=0;const Ye=new Array(Ae);for(B=0;B<Ae;B++)Ye[B]=0;for(B=te;B<=X;B++){const ze=A[B];if(be>=Ae){Te(ze,L,U,!0);continue}let Me;if(ze.key!=null)Me=re.get(ze.key);else for(se=ie;se<=Z;se++)if(Ye[se-ie]===0&&yy(ze,C[se])){Me=se;break}Me===void 0?Te(ze,L,U,!0):(Ye[Me-ie]=B+1,Me>=tt?tt=Me:Ue=!0,k(ze,C[Me],R,null,L,U,j,W,$),be++)}const ls=Ue?jOe(Ye):Tb;for(se=ls.length-1,B=Ae-1;B>=0;B--){const ze=ie+B,Me=C[ze],Qn=C[ze+1],Fr=ze+1<Q?Qn.el||Qn.placeholder:N;Ye[B]===0?k(null,Me,R,Fr,L,U,j,W,$):Ue&&(se<0||B!==ls[se]?mt(Me,R,Fr,2):se--)}}},mt=(A,C,R,N,L=null)=>{const{el:U,type:j,transition:W,children:$,shapeFlag:B}=A;if(B&6){mt(A.component.subTree,C,R,N);return}if(B&128){A.suspense.move(C,R,N);return}if(B&64){j.move(A,C,R,ee);return}if(j===Va){s(U,C,R);for(let Q=0;Q<$.length;Q++)mt($[Q],C,R,N);s(A.anchor,C,R);return}if(j===nU){V(A,C,R);return}if(N!==2&&B&1&&W)if(N===0)W.beforeEnter(U),s(U,C,R),ca(()=>W.enter(U),L);else{const{leave:Q,delayLeave:X,afterLeave:Z}=W,te=()=>{A.ctx.isUnmounted?r(U):s(U,C,R)},ie=()=>{Q(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,R)},Te=(A,C,R,N=!1,L=!1)=>{const{type:U,props:j,ref:W,children:$,dynamicChildren:B,shapeFlag:Q,patchFlag:X,dirs:Z,cacheIndex:te}=A;if(X===-2&&(L=!1),W!=null&&(bf(),qI(W,null,R,A,!0),Ef()),te!=null&&(C.renderCache[te]=void 0),Q&256){C.ctx.deactivate(A);return}const ie=Q&1&&Z,re=!jI(A);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&Qc(se,C,A),Q&6)Mt(A.component,R,N);else{if(Q&128){A.suspense.unmount(R,N);return}ie&&B_(A,null,C,"beforeUnmount"),Q&64?A.type.remove(A,C,R,ee,N):B&&!B.hasOnce&&(U!==Va||X>0&&X&64)?Ve(B,C,R,!1,!0):(U===Va&&X&384||!L&&Q&16)&&Ve($,C,R),N&&we(A)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&ca(()=>{se&&Qc(se,C,A),ie&&B_(A,null,C,"unmounted")},R)},we=A=>{const{type:C,el:R,anchor:N,transition:L}=A;if(C===Va){fn(R,N);return}if(C===nU){q(A);return}const U=()=>{r(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:W}=L,$=()=>j(R,U);W?W(A.el,U,$):$()}else U()},fn=(A,C)=>{let R;for(;A!==C;)R=p(A),r(A),A=R;r(C)},Mt=(A,C,R)=>{const{bum:N,scope:L,job:U,subTree:j,um:W,m:$,a:B,parent:Q,slots:{__:X}}=A;VY($),VY(B),N&&G4(N),Q&&dt(X)&&X.forEach(Z=>{Q.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,Te(j,A,C,R)),W&&ca(W,C),ca(()=>{A.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Ve=(A,C,R,N=!1,L=!1,U=0)=>{for(let j=U;j<A.length;j++)Te(A[j],C,R,N,L)},F=A=>{if(A.shapeFlag&6)return F(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const C=p(A.anchor||A.el),R=C&&C[Qce];return R?p(R):C};let Y=!1;const G=(A,C,R)=>{A==null?C._vnode&&Te(C._vnode,null,null,!0):k(C._vnode||null,A,C,null,null,null,R),C._vnode=A,Y||(Y=!0,kY(),Wce(),Y=!1)},ee={p:k,um:Te,m:mt,r:we,mt:K,mc:v,pc:ve,pbc:T,n:F,o:t};return{render:G,hydrate:void 0,createApp:xOe(G)}}function tU({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $_({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function qOe(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Q$(t,e,n=!1){const s=t.children,r=e.children;if(dt(s)&&dt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Mp(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Q$(o,a)),a.type===zL&&(a.el=o.el),a.type===va&&!a.el&&(a.el=o.el)}}function jOe(t){const e=t.slice(),n=[0];let s,r,i,o,a;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function _he(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_he(e)}function VY(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const BOe=Symbol.for("v-scx"),$Oe=()=>Na(BOe);function gg(t,e,n){return yhe(t,e,n)}function yhe(t,e,n=es){const{immediate:s,deep:r,flush:i,once:o}=n,a=bi({},n),u=e&&s||!e&&i!=="post";let c;if(IS){if(i==="sync"){const m=$Oe();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=Sh,m.resume=Sh,m.pause=Sh,m}}const h=No;a.call=(m,w,k)=>jc(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{ca(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():B$(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=uOe(t,e,a);return IS&&(c?c.push(p):u&&p()),p}function zOe(t,e,n){const s=this.proxy,r=ir(t)?t.includes(".")?vhe(s,t):()=>s[t]:t.bind(s,s);let i;kt(e)?i=e:(i=e.handler,n=e);const o=VA(this),a=yhe(r,i.bind(s),n);return o(),a}function vhe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const HOe=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${zl(e)}Modifiers`]||t[`${Zv(e)}Modifiers`];function WOe(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||es;let r=n;const i=e.startsWith("update:"),o=i&&HOe(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ir(h)?h.trim():h)),o.number&&(r=n.map(ADe)));let a,u=s[a=K4(e)]||s[a=K4(zl(e))];!u&&i&&(u=s[a=K4(Zv(e))]),u&&jc(u,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,jc(c,t,6,r)}}function whe(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!kt(t)){const u=c=>{const h=whe(c,e,!0);h&&(a=!0,bi(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Rs(t)&&s.set(t,null),null):(dt(i)?i.forEach(u=>o[u]=null):bi(o,i),Rs(t)&&s.set(t,o),o)}function $L(t,e){return!t||!SL(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fn(t,e[0].toLowerCase()+e.slice(1))||Fn(t,Zv(e))||Fn(t,e))}function UY(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=Zx(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,H=q;O=mh(c.call(H,q,h,d,m,p,w)),M=a}else{const q=e;O=mh(q.length>1?q(d,{attrs:a,slots:o,emit:u}):q(d,null)),M=e.props?a:KOe(a)}}catch(q){$I.length=0,OL(q,t,1),O=ji(va)}let V=O;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(R$)&&(M=GOe(M,i)),V=Yg(V,M,!1,!0))}return n.dirs&&(V=Yg(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&pv(V,n.transition),O=V,Zx(P),O}const KOe=t=>{let e;for(const n in t)(n==="class"||n==="style"||SL(n))&&((e||(e={}))[n]=t[n]);return e},GOe=(t,e)=>{const n={};for(const s in t)(!R$(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function QOe(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?qY(s,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!$L(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?qY(s,o,c):!0:!!o;return!1}function qY(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!$L(n,i))return!0}return!1}function YOe({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const bhe=t=>t.__isSuspense;function XOe(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):dOe(t)}const Va=Symbol.for("v-fgt"),zL=Symbol.for("v-txt"),va=Symbol.for("v-cmt"),nU=Symbol.for("v-stc"),$I=[];let ll=null;function MA(t=!1){$I.push(ll=t?null:[])}function JOe(){$I.pop(),ll=$I[$I.length-1]||null}let CS=1;function jY(t,e=!1){CS+=t,t<0&&ll&&e&&(ll.hasOnce=!0)}function Ehe(t){return t.dynamicChildren=CS>0?ll||Tb:null,JOe(),CS>0&&ll&&ll.push(t),t}function HL(t,e,n,s,r,i){return Ehe(FA(t,e,n,s,r,i,!0))}function WL(t,e,n,s,r){return Ehe(ji(t,e,n,s,r,!0))}function tN(t){return t?t.__v_isVNode===!0:!1}function yy(t,e){return t.type===e.type&&t.key===e.key}const The=({key:t})=>t??null,xP=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ir(t)||Pr(t)||kt(t)?{i:al,r:t,k:e,f:!!n}:t:null);function FA(t,e=null,n=null,s=0,r=null,i=t===Va?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&The(e),ref:e&&xP(e),scopeId:Gce,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:al};return a?(X$(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=ir(n)?8:16),CS>0&&!o&&ll&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ll.push(u),u}const ji=ZOe;function ZOe(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===EOe)&&(t=va),tN(t)){const a=Yg(t,e,!0);return n&&X$(a,n),CS>0&&!i&&ll&&(a.shapeFlag&6?ll[ll.indexOf(t)]=a:ll.push(a)),a.patchFlag=-2,a}if(cLe(t)&&(t=t.__vccOpts),e){e=eLe(e);let{class:a,style:u}=e;a&&!ir(a)&&(e.class=IT(a)),Rs(u)&&(q$(u)&&!dt(u)&&(u=bi({},u)),e.style=CT(u))}const o=ir(t)?1:bhe(t)?128:Yce(t)?64:Rs(t)?4:kt(t)?2:0;return FA(t,e,n,s,r,o,i,!0)}function eLe(t){return t?q$(t)||hhe(t)?bi({},t):t:null}function Yg(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?tLe(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&The(c),ref:e&&e.ref?n&&i?dt(i)?i.concat(xP(e)):[i,xP(e)]:xP(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Va?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Yg(t.ssContent),ssFallback:t.ssFallback&&Yg(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&pv(h,u.clone(h)),h}function KL(t=" ",e=0){return ji(zL,null,t,e)}function Y$(t="",e=!1){return e?(MA(),WL(va,null,t)):ji(va,null,t)}function mh(t){return t==null||typeof t=="boolean"?ji(va):dt(t)?ji(Va,null,t.slice()):tN(t)?Mp(t):ji(zL,null,String(t))}function Mp(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Yg(t)}function X$(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(dt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),X$(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!hhe(e)?e._ctx=al:r===3&&al&&(al.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else kt(e)?(e={default:e,_ctx:al},n=32):(e=String(e),s&64?(n=16,e=[KL(e)]):n=8);t.children=e,t.shapeFlag|=n}function tLe(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=IT([e.class,s.class]));else if(r==="style")e.style=CT([e.style,s.style]);else if(SL(r)){const i=e[r],o=s[r];o&&i!==o&&!(dt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Qc(t,e,n,s=null){jc(t,e,7,[n,s])}const nLe=lhe();let sLe=0;function rLe(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||nLe,i={uid:sLe++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sce(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fhe(s,r),emitsOptions:whe(s,r),emit:null,emitted:null,propsDefaults:es,inheritAttrs:s.inheritAttrs,ctx:es,data:es,props:es,attrs:es,slots:es,refs:es,setupState:es,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=WOe.bind(null,i),t.ce&&t.ce(i),i}let No=null;const yd=()=>No||al;let nN,oq;{const t=PL(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};nN=e("__VUE_INSTANCE_SETTERS__",n=>No=n),oq=e("__VUE_SSR_SETTERS__",n=>IS=n)}const VA=t=>{const e=No;return nN(t),t.scope.on(),()=>{t.scope.off(),nN(e)}},BY=()=>{No&&No.scope.off(),nN(null)};function Che(t){return t.vnode.shapeFlag&4}let IS=!1;function iLe(t,e=!1,n=!1){e&&oq(e);const{props:s,children:r}=t.vnode,i=Che(t);NOe(t,s,i,e),MOe(t,r,n||e);const o=i?oLe(t,e):void 0;return e&&oq(!1),o}function oLe(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,COe);const{setup:s}=n;if(s){bf();const r=t.setupContext=s.length>1?lLe(t):null,i=VA(t),o=NA(s,t,0,[t.props,r]),a=wce(o);if(Ef(),i(),(a||t.sp)&&!jI(t)&&rhe(t),a){if(o.then(BY,BY),e)return o.then(u=>{$Y(t,u)}).catch(u=>{OL(u,t,0)});t.asyncDep=o}else $Y(t,o)}else Ihe(t)}function $Y(t,e,n){kt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Rs(e)&&(t.setupState=$ce(e)),Ihe(t)}function Ihe(t,e,n){const s=t.type;t.render||(t.render=s.render||Sh);{const r=VA(t);bf();try{IOe(t)}finally{Ef(),r()}}}const aLe={get(t,e){return wo(t,"get",""),t[e]}};function lLe(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,aLe),slots:t.slots,emit:t.emit,expose:e}}function GL(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy($ce(e_(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in BI)return BI[n](t)},has(e,n){return n in e||n in BI}})):t.proxy}function uLe(t,e=!0){return kt(t)?t.displayName||t.name:t.name||e&&t.__name}function cLe(t){return kt(t)&&"__vccOpts"in t}const He=(t,e)=>aOe(t,e,IS);function st(t,e,n){const s=arguments.length;return s===2?Rs(e)&&!dt(e)?tN(e)?ji(t,null,[e]):ji(t,e):ji(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&tN(n)&&(n=[n]),ji(t,e,n))}const hLe="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let aq;const zY=typeof window<"u"&&window.trustedTypes;if(zY)try{aq=zY.createPolicy("vue",{createHTML:t=>t})}catch{}const She=aq?t=>aq.createHTML(t):t=>t,dLe="http://www.w3.org/2000/svg",fLe="http://www.w3.org/1998/Math/MathML",Ud=typeof document<"u"?document:null,HY=Ud&&Ud.createElement("template"),pLe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Ud.createElementNS(dLe,t):e==="mathml"?Ud.createElementNS(fLe,t):n?Ud.createElement(t,{is:n}):Ud.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Ud.createTextNode(t),createComment:t=>Ud.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ud.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{HY.innerHTML=She(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=HY.content;if(s==="svg"||s==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_p="transition",TC="animation",pE=Symbol("_vtc"),khe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ahe=bi({},ehe,khe),gLe=t=>(t.displayName="Transition",t.props=Ahe,t),QL=gLe((t,{slots:e})=>st(gOe,Rhe(t),e)),z_=(t,e=[])=>{dt(t)?t.forEach(n=>n(...e)):t&&t(...e)},WY=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function Rhe(t){const e={};for(const E in t)E in khe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=mLe(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Rp(E,b?h:a),Rp(E,b?c:o),K&&K()},T=(E,b)=>{E._isLeaving=!1,Rp(E,d),Rp(E,m),Rp(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,ae=()=>y(b,E,K);z_(ne,[b,ae]),KY(()=>{Rp(b,E?u:i),sh(b,E?h:a),WY(ne)||GY(b,s,k,ae)})};return bi(e,{onBeforeEnter(E){z_(O,[E]),sh(E,i),sh(E,o)},onBeforeAppear(E){z_(J,[E]),sh(E,u),sh(E,c)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>T(E,b);sh(E,d),E._enterCancelled?(sh(E,p),lq()):(lq(),sh(E,p)),KY(()=>{E._isLeaving&&(Rp(E,d),sh(E,m),WY(q)||GY(E,s,P,K))}),z_(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),z_(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),z_(v,[E])},onLeaveCancelled(E){T(E),z_(H,[E])}})}function mLe(t){if(t==null)return null;if(Rs(t))return[sU(t.enter),sU(t.leave)];{const e=sU(t);return[e,e]}}function sU(t){return RDe(t)}function sh(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[pE]||(t[pE]=new Set)).add(e)}function Rp(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[pE];n&&(n.delete(e),n.size||(t[pE]=void 0))}function KY(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _Le=0;function GY(t,e,n,s){const r=t._endId=++_Le,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=Phe(t,e);if(!o)return s();const c=o+"end";let h=0;const d=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++h>=u&&d()};setTimeout(()=>{h<u&&d()},a+1),t.addEventListener(c,p)}function Phe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${_p}Delay`),i=s(`${_p}Duration`),o=QY(r,i),a=s(`${TC}Delay`),u=s(`${TC}Duration`),c=QY(a,u);let h=null,d=0,p=0;e===_p?o>0&&(h=_p,d=o,p=i.length):e===TC?c>0&&(h=TC,d=c,p=u.length):(d=Math.max(o,c),h=d>0?o>c?_p:TC:null,p=h?h===_p?i.length:u.length:0);const m=h===_p&&/\b(transform|all)(,|$)/.test(s(`${_p}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function QY(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>YY(n)+YY(t[s])))}function YY(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function lq(){return document.body.offsetHeight}function yLe(t,e,n){const s=t[pE];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const sN=Symbol("_vod"),xhe=Symbol("_vsh"),J$={beforeMount(t,{value:e},{transition:n}){t[sN]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):CC(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),CC(t,!0),s.enter(t)):s.leave(t,()=>{CC(t,!1)}):CC(t,e))},beforeUnmount(t,{value:e}){CC(t,e)}};function CC(t,e){t.style.display=e?t[sN]:"none",t[xhe]=!e}const vLe=Symbol(""),wLe=/(^|;)\s*display\s*:/;function bLe(t,e,n){const s=t.style,r=ir(n);let i=!1;if(n&&!r){if(e)if(ir(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&NP(s,a,"")}else for(const o in e)n[o]==null&&NP(s,o,"");for(const o in n)o==="display"&&(i=!0),NP(s,o,n[o])}else if(r){if(e!==n){const o=s[vLe];o&&(n+=";"+o),s.cssText=n,i=wLe.test(n)}}else e&&t.removeAttribute("style");sN in t&&(t[sN]=i?s.display:"",t[xhe]&&(s.display="none"))}const XY=/\s*!important$/;function NP(t,e,n){if(dt(n))n.forEach(s=>NP(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=ELe(t,e);XY.test(n)?t.setProperty(Zv(s),n.replace(XY,""),"important"):t[s]=n}}const JY=["Webkit","Moz","ms"],rU={};function ELe(t,e){const n=rU[e];if(n)return n;let s=zl(e);if(s!=="filter"&&s in t)return rU[e]=s;s=RL(s);for(let r=0;r<JY.length;r++){const i=JY[r]+s;if(i in t)return rU[e]=i}return e}const ZY="http://www.w3.org/1999/xlink";function eX(t,e,n,s,r,i=LDe(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ZY,e.slice(6,e.length)):t.setAttributeNS(ZY,e,n):n==null||i&&!Tce(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Zm(n)?String(n):n)}function tX(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?She(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Tce(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function TLe(t,e,n,s){t.addEventListener(e,n,s)}function CLe(t,e,n,s){t.removeEventListener(e,n,s)}const nX=Symbol("_vei");function ILe(t,e,n,s,r=null){const i=t[nX]||(t[nX]={}),o=i[e];if(s&&o)o.value=s;else{const[a,u]=SLe(e);if(s){const c=i[e]=RLe(s,r);TLe(t,a,c,u)}else o&&(CLe(t,a,o,u),i[e]=void 0)}}const sX=/(?:Once|Passive|Capture)$/;function SLe(t){let e;if(sX.test(t)){e={};let n;for(;n=t.match(sX);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zv(t.slice(2)),e]}let iU=0;const kLe=Promise.resolve(),ALe=()=>iU||(kLe.then(()=>iU=0),iU=Date.now());function RLe(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;jc(PLe(s,n.value),e,5,[s])};return n.value=t,n.attached=ALe(),n}function PLe(t,e){if(dt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const rX=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xLe=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?yLe(t,s,o):e==="style"?bLe(t,n,s):SL(e)?R$(e)||ILe(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):NLe(t,e,s,o))?(tX(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&eX(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ir(s))?tX(t,zl(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),eX(t,e,s,o))};function NLe(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&rX(e)&&kt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return rX(e)&&ir(n)?!1:e in t}const Nhe=new WeakMap,Dhe=new WeakMap,rN=Symbol("_moveCb"),iX=Symbol("_enterCb"),DLe=t=>(delete t.props.mode,t),OLe=DLe({name:"TransitionGroup",props:bi({},Ahe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=yd(),s=Zce();let r,i;return LA(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ULe(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(MLe),r.forEach(FLe);const a=r.filter(VLe);lq(),a.forEach(u=>{const c=u.el,h=c.style;sh(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=c[rN]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",d),c[rN]=null,Rp(c,o))};c.addEventListener("transitionend",d)}),r=[]}),()=>{const o=en(t),a=Rhe(o);let u=o.tag||Va;if(r=[],i)for(let c=0;c<i.length;c++){const h=i[c];h.el&&h.el instanceof Element&&(r.push(h),pv(h,TS(h,a,s,n)),Nhe.set(h,h.el.getBoundingClientRect()))}i=e.default?z$(e.default()):[];for(let c=0;c<i.length;c++){const h=i[c];h.key!=null&&pv(h,TS(h,a,s,n))}return ji(u,null,i)}}}),LLe=OLe;function MLe(t){const e=t.el;e[rN]&&e[rN](),e[iX]&&e[iX]()}function FLe(t){Dhe.set(t,t.el.getBoundingClientRect())}function VLe(t){const e=Nhe.get(t),n=Dhe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function ULe(t,e,n){const s=t.cloneNode(),r=t[pE];r&&r.forEach(a=>{a.split(/\s+/).forEach(u=>u&&s.classList.remove(u))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=Phe(s);return i.removeChild(s),o}const qLe=["ctrl","shift","alt","meta"],jLe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>qLe.some(n=>t[`${n}Key`]&&!e.includes(n))},Z$=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=jLe[e[o]];if(a&&a(r,e))return}return t(r,...i)})},BLe=bi({patchProp:xLe},pLe);let oX;function $Le(){return oX||(oX=VOe(BLe))}const Ohe=(...t)=>{const e=$Le().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=HLe(s);if(!r)return;const i=e._component;!kt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,zLe(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function zLe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function HLe(t){return ir(t)?document.querySelector(t):t}function tw(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function e5(t,e){for(const n in e)tw(t,n,e[n]);return t}const Jh=qc(!1);let uq;function WLe(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function KLe(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const Lhe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function GLe(t){const e=t.toLowerCase(),n=KLe(e),s=WLe(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Jh.value===!0&&(uq={is:{...r}}),Lhe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const aX=navigator.userAgent||navigator.vendor||window.opera,QLe={has:{touch:!1,webStorage:!1},within:{iframe:!1}},yl={userAgent:aX,is:GLe(aX),has:{touch:Lhe},within:{iframe:window.self!==window.top}},gE={install(t){const{$q:e}=t;Jh.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,yl),Jh.value=!1}),e.platform=sp(this)):e.platform=this}};{let t;tw(yl.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(gE,yl),Jh.value===!0&&(Object.assign(gE,uq,QLe),uq=null)}function t_(t){return e_(ew(t))}function YL(t){return e_(t)}const XL=(t,e)=>{const n=sp(t);for(const s in t)tw(e,s,()=>n[s],r=>{n[s]=r});return e},Zh={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Zh,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Xg(){}function t5(t){return t.button===0}function JL(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function n5(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function UA(t){t.stopPropagation()}function mE(t){t.cancelable!==!1&&t.preventDefault()}function $d(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function s5(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",mE,Zh.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",mE,Zh.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function ZL(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Zh[r[3]])})}function eM(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Zh[s[3]])}),t[n]=void 0)}function tM(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const oU=["sm","md","lg","xl"],{passive:lX}=Zh,YLe=XL({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Xg,setDebounce:Xg,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||yl.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,u={},c=16;this.setSizes=d=>{oU.forEach(p=>{d[p]!==void 0&&(u[p]=d[p])})},this.setDebounce=d=>{c=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&oU.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{oU.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,lX),a=p>0?tM(this.__update,p):this.__update,s.addEventListener("resize",a,lX)},this.setDebounce(c),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Jh.value===!0?e.push(h):h()}}),ao=XL({isActive:!1,mode:!1},{__media:void 0,set(t){ao.mode=t,t==="auto"?(ao.__media===void 0&&(ao.__media=window.matchMedia("(prefers-color-scheme: dark)"),ao.__updateMedia=()=>{ao.set("auto")},ao.__media.addListener(ao.__updateMedia)),t=ao.__media.matches):ao.__media!==void 0&&(ao.__media.removeListener(ao.__updateMedia),ao.__media=void 0),ao.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){ao.set(ao.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function XLe(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let Mhe=!1;function JLe(t){Mhe=t.isComposing===!0}function nM(t){return Mhe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function _E(t,e){return nM(t)===!0?!1:[].concat(e).includes(t.keyCode)}function Fhe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function ZLe({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=Fhe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function eMe(){const{is:t}=yl,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=Fhe(t);r!==void 0&&n.add(`platform-${r}`)}}yl.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),yl.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function tMe(t){for(const e in t)XLe(e,t[e])}const nMe={install(t){if(this.__installed!==!0){if(Jh.value===!0)eMe();else{const{$q:e}=t;e.config.brand!==void 0&&tMe(e.config.brand);const n=ZLe(yl,e.config);document.body.classList.add.apply(document.body.classList,n)}yl.is.ios===!0&&document.body.addEventListener("touchstart",Xg),window.addEventListener("keydown",JLe,!0)}}},Vhe=()=>!0;function sMe(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function rMe(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function iMe(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Vhe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(sMe).map(rMe)),()=>e.includes(window.location.hash)}const sM={__history:[],add:Xg,remove:Xg,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=yl.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Vhe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=iMe(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},uX={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function cX(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Fp=XL({__qLang:{}},{getLocale:cX,set(t=uX,e){const n={...t,rtl:t.rtl===!0,getLocale:cX};{if(n.set=Fp.set,Fp.__langConfig===void 0||Fp.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Fp.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Fp.__qLang,Fp.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||uX))}}),oMe={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},iN=XL({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=iN.set,Object.assign(iN.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,tw(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||oMe))}}),Uhe="_q_",r5="_q_l_",i5="_q_pc_",o5="_q_fo_";function a5(){}const oN={};let qhe=!1;function aMe(){qhe=!0}function Sb(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(Sb(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(Sb(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(Sb(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function Jg(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function l5(t){return Object.prototype.toString.call(t)==="[object Date]"}function u5(t){return typeof t=="number"&&isFinite(t)}const hX=[gE,nMe,ao,YLe,sM,Fp,iN];function lMe(t,e){const n=Ohe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function dX(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function uMe(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(Uhe,n.$q),dX(n,hX),e.components!==void 0&&Object.values(e.components).forEach(s=>{Jg(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{Jg(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&dX(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&hX.includes(s)===!1)),Jh.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const cMe=function(t,e={}){const n={version:"2.18.2"};qhe===!1?(e.config!==void 0&&Object.assign(oN,e.config),n.config={...oN},aMe()):n.config=e.config||{},uMe(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},hMe={name:"Quasar",version:"2.18.2",install:cMe,lang:Fp,iconSet:iN};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const Kw=typeof document<"u";function jhe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function dMe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&jhe(t.default)}const Dn=Object.assign;function aU(t,e){const n={};for(const s in e){const r=e[s];n[s]=Bc(r)?r.map(t):t(r)}return n}const zI=()=>{},Bc=Array.isArray,Bhe=/#/g,fMe=/&/g,pMe=/\//g,gMe=/=/g,mMe=/\?/g,$he=/\+/g,_Me=/%5B/g,yMe=/%5D/g,zhe=/%5E/g,vMe=/%60/g,Hhe=/%7B/g,wMe=/%7C/g,Whe=/%7D/g,bMe=/%20/g;function c5(t){return encodeURI(""+t).replace(wMe,"|").replace(_Me,"[").replace(yMe,"]")}function EMe(t){return c5(t).replace(Hhe,"{").replace(Whe,"}").replace(zhe,"^")}function cq(t){return c5(t).replace($he,"%2B").replace(bMe,"+").replace(Bhe,"%23").replace(fMe,"%26").replace(vMe,"`").replace(Hhe,"{").replace(Whe,"}").replace(zhe,"^")}function TMe(t){return cq(t).replace(gMe,"%3D")}function CMe(t){return c5(t).replace(Bhe,"%23").replace(mMe,"%3F")}function IMe(t){return t==null?"":CMe(t).replace(pMe,"%2F")}function SS(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const SMe=/\/$/,kMe=t=>t.replace(SMe,"");function lU(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=xMe(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:SS(o)}}function AMe(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function fX(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function RMe(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&yE(e.matched[s],n.matched[r])&&Khe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function yE(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Khe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!PMe(t[n],e[n]))return!1;return!0}function PMe(t,e){return Bc(t)?pX(t,e):Bc(e)?pX(e,t):t===e}function pX(t,e){return Bc(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function xMe(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const yp={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var kS;(function(t){t.pop="pop",t.push="push"})(kS||(kS={}));var HI;(function(t){t.back="back",t.forward="forward",t.unknown=""})(HI||(HI={}));function NMe(t){if(!t)if(Kw){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),kMe(t)}const DMe=/^[^#]+#/;function OMe(t,e){return t.replace(DMe,"#")+e}function LMe(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const rM=()=>({left:window.scrollX,top:window.scrollY});function MMe(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=LMe(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function gX(t,e){return(history.state?history.state.position-e:-1)+t}const hq=new Map;function FMe(t,e){hq.set(t,e)}function VMe(t){const e=hq.get(t);return hq.delete(t),e}let UMe=()=>location.protocol+"//"+location.host;function Ghe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),fX(a,"")}return fX(n,t)+s+r}function qMe(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=Ghe(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:kS.pop,direction:P?P>0?HI.forward:HI.back:HI.unknown})})};function u(){o=n.value}function c(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Dn({},p.state,{scroll:rM()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:d}}function mX(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?rM():null}}function jMe(t){const{history:e,location:n}=window,s={value:Ghe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+u:UMe()+t+u;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(u,c){const h=Dn({},e.state,mX(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,h,!0),s.value=u}function a(u,c){const h=Dn({},r.value,e.state,{forward:u,scroll:rM()});i(h.current,h,!0);const d=Dn({},mX(s.value,u,null),{position:h.position+1},c);i(u,d,!1),s.value=u}return{location:s,state:r,push:a,replace:o}}function BMe(t){t=NMe(t);const e=jMe(t),n=qMe(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Dn({location:"",base:t,go:s,createHref:OMe.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function $Me(t){return typeof t=="string"||t&&typeof t=="object"}function Qhe(t){return typeof t=="string"||typeof t=="symbol"}const Yhe=Symbol("");var _X;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_X||(_X={}));function vE(t,e){return Dn(new Error,{type:t,[Yhe]:!0},e)}function Ad(t,e){return t instanceof Error&&Yhe in t&&(e==null||!!(t.type&e))}const yX="[^/]+?",zMe={sensitive:!1,strict:!1,start:!0,end:!0},HMe=/[.+*?^${}()[\]/\\]/g;function WMe(t,e){const n=Dn({},zMe,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const p=c[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(HMe,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:O}=p;i.push({name:w,repeatable:k,optional:P});const M=O||yX;if(M!==yX){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&c.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function u(c){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,O=w in c?c[w]:"";if(Bc(O)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Bc(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:u}}function KMe(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Xhe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=KMe(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(vX(s))return 1;if(vX(r))return-1}return r.length-s.length}function vX(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const GMe={type:0,value:""},QMe=/[a-zA-Z0-9_]/;function YMe(t){if(!t)return[[]];if(t==="/")return[[GMe]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,u,c="",h="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&d(),o()):u===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:u==="("?n=2:QMe.test(u)?p():(d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function XMe(t,e,n){const s=WMe(YMe(t.path),n),r=Dn(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function JMe(t,e){const n=[],s=new Map;e=TX({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=bX(d);k.aliasOf=m&&m.record;const P=TX(e,d),O=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)O.push(bX(Dn({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of O){const{path:H}=q;if(p&&H[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=XMe(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!EX(M)&&o(d.name)),Jhe(M)&&u(M),k.children){const J=k.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:zI}function o(d){if(Qhe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function u(d){const p=t2e(d,n);n.splice(p,0,d),d.record.name&&!EX(d)&&s.set(d.record.name,d)}function c(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw vE(1,{location:d});P=m.record.name,w=Dn(wX(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&wX(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw vE(1,{location:d,currentLocation:p});P=m.record.name,w=Dn({},p.params,d.params),k=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:O,meta:e2e(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function wX(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function bX(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:ZMe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function ZMe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function EX(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function e2e(t){return t.reduce((e,n)=>Dn(e,n.meta),{})}function TX(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function t2e(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Xhe(t,e[i])<0?s=i:n=i+1}const r=n2e(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function n2e(t){let e=t;for(;e=e.parent;)if(Jhe(e)&&Xhe(t,e)===0)return e}function Jhe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function s2e(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace($he," "),i=r.indexOf("="),o=SS(i<0?r:r.slice(0,i)),a=i<0?null:SS(r.slice(i+1));if(o in e){let u=e[o];Bc(u)||(u=e[o]=[u]),u.push(a)}else e[o]=a}return e}function CX(t){let e="";for(let n in t){const s=t[n];if(n=TMe(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Bc(s)?s.map(r=>r&&cq(r)):[s&&cq(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function r2e(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Bc(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const i2e=Symbol(""),IX=Symbol(""),iM=Symbol(""),h5=Symbol(""),dq=Symbol("");function IC(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vp(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,u)=>{const c=p=>{p===!1?u(vE(4,{from:n,to:e})):p instanceof Error?u(p):$Me(p)?u(vE(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,c));let d=Promise.resolve(h);t.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function uU(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(jhe(u)){const c=(u.__vccOpts||u)[e];c&&i.push(Vp(c,n,s,o,a,r))}else{let c=u();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=dMe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Vp(p,n,s,o,a,r)()}))}}return i}function SX(t){const e=Na(iM),n=Na(h5),s=He(()=>{const u=kh(t.to);return e.resolve(u)}),r=He(()=>{const{matched:u}=s.value,{length:c}=u,h=u[c-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(yE.bind(null,h));if(p>-1)return p;const m=kX(u[c-2]);return c>1&&kX(h)===m&&d[d.length-1].path!==m?d.findIndex(yE.bind(null,u[c-2])):p}),i=He(()=>r.value>-1&&c2e(n.params,s.value.params)),o=He(()=>r.value>-1&&r.value===n.matched.length-1&&Khe(n.params,s.value.params));function a(u={}){if(u2e(u)){const c=e[kh(t.replace)?"replace":"push"](kh(t.to)).catch(zI);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:He(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function o2e(t){return t.length===1?t[0]:t}const a2e=ew({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:SX,setup(t,{slots:e}){const n=sp(SX(t)),{options:s}=Na(iM),r=He(()=>({[AX(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[AX(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&o2e(e.default(n));return t.custom?i:st("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),l2e=a2e;function u2e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function c2e(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Bc(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function kX(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const AX=(t,e,n)=>t??e??n,h2e=ew({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Na(dq),r=He(()=>t.route||s.value),i=Na(IX,0),o=He(()=>{let c=kh(i);const{matched:h}=r.value;let d;for(;(d=h[c])&&!d.components;)c++;return c}),a=He(()=>r.value.matched[o.value]);Wy(IX,He(()=>o.value+1)),Wy(i2e,a),Wy(dq,r);const u=qc();return gg(()=>[u.value,a.value,t.name],([c,h,d],[p,m,w])=>{h&&(h.instances[d]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!yE(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(c))},{flush:"post"}),()=>{const c=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return RX(n.default,{Component:p,route:c});const m=d.props[h],w=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=st(p,Dn({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:u}));return RX(n.default,{Component:k,route:c})||k}}});function RX(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const d2e=h2e;function f2e(t){const e=JMe(t.routes,t),n=t.parseQuery||s2e,s=t.stringifyQuery||CX,r=t.history,i=IC(),o=IC(),a=IC(),u=tOe(yp);let c=yp;Kw&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=aU.bind(null,F=>""+F),d=aU.bind(null,IMe),p=aU.bind(null,SS);function m(F,Y){let G,ee;return Qhe(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Y){if(Y=Dn({},Y||u.value),typeof F=="string"){const N=lU(n,F,Y.path),L=e.resolve({path:N.path},Y),U=r.createHref(N.fullPath);return Dn(N,L,{params:p(L.params),hash:SS(N.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Dn({},F,{path:lU(n,F.path,Y.path).path});else{const N=Dn({},F.params);for(const L in N)N[L]==null&&delete N[L];G=Dn({},F,{params:d(N)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const C=AMe(s,Dn({},F,{hash:EMe(A),path:ee.path})),R=r.createHref(C);return Dn({fullPath:C,hash:A,query:s===CX?r2e(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?lU(n,F,u.value.path):Dn({},F)}function V(F,Y){if(c!==F)return vE(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Dn(M(F),{replace:!0}))}function J(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Dn({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=c=O(F),ee=u.value,A=F.state,C=F.force,R=F.replace===!0,N=J(G);if(N)return I(Dn(M(N),{state:typeof N=="object"?Dn({},A,N.state):A,force:C,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!C&&RMe(s,ee,G)&&(U=vE(16,{to:L,from:ee}),mt(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Ad(j)?Ad(j,2)?j:nt(j):ve(j,L,ee)).then(j=>{if(j){if(Ad(j,2))return I(Dn({replace:R},M(j.to),{state:typeof j.to=="object"?Dn({},A,j.to.state):A,force:C}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=fn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function T(F,Y){let G;const[ee,A,C]=p2e(F,Y);G=uU(ee.reverse(),"beforeRouteLeave",F,Y);for(const N of ee)N.leaveGuards.forEach(L=>{G.push(Vp(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),Ve(G).then(()=>{G=[];for(const N of i.list())G.push(Vp(N,F,Y));return G.push(R),Ve(G)}).then(()=>{G=uU(A,"beforeRouteUpdate",F,Y);for(const N of A)N.updateGuards.forEach(L=>{G.push(Vp(L,F,Y))});return G.push(R),Ve(G)}).then(()=>{G=[];for(const N of C)if(N.beforeEnter)if(Bc(N.beforeEnter))for(const L of N.beforeEnter)G.push(Vp(L,F,Y));else G.push(Vp(N.beforeEnter,F,Y));return G.push(R),Ve(G)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),G=uU(C,"beforeRouteEnter",F,Y,y),G.push(R),Ve(G))).then(()=>{G=[];for(const N of o.list())G.push(Vp(N,F,Y));return G.push(R),Ve(G)}).catch(N=>Ad(N,8)?N:Promise.reject(N))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const C=V(F,Y);if(C)return C;const R=Y===yp,N=Kw?history.state:{};G&&(ee||R?r.replace(F.fullPath,Dn({scroll:R&&N&&N.scroll},A)):r.push(F.fullPath,A)),u.value=F,mt(F,Y,G,R),nt()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Mt.listening)return;const ee=O(F),A=J(ee);if(A){I(Dn(A,{replace:!0,force:!0}),ee).catch(zI);return}c=ee;const C=u.value;Kw&&FMe(gX(C.fullPath,G.delta),rM()),T(ee,C).catch(R=>Ad(R,12)?R:Ad(R,2)?(I(Dn(M(R.to),{force:!0}),ee).then(N=>{Ad(N,20)&&!G.delta&&G.type===kS.pop&&r.go(-1,!1)}).catch(zI),Promise.reject()):(G.delta&&r.go(-G.delta,!1),ve(R,ee,C))).then(R=>{R=R||E(ee,C,!1),R&&(G.delta&&!Ad(R,8)?r.go(-G.delta,!1):G.type===kS.pop&&Ad(R,20)&&r.go(-1,!1)),S(ee,C,R)}).catch(zI)}))}let ne=IC(),ae=IC(),oe;function ve(F,Y,G){nt(F);const ee=ae.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Lt(){return oe&&u.value!==yp?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function nt(F){return oe||(oe=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function mt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!Kw||!A)return Promise.resolve();const C=!G&&VMe(gX(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return DA().then(()=>A(F,Y,C)).then(R=>R&&MMe(R)).catch(R=>ve(R,F,Y))}const Te=F=>r.go(F);let we;const fn=new Set,Mt={currentRoute:u,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:O,options:t,push:q,replace:H,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Lt,install(F){const Y=this;F.component("RouterLink",l2e),F.component("RouterView",d2e),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>kh(u)}),Kw&&!we&&u.value===yp&&(we=!0,q(r.location).catch(A=>{}));const G={};for(const A in yp)Object.defineProperty(G,A,{get:()=>u.value[A],enumerable:!0});F.provide(iM,Y),F.provide(h5,xA(G)),F.provide(dq,u);const ee=F.unmount;fn.add(F),F.unmount=function(){fn.delete(F),fn.size<1&&(c=yp,b&&b(),b=null,u.value=yp,we=!1,oe=!1),ee()}}};function Ve(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Mt}function p2e(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>yE(c,a))?s.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>yE(c,u))||r.push(u))}return[n,s,r]}function oM(){return Na(iM)}function aM(t){return Na(h5)}const g2e=()=>{};var PX={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zhe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ce=function(t,e){if(!t)throw RT(e)},RT=function(t){return new Error("Firebase Database ("+Zhe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ede=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},m2e=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},d5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ede(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):m2e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const u=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||u==null)throw new _2e;const c=i<<2|o>>4;if(s.push(c),a!==64){const h=o<<4&240|a>>2;if(s.push(h),u!==64){const d=a<<6&192|u;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _2e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tde=function(t){const e=ede(t);return d5.encodeByteArray(e,!0)},aN=function(t){return tde(t).replace(/\./g,"")},lN=function(t){try{return d5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function y2e(t){return nde(void 0,t)}function nde(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!v2e(n)||(t[n]=nde(t[n],e[n]));return t}function v2e(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w2e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const b2e=()=>w2e().__FIREBASE_DEFAULTS__,E2e=()=>{if(typeof process>"u"||typeof PX>"u")return;const t=PX.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},T2e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lN(t[1]);return e&&JSON.parse(e)},lM=()=>{try{return g2e()||b2e()||E2e()||T2e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sde=t=>lM()?.emulatorHosts?.[t],f5=t=>{const e=sde(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rde=()=>lM()?.config,ide=t=>lM()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cM(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function p5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[aN(JSON.stringify(n)),aN(JSON.stringify(o)),""].join(".")}const WI={};function C2e(){const t={prod:[],emulator:[]};for(const e of Object.keys(WI))WI[e]?t.emulator.push(e):t.prod.push(e);return t}function I2e(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xX=!1;function hM(t,e){if(typeof window>"u"||typeof document>"u"||!vd(window.location.host)||WI[t]===e||WI[t]||xX)return;WI[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=C2e().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{xX=!0,i()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=I2e(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),c(k,w);const V=u();a(O,P),M.append(O,m,k,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vo())}function S2e(){const t=lM()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function k2e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function A2e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ode(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R2e(){const t=Vo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P2e(){return Zhe.NODE_ADMIN===!0}function x2e(){return!S2e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N2e(){try{return typeof indexedDB=="object"}catch{return!1}}function D2e(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const O2e="FirebaseError";class wd extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=O2e,Object.setPrototypeOf(this,wd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qA.prototype.create)}}class qA{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?L2e(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new wd(r,a,s)}}function L2e(t,e){return t.replace(M2e,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const M2e=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function AS(t){return JSON.parse(t)}function ii(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ade=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=AS(lN(i[0])||""),n=AS(lN(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},F2e=function(t){const e=ade(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},V2e=function(t){const e=ade(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ip(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wE(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function fq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uN(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Zg(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(NX(i)&&NX(o)){if(!Zg(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function NX(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PT(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U2e{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+c+u+h+s[d]&4294967295;u=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function q2e(t,e){const n=new j2e(t,e);return n.subscribe.bind(n)}class j2e{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");B2e(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=cU),r.error===void 0&&(r.error=cU),r.complete===void 0&&(r.complete=cU);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B2e(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cU(){}function m5(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $2e=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Ce(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},dM=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hn(t){return t&&t._delegate?t._delegate:t}class Tf{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iy="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z2e{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new uM;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(W2e(e))try{this.getOrInitializeService({instanceIdentifier:iy})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=iy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iy){return this.instances.has(e)}getOptions(e=iy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:H2e(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=iy){return this.component?this.component.multipleInstances?e:iy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H2e(t){return t===iy?void 0:t}function W2e(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K2e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z2e(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Wt||(Wt={}));const G2e={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},Q2e=Wt.INFO,Y2e={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},X2e=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Y2e[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fM{constructor(e){this.name=e,this._logLevel=Q2e,this._logHandler=X2e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G2e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const J2e=(t,e)=>e.some(n=>t instanceof n);let DX,OX;function Z2e(){return DX||(DX=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eFe(){return OX||(OX=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lde=new WeakMap,pq=new WeakMap,ude=new WeakMap,hU=new WeakMap,_5=new WeakMap;function tFe(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(mg(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lde.set(n,t)}).catch(()=>{}),_5.set(e,t),e}function nFe(t){if(pq.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pq.set(t,e)}let gq={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pq.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ude.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sFe(t){gq=t(gq)}function rFe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(dU(this),e,...n);return ude.set(s,e.sort?e.sort():[e]),mg(s)}:eFe().includes(t)?function(...e){return t.apply(dU(this),e),mg(lde.get(this))}:function(...e){return mg(t.apply(dU(this),e))}}function iFe(t){return typeof t=="function"?rFe(t):(t instanceof IDBTransaction&&nFe(t),J2e(t,Z2e())?new Proxy(t,gq):t)}function mg(t){if(t instanceof IDBRequest)return tFe(t);if(hU.has(t))return hU.get(t);const e=iFe(t);return e!==t&&(hU.set(t,e),_5.set(e,t)),e}const dU=t=>_5.get(t);function oFe(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=mg(o);return s&&o.addEventListener("upgradeneeded",u=>{s(mg(o.result),u.oldVersion,u.newVersion,mg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aFe=["get","getKey","getAll","getAllKeys","count"],lFe=["put","add","delete","clear"],fU=new Map;function LX(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fU.get(e))return fU.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=lFe.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||aFe.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&u.done]))[0]};return fU.set(e,i),i}sFe(t=>({...t,get:(e,n,s)=>LX(e,n)||t.get(e,n,s),has:(e,n)=>!!LX(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uFe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(cFe(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function cFe(t){return t.getComponent()?.type==="VERSION"}const mq="@firebase/app",MX="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Cf=new fM("@firebase/app"),hFe="@firebase/app-compat",dFe="@firebase/analytics-compat",fFe="@firebase/analytics",pFe="@firebase/app-check-compat",gFe="@firebase/app-check",mFe="@firebase/auth",_Fe="@firebase/auth-compat",yFe="@firebase/database",vFe="@firebase/data-connect",wFe="@firebase/database-compat",bFe="@firebase/functions",EFe="@firebase/functions-compat",TFe="@firebase/installations",CFe="@firebase/installations-compat",IFe="@firebase/messaging",SFe="@firebase/messaging-compat",kFe="@firebase/performance",AFe="@firebase/performance-compat",RFe="@firebase/remote-config",PFe="@firebase/remote-config-compat",xFe="@firebase/storage",NFe="@firebase/storage-compat",DFe="@firebase/firestore",OFe="@firebase/ai",LFe="@firebase/firestore-compat",MFe="firebase",FFe="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _q="[DEFAULT]",VFe={[mq]:"fire-core",[hFe]:"fire-core-compat",[fFe]:"fire-analytics",[dFe]:"fire-analytics-compat",[gFe]:"fire-app-check",[pFe]:"fire-app-check-compat",[mFe]:"fire-auth",[_Fe]:"fire-auth-compat",[yFe]:"fire-rtdb",[vFe]:"fire-data-connect",[wFe]:"fire-rtdb-compat",[bFe]:"fire-fn",[EFe]:"fire-fn-compat",[TFe]:"fire-iid",[CFe]:"fire-iid-compat",[IFe]:"fire-fcm",[SFe]:"fire-fcm-compat",[kFe]:"fire-perf",[AFe]:"fire-perf-compat",[RFe]:"fire-rc",[PFe]:"fire-rc-compat",[xFe]:"fire-gcs",[NFe]:"fire-gcs-compat",[DFe]:"fire-fst",[LFe]:"fire-fst-compat",[OFe]:"fire-vertex","fire-js":"fire-js",[MFe]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cN=new Map,UFe=new Map,yq=new Map;function FX(t,e){try{t.container.addComponent(e)}catch(n){Cf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function em(t){const e=t.name;if(yq.has(e))return Cf.debug(`There were multiple attempts to register component ${e}.`),!1;yq.set(e,t);for(const n of cN.values())FX(n,t);for(const n of UFe.values())FX(n,t);return!0}function jA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sl(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qFe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_g=new qA("app","Firebase",qFe);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jFe{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _g.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n_=FFe;function cde(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:_q,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw _g.create("bad-app-name",{appName:String(r)});if(n||(n=rde()),!n)throw _g.create("no-options");const i=cN.get(r);if(i){if(Zg(n,i.options)&&Zg(s,i.config))return i;throw _g.create("duplicate-app",{appName:r})}const o=new K2e(r);for(const u of yq.values())o.addComponent(u);const a=new jFe(n,s,o);return cN.set(r,a),a}function pM(t=_q){const e=cN.get(t);if(!e&&t===_q&&rde())return cde();if(!e)throw _g.create("no-app",{appName:t});return e}function Ll(t,e,n){let s=VFe[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cf.warn(o.join(" "));return}em(new Tf(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BFe="firebase-heartbeat-database",$Fe=1,RS="firebase-heartbeat-store";let pU=null;function hde(){return pU||(pU=oFe(BFe,$Fe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(RS)}catch(n){console.warn(n)}}}}).catch(t=>{throw _g.create("idb-open",{originalErrorMessage:t.message})})),pU}async function zFe(t){try{const e=(await hde()).transaction(RS),n=await e.objectStore(RS).get(dde(t));return await e.done,n}catch(e){if(e instanceof wd)Cf.warn(e.message);else{const n=_g.create("idb-get",{originalErrorMessage:e?.message});Cf.warn(n.message)}}}async function VX(t,e){try{const n=(await hde()).transaction(RS,"readwrite");await n.objectStore(RS).put(e,dde(t)),await n.done}catch(n){if(n instanceof wd)Cf.warn(n.message);else{const s=_g.create("idb-set",{originalErrorMessage:n?.message});Cf.warn(s.message)}}}function dde(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HFe=1024,WFe=30;class KFe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QFe(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=UX();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>WFe){const s=YFe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Cf.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UX(),{heartbeatsToSend:n,unsentEntries:s}=GFe(this._heartbeatsCache.heartbeats),r=aN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Cf.warn(e),""}}}function UX(){return new Date().toISOString().substring(0,10)}function GFe(t,e=HFe){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),qX(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qX(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class QFe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N2e()?D2e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await zFe(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return VX(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return VX(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function qX(t){return aN(JSON.stringify({version:2,heartbeats:t})).length}function YFe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XFe(t){em(new Tf("platform-logger",e=>new uFe(e),"PRIVATE")),em(new Tf("heartbeat",e=>new KFe(e),"PRIVATE")),Ll(mq,MX,t),Ll(mq,MX,"esm2020"),Ll("fire-js","")}XFe("");function fde(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gM=fde,pde=new qA("auth","Firebase",fde());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hN=new fM("@firebase/auth");function JFe(t,...e){hN.logLevel<=Wt.WARN&&hN.warn(`Auth (${n_}): ${t}`,...e)}function DP(t,...e){hN.logLevel<=Wt.ERROR&&hN.error(`Auth (${n_}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ed(t,...e){throw v5(t,...e)}function vc(t,...e){return v5(t,...e)}function y5(t,e,n){const s={...gM(),[e]:n};return new qA("auth","Firebase",s).create(e,{appName:t.name})}function Ky(t){return y5(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZFe(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&ed(t,"argument-error"),y5(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v5(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return pde.create(t,...e)}function wt(t,e,...n){if(!t)throw v5(e,...n)}function nf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw DP(e),new Error(e)}function If(t,e){t||nf(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vq(){return typeof self<"u"&&self.location?.href||""}function eVe(){return jX()==="http:"||jX()==="https:"}function jX(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tVe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eVe()||A2e()||"connection"in navigator)?navigator.onLine:!0}function nVe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BA{constructor(e,n){this.shortDelay=e,this.longDelay=n,If(n>e,"Short delay should be less than long delay!"),this.isMobile=g5()||ode()}get(){return tVe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w5(t,e){If(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gde{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sVe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rVe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iVe=new BA(3e4,6e4);function b5(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xT(t,e,n,s,r={}){return mde(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=PT({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return k2e()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&vd(t.emulatorConfig.host)&&(c.credentials="include"),gde.fetch()(await _de(t,t.config.apiHost,n,a),c)})}async function mde(t,e,n){t._canInitEmulator=!1;const s={...sVe,...e};try{const r=new aVe(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw I1(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw I1(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw I1(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw I1(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw y5(t,h,c);ed(t,h)}}catch(r){if(r instanceof wd)throw r;ed(t,"network-request-failed",{message:String(r)})}}async function oVe(t,e,n,s,r={}){const i=await xT(t,e,n,s,r);return"mfaPendingCredential"in i&&ed(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _de(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?w5(t.config,r):`${t.config.apiScheme}://${r}`;return rVe.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class aVe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(vc(this.auth,"network-request-failed")),iVe.get())})}}function I1(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=vc(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function lVe(t,e){return xT(t,"POST","/v1/accounts:delete",e)}async function dN(t,e){return xT(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KI(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mM(t,e=!1){const n=Hn(t),s=await n.getIdToken(e),r=E5(s);wt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:KI(gU(r.auth_time)),issuedAtTime:KI(gU(r.iat)),expirationTime:KI(gU(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function gU(t){return Number(t)*1e3}function E5(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return DP("JWT malformed, contained fewer than 3 sections"),null;try{const r=lN(n);return r?JSON.parse(r):(DP("Failed to decode base64 JWT payload"),null)}catch(r){return DP("Caught error parsing JWT payload as JSON",r?.toString()),null}}function BX(t){const e=E5(t);return wt(e,"internal-error"),wt(typeof e.exp<"u","internal-error"),wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function PS(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wd&&uVe(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function uVe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cVe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wq{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=KI(this.lastLoginAt),this.creationTime=KI(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function fN(t){const e=t.auth,n=await t.getIdToken(),s=await PS(t,dN(e,{idToken:n}));wt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?yde(r.providerUserInfo):[],o=hVe(t.providerData,i),a=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!o?.length,c=a?u:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new wq(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function _M(t){const e=Hn(t);await fN(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hVe(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function yde(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function dVe(t,e){const n=await mde(t,{},async()=>{const s=PT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await _de(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:s};return t.emulatorConfig&&vd(t.emulatorConfig.host)&&(u.credentials="include"),gde.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fVe(t,e){return xT(t,"POST","/v2/accounts:revokeToken",b5(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){wt(e.idToken,"internal-error"),wt(typeof e.idToken<"u","internal-error"),wt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BX(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){wt(e.length!==0,"internal-error");const n=BX(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await dVe(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new kb;return s&&(wt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(wt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(wt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kb,this.toJSON())}_performRefresh(){return nf("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vp(t,e){wt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nc{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new cVe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wq(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await PS(this,this.stsTokenManager.getToken(this.auth,e));return wt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mM(this,e)}reload(){return _M(this)}_assign(e){this!==e&&(wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await fN(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sl(this.auth.app))return Promise.reject(Ky(this.auth));const e=await this.getIdToken();return await PS(this,lVe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;wt(d&&k,e,"internal-error");const P=kb.fromJSON(this.name,k);wt(typeof d=="string",e,"internal-error"),vp(s,e.name),vp(r,e.name),wt(typeof p=="boolean",e,"internal-error"),wt(typeof m=="boolean",e,"internal-error"),vp(i,e.name),vp(o,e.name),vp(a,e.name),vp(u,e.name),vp(c,e.name),vp(h,e.name);const O=new nc({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new kb;r.updateFromServerResponse(n);const i=new nc({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await fN(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];wt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?yde(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new kb;a.updateFromIdToken(s);const u=new nc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new wq(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $X=new Map;function sf(t){If(t instanceof Function,"Expected a class definition");let e=$X.get(t);return e?(If(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$X.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vde{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vde.type="NONE";const xS=vde;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OP(t,e,n){return`firebase:${t}:${e}:${n}`}class Ab{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=OP(this.userKey,r.apiKey,i),this.fullPersistenceKey=OP("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dN(this.auth,{idToken:e}).catch(()=>{});return n?nc._fromGetAccountInfoResponse(this.auth,n,e):null}return nc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ab(sf(xS),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||sf(xS);const o=OP(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await dN(e,{idToken:h}).catch(()=>{});if(!p)break;d=await nc._fromGetAccountInfoResponse(e,p,h)}else d=nc._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ab(i,e,s):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ab(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zX(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tde(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wde(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ide(e))return"Blackberry";if(Sde(e))return"Webos";if(bde(e))return"Safari";if((e.includes("chrome/")||Ede(e))&&!e.includes("edge/"))return"Chrome";if(Cde(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function wde(t=Vo()){return/firefox\//i.test(t)}function bde(t=Vo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ede(t=Vo()){return/crios\//i.test(t)}function Tde(t=Vo()){return/iemobile/i.test(t)}function Cde(t=Vo()){return/android/i.test(t)}function Ide(t=Vo()){return/blackberry/i.test(t)}function Sde(t=Vo()){return/webos/i.test(t)}function T5(t=Vo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pVe(t=Vo()){return T5(t)&&!!window.navigator?.standalone}function gVe(){return R2e()&&document.documentMode===10}function kde(t=Vo()){return T5(t)||Cde(t)||Sde(t)||Ide(t)||/windows phone/i.test(t)||Tde(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ade(t,e=[]){let n;switch(t){case"Browser":n=zX(Vo());break;case"Worker":n=`${zX(Vo())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${n_}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mVe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _Ve(t,e={}){return xT(t,"GET","/v2/passwordPolicy",b5(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yVe=6;class vVe{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yVe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wVe{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HX(this),this.idTokenSubscription=new HX(this),this.beforeStateQueue=new mVe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pde,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sf(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ab.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dN(this,{idToken:e}),s=await nc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sl(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fN(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nVe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sl(this.app))return Promise.reject(Ky(this));const n=e?Hn(e):null;return n&&wt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sl(this.app)?Promise.reject(Ky(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sl(this.app)?Promise.reject(Ky(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _Ve(this),n=new vVe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qA("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await fVe(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sf(e)||this._popupRedirectResolver;wt(n,this,"argument-error"),this.redirectPersistenceManager=await Ab.create(this,[sf(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(wt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ade(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(sl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JFe(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yM(t){return Hn(t)}class HX{constructor(e){this.auth=e,this.observer=null,this.addObserver=q2e(n=>this.observer=n)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let C5={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bVe(t){C5=t}function EVe(t){return C5.loadJS(t)}function TVe(){return C5.gapiScript}function CVe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vM(t,e){const n=jA(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Zg(r,e??{}))return s;ed(s,"already-initialized")}return n.initialize({options:e})}function IVe(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(sf);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function wM(t,e,n){const s=yM(t);wt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Rde(e),{host:o,port:a}=SVe(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){wt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),wt(Zg(c,s.config.emulator)&&Zg(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,vd(o)?(cM(`${i}//${o}${u}`),hM("Auth",!0)):kVe()}function Rde(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SVe(t){const e=Rde(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:WX(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:WX(o)}}}function WX(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kVe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $A{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nf("not implemented")}_getIdTokenResponse(e){return nf("not implemented")}_linkToIdToken(e,n){return nf("not implemented")}_getReauthenticationResolver(e){return nf("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Rb(t,e){return oVe(t,"POST","/v1/accounts:signInWithIdp",b5(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const AVe="http://localhost";class td extends $A{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new td(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ed("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new td(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rb(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Rb(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rb(e,n)}buildRequest(){const e={requestUri:AVe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=PT(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I5{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zA extends I5{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ku extends zA{constructor(){super("facebook.com")}static credential(e){return td._fromParams({providerId:Ku.PROVIDER_ID,signInMethod:Ku.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ku.credentialFromTaggedObject(e)}static credentialFromError(e){return Ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ku.credential(e.oauthAccessToken)}catch{return null}}}Ku.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ku.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rl extends zA{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return td._fromParams({providerId:Rl.PROVIDER_ID,signInMethod:Rl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rl.credentialFromTaggedObject(e)}static credentialFromError(e){return Rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Rl.credential(n,s)}catch{return null}}}Rl.GOOGLE_SIGN_IN_METHOD="google.com";Rl.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gu extends zA{constructor(){super("github.com")}static credential(e){return td._fromParams({providerId:Gu.PROVIDER_ID,signInMethod:Gu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gu.credentialFromTaggedObject(e)}static credentialFromError(e){return Gu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gu.credential(e.oauthAccessToken)}catch{return null}}}Gu.GITHUB_SIGN_IN_METHOD="github.com";Gu.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qu extends zA{constructor(){super("twitter.com")}static credential(e,n){return td._fromParams({providerId:Qu.PROVIDER_ID,signInMethod:Qu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qu.credentialFromTaggedObject(e)}static credentialFromError(e){return Qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Qu.credential(n,s)}catch{return null}}}Qu.TWITTER_SIGN_IN_METHOD="twitter.com";Qu.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bE{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await nc._fromIdTokenResponse(e,s,r),o=KX(s);return new bE({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=KX(s);return new bE({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function KX(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pN extends wd{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,pN.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new pN(e,n,s,r)}}function Pde(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?pN._fromErrorAndOperation(t,r,e,s):r})}async function RVe(t,e,n=!1){const s=await PS(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bE._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function PVe(t,e,n=!1){const{auth:s}=t;if(sl(s.app))return Promise.reject(Ky(s));const r="reauthenticate";try{const i=await PS(t,Pde(s,r,e,t),n);wt(i.idToken,s,"internal-error");const o=E5(i.idToken);wt(o,s,"internal-error");const{sub:a}=o;return wt(t.uid===a,s,"user-mismatch"),bE._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&ed(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function xVe(t,e,n=!1){if(sl(t.app))return Promise.reject(Ky(t));const s="signIn",r=await Pde(t,s,e),i=await bE._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function bM(t,e,n,s){return Hn(t).onIdTokenChanged(e,n,s)}function EM(t,e,n){return Hn(t).beforeAuthStateChanged(e,n)}function TM(t,e,n,s){return Hn(t).onAuthStateChanged(e,n,s)}function tg(t){return Hn(t).signOut()}const gN="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xde{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gN,"1"),this.storage.removeItem(gN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NVe=1e3,DVe=10;class Nde extends xde{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kde(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);gVe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,DVe):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},NVe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nde.type="LOCAL";const CM=Nde;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dde extends xde{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Dde.type="SESSION";const HA=Dde;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OVe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IM{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new IM(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await OVe(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}IM.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function S5(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LVe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=S5("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ah(){return window}function MVe(t){Ah().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ode(){return typeof Ah().WorkerGlobalScope<"u"&&typeof Ah().importScripts=="function"}async function FVe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VVe(){return navigator?.serviceWorker?.controller||null}function UVe(){return Ode()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lde="firebaseLocalStorageDb",qVe=1,mN="firebaseLocalStorage",Mde="fbase_key";class WA{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function SM(t,e){return t.transaction([mN],e?"readwrite":"readonly").objectStore(mN)}function jVe(){const t=indexedDB.deleteDatabase(Lde);return new WA(t).toPromise()}function bq(){const t=indexedDB.open(Lde,qVe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(mN,{keyPath:Mde})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(mN)?e(s):(s.close(),await jVe(),e(await bq()))})})}async function GX(t,e,n){const s=SM(t,!0).put({[Mde]:e,value:n});return new WA(s).toPromise()}async function BVe(t,e){const n=SM(t,!1).get(e),s=await new WA(n).toPromise();return s===void 0?null:s.value}function QX(t,e){const n=SM(t,!0).delete(e);return new WA(n).toPromise()}const $Ve=800,zVe=3;class Fde{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bq(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>zVe)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ode()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IM._getInstance(UVe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FVe(),!this.activeServiceWorker)return;this.sender=new LVe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VVe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bq();return await GX(e,gN,"1"),await QX(e,gN),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>GX(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>BVe(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>QX(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=SM(r,!1).getAll();return new WA(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$Ve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fde.type="LOCAL";const kM=Fde;new BA(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vde(t,e){return e?sf(e):(wt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k5 extends $A{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rb(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rb(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rb(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HVe(t){return xVe(t.auth,new k5(t),t.bypassAuthState)}function WVe(t){const{auth:e,user:n}=t;return wt(n,e,"internal-error"),PVe(n,new k5(t),t.bypassAuthState)}async function KVe(t){const{auth:e,user:n}=t;return wt(n,e,"internal-error"),RVe(n,new k5(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ude{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HVe;case"linkViaPopup":case"linkViaRedirect":return KVe;case"reauthViaPopup":case"reauthViaRedirect":return WVe;default:ed(this.auth,"internal-error")}}resolve(e){If(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){If(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GVe=new BA(2e3,1e4);async function AM(t,e,n){if(sl(t.app))return Promise.reject(vc(t,"operation-not-supported-in-this-environment"));const s=yM(t);ZFe(t,e,I5);const r=Vde(s,n);return new Ty(s,"signInViaPopup",e,r).executeNotNull()}class Ty extends Ude{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Ty.currentPopupAction&&Ty.currentPopupAction.cancel(),Ty.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return wt(e,this.auth,"internal-error"),e}async onExecution(){If(this.filter.length===1,"Popup operations only handle one event");const e=S5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ty.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GVe.get())};e()}}Ty.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const QVe="pendingRedirect",LP=new Map;class YVe extends Ude{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=LP.get(this.auth._key());if(!e){try{const n=await XVe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}LP.set(this.auth._key(),e)}return this.bypassAuthState||LP.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XVe(t,e){const n=e4e(e),s=ZVe(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function JVe(t,e){LP.set(t._key(),e)}function ZVe(t){return sf(t._redirectPersistence)}function e4e(t){return OP(QVe,t.config.apiKey,t.name)}async function t4e(t,e,n=!1){if(sl(t.app))return Promise.reject(Ky(t));const s=yM(t),r=Vde(s,e),i=await new YVe(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const n4e=600*1e3;class s4e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r4e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qde(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vc(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n4e&&this.cachedEventUids.clear(),this.cachedEventUids.has(YX(e))}saveEventToCache(e){this.cachedEventUids.add(YX(e)),this.lastProcessedEventTime=Date.now()}}function YX(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qde({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function r4e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qde(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function i4e(t,e={}){return xT(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const o4e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a4e=/^https?/;async function l4e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i4e(t);for(const n of e)try{if(u4e(n))return}catch{}ed(t,"unauthorized-domain")}function u4e(t){const e=vq(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!a4e.test(n))return!1;if(o4e.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const c4e=new BA(3e4,6e4);function XX(){const t=Ah().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h4e(t){return new Promise((e,n)=>{function s(){XX(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XX(),n(vc(t,"network-request-failed"))},timeout:c4e.get()})}if(Ah().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ah().gapi?.load)s();else{const r=CVe("iframefcb");return Ah()[r]=()=>{gapi.load?s():n(vc(t,"network-request-failed"))},EVe(`${TVe()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw MP=null,e})}let MP=null;function d4e(t){return MP=MP||h4e(t),MP}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const f4e=new BA(5e3,15e3),p4e="__/auth/iframe",g4e="emulator/auth/iframe",m4e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_4e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y4e(t){const e=t.config;wt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?w5(e,g4e):`https://${t.config.authDomain}/${p4e}`,s={apiKey:e.apiKey,appName:t.name,v:n_},r=_4e.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${PT(s).slice(1)}`}async function v4e(t){const e=await d4e(t),n=Ah().gapi;return wt(n,t,"internal-error"),e.open({where:document.body,url:y4e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m4e,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=vc(t,"network-request-failed"),a=Ah().setTimeout(()=>{i(o)},f4e.get());function u(){Ah().clearTimeout(a),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const w4e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b4e=500,E4e=600,T4e="_blank",C4e="http://localhost";class JX{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I4e(t,e,n,s=b4e,r=E4e){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const u={...w4e,width:s.toString(),height:r.toString(),top:i,left:o},c=Vo().toLowerCase();n&&(a=Ede(c)?T4e:n),wde(c)&&(e=e||C4e,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(pVe(c)&&a!=="_self")return S4e(e||"",a),new JX(null);const d=window.open(e||"",a,h);wt(d,t,"popup-blocked");try{d.focus()}catch{}return new JX(d)}function S4e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const k4e="__/auth/handler",A4e="emulator/auth/handler",R4e=encodeURIComponent("fac");async function ZX(t,e,n,s,r,i){wt(t.config.authDomain,t,"auth-domain-config-required"),wt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:n_,eventId:r};if(e instanceof I5){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof zA){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${R4e}=${encodeURIComponent(u)}`:"";return`${P4e(t)}?${PT(a).slice(1)}${c}`}function P4e({config:t}){return t.emulator?w5(t,A4e):`https://${t.authDomain}/${k4e}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mU="webStorageSupport";class x4e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=t4e,this._overrideRedirectResult=JVe}async _openPopup(e,n,s,r){If(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ZX(e,n,s,vq(),r);return I4e(e,i,S5())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ZX(e,n,s,vq(),r);return MVe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(If(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await v4e(e),s=new s4e(e);return n.register("authEvent",r=>(wt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mU,{type:mU},s=>{const r=s?.[0]?.[mU];r!==void 0&&n(!!r),ed(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l4e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kde()||bde()||T5()}}const RM=x4e;var eJ="@firebase/auth",tJ="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N4e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D4e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O4e(t){em(new Tf("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;wt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ade(t)},c=new wVe(s,r,i,u);return IVe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),em(new Tf("auth-internal",e=>{const n=yM(e.getProvider("auth").getImmediate());return(s=>new N4e(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ll(eJ,tJ,D4e(t)),Ll(eJ,tJ,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const L4e=300,M4e=ide("authIdTokenMaxAge")||L4e;let nJ=null;const F4e=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>M4e)return;const r=n?.token;nJ!==r&&(nJ=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function PM(t=pM()){const e=jA(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vM(t,{popupRedirectResolver:RM,persistence:[kM,CM,HA]}),s=ide("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=F4e(i.toString());EM(n,o,()=>o(n.currentUser)),bM(n,a=>o(a))}}const r=sde("auth");return r&&wM(n,`http://${r}`),n}function V4e(){return document.getElementsByTagName("head")?.[0]??document}bVe({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=vc("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",V4e().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O4e("Browser");var sJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yg,jde;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function u(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(c(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=c(Math.pow(v,E)),T=T.j(E).add(c(b))):(T=T.j(y),T=T.add(c(b)))}return T}var d=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=c(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=O(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*K,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*K,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=H(y),T=H(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=c(y),b=E.j(v);k(b)||0<b.l(I);)y-=T,E=c(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,jde=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,yg=o}).apply(typeof sJ<"u"?sJ:typeof self<"u"?self:typeof window<"u"?window:{});var S1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bde,cI,$de,FP,Eq,zde,Hde,Wde;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof S1=="object"&&S1];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(l,f){if(f)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var x=l[_];if(!(x in g))break e;g=g[x]}l=l[l.length-1],_=g[l],f=f(_),f!=_&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var g=0,_=!1,x={next:function(){if(!_&&g<l.length){var D=g++;return{value:f(D,l[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(l){return l||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,x,D){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return f.prototype[x].apply(_,z)}}function k(l){const f=l.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=l[_];return g}return[]}function P(l,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const x=l.length||0,D=_.length||0;l.length=x+D;for(let z=0;z<D;z++)l[x+z]=_[z]}else l.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function q(l){return q[" "](l),l}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(l,f,g){for(const _ in l)f.call(g,l[_],_,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function v(l){const f={};for(const g in l)f[g]=l[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(g in _)l[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function S(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function E(l){a.setTimeout(()=>{throw l},0)}function b(){var l=Lt;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,l=>l.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,Lt=new K,nt=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(mt)}};var mt=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){E(g)}var f=ne;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ve=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Mt(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(H){e:{try{q(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mt.aa.h.call(this)}}w(Mt,we);var Ve={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(l,f,g,_,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=x,this.key=++Y,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function A(l){this.src=l,this.g={},this.h=0}A.prototype.add=function(l,f,g,_,x){var D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);var z=R(l,f,_,x);return-1<z?(f=l[z],g||(f.fa=!1)):(f=new G(f,this.src,D,!!_,x),f.fa=g,l.push(f)),f};function C(l,f){var g=f.type;if(g in l.g){var _=l.g[g],x=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=x)&&Array.prototype.splice.call(_,x,1),D&&(ee(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function R(l,f,g,_){for(var x=0;x<l.length;++x){var D=l[x];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return x}return-1}var N="closure_lm_"+(1e6*Math.random()|0),L={};function U(l,f,g,_,x){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(l,f[D],g,_,x);return null}return g=ie(g),l&&l[F]?l.K(f,g,c(_)?!!_.capture:!1,x):j(l,f,g,!1,_,x)}function j(l,f,g,_,x,D){if(!f)throw Error("Invalid event type");var z=c(x)?!!x.capture:!!x,de=Z(l);if(de||(l[N]=de=new A(l)),g=de.add(f,g,_,z,D),g.proxy)return g;if(_=W(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)fn||(x=z),x===void 0&&(x=!1),l.addEventListener(f.toString(),_,x);else if(l.attachEvent)l.attachEvent(Q(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function l(g){return f.call(l.src,l.listener,g)}const f=X;return l}function $(l,f,g,_,x){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(l,f[D],g,_,x);else _=c(_)?!!_.capture:!!_,g=ie(g),l&&l[F]?(l=l.i,f=String(f).toString(),f in l.g&&(D=l.g[f],g=R(D,g,_,x),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete l.g[f],l.h--)))):l&&(l=Z(l))&&(f=l.g[f.toString()],l=-1,f&&(l=R(f,g,_,x)),(g=-1<l?f[l]:null)&&B(g))}function B(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[F])C(f.i,l);else{var g=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(g,_,l.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,l),g.h==0&&(g.src=null,f[N]=null)):ee(l)}}}function Q(l){return l in L?L[l]:L[l]="on"+l}function X(l,f){if(l.da)l=!0;else{f=new Mt(f,this);var g=l.listener,_=l.ha||l.src;l.fa&&B(l),l=g.call(_,f)}return l}function Z(l){return l=l[N],l instanceof A?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(l){return typeof l=="function"?l:(l[te]||(l[te]=function(f){return l.handleEvent(f)}),l[te])}function re(){Te.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,Te),re.prototype[F]=!0,re.prototype.removeEventListener=function(l,f,g,_){$(this,l,f,g,_)};function se(l,f){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var x=f;f=new we(_,l),T(f,x)}if(x=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];x=be(z,_,!0,f)&&x}if(z=f.g=l,x=be(z,_,!0,f)&&x,x=be(z,_,!1,f)&&x,g)for(D=0;D<g.length;D++)z=f.g=g[D],x=be(z,_,!1,f)&&x}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],_=0;_<g.length;_++)ee(g[_]);delete l.g[f],l.h--}}this.F=null},re.prototype.K=function(l,f,g,_){return this.i.add(String(l),f,!1,g,_)},re.prototype.L=function(l,f,g,_){return this.i.add(String(l),f,!0,g,_)};function be(l,f,g,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var de=z.listener,Re=z.ha||z.src;z.fa&&C(l.i,z),x=de.call(Re,_)!==!1&&x}}return x&&!_.defaultPrevented}function Ae(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Ue(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class tt extends Te{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(l){Te.call(this),this.h=l,this.g={}}w(Ye,Te);var ls=[];function ze(l){J(l.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},l),l.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),ze(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=a.JSON.stringify,Qn=a.JSON.parse,Fr=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function Ql(l){return l.h||(l.h=l.i())}function Yl(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bo(){we.call(this,"d")}w(Bo,we);function $o(){we.call(this,"c")}w($o,we);var Rn={},Xl=null;function Vr(){return Xl=Xl||new re}Rn.La="serverreachability";function Jl(l){we.call(this,Rn.La,l)}w(Jl,we);function Ls(l){const f=Vr();se(f,new Jl(f))}Rn.STAT_EVENT="statevent";function Zl(l,f){we.call(this,Rn.STAT_EVENT,l),this.stat=f}w(Zl,we);function Le(l){const f=Vr();se(f,new Zl(f,l))}Rn.Ma="timingevent";function eu(l,f){we.call(this,Rn.Ma,l),this.size=f}w(eu,we);function Ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function v_(l,f,g,_,x,D){l.info(function(){if(l.g)if(D)for(var z="",de=D.split("&"),Re=0;Re<de.length;Re++){var le=de[Re].split("=");if(1<le.length){var Oe=le[0];le=le[1];var Fe=Oe.split("_");z=2<=Fe.length&&Fe[1]=="type"?z+(Oe+"="+le+"&"):z+(Oe+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+f+`
`+g+`
`+z})}function w_(l,f,g,_,x,D,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+f+`
`+g+`
`+D+" "+z})}function Yn(l,f,g,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+E_(l,g)+(_?" "+_:"")})}function b_(l,f){l.info(function(){return"TIMEOUT: "+f})}Fs.prototype.info=function(){};function E_(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<x.length;z++)x[z]=""}}}}return Me(g)}catch{return f}}var Ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zo;function qr(){}w(qr,Ii),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},zo=new qr;function pn(l,f,g,_){this.j=l,this.i=f,this.l=g,this.R=_||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var su={},Ho={};function Wo(l,f,g){l.L=1,l.v=zr(Ut(f)),l.m=g,l.P=!0,ru(l,null)}function ru(l,f){l.F=Date.now(),jr(l),l.A=Ut(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),yu(g.i,"t",_),l.C=0,g=l.j.J,l.h=new nu,l.g=Mu(l.j,g?f:null,!l.m),0<l.O&&(l.M=new tt(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,_=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(ls[0]=x.toString()),x=ls);for(var D=0;D<x.length;D++){var z=U(g,x[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ls(),v_(l.i,l.u,l.A,l.l,l.R,l.m)}pn.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},pn.prototype.Y=function(l){try{if(l==this.g)e:{const Fe=qt(this.g);var f=this.g.Ba();const Zn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Fe!=4||f==7||(f==8||0>=Zn?Ls(3):Ls(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(iu(this)){var _=Iu(this.g);l="";var x=_.length,D=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Vs(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(D&&f==x-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,w_(this.i,this.u,this.A,this.l,this.R,Fe,g),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Re=this.g;if((de=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(de)){var le=de;break t}}le=null}if(g=le)Yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,g);else{this.o=!1,this.s=3,Le(12),Pn(this),Vs(this);break e}}if(this.P){g=!0;let yt;for(;!this.J&&this.C<z.length;)if(yt=T_(this,z),yt==Ho){Fe==4&&(this.s=4,Le(14),g=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==su){this.s=4,Le(15),Yn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Yn(this.i,this.l,yt,null),Go(this,yt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||z.length!=0||this.h.h||(this.s=1,Le(16),g=!1),this.o=this.o&&g,!g)Yn(this.i,this.l,z,"[Invalid Chunked Response]"),Pn(this),Vs(this);else if(0<z.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ea(Oe),Oe.M=!0,Le(11))}}else Yn(this.i,this.l,z,null),Go(this,z);Fe==4&&Pn(this),this.o&&!this.J&&(Fe==4?Nu(this.j,this):(this.o=!1,jr(this)))}else q_(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Pn(this),Vs(this)}}}catch{}finally{}};function iu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function T_(l,f){var g=l.C,_=f.indexOf(`
`,g);return _==-1?Ho:(g=Number(f.substring(g,_)),isNaN(g)?su:(_+=1,_+g>f.length?Ho:(f=f.slice(_,_+g),l.C=_+g,f)))}pn.prototype.cancel=function(){this.J=!0,Pn(this)};function jr(l){l.S=Date.now()+l.I,ou(l,l.I)}function ou(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ms(p(l.ba,l),f)}function Ko(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(b_(this.i,this.A),this.L!=2&&(Ls(),Le(17)),Pn(this),this.s=2,Vs(this)):ou(this,this.S-l)};function Vs(l){l.j.G==0||l.J||Nu(l.j,l)}function Pn(l){Ko(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ze(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Go(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Qo(g.h,l))){if(!l.K&&Qo(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Yr(g),Gr(g);else break e;Zo(g),Le(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ms(p(g.Za,g),6e3));if(1>=uu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Nn(g,11)}else if((l.K||g.g==l)&&Yr(g),!M(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let le=x[f];if(g.T=le[0],le=le[1],g.G==2)if(le[0]=="c"){g.K=le[1],g.ia=le[2];const Oe=le[3];Oe!=null&&(g.la=Oe,g.j.info("VER="+g.la));const Fe=le[4];Fe!=null&&(g.Aa=Fe,g.j.info("SVER="+g.Aa));const Zn=le[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(_=1.5*Zn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yt=l.g;if(yt){const Jr=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var D=_.h;D.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Yo(D,D.h),D.h=null))}if(_.D){const ta=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(_.ya=ta,fe(_.I,_.D,ta))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=l;if(_.qa=Lu(_,_.J?_.ia:null,_.W),z.K){cu(_.h,z);var de=z,Re=_.L;Re&&(de.I=Re),de.B&&(Ko(de),jr(de)),_.g=z}else Pu(_);0<g.i.length&&Qr(g)}else le[0]!="stop"&&le[0]!="close"||Nn(g,7);else g.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Nn(g,7):Jo(g):le[0]!="noop"&&g.l&&g.l.ta(le),g.v=0)}}Ls(4)}catch{}}var C_=class{constructor(l,f){this.g=l,this.map=f}};function au(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lu(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function uu(l){return l.h?1:l.g?l.g.size:0}function Qo(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Yo(l,f){l.g?l.g.add(f):l.h=f}function cu(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}au.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hu(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return k(l.i)}function I_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,_=0;_<g;_++)f.push(l[_]);return f}f=[],g=0;for(_ in l)f[g++]=l[_];return f}function S_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const _ in l)f[g++]=_;return f}}}function du(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=S_(l),_=I_(l),x=_.length,D=0;D<x;D++)f.call(void 0,_[D],g&&g[D],l)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k_(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),x=null;if(0<=_){var D=l[g].substring(0,_);x=l[g].substring(_+1)}else D=l[g];f(D,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function xn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof xn){this.h=l.h,Br(this,l.j),this.o=l.o,this.g=l.g,$r(this,l.s),this.l=l.l;var f=l.i,g=new js;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),pu(this,g),this.m=l.m}else l&&(f=String(l).match(fu))?(this.h=!1,Br(this,f[1]||"",!0),this.o=Us(f[2]||""),this.g=Us(f[3]||"",!0),$r(this,f[4]),this.l=Us(f[5]||"",!0),pu(this,f[6]||"",!0),this.m=Us(f[7]||"")):(this.h=!1,this.i=new js(null,this.h))}xn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qs(f,gu,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qs(f,gu,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(qs(g,g.charAt(0)=="/"?P_:R_,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",qs(g,N_)),l.join("")};function Ut(l){return new xn(l)}function Br(l,f,g){l.j=g?Us(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function $r(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function pu(l,f,g){f instanceof js?(l.i=f,D_(l.i,l.h)):(g||(f=qs(f,x_)),l.i=new js(f,l.h))}function fe(l,f,g){l.i.set(f,g)}function zr(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Us(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,A_),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function A_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gu=/[#\/\?@]/g,R_=/[#\?:]/g,P_=/[#\?]/g,x_=/[#\?@]/g,N_=/#/g;function js(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function gn(l){l.g||(l.g=new Map,l.h=0,l.i&&k_(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=js.prototype,t.add=function(l,f){gn(this),this.i=null,l=Xn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function mu(l,f){gn(l),f=Xn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function _u(l,f){return gn(l),f=Xn(l,f),l.g.has(f)}t.forEach=function(l,f){gn(this),this.g.forEach(function(g,_){g.forEach(function(x){l.call(f,x,_,this)},this)},this)},t.na=function(){gn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const x=l[_];for(let D=0;D<x.length;D++)g.push(f[_])}return g},t.V=function(l){gn(this);let f=[];if(typeof l=="string")_u(this,l)&&(f=f.concat(this.g.get(Xn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return gn(this),this.i=null,l=Xn(this,l),_u(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function yu(l,f,g){mu(l,f),0<g.length&&(l.i=null,l.g.set(Xn(l,f),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var x=D;z[_]!==""&&(x+="="+encodeURIComponent(String(z[_]))),l.push(x)}}return this.i=l.join("&")};function Xn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function D_(l,f){f&&!l.j&&(gn(l),l.i=null,l.g.forEach(function(g,_){var x=_.toLowerCase();_!=x&&(mu(this,_),yu(this,x,g))},l)),l.j=f}function O_(l,f){const g=new Fs;if(a.Image){const _=new Image;_.onload=m(mn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(mn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(mn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(mn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function L_(l,f){const g=new Fs,_=new AbortController,x=setTimeout(()=>{_.abort(),mn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(D=>{clearTimeout(x),D.ok?mn(g,"TestPingServer: ok",!0,f):mn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),mn(g,"TestPingServer: error",!1,f)})}function mn(l,f,g,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(g)}catch{}}function M_(){this.g=new Fr}function F_(l,f,g){const _=g||"";try{du(l,function(x,D){let z=x;c(x)&&(z=Me(x)),f.push(_+D+"="+encodeURIComponent(z))})}catch(x){throw f.push(_+"type="+encodeURIComponent("_badmap")),x}}function Hr(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Hr,Ii),Hr.prototype.g=function(){return new Wr(this.l,this.j)},Hr.prototype.i=function(l){return function(){return l}}({});function Wr(l,f){re.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wr,re),t=Wr.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,$s(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Bs(this):$s(this),this.readyState==3&&vu(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bs(this))},t.Qa=function(l){this.g&&(this.response=l,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$s(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function $s(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wu(l){let f="";return J(l,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Xo(l,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=wu(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):fe(l,f,g))}function Ee(l){re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ee,re);var V_=/^https?$/i,U_=["POST","PUT"];t=Ee.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zo.g(),this.v=this.o?Ql(this.o):Ql(zo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(D){bu(this,D);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)g.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U_,f,void 0))||_||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(l),this.u=!1}catch(D){bu(this,D)}};function bu(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Eu(l),Kr(l)}function Eu(l){l.A||(l.A=!0,se(l,"complete"),se(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,se(this,"complete"),se(this,"abort"),Kr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(l){if(l.h&&typeof o<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)Ae(l.Ea,0,l);else if(se(l,"readystatechange"),qt(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var x=String(l.D).match(fu)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!V_.test(x?x.toLowerCase():"")}g=_}if(g)se(l,"complete"),se(l,"success");else{l.m=6;try{var D=2<qt(l)?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.Z()+"]",Eu(l)}}finally{Kr(l)}}}}function Kr(l,f){if(l.g){Cu(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||se(l,"ready");try{g.onreadystatechange=_}catch{}}}function Cu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Qn(f)}};function Iu(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function q_(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(M(l[_]))continue;var g=S(l[_]);const x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[x]||[];f[x]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Su(l){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,l),this.cb=zs("retryDelaySeedMs",1e4,l),this.Wa=zs("forwardChannelMaxRetries",2,l),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new au(l&&l.concurrentRequestLimit),this.Da=new M_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,_){Le(0),this.W=l,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Lu(this,null,this.W),Qr(this)};function Jo(l){if(ku(l),l.G==3){var f=l.U++,g=Ut(l.I);if(fe(g,"SID",l.K),fe(g,"RID",f),fe(g,"TYPE","terminate"),Hs(l,g),f=new pn(l,l.j,f),f.L=2,f.v=zr(Ut(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Mu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),jr(f)}Ou(l)}function Gr(l){l.g&&(ea(l),l.g.cancel(),l.g=null)}function ku(l){Gr(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yr(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qr(l){if(!lu(l.h)&&!l.s){l.s=!0;var f=l.Ga;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.B=0}}function j_(l,f){return uu(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ms(p(l.Ga,l,f),Du(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new pn(this,this.j,l);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(x.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ru(this,x,f),g=Ut(this.I),fe(g,"RID",l),fe(g,"CVER",22),this.D&&fe(g,"X-HTTP-Session-Id",this.D),Hs(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(wu(D)))+"&"+f:this.m&&Xo(g,this.m,D)),Yo(this.h,x),this.Ua&&fe(g,"TYPE","init"),this.P?(fe(g,"$req",f),fe(g,"SID","null"),x.T=!0,Wo(x,g,null)):Wo(x,g,f),this.G=2}}else this.G==3&&(l?Au(this,l):this.i.length==0||lu(this.h)||Au(this))};function Au(l,f){var g;f?g=f.l:g=l.U++;const _=Ut(l.I);fe(_,"SID",l.K),fe(_,"RID",g),fe(_,"AID",l.T),Hs(l,_),l.m&&l.o&&Xo(_,l.m,l.o),g=new pn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ru(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Yo(l.h,g),Wo(g,_,f)}function Hs(l,f){l.H&&J(l.H,function(g,_){fe(f,_,g)}),l.l&&du({},function(g,_){fe(f,_,g)})}function Ru(l,f,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var x=l.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=x[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let de=!0;for(let Re=0;Re<g;Re++){let le=x[Re].g;const Oe=x[Re].map;if(le-=D,0>le)D=Math.max(0,x[Re].g-100),de=!1;else try{F_(Oe,z,"req"+le+"_")}catch{_&&_(Oe)}}if(de){_=z.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,_}function Pu(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.v=0}}function Zo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ms(p(l.Fa,l),Du(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ms(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Gr(this),xu(this))};function ea(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function xu(l){l.g=new pn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ut(l.qa);fe(f,"RID","rpc"),fe(f,"SID",l.K),fe(f,"AID",l.T),fe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(f,"TO",l.ja),fe(f,"TYPE","xmlhttp"),Hs(l,f),l.m&&l.o&&Xo(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=zr(Ut(f)),g.m=null,g.P=!0,ru(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Gr(this),Zo(this),Le(19))};function Yr(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Nu(l,f){var g=null;if(l.g==f){Yr(l),ea(l),l.g=null;var _=2}else if(Qo(l.h,f))g=f.D,cu(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;_=Vr(),se(_,new eu(_,g)),Qr(l)}else Pu(l);else if(x=f.s,x==3||x==0&&0<f.X||!(_==1&&j_(l,f)||_==2&&Zo(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:Nn(l,5);break;case 4:Nn(l,10);break;case 3:Nn(l,6);break;default:Nn(l,2)}}}function Du(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Nn(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),_=l.Xa;const x=!_;_=new xn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Br(_,"https"),zr(_),x?O_(_.toString(),g):L_(_.toString(),g)}else Le(2);l.G=0,l.l&&l.l.sa(f),Ou(l),ku(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ou(l){if(l.G=0,l.ka=[],l.l){const f=hu(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Lu(l,f,g){var _=g instanceof xn?Ut(g):new xn(g);if(_.g!="")f&&(_.g=f+"."+_.g),$r(_,_.s);else{var x=a.location;_=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var D=new xn(null);_&&Br(D,_),f&&(D.g=f),x&&$r(D,x),g&&(D.l=g),_=D}return g=l.D,f=l.ya,g&&f&&fe(_,g,f),fe(_,"VER",l.la),Hs(l,_),_}function Mu(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ee(new Hr({eb:g})):new Ee(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}t=Fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(l,f){return new We(l,f)};function We(l,f){re.call(this),this.g=new Su(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!M(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Jn(this)}w(We,re),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Jo(this.g)},We.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Me(l),l=g);f.i.push(new C_(f.Ya++,l)),f.G==3&&Qr(f)},We.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,We.aa.N.call(this)};function Vu(l){Bo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(Vu,Bo);function Uu(){$o.call(this),this.status=1}w(Uu,$o);function Jn(l){this.g=l}w(Jn,Fu),Jn.prototype.ua=function(){se(this.g,"a")},Jn.prototype.ta=function(l){se(this.g,new Vu(l))},Jn.prototype.sa=function(l){se(this.g,new Uu)},Jn.prototype.ra=function(){se(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,Wde=function(){return new Xr},Hde=function(){return Vr()},zde=Rn,Eq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,FP=Ur,tu.COMPLETE="complete",$de=tu,Yl.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",re.prototype.listen=re.prototype.K,cI=Yl,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,Bde=Ee}).apply(typeof S1<"u"?S1:typeof self<"u"?self:typeof window<"u"?window:{});const rJ="@firebase/firestore",iJ="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let mo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};mo.UNAUTHENTICATED=new mo(null),mo.GOOGLE_CREDENTIALS=new mo("google-credentials-uid"),mo.FIRST_PARTY=new mo("first-party-uid"),mo.MOCK_USER=new mo("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let NT="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const gv=new fM("@firebase/firestore");function Gw(){return gv.logLevel}function Pe(t,...e){if(gv.logLevel<=Wt.DEBUG){const n=e.map(A5);gv.debug(`Firestore (${NT}): ${t}`,...n)}}function Sf(t,...e){if(gv.logLevel<=Wt.ERROR){const n=e.map(A5);gv.error(`Firestore (${NT}): ${t}`,...n)}}function EE(t,...e){if(gv.logLevel<=Wt.WARN){const n=e.map(A5);gv.warn(`Firestore (${NT}): ${t}`,...n)}}function A5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lt(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Kde(t,s,n)}function Kde(t,e,n){let s=`FIRESTORE (${NT}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Sf(s),new Error(s)}function jn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Kde(e,r,s)}function xt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends wd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vg{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Gde{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U4e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mo.UNAUTHENTICATED))}shutdown(){}}class q4e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j4e{constructor(e){this.t=e,this.currentUser=mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jn(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new vg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vg,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vg)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(jn(typeof s.accessToken=="string",31837,{l:s}),new Gde(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jn(e===null||typeof e=="string",2055,{h:e}),new mo(e)}}class B4e{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=mo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $4e{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new B4e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z4e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jn(this.o===void 0,3512);const s=i=>{i.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oJ(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(jn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oJ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function H4e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class R5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=H4e(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function tn(t,e){return t<e?-1:t>e?1:0}function Tq(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return _U(r)===_U(i)?tn(r,i):_U(r)?1:-1}return tn(t.length,e.length)}const W4e=55296,K4e=57343;function _U(t){const e=t.charCodeAt(0);return e>=W4e&&e<=K4e}function TE(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aJ="__name__";class dh{constructor(e,n,s){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&lt(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return dh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dh?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=dh.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return tn(e.length,n.length)}static compareSegments(e,n){const s=dh.isNumericId(e),r=dh.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?dh.extractNumericId(e).compare(dh.extractNumericId(n)):Tq(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yg.fromString(e.substring(4,e.length-2))}}let si=class VP extends dh{construct(e,n,s){return new VP(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new qe(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new VP(n)}static emptyPath(){return new VP([])}};const G4e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let wc=class Qw extends dh{construct(e,n,s){return new Qw(e,n,s)}static isValidIdentifier(e){return G4e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qw.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aJ}static keyField(){return new Qw([aJ])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new qe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new qe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new qe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new qe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qw(n)}static emptyPath(){return new Qw([])}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(si.fromString(e))}static fromName(e){return new Xe(si.fromString(e).popFirst(5))}static empty(){return new Xe(si.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&si.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return si.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new si(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q4e(t,e,n){if(!n)throw new qe(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Y4e(t,e,n,s){if(e===!0&&s===!0)throw new qe(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lJ(t){if(!Xe.isDocumentKey(t))throw new qe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qde(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function P5(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt(12329,{type:typeof t})}function bc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=P5(t);throw new qe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tr(t,e){const n={typeString:t};return e&&(n.value=e),n}function KA(t,e){if(!Qde(t))throw new qe(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new qe(pe.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uJ=-62135596800,cJ=1e6;let Bi=class oy{static now(){return oy.fromMillis(Date.now())}static fromDate(e){return oy.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*cJ);return new oy(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uJ)throw new qe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cJ}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:oy._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(KA(e,oy._jsonSchema))return new oy(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uJ;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Bi._jsonSchemaVersion="firestore/timestamp/1.0",Bi._jsonSchema={type:Tr("string",Bi._jsonSchemaVersion),seconds:Tr("number"),nanoseconds:Tr("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new Bi(0,0))}static max(){return new It(new Bi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NS=-1;function X4e(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=It.fromTimestamp(s===1e9?new Bi(n+1,0):new Bi(n,s));return new tm(r,Xe.empty(),e)}function J4e(t){return new tm(t.readTime,t.key,NS)}class tm{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new tm(It.min(),Xe.empty(),NS)}static max(){return new tm(It.max(),Xe.empty(),NS)}}function Z4e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Xe.comparator(t.documentKey,e.documentKey),n!==0?n:tn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eUe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tUe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function DT(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==eUe)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ye=class Oa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Oa((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Oa?n:Oa.resolve(n)}catch(n){return Oa.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Oa.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Oa.reject(n)}static resolve(e){return new Oa((n,s)=>{n(e)})}static reject(e){return new Oa((n,s)=>{s(e)})}static waitFor(e){return new Oa((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=Oa.resolve(!1);for(const s of e)n=n.next(r=>r?Oa.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new Oa((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new Oa((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}};function nUe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function OT(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xM{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xM.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const x5=-1;function NM(t){return t==null}function _N(t){return t===0&&1/t==-1/0}function sUe(t){return typeof t=="number"&&Number.isInteger(t)&&!_N(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yde="";function rUe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hJ(e)),e=iUe(t.get(n),e);return hJ(e)}function iUe(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Yde:n+="";break;default:n+=i}}return n}function hJ(t){return t+Yde+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dJ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function s_(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xde(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let xr=class Cq{constructor(e,n){this.comparator=e,this.root=n||wg.EMPTY}insert(e,n){return new Cq(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wg.BLACK,null,null))}remove(e){return new Cq(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wg.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new k1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new k1(this.root,e,this.comparator,!1)}getReverseIterator(){return new k1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new k1(this.root,e,this.comparator,!0)}},k1=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},wg=class Ld{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Ld.RED,this.left=r??Ld.EMPTY,this.right=i??Ld.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Ld(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ld.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ld.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ld.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ld.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}};wg.EMPTY=null,wg.RED=!0,wg.BLACK=!1;wg.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new wg(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Fo=class Iq{constructor(e){this.comparator=e,this.data=new xr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fJ(this.data.getIterator())}getIteratorFrom(e){return new fJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Iq)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Iq(this.comparator);return n.data=e,n}};class fJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ch=class Sq{constructor(e){this.fields=e,e.sort(wc.comparator)}static empty(){return new Sq([])}unionWith(e){let n=new Fo(wc.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Sq(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return TE(this.fields,e.fields,(n,s)=>n.isEqual(s))}};/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jde extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Jde("Invalid base64 string: "+r):r}}(e);return new Zi(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Zi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const oUe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nm(t){if(jn(!!t,39018),typeof t=="string"){let e=0;const n=oUe.exec(t);if(jn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gr(t.seconds),nanos:gr(t.nanos)}}function gr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sm(t){return typeof t=="string"?Zi.fromBase64String(t):Zi.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zde="server_timestamp",efe="__type__",tfe="__previous_value__",nfe="__local_write_time__";function N5(t){return(t?.mapValue?.fields||{})[efe]?.stringValue===Zde}function DM(t){const e=t.mapValue.fields[tfe];return N5(e)?DM(e):e}function DS(t){const e=nm(t.mapValue.fields[nfe].timestampValue);return new Bi(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aUe{constructor(e,n,s,r,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const yN="(default)";class OS{constructor(e,n){this.projectId=e,this.database=n||yN}static empty(){return new OS("","")}get isDefaultDatabase(){return this.database===yN}isEqual(e){return e instanceof OS&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sfe="__type__",lUe="__max__",A1={mapValue:{}},rfe="__vector__",vN="value";function rm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?N5(t)?4:cUe(t)?9007199254740991:uUe(t)?10:11:lt(28295,{value:t})}function nd(t,e){if(t===e)return!0;const n=rm(t);if(n!==rm(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return DS(t).isEqual(DS(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=nm(s.timestampValue),o=nm(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return sm(s.bytesValue).isEqual(sm(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return gr(s.geoPointValue.latitude)===gr(r.geoPointValue.latitude)&&gr(s.geoPointValue.longitude)===gr(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return gr(s.integerValue)===gr(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=gr(s.doubleValue),o=gr(r.doubleValue);return i===o?_N(i)===_N(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return TE(t.arrayValue.values||[],e.arrayValue.values||[],nd);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(dJ(i)!==dJ(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!nd(i[a],o[a])))return!1;return!0}(t,e);default:return lt(52216,{left:t})}}function LS(t,e){return(t.values||[]).find(n=>nd(n,e))!==void 0}function CE(t,e){if(t===e)return 0;const n=rm(t),s=rm(e);if(n!==s)return tn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return tn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=gr(r.integerValue||r.doubleValue),a=gr(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return pJ(t.timestampValue,e.timestampValue);case 4:return pJ(DS(t),DS(e));case 5:return Tq(t.stringValue,e.stringValue);case 6:return function(r,i){const o=sm(r),a=sm(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=tn(o[u],a[u]);if(c!==0)return c}return tn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=tn(gr(r.latitude),gr(i.latitude));return o!==0?o:tn(gr(r.longitude),gr(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gJ(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},u=o[vN]?.arrayValue,c=a[vN]?.arrayValue,h=tn(u?.values?.length||0,c?.values?.length||0);return h!==0?h:gJ(u,c)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===A1.mapValue&&i===A1.mapValue)return 0;if(r===A1.mapValue)return 1;if(i===A1.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const d=Tq(a[h],c[h]);if(d!==0)return d;const p=CE(o[a[h]],u[c[h]]);if(p!==0)return p}return tn(a.length,c.length)}(t.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function pJ(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tn(t,e);const n=nm(t),s=nm(e),r=tn(n.seconds,s.seconds);return r!==0?r:tn(n.nanos,s.nanos)}function gJ(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=CE(n[r],s[r]);if(i)return i}return tn(n.length,s.length)}function IE(t){return kq(t)}function kq(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=nm(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return sm(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return Xe.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=kq(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${kq(e.fields[i])}`;return s+"}"}(t.mapValue):lt(61005,{value:t})}function UP(t){switch(rm(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=DM(t);return e?16+UP(e):16;case 5:return 2*t.stringValue.length;case 6:return sm(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+UP(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return s_(n.fields,(r,i)=>{s+=r.length+UP(i)}),s}(t.mapValue);default:throw lt(13486,{value:t})}}function Aq(t){return!!t&&"integerValue"in t}function D5(t){return!!t&&"arrayValue"in t}function mJ(t){return!!t&&"nullValue"in t}function _J(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qP(t){return!!t&&"mapValue"in t}function uUe(t){return(t?.mapValue?.fields||{})[sfe]?.stringValue===rfe}function GI(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return s_(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=GI(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=GI(t.arrayValue.values[n]);return e}return{...t}}function cUe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lUe}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Yu=class Rq{constructor(e){this.value=e}static empty(){return new Rq({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!qP(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=GI(n)}setAll(e){let n=wc.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=GI(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());qP(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nd(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];qP(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){s_(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Rq(GI(this.value))}};function ife(t){const e=[];return s_(t.fields,(n,s)=>{const r=new wc([n]);if(qP(s)){const i=ife(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Ch(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bo{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bo(e,0,It.min(),It.min(),It.min(),Yu.empty(),0)}static newFoundDocument(e,n,s,r){return new bo(e,1,n,It.min(),s,r,0)}static newNoDocument(e,n){return new bo(e,2,n,It.min(),It.min(),Yu.empty(),0)}static newUnknownDocument(e,n){return new bo(e,3,n,It.min(),It.min(),Yu.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wN{constructor(e,n){this.position=e,this.inclusive=n}}function yJ(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Xe.comparator(Xe.fromName(o.referenceValue),n.key):s=CE(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function vJ(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nd(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bN{constructor(e,n="asc"){this.field=e,this.dir=n}}function hUe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ofe{}class oi extends ofe{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new fUe(e,n,s):n==="array-contains"?new mUe(e,s):n==="in"?new _Ue(e,s):n==="not-in"?new yUe(e,s):n==="array-contains-any"?new vUe(e,s):new oi(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new pUe(e,s):new gUe(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(CE(n,this.value)):n!==null&&rm(this.value)===rm(n)&&this.matchesComparison(CE(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sd extends ofe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sd(e,n)}matches(e){return afe(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function afe(t){return t.op==="and"}function lfe(t){return dUe(t)&&afe(t)}function dUe(t){for(const e of t.filters)if(e instanceof sd)return!1;return!0}function Pq(t){if(t instanceof oi)return t.field.canonicalString()+t.op.toString()+IE(t.value);if(lfe(t))return t.filters.map(e=>Pq(e)).join(",");{const e=t.filters.map(n=>Pq(n)).join(",");return`${t.op}(${e})`}}function ufe(t,e){return t instanceof oi?function(n,s){return s instanceof oi&&n.op===s.op&&n.field.isEqual(s.field)&&nd(n.value,s.value)}(t,e):t instanceof sd?function(n,s){return s instanceof sd&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&ufe(i,s.filters[o]),!0):!1}(t,e):void lt(19439)}function cfe(t){return t instanceof oi?function(e){return`${e.field.canonicalString()} ${e.op} ${IE(e.value)}`}(t):t instanceof sd?function(e){return e.op.toString()+" {"+e.getFilters().map(cfe).join(" ,")+"}"}(t):"Filter"}class fUe extends oi{constructor(e,n,s){super(e,n,s),this.key=Xe.fromName(s.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class pUe extends oi{constructor(e,n){super(e,"in",n),this.keys=hfe("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gUe extends oi{constructor(e,n){super(e,"not-in",n),this.keys=hfe("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hfe(t,e){return(e.arrayValue?.values||[]).map(n=>Xe.fromName(n.referenceValue))}class mUe extends oi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return D5(n)&&LS(n.arrayValue,this.value)}}class _Ue extends oi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&LS(this.value.arrayValue,n)}}class yUe extends oi{constructor(e,n){super(e,"not-in",n)}matches(e){if(LS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!LS(this.value.arrayValue,n)}}class vUe extends oi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!D5(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>LS(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wUe{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function wJ(t,e=null,n=[],s=[],r=null,i=null,o=null){return new wUe(t,e,n,s,r,i,o)}function O5(t){const e=xt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Pq(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),NM(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>IE(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>IE(s)).join(",")),e.Te=n}return e.Te}function L5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hUe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ufe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vJ(t.startAt,e.startAt)&&vJ(t.endAt,e.endAt)}function xq(t){return Xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OM{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bUe(t,e,n,s,r,i,o,a){return new OM(t,e,n,s,r,i,o,a)}function LM(t){return new OM(t)}function bJ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EUe(t){return t.collectionGroup!==null}function QI(t){const e=xt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new Fo(wc.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new bN(r,s))}),n.has(wc.keyField().canonicalString())||e.Ie.push(new bN(wc.keyField(),s))}return e.Ie}function Rh(t){const e=xt(t);return e.Ee||(e.Ee=TUe(e,QI(t))),e.Ee}function TUe(t,e){if(t.limitType==="F")return wJ(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new bN(r.field,i)});const n=t.endAt?new wN(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new wN(t.startAt.position,t.startAt.inclusive):null;return wJ(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Nq(t,e,n){return new OM(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function MM(t,e){return L5(Rh(t),Rh(e))&&t.limitType===e.limitType}function dfe(t){return`${O5(Rh(t))}|lt:${t.limitType}`}function Yw(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>cfe(s)).join(", ")}]`),NM(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>IE(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>IE(s)).join(",")),`Target(${n})`}(Rh(t))}; limitType=${t.limitType})`}function FM(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Xe.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of QI(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=yJ(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,QI(n),s)||n.endAt&&!function(r,i,o){const a=yJ(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,QI(n),s))}(t,e)}function CUe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ffe(t){return(e,n)=>{let s=!1;for(const r of QI(t)){const i=IUe(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function IUe(t,e,n){const s=t.field.isKeyField()?Xe.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),u=o.data.field(r);return a!==null&&u!==null?CE(a,u):lt(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return lt(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nw{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){s_(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Xde(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SUe=new xr(Xe.comparator);function kf(){return SUe}const pfe=new xr(Xe.comparator);function hI(...t){let e=pfe;for(const n of t)e=e.insert(n.key,n);return e}function gfe(t){let e=pfe;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Cy(){return YI()}function mfe(){return YI()}function YI(){return new nw(t=>t.toString(),(t,e)=>t.isEqual(e))}const kUe=new xr(Xe.comparator),AUe=new Fo(Xe.comparator);function on(...t){let e=AUe;for(const n of t)e=e.add(n);return e}const RUe=new Fo(tn);function PUe(){return RUe}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_N(e)?"-0":e}}function _fe(t){return{integerValue:""+t}}function xUe(t,e){return sUe(e)?_fe(e):M5(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VM{constructor(){this._=void 0}}function NUe(t,e,n){return t instanceof MS?function(s,r){const i={fields:{[efe]:{stringValue:Zde},[nfe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&N5(r)&&(r=DM(r)),r&&(i.fields[tfe]=r),{mapValue:i}}(n,e):t instanceof FS?vfe(t,e):t instanceof VS?wfe(t,e):function(s,r){const i=yfe(s,r),o=EJ(i)+EJ(s.Ae);return Aq(i)&&Aq(s.Ae)?_fe(o):M5(s.serializer,o)}(t,e)}function DUe(t,e,n){return t instanceof FS?vfe(t,e):t instanceof VS?wfe(t,e):n}function yfe(t,e){return t instanceof EN?function(n){return Aq(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class MS extends VM{}class FS extends VM{constructor(e){super(),this.elements=e}}function vfe(t,e){const n=bfe(e);for(const s of t.elements)n.some(r=>nd(r,s))||n.push(s);return{arrayValue:{values:n}}}class VS extends VM{constructor(e){super(),this.elements=e}}function wfe(t,e){let n=bfe(e);for(const s of t.elements)n=n.filter(r=>!nd(r,s));return{arrayValue:{values:n}}}class EN extends VM{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function EJ(t){return gr(t.integerValue||t.doubleValue)}function bfe(t){return D5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class OUe{constructor(e,n){this.field=e,this.transform=n}}function LUe(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof FS&&s instanceof FS||n instanceof VS&&s instanceof VS?TE(n.elements,s.elements,nd):n instanceof EN&&s instanceof EN?nd(n.Ae,s.Ae):n instanceof MS&&s instanceof MS}(t.transform,e.transform)}class MUe{constructor(e,n){this.version=e,this.transformResults=n}}class Ec{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ec}static exists(e){return new Ec(void 0,e)}static updateTime(e){return new Ec(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jP(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class UM{}function Efe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new F5(t.key,Ec.none()):new GA(t.key,t.data,Ec.none());{const n=t.data,s=Yu.empty();let r=new Fo(wc.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new r_(t.key,s,new Ch(r.toArray()),Ec.none())}}function FUe(t,e,n){t instanceof GA?function(s,r,i){const o=s.value.clone(),a=CJ(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof r_?function(s,r,i){if(!jP(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=CJ(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Tfe(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function XI(t,e,n,s){return t instanceof GA?function(r,i,o,a){if(!jP(r.precondition,i))return o;const u=r.value.clone(),c=IJ(r.fieldTransforms,a,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof r_?function(r,i,o,a){if(!jP(r.precondition,i))return o;const u=IJ(r.fieldTransforms,a,i),c=i.data;return c.setAll(Tfe(r)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return jP(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function VUe(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=yfe(s.transform,r||null);i!=null&&(n===null&&(n=Yu.empty()),n.set(s.field,i))}return n||null}function TJ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&TE(n,s,(r,i)=>LUe(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class GA extends UM{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class r_ extends UM{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Tfe(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function CJ(t,e,n){const s=new Map;jn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,DUe(o,a,n[r]))}return s}function IJ(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,NUe(i,o,e))}return s}class F5 extends UM{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UUe extends UM{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qUe{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&FUe(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=XI(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=XI(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=mfe();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const u=Efe(o,a);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(It.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),on())}isEqual(e){return this.batchId===e.batchId&&TE(this.mutations,e.mutations,(n,s)=>TJ(n,s))&&TE(this.baseMutations,e.baseMutations,(n,s)=>TJ(n,s))}}class V5{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){jn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return kUe}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new V5(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jUe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BUe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vr,yn;function $Ue(t){switch(t){case pe.OK:return lt(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return lt(15467,{code:t})}}function Cfe(t){if(t===void 0)return Sf("GRPC error has no .code"),pe.UNKNOWN;switch(t){case vr.OK:return pe.OK;case vr.CANCELLED:return pe.CANCELLED;case vr.UNKNOWN:return pe.UNKNOWN;case vr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case vr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case vr.INTERNAL:return pe.INTERNAL;case vr.UNAVAILABLE:return pe.UNAVAILABLE;case vr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case vr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case vr.NOT_FOUND:return pe.NOT_FOUND;case vr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case vr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case vr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case vr.ABORTED:return pe.ABORTED;case vr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case vr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case vr.DATA_LOSS:return pe.DATA_LOSS;default:return lt(39323,{code:t})}}(yn=vr||(vr={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zUe(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HUe=new yg([4294967295,4294967295],0);function SJ(t){const e=zUe().encode(t),n=new jde;return n.update(e),new Uint8Array(n.digest())}function kJ(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new yg([n,s],0),new yg([r,i],0)]}class U5{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new dI(`Invalid padding: ${n}`);if(s<0)throw new dI(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new dI(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new dI(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yg.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(yg.fromNumber(s)));return r.compare(HUe)===1&&(r=new yg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=SJ(e),[s,r]=kJ(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new U5(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=SJ(e),[s,r]=kJ(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class dI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qM{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,QA.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new qM(It.min(),r,new xr(tn),kf(),on())}}class QA{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new QA(s,n,on(),on(),on())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BP{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Ife{constructor(e,n){this.targetId=e,this.Ce=n}}class Sfe{constructor(e,n,s=Zi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class AJ{constructor(){this.ve=0,this.Fe=RJ(),this.Me=Zi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=on(),n=on(),s=on();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:lt(38017,{changeType:i})}}),new QA(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=RJ()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WUe{constructor(e){this.Ge=e,this.ze=new Map,this.je=kf(),this.Je=R1(),this.He=R1(),this.Ye=new xr(tn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(xq(i))if(s===0){const o=new Xe(i.path);this.et(n,o,bo.newNoDocument(o,It.min()))}else jn(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=sm(s).toUint8Array()}catch(u){if(u instanceof Jde)return EE("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new U5(o,r,i)}catch(u){return EE(u instanceof dI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&xq(a.target)){const u=new Xe(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,bo.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=on();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new qM(e,n,this.Ye,this.je,s);return this.je=kf(),this.Je=R1(),this.He=R1(),this.Ye=new xr(tn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new AJ,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fo(tn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fo(tn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AJ),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function R1(){return new xr(Xe.comparator)}function RJ(){return new xr(Xe.comparator)}const KUe={asc:"ASCENDING",desc:"DESCENDING"},GUe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QUe={and:"AND",or:"OR"};class YUe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dq(t,e){return t.useProto3Json||NM(e)?e:{value:e}}function TN(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kfe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function XUe(t,e){return TN(t,e.toTimestamp())}function Ph(t){return jn(!!t,49232),It.fromTimestamp(function(e){const n=nm(e);return new Bi(n.seconds,n.nanos)}(t))}function q5(t,e){return Oq(t,e).canonicalString()}function Oq(t,e){const n=function(s){return new si(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Afe(t){const e=si.fromString(t);return jn(Dfe(e),10190,{key:e.toString()}),e}function Lq(t,e){return q5(t.databaseId,e.path)}function yU(t,e){const n=Afe(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xe(Pfe(n))}function Rfe(t,e){return q5(t.databaseId,e)}function JUe(t){const e=Afe(t);return e.length===4?si.emptyPath():Pfe(e)}function Mq(t){return new si(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pfe(t){return jn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function PJ(t,e,n){return{name:Lq(t,e),fields:n.value.mapValue.fields}}function ZUe(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:lt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,c){return u.useProto3Json?(jn(c===void 0||typeof c=="string",58123),Zi.fromBase64String(c||"")):(jn(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Zi.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?pe.UNKNOWN:Cfe(u.code);return new qe(c,u.message||"")}(o);n=new Sfe(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=yU(t,s.document.name),i=Ph(s.document.updateTime),o=s.document.createTime?Ph(s.document.createTime):It.min(),a=new Yu({mapValue:{fields:s.document.fields}}),u=bo.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new BP(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=yU(t,s.document),i=s.readTime?Ph(s.readTime):It.min(),o=bo.newNoDocument(r,i),a=s.removedTargetIds||[];n=new BP([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=yU(t,s.document),i=s.removedTargetIds||[];n=new BP([],i,r,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new BUe(r,i),a=s.targetId;n=new Ife(a,o)}}return n}function e6e(t,e){let n;if(e instanceof GA)n={update:PJ(t,e.key,e.value)};else if(e instanceof F5)n={delete:Lq(t,e.key)};else if(e instanceof r_)n={update:PJ(t,e.key,e.data),updateMask:u6e(e.fieldMask)};else{if(!(e instanceof UUe))return lt(16599,{Vt:e.type});n={verify:Lq(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof MS)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof FS)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof VS)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof EN)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw lt(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:XUe(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:lt(27497)}(t,e.precondition)),n}function t6e(t,e){return t&&t.length>0?(jn(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Ph(s.updateTime):Ph(r);return i.isEqual(It.min())&&(i=Ph(r)),new MUe(i,s.transformResults||[])}(n,e))):[]}function n6e(t,e){return{documents:[Rfe(t,e.path)]}}function s6e(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Rfe(t,r);const i=function(u){if(u.length!==0)return Nfe(sd.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:Xw(h.field),direction:o6e(h.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dq(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function r6e(t){let e=JUe(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){jn(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=xfe(h);return d instanceof sd&&lfe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new bN(Jw(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,NM(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new wN(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new wN(p,d)}(n.endAt)),bUe(e,r,o,i,a,"F",u,c)}function i6e(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xfe(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Jw(e.unaryFilter.field);return oi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Jw(e.unaryFilter.field);return oi.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Jw(e.unaryFilter.field);return oi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jw(e.unaryFilter.field);return oi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(t):t.fieldFilter!==void 0?function(e){return oi.create(Jw(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return sd.create(e.compositeFilter.filters.map(n=>xfe(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(e.compositeFilter.op))}(t):lt(30097,{filter:t})}function o6e(t){return KUe[t]}function a6e(t){return GUe[t]}function l6e(t){return QUe[t]}function Xw(t){return{fieldPath:t.canonicalString()}}function Jw(t){return wc.fromServerFormat(t.fieldPath)}function Nfe(t){return t instanceof oi?function(e){if(e.op==="=="){if(_J(e.value))return{unaryFilter:{field:Xw(e.field),op:"IS_NAN"}};if(mJ(e.value))return{unaryFilter:{field:Xw(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(_J(e.value))return{unaryFilter:{field:Xw(e.field),op:"IS_NOT_NAN"}};if(mJ(e.value))return{unaryFilter:{field:Xw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xw(e.field),op:a6e(e.op),value:e.value}}}(t):t instanceof sd?function(e){const n=e.getFilters().map(s=>Nfe(s));return n.length===1?n[0]:{compositeFilter:{op:l6e(e.op),filters:n}}}(t):lt(54877,{filter:t})}function u6e(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dfe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ug{constructor(e,n,s,r,i=It.min(),o=It.min(),a=Zi.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ug(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ug(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ug(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ug(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c6e{constructor(e){this.yt=e}}function h6e(t){const e=r6e({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nq(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class d6e{constructor(){this.Cn=new f6e}addToCollectionParentIndex(e,n){return this.Cn.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(tm.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(tm.min())}updateCollectionGroup(e,n,s){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class f6e{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Fo(si.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Fo(si.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xJ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ofe=41943040;let lh=class $P{static withCacheSize(e){return new $P(e,$P.DEFAULT_COLLECTION_PERCENTILE,$P.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/lh.DEFAULT_COLLECTION_PERCENTILE=10,lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lh.DEFAULT=new lh(Ofe,lh.DEFAULT_COLLECTION_PERCENTILE,lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lh.DISABLED=new lh(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SE{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new SE(0)}static cr(){return new SE(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const NJ="LruGarbageCollector",p6e=1048576;function DJ([t,e],[n,s]){const r=tn(t,n);return r===0?tn(e,s):r}class g6e{constructor(e){this.Ir=e,this.buffer=new Fo(DJ),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();DJ(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class m6e{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(NJ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){OT(n)?Pe(NJ,"Ignoring IndexedDB error during garbage collection: ",n):await DT(n)}await this.Vr(3e5)})}}class _6e{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ye.resolve(xM.ce);const s=new g6e(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(xJ)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xJ):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(c=Date.now(),Gw()<=Wt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function y6e(t,e){return new _6e(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class v6e{constructor(){this.changes=new nw(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bo.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ye.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class w6e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class b6e{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&XI(s.mutation,r,Ch.empty(),Bi.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,on()).next(()=>s))}getLocalViewOfDocuments(e,n,s=on()){const r=Cy();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=hI();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Cy();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,on()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=kf();const o=YI(),a=function(){return YI()}();return n.forEach((u,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof r_)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),XI(h.mutation,c,h.mutation.getFieldMask(),Bi.now())):o.set(c.key,Ch.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new w6e(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const s=YI();let r=new xr((o,a)=>o-a),i=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=s.get(u)||Ch.empty();h=a.applyToLocalView(c,h),s.set(u,h);const d=(r.get(a.batchId)||on()).add(u);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=mfe();h.forEach(p=>{if(!i.has(p)){const m=Efe(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ye.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return Xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EUe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ye.resolve(Cy());let a=NS,u=i;return o.next(c=>ye.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ye.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,on())).next(h=>({batchId:a,changes:gfe(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next(s=>{let r=hI();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=hI();return this.indexManager.getCollectionParents(e,i).next(a=>ye.forEach(a,u=>{const c=function(h,d){return new OM(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,bo.newInvalidDocument(h)))});let a=hI();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&XI(h.mutation,c,Ch.empty(),Bi.now()),FM(n,c)&&(a=a.insert(u,c))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E6e{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ye.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ph(s.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:h6e(s.bundledQuery),readTime:Ph(s.readTime)}}(n)),ye.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class T6e{constructor(){this.overlays=new xr(Xe.comparator),this.qr=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Cy();return ye.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ye.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ye.resolve()}getOverlaysForCollection(e,n,s){const r=Cy(),i=n.length+1,o=new Xe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return ye.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new xr((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=Cy(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Cy(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return ye.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new jUe(n,s));let i=this.qr.get(n);i===void 0&&(i=on(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class C6e{constructor(){this.sessionToken=Zi.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j5{constructor(){this.Qr=new Fo(Ri.$r),this.Ur=new Fo(Ri.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ri(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Ri(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Xe(new si([])),s=new Ri(n,e),r=new Ri(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Xe(new si([])),s=new Ri(n,e),r=new Ri(n,e+1);let i=on();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ri(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}let Ri=class{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return Xe.comparator(t.key,e.key)||tn(t.Yr,e.Yr)}static Kr(t,e){return tn(t.Yr,e.Yr)||Xe.comparator(t.key,e.key)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class I6e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fo(Ri.$r)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qUe(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Ri(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(o)}lookupMutationBatch(e,n){return ye.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ye.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?x5:this.tr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ri(n,0),r=new Ri(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ye.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Fo(tn);return n.forEach(r=>{const i=new Ri(r,0),o=new Ri(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ye.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Xe.isDocumentKey(i)||(i=i.child(""));const o=new Ri(new Xe(i),0);let a=new Fo(tn);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(u.Yr)),!0)},o),ye.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){jn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ye.forEach(n.mutations,r=>{const i=new Ri(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Ri(n,0),r=this.Zr.firstAfterOrEqual(s);return ye.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class S6e{constructor(e){this.ri=e,this.docs=function(){return new xr(Xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ye.resolve(s?s.document.mutableCopy():bo.newInvalidDocument(n))}getEntries(e,n){let s=kf();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():bo.newInvalidDocument(r))}),ye.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=kf();const o=n.path,a=new Xe(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Z4e(J4e(h),s)<=0||(r.has(h.key)||FM(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,n,s,r){lt(9500)}ii(e,n){return ye.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new k6e(this)}getSize(e){return ye.resolve(this.size)}}class k6e extends v6e{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ye.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A6e{constructor(e){this.persistence=e,this.si=new nw(n=>O5(n),L5),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new j5,this.targetCount=0,this.ai=SE.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ye.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new SE(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Pr(n),ye.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ye.waitFor(i).next(()=>r)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ye.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ye.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ye.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ye.resolve(s)}containsKey(e,n){return ye.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lfe{constructor(e,n){this.ui={},this.overlays={},this.ci=new xM(0),this.li=!1,this.li=!0,this.hi=new C6e,this.referenceDelegate=e(this),this.Pi=new A6e(this),this.indexManager=new d6e,this.remoteDocumentCache=function(s){return new S6e(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new c6e(n),this.Ii=new E6e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new T6e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new I6e(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Pe("MemoryPersistence","Starting transaction:",e);const r=new R6e(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ye.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class R6e extends tUe{constructor(e){super(),this.currentSequenceNumber=e}}class B5{constructor(e){this.persistence=e,this.Ri=new j5,this.Vi=null}static mi(e){return new B5(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ye.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.fi,s=>{const r=Xe.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,It.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ye.or([()=>ye.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class CN{constructor(e,n){this.persistence=e,this.pi=new nw(s=>rUe(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=y6e(this,n)}static mi(e,n){return new CN(e,n)}Ei(){}di(e){return ye.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ye.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ye.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,It.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ye.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ye.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=UP(e.data.value)),n}br(e,n,s){return ye.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ye.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $5{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=on(),r=on();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $5(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class P6e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class x6e{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return x2e()?8:nUe(Vo())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new P6e;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(Gw()<=Wt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Yw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ye.resolve()):(Gw()<=Wt.DEBUG&&Pe("QueryEngine","Query:",Yw(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Gw()<=Wt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Yw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rh(n))):ye.resolve())}ys(e,n){if(bJ(n))return ye.resolve(null);let s=Rh(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Nq(n,null,"F"),s=Rh(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=on(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,Nq(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,s,r){return bJ(n)||r.isEqual(It.min())?ye.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ye.resolve(null):(Gw()<=Wt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yw(n)),this.vs(e,o,n,X4e(r,NS)).next(a=>a))})}Ds(e,n){let s=new Fo(ffe(e));return n.forEach((r,i)=>{FM(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Gw()<=Wt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Yw(n)),this.ps.getDocumentsMatchingQuery(e,n,tm.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z5="LocalStore",N6e=3e8;class D6e{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new xr(tn),this.xs=new nw(i=>O5(i),L5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b6e(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function O6e(t,e,n,s){return new D6e(t,e,n,s)}async function Mfe(t,e){const n=xt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let u=on();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function L6e(t,e){const n=xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const h=u.batch,d=h.keys();let p=ye.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(a,m)).next(w=>{const k=u.docVersions.get(m);jn(k!==null,48541),w.version.compareTo(k)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=on();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Ffe(t){const e=xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function M6e(t,e){const n=xt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(Zi.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,k,P){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=N6e?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let u=kf(),c=on();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(F6e(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!s.isEqual(It.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ye.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=r,i))}function F6e(t,e,n){let s=on(),r=on();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=kf();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(It.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Pe(z5,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:r}})}function V6e(t,e){const n=xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=x5),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function U6e(t,e){const n=xt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ye.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new ug(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Fq(t,e,n){const s=xt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!OT(o))throw o;Pe(z5,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function OJ(t,e,n){const s=xt(t);let r=It.min(),i=on();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,c){const h=xt(a),d=h.xs.get(c);return d!==void 0?ye.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(s,o,Rh(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:It.min(),n?i:on())).next(a=>(q6e(s,CUe(e),a),{documents:a,Qs:i})))}function q6e(t,e,n){let s=t.Os.get(e)||It.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class LJ{constructor(){this.activeTargetIds=PUe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j6e{constructor(){this.Mo=new LJ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LJ,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class B6e{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MJ="ConnectivityMonitor";class FJ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(MJ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(MJ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let P1=null;function Vq(){return P1===null?P1=function(){return 268435456+Math.round(2147483648*Math.random())}():P1++,"0x"+P1.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vU="RestConnection",$6e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z6e{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===yN?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Vq(),a=this.zo(e,n.toUriEncodedString());Pe(vU,`Sending RPC '${e}' ${o}:`,a,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:c}=new URL(a),h=vd(c);return this.Jo(e,a,u,s,h).then(d=>(Pe(vU,`Received RPC '${e}' ${o}: `,d),d),d=>{throw EE(vU,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+NT}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=$6e[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class H6e{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const so="WebChannelConnection";class W6e extends z6e{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Vq();return new Promise((a,u)=>{const c=new Bde;c.setWithCredentials(!0),c.listenOnce($de.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case FP.NO_ERROR:const d=c.getResponseJson();Pe(so,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case FP.TIMEOUT:Pe(so,`RPC '${e}' ${o} timed out`),u(new qe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case FP.HTTP_ERROR:const p=c.getStatus();if(Pe(so,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(O)>=0?O:pe.UNKNOWN}(w.status);u(new qe(k,w.message))}else u(new qe(pe.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new qe(pe.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Pe(so,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Pe(so,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}T_(e,n,s){const r=Vq(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wde(),a=Hde(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");Pe(so,`Creating RPC '${e}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);this.I_(d);let p=!1,m=!1;const w=new H6e({Yo:P=>{m?Pe(so,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Pe(so,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Pe(so,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,cI.EventType.OPEN,()=>{m||(Pe(so,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,cI.EventType.CLOSE,()=>{m||(m=!0,Pe(so,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,cI.EventType.ERROR,P=>{m||(m=!0,EE(so,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new qe(pe.UNAVAILABLE,"The operation could not be completed")))}),k(d,cI.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];jn(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){Pe(so,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(I){const v=vr[I];if(v!==void 0)return Cfe(v)}(q),J=V.message;H===void 0&&(H=pe.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new qe(H,J)),d.close()}else Pe(so,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),k(a,zde.STAT_EVENT,P=>{P.stat===Eq.PROXY?Pe(so,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===Eq.NOPROXY&&Pe(so,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function wU(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jM(t){return new YUe(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vfe{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Pe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VJ="PersistentStream";class Ufe{constructor(e,n,s,r,i,o,a,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vfe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Sf(n.toString()),Sf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new qe(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Pe(VJ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Pe(VJ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K6e extends Ufe{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZUe(this.serializer,e),s=function(r){if(!("targetChange"in r))return It.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?It.min():i.readTime?Ph(i.readTime):It.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Mq(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=xq(a)?{documents:n6e(r,a)}:{query:s6e(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=kfe(r,i.resumeToken);const u=Dq(r,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(It.min())>0){o.readTime=TN(r,i.snapshotVersion.toTimestamp());const u=Dq(r,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=i6e(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Mq(this.serializer),n.removeTarget=e,this.q_(n)}}class G6e extends Ufe{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return jn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=t6e(e.writeResults,e.commitTime),s=Ph(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Mq(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>e6e(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q6e{}class Y6e extends Q6e{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new qe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Oq(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new qe(pe.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Oq(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(pe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class X6e{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sf(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const mv="RemoteStore";class J6e{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{sw(this)&&(Pe(mv,"Restarting streams for network reachability change."),await async function(a){const u=xt(a);u.Ea.add(4),await YA(u),u.Ra.set("Unknown"),u.Ea.delete(4),await BM(u)}(this))})}),this.Ra=new X6e(s,r)}}async function BM(t){if(sw(t))for(const e of t.da)await e(!0)}async function YA(t){for(const e of t.da)await e(!1)}function qfe(t,e){const n=xt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),G5(n)?K5(n):LT(n).O_()&&W5(n,e))}function H5(t,e){const n=xt(t),s=LT(n);n.Ia.delete(e),s.O_()&&jfe(n,e),n.Ia.size===0&&(s.O_()?s.L_():sw(n)&&n.Ra.set("Unknown"))}function W5(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}LT(t).Y_(e)}function jfe(t,e){t.Va.Ue(e),LT(t).Z_(e)}function K5(t){t.Va=new WUe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),LT(t).start(),t.Ra.ua()}function G5(t){return sw(t)&&!LT(t).x_()&&t.Ia.size>0}function sw(t){return xt(t).Ea.size===0}function Bfe(t){t.Va=void 0}async function Z6e(t){t.Ra.set("Online")}async function e9e(t){t.Ia.forEach((e,n)=>{W5(t,e)})}async function t9e(t,e){Bfe(t),G5(t)?(t.Ra.ha(e),K5(t)):t.Ra.set("Unknown")}async function n9e(t,e,n){if(t.Ra.set("Online"),e instanceof Sfe&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){Pe(mv,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await IN(t,s)}else if(e instanceof BP?t.Va.Ze(e):e instanceof Ife?t.Va.st(e):t.Va.tt(e),!n.isEqual(It.min()))try{const s=await Ffe(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Ia.get(u);c&&r.Ia.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,u)=>{const c=r.Ia.get(a);if(!c)return;r.Ia.set(a,c.withResumeToken(Zi.EMPTY_BYTE_STRING,c.snapshotVersion)),jfe(r,a);const h=new ug(c.target,a,u,c.sequenceNumber);W5(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){Pe(mv,"Failed to raise snapshot:",s),await IN(t,s)}}async function IN(t,e,n){if(!OT(e))throw e;t.Ea.add(1),await YA(t),t.Ra.set("Offline"),n||(n=()=>Ffe(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Pe(mv,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await BM(t)})}function $fe(t,e){return e().catch(n=>IN(t,n,e))}async function $M(t){const e=xt(t),n=im(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:x5;for(;s9e(e);)try{const r=await V6e(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,r9e(e,r)}catch(r){await IN(e,r)}zfe(e)&&Hfe(e)}function s9e(t){return sw(t)&&t.Ta.length<10}function r9e(t,e){t.Ta.push(e);const n=im(t);n.O_()&&n.X_&&n.ea(e.mutations)}function zfe(t){return sw(t)&&!im(t).x_()&&t.Ta.length>0}function Hfe(t){im(t).start()}async function i9e(t){im(t).ra()}async function o9e(t){const e=im(t);for(const n of t.Ta)e.ea(n.mutations)}async function a9e(t,e,n){const s=t.Ta.shift(),r=V5.from(s,e,n);await $fe(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await $M(t)}async function l9e(t,e){e&&im(t).X_&&await async function(n,s){if(function(r){return $Ue(r)&&r!==pe.ABORTED}(s.code)){const r=n.Ta.shift();im(n).B_(),await $fe(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await $M(n)}}(t,e),zfe(t)&&Hfe(t)}async function UJ(t,e){const n=xt(t);n.asyncQueue.verifyOperationInProgress(),Pe(mv,"RemoteStore received new credentials");const s=sw(n);n.Ea.add(3),await YA(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await BM(n)}async function u9e(t,e){const n=xt(t);e?(n.Ea.delete(2),await BM(n)):e||(n.Ea.add(2),await YA(n),n.Ra.set("Unknown"))}function LT(t){return t.ma||(t.ma=function(e,n,s){const r=xt(e);return r.sa(),new K6e(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Z6e.bind(null,t),t_:e9e.bind(null,t),r_:t9e.bind(null,t),H_:n9e.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),G5(t)?K5(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bfe(t))})),t.ma}function im(t){return t.fa||(t.fa=function(e,n,s){const r=xt(e);return r.sa(),new G6e(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:i9e.bind(null,t),r_:l9e.bind(null,t),ta:o9e.bind(null,t),na:a9e.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $M(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(mv,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Q5{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new vg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Q5(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y5(t,e){if(Sf("AsyncQueue",`${e}: ${t}`),OT(t))return new qe(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pb{static emptySet(e){return new Pb(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Xe.comparator(n.key,s.key):(n,s)=>Xe.comparator(n.key,s.key),this.keyedMap=hI(),this.sortedSet=new xr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pb)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Pb;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qJ{constructor(){this.ga=new xr(Xe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class kE{constructor(e,n,s,r,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new kE(e,n,Pb.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&MM(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c9e{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class h9e{constructor(){this.queries=jJ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=xt(e),r=s.queries;s.queries=jJ(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new qe(pe.ABORTED,"Firestore shutting down"))}}function jJ(){return new nw(t=>dfe(t),MM)}async function Wfe(t,e){const n=xt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new c9e,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Y5(o,`Initialization of query '${Yw(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&X5(n)}async function Kfe(t,e){const n=xt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function d9e(t,e){const n=xt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&X5(n)}function f9e(t,e,n){const s=xt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function X5(t){t.Ca.forEach(e=>{e.next()})}var Uq,BJ;(BJ=Uq||(Uq={})).Ma="default",BJ.Cache="cache";class Gfe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new kE(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=kE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uq.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qfe{constructor(e){this.key=e}}class Yfe{constructor(e){this.key=e}}class p9e{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=on(),this.mutatedKeys=on(),this.eu=ffe(e),this.tu=new Pb(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new qJ,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=FM(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(u&&this.eu(m,u)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:k})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new kE(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qJ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=on(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new Yfe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new Qfe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=on();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return kE.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const J5="SyncEngine";class g9e{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class m9e{constructor(e){this.key=e,this.hu=!1}}class _9e{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new nw(a=>dfe(a),MM),this.Iu=new Map,this.Eu=new Set,this.du=new xr(Xe.comparator),this.Au=new Map,this.Ru=new j5,this.Vu={},this.mu=new Map,this.fu=SE.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y9e(t,e,n=!0){const s=npe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await Xfe(s,e,n,!0),r}async function v9e(t,e){const n=npe(t);await Xfe(n,e,!0,!1)}async function Xfe(t,e,n,s){const r=await U6e(t.localStore,Rh(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await w9e(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&qfe(t.remoteStore,r),a}async function w9e(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,k,P,O){let M=k.view.ru(P);M.Cs&&(M=await OJ(w.localStore,k.query,!1).then(({documents:J})=>k.view.ru(J,M)));const V=O&&O.targetChanges.get(k.targetId),q=O&&O.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(M,w.isPrimaryClient,V,q);return zJ(w,k.targetId,H.au),H.snapshot}(t,d,p,m);const i=await OJ(t.localStore,e,!0),o=new p9e(e,i.Qs),a=o.ru(i.documents),u=QA.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,u);zJ(t,n,c.au);const h=new g9e(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function b9e(t,e,n){const s=xt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!MM(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Fq(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&H5(s.remoteStore,r.targetId),qq(s,r.targetId)}).catch(DT)):(qq(s,r.targetId),await Fq(s.localStore,r.targetId,!0))}async function E9e(t,e){const n=xt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),H5(n.remoteStore,s.targetId))}async function T9e(t,e,n){const s=P9e(t);try{const r=await function(i,o){const a=xt(i),u=Bi.now(),c=o.reduce((p,m)=>p.add(m.key),on());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=kf(),w=on();return a.Ns.getEntries(p,c).next(k=>{m=k,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(k=>{h=k;const P=[];for(const O of o){const M=VUe(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new r_(O.key,M,ife(M.value.mapValue),Ec.exists(!0)))}return a.mutationQueue.addMutationBatch(p,u,P,o)}).next(k=>{d=k;const P=k.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,k.batchId,P)})}).then(()=>({batchId:d.batchId,changes:gfe(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let u=i.Vu[i.currentUser.toKey()];u||(u=new xr(tn)),u=u.insert(o,a),i.Vu[i.currentUser.toKey()]=u}(s,r.batchId,n),await XA(s,r.changes),await $M(s.remoteStore)}catch(r){const i=Y5(r,"Failed to persist write");n.reject(i)}}async function Jfe(t,e){const n=xt(t);try{const s=await M6e(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(jn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?jn(o.hu,14607):r.removedDocuments.size>0&&(jn(o.hu,42227),o.hu=!1))}),await XA(n,s,e)}catch(s){await DT(s)}}function $J(t,e,n){const s=xt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=xt(i);a.onlineState=o;let u=!1;a.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&X5(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function C9e(t,e,n){const s=xt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new xr(Xe.comparator);o=o.insert(i,bo.newNoDocument(i,It.min()));const a=on().add(i),u=new qM(It.min(),new Map,new xr(tn),o,a);await Jfe(s,u),s.du=s.du.remove(i),s.Au.delete(e),Z5(s)}else await Fq(s.localStore,e,!1).then(()=>qq(s,e,n)).catch(DT)}async function I9e(t,e){const n=xt(t),s=e.batch.batchId;try{const r=await L6e(n.localStore,e);epe(n,s,null),Zfe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await XA(n,r)}catch(r){await DT(r)}}async function S9e(t,e,n){const s=xt(t);try{const r=await function(i,o){const a=xt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(h=>(jn(h!==null,37113),c=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(s.localStore,e);epe(s,e,n),Zfe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await XA(s,r)}catch(r){await DT(r)}}function Zfe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function epe(t,e,n){const s=xt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function qq(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||tpe(t,s)})}function tpe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(H5(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Z5(t))}function zJ(t,e,n){for(const s of n)s instanceof Qfe?(t.Ru.addReference(s.key,e),k9e(t,s)):s instanceof Yfe?(Pe(J5,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||tpe(t,s.key)):lt(19791,{wu:s})}function k9e(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Pe(J5,"New document in limbo: "+n),t.Eu.add(s),Z5(t))}function Z5(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Xe(si.fromString(e)),s=t.fu.next();t.Au.set(s,new m9e(n)),t.du=t.du.insert(n,s),qfe(t.remoteStore,new ug(Rh(LM(n.path)),s,"TargetPurposeLimboResolution",xM.ce))}}async function XA(t,e,n){const s=xt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,u)=>{o.push(s.pu(u,e,n).then(c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(u.targetId)?.current;s.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=$5.As(u.targetId,c);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,u){const c=xt(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ye.forEach(u,d=>ye.forEach(d.Es,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>ye.forEach(d.ds,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!OT(h))throw h;Pe(z5,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);c.Ms=c.Ms.insert(d,w)}}}(s.localStore,i))}async function A9e(t,e){const n=xt(t);if(!n.currentUser.isEqual(e)){Pe(J5,"User change. New user:",e.toKey());const s=await Mfe(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new qe(pe.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await XA(n,s.Ls)}}function R9e(t,e){const n=xt(t),s=n.Au.get(e);if(s&&s.hu)return on().add(s.key);{let r=on();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function npe(t){const e=xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jfe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R9e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C9e.bind(null,e),e.Pu.H_=d9e.bind(null,e.eventManager),e.Pu.yu=f9e.bind(null,e.eventManager),e}function P9e(t){const e=xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I9e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S9e.bind(null,e),e}class SN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jM(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return O6e(this.persistence,new x6e,e.initialUser,this.serializer)}Cu(e){return new Lfe(B5.mi,this.serializer)}Du(e){return new j6e}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}SN.provider={build:()=>new SN};class x9e extends SN{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){jn(this.persistence.referenceDelegate instanceof CN,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new m6e(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?lh.withCacheSize(this.cacheSizeBytes):lh.DEFAULT;return new Lfe(s=>CN.mi(s,n),this.serializer)}}class jq{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$J(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=A9e.bind(null,this.syncEngine),await u9e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h9e}()}createDatastore(e){const n=jM(e.databaseInfo.databaseId),s=function(r){return new W6e(r)}(e.databaseInfo);return function(r,i,o,a){return new Y6e(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new J6e(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>$J(this.syncEngine,n,0),function(){return FJ.v()?new FJ:new B6e}())}createSyncEngine(e,n){return function(s,r,i,o,a,u,c){const h=new _9e(s,r,i,o,a,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=xt(e);Pe(mv,"RemoteStore shutting down."),n.Ea.add(5),await YA(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jq.provider={build:()=>new jq};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class spe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const om="FirestoreClient";class N9e{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=mo.UNAUTHENTICATED,this.clientId=R5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Pe(om,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Pe(om,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Y5(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function bU(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(om,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Mfe(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HJ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await D9e(t);Pe(om,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>UJ(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>UJ(e.remoteStore,r)),t._onlineComponents=e}async function D9e(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(om,"Using user provided OfflineComponentProvider");try{await bU(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;EE("Error using user provided cache. Falling back to memory cache: "+n),await bU(t,new SN)}}else Pe(om,"Using default OfflineComponentProvider"),await bU(t,new x9e(void 0));return t._offlineComponents}async function rpe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(om,"Using user provided OnlineComponentProvider"),await HJ(t,t._uninitializedComponentsProvider._online)):(Pe(om,"Using default OnlineComponentProvider"),await HJ(t,new jq))),t._onlineComponents}function O9e(t){return rpe(t).then(e=>e.syncEngine)}async function Bq(t){const e=await rpe(t),n=e.eventManager;return n.onListen=y9e.bind(null,e.syncEngine),n.onUnlisten=b9e.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v9e.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E9e.bind(null,e.syncEngine),n}function L9e(t,e,n={}){const s=new vg;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,u){const c=new spe({next:d=>{c.Nu(),i.enqueueAndForget(()=>Kfe(r,h));const p=d.docs.has(o);!p&&d.fromCache?u.reject(new qe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?u.reject(new qe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Gfe(LM(o.path),c,{includeMetadataChanges:!0,qa:!0});return Wfe(r,h)}(await Bq(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ipe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WJ=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ope="firestore.googleapis.com",KJ=!0;class GJ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ope,this.ssl=KJ}else this.host=e.host,this.ssl=e.ssl??KJ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ofe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p6e)throw new qe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y4e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ipe(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ez{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GJ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GJ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new U4e;switch(n.type){case"firstParty":return new $4e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=WJ.get(e);n&&(Pe("ComponentProvider","Removing Datastore"),WJ.delete(e),n.terminate())}(this),Promise.resolve()}}function M9e(t,e,n,s={}){t=bc(t,ez);const r=vd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(cM(`https://${a}`),hM("Firestore",!0)),i.host!==ope&&i.host!==a&&EE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:r,emulatorOptions:s};if(!Zg(u,o)&&(t._setSettings(u),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=mo.MOCK_USER;else{c=p5(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new qe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mo(d)}t._authCredentials=new q4e(new Gde(c,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zM{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new zM(this.firestore,e,this._query)}}let Da=class fI{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new US(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fI(this.firestore,e,this._key)}toJSON(){return{type:fI._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(KA(n,fI._jsonSchema))return new fI(e,s||null,new Xe(si.fromString(n.referencePath)))}};Da._jsonSchemaVersion="firestore/documentReference/1.0",Da._jsonSchema={type:Tr("string",Da._jsonSchemaVersion),referencePath:Tr("string")};class US extends zM{constructor(e,n,s){super(e,n,LM(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Da(this.firestore,null,new Xe(e))}withConverter(e){return new US(this.firestore,e,this._path)}}function HM(t,e,...n){if(t=Hn(t),arguments.length===1&&(e=R5.newId()),Q4e("doc","path",e),t instanceof ez){const s=si.fromString(e,...n);return lJ(s),new Da(t,null,new Xe(s))}{if(!(t instanceof Da||t instanceof US))throw new qe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(si.fromString(e,...n));return lJ(s),new Da(t.firestore,t instanceof US?t.converter:null,new Xe(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const QJ="AsyncQueue";class YJ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vfe(this,"async_queue_retry"),this._c=()=>{const s=wU();s&&Pe(QJ,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=wU();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wU();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new vg;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!OT(e))throw e;Pe(QJ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Sf("INTERNAL UNHANDLED ERROR: ",XJ(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Q5.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&lt(47125,{Pc:XJ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function XJ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JJ(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class _v extends ez{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new YJ,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YJ(e),this._firestoreClient=void 0,await e}}}function ape(t,e){const n=typeof t=="object"?t:pM(),s=typeof t=="string"?t:yN,r=jA(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=f5("firestore");i&&M9e(r,...i)}return r}function tz(t){if(t._terminated)throw new qe(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||F9e(t),t._firestoreClient}function F9e(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new aUe(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,ipe(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N9e(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(Zi.fromBase64String(e))}catch(n){throw new qe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pl(Zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(KA(e,Pl._jsonSchema))return Pl.fromBase64String(e.bytes)}}Pl._jsonSchemaVersion="firestore/bytes/1.0",Pl._jsonSchema={type:Tr("string",Pl._jsonSchemaVersion),bytes:Tr("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WM{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KM{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xh._jsonSchemaVersion}}static fromJSON(e){if(KA(e,xh._jsonSchema))return new xh(e.latitude,e.longitude)}}xh._jsonSchemaVersion="firestore/geoPoint/1.0",xh._jsonSchema={type:Tr("string",xh._jsonSchemaVersion),latitude:Tr("number"),longitude:Tr("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(KA(e,Nh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nh(e.vectorValues);throw new qe(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nh._jsonSchemaVersion="firestore/vectorValue/1.0",Nh._jsonSchema={type:Tr("string",Nh._jsonSchemaVersion),vectorValues:Tr("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const V9e=/^__.*__$/;class U9e{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new r_(e,this.data,this.fieldMask,n,this.fieldTransforms):new GA(e,this.data,n,this.fieldTransforms)}}class lpe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new r_(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function upe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:t})}}class nz{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nz({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kN(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(upe(this.Ac)&&V9e.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q9e{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||jM(e)}Cc(e,n,s,r=!1){return new nz({Ac:e,methodName:n,Dc:s,path:wc.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cpe(t){const e=t._freezeSettings(),n=jM(t._databaseId);return new q9e(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j9e(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);rz("Data must be an object, but it was:",o,s);const a=hpe(s,o);let u,c;if(i.merge)u=new Ch(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=$q(e,d,n);if(!o.contains(p))throw new qe(pe.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fpe(h,p)||h.push(p)}u=new Ch(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new U9e(new Yu(a),u,c)}class GM extends KM{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof GM}}class sz extends KM{_toFieldTransform(e){return new OUe(e.path,new MS)}isEqual(e){return e instanceof sz}}function B9e(t,e,n,s){const r=t.Cc(1,e,n);rz("Data must be an object, but it was:",r,s);const i=[],o=Yu.empty();s_(s,(u,c)=>{const h=iz(e,u,n);c=Hn(c);const d=r.yc(h);if(c instanceof GM)i.push(h);else{const p=QM(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Ch(i);return new lpe(o,a,r.fieldTransforms)}function $9e(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[$q(e,s,n)],u=[r];if(i.length%2!=0)throw new qe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push($q(e,i[p])),u.push(i[p+1]);const c=[],h=Yu.empty();for(let p=a.length-1;p>=0;--p)if(!fpe(c,a[p])){const m=a[p];let w=u[p];w=Hn(w);const k=o.yc(m);if(w instanceof GM)c.push(m);else{const P=QM(w,k);P!=null&&(c.push(m),h.set(m,P))}}const d=new Ch(c);return new lpe(h,d,o.fieldTransforms)}function QM(t,e){if(dpe(t=Hn(t)))return rz("Unsupported field value:",e,t),hpe(t,e);if(t instanceof KM)return function(n,s){if(!upe(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=QM(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Hn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xUe(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Bi.fromDate(n);return{timestampValue:TN(s.serializer,r)}}if(n instanceof Bi){const r=new Bi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:TN(s.serializer,r)}}if(n instanceof xh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pl)return{bytesValue:kfe(s.serializer,n._byteString)};if(n instanceof Da){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:q5(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Nh)return function(r,i){return{mapValue:{fields:{[sfe]:{stringValue:rfe},[vN]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return M5(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${P5(n)}`)}(t,e)}function hpe(t,e){const n={};return Xde(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):s_(t,(s,r)=>{const i=QM(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function dpe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bi||t instanceof xh||t instanceof Pl||t instanceof Da||t instanceof KM||t instanceof Nh)}function rz(t,e,n){if(!dpe(n)||!Qde(n)){const s=P5(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function $q(t,e,n){if((e=Hn(e))instanceof WM)return e._internalPath;if(typeof e=="string")return iz(t,e);throw kN("Field path arguments must be of type string or ",t,!1,void 0,n)}const z9e=new RegExp("[~\\*/\\[\\]]");function iz(t,e,n){if(e.search(z9e)>=0)throw kN(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new WM(...e.split("."))._internalPath}catch{throw kN(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kN(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new qe(pe.INVALID_ARGUMENT,a+t+u)}function fpe(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ppe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Da(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H9e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gpe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H9e extends ppe{data(){return super.data()}}function gpe(t,e){return typeof e=="string"?iz(t,e):e instanceof WM?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function W9e(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K9e{convertValue(e,n="none"){switch(rm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return s_(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[vN].arrayValue?.values?.map(s=>gr(s.doubleValue));return new Nh(n)}convertGeoPoint(e){return new xh(gr(e.latitude),gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=DM(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(DS(e));default:return null}}convertTimestamp(e){const n=nm(e);return new Bi(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=si.fromString(e);jn(Dfe(s),9688,{name:e});const r=new OS(s.get(1),s.get(3)),i=new Xe(s.popFirst(5));return r.isEqual(n)||Sf(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function G9e(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class pI{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gy extends ppe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(gpe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gy._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}Gy._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gy._jsonSchema={type:Tr("string",Gy._jsonSchemaVersion),bundleSource:Tr("string","DocumentSnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class zP extends Gy{data(e={}){return super.data(e)}}class xb{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new pI(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new zP(this._firestore,this._userDataWriter,s.key,s,new pI(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new zP(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new zP(s._firestore,s._userDataWriter,o.doc.key,o.doc,new pI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:Q9e(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xb._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=R5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Q9e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qS(t){t=bc(t,Da);const e=bc(t.firestore,_v);return L9e(tz(e),t._key).then(n=>_pe(e,t,n))}xb._jsonSchemaVersion="firestore/querySnapshot/1.0",xb._jsonSchema={type:Tr("string",xb._jsonSchemaVersion),bundleSource:Tr("string","QuerySnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class mpe extends K9e{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Da(this.firestore,null,n)}}function jS(t,e,n){t=bc(t,Da);const s=bc(t.firestore,_v),r=G9e(t.converter,e,n);return uz(s,[j9e(cpe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ec.none())])}function oz(t,e,n,...s){t=bc(t,Da);const r=bc(t.firestore,_v),i=cpe(r);let o;return o=typeof(e=Hn(e))=="string"||e instanceof WM?$9e(i,"updateDoc",t._key,e,n,s):B9e(i,"updateDoc",t._key,e),uz(r,[o.toMutation(t._key,Ec.exists(!0))])}function az(t){return uz(bc(t.firestore,_v),[new F5(t._key,Ec.none())])}function lz(t,...e){t=Hn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JJ(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(JJ(e[s])){const u=e[s];e[s]=u.next?.bind(u),e[s+1]=u.error?.bind(u),e[s+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof Da)o=bc(t.firestore,_v),a=LM(t._key.path),i={next:u=>{e[s]&&e[s](_pe(o,t,u))},error:e[s+1],complete:e[s+2]};else{const u=bc(t,zM);o=bc(u.firestore,_v),a=u._query;const c=new mpe(o);i={next:h=>{e[s]&&e[s](new xb(o,c,u,h))},error:e[s+1],complete:e[s+2]},W9e(t._query)}return function(u,c,h,d){const p=new spe(d),m=new Gfe(c,p,h);return u.asyncQueue.enqueueAndForget(async()=>Wfe(await Bq(u),m)),()=>{p.Nu(),u.asyncQueue.enqueueAndForget(async()=>Kfe(await Bq(u),m))}}(tz(o),a,r,i)}function uz(t,e){return function(n,s){const r=new vg;return n.asyncQueue.enqueueAndForget(async()=>T9e(await O9e(n),s,r)),r.promise}(tz(t),e)}function _pe(t,e,n){const s=n.docs.get(e._key),r=new mpe(t);return new Gy(t,r,e._key,s,new pI(n.hasPendingWrites,n.fromCache),e.converter)}function Nb(){return new sz("serverTimestamp")}(function(t,e=!0){(function(n){NT=n})(n_),em(new Tf("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new _v(new j4e(n.getProvider("auth-internal")),new z4e(i,n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new qe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new OS(a.options.projectId,u)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ll(rJ,iJ,t),Ll(rJ,iJ,"esm2020")})();var Y9e="firebase",X9e="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Ll(Y9e,X9e,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ype="firebasestorage.googleapis.com",vpe="storageBucket",J9e=120*1e3,Z9e=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Lr=class wpe extends wd{constructor(e,n,s=0){super(EU(e),`Firebase Storage: ${n} (${EU(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wpe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return EU(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function EU(t){return"storage/"+t}function cz(){const t="An unknown error occurred, please check the error payload for server response.";return new Lr(or.UNKNOWN,t)}function eqe(t){return new Lr(or.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function tqe(t){return new Lr(or.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nqe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Lr(or.UNAUTHENTICATED,t)}function sqe(){return new Lr(or.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function rqe(t){return new Lr(or.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iqe(){return new Lr(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oqe(){return new Lr(or.CANCELED,"User canceled the upload/download.")}function aqe(t){return new Lr(or.INVALID_URL,"Invalid URL '"+t+"'.")}function lqe(t){return new Lr(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uqe(){return new Lr(or.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vpe+"' property when initializing the app?")}function cqe(){return new Lr(or.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hqe(){return new Lr(or.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dqe(t){return new Lr(or.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zq(t){return new Lr(or.INVALID_ARGUMENT,t)}function bpe(){return new Lr(or.APP_DELETED,"The Firebase app was deleted.")}function fqe(t){return new Lr(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JI(t,e){return new Lr(or.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function SC(t){throw new Lr(or.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ta{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ta.makeFromUrl(e,n)}catch{return new Ta(e,"")}if(s.path==="")return s;throw lqe(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===ype?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${k}/${r}/${P}`,"i"),M=[{regex:a,indices:u,postModify:i},{regex:m,indices:w,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<M.length;V++){const q=M[V],H=q.regex.exec(e);if(H){const J=H[q.indices.bucket];let I=H[q.indices.path];I||(I=""),s=new Ta(J,I),q.postModify(s);break}}if(s==null)throw aqe(e);return s}}class pqe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gqe(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,u())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(c){p();return}if(P){p(),h.call(null,P,...O);return}if(u()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function k(P){w||(w=!0,p(),!c&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function mqe(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _qe(t){return t!==void 0}function yqe(t){return typeof t=="object"&&!Array.isArray(t)}function hz(t){return typeof t=="string"||t instanceof String}function ZJ(t){return dz()&&t instanceof Blob}function dz(){return typeof Blob<"u"}function Hq(t,e,n,s){if(s<e)throw zq(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw zq(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JA(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Epe(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Qy;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qy||(Qy={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vqe(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wqe{constructor(e,n,s,r,i,o,a,u,c,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new x1(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Qy.NO_ERROR,u=i.getStatus();if(!a||vqe(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Qy.ABORT;s(!1,new x1(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;s(!0,new x1(c,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());_qe(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=cz();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(r.canceled){const u=this.appDelete_?bpe():oqe();o(u)}else{const u=iqe();o(u)}};this.canceled_?n(!1,new x1(!1,null,!0)):this.backoffId_=gqe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mqe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class x1{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function bqe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Eqe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tqe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Cqe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Iqe(t,e,n,s,r,i,o=!0,a=!1){const u=Epe(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return Tqe(h,e),bqe(h,n),Eqe(h,i),Cqe(h,s),new wqe(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sqe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kqe(...t){const e=Sqe();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(dz())return new Blob(t);throw new Lr(or.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Aqe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rqe(t){if(typeof atob>"u")throw dqe("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class TU{constructor(e,n){this.data=e,this.contentType=n||null}}function Tpe(t,e){switch(t){case sc.RAW:return new TU(Cpe(e));case sc.BASE64:case sc.BASE64URL:return new TU(Ipe(t,e));case sc.DATA_URL:return new TU(xqe(e),Nqe(e))}throw cz()}function Cpe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Pqe(t){let e;try{e=decodeURIComponent(t)}catch{throw JI(sc.DATA_URL,"Malformed data URL.")}return Cpe(e)}function Ipe(t,e){switch(t){case sc.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw JI(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case sc.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw JI(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rqe(e)}catch(r){throw r.message.includes("polyfill")?r:JI(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class Spe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw JI(sc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=Dqe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function xqe(t){const e=new Spe(t);return e.base64?Ipe(sc.BASE64,e.rest):Pqe(e.rest)}function Nqe(t){return new Spe(t).contentType}function Dqe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ng{constructor(e,n){let s=0,r="";ZJ(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(ZJ(this.data_)){const s=this.data_,r=Aqe(s,e,n);return r===null?null:new ng(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ng(s,!0)}}static getBlob(...e){if(dz()){const n=e.map(s=>s instanceof ng?s.data_:s);return new ng(kqe.apply(null,n))}else{const n=e.map(o=>hz(o)?Tpe(sc.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new ng(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fz(t){let e;try{e=JSON.parse(t)}catch{return null}return yqe(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oqe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Lqe(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function kpe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mqe(t,e){return e}class na{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||Mqe}}let N1=null;function Fqe(t){return!hz(t)||t.length<2?t:kpe(t)}function Ape(){if(N1)return N1;const t=[];t.push(new na("bucket")),t.push(new na("generation")),t.push(new na("metageneration")),t.push(new na("name","fullPath",!0));function e(i,o){return Fqe(o)}const n=new na("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new na("size");return r.xform=s,t.push(r),t.push(new na("timeCreated")),t.push(new na("updated")),t.push(new na("md5Hash",null,!0)),t.push(new na("cacheControl",null,!0)),t.push(new na("contentDisposition",null,!0)),t.push(new na("contentEncoding",null,!0)),t.push(new na("contentLanguage",null,!0)),t.push(new na("contentType",null,!0)),t.push(new na("metadata","customMetadata",!0)),N1=t,N1}function Vqe(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Ta(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Uqe(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return Vqe(s,t),s}function Rpe(t,e,n){const s=fz(e);return s===null?null:Uqe(t,s,n)}function qqe(t,e,n,s){const r=fz(e);if(r===null||!hz(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const u=t.bucket,c=t.fullPath,h="/b/"+o(u)+"/o/"+o(c),d=JA(h,n,s),p=Epe({alt:"media",token:a});return d+p})[0]}function jqe(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eZ="prefixes",tZ="items";function Bqe(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[eZ])for(const r of n[eZ]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Ta(e,i));s.prefixes.push(o)}if(n[tZ])for(const r of n[tZ]){const i=t._makeStorageReference(new Ta(e,r.name));s.items.push(i)}return s}function $qe(t,e,n){const s=fz(n);return s===null?null:Bqe(t,e,s)}class YM{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pz(t){if(!t)throw cz()}function zqe(t,e){function n(s,r){const i=Rpe(t,r,e);return pz(i!==null),i}return n}function Hqe(t,e){function n(s,r){const i=$qe(t,e,r);return pz(i!==null),i}return n}function Wqe(t,e){function n(s,r){const i=Rpe(t,r,e);return pz(i!==null),qqe(i,r,t.host,t._protocol)}return n}function gz(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=sqe():r=nqe():n.getStatus()===402?r=tqe(t.bucket):n.getStatus()===403?r=rqe(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function Ppe(t){const e=gz(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=eqe(t.path)),i.serverResponse=r.serverResponse,i}return n}function Kqe(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=JA(o,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,h=new YM(a,u,Hqe(t,e.bucket),c);return h.urlParams=i,h.errorHandler=gz(e),h}function Gqe(t,e,n){const s=e.fullServerUrl(),r=JA(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new YM(r,i,Wqe(t,n),o);return a.errorHandler=Ppe(e),a}function Qqe(t,e){const n=e.fullServerUrl(),s=JA(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new YM(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=Ppe(e),a}function Yqe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Xqe(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Yqe(null,e)),s}function Jqe(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=Xqe(e,s,r),h=jqe(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",m=ng.getBlob(d,s,p);if(m===null)throw cqe();const w={name:c.fullPath},k=JA(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new YM(k,P,zqe(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=gz(e),M}class Zqe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qy.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qy.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qy.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw SC("cannot .send() more than once");if(vd(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw SC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw SC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw SC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw SC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e3e extends Zqe{initXhr(){this.xhr_.responseType="text"}}function XM(){return new e3e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yv{constructor(e,n){this._service=e,n instanceof Ta?this._location=n:this._location=Ta.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yv(e,n)}get root(){const e=new Ta(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kpe(this._location.path)}get storage(){return this._service}get parent(){const e=Oqe(this._location.path);if(e===null)return null;const n=new Ta(this._location.bucket,e);return new yv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fqe(e)}}function t3e(t,e,n){t._throwIfRoot("uploadBytes");const s=Jqe(t.storage,t._location,Ape(),new ng(e,!0),n);return t.storage.makeRequestWithTokens(s,XM).then(r=>({metadata:r,ref:t}))}function n3e(t,e,n=sc.RAW,s){t._throwIfRoot("uploadString");const r=Tpe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),t3e(t,r.data,i)}function s3e(t){const e={prefixes:[],items:[]};return xpe(t,e).then(()=>e)}async function xpe(t,e,n){const s=await r3e(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await xpe(t,e,s.nextPageToken)}function r3e(t,e){e!=null&&typeof e.maxResults=="number"&&Hq("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=Kqe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,XM)}function i3e(t){t._throwIfRoot("getDownloadURL");const e=Gqe(t.storage,t._location,Ape());return t.storage.makeRequestWithTokens(e,XM).then(n=>{if(n===null)throw hqe();return n})}function o3e(t){t._throwIfRoot("deleteObject");const e=Qqe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,XM)}function a3e(t,e){const n=Lqe(t._location.path,e),s=new Ta(t._location.bucket,n);return new yv(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function l3e(t){return/^[A-Za-z]+:\/\//.test(t)}function u3e(t,e){return new yv(t,e)}function Npe(t,e){if(t instanceof mz){const n=t;if(n._bucket==null)throw uqe();const s=new yv(n,n._bucket);return e!=null?Npe(s,e):s}else return e!==void 0?a3e(t,e):t}function c3e(t,e){if(e&&l3e(e)){if(t instanceof mz)return u3e(t,e);throw zq("To use ref(service, url), the first argument must be a Storage instance.")}else return Npe(t,e)}function nZ(t,e){const n=e?.[vpe];return n==null?null:Ta.makeFromBucketSpec(n,t)}function h3e(t,e,n,s={}){t.host=`${e}:${n}`;const r=vd(e);r&&(cM(`https://${t.host}/b`),hM("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:p5(i,t.app.options.projectId))}class mz{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=ype,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=J9e,this._maxUploadRetryTime=Z9e,this._requests=new Set,r!=null?this._bucket=Ta.makeFromBucketSpec(r,this._host):this._bucket=nZ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ta.makeFromBucketSpec(this._url,e):this._bucket=nZ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hq("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hq("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(sl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yv(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new pqe(bpe());{const o=Iqe(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const sZ="@firebase/storage",rZ="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dpe="storage";function _z(t,e,n,s){return t=Hn(t),n3e(t,e,n,s)}function yz(t){return t=Hn(t),s3e(t)}function vz(t){return t=Hn(t),i3e(t)}function wz(t){return t=Hn(t),o3e(t)}function bz(t,e){return t=Hn(t),c3e(t,e)}function d3e(t=pM(),e){t=Hn(t);const n=jA(t,Dpe).getImmediate({identifier:e}),s=f5("storage");return s&&f3e(n,...s),n}function f3e(t,e,n,s={}){h3e(t,e,n,s)}function p3e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new mz(n,s,r,e,n_)}function g3e(){em(new Tf(Dpe,p3e,"PUBLIC").setMultipleInstances(!0)),Ll(sZ,rZ,""),Ll(sZ,rZ,"esm2020")}g3e();var iZ={};const oZ="@firebase/database",aZ="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ope="";function m3e(t){Ope=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _3e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ii(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:AS(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class y3e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ip(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lpe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _3e(e)}}catch{}return new y3e},Iy=Lpe("localStorage"),v3e=Lpe("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Db=new fM("@firebase/database"),w3e=function(){let t=1;return function(){return t++}}(),Mpe=function(t){const e=$2e(t),n=new U2e;n.update(e);const s=n.digest();return d5.encodeByteArray(s)},ZA=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ZA.apply(null,s):typeof s=="object"?e+=ii(s):e+=s,e+=" "}return e};let ZI=null,lZ=!0;const b3e=function(t,e){Ce(!0,"Can't turn on custom loggers persistently."),Db.logLevel=Wt.VERBOSE,ZI=Db.log.bind(Db)},Eo=function(...t){if(lZ===!0&&(lZ=!1,ZI===null&&v3e.get("logging_enabled")===!0&&b3e()),ZI){const e=ZA.apply(null,t);ZI(e)}},eR=function(t){return function(...e){Eo(t,...e)}},Wq=function(...t){const e="FIREBASE INTERNAL ERROR: "+ZA(...t);Db.error(e)},Af=function(...t){const e=`FIREBASE FATAL ERROR: ${ZA(...t)}`;throw Db.error(e),new Error(e)},Ha=function(...t){const e="FIREBASE WARNING: "+ZA(...t);Db.warn(e)},E3e=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ha("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fpe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T3e=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},AE="[MIN_NAME]",vv="[MAX_NAME]",MT=function(t,e){if(t===e)return 0;if(t===AE||e===vv)return-1;if(e===AE||t===vv)return 1;{const n=uZ(t),s=uZ(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},C3e=function(t,e){return t===e?0:t<e?-1:1},kC=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ii(e))},Ez=function(t){if(typeof t!="object"||t===null)return ii(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=ii(e[s]),n+=":",n+=Ez(t[e[s]]);return n+="}",n},Vpe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Ya(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Upe=function(t){Ce(!Fpe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,u;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(h.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},I3e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},S3e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function k3e(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const A3e=new RegExp("^-?(0*)\\d{1,10}$"),R3e=-2147483648,P3e=2147483647,uZ=function(t){if(A3e.test(t)){const e=Number(t);if(e>=R3e&&e<=P3e)return e}return null},FT=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ha("Exception was thrown by user callback.",n),e},Math.floor(0))}},x3e=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},e0=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class N3e{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,sl(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ha(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D3e{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Eo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ha(e)}}class HP{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}HP.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tz="5",qpe="v",jpe="s",Bpe="r",$pe="f",zpe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hpe="ls",Wpe="p",Kq="ac",Kpe="websocket",Gpe="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Qpe{constructor(e,n,s,r,i=!1,o="",a=!1,u=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Iy.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Iy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function O3e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ype(t,e,n){Ce(typeof e=="string","typeof type must == string"),Ce(typeof n=="object","typeof params must == object");let s;if(e===Kpe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Gpe)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);O3e(t)&&(n.ns=t.namespace);const r=[];return Ya(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class L3e{constructor(){this.counters_={}}incrementCounter(e,n=1){ip(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return y2e(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CU={},IU={};function Cz(t){const e=t.toString();return CU[e]||(CU[e]=new L3e),CU[e]}function M3e(t,e){const n=t.toString();return IU[n]||(IU[n]=e()),IU[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class F3e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&FT(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cZ="start",V3e="close",U3e="pLPCommand",q3e="pRTLPCB",Xpe="id",Jpe="pw",Zpe="ser",j3e="cb",B3e="seg",$3e="ts",z3e="d",H3e="dframe",ege=1870,tge=30,W3e=ege-tge,K3e=25e3,G3e=3e4;class yb{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eR(e),this.stats_=Cz(n),this.urlFn=u=>(this.appCheckToken&&(u[Kq]=this.appCheckToken),Ype(n,Gpe,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new F3e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(G3e)),T3e(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Iz((...i)=>{const[o,a,u,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cZ)this.id=a,this.password=u;else if(o===V3e)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[cZ]="t",s[Zpe]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[j3e]=this.scriptTagHolder.uniqueCallbackIdentifier),s[qpe]=Tz,this.transportSessionId&&(s[jpe]=this.transportSessionId),this.lastSessionId&&(s[Hpe]=this.lastSessionId),this.applicationId&&(s[Wpe]=this.applicationId),this.appCheckToken&&(s[Kq]=this.appCheckToken),typeof location<"u"&&location.hostname&&zpe.test(location.hostname)&&(s[Bpe]=$pe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yb.forceAllow_=!0}static forceDisallow(){yb.forceDisallow_=!0}static isAvailable(){return yb.forceAllow_?!0:!yb.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!I3e()&&!S3e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ii(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=tde(n),r=Vpe(s,W3e);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[H3e]="t",s[Xpe]=e,s[Jpe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ii(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Iz{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=w3e(),window[U3e+this.uniqueCallbackIdentifier]=e,window[q3e+this.uniqueCallbackIdentifier]=n,this.myIFrame=Iz.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Eo("frame writing exception"),a.stack&&Eo(a.stack),Eo(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Eo("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Xpe]=this.myID,e[Jpe]=this.myPW,e[Zpe]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tge+s.length<=ege;){const i=this.pendingSegs.shift();s=s+"&"+B3e+r+"="+i.seg+"&"+$3e+r+"="+i.ts+"&"+z3e+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(K3e)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Eo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Q3e=16384,Y3e=45e3;let AN=null;typeof MozWebSocket<"u"?AN=MozWebSocket:typeof WebSocket<"u"&&(AN=WebSocket);class Xu{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eR(this.connId),this.stats_=Cz(n),this.connURL=Xu.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[qpe]=Tz,typeof location<"u"&&location.hostname&&zpe.test(location.hostname)&&(o[Bpe]=$pe),n&&(o[jpe]=n),s&&(o[Hpe]=s),r&&(o[Kq]=r),i&&(o[Wpe]=i),Ype(e,Kpe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Iy.set("previous_websocket_failure",!0);try{let s;P2e(),this.mySock=new AN(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Xu.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&AN!==null&&!Xu.forceDisallow_}static previouslyFailed(){return Iy.isInMemoryStorage||Iy.get("previous_websocket_failure")===!0}markConnectionHealthy(){Iy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=AS(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=ii(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Vpe(n,Q3e);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Y3e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xu.responsesRequiredToBeHealthy=2;Xu.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BS{static get ALL_TRANSPORTS(){return[yb,Xu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Xu&&Xu.isAvailable();let s=n&&!Xu.previouslyFailed();if(e.webSocketOnly&&(n||Ha("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Xu];else{const r=this.transports_=[];for(const i of BS.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);BS.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}BS.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const X3e=6e4,J3e=5e3,Z3e=10*1024,eje=100*1024,SU="t",hZ="d",tje="s",dZ="r",nje="e",fZ="o",pZ="a",gZ="n",mZ="p",sje="h";class rje{constructor(e,n,s,r,i,o,a,u,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eR("c:"+this.id+":"),this.transportManager_=new BS(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=e0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eje?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Z3e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(SU in e){const n=e[SU];n===pZ?this.upgradeIfSecondaryHealthy_():n===dZ?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fZ&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=kC("t",e),s=kC("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mZ,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pZ,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gZ,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=kC("t",e),s=kC("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=kC(SU,e);if(hZ in e){const s=e[hZ];if(n===sje){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===gZ){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tje?this.onConnectionShutdown_(s):n===dZ?this.onReset_(s):n===nje?Wq("Server Error: "+s):n===fZ?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wq("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Tz!==s&&Ha("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),e0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(X3e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):e0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(J3e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mZ,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Iy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nge{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sge{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class RN extends sge{static getInstance(){return new RN}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!g5()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _Z=32,yZ=768;let rs=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function In(){return new rs("")}function jt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function am(t){return t.pieces_.length-t.pieceNum_}function fs(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new rs(t.pieces_,e)}function rge(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ije(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ige(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function oge(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new rs(e,0)}function ai(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof rs)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new rs(n,0)}function Yt(t){return t.pieceNum_>=t.pieces_.length}function Ca(t,e){const n=jt(t),s=jt(e);if(n===null)return e;if(n===s)return Ca(fs(t),fs(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Sz(t,e){if(am(t)!==am(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function rc(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(am(t)>am(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class oje{constructor(e,n){this.errorPrefix_=n,this.parts_=ige(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=dM(this.parts_[s]);age(this)}}function aje(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=dM(e),age(t)}function lje(t){const e=t.parts_.pop();t.byteLength_-=dM(e),t.parts_.length>0&&(t.byteLength_-=1)}function age(t){if(t.byteLength_>yZ)throw new Error(t.errorPrefix_+"has a key path longer than "+yZ+" bytes ("+t.byteLength_+").");if(t.parts_.length>_Z)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_Z+") or object contains a cycle "+ay(t))}function ay(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kz extends sge{static getInstance(){return new kz}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const AC=1e3,uje=300*1e3,vZ=30*1e3,cje=1.3,hje=3e4,dje="server_kill",wZ=3;class mf extends nge{constructor(e,n,s,r,i,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=mf.nextPersistentConnectionId_++,this.log_=eR("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=AC,this.maxReconnectDelay_=uje,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kz.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&RN.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(ii(i)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new uM,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const u=a.d,c=a.s;mf.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ip(e,"w")){const s=wE(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ha(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||V2e(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vZ)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=F2e(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ii(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Wq("Unrecognized action received from server: "+ii(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hje&&(this.reconnectDelay_=AC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cje)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+mf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,s())},c=function(d){Ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:u,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Eo("getToken() completed but was canceled"):(Eo("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new rje(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{Ha(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(dje)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ha(d),u())}}}interrupt(e){Eo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Eo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],fq(this.interruptReasons_)&&(this.reconnectDelay_=AC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>Ez(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new rs(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Eo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wZ&&(this.reconnectDelay_=vZ,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Eo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wZ&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ope.replace(/\./g,"-")]=1,g5()?e["framework.cordova"]=1:ode()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=RN.getInstance().currentlyOnline();return fq(this.interruptReasons_)&&e}}mf.nextPersistentConnectionId_=0;mf.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let an=class lge{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new lge(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JM{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new an(AE,e),r=new an(AE,n);return this.compare(s,r)!==0}minPost(){return an.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let D1;class uge extends JM{static get __EMPTY_NODE(){return D1}static set __EMPTY_NODE(e){D1=e}compare(e,n){return MT(e.name,n.name)}isDefinedOn(e){throw RT("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return an.MIN}maxPost(){return new an(vv,D1)}makePost(e,n){return Ce(typeof e=="string","KeyIndex indexValue must always be a string."),new an(e,D1)}toString(){return".key"}}const Ob=new uge;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class O1{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let tl=class gI{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??gI.RED,this.left=r??Ih.EMPTY_NODE,this.right=i??Ih.EMPTY_NODE}copy(e,n,s,r,i){return new gI(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ih.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Ih.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gI.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gI.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};tl.RED=!0;tl.BLACK=!1;class fje{copy(e,n,s,r,i){return this}insert(e,n,s){return new tl(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Ih=class WP{constructor(e,n=WP.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new WP(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,tl.BLACK,null,null))}remove(e){return new WP(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tl.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new O1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new O1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new O1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new O1(this.root_,null,this.comparator_,!0,e)}};Ih.EMPTY_NODE=new fje;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pje(t,e){return MT(t.name,e.name)}function Az(t,e){return MT(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Gq;function gje(t){Gq=t}const cge=function(t){return typeof t=="number"?"number:"+Upe(t):"string:"+t},hge=function(t){if(t.isLeafNode()){const e=t.val();Ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ip(e,".sv"),"Priority must be a string or number.")}else Ce(t===Gq||t.isEmpty(),"priority of unexpected type.");Ce(t===Gq||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let bZ,wv=class qu{static set __childrenNodeConstructor(e){bZ=e}static get __childrenNodeConstructor(){return bZ}constructor(e,n=qu.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hge(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qu(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:qu.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Yt(e)?this:jt(e)===".priority"?this.priorityNode_:qu.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:qu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=jt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Ce(s!==".priority"||am(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,qu.__childrenNodeConstructor.EMPTY_NODE.updateChild(fs(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+cge(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Upe(this.value_):e+=this.value_,this.lazyHash_=Mpe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qu.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qu.__childrenNodeConstructor?-1:(Ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=qu.VALUE_TYPE_ORDER.indexOf(n),i=qu.VALUE_TYPE_ORDER.indexOf(s);return Ce(r>=0,"Unknown leaf type: "+n),Ce(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}};wv.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let dge,fge;function mje(t){dge=t}function _je(t){fge=t}class yje extends JM{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?MT(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return an.MIN}maxPost(){return new an(vv,new wv("[PRIORITY-POST]",fge))}makePost(e,n){const s=dge(e);return new an(n,new wv("[PRIORITY-POST]",s))}toString(){return".priority"}}const tr=new yje;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vje=Math.log(2);class wje{constructor(e){const n=i=>parseInt(Math.log(i)/vje,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const PN=function(t,e,n,s){t.sort(e);const r=function(u,c){const h=c-u;let d,p;if(h===0)return null;if(h===1)return d=t[u],p=n?n(d):d,new tl(p,d.node,tl.BLACK,null,null);{const m=parseInt(h/2,10)+u,w=r(u,m),k=r(m+1,c);return d=t[m],p=n?n(d):d,new tl(p,d.node,tl.BLACK,w,k)}},i=function(u){let c=null,h=null,d=t.length;const p=function(w,k){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new tl(q,V.node,k,null,M))},m=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<u.count;++w){const k=u.nextBitIsOne(),P=Math.pow(2,u.count-(w+1));k?p(P,tl.BLACK):(p(P,tl.BLACK),p(P,tl.RED))}return h},o=new wje(t.length),a=i(o);return new Ih(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let kU;const Ew={};class rf{static get Default(){return Ce(Ew&&tr,"ChildrenNode.ts has not been loaded"),kU=kU||new rf({".priority":Ew},{".priority":tr}),kU}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=wE(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ih?n:null}hasIndex(e){return ip(this.indexSet_,e.toString())}addIndex(e,n){Ce(e!==Ob,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(an.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=PN(s,e.getCompare()):a=Ew;const u=e.toString(),c={...this.indexSet_};c[u]=e;const h={...this.indexes_};return h[u]=a,new rf(h,c)}addToIndexes(e,n){const s=uN(this.indexes_,(r,i)=>{const o=wE(this.indexSet_,i);if(Ce(o,"Missing index implementation for "+i),r===Ew)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(an.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),PN(a,o.getCompare())}else return Ew;else{const a=n.get(e.name);let u=r;return a&&(u=u.remove(new an(e.name,a))),u.insert(e,e.node)}});return new rf(s,this.indexSet_)}removeFromIndexes(e,n){const s=uN(this.indexes_,r=>{if(r===Ew)return r;{const i=n.get(e.name);return i?r.remove(new an(e.name,i)):r}});return new rf(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let RC;class rt{static get EMPTY_NODE(){return RC||(RC=new rt(new Ih(Az),null,rf.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&hge(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||RC}updatePriority(e){return this.children_.isEmpty()?this:new rt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?RC:n}}getChild(e){const n=jt(e);return n===null?this:this.getImmediateChild(n).getChild(fs(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new an(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?RC:this.priorityNode_;return new rt(r,o,i)}}updateChild(e,n){const s=jt(e);if(s===null)return n;{Ce(jt(e)!==".priority"||am(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(fs(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(tr,(o,a)=>{n[o]=a.val(e),s++,i&&rt.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+cge(this.getPriority().val())+":"),this.forEachChild(tr,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Mpe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new an(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new an(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new an(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,an.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,an.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tR?-1:0}withIndex(e){if(e===Ob||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new rt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ob||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(tr),r=n.getIterator(tr);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ob?null:this.indexMap_.get(e.toString())}}rt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class bje extends rt{constructor(){super(new Ih(Az),rt.EMPTY_NODE,rf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return rt.EMPTY_NODE}isEmpty(){return!1}}const tR=new bje;Object.defineProperties(an,{MIN:{value:new an(AE,rt.EMPTY_NODE)},MAX:{value:new an(vv,tR)}});uge.__EMPTY_NODE=rt.EMPTY_NODE;wv.__childrenNodeConstructor=rt;gje(tR);_je(tR);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Eje=!0;function Fi(t,e=null){if(t===null)return rt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new wv(n,Fi(e))}if(!(t instanceof Array)&&Eje){const n=[];let s=!1;if(Ya(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=Fi(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new an(i,a)))}}),n.length===0)return rt.EMPTY_NODE;const r=PN(n,pje,i=>i.name,Az);if(s){const i=PN(n,tr.getCompare());return new rt(r,Fi(e),new rf({".priority":i},{".priority":tr}))}else return new rt(r,Fi(e),rf.Default)}else{let n=rt.EMPTY_NODE;return Ya(t,(s,r)=>{if(ip(t,s)&&s.substring(0,1)!=="."){const i=Fi(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(Fi(e))}}mje(Fi);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tje extends JM{constructor(e){super(),this.indexPath_=e,Ce(!Yt(e)&&jt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?MT(e.name,n.name):i}makePost(e,n){const s=Fi(e),r=rt.EMPTY_NODE.updateChild(this.indexPath_,s);return new an(n,r)}maxPost(){const e=rt.EMPTY_NODE.updateChild(this.indexPath_,tR);return new an(vv,e)}toString(){return ige(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cje extends JM{compare(e,n){const s=e.node.compareTo(n.node);return s===0?MT(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,n){const s=Fi(e);return new an(n,s)}toString(){return".value"}}const Ije=new Cje;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pge(t){return{type:"value",snapshotNode:t}}function RE(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $S(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function zS(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sje(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rz{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange($S(n,a)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(RE(n,s)):o.trackChildChange(zS(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(tr,(r,i)=>{n.hasChild(r)||s.trackChildChange($S(r,i))}),n.isLeafNode()||n.forEachChild(tr,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(zS(r,i,o))}else s.trackChildChange(RE(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?rt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HS{constructor(e){this.indexedFilter_=new Rz(e.getIndex()),this.index_=e.getIndex(),this.startPost_=HS.getStartPost_(e),this.endPost_=HS.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new an(n,s))||(s=rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=rt.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(rt.EMPTY_NODE);const i=this;return n.forEachChild(tr,(o,a)=>{i.matches(new an(o,a))||(r=r.updateImmediateChild(o,rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kje{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new HS(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new an(n,s))||(s=rt.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=rt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=rt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(rt.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Ce(a.numChildren()===this.limit_,"");const u=new an(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,u);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(zS(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange($S(n,d));const w=a.updateImmediateChild(n,rt.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(RE(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(c,u)>=0?(i!=null&&(i.trackChildChange($S(c.name,c.node)),i.trackChildChange(RE(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,rt.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pz{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=tr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:AE}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===tr}copy(){const e=new Pz;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Aje(t){return t.loadsAllData()?new Rz(t.getIndex()):t.hasLimit()?new kje(t):new HS(t)}function EZ(t){const e={};if(t.isDefault())return e;let n;if(t.index_===tr?n="$priority":t.index_===Ije?n="$value":t.index_===Ob?n="$key":(Ce(t.index_ instanceof Tje,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ii(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=ii(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+ii(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=ii(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+ii(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function TZ(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==tr&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xN extends nge{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=eR("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=xN.getListenId_(e,s),a={};this.listens_[o]=a;const u=EZ(e._queryParams);this.restRequest_(i+".json",u,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,s),wE(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const s=xN.getListenId_(e,n);delete this.listens_[s]}get(e){const n=EZ(e._queryParams),s=e._path.toString(),r=new uM;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+PT(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=AS(a.responseText)}catch{Ha("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,u)}else a.status!==401&&a.status!==404&&Ha("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Rje{constructor(){this.rootNode_=rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NN(){return{value:null,children:new Map}}function gge(t,e,n){if(Yt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=jt(e);t.children.has(s)||t.children.set(s,NN());const r=t.children.get(s);e=fs(e),gge(r,e,n)}}function Qq(t,e,n){t.value!==null?n(e,t.value):Pje(t,(s,r)=>{const i=new rs(e.toString()+"/"+s);Qq(r,i,n)})}function Pje(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xje{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ya(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CZ=10*1e3,Nje=30*1e3,Dje=300*1e3;class Oje{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xje(e);const s=CZ+(Nje-CZ)*Math.random();e0(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Ya(e,(r,i)=>{i>0&&ip(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),e0(this.reportStats_.bind(this),Math.floor(Math.random()*2*Dje))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ic;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ic||(ic={}));function mge(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xz(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Nz(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DN{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=ic.ACK_USER_WRITE,this.source=mge()}operationForChild(e){if(Yt(this.path)){if(this.affectedTree.value!=null)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new rs(e));return new DN(In(),n,this.revert)}}else return Ce(jt(this.path)===e,"operationForChild called for unrelated child."),new DN(fs(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class WS{constructor(e,n){this.source=e,this.path=n,this.type=ic.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new WS(this.source,In()):new WS(this.source,fs(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bv{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=ic.OVERWRITE}operationForChild(e){return Yt(this.path)?new bv(this.source,In(),this.snap.getImmediateChild(e)):new bv(this.source,fs(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KS{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=ic.MERGE}operationForChild(e){if(Yt(this.path)){const n=this.children.subtree(new rs(e));return n.isEmpty()?null:n.value?new bv(this.source,In(),n.value):new KS(this.source,In(),n)}else return Ce(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new KS(this.source,fs(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lm{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const n=jt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lje{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Mje(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Sje(o.childName,o.snapshotNode))}),PC(t,r,"child_removed",e,s,n),PC(t,r,"child_added",e,s,n),PC(t,r,"child_moved",i,s,n),PC(t,r,"child_changed",e,s,n),PC(t,r,"value",e,s,n),r}function PC(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,u)=>Vje(t,a,u)),o.forEach(a=>{const u=Fje(t,a,i);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Fje(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Vje(t,e,n){if(e.childName==null||n.childName==null)throw RT("Should only compare child_ events.");const s=new an(e.childName,e.snapshotNode),r=new an(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZM(t,e){return{eventCache:t,serverCache:e}}function t0(t,e,n,s){return ZM(new lm(e,n,s),t.serverCache)}function _ge(t,e,n,s){return ZM(t.eventCache,new lm(e,n,s))}function ON(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ev(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let AU;const Uje=()=>(AU||(AU=new Ih(C3e)),AU);let Hl=class el{static fromObject(e){let n=new el(null);return Ya(e,(s,r)=>{n=n.set(new rs(s),r)}),n}constructor(e,n=Uje()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:In(),value:this.value};if(Yt(e))return null;{const s=jt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(fs(e),n);return i!=null?{path:ai(new rs(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const n=jt(e),s=this.children.get(n);return s!==null?s.subtree(fs(e)):new el(null)}}set(e,n){if(Yt(e))return new el(n,this.children);{const s=jt(e),r=(this.children.get(s)||new el(null)).set(fs(e),n),i=this.children.insert(s,r);return new el(this.value,i)}}remove(e){if(Yt(e))return this.children.isEmpty()?new el(null):new el(null,this.children);{const n=jt(e),s=this.children.get(n);if(s){const r=s.remove(fs(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new el(null):new el(this.value,i)}else return this}}get(e){if(Yt(e))return this.value;{const n=jt(e),s=this.children.get(n);return s?s.get(fs(e)):null}}setTree(e,n){if(Yt(e))return n;{const s=jt(e),r=(this.children.get(s)||new el(null)).setTree(fs(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new el(this.value,i)}}fold(e){return this.fold_(In(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(ai(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,In(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Yt(e))return null;{const i=jt(e),o=this.children.get(i);return o?o.findOnPath_(fs(e),ai(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,In(),n)}foreachOnPath_(e,n,s){if(Yt(e))return this;{this.value&&s(n,this.value);const r=jt(e),i=this.children.get(r);return i?i.foreachOnPath_(fs(e),ai(n,r),s):new el(null)}}foreach(e){this.foreach_(In(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(ai(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tc{constructor(e){this.writeTree_=e}static empty(){return new Tc(new Hl(null))}}function n0(t,e,n){if(Yt(e))return new Tc(new Hl(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Ca(r,e);return i=i.updateChild(o,n),new Tc(t.writeTree_.set(r,i))}else{const r=new Hl(n),i=t.writeTree_.setTree(e,r);return new Tc(i)}}}function IZ(t,e,n){let s=t;return Ya(n,(r,i)=>{s=n0(s,ai(e,r),i)}),s}function SZ(t,e){if(Yt(e))return Tc.empty();{const n=t.writeTree_.setTree(e,new Hl(null));return new Tc(n)}}function Yq(t,e){return rw(t,e)!=null}function rw(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ca(n.path,e)):null}function kZ(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(tr,(s,r)=>{e.push(new an(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new an(s,r.value))}),e}function bg(t,e){if(Yt(e))return t;{const n=rw(t,e);return n!=null?new Tc(new Hl(n)):new Tc(t.writeTree_.subtree(e))}}function Xq(t){return t.writeTree_.isEmpty()}function PE(t,e){return yge(In(),t.writeTree_,e)}function yge(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Ce(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=yge(ai(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(ai(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function e2(t,e){return Ege(e,t)}function qje(t,e,n,s,r){Ce(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=n0(t.visibleWrites,e,n)),t.lastWriteId=s}function jje(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Bje(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ce(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&$je(a,s.path)?r=!1:rc(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return zje(t),!0;if(s.snap)t.visibleWrites=SZ(t.visibleWrites,s.path);else{const a=s.children;Ya(a,u=>{t.visibleWrites=SZ(t.visibleWrites,ai(s.path,u))})}return!0}else return!1}function $je(t,e){if(t.snap)return rc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&rc(ai(t.path,n),e))return!0;return!1}function zje(t){t.visibleWrites=vge(t.allWrites,Hje,In()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Hje(t){return t.visible}function vge(t,e,n){let s=Tc.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)rc(n,o)?(a=Ca(n,o),s=n0(s,a,i.snap)):rc(o,n)&&(a=Ca(o,n),s=n0(s,In(),i.snap.getChild(a)));else if(i.children){if(rc(n,o))a=Ca(n,o),s=IZ(s,a,i.children);else if(rc(o,n))if(a=Ca(o,n),Yt(a))s=IZ(s,In(),i.children);else{const u=wE(i.children,jt(a));if(u){const c=u.getChild(fs(a));s=n0(s,In(),c)}}}else throw RT("WriteRecord should have .snap or .children")}}return s}function wge(t,e,n,s,r){if(!s&&!r){const i=rw(t.visibleWrites,e);if(i!=null)return i;{const o=bg(t.visibleWrites,e);if(Xq(o))return n;if(n==null&&!Yq(o,In()))return null;{const a=n||rt.EMPTY_NODE;return PE(o,a)}}}else{const i=bg(t.visibleWrites,e);if(!r&&Xq(i))return n;if(!r&&n==null&&!Yq(i,In()))return null;{const o=function(c){return(c.visible||r)&&(!s||!~s.indexOf(c.writeId))&&(rc(c.path,e)||rc(e,c.path))},a=vge(t.allWrites,o,e),u=n||rt.EMPTY_NODE;return PE(a,u)}}}function Wje(t,e,n){let s=rt.EMPTY_NODE;const r=rw(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(tr,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=bg(t.visibleWrites,e);return n.forEachChild(tr,(o,a)=>{const u=PE(bg(i,new rs(o)),a);s=s.updateImmediateChild(o,u)}),kZ(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=bg(t.visibleWrites,e);return kZ(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Kje(t,e,n,s,r){Ce(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=ai(e,n);if(Yq(t.visibleWrites,i))return null;{const o=bg(t.visibleWrites,i);return Xq(o)?r.getChild(n):PE(o,r.getChild(n))}}function Gje(t,e,n,s){const r=ai(e,n),i=rw(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=bg(t.visibleWrites,r);return PE(o,s.getNode().getImmediateChild(n))}else return null}function Qje(t,e){return rw(t.visibleWrites,e)}function Yje(t,e,n,s,r,i,o){let a;const u=bg(t.visibleWrites,e),c=rw(u,In());if(c!=null)a=c;else if(n!=null)a=PE(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function Xje(){return{visibleWrites:Tc.empty(),allWrites:[],lastWriteId:-1}}function LN(t,e,n,s){return wge(t.writeTree,t.treePath,e,n,s)}function Dz(t,e){return Wje(t.writeTree,t.treePath,e)}function AZ(t,e,n,s){return Kje(t.writeTree,t.treePath,e,n,s)}function MN(t,e){return Qje(t.writeTree,ai(t.treePath,e))}function Jje(t,e,n,s,r,i){return Yje(t.writeTree,t.treePath,e,n,s,r,i)}function Oz(t,e,n){return Gje(t.writeTree,t.treePath,e,n)}function bge(t,e){return Ege(ai(t.treePath,e),t.writeTree)}function Ege(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zje{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ce(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,zS(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,$S(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,RE(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,zS(s,e.snapshotNode,r.oldSnap));else throw RT("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eBe{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Tge=new eBe;class Lz{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new lm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Oz(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ev(this.viewCache_),i=Jje(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tBe(t){return{filter:t}}function nBe(t,e){Ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function sBe(t,e,n,s,r){const i=new Zje;let o,a;if(n.type===ic.OVERWRITE){const c=n;c.source.fromUser?o=Jq(t,e,c.path,c.snap,s,r,i):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Yt(c.path),o=FN(t,e,c.path,c.snap,s,r,a,i))}else if(n.type===ic.MERGE){const c=n;c.source.fromUser?o=iBe(t,e,c.path,c.children,s,r,i):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Zq(t,e,c.path,c.children,s,r,a,i))}else if(n.type===ic.ACK_USER_WRITE){const c=n;c.revert?o=lBe(t,e,c.path,s,r,i):o=oBe(t,e,c.path,c.affectedTree,s,r,i)}else if(n.type===ic.LISTEN_COMPLETE)o=aBe(t,e,n.path,s,i);else throw RT("Unknown operation type: "+n.type);const u=i.getChanges();return rBe(e,o,u),{viewCache:o,changes:u}}function rBe(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=ON(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(pge(ON(e)))}}function Cge(t,e,n,s,r,i){const o=e.eventCache;if(MN(s,n)!=null)return e;{let a,u;if(Yt(n))if(Ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ev(e),h=c instanceof rt?c:rt.EMPTY_NODE,d=Dz(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=LN(s,Ev(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=jt(n);if(c===".priority"){Ce(am(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=e.serverCache.getNode();const d=AZ(s,n,h,u);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=fs(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const p=AZ(s,n,o.getNode(),u);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=Oz(s,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,i):a=o.getNode()}}return t0(e,a,o.isFullyInitialized()||Yt(n),t.filter.filtersNodes())}}function FN(t,e,n,s,r,i,o,a){const u=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Yt(n))c=h.updateFullNode(u.getNode(),s,null);else if(h.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,s);c=h.updateFullNode(u.getNode(),m,null)}else{const m=jt(n);if(!u.isCompleteForPath(n)&&am(n)>1)return e;const w=fs(n),k=u.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?c=h.updatePriority(u.getNode(),k):c=h.updateChild(u.getNode(),m,k,w,Tge,null)}const d=_ge(e,c,u.isFullyInitialized()||Yt(n),h.filtersNodes()),p=new Lz(r,d,i);return Cge(t,d,n,r,p,a)}function Jq(t,e,n,s,r,i,o){const a=e.eventCache;let u,c;const h=new Lz(r,e,i);if(Yt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),u=t0(e,c,!0,t.filter.filtersNodes());else{const d=jt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),u=t0(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=fs(n),m=a.getNode().getImmediateChild(d);let w;if(Yt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?rge(p)===".priority"&&k.getChild(oge(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=rt.EMPTY_NODE}if(m.equals(w))u=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);u=t0(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function RZ(t,e){return t.eventCache.isCompleteForChild(e)}function iBe(t,e,n,s,r,i,o){let a=e;return s.foreach((u,c)=>{const h=ai(n,u);RZ(e,jt(h))&&(a=Jq(t,a,h,c,r,i,o))}),s.foreach((u,c)=>{const h=ai(n,u);RZ(e,jt(h))||(a=Jq(t,a,h,c,r,i,o))}),a}function PZ(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function Zq(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Yt(n)?c=s:c=new Hl(null).setTree(n,s);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=PZ(t,m,p);u=FN(t,u,new rs(d),w,r,i,o,a)}}),c.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=PZ(t,w,p);u=FN(t,u,new rs(d),k,r,i,o,a)}}),u}function oBe(t,e,n,s,r,i,o){if(MN(r,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(Yt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return FN(t,e,n,u.getNode().getChild(n),r,i,a,o);if(Yt(n)){let c=new Hl(null);return u.getNode().forEachChild(Ob,(h,d)=>{c=c.set(new rs(h),d)}),Zq(t,e,n,c,r,i,a,o)}else return e}else{let c=new Hl(null);return s.foreach((h,d)=>{const p=ai(n,h);u.isCompleteForPath(p)&&(c=c.set(h,u.getNode().getChild(p)))}),Zq(t,e,n,c,r,i,a,o)}}function aBe(t,e,n,s,r){const i=e.serverCache,o=_ge(e,i.getNode(),i.isFullyInitialized()||Yt(n),i.isFiltered());return Cge(t,o,n,s,Tge,r)}function lBe(t,e,n,s,r,i){let o;if(MN(s,n)!=null)return e;{const a=new Lz(s,e,r),u=e.eventCache.getNode();let c;if(Yt(n)||jt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=LN(s,Ev(e));else{const d=e.serverCache.getNode();Ce(d instanceof rt,"serverChildren would be complete if leaf node"),h=Dz(s,d)}h=h,c=t.filter.updateFullNode(u,h,i)}else{const h=jt(n);let d=Oz(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=u.getImmediateChild(h)),d!=null?c=t.filter.updateChild(u,h,d,fs(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(u,h,rt.EMPTY_NODE,fs(n),a,i):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=LN(s,Ev(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||MN(s,In())!=null,t0(e,c,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uBe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new Rz(s.getIndex()),i=Aje(s);this.processor_=tBe(i);const o=n.serverCache,a=n.eventCache,u=r.updateFullNode(rt.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(rt.EMPTY_NODE,a.getNode(),null),h=new lm(u,o.isFullyInitialized(),r.filtersNodes()),d=new lm(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=ZM(d,h),this.eventGenerator_=new Lje(this.query_)}get query(){return this.query_}}function cBe(t){return t.viewCache_.serverCache.getNode()}function hBe(t){return ON(t.viewCache_)}function dBe(t,e){const n=Ev(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Yt(e)&&!n.getImmediateChild(jt(e)).isEmpty())?n.getChild(e):null}function xZ(t){return t.eventRegistrations_.length===0}function fBe(t,e){t.eventRegistrations_.push(e)}function NZ(t,e,n){const s=[];if(n){Ce(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function DZ(t,e,n,s){e.type===ic.MERGE&&e.source.queryId!==null&&(Ce(Ev(t.viewCache_),"We should always have a full cache before handling merges"),Ce(ON(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=sBe(t.processor_,r,e,n,s);return nBe(t.processor_,i.viewCache),Ce(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Ige(t,i.changes,i.viewCache.eventCache.getNode(),null)}function pBe(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(tr,(r,i)=>{s.push(RE(r,i))}),n.isFullyInitialized()&&s.push(pge(n.getNode())),Ige(t,s,n.getNode(),e)}function Ige(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return Mje(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let VN;class Sge{constructor(){this.views=new Map}}function gBe(t){Ce(!VN,"__referenceConstructor has already been defined"),VN=t}function mBe(){return Ce(VN,"Reference.ts has not been loaded"),VN}function _Be(t){return t.views.size===0}function Mz(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Ce(i!=null,"SyncTree gave us an op for an invalid query."),DZ(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(DZ(o,e,n,s));return i}}function kge(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=LN(n,r?s:null),u=!1;a?u=!0:s instanceof rt?(a=Dz(n,s),u=!1):(a=rt.EMPTY_NODE,u=!1);const c=ZM(new lm(a,u,!1),new lm(s,r,!1));return new uBe(e,c)}return o}function yBe(t,e,n,s,r,i){const o=kge(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),fBe(o,n),pBe(o,n)}function vBe(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=um(t);if(r==="default")for(const[u,c]of t.views.entries())o=o.concat(NZ(c,n,s)),xZ(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||i.push(c.query));else{const u=t.views.get(r);u&&(o=o.concat(NZ(u,n,s)),xZ(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||i.push(u.query)))}return a&&!um(t)&&i.push(new(mBe())(e._repo,e._path)),{removed:i,events:o}}function Age(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Eg(t,e){let n=null;for(const s of t.views.values())n=n||dBe(s,e);return n}function Rge(t,e){if(e._queryParams.loadsAllData())return t2(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Pge(t,e){return Rge(t,e)!=null}function um(t){return t2(t)!=null}function t2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let UN;function wBe(t){Ce(!UN,"__referenceConstructor has already been defined"),UN=t}function bBe(){return Ce(UN,"Reference.ts has not been loaded"),UN}let EBe=1;class OZ{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Hl(null),this.pendingWriteTree_=Xje(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xge(t,e,n,s,r){return qje(t.pendingWriteTree_,e,n,s,r),r?sR(t,new bv(mge(),e,n)):[]}function Sy(t,e,n=!1){const s=jje(t.pendingWriteTree_,e);if(Bje(t.pendingWriteTree_,e)){let r=new Hl(null);return s.snap!=null?r=r.set(In(),!0):Ya(s.children,i=>{r=r.set(new rs(i),!0)}),sR(t,new DN(s.path,r,n))}else return[]}function nR(t,e,n){return sR(t,new bv(xz(),e,n))}function TBe(t,e,n){const s=Hl.fromObject(n);return sR(t,new KS(xz(),e,s))}function CBe(t,e){return sR(t,new WS(xz(),e))}function IBe(t,e,n){const s=Vz(t,n);if(s){const r=Uz(s),i=r.path,o=r.queryId,a=Ca(i,e),u=new WS(Nz(o),a);return qz(t,i,u)}else return[]}function qN(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Pge(o,e))){const u=vBe(o,e,n,s);_Be(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=u.removed;if(a=u.events,!r){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>um(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=ABe(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,O=Lge(t,k);t.listenProvider_.startListening(s0(P),GS(t,P),O.hashFn,O.onComplete)}}}!d&&c.length>0&&!s&&(h?t.listenProvider_.stopListening(s0(e),null):c.forEach(p=>{const m=t.queryToTagMap.get(n2(p));t.listenProvider_.stopListening(s0(p),m)}))}RBe(t,c)}return a}function Nge(t,e,n,s){const r=Vz(t,s);if(r!=null){const i=Uz(r),o=i.path,a=i.queryId,u=Ca(o,e),c=new bv(Nz(a),u,n);return qz(t,o,c)}else return[]}function SBe(t,e,n,s){const r=Vz(t,s);if(r){const i=Uz(r),o=i.path,a=i.queryId,u=Ca(o,e),c=Hl.fromObject(n),h=new KS(Nz(a),u,c);return qz(t,o,h)}else return[]}function e3(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Ca(p,r);i=i||Eg(m,w),o=o||um(m)});let a=t.syncPointTree_.get(r);a?(o=o||um(a),i=i||Eg(a,In())):(a=new Sge,t.syncPointTree_=t.syncPointTree_.set(r,a));let u;i!=null?u=!0:(u=!1,i=rt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=Eg(m,In());w&&(i=i.updateImmediateChild(p,w))}));const c=Pge(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=n2(e);Ce(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=PBe();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=e2(t.pendingWriteTree_,r);let d=yBe(a,e,n,h,i,u);if(!c&&!o&&!s){const p=Rge(a,e);d=d.concat(xBe(t,e,p))}return d}function Fz(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Ca(i,e),u=Eg(o,a);if(u)return u});return wge(s,e,r,n,!0)}function kBe(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=Ca(c,n);s=s||Eg(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Eg(r,In()):(r=new Sge,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new lm(s,!0,!1):null,a=e2(t.pendingWriteTree_,e._path),u=kge(r,e,a,i?o.getNode():rt.EMPTY_NODE,i);return hBe(u)}function sR(t,e){return Dge(e,t.syncPointTree_,null,e2(t.pendingWriteTree_,In()))}function Dge(t,e,n,s){if(Yt(t.path))return Oge(t,e,n,s);{const r=e.get(In());n==null&&r!=null&&(n=Eg(r,In()));let i=[];const o=jt(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,h=bge(s,o);i=i.concat(Dge(a,u,c,h))}return r&&(i=i.concat(Mz(r,t,s,n))),i}}function Oge(t,e,n,s){const r=e.get(In());n==null&&r!=null&&(n=Eg(r,In()));let i=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=bge(s,o),h=t.operationForChild(o);h&&(i=i.concat(Oge(h,a,u,c)))}),r&&(i=i.concat(Mz(r,t,s,n))),i}function Lge(t,e){const n=e.query,s=GS(t,n);return{hashFn:()=>(cBe(e)||rt.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?IBe(t,n._path,s):CBe(t,n._path);{const i=k3e(r,n);return qN(t,n,null,i)}}}}function GS(t,e){const n=n2(e);return t.queryToTagMap.get(n)}function n2(t){return t._path.toString()+"$"+t._queryIdentifier}function Vz(t,e){return t.tagToQueryMap.get(e)}function Uz(t){const e=t.indexOf("$");return Ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new rs(t.substr(0,e))}}function qz(t,e,n){const s=t.syncPointTree_.get(e);Ce(s,"Missing sync point for query tag that we're tracking");const r=e2(t.pendingWriteTree_,e);return Mz(s,n,r,null)}function ABe(t){return t.fold((e,n,s)=>{if(n&&um(n))return[t2(n)];{let r=[];return n&&(r=Age(n)),Ya(s,(i,o)=>{r=r.concat(o)}),r}})}function s0(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(bBe())(t._repo,t._path):t}function RBe(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=n2(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function PBe(){return EBe++}function xBe(t,e,n){const s=e._path,r=GS(t,e),i=Lge(t,n),o=t.listenProvider_.startListening(s0(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Ce(!um(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,h,d)=>{if(!Yt(c)&&h&&um(h))return[t2(h).query];{let p=[];return h&&(p=p.concat(Age(h).map(m=>m.query))),Ya(d,(m,w)=>{p=p.concat(w)}),p}});for(let c=0;c<u.length;++c){const h=u[c];t.listenProvider_.stopListening(s0(h),GS(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jz{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jz(n)}node(){return this.node_}}class Bz{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ai(this.path_,e);return new Bz(this.syncTree_,n)}node(){return Fz(this.syncTree_,this.path_)}}const NBe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},LZ=function(t,e,n){if(!t||typeof t!="object")return t;if(Ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return DBe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return OBe(t[".sv"],e);Ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},DBe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ce(!1,"Unexpected server value: "+t)}},OBe=function(t,e,n){t.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Ce(!1,"Unexpected increment value: "+s);const r=e.node();if(Ce(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},LBe=function(t,e,n,s){return $z(e,new Bz(n,t),s)},Mge=function(t,e,n){return $z(t,new jz(e),n)};function $z(t,e,n){const s=t.getPriority().val(),r=LZ(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=LZ(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new wv(a,Fi(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new wv(r))),o.forEachChild(tr,(a,u)=>{const c=$z(u,e.getImmediateChild(a),n);c!==u&&(i=i.updateImmediateChild(a,c))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zz{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Hz(t,e){let n=e instanceof rs?e:new rs(e),s=t,r=jt(n);for(;r!==null;){const i=wE(s.node.children,r)||{children:{},childCount:0};s=new zz(r,s,i),n=fs(n),r=jt(n)}return s}function VT(t){return t.node.value}function Fge(t,e){t.node.value=e,t3(t)}function Vge(t){return t.node.childCount>0}function MBe(t){return VT(t)===void 0&&!Vge(t)}function s2(t,e){Ya(t.node.children,(n,s)=>{e(new zz(n,t,s))})}function Uge(t,e,n,s){n&&e(t),s2(t,r=>{Uge(r,e,!0)})}function FBe(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function rR(t){return new rs(t.parent===null?t.name:rR(t.parent)+"/"+t.name)}function t3(t){t.parent!==null&&VBe(t.parent,t.name,t)}function VBe(t,e,n){const s=MBe(n),r=ip(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,t3(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,t3(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const UBe=/[\[\].#$\/\u0000-\u001F\u007F]/,qBe=/[\[\].#$\u0000-\u001F\u007F]/,RU=10*1024*1024,qge=function(t){return typeof t=="string"&&t.length!==0&&!UBe.test(t)},jge=function(t){return typeof t=="string"&&t.length!==0&&!qBe.test(t)},jBe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jge(t)},BBe=function(t,e,n,s){Wz(m5(t,"value"),e,n)},Wz=function(t,e,n){const s=n instanceof rs?new oje(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ay(s));if(typeof e=="function")throw new Error(t+"contains a function "+ay(s)+" with contents = "+e.toString());if(Fpe(e))throw new Error(t+"contains "+e.toString()+" "+ay(s));if(typeof e=="string"&&e.length>RU/3&&dM(e)>RU)throw new Error(t+"contains a string greater than "+RU+" utf8 bytes "+ay(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Ya(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!qge(o)))throw new Error(t+" contains an invalid key ("+o+") "+ay(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);aje(s,o),Wz(t,a,s),lje(s)}),r&&i)throw new Error(t+' contains ".value" child '+ay(s)+" in addition to actual children.")}},Bge=function(t,e,n,s){if(!jge(n))throw new Error(m5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$Be=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Bge(t,e,n)},$ge=function(t,e){if(jt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},zBe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qge(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jBe(n))throw new Error(m5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HBe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kz(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!Sz(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function zge(t,e,n){Kz(t,n),Hge(t,s=>Sz(s,e))}function rd(t,e,n){Kz(t,n),Hge(t,s=>rc(s,e)||rc(e,s))}function Hge(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(WBe(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function WBe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();ZI&&Eo("event: "+n.toString()),FT(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const KBe="repo_interrupt",GBe=25;class QBe{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HBe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=NN(),this.transactionQueueTree_=new zz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YBe(t,e,n){if(t.stats_=Cz(t.repoInfo_),t.forceRestClient_||x3e())t.server_=new xN(t.repoInfo_,(s,r,i,o)=>{MZ(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>FZ(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ii(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new mf(t.repoInfo_,e,(s,r,i,o)=>{MZ(t,s,r,i,o)},s=>{FZ(t,s)},s=>{JBe(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=M3e(t.repoInfo_,()=>new Oje(t.stats_,t.server_)),t.infoData_=new Rje,t.infoSyncTree_=new OZ({startListening:(s,r,i,o)=>{let a=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(a=nR(t.infoSyncTree_,s._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Qz(t,"connected",!1),t.serverSyncTree_=new OZ({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,u)=>{const c=o(a,u);rd(t.eventQueue_,s._path,c)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function XBe(t){const e=t.infoData_.getNode(new rs(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Gz(t){return NBe({timestamp:XBe(t)})}function MZ(t,e,n,s,r){t.dataUpdateCount++;const i=new rs(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const u=uN(n,c=>Fi(c));o=SBe(t.serverSyncTree_,i,u,r)}else{const u=Fi(n);o=Nge(t.serverSyncTree_,i,u,r)}else if(s){const u=uN(n,c=>Fi(c));o=TBe(t.serverSyncTree_,i,u)}else{const u=Fi(n);o=nR(t.serverSyncTree_,i,u)}let a=i;o.length>0&&(a=i2(t,i)),rd(t.eventQueue_,a,o)}function FZ(t,e){Qz(t,"connected",e),e===!1&&t$e(t)}function JBe(t,e){Ya(e,(n,s)=>{Qz(t,n,s)})}function Qz(t,e,n){const s=new rs("/.info/"+e),r=Fi(n);t.infoData_.updateSnapshot(s,r);const i=nR(t.infoSyncTree_,s,r);rd(t.eventQueue_,s,i)}function Wge(t){return t.nextWriteId_++}function ZBe(t,e,n){const s=kBe(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=Fi(r).withIndex(e._queryParams.getIndex());e3(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=nR(t.serverSyncTree_,e._path,i);else{const a=GS(t.serverSyncTree_,e);o=Nge(t.serverSyncTree_,e._path,i,a)}return rd(t.eventQueue_,e._path,o),qN(t.serverSyncTree_,e,n,null,!0),i},r=>(r2(t,"get for query "+ii(e)+" failed: "+r),Promise.reject(new Error(r))))}function e$e(t,e,n,s,r){r2(t,"set",{path:e.toString(),value:n,priority:s});const i=Gz(t),o=Fi(n,s),a=Fz(t.serverSyncTree_,e),u=Mge(o,a,i),c=Wge(t),h=xge(t.serverSyncTree_,e,u,c,!0);Kz(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||Ha("set at "+e+" failed: "+p);const k=Sy(t.serverSyncTree_,c,!w);rd(t.eventQueue_,e,k),i$e(t,r,p,m)});const d=Xge(t,e);i2(t,d),rd(t.eventQueue_,d,[])}function t$e(t){r2(t,"onDisconnectEvents");const e=Gz(t),n=NN();Qq(t.onDisconnect_,In(),(r,i)=>{const o=LBe(r,i,t.serverSyncTree_,e);gge(n,r,o)});let s=[];Qq(n,In(),(r,i)=>{s=s.concat(nR(t.serverSyncTree_,r,i));const o=Xge(t,r);i2(t,o)}),t.onDisconnect_=NN(),rd(t.eventQueue_,In(),s)}function n$e(t,e,n){let s;jt(e._path)===".info"?s=e3(t.infoSyncTree_,e,n):s=e3(t.serverSyncTree_,e,n),zge(t.eventQueue_,e._path,s)}function s$e(t,e,n){let s;jt(e._path)===".info"?s=qN(t.infoSyncTree_,e,n):s=qN(t.serverSyncTree_,e,n),zge(t.eventQueue_,e._path,s)}function r$e(t){t.persistentConnection_&&t.persistentConnection_.interrupt(KBe)}function r2(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Eo(n,...e)}function i$e(t,e,n,s){e&&FT(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function Kge(t,e,n){return Fz(t.serverSyncTree_,e,n)||rt.EMPTY_NODE}function Yz(t,e=t.transactionQueueTree_){if(e||o2(t,e),VT(e)){const n=Qge(t,e);Ce(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&o$e(t,rR(e),n)}else Vge(e)&&s2(e,n=>{Yz(t,n)})}function o$e(t,e,n){const s=n.map(c=>c.currentWriteId),r=Kge(t,e,s);let i=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];Ce(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Ca(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),u=e;t.server_.put(u.toString(),a,c=>{r2(t,"transaction put response",{path:u.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Sy(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();o2(t,Hz(t.transactionQueueTree_,e)),Yz(t,t.transactionQueueTree_),rd(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)FT(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ha("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}i2(t,e)}},o)}function i2(t,e){const n=Gge(t,e),s=rR(n),r=Qge(t,n);return a$e(t,r,s),s}function a$e(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],u=Ca(n,a.path);let c=!1,h;if(Ce(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,h=a.abortReason,r=r.concat(Sy(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=GBe)c=!0,h="maxretry",r=r.concat(Sy(t.serverSyncTree_,a.currentWriteId,!0));else{const d=Kge(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){Wz("transaction failed: Data returned ",p,a.path);let m=Fi(p);typeof p=="object"&&p!=null&&ip(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,k=Gz(t),P=Mge(m,d,k);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=Wge(t),i.splice(i.indexOf(w),1),r=r.concat(xge(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(Sy(t.serverSyncTree_,w,!0))}else c=!0,h="nodata",r=r.concat(Sy(t.serverSyncTree_,a.currentWriteId,!0))}rd(t.eventQueue_,n,r),r=[],c&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}o2(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)FT(s[o]);Yz(t,t.transactionQueueTree_)}function Gge(t,e){let n,s=t.transactionQueueTree_;for(n=jt(e);n!==null&&VT(s)===void 0;)s=Hz(s,n),e=fs(e),n=jt(e);return s}function Qge(t,e){const n=[];return Yge(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Yge(t,e,n){const s=VT(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);s2(e,r=>{Yge(t,r,n)})}function o2(t,e){const n=VT(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Fge(e,n.length>0?n:void 0)}s2(e,s=>{o2(t,s)})}function Xge(t,e){const n=rR(Gge(t,e)),s=Hz(t.transactionQueueTree_,e);return FBe(s,r=>{PU(t,r)}),PU(t,s),Uge(s,r=>{PU(t,r)}),n}function PU(t,e){const n=VT(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ce(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Sy(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Fge(e,void 0):n.length=i+1,rd(t.eventQueue_,rR(e),r);for(let o=0;o<s.length;o++)FT(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function l$e(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function u$e(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ha(`Invalid query segment '${n}' in query '${t}'`)}return e}const VZ=function(t,e){const n=c$e(t),s=n.namespace;n.domain==="firebase.com"&&Af(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Af("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||E3e();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Qpe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new rs(n.pathString)}},c$e=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=l$e(t.substring(h,d)));const p=u$e(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class h$e{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ii(this.snapshot.exportVal())}}class d$e{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jge{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xz{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Yt(this._path)?null:rge(this._path)}get ref(){return new op(this._repo,this._path)}get _queryIdentifier(){const e=TZ(this._queryParams),n=Ez(e);return n==="{}"?"default":n}get _queryObject(){return TZ(this._queryParams)}isEqual(e){if(e=Hn(e),!(e instanceof Xz))return!1;const n=this._repo===e._repo,s=Sz(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+ije(this._path)}}class op extends Xz{constructor(e,n){super(e,n,new Pz,!1)}get parent(){const e=oge(this._path);return e===null?null:new op(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class QS{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new rs(e),s=n3(this.ref,e);return new QS(this._node.getChild(n),s,tr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new QS(s,n3(this.ref,n),tr)))}hasChild(e){const n=new rs(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jz(t,e){return t=Hn(t),t._checkNotDeleted("ref"),e!==void 0?n3(t._root,e):t._root}function n3(t,e){return t=Hn(t),jt(t._path)===null?$Be("child","path",e):Bge("child","path",e),new op(t._repo,ai(t._path,e))}function Zz(t){return $ge("remove",t._path),a2(t,null)}function a2(t,e){t=Hn(t),$ge("set",t._path),BBe("set",e,t._path);const n=new uM;return e$e(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function eH(t){t=Hn(t);const e=new Jge(()=>{}),n=new l2(e);return ZBe(t._repo,t,n).then(s=>new QS(s,new op(t._repo,t._path),t._queryParams.getIndex()))}class l2{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new h$e("value",this,new QS(e.snapshotNode,new op(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new d$e(this,e,n):null}matches(e){return e instanceof l2?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function f$e(t,e,n,s,r){const i=new Jge(n,void 0),o=new l2(i);return n$e(t._repo,t,o),()=>s$e(t._repo,t,o)}function tH(t,e,n,s){return f$e(t,"value",e)}gBe(op);wBe(op);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const p$e="FIREBASE_DATABASE_EMULATOR_HOST",s3={};let g$e=!1;function m$e(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=vd(i);t.repoInfo_=new Qpe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function _$e(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Af("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Eo("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=VZ(i,r),a=o.repoInfo,u;typeof process<"u"&&iZ&&(u=iZ[p$e]),u?(i=`http://${u}?ns=${a.namespace}`,o=VZ(i,r),a=o.repoInfo):o.repoInfo.secure;const c=new D3e(t.name,t.options,e);zBe("Invalid Firebase Database URL",o),Yt(o.path)||Af("Database URL must point to the root of a Firebase Database (not including a child path).");const h=v$e(a,t,c,new N3e(t,n));return new w$e(h,t)}function y$e(t,e){const n=s3[e];(!n||n[t.key]!==t)&&Af(`Database ${e}(${t.repoInfo_}) has already been deleted.`),r$e(t),delete n[t.key]}function v$e(t,e,n,s){let r=s3[e.name];r||(r={},s3[e.name]=r);let i=r[t.toURLString()];return i&&Af("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new QBe(t,g$e,n,s),r[t.toURLString()]=i,i}class w$e{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(YBe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new op(this._repo,In())),this._rootInternal}_delete(){return this._rootInternal!==null&&(y$e(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Af("Cannot call "+e+" on a deleted database.")}}function u2(t=pM(),e){const n=jA(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=f5("database");s&&b$e(n,...s)}return n}function b$e(t,e,n,s={}){t=Hn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Zg(s,i.repoInfo_.emulatorOptions))return;Af("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Af('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new HP(HP.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:p5(s.mockUserToken,t.app.options.projectId);o=new HP(a)}vd(e)&&(cM(e),hM("Database",!0)),m$e(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E$e(t){m3e(n_),em(new Tf("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return _$e(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Ll(oZ,aZ,t),Ll(oZ,aZ,"esm2020")}mf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};mf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};E$e();var H_={};const Zr={apiKey:H_.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:H_.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:H_.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:H_.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:H_.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:H_.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:H_.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:Zr.apiKey?"설정됨":"설정 안됨",authDomain:Zr.authDomain?"설정됨":"설정 안됨",projectId:Zr.projectId?"설정됨":"설정 안됨",storageBucket:Zr.storageBucket?"설정됨":"설정 안됨",messagingSenderId:Zr.messagingSenderId?"설정됨":"설정 안됨",appId:Zr.appId?"설정됨":"설정 안됨",databaseURL:Zr.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:Zr.apiKey?`${Zr.apiKey.substring(0,10)}...`:"없음",authDomain:Zr.authDomain,projectId:Zr.projectId,databaseURL:Zr.databaseURL?"설정됨":"없음"});(!Zr.apiKey||!Zr.authDomain||!Zr.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let bs,Qs,ky,xE,NE;Zr.apiKey&&Zr.authDomain&&Zr.projectId?(bs=cde(Zr),Qs=PM(bs),ky=new Rl,xE=ape(bs),NE=d3e(bs),u2(bs)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Qs=null,ky=null,xE=null,NE=null);const T$e=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Qs},get db(){return xE},get firebaseApp(){return bs},get googleProvider(){return ky},get storage(){return NE}},Symbol.toStringTag,{value:"Module"}));function c2(){return Na(Uhe)}const _s=qc(null),Yc=qc(!0),L1=qc(null);let Tw=null,UZ=!1;function h2(){const t=c2(),e=bs?ape(bs):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),bs?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async u=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const c=3;let h=0;for(;h<c;)try{console.log("🔍 사용자 정보 확인 중:",u.email,`(시도 ${h+1}/${c})`);const d=HM(e,"users",u.uid),p=await qS(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await jS(d,{lastLoginAt:Nb()},{merge:!0}),{...u,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",u.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(u.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:u.email,adminEmails:w,isAdminEmail:k});const P={uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL,role:k?"admin":"student",createdAt:Nb(),lastLoginAt:Nb()};console.log("💾 새 사용자 정보 저장 중:",P),await jS(d,P),console.log("✅ 새 사용자 등록 완료:",u.email);const O=await qS(d);if(O.exists())console.log("✅ 사용자 등록 확인 완료:",O.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...u,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${c}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!bs,db:!!e,auth:!!Qs,userUid:u.uid,userEmail:u.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<c)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...u,role:"student"}},s=async()=>{if(!Yc.value){Yc.value=!0,L1.value=null;try{if(!Qs||!ky)throw new Error("Firebase is not configured.");const u=await AM(Qs,ky);console.log("✅ Google 로그인 팝업 성공:",u.user.email);try{if(bs&&e)_s.value=await n(u.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",_s.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),_s.value=null,Qs&&await tg(Qs),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),Yc.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!_s.value,userRole:_s.value?.role,userEmail:_s.value?.email})}catch(c){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",c),_s.value=null,Qs&&await tg(Qs),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),Yc.value=!1;return}Yc.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(u){console.error("❌ Google 로그인 팝업 실패:",u),L1.value=u.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),Yc.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Qs),!Qs){console.log("❌ useAuth: auth 객체가 없음");return}try{Tw&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Tw(),Tw=null),console.log("🔍 useAuth: Firebase signOut 실행"),await tg(Qs),console.log("✅ useAuth: Firebase signOut 성공"),_s.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(u){console.error("❌ useAuth: 로그아웃 실패:",u),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!UZ){if(UZ=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!bs,auth:!!Qs,db:!!e}),!Qs){console.log("⚠️ Firebase Auth가 초기화되지 않음"),Yc.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Tw=TM(Qs,async u=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",u?u.email:"없음"),u)if(console.log("✅ 인증된 사용자 감지:",{uid:u.uid,email:u.email,displayName:u.displayName,emailVerified:u.emailVerified}),bs&&e)try{_s.value=await n(u),console.log("✅ 사용자 역할 설정 완료:",_s.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!_s.value,userRole:_s.value?.role,userEmail:_s.value?.email})}catch(c){console.error("❌ 사용자 역할 가져오기 실패:",c),console.error("❌ 오류 코드:",c.code),console.error("❌ 오류 메시지:",c.message),_s.value=null,Qs&&await tg(Qs),L1.value=c.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),Yc.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),_s.value=null,Qs&&await tg(Qs),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),_s.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");Yc.value=!1})}};AT(()=>{Tw&&Tw()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:_s.value,isAuthenticated:!!_s.value,userRole:_s.value?.role,firebaseApp:!!bs,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!bs),console.log("  - Firebase Auth:",!!Qs),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!ky),bs&&console.log("  - Firebase Config:",{apiKey:bs.options.apiKey?"설정됨":"설정 안됨",authDomain:bs.options.authDomain?"설정됨":"설정 안됨",projectId:bs.options.projectId?"설정됨":"설정 안됨",storageBucket:bs.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!bs,auth:!!Qs,db:!!e,googleProvider:!!ky});return{user:He(()=>_s.value),loading:He(()=>Yc.value),error:He(()=>L1.value),isAuthenticated:He(()=>!!_s.value),displayName:He(()=>_s.value?.displayName||"사용자"),email:He(()=>_s.value?.email||""),photoURL:He(()=>_s.value?.photoURL||""),isFirebaseConfigured:He(()=>!!bs),userRole:He(()=>_s.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const C$e={id:"app"},I$e=ew({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=h2(),o=oM(),a=aM();return ST(()=>{e()}),gg([n,s,r],([u,c,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${u}, userRole=${c}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),u?c==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):c==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(u,c)=>{const h=BL("router-view");return MA(),HL("div",C$e,[ji(h)])}}}),S$e=t=>t,k$e=S$e,A$e=[{path:"/",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./MainLayout-CbUPrBs9-h46N59WV-BF4eerBE-BaJy3rXd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),er([0,1,2,3,4,5,6,7,8,9,10,11])),pa([0,1,2,3,4,5,6,7,8,9,10,11])),Dp([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),children:[{path:"",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./IndexPage-BLAmILuN-HA-OPItk-BSUxoHWi-Dav2vSnU.js"),__vite__mapDeps([12,1,2,3,10,13,8,9,14,11])),er([12,1,2,3,10,13,8,9,14,11])),pa([12,1,2,3,10,13,8,9,14,11])),Dp([14,1,2,3,10,15,8,9,16,12,17]))},{path:"survey-results",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./SurveyResults-DhayuQfj-D0iteWpb-DMbR_9Gd-BJUyk6is.js"),__vite__mapDeps([15,6,3,1,2,5,16,13,17])),er([15,6,3,1,2,5,16,13,17])),pa([15,6,3,1,2,5,16,13,17])),Dp([18,6,3,1,2,5,19,15,20,21]))}]},{path:"/logout",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./LogoutPage-D1GfaPnm-1CZDGcS4-CD9chhzh-Bhu1IBHp.js"),__vite__mapDeps([18,2,3,10,13,4])),er([18,2,3,10,13,4])),pa([18,2,3,10,13,4])),Dp([22,2,3,10,15,4,23]))},{path:"/poll-result",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./PollResultPage-B3rDVM-7-BRBHzC5g-Cldj4UxO-Cl7Zdf_z.js"),__vite__mapDeps([19,6,3,13,17])),er([19,6,3,13,17])),pa([19,6,3,13,17])),Dp([24,6,3,15,20,21,25]))},{path:"/study/:courseId",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./StudentView-ZIAbzNqK-CBiLqkGJ-D_8eUP6O-C_q9m6Eq.js"),__vite__mapDeps([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),er([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),pa([20,1,2,3,5,7,4,8,9,10,6,14,13,16,17])),Dp([26,1,2,3,5,7,4,8,9,10,6,11,16,15,19,20,21,27])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",u=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:u,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:u,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>ju(()=>Mi(()=>Is(()=>Cn(()=>import("./ErrorNotFound-BPK_S1F5-DtaYr84p-DaOkcD4U-BENG9V6Z.js"),[]),[]),[]),[])}],xU=k$e(function(){return f2e({scrollBehavior:()=>({left:0,top:0}),routes:A$e,history:BMe("/")})});async function R$e(t,e){const n=t(I$e);n.use(hMe,e);const s=e_(typeof xU=="function"?await xU({}):xU);return{app:n,router:s}}const r3={xs:18,sm:24,md:32,lg:38,xl:46},UT={size:String};function qT(t,e=r3){return He(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function d2(t,e){return t!==void 0&&t()||e}function nH(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function cg(t,e){return t!==void 0?e.concat(t()):e}function f2(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function sH(t,e,n,s,r,i){e.key=s+r;const o=st(t,e,n);return r===!0?OA(o,i()):o}const qZ="0 0 24 24",NU=t=>t,DU=t=>`ionicons ${t}`,Zge={"mdi-":t=>`mdi ${t}`,"icon-":NU,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":DU,"ion-ios":DU,"ion-logo":DU,"iconfont ":NU,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":NU},eme={o_:"-outlined",r_:"-round",s_:"-sharp"},tme={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},P$e=new RegExp("^("+Object.keys(Zge).join("|")+")"),x$e=new RegExp("^("+Object.keys(eme).join("|")+")"),jZ=new RegExp("^("+Object.keys(tme).join("|")+")"),N$e=/^[Mm]\s?[-+]?\.?\d/,D$e=/^img:/,O$e=/^svguse:/,L$e=/^ion-/,M$e=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,Tv=t_({name:"QIcon",props:{...UT,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=yd(),s=qT(t),r=He(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=He(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(N$e.test(a)===!0){const[h,d=qZ]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return st("path",{style:w,d:m,transform:k})})}}if(D$e.test(a)===!0)return{img:!0,src:a.substring(4)};if(O$e.test(a)===!0){const[h,d=qZ]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let u=" ";const c=a.match(P$e);if(c!==null)o=Zge[c[1]](a);else if(M$e.test(a)===!0)o=a;else if(L$e.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(jZ.test(a)===!0){o="notranslate material-symbols";const h=a.match(jZ);h!==null&&(a=a.substring(6),o+=tme[h[1]]),u=a}else{o="notranslate material-icons";const h=a.match(x$e);h!==null&&(a=a.substring(2),o+=eme[h[1]]),u=a}return{cls:o,content:u}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?st(t.tag,o,d2(e.default)):i.value.img===!0?st(t.tag,o,cg(e.default,[st("img",{src:i.value.src})])):i.value.svg===!0?st(t.tag,o,cg(e.default,[st("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?st(t.tag,o,cg(e.default,[st("svg",{viewBox:i.value.viewBox},[st("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),st(t.tag,o,cg(e.default,[i.value.content])))}}}),p2=t_({name:"QAvatar",props:{...UT,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=qT(t),s=He(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=He(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[st(Tv,{name:t.icon})]:void 0;return st("div",{class:s.value,style:n.value},[st("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},f2(e.default,i))])}}}),g2={size:{type:[String,Number],default:"1em"},color:String};function m2(t){return{cSize:He(()=>t.size in r3?`${r3[t.size]}px`:t.size),classes:He(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const iR=t_({name:"QSpinner",props:{...g2,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=m2(t);return()=>st("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[st("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function _2(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function rH(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=kh(t);if(e)return e.$el||e}function iH(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function F$e(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function BZ(t,e,n,s){n.modifiers.stop===!0&&UA(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),u=JL(t),{left:c,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${u.left-c-w}px`,O=`${(p-m)/2}px`,M=i?O:`${u.top-h-w}px`;a.className="q-ripple__inner",_2(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function $Z(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const y2=YL({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&BZ(r,t,s,r.qKeyEvent===!0)},keystart:F$e(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&_E(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&BZ(r,t,s,!0)},300)};$Z(s,e),t.__qripple=s,ZL(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&$Z(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),eM(e,"main"),delete t._qripple)}}),nme={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},V$e=Object.keys(nme),v2={align:{type:String,validator:t=>V$e.includes(t)}};function w2(t){return He(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${nme[e]}`})}function oH(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function b2(t){return t.appContext.config.globalProperties.$router!==void 0}function aH(t){return t.isUnmounted===!0||t.isDeactivated===!0}function zZ(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function HZ(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function U$e(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function WZ(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function q$e(t,e){return Array.isArray(t)===!0?WZ(t,e):Array.isArray(e)===!0?WZ(e,t):t===e}function j$e(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(q$e(t[n],e[n])===!1)return!1;return!0}const sme={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},lH={...sme,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function E2({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=yd(),{props:s,proxy:r,emit:i}=n,o=b2(n),a=He(()=>s.disable!==!0&&s.href!==void 0),u=He(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),c=He(()=>u.value===!0?M(s.to):null),h=He(()=>c.value!==null),d=He(()=>a.value===!0||h.value===!0),p=He(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=He(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:c.value.href,target:s.target}:{}),w=He(()=>{if(h.value===!1)return-1;const{matched:H}=c.value,{length:J}=H,I=H[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(HZ.bind(null,I));if(y!==-1)return y;const T=zZ(H[J-2]);return J>1&&zZ(I)===T&&v[v.length-1].path!==T?v.findIndex(HZ.bind(null,H[J-2])):y}),k=He(()=>h.value===!0&&w.value!==-1&&U$e(r.$route.params,c.value.params)),P=He(()=>k.value===!0&&w.value===r.$route.matched.length-1&&j$e(r.$route.params,c.value.params)),O=He(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const J=I=>V(H,I);i("click",H,J),H.defaultPrevented!==!0&&J()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:c,linkIsActive:k,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const KZ={none:0,xs:4,sm:8,md:16,lg:24,xl:32},B$e={xs:8,sm:10,md:14,lg:20,xl:24},$$e=["button","submit","reset"],z$e=/[^\s]\/[^\s]/,H$e=["flat","outline","push","unelevated"];function W$e(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const K$e={...UT,...sme,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...H$e.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...v2.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},G$e={...K$e,round:Boolean};function Q$e(t){const e=qT(t,B$e),n=w2(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=E2({fallbackTag:"button"}),u=He(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in KZ?KZ[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),c=He(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=He(()=>t.disable!==!0&&t.loading!==!0),d=He(()=>h.value===!0?t.tabindex||0:-1),p=He(()=>W$e(t,"standard")),m=He(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):$$e.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&z$e.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=He(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${c.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=He(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:u,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:bl}=Zh;let Cw=null,Iw=null,Sw=null;const T2=t_({name:"QBtn",props:{...G$e,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=yd(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:u,linkTag:c,navigateOnClick:h,isActionable:d}=Q$e(t),p=qc(null),m=qc(null);let w=null,k,P=null;const O=He(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=He(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=He(()=>({center:t.round})),q=He(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=He(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:$d}}),J=He(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",$d,!0),document.removeEventListener("keyup",ae,bl),p.value?.removeEventListener("blur",ae,bl)};document.addEventListener("keydown",$d,!0),document.addEventListener("keyup",ae,bl),p.value.addEventListener("blur",ae,bl)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),_E(K,[13,32])===!0&&Iw!==p.value&&(Iw!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),Iw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,bl)),$d(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&(Cw!==p.value&&(Cw!==null&&E(),Cw=p.value,w=K.target,w.addEventListener("touchcancel",S,bl),w.addEventListener("touchend",S,bl)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function T(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Sw!==p.value&&(Sw!==null&&E(),Sw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,bl)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(Iw===p.value&&_E(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&mE(ne),K.cancelBubble===!0&&UA(ne),p.value.dispatchEvent(ne),$d(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&(Cw===p.value||Sw===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Cw===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,bl),w.removeEventListener("touchend",S,bl)),Cw=w=null),Sw===p.value&&(document.removeEventListener("mouseup",S,bl),Sw=null),Iw===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,bl),Iw=null),p.value?.classList.remove("q-btn--active")}function b(K){$d(K),K.qSkipRipple=!0}return kT(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(st(Tv,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&K.push(st("span",{class:"block"},[t.label])),K=cg(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(st(Tv,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[st("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(st("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[st("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(st("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(st(QL,{name:"q-transition--fade"},()=>t.loading===!0?[st("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[st(iR)])]:null)),OA(st(c.value,J.value,ne),[[y2,M.value,void 0,V.value]])}}});let Y$e=1,X$e=document.body;function C2(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${Y$e++}`:t,oN.globalNodes!==void 0){const s=oN.globalNodes.class;s!==void 0&&(n.className=s)}return X$e.appendChild(n),n}function uH(t){t.remove()}let J$e=0;const KP={},GP={},Bu={},rme={},Z$e=/^\s*$/,ime=[],e5e=[void 0,null,!0,!1,""],cH=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],t5e=["top-left","top-right","bottom-left","bottom-right"],mI={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function ome(t,e,n){if(!t)return xC("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,KP),Jg(t)===!1&&(r.type&&Object.assign(r,mI[r.type]),t={message:t}),Object.assign(r,mI[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=iR),r.spinner=e_(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:GZ(r.message)||GZ(r.caption)},r.position){if(cH.includes(r.position)===!1)return xC("wrong position",t)}else r.position="bottom";if(e5e.includes(r.timeout)===!0)r.timeout=5e3;else{const u=Number(r.timeout);if(isNaN(u)||u<0)return xC("wrong timeout",t);r.timeout=Number.isFinite(u)?u:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(KP.actions)===!0?KP.actions:[]).concat(Array.isArray(mI[t.type]?.actions)===!0?mI[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:u,noDismiss:c,...h})=>({flat:!0,...h,onClick:typeof u=="function"?()=>{u(),c!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(u=>`${u.label}*${u.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const u=Bu[r.position].value.indexOf(n.notif);Bu[r.position].value[u]=r}else{const u=GP[r.meta.group];if(u===void 0){if(r.meta.uid=J$e++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Bu[r.position].value.splice(Math.floor(Bu[r.position].value.length/2),0,r);else{const c=r.position.indexOf("top")!==-1?"unshift":"push";Bu[r.position].value[c](r)}r.group!==void 0&&(GP[r.meta.group]=r)}else{if(u.meta.timer&&(clearTimeout(u.meta.timer),u.meta.timer=void 0),r.badgePosition!==void 0){if(t5e.includes(r.badgePosition)===!1)return xC("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=u.meta.uid,r.meta.badge=u.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const c=Bu[r.position].value.indexOf(u);Bu[r.position].value[c]=GP[r.meta.group]=r}}const a=()=>{n5e(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return u=>{u!==void 0?xC("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return u=>{if(s!==void 0)if(u===void 0)s.dismiss();else{const c=Object.assign({},s.config,u,{group:!1,position:r.position});ome(c,e,s)}}}function n5e(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Bu[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete GP[t.meta.group];const n=ime[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}Bu[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function GZ(t){return t!=null&&Z$e.test(t)!==!0}function xC(t,e){return console.error(`Notify: ${t}`,e),!1}function s5e(){return t_({name:"QNotifications",devtools:{hide:!0},setup(){return()=>st("div",{class:"q-notifications"},cH.map(t=>st(LLe,{key:t,class:rme[t],tag:"div",name:`q-notification--${t}`},()=>Bu[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(st(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(st(Tv,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(st(p2,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>st("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[st("div",a),st("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(st("div",o,i))}const r=[st("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(st("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(st("div",{class:n.actionsClass},e.actions.map(i=>st(T2,i)))),n.badge>1&&r.push(st("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),st("div",{ref:i=>{ime[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[st("div",{class:n.wrapperClass},r)])}))))}})}const r5e={setDefaults(t){Jg(t)===!0&&Object.assign(KP,t)},registerType(t,e){Jg(e)===!0&&(mI[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>ome(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){cH.forEach(s=>{Bu[s]=qc([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;rme[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=C2("q-notify");lMe(s5e(),e).mount(n)}}},i5e={config:{},plugins:{Notify:r5e}},o5e="/";async function a5e({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const u=r(a);u!==null&&(window.location.href=u)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:o5e})}catch(u){if(u&&u.url){i(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}R$e(Ohe,i5e).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([ju(()=>Mi(()=>Is(()=>Cn(()=>import("./pinia-CU9SUkzn-Dk66cb7x-DTm8Gy-7-BANrqH3G.js"),__vite__mapDeps([21,9])),er([21,9])),pa([21,9])),Dp([28,9]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");a5e(t,r)})});const l5e=Object.freeze(Object.defineProperty({__proto__:null,$:Zh,A:sH,B:f2,C:$d,D:ew,E:HL,F:FA,G:ji,H:MA,I:T2,J:UA,K:yl,L:tw,M:mE,N:ST,O:aM,P:WL,Q:Tv,R:y2,S:LL,T:Y$,U:xL,V:KL,W:oM,X:c2,Y:Jh,Z:kT,_:Xg,a:sp,a$:sM,a0:Wy,a1:AT,a2:cg,get a3(){return bs},a4:u2,a5:tH,a6:Jz,a7:nM,get a8(){return NE},a9:bz,aA:eM,aB:s5,aC:ZL,aD:JL,aE:t5,aF:tM,aG:VL,aH:FL,aI:aH,aJ:o5,aK:Jg,aL:PM,aM:Va,aN:H$,aO:p2,aP:Z$,aQ:QL,aR:xA,aS:J$,aT:iR,aU:BL,aV:qL,aW:iH,aX:Sb,aY:jL,aZ:LA,a_:b2,aa:_z,get ab(){return xE},ac:HM,ad:oz,ae:Nb,af:vz,ag:yz,ah:wz,ai:jS,aj:qS,ak:lz,al:ju,am:az,an:lH,ao:E2,ap:_E,aq:nH,ar:h2,as:a2,at:eH,au:CT,av:IT,aw:kh,ax:Zz,ay:OA,az:YL,b:gf,b0:u5,b1:l5,b2:e5,b3:gE,b4:oH,b5:$$,b6:C2,b7:uH,b8:n5,b9:v2,ba:w2,bb:$A,bc:Ku,bd:Gu,be:Rl,bf:td,bg:Qu,bh:EM,bi:CM,bj:RM,bk:HA,bl:wM,bm:mM,bn:xS,bo:kM,bp:vM,bq:TM,br:bM,bs:gM,bt:_M,bu:AM,bv:tg,bw:g2,bx:m2,by:T$e,c:j$,d:He,e:N$,f:Na,g:NL,h:W$,i:Pr,j:t_,k:yd,l:st,m:e_,n:DA,o:D$,p:d2,q:a5,r:qc,s:r5,t:en,u:i5,v:rH,w:gg,x:_2,y:UT,z:qT},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hH(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ts={},Lb=[],Dh=()=>{},u5e=()=>!1,I2=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),dH=t=>t.startsWith("onUpdate:"),Ei=Object.assign,fH=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},c5e=Object.prototype.hasOwnProperty,Vn=(t,e)=>c5e.call(t,e),ft=Array.isArray,Mb=t=>S2(t)==="[object Map]",ame=t=>S2(t)==="[object Set]",At=t=>typeof t=="function",ar=t=>typeof t=="string",i_=t=>typeof t=="symbol",Ps=t=>t!==null&&typeof t=="object",lme=t=>(Ps(t)||At(t))&&At(t.then)&&At(t.catch),ume=Object.prototype.toString,S2=t=>ume.call(t),h5e=t=>S2(t).slice(8,-1),cme=t=>S2(t)==="[object Object]",pH=t=>ar(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,r0=hH(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),k2=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},d5e=/-(\w)/g,Wl=k2(t=>t.replace(d5e,(e,n)=>n?n.toUpperCase():"")),f5e=/\B([A-Z])/g,iw=k2(t=>t.replace(f5e,"-$1").toLowerCase()),A2=k2(t=>t.charAt(0).toUpperCase()+t.slice(1)),OU=k2(t=>t?`on${A2(t)}`:""),Tg=(t,e)=>!Object.is(t,e),LU=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},i3=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},p5e=t=>{const e=parseFloat(t);return isNaN(e)?t:e},g5e=t=>{const e=ar(t)?Number(t):NaN;return isNaN(e)?t:e};let QZ;const R2=()=>QZ||(QZ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function oR(t){if(ft(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ar(s)?v5e(s):oR(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ar(t)||Ps(t))return t}const m5e=/;(?![^(]*\))/g,_5e=/:([^]+)/,y5e=/\/\*[^]*?\*\//g;function v5e(t){const e={};return t.replace(y5e,"").split(m5e).forEach(n=>{if(n){const s=n.split(_5e);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function aR(t){let e="";if(ar(t))e=t;else if(ft(t))for(let n=0;n<t.length;n++){const s=aR(t[n]);s&&(e+=s+" ")}else if(Ps(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const w5e="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",b5e=hH(w5e);function hme(t){return!!t||t===""}const dme=t=>!!(t&&t.__v_isRef===!0),gH=t=>ar(t)?t:t==null?"":ft(t)||Ps(t)&&(t.toString===ume||!At(t.toString))?dme(t)?gH(t.value):JSON.stringify(t,fme,2):String(t),fme=(t,e)=>dme(e)?fme(t,e.value):Mb(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[MU(s,i)+" =>"]=r,n),{})}:ame(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>MU(n))}:i_(e)?MU(e):Ps(e)&&!ft(e)&&!cme(e)?String(e):e,MU=(t,e="")=>{var n;return i_(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fo;class pme{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=fo,!e&&fo&&(this.index=(fo.scopes||(fo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=fo;try{return fo=this,e()}finally{fo=n}}}on(){++this._on===1&&(this.prevScope=fo,fo=this)}off(){this._on>0&&--this._on===0&&(fo=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function gme(t){return new pme(t)}function mH(){return fo}function mme(t,e=!1){fo&&fo.cleanups.push(t)}let cs;const FU=new WeakSet;class _me{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,fo&&fo.active&&fo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,FU.has(this)&&(FU.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vme(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,YZ(this),wme(this);const e=cs,n=Cc;cs=this,Cc=!0;try{return this.fn()}finally{bme(this),cs=e,Cc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vH(e);this.deps=this.depsTail=void 0,YZ(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?FU.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){o3(this)&&this.run()}get dirty(){return o3(this)}}let yme=0,i0,o0;function vme(t,e=!1){if(t.flags|=8,e){t.next=o0,o0=t;return}t.next=i0,i0=t}function _H(){yme++}function yH(){if(--yme>0)return;if(o0){let e=o0;for(o0=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;i0;){let e=i0;for(i0=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function wme(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function bme(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),vH(s),E5e(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function o3(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Eme(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Eme(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===YS)||(t.globalVersion=YS,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!o3(t))))return;t.flags|=2;const e=t.dep,n=cs,s=Cc;cs=t,Cc=!0;try{wme(t);const r=t.fn(t._value);(e.version===0||Tg(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{cs=n,Cc=s,bme(t),t.flags&=-3}}function vH(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)vH(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function E5e(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Cc=!0;const Tme=[];function Rf(){Tme.push(Cc),Cc=!1}function Pf(){const t=Tme.pop();Cc=t===void 0?!0:t}function YZ(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=cs;cs=void 0;try{e()}finally{cs=n}}}let YS=0;class T5e{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wH{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!cs||!Cc||cs===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==cs)n=this.activeLink=new T5e(cs,this),cs.deps?(n.prevDep=cs.depsTail,cs.depsTail.nextDep=n,cs.depsTail=n):cs.deps=cs.depsTail=n,Cme(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=cs.depsTail,n.nextDep=void 0,cs.depsTail.nextDep=n,cs.depsTail=n,cs.deps===n&&(cs.deps=s)}return n}trigger(e){this.version++,YS++,this.notify(e)}notify(e){_H();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{yH()}}}function Cme(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Cme(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const jN=new WeakMap,Yy=Symbol(""),a3=Symbol(""),XS=Symbol("");function To(t,e,n){if(Cc&&cs){let s=jN.get(t);s||jN.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new wH),r.map=s,r.key=n),r.track()}}function Wd(t,e,n,s,r,i){const o=jN.get(t);if(!o){YS++;return}const a=u=>{u&&u.trigger()};if(_H(),e==="clear")o.forEach(a);else{const u=ft(t),c=u&&pH(n);if(u&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===XS||!i_(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(XS)),e){case"add":u?c&&a(o.get("length")):(a(o.get(Yy)),Mb(t)&&a(o.get(a3)));break;case"delete":u||(a(o.get(Yy)),Mb(t)&&a(o.get(a3)));break;case"set":Mb(t)&&a(o.get(Yy));break}}yH()}function C5e(t,e){const n=jN.get(t);return n&&n.get(e)}function kw(t){const e=_n(t);return e===t?e:(To(e,"iterate",XS),Ml(t)?e:e.map(Hi))}function P2(t){return To(t=_n(t),"iterate",XS),t}const I5e={__proto__:null,[Symbol.iterator](){return VU(this,Symbol.iterator,Hi)},concat(...t){return kw(this).concat(...t.map(e=>ft(e)?kw(e):e))},entries(){return VU(this,"entries",t=>(t[1]=Hi(t[1]),t))},every(t,e){return Rd(this,"every",t,e,void 0,arguments)},filter(t,e){return Rd(this,"filter",t,e,n=>n.map(Hi),arguments)},find(t,e){return Rd(this,"find",t,e,Hi,arguments)},findIndex(t,e){return Rd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Rd(this,"findLast",t,e,Hi,arguments)},findLastIndex(t,e){return Rd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Rd(this,"forEach",t,e,void 0,arguments)},includes(...t){return UU(this,"includes",t)},indexOf(...t){return UU(this,"indexOf",t)},join(t){return kw(this).join(t)},lastIndexOf(...t){return UU(this,"lastIndexOf",t)},map(t,e){return Rd(this,"map",t,e,void 0,arguments)},pop(){return NC(this,"pop")},push(...t){return NC(this,"push",t)},reduce(t,...e){return XZ(this,"reduce",t,e)},reduceRight(t,...e){return XZ(this,"reduceRight",t,e)},shift(){return NC(this,"shift")},some(t,e){return Rd(this,"some",t,e,void 0,arguments)},splice(...t){return NC(this,"splice",t)},toReversed(){return kw(this).toReversed()},toSorted(t){return kw(this).toSorted(t)},toSpliced(...t){return kw(this).toSpliced(...t)},unshift(...t){return NC(this,"unshift",t)},values(){return VU(this,"values",Hi)}};function VU(t,e,n){const s=P2(t),r=s[e]();return s!==t&&!Ml(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const S5e=Array.prototype;function Rd(t,e,n,s,r,i){const o=P2(t),a=o!==t&&!Ml(t),u=o[e];if(u!==S5e[e]){const d=u.apply(t,i);return a?Hi(d):d}let c=n;o!==t&&(a?c=function(d,p){return n.call(this,Hi(d),p,t)}:n.length>2&&(c=function(d,p){return n.call(this,d,p,t)}));const h=u.call(o,c,s);return a&&r?r(h):h}function XZ(t,e,n,s){const r=P2(t);let i=n;return r!==t&&(Ml(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,Hi(a),u,t)}),r[e](i,...s)}function UU(t,e,n){const s=_n(t);To(s,"iterate",XS);const r=s[e](...n);return(r===-1||r===!1)&&TH(n[0])?(n[0]=_n(n[0]),s[e](...n)):r}function NC(t,e,n=[]){Rf(),_H();const s=_n(t)[e].apply(t,n);return yH(),Pf(),s}const k5e=hH("__proto__,__v_isRef,__isVue"),Ime=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(i_));function A5e(t){i_(t)||(t=String(t));const e=_n(this);return To(e,"has",t),e.hasOwnProperty(t)}class Sme{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?V5e:Pme:i?Rme:Ame).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ft(e);if(!r){let u;if(o&&(u=I5e[n]))return u;if(n==="hasOwnProperty")return A5e}const a=Reflect.get(e,n,_i(e)?e:s);return(i_(n)?Ime.has(n):k5e(n))||(r||To(e,"get",n),i)?a:_i(a)?o&&pH(n)?a:a.value:Ps(a)?r?xme(a):o_(a):a}}class kme extends Sme{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=cm(i);if(!Ml(s)&&!cm(s)&&(i=_n(i),s=_n(s)),!ft(e)&&_i(i)&&!_i(s))return u?!1:(i.value=s,!0)}const o=ft(e)&&pH(n)?Number(n)<e.length:Vn(e,n),a=Reflect.set(e,n,s,_i(e)?e:r);return e===_n(r)&&(o?Tg(s,i)&&Wd(e,"set",n,s):Wd(e,"add",n,s)),a}deleteProperty(e,n){const s=Vn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Wd(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!i_(n)||!Ime.has(n))&&To(e,"has",n),s}ownKeys(e){return To(e,"iterate",ft(e)?"length":Yy),Reflect.ownKeys(e)}}class R5e extends Sme{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const P5e=new kme,x5e=new R5e,N5e=new kme(!0),l3=t=>t,M1=t=>Reflect.getPrototypeOf(t);function D5e(t,e,n){return function(...s){const r=this.__v_raw,i=_n(r),o=Mb(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),h=n?l3:e?BN:Hi;return!e&&To(i,"iterate",u?a3:Yy),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function F1(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function O5e(t,e){const n={get(s){const r=this.__v_raw,i=_n(r),o=_n(s);t||(Tg(s,o)&&To(i,"get",s),To(i,"get",o));const{has:a}=M1(i),u=e?l3:t?BN:Hi;if(a.call(i,s))return u(r.get(s));if(a.call(i,o))return u(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&To(_n(s),"iterate",Yy),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=_n(r),o=_n(s);return t||(Tg(s,o)&&To(i,"has",s),To(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=_n(o),u=e?l3:t?BN:Hi;return!t&&To(a,"iterate",Yy),o.forEach((c,h)=>s.call(r,u(c),u(h),i))}};return Ei(n,t?{add:F1("add"),set:F1("set"),delete:F1("delete"),clear:F1("clear")}:{add(s){!e&&!Ml(s)&&!cm(s)&&(s=_n(s));const r=_n(this);return M1(r).has.call(r,s)||(r.add(s),Wd(r,"add",s,s)),this},set(s,r){!e&&!Ml(r)&&!cm(r)&&(r=_n(r));const i=_n(this),{has:o,get:a}=M1(i);let u=o.call(i,s);u||(s=_n(s),u=o.call(i,s));const c=a.call(i,s);return i.set(s,r),u?Tg(r,c)&&Wd(i,"set",s,r):Wd(i,"add",s,r),this},delete(s){const r=_n(this),{has:i,get:o}=M1(r);let a=i.call(r,s);a||(s=_n(s),a=i.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return a&&Wd(r,"delete",s,void 0),u},clear(){const s=_n(this),r=s.size!==0,i=s.clear();return r&&Wd(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=D5e(s,t,e)}),n}function bH(t,e){const n=O5e(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Vn(n,r)&&r in s?n:s,r,i)}const L5e={get:bH(!1,!1)},M5e={get:bH(!1,!0)},F5e={get:bH(!0,!1)},Ame=new WeakMap,Rme=new WeakMap,Pme=new WeakMap,V5e=new WeakMap;function U5e(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function q5e(t){return t.__v_skip||!Object.isExtensible(t)?0:U5e(h5e(t))}function o_(t){return cm(t)?t:EH(t,!1,P5e,L5e,Ame)}function x2(t){return EH(t,!1,N5e,M5e,Rme)}function xme(t){return EH(t,!0,x5e,F5e,Pme)}function EH(t,e,n,s,r){if(!Ps(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=q5e(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Cg(t){return cm(t)?Cg(t.__v_raw):!!(t&&t.__v_isReactive)}function cm(t){return!!(t&&t.__v_isReadonly)}function Ml(t){return!!(t&&t.__v_isShallow)}function TH(t){return t?!!t.__v_raw:!1}function _n(t){const e=t&&t.__v_raw;return e?_n(e):t}function ow(t){return!Vn(t,"__v_skip")&&Object.isExtensible(t)&&i3(t,"__v_skip",!0),t}const Hi=t=>Ps(t)?o_(t):t,BN=t=>Ps(t)?xme(t):t;function _i(t){return t?t.__v_isRef===!0:!1}function id(t){return Nme(t,!1)}function j5e(t){return Nme(t,!0)}function Nme(t,e){return _i(t)?t:new B5e(t,e)}class B5e{constructor(e,n){this.dep=new wH,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:_n(e),this._value=n?e:Hi(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ml(e)||cm(e);e=s?e:_n(e),Tg(e,n)&&(this._rawValue=e,this._value=s?e:Hi(e),this.dep.trigger())}}function _f(t){return _i(t)?t.value:t}const $5e={get:(t,e,n)=>e==="__v_raw"?t:_f(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return _i(r)&&!_i(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Dme(t){return Cg(t)?t:new Proxy(t,$5e)}function Ome(t){const e=ft(t)?new Array(t.length):{};for(const n in t)e[n]=H5e(t,n);return e}class z5e{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return C5e(_n(this._object),this._key)}}function H5e(t,e,n){const s=t[e];return _i(s)?s:new z5e(t,e,n)}class W5e{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new wH(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=YS-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&cs!==this)return vme(this,!0),!0}get value(){const e=this.dep.track();return Eme(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function K5e(t,e,n=!1){let s,r;return At(t)?s=t:(s=t.get,r=t.set),new W5e(s,r,n)}const V1={},$N=new WeakMap;let ly;function G5e(t,e=!1,n=ly){if(n){let s=$N.get(n);s||$N.set(n,s=[]),s.push(t)}}function Q5e(t,e,n=ts){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:u}=n,c=q=>r?q:Ml(q)||r===!1||r===0?Kd(q,1):Kd(q);let h,d,p,m,w=!1,k=!1;if(_i(t)?(d=()=>t.value,w=Ml(t)):Cg(t)?(d=()=>c(t),w=!0):ft(t)?(k=!0,w=t.some(q=>Cg(q)||Ml(q)),d=()=>t.map(q=>{if(_i(q))return q.value;if(Cg(q))return c(q);if(At(q))return u?u(q,2):q()})):At(t)?e?d=u?()=>u(t,2):t:d=()=>{if(p){Rf();try{p()}finally{Pf()}}const q=ly;ly=h;try{return u?u(t,3,[m]):t(m)}finally{ly=q}}:d=Dh,e&&r){const q=d,H=r===!0?1/0:r;d=()=>Kd(q(),H)}const P=mH(),O=()=>{h.stop(),P&&P.active&&fH(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),O()}}let M=k?new Array(t.length).fill(V1):V1;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((J,I)=>Tg(J,M[I])):Tg(H,M))){p&&p();const J=ly;ly=h;try{const I=[H,M===V1?void 0:k&&M[0]===V1?[]:M,m];M=H,u?u(e,3,I):e(...I)}finally{ly=J}}}else h.run()};return a&&a(V),h=new _me(d),h.scheduler=o?()=>o(V,!1):V,m=q=>G5e(q,!1,h),p=h.onStop=()=>{const q=$N.get(h);if(q){if(u)u(q,4);else for(const H of q)H();$N.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function Kd(t,e=1/0,n){if(e<=0||!Ps(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,_i(t))Kd(t.value,e,n);else if(ft(t))for(let s=0;s<t.length;s++)Kd(t[s],e,n);else if(ame(t)||Mb(t))t.forEach(s=>{Kd(s,e,n)});else if(cme(t)){for(const s in t)Kd(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Kd(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lR(t,e,n,s){try{return s?t(...s):t()}catch(r){N2(r,e,n)}}function $c(t,e,n,s){if(At(t)){const r=lR(t,e,n,s);return r&&lme(r)&&r.catch(i=>{N2(i,e,n)}),r}if(ft(t)){const r=[];for(let i=0;i<t.length;i++)r.push($c(t[i],e,n,s));return r}}function N2(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ts;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,u,c)===!1)return}a=a.parent}if(i){Rf(),lR(i,null,10,[t,u,c]),Pf();return}}Y5e(t,n,r,s,o)}function Y5e(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const ma=[];let uh=-1;const Fb=[];let Up=null,Zw=0;const Lme=Promise.resolve();let zN=null;function D2(t){const e=zN||Lme;return t?e.then(this?t.bind(this):t):e}function X5e(t){let e=uh+1,n=ma.length;for(;e<n;){const s=e+n>>>1,r=ma[s],i=JS(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function CH(t){if(!(t.flags&1)){const e=JS(t),n=ma[ma.length-1];!n||!(t.flags&2)&&e>=JS(n)?ma.push(t):ma.splice(X5e(e),0,t),t.flags|=1,Mme()}}function Mme(){zN||(zN=Lme.then(Vme))}function J5e(t){ft(t)?Fb.push(...t):Up&&t.id===-1?Up.splice(Zw+1,0,t):t.flags&1||(Fb.push(t),t.flags|=1),Mme()}function JZ(t,e,n=uh+1){for(;n<ma.length;n++){const s=ma[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;ma.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Fme(t){if(Fb.length){const e=[...new Set(Fb)].sort((n,s)=>JS(n)-JS(s));if(Fb.length=0,Up){Up.push(...e);return}for(Up=e,Zw=0;Zw<Up.length;Zw++){const n=Up[Zw];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Up=null,Zw=0}}const JS=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Vme(t){try{for(uh=0;uh<ma.length;uh++){const e=ma[uh];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),lR(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;uh<ma.length;uh++){const e=ma[uh];e&&(e.flags&=-2)}uh=-1,ma.length=0,Fme(),zN=null,(ma.length||Fb.length)&&Vme()}}let ul=null,Ume=null;function HN(t){const e=ul;return ul=t,Ume=t&&t.type.__scopeId||null,e}function IH(t,e=ul,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&dee(-1);const i=HN(e);let o;try{o=t(...r)}finally{HN(i),s._d&&dee(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function O2(t,e){if(ul===null)return t;const n=B2(ul),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,u=ts]=e[r];i&&(At(i)&&(i={mounted:i,updated:i}),i.deep&&Kd(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function W_(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let u=a.dir[s];u&&(Rf(),$c(u,n,8,[t.el,a,t,e]),Pf())}}const qme=Symbol("_vte"),jme=t=>t.__isTeleport,a0=t=>t&&(t.disabled||t.disabled===""),ZZ=t=>t&&(t.defer||t.defer===""),eee=t=>typeof SVGElement<"u"&&t instanceof SVGElement,tee=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,u3=(t,e)=>{const n=t&&t.to;return ar(n)?e?e(n):null:n},Bme={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,u,c){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=c,O=a0(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),J=e.anchor=k("");m(H,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,u))},v=()=>{const y=e.target=u3(e.props,w),T=zme(y,e,k,m);y&&(o!=="svg"&&eee(y)?o="svg":o!=="mathml"&&tee(y)&&(o="mathml"),O||(I(y,T),QP(e,!1)))};O&&(I(n,J),QP(e,!0)),ZZ(e.props)?(e.el.__isMounted=!1,ha(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(ZZ(e.props)&&t.el.__isMounted===!1){ha(()=>{Bme.process(t,e,n,s,r,i,o,a,u,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=a0(t.props),y=v?n:J,T=v?H:I;if(o==="svg"||eee(J)?o="svg":(o==="mathml"||tee(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),OH(t,e,!0)):u||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):U1(e,n,H,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=u3(e.props,w);S&&U1(e,S,null,c,0)}else v&&U1(e,J,I,c,1);QP(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:c,targetAnchor:h,target:d,props:p}=t;if(d&&(r(c),r(h)),i&&r(u),o&16){const m=i||!a0(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:U1,hydrate:Z5e};function U1(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||a0(h))&&u&16)for(let p=0;p<c.length;p++)r(c[p],e,n,2);d&&s(a,e,n)}function Z5e(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:c,createText:h}},d){const p=e.target=u3(e.props,u);if(p){const m=a0(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||zme(p,e,h,c),d(w&&o(w),e,p,n,s,r,i)}QP(e,m)}return e.anchor&&o(e.anchor)}const $me=Bme;function QP(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function zme(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[qme]=i,t&&(s(r,t),s(i,t)),i}const qp=Symbol("_leaveCb"),q1=Symbol("_enterCb");function Hme(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return uR(()=>{t.isMounted=!0}),cR(()=>{t.isUnmounting=!0}),t}const El=[Function,Array],Wme={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:El,onEnter:El,onAfterEnter:El,onEnterCancelled:El,onBeforeLeave:El,onLeave:El,onAfterLeave:El,onLeaveCancelled:El,onBeforeAppear:El,onAppear:El,onAfterAppear:El,onAppearCancelled:El},Kme=t=>{const e=t.subTree;return e.component?Kme(e.component):e},eze={name:"BaseTransition",props:Wme,setup(t,{slots:e}){const n=lp(),s=Hme();return()=>{const r=e.default&&SH(e.default(),!0);if(!r||!r.length)return;const i=Gme(r),o=_n(t),{mode:a}=o;if(s.isLeaving)return qU(i);const u=nee(i);if(!u)return qU(i);let c=ZS(u,o,s,n,d=>c=d);u.type!==wa&&Cv(u,c);let h=n.subTree&&nee(n.subTree);if(h&&h.type!==wa&&!vy(u,h)&&Kme(n).type!==wa){let d=ZS(h,o,s,n);if(Cv(h,d),a==="out-in"&&u.type!==wa)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},qU(i);a==="in-out"&&u.type!==wa?d.delayLeave=(p,m,w)=>{const k=Qme(s,h);k[String(h.key)]=h,p[qp]=()=>{m(),p[qp]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function Gme(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==wa){e=n;break}}return e}const tze=eze;function Qme(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function ZS(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=Qme(n,t),J=(y,T)=>{y&&$c(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),ft(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=u;if(!n.isMounted)if(i)T=P||u;else return;y[qp]&&y[qp](!0);const S=H[q];S&&vy(t,S)&&S.el[qp]&&S.el[qp](),J(T,[y])},enter(y){let T=c,S=h,E=d;if(!n.isMounted)if(i)T=O||c,S=M||h,E=V||d;else return;let b=!1;const K=y[q1]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[q1]=void 0)};T?I(T,[y,K]):K()},leave(y,T){const S=String(t.key);if(y[q1]&&y[q1](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[qp]=K=>{E||(E=!0,T(),K?J(k,[y]):J(w,[y]),y[qp]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const T=ZS(y,e,n,s,r);return r&&r(T),T}};return v}function qU(t){if(L2(t))return t=hm(t),t.children=null,t}function nee(t){if(!L2(t))return jme(t.type)&&t.children?Gme(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&At(n.default))return n.default()}}function Cv(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Cv(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function SH(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===nl?(o.patchFlag&128&&r++,s=s.concat(SH(o.children,e,a))):(e||o.type!==wa)&&s.push(a!=null?hm(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function jT(t,e){return At(t)?Ei({name:t.name},e,{setup:t}):t}function Yme(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function l0(t,e,n,s,r=!1){if(ft(t)){t.forEach((w,k)=>l0(w,e&&(ft(e)?e[k]:e),n,s,r));return}if(u0(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&l0(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?B2(s.component):s.el,o=r?null:i,{i:a,r:u}=t,c=e&&e.r,h=a.refs===ts?a.refs={}:a.refs,d=a.setupState,p=_n(d),m=d===ts?()=>!1:w=>Vn(p,w);if(c!=null&&c!==u&&(ar(c)?(h[c]=null,m(c)&&(d[c]=null)):_i(c)&&(c.value=null)),At(u))lR(u,a,12,[o,h]);else{const w=ar(u),k=_i(u);if(w||k){const P=()=>{if(t.f){const O=w?m(u)?d[u]:h[u]:u.value;r?ft(O)&&fH(O,i):ft(O)?O.includes(i)||O.push(i):w?(h[u]=[i],m(u)&&(d[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else w?(h[u]=o,m(u)&&(d[u]=o)):k&&(u.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,ha(P,n)):P()}}}R2().requestIdleCallback;R2().cancelIdleCallback;const u0=t=>!!t.type.__asyncLoader,L2=t=>t.type.__isKeepAlive;function kH(t,e){Xme(t,"a",e)}function AH(t,e){Xme(t,"da",e)}function Xme(t,e,n=Do){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(M2(e,s,n),n){let r=n.parent;for(;r&&r.parent;)L2(r.parent.vnode)&&nze(s,e,n,r),r=r.parent}}function nze(t,e,n,s){const r=M2(e,t,s,!0);hR(()=>{fH(s[e],r)},n)}function M2(t,e,n=Do,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Rf();const a=dR(n),u=$c(e,n,t,o);return a(),Pf(),u});return s?r.unshift(i):r.push(i),i}}const ap=t=>(e,n=Do)=>{(!tk||t==="sp")&&M2(t,(...s)=>e(...s),n)},RH=ap("bm"),uR=ap("m"),PH=ap("bu"),F2=ap("u"),cR=ap("bum"),hR=ap("um"),sze=ap("sp"),rze=ap("rtg"),ize=ap("rtc");function oze(t,e=Do){M2("ec",t,e)}const aze="components";function xH(t,e){return uze(aze,t,!0,e)||t}const lze=Symbol.for("v-ndc");function uze(t,e,n=!0,s=!1){const r=ul||Do;if(r){const i=r.type;{const a=Qze(i,!1);if(a&&(a===e||a===Wl(e)||a===A2(Wl(e))))return i}const o=see(r[t]||i[t],e)||see(r.appContext[t],e);return!o&&s?i:o}}function see(t,e){return t&&(t[e]||t[Wl(e)]||t[A2(Wl(e))])}function Jme(t,e,n,s){let r;const i=n,o=ft(t);if(o||ar(t)){const a=o&&Cg(t);let u=!1,c=!1;a&&(u=!Ml(t),c=cm(t),t=P2(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(u?c?BN(Hi(t[h])):Hi(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ps(t))if(t[Symbol.iterator])r=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const h=a[u];r[u]=e(t[h],h,u,i)}}else r=[];return r}const c3=t=>t?v_e(t)?B2(t):c3(t.parent):null,c0=Ei(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>c3(t.parent),$root:t=>c3(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>e_e(t),$forceUpdate:t=>t.f||(t.f=()=>{CH(t.update)}),$nextTick:t=>t.n||(t.n=D2.bind(t.proxy)),$watch:t=>Pze.bind(t)}),jU=(t,e)=>t!==ts&&!t.__isScriptSetup&&Vn(t,e),cze={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(jU(s,e))return o[e]=1,s[e];if(r!==ts&&Vn(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Vn(c,e))return o[e]=3,i[e];if(n!==ts&&Vn(n,e))return o[e]=4,n[e];h3&&(o[e]=0)}}const h=c0[e];let d,p;if(h)return e==="$attrs"&&To(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ts&&Vn(n,e))return o[e]=4,n[e];if(p=u.config.globalProperties,Vn(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return jU(r,e)?(r[e]=n,!0):s!==ts&&Vn(s,e)?(s[e]=n,!0):Vn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ts&&Vn(t,o)||jU(e,o)||(a=i[0])&&Vn(a,o)||Vn(s,o)||Vn(c0,o)||Vn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Vn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function ree(t){return ft(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let h3=!0;function hze(t){const e=e_e(t),n=t.proxy,s=t.ctx;h3=!1,e.beforeCreate&&iee(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(c&&dze(c,s,null),o)for(const ae in o){const oe=o[ae];At(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);Ps(ae)&&(t.data=o_(ae))}if(h3=!0,i)for(const ae in i){const oe=i[ae],ve=At(oe)?oe.bind(n,n):At(oe.get)?oe.get.bind(n,n):Dh,Lt=!At(oe)&&At(oe.set)?oe.set.bind(n):Dh,nt=Ke({get:ve,set:Lt});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>nt.value,set:mt=>nt.value=mt})}if(a)for(const ae in a)Zme(a[ae],s,n,ae);if(u){const ae=At(u)?u.call(n):u;Reflect.ownKeys(ae).forEach(oe=>{Vb(oe,ae[oe])})}h&&iee(h,t,"c");function ne(ae,oe){ft(oe)?oe.forEach(ve=>ae(ve.bind(n))):oe&&ae(oe.bind(n))}if(ne(RH,d),ne(uR,p),ne(PH,m),ne(F2,w),ne(kH,k),ne(AH,P),ne(oze,v),ne(ize,J),ne(rze,I),ne(cR,M),ne(hR,q),ne(sze,y),ft(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:ve=>n[oe]=ve,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===Dh&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&Yme(t)}function dze(t,e,n=Dh){ft(t)&&(t=d3(t));for(const s in t){const r=t[s];let i;Ps(r)?"default"in r?i=Wa(r.from||s,r.default,!0):i=Wa(r.from||s):i=Wa(r),_i(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function iee(t,e,n){$c(ft(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Zme(t,e,n,s){let r=s.includes(".")?f_e(n,s):()=>n[s];if(ar(t)){const i=e[t];At(i)&&Jy(r,i)}else if(At(t))Jy(r,t.bind(n));else if(Ps(t))if(ft(t))t.forEach(i=>Zme(i,e,n,s));else{const i=At(t.handler)?t.handler.bind(n):e[t.handler];At(i)&&Jy(r,i,t)}}function e_e(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>WN(u,c,o,!0)),WN(u,e,o)),Ps(e)&&i.set(e,u),u}function WN(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&WN(t,i,n,!0),r&&r.forEach(o=>WN(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=fze[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const fze={data:oee,props:aee,emits:aee,methods:_I,computed:_I,beforeCreate:aa,created:aa,beforeMount:aa,mounted:aa,beforeUpdate:aa,updated:aa,beforeDestroy:aa,beforeUnmount:aa,destroyed:aa,unmounted:aa,activated:aa,deactivated:aa,errorCaptured:aa,serverPrefetch:aa,components:_I,directives:_I,watch:gze,provide:oee,inject:pze};function oee(t,e){return e?t?function(){return Ei(At(t)?t.call(this,this):t,At(e)?e.call(this,this):e)}:e:t}function pze(t,e){return _I(d3(t),d3(e))}function d3(t){if(ft(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function aa(t,e){return t?[...new Set([].concat(t,e))]:e}function _I(t,e){return t?Ei(Object.create(null),t,e):e}function aee(t,e){return t?ft(t)&&ft(e)?[...new Set([...t,...e])]:Ei(Object.create(null),ree(t),ree(e??{})):e}function gze(t,e){if(!t)return e;if(!e)return t;const n=Ei(Object.create(null),t);for(const s in e)n[s]=aa(t[s],e[s]);return n}function t_e(){return{app:null,config:{isNativeTag:u5e,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mze=0;function _ze(t,e){return function(n,s=null){At(n)||(n=Ei({},n)),s!=null&&!Ps(s)&&(s=null);const r=t_e(),i=new WeakSet,o=[];let a=!1;const u=r.app={_uid:mze++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Xze,get config(){return r.config},set config(c){},use(c,...h){return i.has(c)||(c&&At(c.install)?(i.add(c),c.install(u,...h)):At(c)&&(i.add(c),c(u,...h))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,h){return h?(r.components[c]=h,u):r.components[c]},directive(c,h){return h?(r.directives[c]=h,u):r.directives[c]},mount(c,h,d){if(!a){const p=u._ceVNode||Xi(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,c,d),a=!0,u._container=c,c.__vue_app__=u,B2(p.component)}},onUnmount(c){o.push(c)},unmount(){a&&($c(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return r.provides[c]=h,u},runWithContext(c){const h=Xy;Xy=u;try{return c()}finally{Xy=h}}};return u}}let Xy=null;function Vb(t,e){if(Do){let n=Do.provides;const s=Do.parent&&Do.parent.provides;s===n&&(n=Do.provides=Object.create(s)),n[t]=e}}function Wa(t,e,n=!1){const s=lp();if(s||Xy){let r=Xy?Xy._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&At(e)?e.call(s&&s.proxy):e}}function n_e(){return!!(lp()||Xy)}const s_e={},r_e=()=>Object.create(s_e),i_e=t=>Object.getPrototypeOf(t)===s_e;function yze(t,e,n,s=!1){const r={},i=r_e();t.propsDefaults=Object.create(null),o_e(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:x2(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function vze(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=_n(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(V2(t.emitsOptions,p))continue;const m=e[p];if(u)if(Vn(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const w=Wl(p);r[w]=f3(u,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{o_e(t,e,r,i)&&(c=!0);let h;for(const d in a)(!e||!Vn(e,d)&&((h=iw(d))===d||!Vn(e,h)))&&(u?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=f3(u,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!Vn(e,d))&&(delete i[d],c=!0)}c&&Wd(t.attrs,"set","")}function o_e(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(r0(u))continue;const c=e[u];let h;r&&Vn(r,h=Wl(u))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:V2(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=_n(n),c=a||ts;for(let h=0;h<i.length;h++){const d=i[h];n[d]=f3(r,u,d,c[d],t,!Vn(c,d))}}return o}function f3(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Vn(o,"default");if(a&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&At(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=dR(r);s=c[n]=u.call(null,e),h()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===iw(n))&&(s=!0))}return s}const wze=new WeakMap;function a_e(t,e,n=!1){const s=n?wze:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let u=!1;if(!At(t)){const h=d=>{u=!0;const[p,m]=a_e(d,e,!0);Ei(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return Ps(t)&&s.set(t,Lb),Lb;if(ft(i))for(let h=0;h<i.length;h++){const d=Wl(i[h]);lee(d)&&(o[d]=ts)}else if(i)for(const h in i){const d=Wl(h);if(lee(d)){const p=i[h],m=o[d]=ft(p)||At(p)?{type:p}:Ei({},p),w=m.type;let k=!1,P=!0;if(ft(w))for(let O=0;O<w.length;++O){const M=w[O],V=At(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=At(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||Vn(m,"default"))&&a.push(d)}}const c=[o,a];return Ps(t)&&s.set(t,c),c}function lee(t){return t[0]!=="$"&&!r0(t)}const NH=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",DH=t=>ft(t)?t.map(_h):[_h(t)],bze=(t,e,n)=>{if(e._n)return e;const s=IH((...r)=>DH(e(...r)),n);return s._c=!1,s},l_e=(t,e,n)=>{const s=t._ctx;for(const r in t){if(NH(r))continue;const i=t[r];if(At(i))e[r]=bze(r,i,s);else if(i!=null){const o=DH(i);e[r]=()=>o}}},u_e=(t,e)=>{const n=DH(e);t.slots.default=()=>n},c_e=(t,e,n)=>{for(const s in e)(n||!NH(s))&&(t[s]=e[s])},Eze=(t,e,n)=>{const s=t.slots=r_e();if(t.vnode.shapeFlag&32){const r=e.__;r&&i3(s,"__",r,!0);const i=e._;i?(c_e(s,e,n),n&&i3(s,"_",i,!0)):l_e(e,s)}else e&&u_e(t,e)},Tze=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ts;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:c_e(r,e,n):(i=!e.$stable,l_e(e,r)),o=e}else e&&(u_e(t,e),o={default:1});if(i)for(const a in r)!NH(a)&&o[a]==null&&delete r[a]},ha=Fze;function Cze(t){return Ize(t)}function Ize(t,e){const n=R2();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Dh,insertStaticContent:w}=t,k=(A,C,R,N=null,L=null,U=null,j=void 0,W=null,$=!!C.dynamicChildren)=>{if(A===C)return;A&&!vy(A,C)&&(N=F(A),Te(A,L,U,!0),A=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Q,shapeFlag:X}=C;switch(B){case U2:P(A,C,R,N);break;case wa:O(A,C,R,N);break;case $U:A==null&&M(C,R,N,j);break;case nl:E(A,C,R,N,L,U,j,W,$);break;default:X&1?H(A,C,R,N,L,U,j,W,$):X&6?b(A,C,R,N,L,U,j,W,$):(X&64||X&128)&&B.process(A,C,R,N,L,U,j,W,$,ee)}Q!=null&&L?l0(Q,A&&A.ref,U,C||A,!C):Q==null&&A&&A.ref!=null&&l0(A.ref,null,U,A,!0)},P=(A,C,R,N)=>{if(A==null)s(C.el=a(C.children),R,N);else{const L=C.el=A.el;C.children!==A.children&&c(L,C.children)}},O=(A,C,R,N)=>{A==null?s(C.el=u(C.children||""),R,N):C.el=A.el},M=(A,C,R,N)=>{[A.el,A.anchor]=w(A.children,C,R,N,A.el,A.anchor)},V=({el:A,anchor:C},R,N)=>{let L;for(;A&&A!==C;)L=p(A),s(A,R,N),A=L;s(C,R,N)},q=({el:A,anchor:C})=>{let R;for(;A&&A!==C;)R=p(A),r(A),A=R;r(C)},H=(A,C,R,N,L,U,j,W,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),A==null?J(C,R,N,L,U,j,W,$):y(A,C,L,U,j,W,$)},J=(A,C,R,N,L,U,j,W)=>{let $,B;const{props:Q,shapeFlag:X,transition:Z,dirs:te}=A;if($=A.el=o(A.type,U,Q&&Q.is,Q),X&8?h($,A.children):X&16&&v(A.children,$,null,N,L,BU(A,U),j,W),te&&W_(A,null,N,"created"),I($,A,A.scopeId,j,N),Q){for(const re in Q)re!=="value"&&!r0(re)&&i($,re,null,Q[re],U,N);"value"in Q&&i($,"value",null,Q.value,U),(B=Q.onVnodeBeforeMount)&&Xc(B,N,A)}te&&W_(A,null,N,"beforeMount");const ie=Sze(L,Z);ie&&Z.beforeEnter($),s($,C,R),((B=Q&&Q.onVnodeMounted)||ie||te)&&ha(()=>{B&&Xc(B,N,A),ie&&Z.enter($),te&&W_(A,null,N,"mounted")},L)},I=(A,C,R,N,L)=>{if(R&&m(A,R),N)for(let U=0;U<N.length;U++)m(A,N[U]);if(L){let U=L.subTree;if(C===U||g_e(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(A,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(A,C,R,N,L,U,j,W,$=0)=>{for(let B=$;B<A.length;B++){const Q=A[B]=W?jp(A[B]):_h(A[B]);k(null,Q,C,R,N,L,U,j,W)}},y=(A,C,R,N,L,U,j)=>{const W=C.el=A.el;let{patchFlag:$,dynamicChildren:B,dirs:Q}=C;$|=A.patchFlag&16;const X=A.props||ts,Z=C.props||ts;let te;if(R&&K_(R,!1),(te=Z.onVnodeBeforeUpdate)&&Xc(te,R,C,A),Q&&W_(C,A,R,"beforeUpdate"),R&&K_(R,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(W,""),B?T(A.dynamicChildren,B,W,R,N,BU(C,L),U):j||ve(A,C,W,null,R,N,BU(C,L),U,!1),$>0){if($&16)S(W,X,Z,R,L);else if($&2&&X.class!==Z.class&&i(W,"class",null,Z.class,L),$&4&&i(W,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],be=X[se],Ae=Z[se];(Ae!==be||se==="value")&&i(W,se,be,Ae,L,R)}}$&1&&A.children!==C.children&&h(W,C.children)}else!j&&B==null&&S(W,X,Z,R,L);((te=Z.onVnodeUpdated)||Q)&&ha(()=>{te&&Xc(te,R,C,A),Q&&W_(C,A,R,"updated")},N)},T=(A,C,R,N,L,U,j)=>{for(let W=0;W<C.length;W++){const $=A[W],B=C[W],Q=$.el&&($.type===nl||!vy($,B)||$.shapeFlag&198)?d($.el):R;k($,B,Q,null,N,L,U,j,!0)}},S=(A,C,R,N,L)=>{if(C!==R){if(C!==ts)for(const U in C)!r0(U)&&!(U in R)&&i(A,U,C[U],null,L,N);for(const U in R){if(r0(U))continue;const j=R[U],W=C[U];j!==W&&U!=="value"&&i(A,U,W,j,L,N)}"value"in R&&i(A,"value",C.value,R.value,L)}},E=(A,C,R,N,L,U,j,W,$)=>{const B=C.el=A?A.el:a(""),Q=C.anchor=A?A.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(W=W?W.concat(te):te),A==null?(s(B,R,N),s(Q,R,N),v(C.children||[],R,Q,L,U,j,W,$)):X>0&&X&64&&Z&&A.dynamicChildren?(T(A.dynamicChildren,Z,R,L,U,j,W),(C.key!=null||L&&C===L.subTree)&&OH(A,C,!0)):ve(A,C,R,Q,L,U,j,W,$)},b=(A,C,R,N,L,U,j,W,$)=>{C.slotScopeIds=W,A==null?C.shapeFlag&512?L.ctx.activate(C,R,N,j,$):K(C,R,N,L,U,j,$):ne(A,C,$)},K=(A,C,R,N,L,U,j)=>{const W=A.component=zze(A,N,L);if(L2(A)&&(W.ctx.renderer=ee),Hze(W,!1,j),W.asyncDep){if(L&&L.registerDep(W,ae,j),!A.el){const $=W.subTree=Xi(wa);O(null,$,C,R),A.placeholder=$.el}}else ae(W,A,C,R,L,U,j)},ne=(A,C,R)=>{const N=C.component=A.component;if(Lze(A,C,R))if(N.asyncDep&&!N.asyncResolved){oe(N,C,R);return}else N.next=C,N.update();else C.el=A.el,N.vnode=C},ae=(A,C,R,N,L,U,j)=>{const W=()=>{if(A.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=A;{const tt=h_e(A);if(tt){X&&(X.el=re.el,oe(A,X,j)),tt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let se=X,be;K_(A,!1),X?(X.el=re.el,oe(A,X,j)):X=re,Z&&LU(Z),(be=X.props&&X.props.onVnodeBeforeUpdate)&&Xc(be,ie,X,re),K_(A,!0);const Ae=cee(A),Ue=A.subTree;A.subTree=Ae,k(Ue,Ae,d(Ue.el),F(Ue),A,L,U),X.el=Ae.el,se===null&&Mze(A,Ae.el),te&&ha(te,L),(be=X.props&&X.props.onVnodeUpdated)&&ha(()=>Xc(be,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:be,type:Ae}=A,Ue=u0(C);K_(A,!1),ie&&LU(ie),!Ue&&(X=te&&te.onVnodeBeforeMount)&&Xc(X,se,C),K_(A,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(Ae);const tt=A.subTree=cee(A);k(null,tt,R,N,A,L,U),C.el=tt.el}if(re&&ha(re,L),!Ue&&(X=te&&te.onVnodeMounted)){const tt=C;ha(()=>Xc(X,se,tt),L)}(C.shapeFlag&256||se&&u0(se.vnode)&&se.vnode.shapeFlag&256)&&A.a&&ha(A.a,L),A.isMounted=!0,C=R=N=null}};A.scope.on();const $=A.effect=new _me(W);A.scope.off();const B=A.update=$.run.bind($),Q=A.job=$.runIfDirty.bind($);Q.i=A,Q.id=A.uid,$.scheduler=()=>CH(Q),K_(A,!0),B()},oe=(A,C,R)=>{C.component=A;const N=A.vnode.props;A.vnode=C,A.next=null,vze(A,C.props,N,R),Tze(A,C.children,R),Rf(),JZ(A),Pf()},ve=(A,C,R,N,L,U,j,W,$=!1)=>{const B=A&&A.children,Q=A?A.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){nt(B,X,R,N,L,U,j,W,$);return}else if(Z&256){Lt(B,X,R,N,L,U,j,W,$);return}}te&8?(Q&16&&Ve(B,L,U),X!==B&&h(R,X)):Q&16?te&16?nt(B,X,R,N,L,U,j,W,$):Ve(B,L,U,!0):(Q&8&&h(R,""),te&16&&v(X,R,N,L,U,j,W,$))},Lt=(A,C,R,N,L,U,j,W,$)=>{A=A||Lb,C=C||Lb;const B=A.length,Q=C.length,X=Math.min(B,Q);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?jp(C[Z]):_h(C[Z]);k(A[Z],te,R,null,L,U,j,W,$)}B>Q?Ve(A,L,U,!0,!1,X):v(C,R,N,L,U,j,W,$,X)},nt=(A,C,R,N,L,U,j,W,$)=>{let B=0;const Q=C.length;let X=A.length-1,Z=Q-1;for(;B<=X&&B<=Z;){const te=A[B],ie=C[B]=$?jp(C[B]):_h(C[B]);if(vy(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;B++}for(;B<=X&&B<=Z;){const te=A[X],ie=C[Z]=$?jp(C[Z]):_h(C[Z]);if(vy(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Q?C[te].el:N;for(;B<=Z;)k(null,C[B]=$?jp(C[B]):_h(C[B]),R,ie,L,U,j,W,$),B++}}else if(B>Z)for(;B<=X;)Te(A[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const ze=C[B]=$?jp(C[B]):_h(C[B]);ze.key!=null&&re.set(ze.key,B)}let se,be=0;const Ae=Z-ie+1;let Ue=!1,tt=0;const Ye=new Array(Ae);for(B=0;B<Ae;B++)Ye[B]=0;for(B=te;B<=X;B++){const ze=A[B];if(be>=Ae){Te(ze,L,U,!0);continue}let Me;if(ze.key!=null)Me=re.get(ze.key);else for(se=ie;se<=Z;se++)if(Ye[se-ie]===0&&vy(ze,C[se])){Me=se;break}Me===void 0?Te(ze,L,U,!0):(Ye[Me-ie]=B+1,Me>=tt?tt=Me:Ue=!0,k(ze,C[Me],R,null,L,U,j,W,$),be++)}const ls=Ue?kze(Ye):Lb;for(se=ls.length-1,B=Ae-1;B>=0;B--){const ze=ie+B,Me=C[ze],Qn=C[ze+1],Fr=ze+1<Q?Qn.el||Qn.placeholder:N;Ye[B]===0?k(null,Me,R,Fr,L,U,j,W,$):Ue&&(se<0||B!==ls[se]?mt(Me,R,Fr,2):se--)}}},mt=(A,C,R,N,L=null)=>{const{el:U,type:j,transition:W,children:$,shapeFlag:B}=A;if(B&6){mt(A.component.subTree,C,R,N);return}if(B&128){A.suspense.move(C,R,N);return}if(B&64){j.move(A,C,R,ee);return}if(j===nl){s(U,C,R);for(let Q=0;Q<$.length;Q++)mt($[Q],C,R,N);s(A.anchor,C,R);return}if(j===$U){V(A,C,R);return}if(N!==2&&B&1&&W)if(N===0)W.beforeEnter(U),s(U,C,R),ha(()=>W.enter(U),L);else{const{leave:Q,delayLeave:X,afterLeave:Z}=W,te=()=>{A.ctx.isUnmounted?r(U):s(U,C,R)},ie=()=>{Q(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,R)},Te=(A,C,R,N=!1,L=!1)=>{const{type:U,props:j,ref:W,children:$,dynamicChildren:B,shapeFlag:Q,patchFlag:X,dirs:Z,cacheIndex:te}=A;if(X===-2&&(L=!1),W!=null&&(Rf(),l0(W,null,R,A,!0),Pf()),te!=null&&(C.renderCache[te]=void 0),Q&256){C.ctx.deactivate(A);return}const ie=Q&1&&Z,re=!u0(A);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&Xc(se,C,A),Q&6)Mt(A.component,R,N);else{if(Q&128){A.suspense.unmount(R,N);return}ie&&W_(A,null,C,"beforeUnmount"),Q&64?A.type.remove(A,C,R,ee,N):B&&!B.hasOnce&&(U!==nl||X>0&&X&64)?Ve(B,C,R,!1,!0):(U===nl&&X&384||!L&&Q&16)&&Ve($,C,R),N&&we(A)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&ha(()=>{se&&Xc(se,C,A),ie&&W_(A,null,C,"unmounted")},R)},we=A=>{const{type:C,el:R,anchor:N,transition:L}=A;if(C===nl){fn(R,N);return}if(C===$U){q(A);return}const U=()=>{r(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:W}=L,$=()=>j(R,U);W?W(A.el,U,$):$()}else U()},fn=(A,C)=>{let R;for(;A!==C;)R=p(A),r(A),A=R;r(C)},Mt=(A,C,R)=>{const{bum:N,scope:L,job:U,subTree:j,um:W,m:$,a:B,parent:Q,slots:{__:X}}=A;uee($),uee(B),N&&LU(N),Q&&ft(X)&&X.forEach(Z=>{Q.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,Te(j,A,C,R)),W&&ha(W,C),ha(()=>{A.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Ve=(A,C,R,N=!1,L=!1,U=0)=>{for(let j=U;j<A.length;j++)Te(A[j],C,R,N,L)},F=A=>{if(A.shapeFlag&6)return F(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const C=p(A.anchor||A.el),R=C&&C[qme];return R?p(R):C};let Y=!1;const G=(A,C,R)=>{A==null?C._vnode&&Te(C._vnode,null,null,!0):k(C._vnode||null,A,C,null,null,null,R),C._vnode=A,Y||(Y=!0,JZ(),Fme(),Y=!1)},ee={p:k,um:Te,m:mt,r:we,mt:K,mc:v,pc:ve,pbc:T,n:F,o:t};return{render:G,hydrate:void 0,createApp:_ze(G)}}function BU({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function K_({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Sze(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function OH(t,e,n=!1){const s=t.children,r=e.children;if(ft(s)&&ft(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=jp(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&OH(o,a)),a.type===U2&&(a.el=o.el),a.type===wa&&!a.el&&(a.el=o.el)}}function kze(t){const e=t.slice(),n=[0];let s,r,i,o,a;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function h_e(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:h_e(e)}function uee(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Aze=Symbol.for("v-scx"),Rze=()=>Wa(Aze);function Jy(t,e,n){return d_e(t,e,n)}function d_e(t,e,n=ts){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ei({},n),u=e&&s||!e&&i!=="post";let c;if(tk){if(i==="sync"){const m=Rze();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=Dh,m.resume=Dh,m.pause=Dh,m}}const h=Do;a.call=(m,w,k)=>$c(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{ha(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():CH(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=Q5e(t,e,a);return tk&&(c?c.push(p):u&&p()),p}function Pze(t,e,n){const s=this.proxy,r=ar(t)?t.includes(".")?f_e(s,t):()=>s[t]:t.bind(s,s);let i;At(e)?i=e:(i=e.handler,n=e);const o=dR(this),a=d_e(r,i.bind(s),n);return o(),a}function f_e(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const xze=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Wl(e)}Modifiers`]||t[`${iw(e)}Modifiers`];function Nze(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ts;let r=n;const i=e.startsWith("update:"),o=i&&xze(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ar(h)?h.trim():h)),o.number&&(r=n.map(p5e)));let a,u=s[a=OU(e)]||s[a=OU(Wl(e))];!u&&i&&(u=s[a=OU(iw(e))]),u&&$c(u,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,$c(c,t,6,r)}}function p_e(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!At(t)){const u=c=>{const h=p_e(c,e,!0);h&&(a=!0,Ei(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Ps(t)&&s.set(t,null),null):(ft(i)?i.forEach(u=>o[u]=null):Ei(o,i),Ps(t)&&s.set(t,o),o)}function V2(t,e){return!t||!I2(e)?!1:(e=e.slice(2).replace(/Once$/,""),Vn(t,e[0].toLowerCase()+e.slice(1))||Vn(t,iw(e))||Vn(t,e))}function cee(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=HN(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,H=q;O=_h(c.call(H,q,h,d,m,p,w)),M=a}else{const q=e;O=_h(q.length>1?q(d,{attrs:a,slots:o,emit:u}):q(d,null)),M=e.props?a:Dze(a)}}catch(q){h0.length=0,N2(q,t,1),O=Xi(wa)}let V=O;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(dH)&&(M=Oze(M,i)),V=hm(V,M,!1,!0))}return n.dirs&&(V=hm(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Cv(V,n.transition),O=V,HN(P),O}const Dze=t=>{let e;for(const n in t)(n==="class"||n==="style"||I2(n))&&((e||(e={}))[n]=t[n]);return e},Oze=(t,e)=>{const n={};for(const s in t)(!dH(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Lze(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?hee(s,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!V2(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?hee(s,o,c):!0:!!o;return!1}function hee(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!V2(n,i))return!0}return!1}function Mze({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const g_e=t=>t.__isSuspense;function Fze(t,e){e&&e.pendingBranch?ft(t)?e.effects.push(...t):e.effects.push(t):J5e(t)}const nl=Symbol.for("v-fgt"),U2=Symbol.for("v-txt"),wa=Symbol.for("v-cmt"),$U=Symbol.for("v-stc"),h0=[];let cl=null;function q2(t=!1){h0.push(cl=t?null:[])}function Vze(){h0.pop(),cl=h0[h0.length-1]||null}let ek=1;function dee(t,e=!1){ek+=t,t<0&&cl&&e&&(cl.hasOnce=!0)}function m_e(t){return t.dynamicChildren=ek>0?cl||Lb:null,Vze(),ek>0&&cl&&cl.push(t),t}function LH(t,e,n,s,r,i){return m_e(j2(t,e,n,s,r,i,!0))}function MH(t,e,n,s,r){return m_e(Xi(t,e,n,s,r,!0))}function KN(t){return t?t.__v_isVNode===!0:!1}function vy(t,e){return t.type===e.type&&t.key===e.key}const __e=({key:t})=>t??null,YP=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ar(t)||_i(t)||At(t)?{i:ul,r:t,k:e,f:!!n}:t:null);function j2(t,e=null,n=null,s=0,r=null,i=t===nl?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&__e(e),ref:e&&YP(e),scopeId:Ume,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ul};return a?(VH(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=ar(n)?8:16),ek>0&&!o&&cl&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&cl.push(u),u}const Xi=Uze;function Uze(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===lze)&&(t=wa),KN(t)){const a=hm(t,e,!0);return n&&VH(a,n),ek>0&&!i&&cl&&(a.shapeFlag&6?cl[cl.indexOf(t)]=a:cl.push(a)),a.patchFlag=-2,a}if(Yze(t)&&(t=t.__vccOpts),e){e=qze(e);let{class:a,style:u}=e;a&&!ar(a)&&(e.class=aR(a)),Ps(u)&&(TH(u)&&!ft(u)&&(u=Ei({},u)),e.style=oR(u))}const o=ar(t)?1:g_e(t)?128:jme(t)?64:Ps(t)?4:At(t)?2:0;return j2(t,e,n,s,r,o,i,!0)}function qze(t){return t?TH(t)||i_e(t)?Ei({},t):t:null}function hm(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?jze(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&__e(c),ref:e&&e.ref?n&&i?ft(i)?i.concat(YP(e)):[i,YP(e)]:YP(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nl?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hm(t.ssContent),ssFallback:t.ssFallback&&hm(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&Cv(h,u.clone(h)),h}function FH(t=" ",e=0){return Xi(U2,null,t,e)}function y_e(t="",e=!1){return e?(q2(),MH(wa,null,t)):Xi(wa,null,t)}function _h(t){return t==null||typeof t=="boolean"?Xi(wa):ft(t)?Xi(nl,null,t.slice()):KN(t)?jp(t):Xi(U2,null,String(t))}function jp(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hm(t)}function VH(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ft(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),VH(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!i_e(e)?e._ctx=ul:r===3&&ul&&(ul.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else At(e)?(e={default:e,_ctx:ul},n=32):(e=String(e),s&64?(n=16,e=[FH(e)]):n=8);t.children=e,t.shapeFlag|=n}function jze(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=aR([e.class,s.class]));else if(r==="style")e.style=oR([e.style,s.style]);else if(I2(r)){const i=e[r],o=s[r];o&&i!==o&&!(ft(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Xc(t,e,n,s=null){$c(t,e,7,[n,s])}const Bze=t_e();let $ze=0;function zze(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Bze,i={uid:$ze++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new pme(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:a_e(s,r),emitsOptions:p_e(s,r),emit:null,emitted:null,propsDefaults:ts,inheritAttrs:s.inheritAttrs,ctx:ts,data:ts,props:ts,attrs:ts,slots:ts,refs:ts,setupState:ts,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Nze.bind(null,i),t.ce&&t.ce(i),i}let Do=null;const lp=()=>Do||ul;let GN,p3;{const t=R2(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};GN=e("__VUE_INSTANCE_SETTERS__",n=>Do=n),p3=e("__VUE_SSR_SETTERS__",n=>tk=n)}const dR=t=>{const e=Do;return GN(t),t.scope.on(),()=>{t.scope.off(),GN(e)}},fee=()=>{Do&&Do.scope.off(),GN(null)};function v_e(t){return t.vnode.shapeFlag&4}let tk=!1;function Hze(t,e=!1,n=!1){e&&p3(e);const{props:s,children:r}=t.vnode,i=v_e(t);yze(t,s,i,e),Eze(t,r,n||e);const o=i?Wze(t,e):void 0;return e&&p3(!1),o}function Wze(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cze);const{setup:s}=n;if(s){Rf();const r=t.setupContext=s.length>1?Gze(t):null,i=dR(t),o=lR(s,t,0,[t.props,r]),a=lme(o);if(Pf(),i(),(a||t.sp)&&!u0(t)&&Yme(t),a){if(o.then(fee,fee),e)return o.then(u=>{pee(t,u)}).catch(u=>{N2(u,t,0)});t.asyncDep=o}else pee(t,o)}else w_e(t)}function pee(t,e,n){At(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ps(e)&&(t.setupState=Dme(e)),w_e(t)}function w_e(t,e,n){const s=t.type;t.render||(t.render=s.render||Dh);{const r=dR(t);Rf();try{hze(t)}finally{Pf(),r()}}}const Kze={get(t,e){return To(t,"get",""),t[e]}};function Gze(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Kze),slots:t.slots,emit:t.emit,expose:e}}function B2(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Dme(ow(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in c0)return c0[n](t)},has(e,n){return n in e||n in c0}})):t.proxy}function Qze(t,e=!0){return At(t)?t.displayName||t.name:t.name||e&&t.__name}function Yze(t){return At(t)&&"__vccOpts"in t}const Ke=(t,e)=>K5e(t,e,tk);function _t(t,e,n){const s=arguments.length;return s===2?Ps(e)&&!ft(e)?KN(e)?Xi(t,null,[e]):Xi(t,e):Xi(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&KN(n)&&(n=[n]),Xi(t,e,n))}const Xze="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let g3;const gee=typeof window<"u"&&window.trustedTypes;if(gee)try{g3=gee.createPolicy("vue",{createHTML:t=>t})}catch{}const b_e=g3?t=>g3.createHTML(t):t=>t,Jze="http://www.w3.org/2000/svg",Zze="http://www.w3.org/1998/Math/MathML",qd=typeof document<"u"?document:null,mee=qd&&qd.createElement("template"),eHe={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?qd.createElementNS(Jze,t):e==="mathml"?qd.createElementNS(Zze,t):n?qd.createElement(t,{is:n}):qd.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>qd.createTextNode(t),createComment:t=>qd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{mee.innerHTML=b_e(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=mee.content;if(s==="svg"||s==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wp="transition",DC="animation",DE=Symbol("_vtc"),E_e={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},T_e=Ei({},Wme,E_e),tHe=t=>(t.displayName="Transition",t.props=T_e,t),UH=tHe((t,{slots:e})=>_t(tze,C_e(t),e)),G_=(t,e=[])=>{ft(t)?t.forEach(n=>n(...e)):t&&t(...e)},_ee=t=>t?ft(t)?t.some(e=>e.length>1):t.length>1:!1;function C_e(t){const e={};for(const E in t)E in E_e||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=nHe(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Pp(E,b?h:a),Pp(E,b?c:o),K&&K()},T=(E,b)=>{E._isLeaving=!1,Pp(E,d),Pp(E,m),Pp(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,ae=()=>y(b,E,K);G_(ne,[b,ae]),yee(()=>{Pp(b,E?u:i),rh(b,E?h:a),_ee(ne)||vee(b,s,k,ae)})};return Ei(e,{onBeforeEnter(E){G_(O,[E]),rh(E,i),rh(E,o)},onBeforeAppear(E){G_(J,[E]),rh(E,u),rh(E,c)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>T(E,b);rh(E,d),E._enterCancelled?(rh(E,p),m3()):(m3(),rh(E,p)),yee(()=>{E._isLeaving&&(Pp(E,d),rh(E,m),_ee(q)||vee(E,s,P,K))}),G_(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),G_(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),G_(v,[E])},onLeaveCancelled(E){T(E),G_(H,[E])}})}function nHe(t){if(t==null)return null;if(Ps(t))return[zU(t.enter),zU(t.leave)];{const e=zU(t);return[e,e]}}function zU(t){return g5e(t)}function rh(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[DE]||(t[DE]=new Set)).add(e)}function Pp(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[DE];n&&(n.delete(e),n.size||(t[DE]=void 0))}function yee(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let sHe=0;function vee(t,e,n,s){const r=t._endId=++sHe,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=I_e(t,e);if(!o)return s();const c=o+"end";let h=0;const d=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++h>=u&&d()};setTimeout(()=>{h<u&&d()},a+1),t.addEventListener(c,p)}function I_e(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${wp}Delay`),i=s(`${wp}Duration`),o=wee(r,i),a=s(`${DC}Delay`),u=s(`${DC}Duration`),c=wee(a,u);let h=null,d=0,p=0;e===wp?o>0&&(h=wp,d=o,p=i.length):e===DC?c>0&&(h=DC,d=c,p=u.length):(d=Math.max(o,c),h=d>0?o>c?wp:DC:null,p=h?h===wp?i.length:u.length:0);const m=h===wp&&/\b(transform|all)(,|$)/.test(s(`${wp}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function wee(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>bee(n)+bee(t[s])))}function bee(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function m3(){return document.body.offsetHeight}function rHe(t,e,n){const s=t[DE];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const QN=Symbol("_vod"),S_e=Symbol("_vsh"),k_e={beforeMount(t,{value:e},{transition:n}){t[QN]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):OC(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),OC(t,!0),s.enter(t)):s.leave(t,()=>{OC(t,!1)}):OC(t,e))},beforeUnmount(t,{value:e}){OC(t,e)}};function OC(t,e){t.style.display=e?t[QN]:"none",t[S_e]=!e}const iHe=Symbol(""),oHe=/(^|;)\s*display\s*:/;function aHe(t,e,n){const s=t.style,r=ar(n);let i=!1;if(n&&!r){if(e)if(ar(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&XP(s,a,"")}else for(const o in e)n[o]==null&&XP(s,o,"");for(const o in n)o==="display"&&(i=!0),XP(s,o,n[o])}else if(r){if(e!==n){const o=s[iHe];o&&(n+=";"+o),s.cssText=n,i=oHe.test(n)}}else e&&t.removeAttribute("style");QN in t&&(t[QN]=i?s.display:"",t[S_e]&&(s.display="none"))}const Eee=/\s*!important$/;function XP(t,e,n){if(ft(n))n.forEach(s=>XP(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=lHe(t,e);Eee.test(n)?t.setProperty(iw(s),n.replace(Eee,""),"important"):t[s]=n}}const Tee=["Webkit","Moz","ms"],HU={};function lHe(t,e){const n=HU[e];if(n)return n;let s=Wl(e);if(s!=="filter"&&s in t)return HU[e]=s;s=A2(s);for(let r=0;r<Tee.length;r++){const i=Tee[r]+s;if(i in t)return HU[e]=i}return e}const Cee="http://www.w3.org/1999/xlink";function Iee(t,e,n,s,r,i=b5e(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Cee,e.slice(6,e.length)):t.setAttributeNS(Cee,e,n):n==null||i&&!hme(n)?t.removeAttribute(e):t.setAttribute(e,i?"":i_(n)?String(n):n)}function See(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?b_e(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=hme(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function uHe(t,e,n,s){t.addEventListener(e,n,s)}function cHe(t,e,n,s){t.removeEventListener(e,n,s)}const kee=Symbol("_vei");function hHe(t,e,n,s,r=null){const i=t[kee]||(t[kee]={}),o=i[e];if(s&&o)o.value=s;else{const[a,u]=dHe(e);if(s){const c=i[e]=gHe(s,r);uHe(t,a,c,u)}else o&&(cHe(t,a,o,u),i[e]=void 0)}}const Aee=/(?:Once|Passive|Capture)$/;function dHe(t){let e;if(Aee.test(t)){e={};let n;for(;n=t.match(Aee);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):iw(t.slice(2)),e]}let WU=0;const fHe=Promise.resolve(),pHe=()=>WU||(fHe.then(()=>WU=0),WU=Date.now());function gHe(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;$c(mHe(s,n.value),e,5,[s])};return n.value=t,n.attached=pHe(),n}function mHe(t,e){if(ft(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Ree=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_He=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?rHe(t,s,o):e==="style"?aHe(t,n,s):I2(e)?dH(e)||hHe(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yHe(t,e,s,o))?(See(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Iee(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ar(s))?See(t,Wl(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Iee(t,e,s,o))};function yHe(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Ree(e)&&At(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ree(e)&&ar(n)?!1:e in t}const A_e=new WeakMap,R_e=new WeakMap,YN=Symbol("_moveCb"),Pee=Symbol("_enterCb"),vHe=t=>(delete t.props.mode,t),wHe=vHe({name:"TransitionGroup",props:Ei({},T_e,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=lp(),s=Hme();let r,i;return F2(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!IHe(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(EHe),r.forEach(THe);const a=r.filter(CHe);m3(),a.forEach(u=>{const c=u.el,h=c.style;rh(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=c[YN]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",d),c[YN]=null,Pp(c,o))};c.addEventListener("transitionend",d)}),r=[]}),()=>{const o=_n(t),a=C_e(o);let u=o.tag||nl;if(r=[],i)for(let c=0;c<i.length;c++){const h=i[c];h.el&&h.el instanceof Element&&(r.push(h),Cv(h,ZS(h,a,s,n)),A_e.set(h,h.el.getBoundingClientRect()))}i=e.default?SH(e.default()):[];for(let c=0;c<i.length;c++){const h=i[c];h.key!=null&&Cv(h,ZS(h,a,s,n))}return Xi(u,null,i)}}}),bHe=wHe;function EHe(t){const e=t.el;e[YN]&&e[YN](),e[Pee]&&e[Pee]()}function THe(t){R_e.set(t,t.el.getBoundingClientRect())}function CHe(t){const e=A_e.get(t),n=R_e.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function IHe(t,e,n){const s=t.cloneNode(),r=t[DE];r&&r.forEach(a=>{a.split(/\s+/).forEach(u=>u&&s.classList.remove(u))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=I_e(s);return i.removeChild(s),o}const SHe=["ctrl","shift","alt","meta"],kHe={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>SHe.some(n=>t[`${n}Key`]&&!e.includes(n))},P_e=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=kHe[e[o]];if(a&&a(r,e))return}return t(r,...i)})},AHe=Ei({patchProp:_He},eHe);let xee;function RHe(){return xee||(xee=Cze(AHe))}const x_e=(...t)=>{const e=RHe().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=xHe(s);if(!r)return;const i=e._component;!At(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,PHe(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function PHe(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xHe(t){return ar(t)?document.querySelector(t):t}function BT(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function N_e(t,e){for(const n in e)BT(t,n,e[n]);return t}const xf=id(!1);let _3;function NHe(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function DHe(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const D_e="ontouchstart"in window||window.navigator.maxTouchPoints>0;function OHe(t){const e=t.toLowerCase(),n=DHe(e),s=NHe(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),xf.value===!0&&(_3={is:{...r}}),D_e===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const Nee=navigator.userAgent||navigator.vendor||window.opera,LHe={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Fl={userAgent:Nee,is:OHe(Nee),has:{touch:D_e},within:{iframe:window.self!==window.top}},nk={install(t){const{$q:e}=t;xf.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Fl),xf.value=!1}),e.platform=o_(this)):e.platform=this}};{let t;BT(Fl.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(nk,Fl),xf.value===!0&&(Object.assign(nk,_3,LHe),_3=null)}function aw(t){return ow(jT(t))}function qH(t){return ow(t)}const $2=(t,e)=>{const n=o_(t);for(const s in t)BT(e,s,()=>n[s],r=>{n[s]=r});return e},Nf={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Nf,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Iv(){}function O_e(t){return t.button===0}function jH(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function L_e(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function z2(t){t.stopPropagation()}function sk(t){t.cancelable!==!1&&t.preventDefault()}function Bp(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function M_e(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",sk,Nf.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",sk,Nf.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function BH(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Nf[r[3]])})}function $H(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Nf[s[3]])}),t[n]=void 0)}function zH(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const KU=["sm","md","lg","xl"],{passive:Dee}=Nf,MHe=$2({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Iv,setDebounce:Iv,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Fl.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,u={},c=16;this.setSizes=d=>{KU.forEach(p=>{d[p]!==void 0&&(u[p]=d[p])})},this.setDebounce=d=>{c=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&KU.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{KU.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,Dee),a=p>0?zH(this.__update,p):this.__update,s.addEventListener("resize",a,Dee)},this.setDebounce(c),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};xf.value===!0?e.push(h):h()}}),lo=$2({isActive:!1,mode:!1},{__media:void 0,set(t){lo.mode=t,t==="auto"?(lo.__media===void 0&&(lo.__media=window.matchMedia("(prefers-color-scheme: dark)"),lo.__updateMedia=()=>{lo.set("auto")},lo.__media.addListener(lo.__updateMedia)),t=lo.__media.matches):lo.__media!==void 0&&(lo.__media.removeListener(lo.__updateMedia),lo.__media=void 0),lo.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){lo.set(lo.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function FHe(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let F_e=!1;function VHe(t){F_e=t.isComposing===!0}function HH(t){return F_e===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function rk(t,e){return HH(t)===!0?!1:[].concat(e).includes(t.keyCode)}function V_e(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function UHe({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=V_e(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function qHe(){const{is:t}=Fl,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=V_e(t);r!==void 0&&n.add(`platform-${r}`)}}Fl.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Fl.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function jHe(t){for(const e in t)FHe(e,t[e])}const BHe={install(t){if(this.__installed!==!0){if(xf.value===!0)qHe();else{const{$q:e}=t;e.config.brand!==void 0&&jHe(e.config.brand);const n=UHe(Fl,e.config);document.body.classList.add.apply(document.body.classList,n)}Fl.is.ios===!0&&document.body.addEventListener("touchstart",Iv),window.addEventListener("keydown",VHe,!0)}}},U_e=()=>!0;function $He(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function zHe(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function HHe(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return U_e;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter($He).map(zHe)),()=>e.includes(window.location.hash)}const WH={__history:[],add:Iv,remove:Iv,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Fl.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=U_e),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=HHe(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Oee={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function Lee(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const $p=$2({__qLang:{}},{getLocale:Lee,set(t=Oee,e){const n={...t,rtl:t.rtl===!0,getLocale:Lee};{if(n.set=$p.set,$p.__langConfig===void 0||$p.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign($p.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=$p.__qLang,$p.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||Oee))}}),WHe={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},XN=$2({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=XN.set,Object.assign(XN.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,BT(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||WHe))}}),q_e="_q_",j_e="_q_l_",B_e="_q_pc_",$_e="_q_fo_";function z_e(){}const JN={};let H_e=!1;function KHe(){H_e=!0}function d0(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(d0(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(d0(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(d0(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function Sv(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function W_e(t){return Object.prototype.toString.call(t)==="[object Date]"}function K_e(t){return typeof t=="number"&&isFinite(t)}const Mee=[nk,BHe,lo,MHe,WH,$p,XN];function GHe(t,e){const n=x_e(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function Fee(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function QHe(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(q_e,n.$q),Fee(n,Mee),e.components!==void 0&&Object.values(e.components).forEach(s=>{Sv(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{Sv(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&Fee(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&Mee.includes(s)===!1)),xf.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const YHe=function(t,e={}){const n={version:"2.18.2"};H_e===!1?(e.config!==void 0&&Object.assign(JN,e.config),n.config={...JN},KHe()):n.config=e.config||{},QHe(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},XHe={name:"Quasar",version:"2.18.2",install:YHe,lang:$p,iconSet:XN};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const eb=typeof document<"u";function G_e(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function JHe(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&G_e(t.default)}const On=Object.assign;function GU(t,e){const n={};for(const s in e){const r=e[s];n[s]=zc(r)?r.map(t):t(r)}return n}const f0=()=>{},zc=Array.isArray,Q_e=/#/g,ZHe=/&/g,e7e=/\//g,t7e=/=/g,n7e=/\?/g,Y_e=/\+/g,s7e=/%5B/g,r7e=/%5D/g,X_e=/%5E/g,i7e=/%60/g,J_e=/%7B/g,o7e=/%7C/g,Z_e=/%7D/g,a7e=/%20/g;function KH(t){return encodeURI(""+t).replace(o7e,"|").replace(s7e,"[").replace(r7e,"]")}function l7e(t){return KH(t).replace(J_e,"{").replace(Z_e,"}").replace(X_e,"^")}function y3(t){return KH(t).replace(Y_e,"%2B").replace(a7e,"+").replace(Q_e,"%23").replace(ZHe,"%26").replace(i7e,"`").replace(J_e,"{").replace(Z_e,"}").replace(X_e,"^")}function u7e(t){return y3(t).replace(t7e,"%3D")}function c7e(t){return KH(t).replace(Q_e,"%23").replace(n7e,"%3F")}function h7e(t){return t==null?"":c7e(t).replace(e7e,"%2F")}function ik(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const d7e=/\/$/,f7e=t=>t.replace(d7e,"");function QU(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=_7e(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:ik(o)}}function p7e(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Vee(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function g7e(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&OE(e.matched[s],n.matched[r])&&eye(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function OE(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function eye(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!m7e(t[n],e[n]))return!1;return!0}function m7e(t,e){return zc(t)?Uee(t,e):zc(e)?Uee(e,t):t===e}function Uee(t,e){return zc(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function _7e(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const bp={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ok;(function(t){t.pop="pop",t.push="push"})(ok||(ok={}));var p0;(function(t){t.back="back",t.forward="forward",t.unknown=""})(p0||(p0={}));function y7e(t){if(!t)if(eb){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),f7e(t)}const v7e=/^[^#]+#/;function w7e(t,e){return t.replace(v7e,"#")+e}function b7e(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const H2=()=>({left:window.scrollX,top:window.scrollY});function E7e(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=b7e(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function qee(t,e){return(history.state?history.state.position-e:-1)+t}const v3=new Map;function T7e(t,e){v3.set(t,e)}function C7e(t){const e=v3.get(t);return v3.delete(t),e}let I7e=()=>location.protocol+"//"+location.host;function tye(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),Vee(a,"")}return Vee(n,t)+s+r}function S7e(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=tye(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:ok.pop,direction:P?P>0?p0.forward:p0.back:p0.unknown})})};function u(){o=n.value}function c(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(On({},p.state,{scroll:H2()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:d}}function jee(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?H2():null}}function k7e(t){const{history:e,location:n}=window,s={value:tye(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+u:I7e()+t+u;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(u,c){const h=On({},e.state,jee(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,h,!0),s.value=u}function a(u,c){const h=On({},r.value,e.state,{forward:u,scroll:H2()});i(h.current,h,!0);const d=On({},jee(s.value,u,null),{position:h.position+1},c);i(u,d,!1),s.value=u}return{location:s,state:r,push:a,replace:o}}function A7e(t){t=y7e(t);const e=k7e(t),n=S7e(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=On({location:"",base:t,go:s,createHref:w7e.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function R7e(t){return typeof t=="string"||t&&typeof t=="object"}function nye(t){return typeof t=="string"||typeof t=="symbol"}const sye=Symbol("");var Bee;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Bee||(Bee={}));function LE(t,e){return On(new Error,{type:t,[sye]:!0},e)}function Pd(t,e){return t instanceof Error&&sye in t&&(e==null||!!(t.type&e))}const $ee="[^/]+?",P7e={sensitive:!1,strict:!1,start:!0,end:!0},x7e=/[.+*?^${}()[\]/\\]/g;function N7e(t,e){const n=On({},P7e,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const p=c[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(x7e,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:O}=p;i.push({name:w,repeatable:k,optional:P});const M=O||$ee;if(M!==$ee){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&c.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function u(c){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,O=w in c?c[w]:"";if(zc(O)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=zc(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:u}}function D7e(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function rye(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=D7e(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(zee(s))return 1;if(zee(r))return-1}return r.length-s.length}function zee(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const O7e={type:0,value:""},L7e=/[a-zA-Z0-9_]/;function M7e(t){if(!t)return[[]];if(t==="/")return[[O7e]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,u,c="",h="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&d(),o()):u===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:u==="("?n=2:L7e.test(u)?p():(d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function F7e(t,e,n){const s=N7e(M7e(t.path),n),r=On(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function V7e(t,e){const n=[],s=new Map;e=Gee({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=Wee(d);k.aliasOf=m&&m.record;const P=Gee(e,d),O=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)O.push(Wee(On({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of O){const{path:H}=q;if(p&&H[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=F7e(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!Kee(M)&&o(d.name)),iye(M)&&u(M),k.children){const J=k.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:f0}function o(d){if(nye(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function u(d){const p=j7e(d,n);n.splice(p,0,d),d.record.name&&!Kee(d)&&s.set(d.record.name,d)}function c(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw LE(1,{location:d});P=m.record.name,w=On(Hee(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&Hee(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw LE(1,{location:d,currentLocation:p});P=m.record.name,w=On({},p.params,d.params),k=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:O,meta:q7e(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function Hee(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Wee(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:U7e(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function U7e(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Kee(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function q7e(t){return t.reduce((e,n)=>On(e,n.meta),{})}function Gee(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function j7e(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;rye(t,e[i])<0?s=i:n=i+1}const r=B7e(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function B7e(t){let e=t;for(;e=e.parent;)if(iye(e)&&rye(t,e)===0)return e}function iye({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function $7e(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Y_e," "),i=r.indexOf("="),o=ik(i<0?r:r.slice(0,i)),a=i<0?null:ik(r.slice(i+1));if(o in e){let u=e[o];zc(u)||(u=e[o]=[u]),u.push(a)}else e[o]=a}return e}function Qee(t){let e="";for(let n in t){const s=t[n];if(n=u7e(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(zc(s)?s.map(r=>r&&y3(r)):[s&&y3(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function z7e(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=zc(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const H7e=Symbol(""),Yee=Symbol(""),W2=Symbol(""),GH=Symbol(""),w3=Symbol("");function LC(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function zp(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,u)=>{const c=p=>{p===!1?u(LE(4,{from:n,to:e})):p instanceof Error?u(p):R7e(p)?u(LE(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,c));let d=Promise.resolve(h);t.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function YU(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(G_e(u)){const c=(u.__vccOpts||u)[e];c&&i.push(zp(c,n,s,o,a,r))}else{let c=u();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=JHe(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&zp(p,n,s,o,a,r)()}))}}return i}function Xee(t){const e=Wa(W2),n=Wa(GH),s=Ke(()=>{const u=_f(t.to);return e.resolve(u)}),r=Ke(()=>{const{matched:u}=s.value,{length:c}=u,h=u[c-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(OE.bind(null,h));if(p>-1)return p;const m=Jee(u[c-2]);return c>1&&Jee(h)===m&&d[d.length-1].path!==m?d.findIndex(OE.bind(null,u[c-2])):p}),i=Ke(()=>r.value>-1&&Y7e(n.params,s.value.params)),o=Ke(()=>r.value>-1&&r.value===n.matched.length-1&&eye(n.params,s.value.params));function a(u={}){if(Q7e(u)){const c=e[_f(t.replace)?"replace":"push"](_f(t.to)).catch(f0);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ke(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function W7e(t){return t.length===1?t[0]:t}const K7e=jT({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Xee,setup(t,{slots:e}){const n=o_(Xee(t)),{options:s}=Wa(W2),r=Ke(()=>({[Zee(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Zee(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&W7e(e.default(n));return t.custom?i:_t("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),G7e=K7e;function Q7e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Y7e(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!zc(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Jee(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Zee=(t,e,n)=>t??e??n,X7e=jT({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Wa(w3),r=Ke(()=>t.route||s.value),i=Wa(Yee,0),o=Ke(()=>{let c=_f(i);const{matched:h}=r.value;let d;for(;(d=h[c])&&!d.components;)c++;return c}),a=Ke(()=>r.value.matched[o.value]);Vb(Yee,Ke(()=>o.value+1)),Vb(H7e,a),Vb(w3,r);const u=id();return Jy(()=>[u.value,a.value,t.name],([c,h,d],[p,m,w])=>{h&&(h.instances[d]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!OE(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(c))},{flush:"post"}),()=>{const c=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return ete(n.default,{Component:p,route:c});const m=d.props[h],w=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=_t(p,On({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:u}));return ete(n.default,{Component:k,route:c})||k}}});function ete(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const J7e=X7e;function Z7e(t){const e=V7e(t.routes,t),n=t.parseQuery||$7e,s=t.stringifyQuery||Qee,r=t.history,i=LC(),o=LC(),a=LC(),u=j5e(bp);let c=bp;eb&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=GU.bind(null,F=>""+F),d=GU.bind(null,h7e),p=GU.bind(null,ik);function m(F,Y){let G,ee;return nye(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Y){if(Y=On({},Y||u.value),typeof F=="string"){const N=QU(n,F,Y.path),L=e.resolve({path:N.path},Y),U=r.createHref(N.fullPath);return On(N,L,{params:p(L.params),hash:ik(N.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=On({},F,{path:QU(n,F.path,Y.path).path});else{const N=On({},F.params);for(const L in N)N[L]==null&&delete N[L];G=On({},F,{params:d(N)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const C=p7e(s,On({},F,{hash:l7e(A),path:ee.path})),R=r.createHref(C);return On({fullPath:C,hash:A,query:s===Qee?z7e(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?QU(n,F,u.value.path):On({},F)}function V(F,Y){if(c!==F)return LE(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(On(M(F),{replace:!0}))}function J(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),On({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=c=O(F),ee=u.value,A=F.state,C=F.force,R=F.replace===!0,N=J(G);if(N)return I(On(M(N),{state:typeof N=="object"?On({},A,N.state):A,force:C,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!C&&g7e(s,ee,G)&&(U=LE(16,{to:L,from:ee}),mt(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Pd(j)?Pd(j,2)?j:nt(j):ve(j,L,ee)).then(j=>{if(j){if(Pd(j,2))return I(On({replace:R},M(j.to),{state:typeof j.to=="object"?On({},A,j.to.state):A,force:C}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=fn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function T(F,Y){let G;const[ee,A,C]=eWe(F,Y);G=YU(ee.reverse(),"beforeRouteLeave",F,Y);for(const N of ee)N.leaveGuards.forEach(L=>{G.push(zp(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),Ve(G).then(()=>{G=[];for(const N of i.list())G.push(zp(N,F,Y));return G.push(R),Ve(G)}).then(()=>{G=YU(A,"beforeRouteUpdate",F,Y);for(const N of A)N.updateGuards.forEach(L=>{G.push(zp(L,F,Y))});return G.push(R),Ve(G)}).then(()=>{G=[];for(const N of C)if(N.beforeEnter)if(zc(N.beforeEnter))for(const L of N.beforeEnter)G.push(zp(L,F,Y));else G.push(zp(N.beforeEnter,F,Y));return G.push(R),Ve(G)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),G=YU(C,"beforeRouteEnter",F,Y,y),G.push(R),Ve(G))).then(()=>{G=[];for(const N of o.list())G.push(zp(N,F,Y));return G.push(R),Ve(G)}).catch(N=>Pd(N,8)?N:Promise.reject(N))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const C=V(F,Y);if(C)return C;const R=Y===bp,N=eb?history.state:{};G&&(ee||R?r.replace(F.fullPath,On({scroll:R&&N&&N.scroll},A)):r.push(F.fullPath,A)),u.value=F,mt(F,Y,G,R),nt()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Mt.listening)return;const ee=O(F),A=J(ee);if(A){I(On(A,{replace:!0,force:!0}),ee).catch(f0);return}c=ee;const C=u.value;eb&&T7e(qee(C.fullPath,G.delta),H2()),T(ee,C).catch(R=>Pd(R,12)?R:Pd(R,2)?(I(On(M(R.to),{force:!0}),ee).then(N=>{Pd(N,20)&&!G.delta&&G.type===ok.pop&&r.go(-1,!1)}).catch(f0),Promise.reject()):(G.delta&&r.go(-G.delta,!1),ve(R,ee,C))).then(R=>{R=R||E(ee,C,!1),R&&(G.delta&&!Pd(R,8)?r.go(-G.delta,!1):G.type===ok.pop&&Pd(R,20)&&r.go(-1,!1)),S(ee,C,R)}).catch(f0)}))}let ne=LC(),ae=LC(),oe;function ve(F,Y,G){nt(F);const ee=ae.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Lt(){return oe&&u.value!==bp?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function nt(F){return oe||(oe=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function mt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!eb||!A)return Promise.resolve();const C=!G&&C7e(qee(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return D2().then(()=>A(F,Y,C)).then(R=>R&&E7e(R)).catch(R=>ve(R,F,Y))}const Te=F=>r.go(F);let we;const fn=new Set,Mt={currentRoute:u,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:O,options:t,push:q,replace:H,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Lt,install(F){const Y=this;F.component("RouterLink",G7e),F.component("RouterView",J7e),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>_f(u)}),eb&&!we&&u.value===bp&&(we=!0,q(r.location).catch(A=>{}));const G={};for(const A in bp)Object.defineProperty(G,A,{get:()=>u.value[A],enumerable:!0});F.provide(W2,Y),F.provide(GH,x2(G)),F.provide(w3,u);const ee=F.unmount;fn.add(F),F.unmount=function(){fn.delete(F),fn.size<1&&(c=bp,b&&b(),b=null,u.value=bp,we=!1,oe=!1),ee()}}};function Ve(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Mt}function eWe(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>OE(c,a))?s.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>OE(c,u))||r.push(u))}return[n,s,r]}function QH(){return Wa(W2)}function YH(t){return Wa(GH)}const tWe=()=>{};var tte={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oye={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ie=function(t,e){if(!t)throw $T(e)},$T=function(t){return new Error("Firebase Database ("+oye.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aye=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},nWe=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},XH={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aye(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nWe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const u=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||u==null)throw new sWe;const c=i<<2|o>>4;if(s.push(c),a!==64){const h=o<<4&240|a>>2;if(s.push(h),u!==64){const d=a<<6&192|u;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sWe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lye=function(t){const e=aye(t);return XH.encodeByteArray(e,!0)},ZN=function(t){return lye(t).replace(/\./g,"")},eD=function(t){try{return XH.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rWe(t){return uye(void 0,t)}function uye(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!iWe(n)||(t[n]=uye(t[n],e[n]));return t}function iWe(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oWe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const aWe=()=>oWe().__FIREBASE_DEFAULTS__,lWe=()=>{if(typeof process>"u"||typeof tte>"u")return;const t=tte.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uWe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eD(t[1]);return e&&JSON.parse(e)},K2=()=>{try{return tWe()||aWe()||lWe()||uWe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cye=t=>K2()?.emulatorHosts?.[t],JH=t=>{const e=cye(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},hye=()=>K2()?.config,dye=t=>K2()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class G2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q2(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ZN(JSON.stringify(n)),ZN(JSON.stringify(o)),""].join(".")}const g0={};function cWe(){const t={prod:[],emulator:[]};for(const e of Object.keys(g0))g0[e]?t.emulator.push(e):t.prod.push(e);return t}function hWe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nte=!1;function Y2(t,e){if(typeof window>"u"||typeof document>"u"||!bd(window.location.host)||g0[t]===e||g0[t]||nte)return;g0[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=cWe().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{nte=!0,i()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=hWe(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),c(k,w);const V=u();a(O,P),M.append(O,m,k,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Uo())}function dWe(){const t=K2()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fWe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pWe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gWe(){const t=Uo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mWe(){return oye.NODE_ADMIN===!0}function _We(){return!dWe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yWe(){try{return typeof indexedDB=="object"}catch{return!1}}function vWe(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wWe="FirebaseError";class Ed extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=wWe,Object.setPrototypeOf(this,Ed.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fR.prototype.create)}}class fR{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?bWe(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ed(r,a,s)}}function bWe(t,e){return t.replace(EWe,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const EWe=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ak(t){return JSON.parse(t)}function li(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pye=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=ak(eD(i[0])||""),n=ak(eD(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},TWe=function(t){const e=pye(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},CWe=function(t){const e=pye(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function up(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ME(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function b3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tD(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function dm(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(ste(i)&&ste(o)){if(!dm(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function ste(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zT(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IWe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+c+u+h+s[d]&4294967295;u=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function SWe(t,e){const n=new kWe(t,e);return n.subscribe.bind(n)}class kWe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");AWe(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=XU),r.error===void 0&&(r.error=XU),r.complete===void 0&&(r.complete=XU);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AWe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function XU(){}function t7(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const RWe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Ie(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},X2=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Wn(t){return t&&t._delegate?t._delegate:t}class Df{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uy="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class PWe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new G2;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NWe(e))try{this.getOrInitializeService({instanceIdentifier:uy})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=uy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uy){return this.instances.has(e)}getOptions(e=uy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xWe(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=uy){return this.component?this.component.multipleInstances?e:uy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xWe(t){return t===uy?void 0:t}function NWe(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class DWe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PWe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const OWe={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},LWe=Kt.INFO,MWe={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},FWe=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=MWe[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class J2{constructor(e){this.name=e,this._logLevel=LWe,this._logHandler=FWe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OWe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const VWe=(t,e)=>e.some(n=>t instanceof n);let rte,ite;function UWe(){return rte||(rte=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qWe(){return ite||(ite=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gye=new WeakMap,E3=new WeakMap,mye=new WeakMap,JU=new WeakMap,n7=new WeakMap;function jWe(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ig(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gye.set(n,t)}).catch(()=>{}),n7.set(e,t),e}function BWe(t){if(E3.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});E3.set(t,e)}let T3={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return E3.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mye.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ig(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $We(t){T3=t(T3)}function zWe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ZU(this),e,...n);return mye.set(s,e.sort?e.sort():[e]),Ig(s)}:qWe().includes(t)?function(...e){return t.apply(ZU(this),e),Ig(gye.get(this))}:function(...e){return Ig(t.apply(ZU(this),e))}}function HWe(t){return typeof t=="function"?zWe(t):(t instanceof IDBTransaction&&BWe(t),VWe(t,UWe())?new Proxy(t,T3):t)}function Ig(t){if(t instanceof IDBRequest)return jWe(t);if(JU.has(t))return JU.get(t);const e=HWe(t);return e!==t&&(JU.set(t,e),n7.set(e,t)),e}const ZU=t=>n7.get(t);function WWe(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Ig(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Ig(o.result),u.oldVersion,u.newVersion,Ig(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KWe=["get","getKey","getAll","getAllKeys","count"],GWe=["put","add","delete","clear"],e6=new Map;function ote(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(e6.get(e))return e6.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=GWe.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||KWe.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&u.done]))[0]};return e6.set(e,i),i}$We(t=>({...t,get:(e,n,s)=>ote(e,n)||t.get(e,n,s),has:(e,n)=>!!ote(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class QWe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(YWe(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function YWe(t){return t.getComponent()?.type==="VERSION"}const C3="@firebase/app",ate="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Of=new J2("@firebase/app"),XWe="@firebase/app-compat",JWe="@firebase/analytics-compat",ZWe="@firebase/analytics",e8e="@firebase/app-check-compat",t8e="@firebase/app-check",n8e="@firebase/auth",s8e="@firebase/auth-compat",r8e="@firebase/database",i8e="@firebase/data-connect",o8e="@firebase/database-compat",a8e="@firebase/functions",l8e="@firebase/functions-compat",u8e="@firebase/installations",c8e="@firebase/installations-compat",h8e="@firebase/messaging",d8e="@firebase/messaging-compat",f8e="@firebase/performance",p8e="@firebase/performance-compat",g8e="@firebase/remote-config",m8e="@firebase/remote-config-compat",_8e="@firebase/storage",y8e="@firebase/storage-compat",v8e="@firebase/firestore",w8e="@firebase/ai",b8e="@firebase/firestore-compat",E8e="firebase",T8e="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const I3="[DEFAULT]",C8e={[C3]:"fire-core",[XWe]:"fire-core-compat",[ZWe]:"fire-analytics",[JWe]:"fire-analytics-compat",[t8e]:"fire-app-check",[e8e]:"fire-app-check-compat",[n8e]:"fire-auth",[s8e]:"fire-auth-compat",[r8e]:"fire-rtdb",[i8e]:"fire-data-connect",[o8e]:"fire-rtdb-compat",[a8e]:"fire-fn",[l8e]:"fire-fn-compat",[u8e]:"fire-iid",[c8e]:"fire-iid-compat",[h8e]:"fire-fcm",[d8e]:"fire-fcm-compat",[f8e]:"fire-perf",[p8e]:"fire-perf-compat",[g8e]:"fire-rc",[m8e]:"fire-rc-compat",[_8e]:"fire-gcs",[y8e]:"fire-gcs-compat",[v8e]:"fire-fst",[b8e]:"fire-fst-compat",[w8e]:"fire-vertex","fire-js":"fire-js",[E8e]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nD=new Map,I8e=new Map,S3=new Map;function lte(t,e){try{t.container.addComponent(e)}catch(n){Of.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fm(t){const e=t.name;if(S3.has(e))return Of.debug(`There were multiple attempts to register component ${e}.`),!1;S3.set(e,t);for(const n of nD.values())lte(n,t);for(const n of I8e.values())lte(n,t);return!0}function pR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rl(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const S8e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sg=new fR("app","Firebase",S8e);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k8e{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Df("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sg.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const a_=T8e;function _ye(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:I3,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Sg.create("bad-app-name",{appName:String(r)});if(n||(n=hye()),!n)throw Sg.create("no-options");const i=nD.get(r);if(i){if(dm(n,i.options)&&dm(s,i.config))return i;throw Sg.create("duplicate-app",{appName:r})}const o=new DWe(r);for(const u of S3.values())o.addComponent(u);const a=new k8e(n,s,o);return nD.set(r,a),a}function Z2(t=I3){const e=nD.get(t);if(!e&&t===I3&&hye())return _ye();if(!e)throw Sg.create("no-app",{appName:t});return e}function Vl(t,e,n){let s=C8e[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Of.warn(o.join(" "));return}fm(new Df(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const A8e="firebase-heartbeat-database",R8e=1,lk="firebase-heartbeat-store";let t6=null;function yye(){return t6||(t6=WWe(A8e,R8e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lk)}catch(n){console.warn(n)}}}}).catch(t=>{throw Sg.create("idb-open",{originalErrorMessage:t.message})})),t6}async function P8e(t){try{const e=(await yye()).transaction(lk),n=await e.objectStore(lk).get(vye(t));return await e.done,n}catch(e){if(e instanceof Ed)Of.warn(e.message);else{const n=Sg.create("idb-get",{originalErrorMessage:e?.message});Of.warn(n.message)}}}async function ute(t,e){try{const n=(await yye()).transaction(lk,"readwrite");await n.objectStore(lk).put(e,vye(t)),await n.done}catch(n){if(n instanceof Ed)Of.warn(n.message);else{const s=Sg.create("idb-set",{originalErrorMessage:n?.message});Of.warn(s.message)}}}function vye(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const x8e=1024,N8e=30;class D8e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L8e(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=cte();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>N8e){const s=M8e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Of.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cte(),{heartbeatsToSend:n,unsentEntries:s}=O8e(this._heartbeatsCache.heartbeats),r=ZN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Of.warn(e),""}}}function cte(){return new Date().toISOString().substring(0,10)}function O8e(t,e=x8e){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),hte(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),hte(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class L8e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yWe()?vWe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await P8e(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ute(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return ute(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function hte(t){return ZN(JSON.stringify({version:2,heartbeats:t})).length}function M8e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F8e(t){fm(new Df("platform-logger",e=>new QWe(e),"PRIVATE")),fm(new Df("heartbeat",e=>new D8e(e),"PRIVATE")),Vl(C3,ate,t),Vl(C3,ate,"esm2020"),Vl("fire-js","")}F8e("");function wye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s7=wye,bye=new fR("auth","Firebase",wye());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sD=new J2("@firebase/auth");function V8e(t,...e){sD.logLevel<=Kt.WARN&&sD.warn(`Auth (${a_}): ${t}`,...e)}function JP(t,...e){sD.logLevel<=Kt.ERROR&&sD.error(`Auth (${a_}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function od(t,...e){throw i7(t,...e)}function Ic(t,...e){return i7(t,...e)}function r7(t,e,n){const s={...s7(),[e]:n};return new fR("auth","Firebase",s).create(e,{appName:t.name})}function Zy(t){return r7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U8e(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&od(t,"argument-error"),r7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i7(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return bye.create(t,...e)}function bt(t,e,...n){if(!t)throw i7(e,...n)}function of(t){const e="INTERNAL ASSERTION FAILED: "+t;throw JP(e),new Error(e)}function Lf(t,e){t||of(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k3(){return typeof self<"u"&&self.location?.href||""}function q8e(){return dte()==="http:"||dte()==="https:"}function dte(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function j8e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q8e()||pWe()||"connection"in navigator)?navigator.onLine:!0}function B8e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gR{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lf(n>e,"Short delay should be less than long delay!"),this.isMobile=e7()||fye()}get(){return j8e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o7(t,e){Lf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eye{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;of("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;of("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;of("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $8e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z8e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H8e=new gR(3e4,6e4);function a7(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function HT(t,e,n,s,r={}){return Tye(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=zT({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return fWe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&bd(t.emulatorConfig.host)&&(c.credentials="include"),Eye.fetch()(await Cye(t,t.config.apiHost,n,a),c)})}async function Tye(t,e,n){t._canInitEmulator=!1;const s={...$8e,...e};try{const r=new K8e(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw j1(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw j1(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw j1(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw j1(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw r7(t,h,c);od(t,h)}}catch(r){if(r instanceof Ed)throw r;od(t,"network-request-failed",{message:String(r)})}}async function W8e(t,e,n,s,r={}){const i=await HT(t,e,n,s,r);return"mfaPendingCredential"in i&&od(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Cye(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?o7(t.config,r):`${t.config.apiScheme}://${r}`;return z8e.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class K8e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ic(this.auth,"network-request-failed")),H8e.get())})}}function j1(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Ic(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function G8e(t,e){return HT(t,"POST","/v1/accounts:delete",e)}async function rD(t,e){return HT(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function m0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l7(t,e=!1){const n=Wn(t),s=await n.getIdToken(e),r=u7(s);bt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:m0(n6(r.auth_time)),issuedAtTime:m0(n6(r.iat)),expirationTime:m0(n6(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function n6(t){return Number(t)*1e3}function u7(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return JP("JWT malformed, contained fewer than 3 sections"),null;try{const r=eD(n);return r?JSON.parse(r):(JP("Failed to decode base64 JWT payload"),null)}catch(r){return JP("Caught error parsing JWT payload as JSON",r?.toString()),null}}function fte(t){const e=u7(t);return bt(e,"internal-error"),bt(typeof e.exp<"u","internal-error"),bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function uk(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Ed&&Q8e(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Q8e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y8e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class A3{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=m0(this.lastLoginAt),this.creationTime=m0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function iD(t){const e=t.auth,n=await t.getIdToken(),s=await uk(t,rD(e,{idToken:n}));bt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?Iye(r.providerUserInfo):[],o=X8e(t.providerData,i),a=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!o?.length,c=a?u:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new A3(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function c7(t){const e=Wn(t);await iD(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X8e(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Iye(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function J8e(t,e){const n=await Tye(t,{},async()=>{const s=zT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Cye(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:s};return t.emulatorConfig&&bd(t.emulatorConfig.host)&&(u.credentials="include"),Eye.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z8e(t,e){return HT(t,"POST","/v2/accounts:revokeToken",a7(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ub{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken<"u","internal-error"),bt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fte(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const n=fte(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await J8e(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Ub;return s&&(bt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(bt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(bt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ub,this.toJSON())}_performRefresh(){return of("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ep(t,e){bt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oc{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Y8e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new A3(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await uk(this,this.stsTokenManager.getToken(this.auth,e));return bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return l7(this,e)}reload(){return c7(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await iD(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rl(this.auth.app))return Promise.reject(Zy(this.auth));const e=await this.getIdToken();return await uk(this,G8e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;bt(d&&k,e,"internal-error");const P=Ub.fromJSON(this.name,k);bt(typeof d=="string",e,"internal-error"),Ep(s,e.name),Ep(r,e.name),bt(typeof p=="boolean",e,"internal-error"),bt(typeof m=="boolean",e,"internal-error"),Ep(i,e.name),Ep(o,e.name),Ep(a,e.name),Ep(u,e.name),Ep(c,e.name),Ep(h,e.name);const O=new oc({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ub;r.updateFromServerResponse(n);const i=new oc({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await iD(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];bt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Iye(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new Ub;a.updateFromIdToken(s);const u=new oc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new A3(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pte=new Map;function af(t){Lf(t instanceof Function,"Expected a class definition");let e=pte.get(t);return e?(Lf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pte.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sye{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sye.type="NONE";const oD=Sye;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZP(t,e,n){return`firebase:${t}:${e}:${n}`}class qb{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ZP(this.userKey,r.apiKey,i),this.fullPersistenceKey=ZP("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rD(this.auth,{idToken:e}).catch(()=>{});return n?oc._fromGetAccountInfoResponse(this.auth,n,e):null}return oc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new qb(af(oD),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||af(oD);const o=ZP(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await rD(e,{idToken:h}).catch(()=>{});if(!p)break;d=await oc._fromGetAccountInfoResponse(e,p,h)}else d=oc._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new qb(i,e,s):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new qb(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gte(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pye(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kye(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nye(e))return"Blackberry";if(Dye(e))return"Webos";if(Aye(e))return"Safari";if((e.includes("chrome/")||Rye(e))&&!e.includes("edge/"))return"Chrome";if(xye(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function kye(t=Uo()){return/firefox\//i.test(t)}function Aye(t=Uo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rye(t=Uo()){return/crios\//i.test(t)}function Pye(t=Uo()){return/iemobile/i.test(t)}function xye(t=Uo()){return/android/i.test(t)}function Nye(t=Uo()){return/blackberry/i.test(t)}function Dye(t=Uo()){return/webos/i.test(t)}function h7(t=Uo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eKe(t=Uo()){return h7(t)&&!!window.navigator?.standalone}function tKe(){return gWe()&&document.documentMode===10}function Oye(t=Uo()){return h7(t)||xye(t)||Dye(t)||Nye(t)||/windows phone/i.test(t)||Pye(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lye(t,e=[]){let n;switch(t){case"Browser":n=gte(Uo());break;case"Worker":n=`${gte(Uo())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${a_}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nKe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function sKe(t,e={}){return HT(t,"GET","/v2/passwordPolicy",a7(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const rKe=6;class iKe{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rKe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oKe{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mte(this),this.idTokenSubscription=new mte(this),this.beforeStateQueue=new nKe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bye,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=af(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qb.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rD(this,{idToken:e}),s=await oc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rl(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await iD(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B8e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rl(this.app))return Promise.reject(Zy(this));const n=e?Wn(e):null;return n&&bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rl(this.app)?Promise.reject(Zy(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rl(this.app)?Promise.reject(Zy(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(af(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sKe(this),n=new iKe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fR("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Z8e(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&af(e)||this._popupRedirectResolver;bt(n,this,"argument-error"),this.redirectPersistenceManager=await qb.create(this,[af(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lye(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(rl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&V8e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eF(t){return Wn(t)}class mte{constructor(e){this.auth=e,this.observer=null,this.addObserver=SWe(n=>this.observer=n)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let d7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aKe(t){d7=t}function lKe(t){return d7.loadJS(t)}function uKe(){return d7.gapiScript}function cKe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f7(t,e){const n=pR(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(dm(r,e??{}))return s;od(s,"already-initialized")}return n.initialize({options:e})}function hKe(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(af);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function p7(t,e,n){const s=eF(t);bt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Mye(e),{host:o,port:a}=dKe(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){bt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),bt(dm(c,s.config.emulator)&&dm(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,bd(o)?(Q2(`${i}//${o}${u}`),Y2("Auth",!0)):fKe()}function Mye(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dKe(t){const e=Mye(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:_te(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:_te(o)}}}function _te(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fKe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tF{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return of("not implemented")}_getIdTokenResponse(e){return of("not implemented")}_linkToIdToken(e,n){return of("not implemented")}_getReauthenticationResolver(e){return of("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function jb(t,e){return W8e(t,"POST","/v1/accounts:signInWithIdp",a7(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pKe="http://localhost";class Mf extends tF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):od("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Mf(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return jb(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,jb(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jb(e,n)}buildRequest(){const e={requestUri:pKe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zT(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class g7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mR extends g7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wh extends mR{constructor(){super("facebook.com")}static credential(e){return Mf._fromParams({providerId:wh.PROVIDER_ID,signInMethod:wh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wh.credentialFromTaggedObject(e)}static credentialFromError(e){return wh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wh.credential(e.oauthAccessToken)}catch{return null}}}wh.FACEBOOK_SIGN_IN_METHOD="facebook.com";wh.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ju extends mR{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mf._fromParams({providerId:Ju.PROVIDER_ID,signInMethod:Ju.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ju.credentialFromTaggedObject(e)}static credentialFromError(e){return Ju.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ju.credential(n,s)}catch{return null}}}Ju.GOOGLE_SIGN_IN_METHOD="google.com";Ju.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bh extends mR{constructor(){super("github.com")}static credential(e){return Mf._fromParams({providerId:bh.PROVIDER_ID,signInMethod:bh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bh.credentialFromTaggedObject(e)}static credentialFromError(e){return bh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bh.credential(e.oauthAccessToken)}catch{return null}}}bh.GITHUB_SIGN_IN_METHOD="github.com";bh.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eh extends mR{constructor(){super("twitter.com")}static credential(e,n){return Mf._fromParams({providerId:Eh.PROVIDER_ID,signInMethod:Eh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Eh.credentialFromTaggedObject(e)}static credentialFromError(e){return Eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Eh.credential(n,s)}catch{return null}}}Eh.TWITTER_SIGN_IN_METHOD="twitter.com";Eh.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class FE{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await oc._fromIdTokenResponse(e,s,r),o=yte(s);return new FE({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=yte(s);return new FE({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function yte(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aD extends Ed{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,aD.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new aD(e,n,s,r)}}function Fye(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?aD._fromErrorAndOperation(t,r,e,s):r})}async function gKe(t,e,n=!1){const s=await uk(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return FE._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function mKe(t,e,n=!1){const{auth:s}=t;if(rl(s.app))return Promise.reject(Zy(s));const r="reauthenticate";try{const i=await uk(t,Fye(s,r,e,t),n);bt(i.idToken,s,"internal-error");const o=u7(i.idToken);bt(o,s,"internal-error");const{sub:a}=o;return bt(t.uid===a,s,"user-mismatch"),FE._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&od(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function _Ke(t,e,n=!1){if(rl(t.app))return Promise.reject(Zy(t));const s="signIn",r=await Fye(t,s,e),i=await FE._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function m7(t,e,n,s){return Wn(t).onIdTokenChanged(e,n,s)}function _7(t,e,n){return Wn(t).beforeAuthStateChanged(e,n)}function y7(t,e,n,s){return Wn(t).onAuthStateChanged(e,n,s)}function wy(t){return Wn(t).signOut()}const lD="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vye{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lD,"1"),this.storage.removeItem(lD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const yKe=1e3,vKe=10;class Uye extends Vye{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oye(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);tKe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,vKe):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},yKe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uye.type="LOCAL";const v7=Uye;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qye extends Vye{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qye.type="SESSION";const nF=qye;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wKe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sF{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new sF(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await wKe(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sF.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function w7(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bKe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=w7("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oh(){return window}function EKe(t){Oh().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jye(){return typeof Oh().WorkerGlobalScope<"u"&&typeof Oh().importScripts=="function"}async function TKe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CKe(){return navigator?.serviceWorker?.controller||null}function IKe(){return jye()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bye="firebaseLocalStorageDb",SKe=1,uD="firebaseLocalStorage",$ye="fbase_key";class _R{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rF(t,e){return t.transaction([uD],e?"readwrite":"readonly").objectStore(uD)}function kKe(){const t=indexedDB.deleteDatabase(Bye);return new _R(t).toPromise()}function R3(){const t=indexedDB.open(Bye,SKe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(uD,{keyPath:$ye})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(uD)?e(s):(s.close(),await kKe(),e(await R3()))})})}async function vte(t,e,n){const s=rF(t,!0).put({[$ye]:e,value:n});return new _R(s).toPromise()}async function AKe(t,e){const n=rF(t,!1).get(e),s=await new _R(n).toPromise();return s===void 0?null:s.value}function wte(t,e){const n=rF(t,!0).delete(e);return new _R(n).toPromise()}const RKe=800,PKe=3;class zye{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R3(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>PKe)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jye()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sF._getInstance(IKe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await TKe(),!this.activeServiceWorker)return;this.sender=new bKe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CKe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R3();return await vte(e,lD,"1"),await wte(e,lD),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>vte(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>AKe(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wte(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=rF(r,!1).getAll();return new _R(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RKe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zye.type="LOCAL";const b7=zye;new gR(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hye(t,e){return e?af(e):(bt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class E7 extends tF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jb(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jb(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jb(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xKe(t){return _Ke(t.auth,new E7(t),t.bypassAuthState)}function NKe(t){const{auth:e,user:n}=t;return bt(n,e,"internal-error"),mKe(n,new E7(t),t.bypassAuthState)}async function DKe(t){const{auth:e,user:n}=t;return bt(n,e,"internal-error"),gKe(n,new E7(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Wye{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xKe;case"linkViaPopup":case"linkViaRedirect":return DKe;case"reauthViaPopup":case"reauthViaRedirect":return NKe;default:od(this.auth,"internal-error")}}resolve(e){Lf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const OKe=new gR(2e3,1e4);async function T7(t,e,n){if(rl(t.app))return Promise.reject(Ic(t,"operation-not-supported-in-this-environment"));const s=eF(t);U8e(t,e,g7);const r=Hye(s,n);return new Ay(s,"signInViaPopup",e,r).executeNotNull()}class Ay extends Wye{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Ay.currentPopupAction&&Ay.currentPopupAction.cancel(),Ay.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){Lf(this.filter.length===1,"Popup operations only handle one event");const e=w7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ic(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ic(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ay.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ic(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OKe.get())};e()}}Ay.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LKe="pendingRedirect",ex=new Map;class MKe extends Wye{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ex.get(this.auth._key());if(!e){try{const n=await FKe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}ex.set(this.auth._key(),e)}return this.bypassAuthState||ex.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FKe(t,e){const n=qKe(e),s=UKe(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function VKe(t,e){ex.set(t._key(),e)}function UKe(t){return af(t._redirectPersistence)}function qKe(t){return ZP(LKe,t.config.apiKey,t.name)}async function jKe(t,e,n=!1){if(rl(t.app))return Promise.reject(Zy(t));const s=eF(t),r=Hye(s,e),i=await new MKe(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const BKe=600*1e3;class $Ke{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zKe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Kye(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ic(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BKe&&this.cachedEventUids.clear(),this.cachedEventUids.has(bte(e))}saveEventToCache(e){this.cachedEventUids.add(bte(e)),this.lastProcessedEventTime=Date.now()}}function bte(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kye({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function zKe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kye(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function HKe(t,e={}){return HT(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const WKe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KKe=/^https?/;async function GKe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HKe(t);for(const n of e)try{if(QKe(n))return}catch{}od(t,"unauthorized-domain")}function QKe(t){const e=k3(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!KKe.test(n))return!1;if(WKe.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const YKe=new gR(3e4,6e4);function Ete(){const t=Oh().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XKe(t){return new Promise((e,n)=>{function s(){Ete(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ete(),n(Ic(t,"network-request-failed"))},timeout:YKe.get()})}if(Oh().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Oh().gapi?.load)s();else{const r=cKe("iframefcb");return Oh()[r]=()=>{gapi.load?s():n(Ic(t,"network-request-failed"))},lKe(`${uKe()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw tx=null,e})}let tx=null;function JKe(t){return tx=tx||XKe(t),tx}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ZKe=new gR(5e3,15e3),eGe="__/auth/iframe",tGe="emulator/auth/iframe",nGe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sGe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rGe(t){const e=t.config;bt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o7(e,tGe):`https://${t.config.authDomain}/${eGe}`,s={apiKey:e.apiKey,appName:t.name,v:a_},r=sGe.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${zT(s).slice(1)}`}async function iGe(t){const e=await JKe(t),n=Oh().gapi;return bt(n,t,"internal-error"),e.open({where:document.body,url:rGe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nGe,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Ic(t,"network-request-failed"),a=Oh().setTimeout(()=>{i(o)},ZKe.get());function u(){Oh().clearTimeout(a),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oGe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aGe=500,lGe=600,uGe="_blank",cGe="http://localhost";class Tte{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hGe(t,e,n,s=aGe,r=lGe){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const u={...oGe,width:s.toString(),height:r.toString(),top:i,left:o},c=Uo().toLowerCase();n&&(a=Rye(c)?uGe:n),kye(c)&&(e=e||cGe,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(eKe(c)&&a!=="_self")return dGe(e||"",a),new Tte(null);const d=window.open(e||"",a,h);bt(d,t,"popup-blocked");try{d.focus()}catch{}return new Tte(d)}function dGe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fGe="__/auth/handler",pGe="emulator/auth/handler",gGe=encodeURIComponent("fac");async function Cte(t,e,n,s,r,i){bt(t.config.authDomain,t,"auth-domain-config-required"),bt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:a_,eventId:r};if(e instanceof g7){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",b3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof mR){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${gGe}=${encodeURIComponent(u)}`:"";return`${mGe(t)}?${zT(a).slice(1)}${c}`}function mGe({config:t}){return t.emulator?o7(t,pGe):`https://${t.authDomain}/${fGe}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const s6="webStorageSupport";class _Ge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nF,this._completeRedirectFn=jKe,this._overrideRedirectResult=VKe}async _openPopup(e,n,s,r){Lf(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Cte(e,n,s,k3(),r);return hGe(e,i,w7())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Cte(e,n,s,k3(),r);return EKe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Lf(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await iGe(e),s=new $Ke(e);return n.register("authEvent",r=>(bt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(s6,{type:s6},s=>{const r=s?.[0]?.[s6];r!==void 0&&n(!!r),od(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GKe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Oye()||Aye()||h7()}}const C7=_Ge;var Ite="@firebase/auth",Ste="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yGe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function vGe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wGe(t){fm(new Df("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;bt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lye(t)},c=new oKe(s,r,i,u);return hKe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),fm(new Df("auth-internal",e=>{const n=eF(e.getProvider("auth").getImmediate());return(s=>new yGe(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vl(Ite,Ste,vGe(t)),Vl(Ite,Ste,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const bGe=300,EGe=dye("authIdTokenMaxAge")||bGe;let kte=null;const TGe=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>EGe)return;const r=n?.token;kte!==r&&(kte=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function I7(t=Z2()){const e=pR(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f7(t,{popupRedirectResolver:C7,persistence:[b7,v7,nF]}),s=dye("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=TGe(i.toString());_7(n,o,()=>o(n.currentUser)),m7(n,a=>o(a))}}const r=cye("auth");return r&&p7(n,`http://${r}`),n}function CGe(){return document.getElementsByTagName("head")?.[0]??document}aKe({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Ic("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",CGe().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wGe("Browser");var Ate=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kg,Gye;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function u(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(c(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=c(Math.pow(v,E)),T=T.j(E).add(c(b))):(T=T.j(y),T=T.add(c(b)))}return T}var d=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=c(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=O(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*K,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*K,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=H(y),T=H(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=c(y),b=E.j(v);k(b)||0<b.l(I);)y-=T,E=c(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Gye=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,kg=o}).apply(typeof Ate<"u"?Ate:typeof self<"u"?self:typeof window<"u"?window:{});var B1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qye,yI,Yye,nx,P3,Xye,Jye,Zye;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof B1=="object"&&B1];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(l,f){if(f)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var x=l[_];if(!(x in g))break e;g=g[x]}l=l[l.length-1],_=g[l],f=f(_),f!=_&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var g=0,_=!1,x={next:function(){if(!_&&g<l.length){var D=g++;return{value:f(D,l[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(l){return l||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,x,D){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return f.prototype[x].apply(_,z)}}function k(l){const f=l.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=l[_];return g}return[]}function P(l,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const x=l.length||0,D=_.length||0;l.length=x+D;for(let z=0;z<D;z++)l[x+z]=_[z]}else l.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function q(l){return q[" "](l),l}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(l,f,g){for(const _ in l)f.call(g,l[_],_,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function v(l){const f={};for(const g in l)f[g]=l[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(g in _)l[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function S(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function E(l){a.setTimeout(()=>{throw l},0)}function b(){var l=Lt;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,l=>l.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,Lt=new K,nt=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(mt)}};var mt=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){E(g)}var f=ne;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ve=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Mt(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(H){e:{try{q(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mt.aa.h.call(this)}}w(Mt,we);var Ve={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(l,f,g,_,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=x,this.key=++Y,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function A(l){this.src=l,this.g={},this.h=0}A.prototype.add=function(l,f,g,_,x){var D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);var z=R(l,f,_,x);return-1<z?(f=l[z],g||(f.fa=!1)):(f=new G(f,this.src,D,!!_,x),f.fa=g,l.push(f)),f};function C(l,f){var g=f.type;if(g in l.g){var _=l.g[g],x=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=x)&&Array.prototype.splice.call(_,x,1),D&&(ee(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function R(l,f,g,_){for(var x=0;x<l.length;++x){var D=l[x];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return x}return-1}var N="closure_lm_"+(1e6*Math.random()|0),L={};function U(l,f,g,_,x){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(l,f[D],g,_,x);return null}return g=ie(g),l&&l[F]?l.K(f,g,c(_)?!!_.capture:!1,x):j(l,f,g,!1,_,x)}function j(l,f,g,_,x,D){if(!f)throw Error("Invalid event type");var z=c(x)?!!x.capture:!!x,de=Z(l);if(de||(l[N]=de=new A(l)),g=de.add(f,g,_,z,D),g.proxy)return g;if(_=W(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)fn||(x=z),x===void 0&&(x=!1),l.addEventListener(f.toString(),_,x);else if(l.attachEvent)l.attachEvent(Q(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function l(g){return f.call(l.src,l.listener,g)}const f=X;return l}function $(l,f,g,_,x){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(l,f[D],g,_,x);else _=c(_)?!!_.capture:!!_,g=ie(g),l&&l[F]?(l=l.i,f=String(f).toString(),f in l.g&&(D=l.g[f],g=R(D,g,_,x),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete l.g[f],l.h--)))):l&&(l=Z(l))&&(f=l.g[f.toString()],l=-1,f&&(l=R(f,g,_,x)),(g=-1<l?f[l]:null)&&B(g))}function B(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[F])C(f.i,l);else{var g=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(g,_,l.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,l),g.h==0&&(g.src=null,f[N]=null)):ee(l)}}}function Q(l){return l in L?L[l]:L[l]="on"+l}function X(l,f){if(l.da)l=!0;else{f=new Mt(f,this);var g=l.listener,_=l.ha||l.src;l.fa&&B(l),l=g.call(_,f)}return l}function Z(l){return l=l[N],l instanceof A?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(l){return typeof l=="function"?l:(l[te]||(l[te]=function(f){return l.handleEvent(f)}),l[te])}function re(){Te.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,Te),re.prototype[F]=!0,re.prototype.removeEventListener=function(l,f,g,_){$(this,l,f,g,_)};function se(l,f){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var x=f;f=new we(_,l),T(f,x)}if(x=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];x=be(z,_,!0,f)&&x}if(z=f.g=l,x=be(z,_,!0,f)&&x,x=be(z,_,!1,f)&&x,g)for(D=0;D<g.length;D++)z=f.g=g[D],x=be(z,_,!1,f)&&x}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],_=0;_<g.length;_++)ee(g[_]);delete l.g[f],l.h--}}this.F=null},re.prototype.K=function(l,f,g,_){return this.i.add(String(l),f,!1,g,_)},re.prototype.L=function(l,f,g,_){return this.i.add(String(l),f,!0,g,_)};function be(l,f,g,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var de=z.listener,Re=z.ha||z.src;z.fa&&C(l.i,z),x=de.call(Re,_)!==!1&&x}}return x&&!_.defaultPrevented}function Ae(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Ue(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class tt extends Te{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(l){Te.call(this),this.h=l,this.g={}}w(Ye,Te);var ls=[];function ze(l){J(l.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},l),l.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),ze(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=a.JSON.stringify,Qn=a.JSON.parse,Fr=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function Ql(l){return l.h||(l.h=l.i())}function Yl(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bo(){we.call(this,"d")}w(Bo,we);function $o(){we.call(this,"c")}w($o,we);var Rn={},Xl=null;function Vr(){return Xl=Xl||new re}Rn.La="serverreachability";function Jl(l){we.call(this,Rn.La,l)}w(Jl,we);function Ls(l){const f=Vr();se(f,new Jl(f))}Rn.STAT_EVENT="statevent";function Zl(l,f){we.call(this,Rn.STAT_EVENT,l),this.stat=f}w(Zl,we);function Le(l){const f=Vr();se(f,new Zl(f,l))}Rn.Ma="timingevent";function eu(l,f){we.call(this,Rn.Ma,l),this.size=f}w(eu,we);function Ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function v_(l,f,g,_,x,D){l.info(function(){if(l.g)if(D)for(var z="",de=D.split("&"),Re=0;Re<de.length;Re++){var le=de[Re].split("=");if(1<le.length){var Oe=le[0];le=le[1];var Fe=Oe.split("_");z=2<=Fe.length&&Fe[1]=="type"?z+(Oe+"="+le+"&"):z+(Oe+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+f+`
`+g+`
`+z})}function w_(l,f,g,_,x,D,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+f+`
`+g+`
`+D+" "+z})}function Yn(l,f,g,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+E_(l,g)+(_?" "+_:"")})}function b_(l,f){l.info(function(){return"TIMEOUT: "+f})}Fs.prototype.info=function(){};function E_(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<x.length;z++)x[z]=""}}}}return Me(g)}catch{return f}}var Ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zo;function qr(){}w(qr,Ii),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},zo=new qr;function pn(l,f,g,_){this.j=l,this.i=f,this.l=g,this.R=_||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var su={},Ho={};function Wo(l,f,g){l.L=1,l.v=zr(Ut(f)),l.m=g,l.P=!0,ru(l,null)}function ru(l,f){l.F=Date.now(),jr(l),l.A=Ut(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),yu(g.i,"t",_),l.C=0,g=l.j.J,l.h=new nu,l.g=Mu(l.j,g?f:null,!l.m),0<l.O&&(l.M=new tt(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,_=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(ls[0]=x.toString()),x=ls);for(var D=0;D<x.length;D++){var z=U(g,x[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ls(),v_(l.i,l.u,l.A,l.l,l.R,l.m)}pn.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},pn.prototype.Y=function(l){try{if(l==this.g)e:{const Fe=qt(this.g);var f=this.g.Ba();const Zn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Fe!=4||f==7||(f==8||0>=Zn?Ls(3):Ls(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(iu(this)){var _=Iu(this.g);l="";var x=_.length,D=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Vs(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(D&&f==x-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,w_(this.i,this.u,this.A,this.l,this.R,Fe,g),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Re=this.g;if((de=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(de)){var le=de;break t}}le=null}if(g=le)Yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,g);else{this.o=!1,this.s=3,Le(12),Pn(this),Vs(this);break e}}if(this.P){g=!0;let yt;for(;!this.J&&this.C<z.length;)if(yt=T_(this,z),yt==Ho){Fe==4&&(this.s=4,Le(14),g=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==su){this.s=4,Le(15),Yn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Yn(this.i,this.l,yt,null),Go(this,yt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||z.length!=0||this.h.h||(this.s=1,Le(16),g=!1),this.o=this.o&&g,!g)Yn(this.i,this.l,z,"[Invalid Chunked Response]"),Pn(this),Vs(this);else if(0<z.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ea(Oe),Oe.M=!0,Le(11))}}else Yn(this.i,this.l,z,null),Go(this,z);Fe==4&&Pn(this),this.o&&!this.J&&(Fe==4?Nu(this.j,this):(this.o=!1,jr(this)))}else q_(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Pn(this),Vs(this)}}}catch{}finally{}};function iu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function T_(l,f){var g=l.C,_=f.indexOf(`
`,g);return _==-1?Ho:(g=Number(f.substring(g,_)),isNaN(g)?su:(_+=1,_+g>f.length?Ho:(f=f.slice(_,_+g),l.C=_+g,f)))}pn.prototype.cancel=function(){this.J=!0,Pn(this)};function jr(l){l.S=Date.now()+l.I,ou(l,l.I)}function ou(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ms(p(l.ba,l),f)}function Ko(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(b_(this.i,this.A),this.L!=2&&(Ls(),Le(17)),Pn(this),this.s=2,Vs(this)):ou(this,this.S-l)};function Vs(l){l.j.G==0||l.J||Nu(l.j,l)}function Pn(l){Ko(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ze(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Go(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Qo(g.h,l))){if(!l.K&&Qo(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Yr(g),Gr(g);else break e;Zo(g),Le(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ms(p(g.Za,g),6e3));if(1>=uu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Nn(g,11)}else if((l.K||g.g==l)&&Yr(g),!M(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let le=x[f];if(g.T=le[0],le=le[1],g.G==2)if(le[0]=="c"){g.K=le[1],g.ia=le[2];const Oe=le[3];Oe!=null&&(g.la=Oe,g.j.info("VER="+g.la));const Fe=le[4];Fe!=null&&(g.Aa=Fe,g.j.info("SVER="+g.Aa));const Zn=le[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(_=1.5*Zn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yt=l.g;if(yt){const Jr=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var D=_.h;D.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Yo(D,D.h),D.h=null))}if(_.D){const ta=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(_.ya=ta,fe(_.I,_.D,ta))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=l;if(_.qa=Lu(_,_.J?_.ia:null,_.W),z.K){cu(_.h,z);var de=z,Re=_.L;Re&&(de.I=Re),de.B&&(Ko(de),jr(de)),_.g=z}else Pu(_);0<g.i.length&&Qr(g)}else le[0]!="stop"&&le[0]!="close"||Nn(g,7);else g.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Nn(g,7):Jo(g):le[0]!="noop"&&g.l&&g.l.ta(le),g.v=0)}}Ls(4)}catch{}}var C_=class{constructor(l,f){this.g=l,this.map=f}};function au(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lu(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function uu(l){return l.h?1:l.g?l.g.size:0}function Qo(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Yo(l,f){l.g?l.g.add(f):l.h=f}function cu(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}au.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hu(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return k(l.i)}function I_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,_=0;_<g;_++)f.push(l[_]);return f}f=[],g=0;for(_ in l)f[g++]=l[_];return f}function S_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const _ in l)f[g++]=_;return f}}}function du(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=S_(l),_=I_(l),x=_.length,D=0;D<x;D++)f.call(void 0,_[D],g&&g[D],l)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k_(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),x=null;if(0<=_){var D=l[g].substring(0,_);x=l[g].substring(_+1)}else D=l[g];f(D,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function xn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof xn){this.h=l.h,Br(this,l.j),this.o=l.o,this.g=l.g,$r(this,l.s),this.l=l.l;var f=l.i,g=new js;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),pu(this,g),this.m=l.m}else l&&(f=String(l).match(fu))?(this.h=!1,Br(this,f[1]||"",!0),this.o=Us(f[2]||""),this.g=Us(f[3]||"",!0),$r(this,f[4]),this.l=Us(f[5]||"",!0),pu(this,f[6]||"",!0),this.m=Us(f[7]||"")):(this.h=!1,this.i=new js(null,this.h))}xn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qs(f,gu,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qs(f,gu,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(qs(g,g.charAt(0)=="/"?P_:R_,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",qs(g,N_)),l.join("")};function Ut(l){return new xn(l)}function Br(l,f,g){l.j=g?Us(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function $r(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function pu(l,f,g){f instanceof js?(l.i=f,D_(l.i,l.h)):(g||(f=qs(f,x_)),l.i=new js(f,l.h))}function fe(l,f,g){l.i.set(f,g)}function zr(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Us(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,A_),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function A_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gu=/[#\/\?@]/g,R_=/[#\?:]/g,P_=/[#\?]/g,x_=/[#\?@]/g,N_=/#/g;function js(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function gn(l){l.g||(l.g=new Map,l.h=0,l.i&&k_(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=js.prototype,t.add=function(l,f){gn(this),this.i=null,l=Xn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function mu(l,f){gn(l),f=Xn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function _u(l,f){return gn(l),f=Xn(l,f),l.g.has(f)}t.forEach=function(l,f){gn(this),this.g.forEach(function(g,_){g.forEach(function(x){l.call(f,x,_,this)},this)},this)},t.na=function(){gn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const x=l[_];for(let D=0;D<x.length;D++)g.push(f[_])}return g},t.V=function(l){gn(this);let f=[];if(typeof l=="string")_u(this,l)&&(f=f.concat(this.g.get(Xn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return gn(this),this.i=null,l=Xn(this,l),_u(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function yu(l,f,g){mu(l,f),0<g.length&&(l.i=null,l.g.set(Xn(l,f),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var x=D;z[_]!==""&&(x+="="+encodeURIComponent(String(z[_]))),l.push(x)}}return this.i=l.join("&")};function Xn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function D_(l,f){f&&!l.j&&(gn(l),l.i=null,l.g.forEach(function(g,_){var x=_.toLowerCase();_!=x&&(mu(this,_),yu(this,x,g))},l)),l.j=f}function O_(l,f){const g=new Fs;if(a.Image){const _=new Image;_.onload=m(mn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(mn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(mn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(mn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function L_(l,f){const g=new Fs,_=new AbortController,x=setTimeout(()=>{_.abort(),mn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(D=>{clearTimeout(x),D.ok?mn(g,"TestPingServer: ok",!0,f):mn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),mn(g,"TestPingServer: error",!1,f)})}function mn(l,f,g,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(g)}catch{}}function M_(){this.g=new Fr}function F_(l,f,g){const _=g||"";try{du(l,function(x,D){let z=x;c(x)&&(z=Me(x)),f.push(_+D+"="+encodeURIComponent(z))})}catch(x){throw f.push(_+"type="+encodeURIComponent("_badmap")),x}}function Hr(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Hr,Ii),Hr.prototype.g=function(){return new Wr(this.l,this.j)},Hr.prototype.i=function(l){return function(){return l}}({});function Wr(l,f){re.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wr,re),t=Wr.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,$s(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Bs(this):$s(this),this.readyState==3&&vu(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bs(this))},t.Qa=function(l){this.g&&(this.response=l,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$s(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function $s(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wu(l){let f="";return J(l,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Xo(l,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=wu(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):fe(l,f,g))}function Ee(l){re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ee,re);var V_=/^https?$/i,U_=["POST","PUT"];t=Ee.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zo.g(),this.v=this.o?Ql(this.o):Ql(zo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(D){bu(this,D);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)g.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U_,f,void 0))||_||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(l),this.u=!1}catch(D){bu(this,D)}};function bu(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Eu(l),Kr(l)}function Eu(l){l.A||(l.A=!0,se(l,"complete"),se(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,se(this,"complete"),se(this,"abort"),Kr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(l){if(l.h&&typeof o<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)Ae(l.Ea,0,l);else if(se(l,"readystatechange"),qt(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var x=String(l.D).match(fu)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!V_.test(x?x.toLowerCase():"")}g=_}if(g)se(l,"complete"),se(l,"success");else{l.m=6;try{var D=2<qt(l)?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.Z()+"]",Eu(l)}}finally{Kr(l)}}}}function Kr(l,f){if(l.g){Cu(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||se(l,"ready");try{g.onreadystatechange=_}catch{}}}function Cu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Qn(f)}};function Iu(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function q_(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(M(l[_]))continue;var g=S(l[_]);const x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[x]||[];f[x]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Su(l){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,l),this.cb=zs("retryDelaySeedMs",1e4,l),this.Wa=zs("forwardChannelMaxRetries",2,l),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new au(l&&l.concurrentRequestLimit),this.Da=new M_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,_){Le(0),this.W=l,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Lu(this,null,this.W),Qr(this)};function Jo(l){if(ku(l),l.G==3){var f=l.U++,g=Ut(l.I);if(fe(g,"SID",l.K),fe(g,"RID",f),fe(g,"TYPE","terminate"),Hs(l,g),f=new pn(l,l.j,f),f.L=2,f.v=zr(Ut(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Mu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),jr(f)}Ou(l)}function Gr(l){l.g&&(ea(l),l.g.cancel(),l.g=null)}function ku(l){Gr(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yr(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qr(l){if(!lu(l.h)&&!l.s){l.s=!0;var f=l.Ga;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.B=0}}function j_(l,f){return uu(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ms(p(l.Ga,l,f),Du(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new pn(this,this.j,l);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(x.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ru(this,x,f),g=Ut(this.I),fe(g,"RID",l),fe(g,"CVER",22),this.D&&fe(g,"X-HTTP-Session-Id",this.D),Hs(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(wu(D)))+"&"+f:this.m&&Xo(g,this.m,D)),Yo(this.h,x),this.Ua&&fe(g,"TYPE","init"),this.P?(fe(g,"$req",f),fe(g,"SID","null"),x.T=!0,Wo(x,g,null)):Wo(x,g,f),this.G=2}}else this.G==3&&(l?Au(this,l):this.i.length==0||lu(this.h)||Au(this))};function Au(l,f){var g;f?g=f.l:g=l.U++;const _=Ut(l.I);fe(_,"SID",l.K),fe(_,"RID",g),fe(_,"AID",l.T),Hs(l,_),l.m&&l.o&&Xo(_,l.m,l.o),g=new pn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ru(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Yo(l.h,g),Wo(g,_,f)}function Hs(l,f){l.H&&J(l.H,function(g,_){fe(f,_,g)}),l.l&&du({},function(g,_){fe(f,_,g)})}function Ru(l,f,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var x=l.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=x[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let de=!0;for(let Re=0;Re<g;Re++){let le=x[Re].g;const Oe=x[Re].map;if(le-=D,0>le)D=Math.max(0,x[Re].g-100),de=!1;else try{F_(Oe,z,"req"+le+"_")}catch{_&&_(Oe)}}if(de){_=z.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,_}function Pu(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.v=0}}function Zo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ms(p(l.Fa,l),Du(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ms(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Gr(this),xu(this))};function ea(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function xu(l){l.g=new pn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ut(l.qa);fe(f,"RID","rpc"),fe(f,"SID",l.K),fe(f,"AID",l.T),fe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(f,"TO",l.ja),fe(f,"TYPE","xmlhttp"),Hs(l,f),l.m&&l.o&&Xo(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=zr(Ut(f)),g.m=null,g.P=!0,ru(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Gr(this),Zo(this),Le(19))};function Yr(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Nu(l,f){var g=null;if(l.g==f){Yr(l),ea(l),l.g=null;var _=2}else if(Qo(l.h,f))g=f.D,cu(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;_=Vr(),se(_,new eu(_,g)),Qr(l)}else Pu(l);else if(x=f.s,x==3||x==0&&0<f.X||!(_==1&&j_(l,f)||_==2&&Zo(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:Nn(l,5);break;case 4:Nn(l,10);break;case 3:Nn(l,6);break;default:Nn(l,2)}}}function Du(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Nn(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),_=l.Xa;const x=!_;_=new xn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Br(_,"https"),zr(_),x?O_(_.toString(),g):L_(_.toString(),g)}else Le(2);l.G=0,l.l&&l.l.sa(f),Ou(l),ku(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ou(l){if(l.G=0,l.ka=[],l.l){const f=hu(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Lu(l,f,g){var _=g instanceof xn?Ut(g):new xn(g);if(_.g!="")f&&(_.g=f+"."+_.g),$r(_,_.s);else{var x=a.location;_=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var D=new xn(null);_&&Br(D,_),f&&(D.g=f),x&&$r(D,x),g&&(D.l=g),_=D}return g=l.D,f=l.ya,g&&f&&fe(_,g,f),fe(_,"VER",l.la),Hs(l,_),_}function Mu(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ee(new Hr({eb:g})):new Ee(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}t=Fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(l,f){return new We(l,f)};function We(l,f){re.call(this),this.g=new Su(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!M(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Jn(this)}w(We,re),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Jo(this.g)},We.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Me(l),l=g);f.i.push(new C_(f.Ya++,l)),f.G==3&&Qr(f)},We.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,We.aa.N.call(this)};function Vu(l){Bo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(Vu,Bo);function Uu(){$o.call(this),this.status=1}w(Uu,$o);function Jn(l){this.g=l}w(Jn,Fu),Jn.prototype.ua=function(){se(this.g,"a")},Jn.prototype.ta=function(l){se(this.g,new Vu(l))},Jn.prototype.sa=function(l){se(this.g,new Uu)},Jn.prototype.ra=function(){se(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,Zye=function(){return new Xr},Jye=function(){return Vr()},Xye=Rn,P3={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,nx=Ur,tu.COMPLETE="complete",Yye=tu,Yl.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",re.prototype.listen=re.prototype.K,yI=Yl,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,Qye=Ee}).apply(typeof B1<"u"?B1:typeof self<"u"?self:typeof window<"u"?window:{});const Rte="@firebase/firestore",Pte="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _o{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_o.UNAUTHENTICATED=new _o(null),_o.GOOGLE_CREDENTIALS=new _o("google-credentials-uid"),_o.FIRST_PARTY=new _o("first-party-uid"),_o.MOCK_USER=new _o("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let WT="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kv=new J2("@firebase/firestore");function tb(){return kv.logLevel}function xe(t,...e){if(kv.logLevel<=Kt.DEBUG){const n=e.map(S7);kv.debug(`Firestore (${WT}): ${t}`,...n)}}function Ff(t,...e){if(kv.logLevel<=Kt.ERROR){const n=e.map(S7);kv.error(`Firestore (${WT}): ${t}`,...n)}}function VE(t,...e){if(kv.logLevel<=Kt.WARN){const n=e.map(S7);kv.warn(`Firestore (${WT}): ${t}`,...n)}}function S7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ut(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,eve(t,s,n)}function eve(t,e,n){let s=`FIRESTORE (${WT}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ff(s),new Error(s)}function Bn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||eve(e,r,s)}function Nt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends Ed{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ag{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class tve{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IGe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_o.UNAUTHENTICATED))}shutdown(){}}class SGe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kGe{constructor(e){this.t=e,this.currentUser=_o.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Bn(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new Ag;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ag,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ag)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Bn(typeof s.accessToken=="string",31837,{l:s}),new tve(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bn(e===null||typeof e=="string",2055,{h:e}),new _o(e)}}class AGe{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=_o.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RGe{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new AGe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_o.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xte{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PGe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Bn(this.o===void 0,3512);const s=i=>{i.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,xe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xte(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xte(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xGe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class k7{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=xGe(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function nn(t,e){return t<e?-1:t>e?1:0}function x3(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return r6(r)===r6(i)?nn(r,i):r6(r)?1:-1}return nn(t.length,e.length)}const NGe=55296,DGe=57343;function r6(t){const e=t.charCodeAt(0);return e>=NGe&&e<=DGe}function UE(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nte="__name__";class fh{constructor(e,n,s){n===void 0?n=0:n>e.length&&ut(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ut(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return fh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fh?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=fh.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return nn(e.length,n.length)}static compareSegments(e,n){const s=fh.isNumericId(e),r=fh.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?fh.extractNumericId(e).compare(fh.extractNumericId(n)):x3(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kg.fromString(e.substring(4,e.length-2))}}let ri=class sx extends fh{construct(e,n,s){return new sx(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new je(ge.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new sx(n)}static emptyPath(){return new sx([])}};const OGe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends fh{construct(e,n,s){return new Gi(e,n,s)}static isValidIdentifier(e){return OGe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nte}static keyField(){return new Gi([Nte])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new je(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new je(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new je(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new je(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(n)}static emptyPath(){return new Gi([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Je{constructor(e){this.path=e}static fromPath(e){return new Je(ri.fromString(e))}static fromName(e){return new Je(ri.fromString(e).popFirst(5))}static empty(){return new Je(ri.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ri.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ri.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new ri(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LGe(t,e,n){if(!n)throw new je(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MGe(t,e,n,s){if(e===!0&&s===!0)throw new je(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dte(t){if(!Je.isDocumentKey(t))throw new je(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nve(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function A7(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ut(12329,{type:typeof t})}function Sc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new je(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=A7(t);throw new je(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cr(t,e){const n={typeString:t};return e&&(n.value=e),n}function yR(t,e){if(!nve(t))throw new je(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new je(ge.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ote=-62135596800,Lte=1e6;class Ss{static now(){return Ss.fromMillis(Date.now())}static fromDate(e){return Ss.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Lte);return new Ss(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new je(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new je(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ote)throw new je(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lte}_compareTo(e){return this.seconds===e.seconds?nn(this.nanoseconds,e.nanoseconds):nn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ss._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yR(e,Ss._jsonSchema))return new Ss(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ote;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ss._jsonSchemaVersion="firestore/timestamp/1.0",Ss._jsonSchema={type:Cr("string",Ss._jsonSchemaVersion),seconds:Cr("number"),nanoseconds:Cr("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Ft=class rx{static fromTimestamp(e){return new rx(e)}static min(){return new rx(new Ss(0,0))}static max(){return new rx(new Ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ck=-1;function FGe(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ft.fromTimestamp(s===1e9?new Ss(n+1,0):new Ss(n,s));return new pm(r,Je.empty(),e)}function VGe(t){return new pm(t.readTime,t.key,ck)}class pm{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new pm(Ft.min(),Je.empty(),ck)}static max(){return new pm(Ft.max(),Je.empty(),ck)}}function UGe(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Je.comparator(t.documentKey,e.documentKey),n!==0?n:nn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const qGe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jGe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function KT(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==qGe)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ue.reject(n)}static resolve(e){return new ue((n,s)=>{n(e)})}static reject(e){return new ue((n,s)=>{s(e)})}static waitFor(e){return new ue((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next(r=>r?ue.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new ue((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new ue((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function BGe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function GT(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iF{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}iF.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const R7=-1;function oF(t){return t==null}function cD(t){return t===0&&1/t==-1/0}function $Ge(t){return typeof t=="number"&&Number.isInteger(t)&&!cD(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sve="";function zGe(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mte(e)),e=HGe(t.get(n),e);return Mte(e)}function HGe(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case sve:n+="";break;default:n+=i}}return n}function Mte(t){return t+sve+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fte(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function l_(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rve(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Nr=class N3{constructor(e,n){this.comparator=e,this.root=n||Rg.EMPTY}insert(e,n){return new N3(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rg.BLACK,null,null))}remove(e){return new N3(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rg.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $1(this.root,e,this.comparator,!1)}getReverseIterator(){return new $1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $1(this.root,e,this.comparator,!0)}},$1=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Rg=class Md{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Md.RED,this.left=r??Md.EMPTY,this.right=i??Md.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Md(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Md.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Md.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Md.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Md.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ut(27949);return e+(this.isRed()?0:1)}};Rg.EMPTY=null,Rg.RED=!0,Rg.BLACK=!1;Rg.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new Rg(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yi{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vte(this.data.getIterator())}getIteratorFrom(e){return new Vte(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yi(this.comparator);return n.data=e,n}}class Vte{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hl{constructor(e){this.fields=e,e.sort(Gi.comparator)}static empty(){return new hl([])}unionWith(e){let n=new yi(Gi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new hl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return UE(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ive extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eo{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ive("Invalid base64 string: "+r):r}}(e);return new eo(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new eo(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}eo.EMPTY_BYTE_STRING=new eo("");const WGe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gm(t){if(Bn(!!t,39018),typeof t=="string"){let e=0;const n=WGe.exec(t);if(Bn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mr(t.seconds),nanos:mr(t.nanos)}}function mr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mm(t){return typeof t=="string"?eo.fromBase64String(t):eo.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ove="server_timestamp",ave="__type__",lve="__previous_value__",uve="__local_write_time__";function P7(t){return(t?.mapValue?.fields||{})[ave]?.stringValue===ove}function aF(t){const e=t.mapValue.fields[lve];return P7(e)?aF(e):e}function hk(t){const e=gm(t.mapValue.fields[uve].timestampValue);return new Ss(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KGe{constructor(e,n,s,r,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const hD="(default)";class dk{constructor(e,n){this.projectId=e,this.database=n||hD}static empty(){return new dk("","")}get isDefaultDatabase(){return this.database===hD}isEqual(e){return e instanceof dk&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const cve="__type__",GGe="__max__",z1={mapValue:{}},hve="__vector__",dD="value";function _m(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?P7(t)?4:YGe(t)?9007199254740991:QGe(t)?10:11:ut(28295,{value:t})}function ad(t,e){if(t===e)return!0;const n=_m(t);if(n!==_m(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hk(t).isEqual(hk(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=gm(s.timestampValue),o=gm(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return mm(s.bytesValue).isEqual(mm(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return mr(s.geoPointValue.latitude)===mr(r.geoPointValue.latitude)&&mr(s.geoPointValue.longitude)===mr(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return mr(s.integerValue)===mr(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=mr(s.doubleValue),o=mr(r.doubleValue);return i===o?cD(i)===cD(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return UE(t.arrayValue.values||[],e.arrayValue.values||[],ad);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(Fte(i)!==Fte(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!ad(i[a],o[a])))return!1;return!0}(t,e);default:return ut(52216,{left:t})}}function fk(t,e){return(t.values||[]).find(n=>ad(n,e))!==void 0}function qE(t,e){if(t===e)return 0;const n=_m(t),s=_m(e);if(n!==s)return nn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return nn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=mr(r.integerValue||r.doubleValue),a=mr(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Ute(t.timestampValue,e.timestampValue);case 4:return Ute(hk(t),hk(e));case 5:return x3(t.stringValue,e.stringValue);case 6:return function(r,i){const o=mm(r),a=mm(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=nn(o[u],a[u]);if(c!==0)return c}return nn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=nn(mr(r.latitude),mr(i.latitude));return o!==0?o:nn(mr(r.longitude),mr(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qte(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},u=o[dD]?.arrayValue,c=a[dD]?.arrayValue,h=nn(u?.values?.length||0,c?.values?.length||0);return h!==0?h:qte(u,c)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===z1.mapValue&&i===z1.mapValue)return 0;if(r===z1.mapValue)return 1;if(i===z1.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const d=x3(a[h],c[h]);if(d!==0)return d;const p=qE(o[a[h]],u[c[h]]);if(p!==0)return p}return nn(a.length,c.length)}(t.mapValue,e.mapValue);default:throw ut(23264,{he:n})}}function Ute(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nn(t,e);const n=gm(t),s=gm(e),r=nn(n.seconds,s.seconds);return r!==0?r:nn(n.nanos,s.nanos)}function qte(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=qE(n[r],s[r]);if(i)return i}return nn(n.length,s.length)}function jE(t){return D3(t)}function D3(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=gm(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return mm(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return Je.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=D3(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${D3(e.fields[i])}`;return s+"}"}(t.mapValue):ut(61005,{value:t})}function ix(t){switch(_m(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=aF(t);return e?16+ix(e):16;case 5:return 2*t.stringValue.length;case 6:return mm(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+ix(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return l_(n.fields,(r,i)=>{s+=r.length+ix(i)}),s}(t.mapValue);default:throw ut(13486,{value:t})}}function O3(t){return!!t&&"integerValue"in t}function x7(t){return!!t&&"arrayValue"in t}function jte(t){return!!t&&"nullValue"in t}function Bte(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ox(t){return!!t&&"mapValue"in t}function QGe(t){return(t?.mapValue?.fields||{})[cve]?.stringValue===hve}function _0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return l_(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_0(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_0(t.arrayValue.values[n]);return e}return{...t}}function YGe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GGe}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ua{constructor(e){this.value=e}static empty(){return new Ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ox(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_0(n)}setAll(e){let n=Gi.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=_0(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ox(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ad(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ox(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){l_(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ua(_0(this.value))}}function dve(t){const e=[];return l_(t.fields,(n,s)=>{const r=new Gi([n]);if(ox(s)){const i=dve(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new hl(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Co{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Co(e,0,Ft.min(),Ft.min(),Ft.min(),Ua.empty(),0)}static newFoundDocument(e,n,s,r){return new Co(e,1,n,Ft.min(),s,r,0)}static newNoDocument(e,n){return new Co(e,2,n,Ft.min(),Ft.min(),Ua.empty(),0)}static newUnknownDocument(e,n){return new Co(e,3,n,Ft.min(),Ft.min(),Ua.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Co&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fD{constructor(e,n){this.position=e,this.inclusive=n}}function $te(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Je.comparator(Je.fromName(o.referenceValue),n.key):s=qE(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function zte(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ad(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pD{constructor(e,n="asc"){this.field=e,this.dir=n}}function XGe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fve{}class ui extends fve{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZGe(e,n,s):n==="array-contains"?new nQe(e,s):n==="in"?new sQe(e,s):n==="not-in"?new rQe(e,s):n==="array-contains-any"?new iQe(e,s):new ui(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new eQe(e,s):new tQe(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qE(n,this.value)):n!==null&&_m(this.value)===_m(n)&&this.matchesComparison(qE(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ld extends fve{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ld(e,n)}matches(e){return pve(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pve(t){return t.op==="and"}function gve(t){return JGe(t)&&pve(t)}function JGe(t){for(const e of t.filters)if(e instanceof ld)return!1;return!0}function L3(t){if(t instanceof ui)return t.field.canonicalString()+t.op.toString()+jE(t.value);if(gve(t))return t.filters.map(e=>L3(e)).join(",");{const e=t.filters.map(n=>L3(n)).join(",");return`${t.op}(${e})`}}function mve(t,e){return t instanceof ui?function(n,s){return s instanceof ui&&n.op===s.op&&n.field.isEqual(s.field)&&ad(n.value,s.value)}(t,e):t instanceof ld?function(n,s){return s instanceof ld&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&mve(i,s.filters[o]),!0):!1}(t,e):void ut(19439)}function _ve(t){return t instanceof ui?function(e){return`${e.field.canonicalString()} ${e.op} ${jE(e.value)}`}(t):t instanceof ld?function(e){return e.op.toString()+" {"+e.getFilters().map(_ve).join(" ,")+"}"}(t):"Filter"}class ZGe extends ui{constructor(e,n,s){super(e,n,s),this.key=Je.fromName(s.referenceValue)}matches(e){const n=Je.comparator(e.key,this.key);return this.matchesComparison(n)}}class eQe extends ui{constructor(e,n){super(e,"in",n),this.keys=yve("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tQe extends ui{constructor(e,n){super(e,"not-in",n),this.keys=yve("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yve(t,e){return(e.arrayValue?.values||[]).map(n=>Je.fromName(n.referenceValue))}class nQe extends ui{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return x7(n)&&fk(n.arrayValue,this.value)}}class sQe extends ui{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fk(this.value.arrayValue,n)}}class rQe extends ui{constructor(e,n){super(e,"not-in",n)}matches(e){if(fk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fk(this.value.arrayValue,n)}}class iQe extends ui{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!x7(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>fk(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oQe{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Hte(t,e=null,n=[],s=[],r=null,i=null,o=null){return new oQe(t,e,n,s,r,i,o)}function N7(t){const e=Nt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>L3(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),oF(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>jE(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>jE(s)).join(",")),e.Te=n}return e.Te}function D7(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XGe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mve(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zte(t.startAt,e.startAt)&&zte(t.endAt,e.endAt)}function M3(t){return Je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lF{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aQe(t,e,n,s,r,i,o,a){return new lF(t,e,n,s,r,i,o,a)}function uF(t){return new lF(t)}function Wte(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lQe(t){return t.collectionGroup!==null}function y0(t){const e=Nt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new yi(Gi.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new pD(r,s))}),n.has(Gi.keyField().canonicalString())||e.Ie.push(new pD(Gi.keyField(),s))}return e.Ie}function Lh(t){const e=Nt(t);return e.Ee||(e.Ee=uQe(e,y0(t))),e.Ee}function uQe(t,e){if(t.limitType==="F")return Hte(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new pD(r.field,i)});const n=t.endAt?new fD(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fD(t.startAt.position,t.startAt.inclusive):null;return Hte(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function F3(t,e,n){return new lF(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cF(t,e){return D7(Lh(t),Lh(e))&&t.limitType===e.limitType}function vve(t){return`${N7(Lh(t))}|lt:${t.limitType}`}function nb(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>_ve(s)).join(", ")}]`),oF(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>jE(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>jE(s)).join(",")),`Target(${n})`}(Lh(t))}; limitType=${t.limitType})`}function hF(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Je.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of y0(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=$te(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,y0(n),s)||n.endAt&&!function(r,i,o){const a=$te(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,y0(n),s))}(t,e)}function cQe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wve(t){return(e,n)=>{let s=!1;for(const r of y0(t)){const i=hQe(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function hQe(t,e,n){const s=t.field.isKeyField()?Je.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),u=o.data.field(r);return a!==null&&u!==null?qE(a,u):ut(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ut(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lw{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){l_(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return rve(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const dQe=new Nr(Je.comparator);function Vf(){return dQe}const bve=new Nr(Je.comparator);function vI(...t){let e=bve;for(const n of t)e=e.insert(n.key,n);return e}function Eve(t){let e=bve;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ry(){return v0()}function Tve(){return v0()}function v0(){return new lw(t=>t.toString(),(t,e)=>t.isEqual(e))}const fQe=new Nr(Je.comparator),pQe=new yi(Je.comparator);function ln(...t){let e=pQe;for(const n of t)e=e.add(n);return e}const gQe=new yi(nn);function mQe(){return gQe}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cD(e)?"-0":e}}function Cve(t){return{integerValue:""+t}}function _Qe(t,e){return $Ge(e)?Cve(e):O7(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dF{constructor(){this._=void 0}}function yQe(t,e,n){return t instanceof pk?function(s,r){const i={fields:{[ave]:{stringValue:ove},[uve]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&P7(r)&&(r=aF(r)),r&&(i.fields[lve]=r),{mapValue:i}}(n,e):t instanceof gk?Sve(t,e):t instanceof mk?kve(t,e):function(s,r){const i=Ive(s,r),o=Kte(i)+Kte(s.Ae);return O3(i)&&O3(s.Ae)?Cve(o):O7(s.serializer,o)}(t,e)}function vQe(t,e,n){return t instanceof gk?Sve(t,e):t instanceof mk?kve(t,e):n}function Ive(t,e){return t instanceof gD?function(n){return O3(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class pk extends dF{}class gk extends dF{constructor(e){super(),this.elements=e}}function Sve(t,e){const n=Ave(e);for(const s of t.elements)n.some(r=>ad(r,s))||n.push(s);return{arrayValue:{values:n}}}class mk extends dF{constructor(e){super(),this.elements=e}}function kve(t,e){let n=Ave(e);for(const s of t.elements)n=n.filter(r=>!ad(r,s));return{arrayValue:{values:n}}}class gD extends dF{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Kte(t){return mr(t.integerValue||t.doubleValue)}function Ave(t){return x7(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wQe{constructor(e,n){this.field=e,this.transform=n}}function bQe(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof gk&&s instanceof gk||n instanceof mk&&s instanceof mk?UE(n.elements,s.elements,ad):n instanceof gD&&s instanceof gD?ad(n.Ae,s.Ae):n instanceof pk&&s instanceof pk}(t.transform,e.transform)}class EQe{constructor(e,n){this.version=e,this.transformResults=n}}class kc{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kc}static exists(e){return new kc(void 0,e)}static updateTime(e){return new kc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ax(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fF{}function Rve(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new L7(t.key,kc.none()):new vR(t.key,t.data,kc.none());{const n=t.data,s=Ua.empty();let r=new yi(Gi.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new u_(t.key,s,new hl(r.toArray()),kc.none())}}function TQe(t,e,n){t instanceof vR?function(s,r,i){const o=s.value.clone(),a=Qte(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof u_?function(s,r,i){if(!ax(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=Qte(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Pve(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function w0(t,e,n,s){return t instanceof vR?function(r,i,o,a){if(!ax(r.precondition,i))return o;const u=r.value.clone(),c=Yte(r.fieldTransforms,a,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof u_?function(r,i,o,a){if(!ax(r.precondition,i))return o;const u=Yte(r.fieldTransforms,a,i),c=i.data;return c.setAll(Pve(r)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return ax(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function CQe(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Ive(s.transform,r||null);i!=null&&(n===null&&(n=Ua.empty()),n.set(s.field,i))}return n||null}function Gte(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&UE(n,s,(r,i)=>bQe(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vR extends fF{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class u_ extends fF{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pve(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Qte(t,e,n){const s=new Map;Bn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,vQe(o,a,n[r]))}return s}function Yte(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,yQe(i,o,e))}return s}class L7 extends fF{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IQe extends fF{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SQe{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&TQe(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=w0(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=w0(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Tve();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const u=Rve(o,a);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Ft.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ln())}isEqual(e){return this.batchId===e.batchId&&UE(this.mutations,e.mutations,(n,s)=>Gte(n,s))&&UE(this.baseMutations,e.baseMutations,(n,s)=>Gte(n,s))}}class M7{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Bn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return fQe}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new M7(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kQe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AQe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wr,vn;function RQe(t){switch(t){case ge.OK:return ut(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return ut(15467,{code:t})}}function xve(t){if(t===void 0)return Ff("GRPC error has no .code"),ge.UNKNOWN;switch(t){case wr.OK:return ge.OK;case wr.CANCELLED:return ge.CANCELLED;case wr.UNKNOWN:return ge.UNKNOWN;case wr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case wr.INTERNAL:return ge.INTERNAL;case wr.UNAVAILABLE:return ge.UNAVAILABLE;case wr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case wr.NOT_FOUND:return ge.NOT_FOUND;case wr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case wr.ABORTED:return ge.ABORTED;case wr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case wr.DATA_LOSS:return ge.DATA_LOSS;default:return ut(39323,{code:t})}}(vn=wr||(wr={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PQe(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xQe=new kg([4294967295,4294967295],0);function Xte(t){const e=PQe().encode(t),n=new Gye;return n.update(e),new Uint8Array(n.digest())}function Jte(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new kg([n,s],0),new kg([r,i],0)]}class F7{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wI(`Invalid padding: ${n}`);if(s<0)throw new wI(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wI(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wI(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=kg.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(kg.fromNumber(s)));return r.compare(xQe)===1&&(r=new kg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xte(e),[s,r]=Jte(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new F7(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Xte(e),[s,r]=Jte(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pF{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,wR.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new pF(Ft.min(),r,new Nr(nn),Vf(),ln())}}class wR{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new wR(s,n,ln(),ln(),ln())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lx{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Nve{constructor(e,n){this.targetId=e,this.Ce=n}}class Dve{constructor(e,n,s=eo.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Zte{constructor(){this.ve=0,this.Fe=ene(),this.Me=eo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ln(),n=ln(),s=ln();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ut(38017,{changeType:i})}}),new wR(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=ene()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Bn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NQe{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vf(),this.Je=H1(),this.He=H1(),this.Ye=new Nr(nn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ut(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(M3(i))if(s===0){const o=new Je(i.path);this.et(n,o,Co.newNoDocument(o,Ft.min()))}else Bn(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=mm(s).toUint8Array()}catch(u){if(u instanceof ive)return VE("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new F7(o,r,i)}catch(u){return VE(u instanceof wI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&M3(a.target)){const u=new Je(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Co.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=ln();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new pF(e,n,this.Ye,this.je,s);return this.je=Vf(),this.Je=H1(),this.He=H1(),this.Ye=new Nr(nn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zte,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new yi(nn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new yi(nn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zte),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function H1(){return new Nr(Je.comparator)}function ene(){return new Nr(Je.comparator)}const DQe={asc:"ASCENDING",desc:"DESCENDING"},OQe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LQe={and:"AND",or:"OR"};class MQe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function V3(t,e){return t.useProto3Json||oF(e)?e:{value:e}}function mD(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ove(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FQe(t,e){return mD(t,e.toTimestamp())}function Mh(t){return Bn(!!t,49232),Ft.fromTimestamp(function(e){const n=gm(e);return new Ss(n.seconds,n.nanos)}(t))}function V7(t,e){return U3(t,e).canonicalString()}function U3(t,e){const n=function(s){return new ri(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Lve(t){const e=ri.fromString(t);return Bn(qve(e),10190,{key:e.toString()}),e}function q3(t,e){return V7(t.databaseId,e.path)}function i6(t,e){const n=Lve(e);if(n.get(1)!==t.databaseId.projectId)throw new je(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new je(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Je(Fve(n))}function Mve(t,e){return V7(t.databaseId,e)}function VQe(t){const e=Lve(t);return e.length===4?ri.emptyPath():Fve(e)}function j3(t){return new ri(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fve(t){return Bn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tne(t,e,n){return{name:q3(t,e),fields:n.value.mapValue.fields}}function UQe(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ut(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,c){return u.useProto3Json?(Bn(c===void 0||typeof c=="string",58123),eo.fromBase64String(c||"")):(Bn(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),eo.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?ge.UNKNOWN:xve(u.code);return new je(c,u.message||"")}(o);n=new Dve(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=i6(t,s.document.name),i=Mh(s.document.updateTime),o=s.document.createTime?Mh(s.document.createTime):Ft.min(),a=new Ua({mapValue:{fields:s.document.fields}}),u=Co.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new lx(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=i6(t,s.document),i=s.readTime?Mh(s.readTime):Ft.min(),o=Co.newNoDocument(r,i),a=s.removedTargetIds||[];n=new lx([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=i6(t,s.document),i=s.removedTargetIds||[];n=new lx([],i,r,null)}else{if(!("filter"in e))return ut(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new AQe(r,i),a=s.targetId;n=new Nve(a,o)}}return n}function qQe(t,e){let n;if(e instanceof vR)n={update:tne(t,e.key,e.value)};else if(e instanceof L7)n={delete:q3(t,e.key)};else if(e instanceof u_)n={update:tne(t,e.key,e.data),updateMask:QQe(e.fieldMask)};else{if(!(e instanceof IQe))return ut(16599,{Vt:e.type});n={verify:q3(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof pk)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gk)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mk)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof gD)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw ut(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:FQe(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ut(27497)}(t,e.precondition)),n}function jQe(t,e){return t&&t.length>0?(Bn(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Mh(s.updateTime):Mh(r);return i.isEqual(Ft.min())&&(i=Mh(r)),new EQe(i,s.transformResults||[])}(n,e))):[]}function BQe(t,e){return{documents:[Mve(t,e.path)]}}function $Qe(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Mve(t,r);const i=function(u){if(u.length!==0)return Uve(ld.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:sb(h.field),direction:WQe(h.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=V3(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function zQe(t){let e=VQe(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Bn(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=Vve(h);return d instanceof ld&&gve(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new pD(rb(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,oF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new fD(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new fD(p,d)}(n.endAt)),aQe(e,r,o,i,a,"F",u,c)}function HQe(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vve(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=rb(e.unaryFilter.field);return ui.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=rb(e.unaryFilter.field);return ui.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rb(e.unaryFilter.field);return ui.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=rb(e.unaryFilter.field);return ui.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}}(t):t.fieldFilter!==void 0?function(e){return ui.create(rb(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return ld.create(e.compositeFilter.filters.map(n=>Vve(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ut(1026)}}(e.compositeFilter.op))}(t):ut(30097,{filter:t})}function WQe(t){return DQe[t]}function KQe(t){return OQe[t]}function GQe(t){return LQe[t]}function sb(t){return{fieldPath:t.canonicalString()}}function rb(t){return Gi.fromServerFormat(t.fieldPath)}function Uve(t){return t instanceof ui?function(e){if(e.op==="=="){if(Bte(e.value))return{unaryFilter:{field:sb(e.field),op:"IS_NAN"}};if(jte(e.value))return{unaryFilter:{field:sb(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Bte(e.value))return{unaryFilter:{field:sb(e.field),op:"IS_NOT_NAN"}};if(jte(e.value))return{unaryFilter:{field:sb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sb(e.field),op:KQe(e.op),value:e.value}}}(t):t instanceof ld?function(e){const n=e.getFilters().map(s=>Uve(s));return n.length===1?n[0]:{compositeFilter:{op:GQe(e.op),filters:n}}}(t):ut(54877,{filter:t})}function QQe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qve(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hg{constructor(e,n,s,r,i=Ft.min(),o=Ft.min(),a=eo.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new hg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YQe{constructor(e){this.yt=e}}function XQe(t){const e=zQe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?F3(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JQe{constructor(){this.Cn=new ZQe}addToCollectionParentIndex(e,n){return this.Cn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(pm.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(pm.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class ZQe{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new yi(ri.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new yi(ri.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nne={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jve=41943040;class La{static withCacheSize(e){return new La(e,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/La.DEFAULT_COLLECTION_PERCENTILE=10,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,La.DEFAULT=new La(jve,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),La.DISABLED=new La(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BE{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new BE(0)}static cr(){return new BE(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sne="LruGarbageCollector",eYe=1048576;function rne([t,e],[n,s]){const r=nn(t,n);return r===0?nn(e,s):r}class tYe{constructor(e){this.Ir=e,this.buffer=new yi(rne),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rne(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nYe{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(sne,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){GT(n)?xe(sne,"Ignoring IndexedDB error during garbage collection: ",n):await KT(n)}await this.Vr(3e5)})}}class sYe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(iF.ce);const s=new tYe(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(nne)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nne):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(c=Date.now(),tb()<=Kt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function rYe(t,e){return new sYe(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iYe{constructor(){this.changes=new lw(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Co.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oYe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class aYe{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&w0(s.mutation,r,hl.empty(),Ss.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ln()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ln()){const r=Ry();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=vI();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Ry();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ln()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Vf();const o=v0(),a=function(){return v0()}();return n.forEach((u,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof u_)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),w0(h.mutation,c,h.mutation.getFieldMask(),Ss.now())):o.set(c.key,hl.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new oYe(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const s=v0();let r=new Nr((o,a)=>o-a),i=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=s.get(u)||hl.empty();h=a.applyToLocalView(c,h),s.set(u,h);const d=(r.get(a.batchId)||ln()).add(u);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=Tve();h.forEach(p=>{if(!i.has(p)){const m=Rve(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ue.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return Je.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lQe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ue.resolve(Ry());let a=ck,u=i;return o.next(c=>ue.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ue.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ln())).next(h=>({batchId:a,changes:Eve(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Je(n)).next(s=>{let r=vI();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=vI();return this.indexManager.getCollectionParents(e,i).next(a=>ue.forEach(a,u=>{const c=function(h,d){return new lF(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Co.newInvalidDocument(h)))});let a=vI();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&w0(h.mutation,c,hl.empty(),Ss.now()),hF(n,c)&&(a=a.insert(u,c))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class lYe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mh(s.createTime)}}(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:XQe(s.bundledQuery),readTime:Mh(s.readTime)}}(n)),ue.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uYe{constructor(){this.overlays=new Nr(Je.comparator),this.qr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ry();return ue.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ue.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const r=Ry(),i=n.length+1,o=new Je(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Nr((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=Ry(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ry(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return ue.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new kQe(n,s));let i=this.qr.get(n);i===void 0&&(i=ln(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cYe{constructor(){this.sessionToken=eo.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class U7{constructor(){this.Qr=new yi(Pi.$r),this.Ur=new yi(Pi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Pi(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Pi(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Je(new ri([])),s=new Pi(n,e),r=new Pi(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Je(new ri([])),s=new Pi(n,e),r=new Pi(n,e+1);let i=ln();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Pi(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Pi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Je.comparator(e.key,n.key)||nn(e.Yr,n.Yr)}static Kr(e,n){return nn(e.Yr,n.Yr)||Je.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hYe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yi(Pi.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SQe(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Pi(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ue.resolve(o)}lookupMutationBatch(e,n){return ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ue.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?R7:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Pi(n,0),r=new Pi(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ue.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yi(nn);return n.forEach(r=>{const i=new Pi(r,0),o=new Pi(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Je.isDocumentKey(i)||(i=i.child(""));const o=new Pi(new Je(i),0);let a=new yi(nn);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(u.Yr)),!0)},o),ue.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Bn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(n.mutations,r=>{const i=new Pi(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Pi(n,0),r=this.Zr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dYe{constructor(e){this.ri=e,this.docs=function(){return new Nr(Je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():Co.newInvalidDocument(n))}getEntries(e,n){let s=Vf();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Co.newInvalidDocument(r))}),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Vf();const o=n.path,a=new Je(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||UGe(VGe(h),s)<=0||(r.has(h.key)||hF(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ut(9500)}ii(e,n){return ue.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new fYe(this)}getSize(e){return ue.resolve(this.size)}}class fYe extends iYe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pYe{constructor(e){this.persistence=e,this.si=new lw(n=>N7(n),D7),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.oi=0,this._i=new U7,this.targetCount=0,this.ai=BE.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new BE(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.Pr(n),ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ue.waitFor(i).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ue.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bve{constructor(e,n){this.ui={},this.overlays={},this.ci=new iF(0),this.li=!1,this.li=!0,this.hi=new cYe,this.referenceDelegate=e(this),this.Pi=new pYe(this),this.indexManager=new JQe,this.remoteDocumentCache=function(s){return new dYe(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new YQe(n),this.Ii=new lYe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uYe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new hYe(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){xe("MemoryPersistence","Starting transaction:",e);const r=new gYe(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ue.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class gYe extends jGe{constructor(e){super(),this.currentSequenceNumber=e}}class q7{constructor(e){this.persistence=e,this.Ri=new U7,this.Vi=null}static mi(e){return new q7(e)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,s=>{const r=Je.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Ft.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _D{constructor(e,n){this.persistence=e,this.pi=new lw(s=>zGe(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=rYe(this,n)}static mi(e,n){return new _D(e,n)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ue.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ue.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Ft.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ix(e.data.value)),n}br(e,n,s){return ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ue.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class j7{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=ln(),r=ln();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new j7(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mYe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _Ye{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _We()?8:BGe(Uo())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mYe;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(tb()<=Kt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",nb(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(tb()<=Kt.DEBUG&&xe("QueryEngine","Query:",nb(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(tb()<=Kt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",nb(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lh(n))):ue.resolve())}ys(e,n){if(Wte(n))return ue.resolve(null);let s=Lh(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=F3(n,null,"F"),s=Lh(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=ln(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,F3(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,s,r){return Wte(n)||r.isEqual(Ft.min())?ue.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ue.resolve(null):(tb()<=Kt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nb(n)),this.vs(e,o,n,FGe(r,ck)).next(a=>a))})}Ds(e,n){let s=new yi(wve(e));return n.forEach((r,i)=>{hF(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return tb()<=Kt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",nb(n)),this.ps.getDocumentsMatchingQuery(e,n,pm.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const B7="LocalStore",yYe=3e8;class vYe{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Nr(nn),this.xs=new lw(i=>N7(i),D7),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aYe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function wYe(t,e,n,s){return new vYe(t,e,n,s)}async function $ve(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let u=ln();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function bYe(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const h=u.batch,d=h.keys();let p=ue.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(a,m)).next(w=>{const k=u.docVersions.get(m);Bn(k!==null,48541),w.version.compareTo(k)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=ln();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function zve(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function EYe(t,e){const n=Nt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(eo.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,k,P){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=yYe?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let u=Vf(),c=ln();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(TYe(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!s.isEqual(Ft.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ue.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=r,i))}function TYe(t,e,n){let s=ln(),r=ln();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Vf();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(Ft.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):xe(B7,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:r}})}function CYe(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=R7),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function IYe(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ue.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new hg(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function B3(t,e,n){const s=Nt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!GT(o))throw o;xe(B7,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function ine(t,e,n){const s=Nt(t);let r=Ft.min(),i=ln();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,c){const h=Nt(a),d=h.xs.get(c);return d!==void 0?ue.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(s,o,Lh(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Ft.min(),n?i:ln())).next(a=>(SYe(s,cQe(e),a),{documents:a,Qs:i})))}function SYe(t,e,n){let s=t.Os.get(e)||Ft.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class one{constructor(){this.activeTargetIds=mQe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kYe{constructor(){this.Mo=new one,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new one,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AYe{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ane="ConnectivityMonitor";class lne{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(ane,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(ane,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let W1=null;function $3(){return W1===null?W1=function(){return 268435456+Math.round(2147483648*Math.random())}():W1++,"0x"+W1.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const o6="RestConnection",RYe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PYe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===hD?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=$3(),a=this.zo(e,n.toUriEncodedString());xe(o6,`Sending RPC '${e}' ${o}:`,a,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:c}=new URL(a),h=bd(c);return this.Jo(e,a,u,s,h).then(d=>(xe(o6,`Received RPC '${e}' ${o}: `,d),d),d=>{throw VE(o6,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+WT}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=RYe[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xYe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ro="WebChannelConnection";class NYe extends PYe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=$3();return new Promise((a,u)=>{const c=new Qye;c.setWithCredentials(!0),c.listenOnce(Yye.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nx.NO_ERROR:const d=c.getResponseJson();xe(ro,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case nx.TIMEOUT:xe(ro,`RPC '${e}' ${o} timed out`),u(new je(ge.DEADLINE_EXCEEDED,"Request time out"));break;case nx.HTTP_ERROR:const p=c.getStatus();if(xe(ro,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(O)>=0?O:ge.UNKNOWN}(w.status);u(new je(k,w.message))}else u(new je(ge.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new je(ge.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{xe(ro,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);xe(ro,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}T_(e,n,s){const r=$3(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Zye(),a=Jye(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");xe(ro,`Creating RPC '${e}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);this.I_(d);let p=!1,m=!1;const w=new xYe({Yo:P=>{m?xe(ro,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(xe(ro,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),xe(ro,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,yI.EventType.OPEN,()=>{m||(xe(ro,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,yI.EventType.CLOSE,()=>{m||(m=!0,xe(ro,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,yI.EventType.ERROR,P=>{m||(m=!0,VE(ro,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new je(ge.UNAVAILABLE,"The operation could not be completed")))}),k(d,yI.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];Bn(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){xe(ro,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(I){const v=wr[I];if(v!==void 0)return xve(v)}(q),J=V.message;H===void 0&&(H=ge.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new je(H,J)),d.close()}else xe(ro,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),k(a,Xye.STAT_EVENT,P=>{P.stat===P3.PROXY?xe(ro,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===P3.NOPROXY&&xe(ro,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function a6(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gF(t){return new MQe(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Hve{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&xe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const une="PersistentStream";class Wve{constructor(e,n,s,r,i,o,a,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hve(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Ff(n.toString()),Ff("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new je(ge.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return xe(une,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(xe(une,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DYe extends Wve{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=UQe(this.serializer,e),s=function(r){if(!("targetChange"in r))return Ft.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?Ft.min():i.readTime?Mh(i.readTime):Ft.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=j3(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=M3(a)?{documents:BQe(r,a)}:{query:$Qe(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=Ove(r,i.resumeToken);const u=V3(r,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Ft.min())>0){o.readTime=mD(r,i.snapshotVersion.toTimestamp());const u=V3(r,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=HQe(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=j3(this.serializer),n.removeTarget=e,this.q_(n)}}class OYe extends Wve{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jQe(e.writeResults,e.commitTime),s=Mh(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=j3(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>qQe(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LYe{}class MYe extends LYe{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new je(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,U3(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new je(ge.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,U3(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new je(ge.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class FYe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ff(n),this.aa=!1):xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Av="RemoteStore";class VYe{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{uw(this)&&(xe(Av,"Restarting streams for network reachability change."),await async function(a){const u=Nt(a);u.Ea.add(4),await bR(u),u.Ra.set("Unknown"),u.Ea.delete(4),await mF(u)}(this))})}),this.Ra=new FYe(s,r)}}async function mF(t){if(uw(t))for(const e of t.da)await e(!0)}async function bR(t){for(const e of t.da)await e(!1)}function Kve(t,e){const n=Nt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),W7(n)?H7(n):QT(n).O_()&&z7(n,e))}function $7(t,e){const n=Nt(t),s=QT(n);n.Ia.delete(e),s.O_()&&Gve(n,e),n.Ia.size===0&&(s.O_()?s.L_():uw(n)&&n.Ra.set("Unknown"))}function z7(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ft.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}QT(t).Y_(e)}function Gve(t,e){t.Va.Ue(e),QT(t).Z_(e)}function H7(t){t.Va=new NQe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),QT(t).start(),t.Ra.ua()}function W7(t){return uw(t)&&!QT(t).x_()&&t.Ia.size>0}function uw(t){return Nt(t).Ea.size===0}function Qve(t){t.Va=void 0}async function UYe(t){t.Ra.set("Online")}async function qYe(t){t.Ia.forEach((e,n)=>{z7(t,e)})}async function jYe(t,e){Qve(t),W7(t)?(t.Ra.ha(e),H7(t)):t.Ra.set("Unknown")}async function BYe(t,e,n){if(t.Ra.set("Online"),e instanceof Dve&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){xe(Av,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yD(t,s)}else if(e instanceof lx?t.Va.Ze(e):e instanceof Nve?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ft.min()))try{const s=await zve(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Ia.get(u);c&&r.Ia.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,u)=>{const c=r.Ia.get(a);if(!c)return;r.Ia.set(a,c.withResumeToken(eo.EMPTY_BYTE_STRING,c.snapshotVersion)),Gve(r,a);const h=new hg(c.target,a,u,c.sequenceNumber);z7(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){xe(Av,"Failed to raise snapshot:",s),await yD(t,s)}}async function yD(t,e,n){if(!GT(e))throw e;t.Ea.add(1),await bR(t),t.Ra.set("Offline"),n||(n=()=>zve(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe(Av,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await mF(t)})}function Yve(t,e){return e().catch(n=>yD(t,n,e))}async function _F(t){const e=Nt(t),n=ym(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:R7;for(;$Ye(e);)try{const r=await CYe(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,zYe(e,r)}catch(r){await yD(e,r)}Xve(e)&&Jve(e)}function $Ye(t){return uw(t)&&t.Ta.length<10}function zYe(t,e){t.Ta.push(e);const n=ym(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Xve(t){return uw(t)&&!ym(t).x_()&&t.Ta.length>0}function Jve(t){ym(t).start()}async function HYe(t){ym(t).ra()}async function WYe(t){const e=ym(t);for(const n of t.Ta)e.ea(n.mutations)}async function KYe(t,e,n){const s=t.Ta.shift(),r=M7.from(s,e,n);await Yve(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await _F(t)}async function GYe(t,e){e&&ym(t).X_&&await async function(n,s){if(function(r){return RQe(r)&&r!==ge.ABORTED}(s.code)){const r=n.Ta.shift();ym(n).B_(),await Yve(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await _F(n)}}(t,e),Xve(t)&&Jve(t)}async function cne(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),xe(Av,"RemoteStore received new credentials");const s=uw(n);n.Ea.add(3),await bR(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await mF(n)}async function QYe(t,e){const n=Nt(t);e?(n.Ea.delete(2),await mF(n)):e||(n.Ea.add(2),await bR(n),n.Ra.set("Unknown"))}function QT(t){return t.ma||(t.ma=function(e,n,s){const r=Nt(e);return r.sa(),new DYe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:UYe.bind(null,t),t_:qYe.bind(null,t),r_:jYe.bind(null,t),H_:BYe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),W7(t)?H7(t):t.Ra.set("Unknown")):(await t.ma.stop(),Qve(t))})),t.ma}function ym(t){return t.fa||(t.fa=function(e,n,s){const r=Nt(e);return r.sa(),new OYe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:HYe.bind(null,t),r_:GYe.bind(null,t),ta:WYe.bind(null,t),na:KYe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await _F(t)):(await t.fa.stop(),t.Ta.length>0&&(xe(Av,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K7{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Ag,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new K7(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G7(t,e){if(Ff("AsyncQueue",`${e}: ${t}`),GT(t))return new je(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bb{static emptySet(e){return new Bb(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Je.comparator(n.key,s.key):(n,s)=>Je.comparator(n.key,s.key),this.keyedMap=vI(),this.sortedSet=new Nr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bb)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Bb;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hne{constructor(){this.ga=new Nr(Je.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ut(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class $E{constructor(e,n,s,r,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $E(e,n,Bb.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cF(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class YYe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class XYe{constructor(){this.queries=dne(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Nt(e),r=s.queries;s.queries=dne(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new je(ge.ABORTED,"Firestore shutting down"))}}function dne(){return new lw(t=>vve(t),cF)}async function Zve(t,e){const n=Nt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new YYe,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=G7(o,`Initialization of query '${nb(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Q7(n)}async function ewe(t,e){const n=Nt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function JYe(t,e){const n=Nt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&Q7(n)}function ZYe(t,e,n){const s=Nt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function Q7(t){t.Ca.forEach(e=>{e.next()})}var z3,fne;(fne=z3||(z3={})).Ma="default",fne.Cache="cache";class twe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new $E(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$E.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==z3.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nwe{constructor(e){this.key=e}}class swe{constructor(e){this.key=e}}class eXe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ln(),this.mutatedKeys=ln(),this.eu=wve(e),this.tu=new Bb(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new hne,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=hF(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(u&&this.eu(m,u)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:k})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new $E(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hne,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ln(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new swe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new nwe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=ln();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $E.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Y7="SyncEngine";class tXe{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class nXe{constructor(e){this.key=e,this.hu=!1}}class sXe{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new lw(a=>vve(a),cF),this.Iu=new Map,this.Eu=new Set,this.du=new Nr(Je.comparator),this.Au=new Map,this.Ru=new U7,this.Vu={},this.mu=new Map,this.fu=BE.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rXe(t,e,n=!0){const s=uwe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await rwe(s,e,n,!0),r}async function iXe(t,e){const n=uwe(t);await rwe(n,e,!0,!1)}async function rwe(t,e,n,s){const r=await IYe(t.localStore,Lh(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await oXe(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Kve(t.remoteStore,r),a}async function oXe(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,k,P,O){let M=k.view.ru(P);M.Cs&&(M=await ine(w.localStore,k.query,!1).then(({documents:J})=>k.view.ru(J,M)));const V=O&&O.targetChanges.get(k.targetId),q=O&&O.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(M,w.isPrimaryClient,V,q);return gne(w,k.targetId,H.au),H.snapshot}(t,d,p,m);const i=await ine(t.localStore,e,!0),o=new eXe(e,i.Qs),a=o.ru(i.documents),u=wR.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,u);gne(t,n,c.au);const h=new tXe(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function aXe(t,e,n){const s=Nt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!cF(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await B3(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&$7(s.remoteStore,r.targetId),H3(s,r.targetId)}).catch(KT)):(H3(s,r.targetId),await B3(s.localStore,r.targetId,!0))}async function lXe(t,e){const n=Nt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),$7(n.remoteStore,s.targetId))}async function uXe(t,e,n){const s=mXe(t);try{const r=await function(i,o){const a=Nt(i),u=Ss.now(),c=o.reduce((p,m)=>p.add(m.key),ln());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Vf(),w=ln();return a.Ns.getEntries(p,c).next(k=>{m=k,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(k=>{h=k;const P=[];for(const O of o){const M=CQe(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new u_(O.key,M,dve(M.value.mapValue),kc.exists(!0)))}return a.mutationQueue.addMutationBatch(p,u,P,o)}).next(k=>{d=k;const P=k.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,k.batchId,P)})}).then(()=>({batchId:d.batchId,changes:Eve(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let u=i.Vu[i.currentUser.toKey()];u||(u=new Nr(nn)),u=u.insert(o,a),i.Vu[i.currentUser.toKey()]=u}(s,r.batchId,n),await ER(s,r.changes),await _F(s.remoteStore)}catch(r){const i=G7(r,"Failed to persist write");n.reject(i)}}async function iwe(t,e){const n=Nt(t);try{const s=await EYe(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(Bn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Bn(o.hu,14607):r.removedDocuments.size>0&&(Bn(o.hu,42227),o.hu=!1))}),await ER(n,s,e)}catch(s){await KT(s)}}function pne(t,e,n){const s=Nt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Nt(i);a.onlineState=o;let u=!1;a.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&Q7(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function cXe(t,e,n){const s=Nt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Nr(Je.comparator);o=o.insert(i,Co.newNoDocument(i,Ft.min()));const a=ln().add(i),u=new pF(Ft.min(),new Map,new Nr(nn),o,a);await iwe(s,u),s.du=s.du.remove(i),s.Au.delete(e),X7(s)}else await B3(s.localStore,e,!1).then(()=>H3(s,e,n)).catch(KT)}async function hXe(t,e){const n=Nt(t),s=e.batch.batchId;try{const r=await bYe(n.localStore,e);awe(n,s,null),owe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ER(n,r)}catch(r){await KT(r)}}async function dXe(t,e,n){const s=Nt(t);try{const r=await function(i,o){const a=Nt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(h=>(Bn(h!==null,37113),c=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(s.localStore,e);awe(s,e,n),owe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ER(s,r)}catch(r){await KT(r)}}function owe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function awe(t,e,n){const s=Nt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function H3(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||lwe(t,s)})}function lwe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($7(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),X7(t))}function gne(t,e,n){for(const s of n)s instanceof nwe?(t.Ru.addReference(s.key,e),fXe(t,s)):s instanceof swe?(xe(Y7,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||lwe(t,s.key)):ut(19791,{wu:s})}function fXe(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(xe(Y7,"New document in limbo: "+n),t.Eu.add(s),X7(t))}function X7(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Je(ri.fromString(e)),s=t.fu.next();t.Au.set(s,new nXe(n)),t.du=t.du.insert(n,s),Kve(t.remoteStore,new hg(Lh(uF(n.path)),s,"TargetPurposeLimboResolution",iF.ce))}}async function ER(t,e,n){const s=Nt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,u)=>{o.push(s.pu(u,e,n).then(c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(u.targetId)?.current;s.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=j7.As(u.targetId,c);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,u){const c=Nt(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ue.forEach(u,d=>ue.forEach(d.Es,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>ue.forEach(d.ds,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!GT(h))throw h;xe(B7,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);c.Ms=c.Ms.insert(d,w)}}}(s.localStore,i))}async function pXe(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){xe(Y7,"User change. New user:",e.toKey());const s=await $ve(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new je(ge.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ER(n,s.Ls)}}function gXe(t,e){const n=Nt(t),s=n.Au.get(e);if(s&&s.hu)return ln().add(s.key);{let r=ln();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function uwe(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iwe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gXe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cXe.bind(null,e),e.Pu.H_=JYe.bind(null,e.eventManager),e.Pu.yu=ZYe.bind(null,e.eventManager),e}function mXe(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hXe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dXe.bind(null,e),e}class vD{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gF(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wYe(this.persistence,new _Ye,e.initialUser,this.serializer)}Cu(e){return new Bve(q7.mi,this.serializer)}Du(e){return new kYe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vD.provider={build:()=>new vD};class _Xe extends vD{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Bn(this.persistence.referenceDelegate instanceof _D,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new nYe(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?La.withCacheSize(this.cacheSizeBytes):La.DEFAULT;return new Bve(s=>_D.mi(s,n),this.serializer)}}class W3{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pne(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pXe.bind(null,this.syncEngine),await QYe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XYe}()}createDatastore(e){const n=gF(e.databaseInfo.databaseId),s=function(r){return new NYe(r)}(e.databaseInfo);return function(r,i,o,a){return new MYe(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new VYe(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>pne(this.syncEngine,n,0),function(){return lne.v()?new lne:new AYe}())}createSyncEngine(e,n){return function(s,r,i,o,a,u,c){const h=new sXe(s,r,i,o,a,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Nt(e);xe(Av,"RemoteStore shutting down."),n.Ea.add(5),await bR(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}W3.provider={build:()=>new W3};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cwe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ff("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vm="FirestoreClient";class yXe{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=_o.UNAUTHENTICATED,this.clientId=k7.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{xe(vm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(xe(vm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ag;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=G7(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function l6(t,e){t.asyncQueue.verifyOperationInProgress(),xe(vm,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await $ve(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mne(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vXe(t);xe(vm,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>cne(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>cne(e.remoteStore,r)),t._onlineComponents=e}async function vXe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(vm,"Using user provided OfflineComponentProvider");try{await l6(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ge.FAILED_PRECONDITION||s.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;VE("Error using user provided cache. Falling back to memory cache: "+n),await l6(t,new vD)}}else xe(vm,"Using default OfflineComponentProvider"),await l6(t,new _Xe(void 0));return t._offlineComponents}async function hwe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(vm,"Using user provided OnlineComponentProvider"),await mne(t,t._uninitializedComponentsProvider._online)):(xe(vm,"Using default OnlineComponentProvider"),await mne(t,new W3))),t._onlineComponents}function wXe(t){return hwe(t).then(e=>e.syncEngine)}async function K3(t){const e=await hwe(t),n=e.eventManager;return n.onListen=rXe.bind(null,e.syncEngine),n.onUnlisten=aXe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iXe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lXe.bind(null,e.syncEngine),n}function bXe(t,e,n={}){const s=new Ag;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,u){const c=new cwe({next:d=>{c.Nu(),i.enqueueAndForget(()=>ewe(r,h));const p=d.docs.has(o);!p&&d.fromCache?u.reject(new je(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?u.reject(new je(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new twe(uF(o.path),c,{includeMetadataChanges:!0,qa:!0});return Zve(r,h)}(await K3(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dwe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const _ne=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fwe="firestore.googleapis.com",yne=!0;class vne{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new je(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fwe,this.ssl=yne}else this.host=e.host,this.ssl=e.ssl??yne;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jve;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eYe)throw new je(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MGe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dwe(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new je(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J7{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vne({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vne(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new IGe;switch(n.type){case"firstParty":return new RGe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new je(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_ne.get(e);n&&(xe("ComponentProvider","Removing Datastore"),_ne.delete(e),n.terminate())}(this),Promise.resolve()}}function EXe(t,e,n,s={}){t=Sc(t,J7);const r=bd(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(Q2(`https://${a}`),Y2("Firestore",!0)),i.host!==fwe&&i.host!==a&&VE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:r,emulatorOptions:s};if(!dm(u,o)&&(t._setSettings(u),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=_o.MOCK_USER;else{c=ZH(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new je(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new _o(d)}t._authCredentials=new SGe(new tve(c,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yF{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new yF(this.firestore,e,this._query)}}class Ir{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _k(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}toJSON(){return{type:Ir._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(yR(n,Ir._jsonSchema))return new Ir(e,s||null,new Je(ri.fromString(n.referencePath)))}}Ir._jsonSchemaVersion="firestore/documentReference/1.0",Ir._jsonSchema={type:Cr("string",Ir._jsonSchemaVersion),referencePath:Cr("string")};class _k extends yF{constructor(e,n,s){super(e,n,uF(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new Je(e))}withConverter(e){return new _k(this.firestore,e,this._path)}}function Z7(t,e,...n){if(t=Wn(t),arguments.length===1&&(e=k7.newId()),LGe("doc","path",e),t instanceof J7){const s=ri.fromString(e,...n);return Dte(s),new Ir(t,null,new Je(s))}{if(!(t instanceof Ir||t instanceof _k))throw new je(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ri.fromString(e,...n));return Dte(s),new Ir(t.firestore,t instanceof _k?t.converter:null,new Je(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wne="AsyncQueue";class bne{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hve(this,"async_queue_retry"),this._c=()=>{const s=a6();s&&xe(wne,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=a6();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=a6();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ag;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!GT(e))throw e;xe(wne,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Ff("INTERNAL UNHANDLED ERROR: ",Ene(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=K7.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ut(47125,{Pc:Ene(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ene(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tne(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Rv extends J7{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new bne,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bne(e),this._firestoreClient=void 0,await e}}}function pwe(t,e){const n=typeof t=="object"?t:Z2(),s=typeof t=="string"?t:hD,r=pR(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=JH("firestore");i&&EXe(r,...i)}return r}function eW(t){if(t._terminated)throw new je(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TXe(t),t._firestoreClient}function TXe(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new KGe(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,dwe(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yXe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xl(eo.fromBase64String(e))}catch(n){throw new je(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xl(eo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yR(e,xl._jsonSchema))return xl.fromBase64String(e.bytes)}}xl._jsonSchemaVersion="firestore/bytes/1.0",xl._jsonSchema={type:Cr("string",xl._jsonSchemaVersion),bytes:Cr("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vF{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new je(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wF{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new je(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new je(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nn(this._lat,e._lat)||nn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fh._jsonSchemaVersion}}static fromJSON(e){if(yR(e,Fh._jsonSchema))return new Fh(e.latitude,e.longitude)}}Fh._jsonSchemaVersion="firestore/geoPoint/1.0",Fh._jsonSchema={type:Cr("string",Fh._jsonSchemaVersion),latitude:Cr("number"),longitude:Cr("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yR(e,Vh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vh(e.vectorValues);throw new je(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vh._jsonSchemaVersion="firestore/vectorValue/1.0",Vh._jsonSchema={type:Cr("string",Vh._jsonSchemaVersion),vectorValues:Cr("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const CXe=/^__.*__$/;class IXe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new u_(e,this.data,this.fieldMask,n,this.fieldTransforms):new vR(e,this.data,n,this.fieldTransforms)}}class gwe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new u_(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mwe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:t})}}class tW{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tW({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wD(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mwe(this.Ac)&&CXe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SXe{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||gF(e)}Cc(e,n,s,r=!1){return new tW({Ac:e,methodName:n,Dc:s,path:Gi.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _we(t){const e=t._freezeSettings(),n=gF(t._databaseId);return new SXe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kXe(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);sW("Data must be an object, but it was:",o,s);const a=ywe(s,o);let u,c;if(i.merge)u=new hl(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=G3(e,d,n);if(!o.contains(p))throw new je(ge.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);wwe(h,p)||h.push(p)}u=new hl(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new IXe(new Ua(a),u,c)}class bF extends wF{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bF}}class nW extends wF{_toFieldTransform(e){return new wQe(e.path,new pk)}isEqual(e){return e instanceof nW}}function AXe(t,e,n,s){const r=t.Cc(1,e,n);sW("Data must be an object, but it was:",r,s);const i=[],o=Ua.empty();l_(s,(u,c)=>{const h=rW(e,u,n);c=Wn(c);const d=r.yc(h);if(c instanceof bF)i.push(h);else{const p=EF(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new hl(i);return new gwe(o,a,r.fieldTransforms)}function RXe(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[G3(e,s,n)],u=[r];if(i.length%2!=0)throw new je(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(G3(e,i[p])),u.push(i[p+1]);const c=[],h=Ua.empty();for(let p=a.length-1;p>=0;--p)if(!wwe(c,a[p])){const m=a[p];let w=u[p];w=Wn(w);const k=o.yc(m);if(w instanceof bF)c.push(m);else{const P=EF(w,k);P!=null&&(c.push(m),h.set(m,P))}}const d=new hl(c);return new gwe(h,d,o.fieldTransforms)}function EF(t,e){if(vwe(t=Wn(t)))return sW("Unsupported field value:",e,t),ywe(t,e);if(t instanceof wF)return function(n,s){if(!mwe(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=EF(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Wn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _Qe(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ss.fromDate(n);return{timestampValue:mD(s.serializer,r)}}if(n instanceof Ss){const r=new Ss(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mD(s.serializer,r)}}if(n instanceof Fh)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof xl)return{bytesValue:Ove(s.serializer,n._byteString)};if(n instanceof Ir){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:V7(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Vh)return function(r,i){return{mapValue:{fields:{[cve]:{stringValue:hve},[dD]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return O7(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${A7(n)}`)}(t,e)}function ywe(t,e){const n={};return rve(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):l_(t,(s,r)=>{const i=EF(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function vwe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ss||t instanceof Fh||t instanceof xl||t instanceof Ir||t instanceof wF||t instanceof Vh)}function sW(t,e,n){if(!vwe(n)||!nve(n)){const s=A7(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function G3(t,e,n){if((e=Wn(e))instanceof vF)return e._internalPath;if(typeof e=="string")return rW(t,e);throw wD("Field path arguments must be of type string or ",t,!1,void 0,n)}const PXe=new RegExp("[~\\*/\\[\\]]");function rW(t,e,n){if(e.search(PXe)>=0)throw wD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vF(...e.split("."))._internalPath}catch{throw wD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wD(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new je(ge.INVALID_ARGUMENT,a+t+u)}function wwe(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bwe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xXe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ewe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xXe extends bwe{data(){return super.data()}}function Ewe(t,e){return typeof e=="string"?rW(t,e):e instanceof vF?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NXe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new je(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DXe{convertValue(e,n="none"){switch(_m(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ut(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return l_(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[dD].arrayValue?.values?.map(s=>mr(s.doubleValue));return new Vh(n)}convertGeoPoint(e){return new Fh(mr(e.latitude),mr(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=aF(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(hk(e));default:return null}}convertTimestamp(e){const n=gm(e);return new Ss(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ri.fromString(e);Bn(qve(s),9688,{name:e});const r=new dk(s.get(1),s.get(3)),i=new Je(s.popFirst(5));return r.isEqual(n)||Ff(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OXe(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class bI{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ev extends bwe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ux(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ewe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ev._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}ev._jsonSchemaVersion="firestore/documentSnapshot/1.0",ev._jsonSchema={type:Cr("string",ev._jsonSchemaVersion),bundleSource:Cr("string","DocumentSnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class ux extends ev{data(e={}){return super.data(e)}}class $b{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new bI(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ux(this._firestore,this._userDataWriter,s.key,s,new bI(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new je(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new ux(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new ux(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:LXe(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$b._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=k7.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function LXe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bD(t){t=Sc(t,Ir);const e=Sc(t.firestore,Rv);return bXe(eW(e),t._key).then(n=>kwe(e,t,n))}$b._jsonSchemaVersion="firestore/querySnapshot/1.0",$b._jsonSchema={type:Cr("string",$b._jsonSchemaVersion),bundleSource:Cr("string","QuerySnapshot"),bundleName:Cr("string"),bundle:Cr("string")};class Twe extends DXe{constructor(e){super(),this.firestore=e}convertBytes(e){return new xl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,n)}}function ED(t,e,n){t=Sc(t,Ir);const s=Sc(t.firestore,Rv),r=OXe(t.converter,e,n);return iW(s,[kXe(_we(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,kc.none())])}function Cwe(t,e,n,...s){t=Sc(t,Ir);const r=Sc(t.firestore,Rv),i=_we(r);let o;return o=typeof(e=Wn(e))=="string"||e instanceof vF?RXe(i,"updateDoc",t._key,e,n,s):AXe(i,"updateDoc",t._key,e),iW(r,[o.toMutation(t._key,kc.exists(!0))])}function Iwe(t){return iW(Sc(t.firestore,Rv),[new L7(t._key,kc.none())])}function Swe(t,...e){t=Wn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Tne(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Tne(e[s])){const u=e[s];e[s]=u.next?.bind(u),e[s+1]=u.error?.bind(u),e[s+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof Ir)o=Sc(t.firestore,Rv),a=uF(t._key.path),i={next:u=>{e[s]&&e[s](kwe(o,t,u))},error:e[s+1],complete:e[s+2]};else{const u=Sc(t,yF);o=Sc(u.firestore,Rv),a=u._query;const c=new Twe(o);i={next:h=>{e[s]&&e[s](new $b(o,c,u,h))},error:e[s+1],complete:e[s+2]},NXe(t._query)}return function(u,c,h,d){const p=new cwe(d),m=new twe(c,p,h);return u.asyncQueue.enqueueAndForget(async()=>Zve(await K3(u),m)),()=>{p.Nu(),u.asyncQueue.enqueueAndForget(async()=>ewe(await K3(u),m))}}(eW(o),a,r,i)}function iW(t,e){return function(n,s){const r=new Ag;return n.asyncQueue.enqueueAndForget(async()=>uXe(await wXe(n),s,r)),r.promise}(eW(t),e)}function kwe(t,e,n){const s=n.docs.get(e._key),r=new Twe(t);return new ev(t,r,e._key,s,new bI(n.hasPendingWrites,n.fromCache),e.converter)}function b0(){return new nW("serverTimestamp")}(function(t,e=!0){(function(n){WT=n})(a_),fm(new Df("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Rv(new kGe(n.getProvider("auth-internal")),new PGe(i,n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new je(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dk(a.options.projectId,u)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Vl(Rte,Pte,t),Vl(Rte,Pte,"esm2020")})();var MXe="firebase",FXe="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Vl(MXe,FXe,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Awe="firebasestorage.googleapis.com",Rwe="storageBucket",VXe=120*1e3,UXe=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Mr=class Pwe extends Ed{constructor(e,n,s=0){super(u6(e),`Firebase Storage: ${n} (${u6(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pwe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return u6(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var lr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lr||(lr={}));function u6(t){return"storage/"+t}function oW(){const t="An unknown error occurred, please check the error payload for server response.";return new Mr(lr.UNKNOWN,t)}function qXe(t){return new Mr(lr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function jXe(t){return new Mr(lr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BXe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mr(lr.UNAUTHENTICATED,t)}function $Xe(){return new Mr(lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zXe(t){return new Mr(lr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function HXe(){return new Mr(lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WXe(){return new Mr(lr.CANCELED,"User canceled the upload/download.")}function KXe(t){return new Mr(lr.INVALID_URL,"Invalid URL '"+t+"'.")}function GXe(t){return new Mr(lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function QXe(){return new Mr(lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rwe+"' property when initializing the app?")}function YXe(){return new Mr(lr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XXe(){return new Mr(lr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JXe(t){return new Mr(lr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Q3(t){return new Mr(lr.INVALID_ARGUMENT,t)}function xwe(){return new Mr(lr.APP_DELETED,"The Firebase app was deleted.")}function ZXe(t){return new Mr(lr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E0(t,e){return new Mr(lr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function MC(t){throw new Mr(lr.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ia{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ia.makeFromUrl(e,n)}catch{return new Ia(e,"")}if(s.path==="")return s;throw GXe(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===Awe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${k}/${r}/${P}`,"i"),M=[{regex:a,indices:u,postModify:i},{regex:m,indices:w,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<M.length;V++){const q=M[V],H=q.regex.exec(e);if(H){const J=H[q.indices.bucket];let I=H[q.indices.path];I||(I=""),s=new Ia(J,I),q.postModify(s);break}}if(s==null)throw KXe(e);return s}}class eJe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tJe(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,u())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(c){p();return}if(P){p(),h.call(null,P,...O);return}if(u()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function k(P){w||(w=!0,p(),!c&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function nJe(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sJe(t){return t!==void 0}function rJe(t){return typeof t=="object"&&!Array.isArray(t)}function aW(t){return typeof t=="string"||t instanceof String}function Cne(t){return lW()&&t instanceof Blob}function lW(){return typeof Blob<"u"}function Y3(t,e,n,s){if(s<e)throw Q3(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Q3(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TR(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Nwe(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var tv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(tv||(tv={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iJe(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class oJe{constructor(e,n,s,r,i,o,a,u,c,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new K1(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===tv.NO_ERROR,u=i.getStatus();if(!a||iJe(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===tv.ABORT;s(!1,new K1(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;s(!0,new K1(c,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());sJe(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=oW();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(r.canceled){const u=this.appDelete_?xwe():WXe();o(u)}else{const u=HXe();o(u)}};this.canceled_?n(!1,new K1(!1,null,!0)):this.backoffId_=tJe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nJe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class K1{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function aJe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lJe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uJe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cJe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function hJe(t,e,n,s,r,i,o=!0,a=!1){const u=Nwe(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return uJe(h,e),aJe(h,n),lJe(h,i),cJe(h,s),new oJe(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dJe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fJe(...t){const e=dJe();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(lW())return new Blob(t);throw new Mr(lr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pJe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gJe(t){if(typeof atob>"u")throw JXe("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ac={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class c6{constructor(e,n){this.data=e,this.contentType=n||null}}function Dwe(t,e){switch(t){case ac.RAW:return new c6(Owe(e));case ac.BASE64:case ac.BASE64URL:return new c6(Lwe(t,e));case ac.DATA_URL:return new c6(_Je(e),yJe(e))}throw oW()}function Owe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function mJe(t){let e;try{e=decodeURIComponent(t)}catch{throw E0(ac.DATA_URL,"Malformed data URL.")}return Owe(e)}function Lwe(t,e){switch(t){case ac.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw E0(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ac.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw E0(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gJe(e)}catch(r){throw r.message.includes("polyfill")?r:E0(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class Mwe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw E0(ac.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=vJe(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function _Je(t){const e=new Mwe(t);return e.base64?Lwe(ac.BASE64,e.rest):mJe(e.rest)}function yJe(t){return new Mwe(t).contentType}function vJe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sg{constructor(e,n){let s=0,r="";Cne(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Cne(this.data_)){const s=this.data_,r=pJe(s,e,n);return r===null?null:new sg(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new sg(s,!0)}}static getBlob(...e){if(lW()){const n=e.map(s=>s instanceof sg?s.data_:s);return new sg(fJe.apply(null,n))}else{const n=e.map(o=>aW(o)?Dwe(ac.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new sg(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uW(t){let e;try{e=JSON.parse(t)}catch{return null}return rJe(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wJe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bJe(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Fwe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EJe(t,e){return e}class sa{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||EJe}}let G1=null;function TJe(t){return!aW(t)||t.length<2?t:Fwe(t)}function Vwe(){if(G1)return G1;const t=[];t.push(new sa("bucket")),t.push(new sa("generation")),t.push(new sa("metageneration")),t.push(new sa("name","fullPath",!0));function e(i,o){return TJe(o)}const n=new sa("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new sa("size");return r.xform=s,t.push(r),t.push(new sa("timeCreated")),t.push(new sa("updated")),t.push(new sa("md5Hash",null,!0)),t.push(new sa("cacheControl",null,!0)),t.push(new sa("contentDisposition",null,!0)),t.push(new sa("contentEncoding",null,!0)),t.push(new sa("contentLanguage",null,!0)),t.push(new sa("contentType",null,!0)),t.push(new sa("metadata","customMetadata",!0)),G1=t,G1}function CJe(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Ia(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function IJe(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return CJe(s,t),s}function Uwe(t,e,n){const s=uW(e);return s===null?null:IJe(t,s,n)}function SJe(t,e,n,s){const r=uW(e);if(r===null||!aW(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const u=t.bucket,c=t.fullPath,h="/b/"+o(u)+"/o/"+o(c),d=TR(h,n,s),p=Nwe({alt:"media",token:a});return d+p})[0]}function kJe(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ine="prefixes",Sne="items";function AJe(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ine])for(const r of n[Ine]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Ia(e,i));s.prefixes.push(o)}if(n[Sne])for(const r of n[Sne]){const i=t._makeStorageReference(new Ia(e,r.name));s.items.push(i)}return s}function RJe(t,e,n){const s=uW(n);return s===null?null:AJe(t,e,s)}class TF{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cW(t){if(!t)throw oW()}function PJe(t,e){function n(s,r){const i=Uwe(t,r,e);return cW(i!==null),i}return n}function xJe(t,e){function n(s,r){const i=RJe(t,e,r);return cW(i!==null),i}return n}function NJe(t,e){function n(s,r){const i=Uwe(t,r,e);return cW(i!==null),SJe(i,r,t.host,t._protocol)}return n}function hW(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=$Xe():r=BXe():n.getStatus()===402?r=jXe(t.bucket):n.getStatus()===403?r=zXe(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function qwe(t){const e=hW(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=qXe(t.path)),i.serverResponse=r.serverResponse,i}return n}function DJe(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=TR(o,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,h=new TF(a,u,xJe(t,e.bucket),c);return h.urlParams=i,h.errorHandler=hW(e),h}function OJe(t,e,n){const s=e.fullServerUrl(),r=TR(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new TF(r,i,NJe(t,n),o);return a.errorHandler=qwe(e),a}function LJe(t,e){const n=e.fullServerUrl(),s=TR(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new TF(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=qwe(e),a}function MJe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FJe(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=MJe(null,e)),s}function VJe(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=FJe(e,s,r),h=kJe(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",m=sg.getBlob(d,s,p);if(m===null)throw YXe();const w={name:c.fullPath},k=TR(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new TF(k,P,PJe(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=hW(e),M}class UJe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw MC("cannot .send() more than once");if(bd(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw MC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw MC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw MC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw MC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qJe extends UJe{initXhr(){this.xhr_.responseType="text"}}function CF(){return new qJe}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pv{constructor(e,n){this._service=e,n instanceof Ia?this._location=n:this._location=Ia.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Pv(e,n)}get root(){const e=new Ia(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fwe(this._location.path)}get storage(){return this._service}get parent(){const e=wJe(this._location.path);if(e===null)return null;const n=new Ia(this._location.bucket,e);return new Pv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ZXe(e)}}function jJe(t,e,n){t._throwIfRoot("uploadBytes");const s=VJe(t.storage,t._location,Vwe(),new sg(e,!0),n);return t.storage.makeRequestWithTokens(s,CF).then(r=>({metadata:r,ref:t}))}function BJe(t,e,n=ac.RAW,s){t._throwIfRoot("uploadString");const r=Dwe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),jJe(t,r.data,i)}function $Je(t){const e={prefixes:[],items:[]};return jwe(t,e).then(()=>e)}async function jwe(t,e,n){const s=await zJe(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await jwe(t,e,s.nextPageToken)}function zJe(t,e){e!=null&&typeof e.maxResults=="number"&&Y3("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=DJe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,CF)}function HJe(t){t._throwIfRoot("getDownloadURL");const e=OJe(t.storage,t._location,Vwe());return t.storage.makeRequestWithTokens(e,CF).then(n=>{if(n===null)throw XXe();return n})}function WJe(t){t._throwIfRoot("deleteObject");const e=LJe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,CF)}function KJe(t,e){const n=bJe(t._location.path,e),s=new Ia(t._location.bucket,n);return new Pv(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GJe(t){return/^[A-Za-z]+:\/\//.test(t)}function QJe(t,e){return new Pv(t,e)}function Bwe(t,e){if(t instanceof dW){const n=t;if(n._bucket==null)throw QXe();const s=new Pv(n,n._bucket);return e!=null?Bwe(s,e):s}else return e!==void 0?KJe(t,e):t}function YJe(t,e){if(e&&GJe(e)){if(t instanceof dW)return QJe(t,e);throw Q3("To use ref(service, url), the first argument must be a Storage instance.")}else return Bwe(t,e)}function kne(t,e){const n=e?.[Rwe];return n==null?null:Ia.makeFromBucketSpec(n,t)}function XJe(t,e,n,s={}){t.host=`${e}:${n}`;const r=bd(e);r&&(Q2(`https://${t.host}/b`),Y2("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:ZH(i,t.app.options.projectId))}class dW{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Awe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VXe,this._maxUploadRetryTime=UXe,this._requests=new Set,r!=null?this._bucket=Ia.makeFromBucketSpec(r,this._host):this._bucket=kne(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ia.makeFromBucketSpec(this._url,e):this._bucket=kne(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(rl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pv(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new eJe(xwe());{const o=hJe(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Ane="@firebase/storage",Rne="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $we="storage";function zwe(t,e,n,s){return t=Wn(t),BJe(t,e,n,s)}function Hwe(t){return t=Wn(t),$Je(t)}function Wwe(t){return t=Wn(t),HJe(t)}function Kwe(t){return t=Wn(t),WJe(t)}function Gwe(t,e){return t=Wn(t),YJe(t,e)}function JJe(t=Z2(),e){t=Wn(t);const n=pR(t,$we).getImmediate({identifier:e}),s=JH("storage");return s&&ZJe(n,...s),n}function ZJe(t,e,n,s={}){XJe(t,e,n,s)}function eZe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new dW(n,s,r,e,a_)}function tZe(){fm(new Df($we,eZe,"PUBLIC").setMultipleInstances(!0)),Vl(Ane,Rne,""),Vl(Ane,Rne,"esm2020")}tZe();var Pne={};const xne="@firebase/database",Nne="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Qwe="";function nZe(t){Qwe=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sZe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),li(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ak(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rZe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return up(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ywe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sZe(e)}}catch{}return new rZe},Py=Ywe("localStorage"),iZe=Ywe("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zb=new J2("@firebase/database"),oZe=function(){let t=1;return function(){return t++}}(),Xwe=function(t){const e=RWe(t),n=new IWe;n.update(e);const s=n.digest();return XH.encodeByteArray(s)},CR=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=CR.apply(null,s):typeof s=="object"?e+=li(s):e+=s,e+=" "}return e};let T0=null,Dne=!0;const aZe=function(t,e){Ie(!0,"Can't turn on custom loggers persistently."),zb.logLevel=Kt.VERBOSE,T0=zb.log.bind(zb)},Io=function(...t){if(Dne===!0&&(Dne=!1,T0===null&&iZe.get("logging_enabled")===!0&&aZe()),T0){const e=CR.apply(null,t);T0(e)}},IR=function(t){return function(...e){Io(t,...e)}},X3=function(...t){const e="FIREBASE INTERNAL ERROR: "+CR(...t);zb.error(e)},Uf=function(...t){const e=`FIREBASE FATAL ERROR: ${CR(...t)}`;throw zb.error(e),new Error(e)},Ka=function(...t){const e="FIREBASE WARNING: "+CR(...t);zb.warn(e)},lZe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ka("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jwe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},uZe=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},zE="[MIN_NAME]",xv="[MAX_NAME]",YT=function(t,e){if(t===e)return 0;if(t===zE||e===xv)return-1;if(e===zE||t===xv)return 1;{const n=One(t),s=One(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},cZe=function(t,e){return t===e?0:t<e?-1:1},FC=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+li(e))},fW=function(t){if(typeof t!="object"||t===null)return li(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=li(e[s]),n+=":",n+=fW(t[e[s]]);return n+="}",n},Zwe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Xa(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ebe=function(t){Ie(!Jwe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,u;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(h.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},hZe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dZe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function fZe(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const pZe=new RegExp("^-?(0*)\\d{1,10}$"),gZe=-2147483648,mZe=2147483647,One=function(t){if(pZe.test(t)){const e=Number(t);if(e>=gZe&&e<=mZe)return e}return null},XT=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ka("Exception was thrown by user callback.",n),e},Math.floor(0))}},_Ze=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},C0=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yZe{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,rl(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ka(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vZe{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Io("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ka(e)}}class cx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}cx.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pW="5",tbe="v",nbe="s",sbe="r",rbe="f",ibe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,obe="ls",abe="p",J3="ac",lbe="websocket",ube="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cbe{constructor(e,n,s,r,i=!1,o="",a=!1,u=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Py.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Py.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function wZe(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function hbe(t,e,n){Ie(typeof e=="string","typeof type must == string"),Ie(typeof n=="object","typeof params must == object");let s;if(e===lbe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ube)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wZe(t)&&(n.ns=t.namespace);const r=[];return Xa(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bZe{constructor(){this.counters_={}}incrementCounter(e,n=1){up(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return rWe(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const h6={},d6={};function gW(t){const e=t.toString();return h6[e]||(h6[e]=new bZe),h6[e]}function EZe(t,e){const n=t.toString();return d6[n]||(d6[n]=e()),d6[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TZe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&XT(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lne="start",CZe="close",IZe="pLPCommand",SZe="pRTLPCB",dbe="id",fbe="pw",pbe="ser",kZe="cb",AZe="seg",RZe="ts",PZe="d",xZe="dframe",gbe=1870,mbe=30,NZe=gbe-mbe,DZe=25e3,OZe=3e4;class vb{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=IR(e),this.stats_=gW(n),this.urlFn=u=>(this.appCheckToken&&(u[J3]=this.appCheckToken),hbe(n,ube,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new TZe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(OZe)),uZe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mW((...i)=>{const[o,a,u,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Lne)this.id=a,this.password=u;else if(o===CZe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Lne]="t",s[pbe]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[kZe]=this.scriptTagHolder.uniqueCallbackIdentifier),s[tbe]=pW,this.transportSessionId&&(s[nbe]=this.transportSessionId),this.lastSessionId&&(s[obe]=this.lastSessionId),this.applicationId&&(s[abe]=this.applicationId),this.appCheckToken&&(s[J3]=this.appCheckToken),typeof location<"u"&&location.hostname&&ibe.test(location.hostname)&&(s[sbe]=rbe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vb.forceAllow_=!0}static forceDisallow(){vb.forceDisallow_=!0}static isAvailable(){return vb.forceAllow_?!0:!vb.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hZe()&&!dZe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=li(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=lye(n),r=Zwe(s,NZe);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[xZe]="t",s[dbe]=e,s[fbe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=li(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class mW{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=oZe(),window[IZe+this.uniqueCallbackIdentifier]=e,window[SZe+this.uniqueCallbackIdentifier]=n,this.myIFrame=mW.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Io("frame writing exception"),a.stack&&Io(a.stack),Io(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Io("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dbe]=this.myID,e[fbe]=this.myPW,e[pbe]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mbe+s.length<=gbe;){const i=this.pendingSegs.shift();s=s+"&"+AZe+r+"="+i.seg+"&"+RZe+r+"="+i.ts+"&"+PZe+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(DZe)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Io("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LZe=16384,MZe=45e3;let TD=null;typeof MozWebSocket<"u"?TD=MozWebSocket:typeof WebSocket<"u"&&(TD=WebSocket);class Zu{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=IR(this.connId),this.stats_=gW(n),this.connURL=Zu.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[tbe]=pW,typeof location<"u"&&location.hostname&&ibe.test(location.hostname)&&(o[sbe]=rbe),n&&(o[nbe]=n),s&&(o[obe]=s),r&&(o[J3]=r),i&&(o[abe]=i),hbe(e,lbe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Py.set("previous_websocket_failure",!0);try{let s;mWe(),this.mySock=new TD(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Zu.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&TD!==null&&!Zu.forceDisallow_}static previouslyFailed(){return Py.isInMemoryStorage||Py.get("previous_websocket_failure")===!0}markConnectionHealthy(){Py.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=ak(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=li(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Zwe(n,LZe);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(MZe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zu.responsesRequiredToBeHealthy=2;Zu.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yk{static get ALL_TRANSPORTS(){return[vb,Zu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Zu&&Zu.isAvailable();let s=n&&!Zu.previouslyFailed();if(e.webSocketOnly&&(n||Ka("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Zu];else{const r=this.transports_=[];for(const i of yk.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);yk.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}yk.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const FZe=6e4,VZe=5e3,UZe=10*1024,qZe=100*1024,f6="t",Mne="d",jZe="s",Fne="r",BZe="e",Vne="o",Une="a",qne="n",jne="p",$Ze="h";class zZe{constructor(e,n,s,r,i,o,a,u,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=IR("c:"+this.id+":"),this.transportManager_=new yk(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=C0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>qZe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UZe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(f6 in e){const n=e[f6];n===Une?this.upgradeIfSecondaryHealthy_():n===Fne?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vne&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=FC("t",e),s=FC("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jne,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Une,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qne,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=FC("t",e),s=FC("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=FC(f6,e);if(Mne in e){const s=e[Mne];if(n===$Ze){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===qne){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jZe?this.onConnectionShutdown_(s):n===Fne?this.onReset_(s):n===BZe?X3("Server Error: "+s):n===Vne?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):X3("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),pW!==s&&Ka("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),C0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FZe))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):C0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(VZe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jne,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Py.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _be{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ybe{constructor(e){this.allowedEvents_=e,this.listeners_={},Ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CD extends ybe{static getInstance(){return new CD}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!e7()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bne=32,$ne=768;let is=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Sn(){return new is("")}function Bt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wm(t){return t.pieces_.length-t.pieceNum_}function ps(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new is(t.pieces_,e)}function vbe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function HZe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function wbe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function bbe(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new is(e,0)}function ci(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof is)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new is(n,0)}function Xt(t){return t.pieceNum_>=t.pieces_.length}function Sa(t,e){const n=Bt(t),s=Bt(e);if(n===null)return e;if(n===s)return Sa(ps(t),ps(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _W(t,e){if(wm(t)!==wm(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function lc(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(wm(t)>wm(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class WZe{constructor(e,n){this.errorPrefix_=n,this.parts_=wbe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=X2(this.parts_[s]);Ebe(this)}}function KZe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=X2(e),Ebe(t)}function GZe(t){const e=t.parts_.pop();t.byteLength_-=X2(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ebe(t){if(t.byteLength_>$ne)throw new Error(t.errorPrefix_+"has a key path longer than "+$ne+" bytes ("+t.byteLength_+").");if(t.parts_.length>Bne)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bne+") or object contains a cycle "+cy(t))}function cy(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yW extends ybe{static getInstance(){return new yW}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VC=1e3,QZe=300*1e3,zne=30*1e3,YZe=1.3,XZe=3e4,JZe="server_kill",Hne=3;class yf extends _be{constructor(e,n,s,r,i,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=yf.nextPersistentConnectionId_++,this.log_=IR("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=VC,this.maxReconnectDelay_=QZe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yW.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&CD.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(li(i)),Ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new G2,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ie(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const u=a.d,c=a.s;yf.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&up(e,"w")){const s=ME(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ka(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||CWe(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zne)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=TWe(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+li(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):X3("Unrecognized action received from server: "+li(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=VC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=VC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>XZe&&(this.reconnectDelay_=VC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*YZe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+yf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,s())},c=function(d){Ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:u,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Io("getToken() completed but was canceled"):(Io("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new zZe(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{Ka(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(JZe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ka(d),u())}}}interrupt(e){Io("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Io("Resuming connection for reason: "+e),delete this.interruptReasons_[e],b3(this.interruptReasons_)&&(this.reconnectDelay_=VC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>fW(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new is(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Io("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Hne&&(this.reconnectDelay_=zne,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Io("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Hne&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Qwe.replace(/\./g,"-")]=1,e7()?e["framework.cordova"]=1:fye()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=CD.getInstance().currentlyOnline();return b3(this.interruptReasons_)&&e}}yf.nextPersistentConnectionId_=0;yf.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let un=class Tbe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Tbe(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IF{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new un(zE,e),r=new un(zE,n);return this.compare(s,r)!==0}minPost(){return un.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Q1;class Cbe extends IF{static get __EMPTY_NODE(){return Q1}static set __EMPTY_NODE(e){Q1=e}compare(e,n){return YT(e.name,n.name)}isDefinedOn(e){throw $T("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return un.MIN}maxPost(){return new un(xv,Q1)}makePost(e,n){return Ie(typeof e=="string","KeyIndex indexValue must always be a string."),new un(e,Q1)}toString(){return".key"}}const Hb=new Cbe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y1{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Di{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Di.RED,this.left=r??Ba.EMPTY_NODE,this.right=i??Ba.EMPTY_NODE}copy(e,n,s,r,i){return new Di(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ba.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Ba.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Di.RED=!0;Di.BLACK=!1;class ZZe{copy(e,n,s,r,i){return this}insert(e,n,s){return new Di(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ba{constructor(e,n=Ba.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ba(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Di.BLACK,null,null))}remove(e){return new Ba(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Di.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Y1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Y1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Y1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Y1(this.root_,null,this.comparator_,!0,e)}}Ba.EMPTY_NODE=new ZZe;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eet(t,e){return YT(t.name,e.name)}function vW(t,e){return YT(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Z3;function tet(t){Z3=t}const Ibe=function(t){return typeof t=="number"?"number:"+ebe(t):"string:"+t},Sbe=function(t){if(t.isLeafNode()){const e=t.val();Ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&up(e,".sv"),"Priority must be a string or number.")}else Ie(t===Z3||t.isEmpty(),"priority of unexpected type.");Ie(t===Z3||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Wne;class Si{static set __childrenNodeConstructor(e){Wne=e}static get __childrenNodeConstructor(){return Wne}constructor(e,n=Si.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Sbe(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Si(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Si.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xt(e)?this:Bt(e)===".priority"?this.priorityNode_:Si.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Si.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Bt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Ie(s!==".priority"||wm(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Si.__childrenNodeConstructor.EMPTY_NODE.updateChild(ps(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ibe(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ebe(this.value_):e+=this.value_,this.lazyHash_=Xwe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Si.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Si.__childrenNodeConstructor?-1:(Ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Si.VALUE_TYPE_ORDER.indexOf(n),i=Si.VALUE_TYPE_ORDER.indexOf(s);return Ie(r>=0,"Unknown leaf type: "+n),Ie(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Si.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let kbe,Abe;function net(t){kbe=t}function set(t){Abe=t}class ret extends IF{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?YT(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return un.MIN}maxPost(){return new un(xv,new Si("[PRIORITY-POST]",Abe))}makePost(e,n){const s=kbe(e);return new un(n,new Si("[PRIORITY-POST]",s))}toString(){return".priority"}}const nr=new ret;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iet=Math.log(2);class oet{constructor(e){const n=i=>parseInt(Math.log(i)/iet,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ID=function(t,e,n,s){t.sort(e);const r=function(u,c){const h=c-u;let d,p;if(h===0)return null;if(h===1)return d=t[u],p=n?n(d):d,new Di(p,d.node,Di.BLACK,null,null);{const m=parseInt(h/2,10)+u,w=r(u,m),k=r(m+1,c);return d=t[m],p=n?n(d):d,new Di(p,d.node,Di.BLACK,w,k)}},i=function(u){let c=null,h=null,d=t.length;const p=function(w,k){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new Di(q,V.node,k,null,M))},m=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<u.count;++w){const k=u.nextBitIsOne(),P=Math.pow(2,u.count-(w+1));k?p(P,Di.BLACK):(p(P,Di.BLACK),p(P,Di.RED))}return h},o=new oet(t.length),a=i(o);return new Ba(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let p6;const Aw={};class lf{static get Default(){return Ie(Aw&&nr,"ChildrenNode.ts has not been loaded"),p6=p6||new lf({".priority":Aw},{".priority":nr}),p6}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ME(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ba?n:null}hasIndex(e){return up(this.indexSet_,e.toString())}addIndex(e,n){Ie(e!==Hb,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(un.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=ID(s,e.getCompare()):a=Aw;const u=e.toString(),c={...this.indexSet_};c[u]=e;const h={...this.indexes_};return h[u]=a,new lf(h,c)}addToIndexes(e,n){const s=tD(this.indexes_,(r,i)=>{const o=ME(this.indexSet_,i);if(Ie(o,"Missing index implementation for "+i),r===Aw)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(un.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ID(a,o.getCompare())}else return Aw;else{const a=n.get(e.name);let u=r;return a&&(u=u.remove(new un(e.name,a))),u.insert(e,e.node)}});return new lf(s,this.indexSet_)}removeFromIndexes(e,n){const s=tD(this.indexes_,r=>{if(r===Aw)return r;{const i=n.get(e.name);return i?r.remove(new un(e.name,i)):r}});return new lf(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let UC;class it{static get EMPTY_NODE(){return UC||(UC=new it(new Ba(vW),null,lf.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Sbe(this.priorityNode_),this.children_.isEmpty()&&Ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||UC}updatePriority(e){return this.children_.isEmpty()?this:new it(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?UC:n}}getChild(e){const n=Bt(e);return n===null?this:this.getImmediateChild(n).getChild(ps(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new un(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?UC:this.priorityNode_;return new it(r,o,i)}}updateChild(e,n){const s=Bt(e);if(s===null)return n;{Ie(Bt(e)!==".priority"||wm(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(ps(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(nr,(o,a)=>{n[o]=a.val(e),s++,i&&it.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ibe(this.getPriority().val())+":"),this.forEachChild(nr,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":Xwe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new un(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new un(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new un(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,un.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,un.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===SR?-1:0}withIndex(e){if(e===Hb||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new it(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Hb||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(nr),r=n.getIterator(nr);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Hb?null:this.indexMap_.get(e.toString())}}it.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class aet extends it{constructor(){super(new Ba(vW),it.EMPTY_NODE,lf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}}const SR=new aet;Object.defineProperties(un,{MIN:{value:new un(zE,it.EMPTY_NODE)},MAX:{value:new un(xv,SR)}});Cbe.__EMPTY_NODE=it.EMPTY_NODE;Si.__childrenNodeConstructor=it;tet(SR);set(SR);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const uet=!0;function Vi(t,e=null){if(t===null)return it.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Si(n,Vi(e))}if(!(t instanceof Array)&&uet){const n=[];let s=!1;if(Xa(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=Vi(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new un(i,a)))}}),n.length===0)return it.EMPTY_NODE;const r=ID(n,eet,i=>i.name,vW);if(s){const i=ID(n,nr.getCompare());return new it(r,Vi(e),new lf({".priority":i},{".priority":nr}))}else return new it(r,Vi(e),lf.Default)}else{let n=it.EMPTY_NODE;return Xa(t,(s,r)=>{if(up(t,s)&&s.substring(0,1)!=="."){const i=Vi(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(Vi(e))}}net(Vi);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cet extends IF{constructor(e){super(),this.indexPath_=e,Ie(!Xt(e)&&Bt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?YT(e.name,n.name):i}makePost(e,n){const s=Vi(e),r=it.EMPTY_NODE.updateChild(this.indexPath_,s);return new un(n,r)}maxPost(){const e=it.EMPTY_NODE.updateChild(this.indexPath_,SR);return new un(xv,e)}toString(){return wbe(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class het extends IF{compare(e,n){const s=e.node.compareTo(n.node);return s===0?YT(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,n){const s=Vi(e);return new un(n,s)}toString(){return".value"}}const det=new het;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rbe(t){return{type:"value",snapshotNode:t}}function HE(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vk(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function wk(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function fet(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class wW{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(vk(n,a)):Ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(HE(n,s)):o.trackChildChange(wk(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(nr,(r,i)=>{n.hasChild(r)||s.trackChildChange(vk(r,i))}),n.isLeafNode()||n.forEachChild(nr,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(wk(r,i,o))}else s.trackChildChange(HE(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?it.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bk{constructor(e){this.indexedFilter_=new wW(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bk.getStartPost_(e),this.endPost_=bk.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new un(n,s))||(s=it.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=it.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(it.EMPTY_NODE);const i=this;return n.forEachChild(nr,(o,a)=>{i.matches(new un(o,a))||(r=r.updateImmediateChild(o,it.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pet{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new bk(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new un(n,s))||(s=it.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=it.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=it.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(it.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,it.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Ie(a.numChildren()===this.limit_,"");const u=new un(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,u);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(wk(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(vk(n,d));const w=a.updateImmediateChild(n,it.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(HE(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(c,u)>=0?(i!=null&&(i.trackChildChange(vk(c.name,c.node)),i.trackChildChange(HE(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,it.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bW{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zE}hasEnd(){return this.endSet_}getIndexEndValue(){return Ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new bW;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function get(t){return t.loadsAllData()?new wW(t.getIndex()):t.hasLimit()?new pet(t):new bk(t)}function Kne(t){const e={};if(t.isDefault())return e;let n;if(t.index_===nr?n="$priority":t.index_===det?n="$value":t.index_===Hb?n="$key":(Ie(t.index_ instanceof cet,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=li(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=li(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+li(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=li(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+li(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Gne(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nr&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SD extends _be{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=IR("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=SD.getListenId_(e,s),a={};this.listens_[o]=a;const u=Kne(e._queryParams);this.restRequest_(i+".json",u,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,s),ME(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const s=SD.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Kne(e._queryParams),s=e._path.toString(),r=new G2;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zT(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=ak(a.responseText)}catch{Ka("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,u)}else a.status!==401&&a.status!==404&&Ka("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class met{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kD(){return{value:null,children:new Map}}function Pbe(t,e,n){if(Xt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=Bt(e);t.children.has(s)||t.children.set(s,kD());const r=t.children.get(s);e=ps(e),Pbe(r,e,n)}}function ej(t,e,n){t.value!==null?n(e,t.value):_et(t,(s,r)=>{const i=new is(e.toString()+"/"+s);ej(r,i,n)})}function _et(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yet{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Xa(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qne=10*1e3,vet=30*1e3,wet=300*1e3;class bet{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yet(e);const s=Qne+(vet-Qne)*Math.random();C0(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Xa(e,(r,i)=>{i>0&&up(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),C0(this.reportStats_.bind(this),Math.floor(Math.random()*2*wet))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(uc||(uc={}));function xbe(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function EW(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function TW(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class AD{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=uc.ACK_USER_WRITE,this.source=xbe()}operationForChild(e){if(Xt(this.path)){if(this.affectedTree.value!=null)return Ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new is(e));return new AD(Sn(),n,this.revert)}}else return Ie(Bt(this.path)===e,"operationForChild called for unrelated child."),new AD(ps(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ek{constructor(e,n){this.source=e,this.path=n,this.type=uc.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new Ek(this.source,Sn()):new Ek(this.source,ps(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nv{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=uc.OVERWRITE}operationForChild(e){return Xt(this.path)?new Nv(this.source,Sn(),this.snap.getImmediateChild(e)):new Nv(this.source,ps(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tk{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=uc.MERGE}operationForChild(e){if(Xt(this.path)){const n=this.children.subtree(new is(e));return n.isEmpty()?null:n.value?new Nv(this.source,Sn(),n.value):new Tk(this.source,Sn(),n)}else return Ie(Bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tk(this.source,ps(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bm{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Bt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Eet{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Tet(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(fet(o.childName,o.snapshotNode))}),qC(t,r,"child_removed",e,s,n),qC(t,r,"child_added",e,s,n),qC(t,r,"child_moved",i,s,n),qC(t,r,"child_changed",e,s,n),qC(t,r,"value",e,s,n),r}function qC(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,u)=>Iet(t,a,u)),o.forEach(a=>{const u=Cet(t,a,i);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Cet(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Iet(t,e,n){if(e.childName==null||n.childName==null)throw $T("Should only compare child_ events.");const s=new un(e.childName,e.snapshotNode),r=new un(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SF(t,e){return{eventCache:t,serverCache:e}}function I0(t,e,n,s){return SF(new bm(e,n,s),t.serverCache)}function Nbe(t,e,n,s){return SF(t.eventCache,new bm(e,n,s))}function RD(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dv(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let g6;const ket=()=>(g6||(g6=new Ba(cZe)),g6);class Es{static fromObject(e){let n=new Es(null);return Xa(e,(s,r)=>{n=n.set(new is(s),r)}),n}constructor(e,n=ket()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Sn(),value:this.value};if(Xt(e))return null;{const s=Bt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(ps(e),n);return i!=null?{path:ci(new is(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const n=Bt(e),s=this.children.get(n);return s!==null?s.subtree(ps(e)):new Es(null)}}set(e,n){if(Xt(e))return new Es(n,this.children);{const s=Bt(e),r=(this.children.get(s)||new Es(null)).set(ps(e),n),i=this.children.insert(s,r);return new Es(this.value,i)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Es(null):new Es(null,this.children);{const n=Bt(e),s=this.children.get(n);if(s){const r=s.remove(ps(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new Es(null):new Es(this.value,i)}else return this}}get(e){if(Xt(e))return this.value;{const n=Bt(e),s=this.children.get(n);return s?s.get(ps(e)):null}}setTree(e,n){if(Xt(e))return n;{const s=Bt(e),r=(this.children.get(s)||new Es(null)).setTree(ps(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new Es(this.value,i)}}fold(e){return this.fold_(Sn(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(ci(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Sn(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Xt(e))return null;{const i=Bt(e),o=this.children.get(i);return o?o.findOnPath_(ps(e),ci(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Sn(),n)}foreachOnPath_(e,n,s){if(Xt(e))return this;{this.value&&s(n,this.value);const r=Bt(e),i=this.children.get(r);return i?i.foreachOnPath_(ps(e),ci(n,r),s):new Es(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(ci(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ac{constructor(e){this.writeTree_=e}static empty(){return new Ac(new Es(null))}}function S0(t,e,n){if(Xt(e))return new Ac(new Es(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Sa(r,e);return i=i.updateChild(o,n),new Ac(t.writeTree_.set(r,i))}else{const r=new Es(n),i=t.writeTree_.setTree(e,r);return new Ac(i)}}}function Yne(t,e,n){let s=t;return Xa(n,(r,i)=>{s=S0(s,ci(e,r),i)}),s}function Xne(t,e){if(Xt(e))return Ac.empty();{const n=t.writeTree_.setTree(e,new Es(null));return new Ac(n)}}function tj(t,e){return cw(t,e)!=null}function cw(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Sa(n.path,e)):null}function Jne(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nr,(s,r)=>{e.push(new un(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new un(s,r.value))}),e}function Pg(t,e){if(Xt(e))return t;{const n=cw(t,e);return n!=null?new Ac(new Es(n)):new Ac(t.writeTree_.subtree(e))}}function nj(t){return t.writeTree_.isEmpty()}function WE(t,e){return Dbe(Sn(),t.writeTree_,e)}function Dbe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Ie(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=Dbe(ci(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(ci(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kF(t,e){return Fbe(e,t)}function Aet(t,e,n,s,r){Ie(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=S0(t.visibleWrites,e,n)),t.lastWriteId=s}function Ret(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Pet(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ie(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&xet(a,s.path)?r=!1:lc(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return Net(t),!0;if(s.snap)t.visibleWrites=Xne(t.visibleWrites,s.path);else{const a=s.children;Xa(a,u=>{t.visibleWrites=Xne(t.visibleWrites,ci(s.path,u))})}return!0}else return!1}function xet(t,e){if(t.snap)return lc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&lc(ci(t.path,n),e))return!0;return!1}function Net(t){t.visibleWrites=Obe(t.allWrites,Det,Sn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Det(t){return t.visible}function Obe(t,e,n){let s=Ac.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)lc(n,o)?(a=Sa(n,o),s=S0(s,a,i.snap)):lc(o,n)&&(a=Sa(o,n),s=S0(s,Sn(),i.snap.getChild(a)));else if(i.children){if(lc(n,o))a=Sa(n,o),s=Yne(s,a,i.children);else if(lc(o,n))if(a=Sa(o,n),Xt(a))s=Yne(s,Sn(),i.children);else{const u=ME(i.children,Bt(a));if(u){const c=u.getChild(ps(a));s=S0(s,Sn(),c)}}}else throw $T("WriteRecord should have .snap or .children")}}return s}function Lbe(t,e,n,s,r){if(!s&&!r){const i=cw(t.visibleWrites,e);if(i!=null)return i;{const o=Pg(t.visibleWrites,e);if(nj(o))return n;if(n==null&&!tj(o,Sn()))return null;{const a=n||it.EMPTY_NODE;return WE(o,a)}}}else{const i=Pg(t.visibleWrites,e);if(!r&&nj(i))return n;if(!r&&n==null&&!tj(i,Sn()))return null;{const o=function(c){return(c.visible||r)&&(!s||!~s.indexOf(c.writeId))&&(lc(c.path,e)||lc(e,c.path))},a=Obe(t.allWrites,o,e),u=n||it.EMPTY_NODE;return WE(a,u)}}}function Oet(t,e,n){let s=it.EMPTY_NODE;const r=cw(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(nr,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Pg(t.visibleWrites,e);return n.forEachChild(nr,(o,a)=>{const u=WE(Pg(i,new is(o)),a);s=s.updateImmediateChild(o,u)}),Jne(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Pg(t.visibleWrites,e);return Jne(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Let(t,e,n,s,r){Ie(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=ci(e,n);if(tj(t.visibleWrites,i))return null;{const o=Pg(t.visibleWrites,i);return nj(o)?r.getChild(n):WE(o,r.getChild(n))}}function Met(t,e,n,s){const r=ci(e,n),i=cw(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Pg(t.visibleWrites,r);return WE(o,s.getNode().getImmediateChild(n))}else return null}function Fet(t,e){return cw(t.visibleWrites,e)}function Vet(t,e,n,s,r,i,o){let a;const u=Pg(t.visibleWrites,e),c=cw(u,Sn());if(c!=null)a=c;else if(n!=null)a=WE(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function Uet(){return{visibleWrites:Ac.empty(),allWrites:[],lastWriteId:-1}}function PD(t,e,n,s){return Lbe(t.writeTree,t.treePath,e,n,s)}function CW(t,e){return Oet(t.writeTree,t.treePath,e)}function Zne(t,e,n,s){return Let(t.writeTree,t.treePath,e,n,s)}function xD(t,e){return Fet(t.writeTree,ci(t.treePath,e))}function qet(t,e,n,s,r,i){return Vet(t.writeTree,t.treePath,e,n,s,r,i)}function IW(t,e,n){return Met(t.writeTree,t.treePath,e,n)}function Mbe(t,e){return Fbe(ci(t.treePath,e),t.writeTree)}function Fbe(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class jet{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ie(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,wk(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,vk(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,HE(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,wk(s,e.snapshotNode,r.oldSnap));else throw $T("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bet{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Vbe=new Bet;class SW{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new bm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return IW(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dv(this.viewCache_),i=qet(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $et(t){return{filter:t}}function zet(t,e){Ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Het(t,e,n,s,r){const i=new jet;let o,a;if(n.type===uc.OVERWRITE){const c=n;c.source.fromUser?o=sj(t,e,c.path,c.snap,s,r,i):(Ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Xt(c.path),o=ND(t,e,c.path,c.snap,s,r,a,i))}else if(n.type===uc.MERGE){const c=n;c.source.fromUser?o=Ket(t,e,c.path,c.children,s,r,i):(Ie(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=rj(t,e,c.path,c.children,s,r,a,i))}else if(n.type===uc.ACK_USER_WRITE){const c=n;c.revert?o=Yet(t,e,c.path,s,r,i):o=Get(t,e,c.path,c.affectedTree,s,r,i)}else if(n.type===uc.LISTEN_COMPLETE)o=Qet(t,e,n.path,s,i);else throw $T("Unknown operation type: "+n.type);const u=i.getChanges();return Wet(e,o,u),{viewCache:o,changes:u}}function Wet(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=RD(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(Rbe(RD(e)))}}function Ube(t,e,n,s,r,i){const o=e.eventCache;if(xD(s,n)!=null)return e;{let a,u;if(Xt(n))if(Ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Dv(e),h=c instanceof it?c:it.EMPTY_NODE,d=CW(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=PD(s,Dv(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=Bt(n);if(c===".priority"){Ie(wm(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=e.serverCache.getNode();const d=Zne(s,n,h,u);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=ps(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const p=Zne(s,n,o.getNode(),u);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=IW(s,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,i):a=o.getNode()}}return I0(e,a,o.isFullyInitialized()||Xt(n),t.filter.filtersNodes())}}function ND(t,e,n,s,r,i,o,a){const u=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Xt(n))c=h.updateFullNode(u.getNode(),s,null);else if(h.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,s);c=h.updateFullNode(u.getNode(),m,null)}else{const m=Bt(n);if(!u.isCompleteForPath(n)&&wm(n)>1)return e;const w=ps(n),k=u.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?c=h.updatePriority(u.getNode(),k):c=h.updateChild(u.getNode(),m,k,w,Vbe,null)}const d=Nbe(e,c,u.isFullyInitialized()||Xt(n),h.filtersNodes()),p=new SW(r,d,i);return Ube(t,d,n,r,p,a)}function sj(t,e,n,s,r,i,o){const a=e.eventCache;let u,c;const h=new SW(r,e,i);if(Xt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),u=I0(e,c,!0,t.filter.filtersNodes());else{const d=Bt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),u=I0(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=ps(n),m=a.getNode().getImmediateChild(d);let w;if(Xt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?vbe(p)===".priority"&&k.getChild(bbe(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=it.EMPTY_NODE}if(m.equals(w))u=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);u=I0(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function ese(t,e){return t.eventCache.isCompleteForChild(e)}function Ket(t,e,n,s,r,i,o){let a=e;return s.foreach((u,c)=>{const h=ci(n,u);ese(e,Bt(h))&&(a=sj(t,a,h,c,r,i,o))}),s.foreach((u,c)=>{const h=ci(n,u);ese(e,Bt(h))||(a=sj(t,a,h,c,r,i,o))}),a}function tse(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function rj(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Xt(n)?c=s:c=new Es(null).setTree(n,s);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=tse(t,m,p);u=ND(t,u,new is(d),w,r,i,o,a)}}),c.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=tse(t,w,p);u=ND(t,u,new is(d),k,r,i,o,a)}}),u}function Get(t,e,n,s,r,i,o){if(xD(r,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(Xt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return ND(t,e,n,u.getNode().getChild(n),r,i,a,o);if(Xt(n)){let c=new Es(null);return u.getNode().forEachChild(Hb,(h,d)=>{c=c.set(new is(h),d)}),rj(t,e,n,c,r,i,a,o)}else return e}else{let c=new Es(null);return s.foreach((h,d)=>{const p=ci(n,h);u.isCompleteForPath(p)&&(c=c.set(h,u.getNode().getChild(p)))}),rj(t,e,n,c,r,i,a,o)}}function Qet(t,e,n,s,r){const i=e.serverCache,o=Nbe(e,i.getNode(),i.isFullyInitialized()||Xt(n),i.isFiltered());return Ube(t,o,n,s,Vbe,r)}function Yet(t,e,n,s,r,i){let o;if(xD(s,n)!=null)return e;{const a=new SW(s,e,r),u=e.eventCache.getNode();let c;if(Xt(n)||Bt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=PD(s,Dv(e));else{const d=e.serverCache.getNode();Ie(d instanceof it,"serverChildren would be complete if leaf node"),h=CW(s,d)}h=h,c=t.filter.updateFullNode(u,h,i)}else{const h=Bt(n);let d=IW(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=u.getImmediateChild(h)),d!=null?c=t.filter.updateChild(u,h,d,ps(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(u,h,it.EMPTY_NODE,ps(n),a,i):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=PD(s,Dv(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||xD(s,Sn())!=null,I0(e,c,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xet{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new wW(s.getIndex()),i=get(s);this.processor_=$et(i);const o=n.serverCache,a=n.eventCache,u=r.updateFullNode(it.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(it.EMPTY_NODE,a.getNode(),null),h=new bm(u,o.isFullyInitialized(),r.filtersNodes()),d=new bm(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=SF(d,h),this.eventGenerator_=new Eet(this.query_)}get query(){return this.query_}}function Jet(t){return t.viewCache_.serverCache.getNode()}function Zet(t){return RD(t.viewCache_)}function ett(t,e){const n=Dv(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xt(e)&&!n.getImmediateChild(Bt(e)).isEmpty())?n.getChild(e):null}function nse(t){return t.eventRegistrations_.length===0}function ttt(t,e){t.eventRegistrations_.push(e)}function sse(t,e,n){const s=[];if(n){Ie(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function rse(t,e,n,s){e.type===uc.MERGE&&e.source.queryId!==null&&(Ie(Dv(t.viewCache_),"We should always have a full cache before handling merges"),Ie(RD(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=Het(t.processor_,r,e,n,s);return zet(t.processor_,i.viewCache),Ie(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,qbe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function ntt(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nr,(r,i)=>{s.push(HE(r,i))}),n.isFullyInitialized()&&s.push(Rbe(n.getNode())),qbe(t,s,n.getNode(),e)}function qbe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return Tet(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let DD;class jbe{constructor(){this.views=new Map}}function stt(t){Ie(!DD,"__referenceConstructor has already been defined"),DD=t}function rtt(){return Ie(DD,"Reference.ts has not been loaded"),DD}function itt(t){return t.views.size===0}function kW(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Ie(i!=null,"SyncTree gave us an op for an invalid query."),rse(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(rse(o,e,n,s));return i}}function Bbe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=PD(n,r?s:null),u=!1;a?u=!0:s instanceof it?(a=CW(n,s),u=!1):(a=it.EMPTY_NODE,u=!1);const c=SF(new bm(a,u,!1),new bm(s,r,!1));return new Xet(e,c)}return o}function ott(t,e,n,s,r,i){const o=Bbe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),ttt(o,n),ntt(o,n)}function att(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Em(t);if(r==="default")for(const[u,c]of t.views.entries())o=o.concat(sse(c,n,s)),nse(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||i.push(c.query));else{const u=t.views.get(r);u&&(o=o.concat(sse(u,n,s)),nse(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||i.push(u.query)))}return a&&!Em(t)&&i.push(new(rtt())(e._repo,e._path)),{removed:i,events:o}}function $be(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xg(t,e){let n=null;for(const s of t.views.values())n=n||ett(s,e);return n}function zbe(t,e){if(e._queryParams.loadsAllData())return AF(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Hbe(t,e){return zbe(t,e)!=null}function Em(t){return AF(t)!=null}function AF(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let OD;function ltt(t){Ie(!OD,"__referenceConstructor has already been defined"),OD=t}function utt(){return Ie(OD,"Reference.ts has not been loaded"),OD}let ctt=1;class ise{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Es(null),this.pendingWriteTree_=Uet(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wbe(t,e,n,s,r){return Aet(t.pendingWriteTree_,e,n,s,r),r?AR(t,new Nv(xbe(),e,n)):[]}function xy(t,e,n=!1){const s=Ret(t.pendingWriteTree_,e);if(Pet(t.pendingWriteTree_,e)){let r=new Es(null);return s.snap!=null?r=r.set(Sn(),!0):Xa(s.children,i=>{r=r.set(new is(i),!0)}),AR(t,new AD(s.path,r,n))}else return[]}function kR(t,e,n){return AR(t,new Nv(EW(),e,n))}function htt(t,e,n){const s=Es.fromObject(n);return AR(t,new Tk(EW(),e,s))}function dtt(t,e){return AR(t,new Ek(EW(),e))}function ftt(t,e,n){const s=RW(t,n);if(s){const r=PW(s),i=r.path,o=r.queryId,a=Sa(i,e),u=new Ek(TW(o),a);return xW(t,i,u)}else return[]}function LD(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Hbe(o,e))){const u=att(o,e,n,s);itt(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=u.removed;if(a=u.events,!r){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Em(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=mtt(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,O=Ybe(t,k);t.listenProvider_.startListening(k0(P),Ck(t,P),O.hashFn,O.onComplete)}}}!d&&c.length>0&&!s&&(h?t.listenProvider_.stopListening(k0(e),null):c.forEach(p=>{const m=t.queryToTagMap.get(RF(p));t.listenProvider_.stopListening(k0(p),m)}))}_tt(t,c)}return a}function Kbe(t,e,n,s){const r=RW(t,s);if(r!=null){const i=PW(r),o=i.path,a=i.queryId,u=Sa(o,e),c=new Nv(TW(a),u,n);return xW(t,o,c)}else return[]}function ptt(t,e,n,s){const r=RW(t,s);if(r){const i=PW(r),o=i.path,a=i.queryId,u=Sa(o,e),c=Es.fromObject(n),h=new Tk(TW(a),u,c);return xW(t,o,h)}else return[]}function ij(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Sa(p,r);i=i||xg(m,w),o=o||Em(m)});let a=t.syncPointTree_.get(r);a?(o=o||Em(a),i=i||xg(a,Sn())):(a=new jbe,t.syncPointTree_=t.syncPointTree_.set(r,a));let u;i!=null?u=!0:(u=!1,i=it.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=xg(m,Sn());w&&(i=i.updateImmediateChild(p,w))}));const c=Hbe(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=RF(e);Ie(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=ytt();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=kF(t.pendingWriteTree_,r);let d=ott(a,e,n,h,i,u);if(!c&&!o&&!s){const p=zbe(a,e);d=d.concat(vtt(t,e,p))}return d}function AW(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Sa(i,e),u=xg(o,a);if(u)return u});return Lbe(s,e,r,n,!0)}function gtt(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=Sa(c,n);s=s||xg(h,d)});let r=t.syncPointTree_.get(n);r?s=s||xg(r,Sn()):(r=new jbe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new bm(s,!0,!1):null,a=kF(t.pendingWriteTree_,e._path),u=Bbe(r,e,a,i?o.getNode():it.EMPTY_NODE,i);return Zet(u)}function AR(t,e){return Gbe(e,t.syncPointTree_,null,kF(t.pendingWriteTree_,Sn()))}function Gbe(t,e,n,s){if(Xt(t.path))return Qbe(t,e,n,s);{const r=e.get(Sn());n==null&&r!=null&&(n=xg(r,Sn()));let i=[];const o=Bt(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,h=Mbe(s,o);i=i.concat(Gbe(a,u,c,h))}return r&&(i=i.concat(kW(r,t,s,n))),i}}function Qbe(t,e,n,s){const r=e.get(Sn());n==null&&r!=null&&(n=xg(r,Sn()));let i=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=Mbe(s,o),h=t.operationForChild(o);h&&(i=i.concat(Qbe(h,a,u,c)))}),r&&(i=i.concat(kW(r,t,s,n))),i}function Ybe(t,e){const n=e.query,s=Ck(t,n);return{hashFn:()=>(Jet(e)||it.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?ftt(t,n._path,s):dtt(t,n._path);{const i=fZe(r,n);return LD(t,n,null,i)}}}}function Ck(t,e){const n=RF(e);return t.queryToTagMap.get(n)}function RF(t){return t._path.toString()+"$"+t._queryIdentifier}function RW(t,e){return t.tagToQueryMap.get(e)}function PW(t){const e=t.indexOf("$");return Ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new is(t.substr(0,e))}}function xW(t,e,n){const s=t.syncPointTree_.get(e);Ie(s,"Missing sync point for query tag that we're tracking");const r=kF(t.pendingWriteTree_,e);return kW(s,n,r,null)}function mtt(t){return t.fold((e,n,s)=>{if(n&&Em(n))return[AF(n)];{let r=[];return n&&(r=$be(n)),Xa(s,(i,o)=>{r=r.concat(o)}),r}})}function k0(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(utt())(t._repo,t._path):t}function _tt(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=RF(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function ytt(){return ctt++}function vtt(t,e,n){const s=e._path,r=Ck(t,e),i=Ybe(t,n),o=t.listenProvider_.startListening(k0(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Ie(!Em(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,h,d)=>{if(!Xt(c)&&h&&Em(h))return[AF(h).query];{let p=[];return h&&(p=p.concat($be(h).map(m=>m.query))),Xa(d,(m,w)=>{p=p.concat(w)}),p}});for(let c=0;c<u.length;++c){const h=u[c];t.listenProvider_.stopListening(k0(h),Ck(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NW{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new NW(n)}node(){return this.node_}}class DW{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ci(this.path_,e);return new DW(this.syncTree_,n)}node(){return AW(this.syncTree_,this.path_)}}const wtt=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ose=function(t,e,n){if(!t||typeof t!="object")return t;if(Ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return btt(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ett(t[".sv"],e);Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},btt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ie(!1,"Unexpected server value: "+t)}},Ett=function(t,e,n){t.hasOwnProperty("increment")||Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Ie(!1,"Unexpected increment value: "+s);const r=e.node();if(Ie(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},Ttt=function(t,e,n,s){return OW(e,new DW(n,t),s)},Xbe=function(t,e,n){return OW(t,new NW(e),n)};function OW(t,e,n){const s=t.getPriority().val(),r=ose(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=ose(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Si(a,Vi(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Si(r))),o.forEachChild(nr,(a,u)=>{const c=OW(u,e.getImmediateChild(a),n);c!==u&&(i=i.updateImmediateChild(a,c))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class LW{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function MW(t,e){let n=e instanceof is?e:new is(e),s=t,r=Bt(n);for(;r!==null;){const i=ME(s.node.children,r)||{children:{},childCount:0};s=new LW(r,s,i),n=ps(n),r=Bt(n)}return s}function JT(t){return t.node.value}function Jbe(t,e){t.node.value=e,oj(t)}function Zbe(t){return t.node.childCount>0}function Ctt(t){return JT(t)===void 0&&!Zbe(t)}function PF(t,e){Xa(t.node.children,(n,s)=>{e(new LW(n,t,s))})}function eEe(t,e,n,s){n&&e(t),PF(t,r=>{eEe(r,e,!0)})}function Itt(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function RR(t){return new is(t.parent===null?t.name:RR(t.parent)+"/"+t.name)}function oj(t){t.parent!==null&&Stt(t.parent,t.name,t)}function Stt(t,e,n){const s=Ctt(n),r=up(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,oj(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,oj(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ktt=/[\[\].#$\/\u0000-\u001F\u007F]/,Att=/[\[\].#$\u0000-\u001F\u007F]/,m6=10*1024*1024,tEe=function(t){return typeof t=="string"&&t.length!==0&&!ktt.test(t)},nEe=function(t){return typeof t=="string"&&t.length!==0&&!Att.test(t)},Rtt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nEe(t)},Ptt=function(t,e,n,s){FW(t7(t,"value"),e,n)},FW=function(t,e,n){const s=n instanceof is?new WZe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cy(s));if(typeof e=="function")throw new Error(t+"contains a function "+cy(s)+" with contents = "+e.toString());if(Jwe(e))throw new Error(t+"contains "+e.toString()+" "+cy(s));if(typeof e=="string"&&e.length>m6/3&&X2(e)>m6)throw new Error(t+"contains a string greater than "+m6+" utf8 bytes "+cy(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Xa(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!tEe(o)))throw new Error(t+" contains an invalid key ("+o+") "+cy(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KZe(s,o),FW(t,a,s),GZe(s)}),r&&i)throw new Error(t+' contains ".value" child '+cy(s)+" in addition to actual children.")}},sEe=function(t,e,n,s){if(!nEe(n))throw new Error(t7(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xtt=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sEe(t,e,n)},rEe=function(t,e){if(Bt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Ntt=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tEe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Rtt(n))throw new Error(t7(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dtt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VW(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!_W(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function iEe(t,e,n){VW(t,n),oEe(t,s=>_W(s,e))}function ud(t,e,n){VW(t,n),oEe(t,s=>lc(s,e)||lc(e,s))}function oEe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(Ott(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Ott(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();T0&&Io("event: "+n.toString()),XT(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ltt="repo_interrupt",Mtt=25;class Ftt{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dtt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kD(),this.transactionQueueTree_=new LW,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vtt(t,e,n){if(t.stats_=gW(t.repoInfo_),t.forceRestClient_||_Ze())t.server_=new SD(t.repoInfo_,(s,r,i,o)=>{ase(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>lse(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{li(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new yf(t.repoInfo_,e,(s,r,i,o)=>{ase(t,s,r,i,o)},s=>{lse(t,s)},s=>{qtt(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=EZe(t.repoInfo_,()=>new bet(t.stats_,t.server_)),t.infoData_=new met,t.infoSyncTree_=new ise({startListening:(s,r,i,o)=>{let a=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(a=kR(t.infoSyncTree_,s._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),qW(t,"connected",!1),t.serverSyncTree_=new ise({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,u)=>{const c=o(a,u);ud(t.eventQueue_,s._path,c)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function Utt(t){const e=t.infoData_.getNode(new is(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function UW(t){return wtt({timestamp:Utt(t)})}function ase(t,e,n,s,r){t.dataUpdateCount++;const i=new is(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const u=tD(n,c=>Vi(c));o=ptt(t.serverSyncTree_,i,u,r)}else{const u=Vi(n);o=Kbe(t.serverSyncTree_,i,u,r)}else if(s){const u=tD(n,c=>Vi(c));o=htt(t.serverSyncTree_,i,u)}else{const u=Vi(n);o=kR(t.serverSyncTree_,i,u)}let a=i;o.length>0&&(a=NF(t,i)),ud(t.eventQueue_,a,o)}function lse(t,e){qW(t,"connected",e),e===!1&&$tt(t)}function qtt(t,e){Xa(e,(n,s)=>{qW(t,n,s)})}function qW(t,e,n){const s=new is("/.info/"+e),r=Vi(n);t.infoData_.updateSnapshot(s,r);const i=kR(t.infoSyncTree_,s,r);ud(t.eventQueue_,s,i)}function aEe(t){return t.nextWriteId_++}function jtt(t,e,n){const s=gtt(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=Vi(r).withIndex(e._queryParams.getIndex());ij(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=kR(t.serverSyncTree_,e._path,i);else{const a=Ck(t.serverSyncTree_,e);o=Kbe(t.serverSyncTree_,e._path,i,a)}return ud(t.eventQueue_,e._path,o),LD(t.serverSyncTree_,e,n,null,!0),i},r=>(xF(t,"get for query "+li(e)+" failed: "+r),Promise.reject(new Error(r))))}function Btt(t,e,n,s,r){xF(t,"set",{path:e.toString(),value:n,priority:s});const i=UW(t),o=Vi(n,s),a=AW(t.serverSyncTree_,e),u=Xbe(o,a,i),c=aEe(t),h=Wbe(t.serverSyncTree_,e,u,c,!0);VW(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||Ka("set at "+e+" failed: "+p);const k=xy(t.serverSyncTree_,c,!w);ud(t.eventQueue_,e,k),Ktt(t,r,p,m)});const d=dEe(t,e);NF(t,d),ud(t.eventQueue_,d,[])}function $tt(t){xF(t,"onDisconnectEvents");const e=UW(t),n=kD();ej(t.onDisconnect_,Sn(),(r,i)=>{const o=Ttt(r,i,t.serverSyncTree_,e);Pbe(n,r,o)});let s=[];ej(n,Sn(),(r,i)=>{s=s.concat(kR(t.serverSyncTree_,r,i));const o=dEe(t,r);NF(t,o)}),t.onDisconnect_=kD(),ud(t.eventQueue_,Sn(),s)}function ztt(t,e,n){let s;Bt(e._path)===".info"?s=ij(t.infoSyncTree_,e,n):s=ij(t.serverSyncTree_,e,n),iEe(t.eventQueue_,e._path,s)}function Htt(t,e,n){let s;Bt(e._path)===".info"?s=LD(t.infoSyncTree_,e,n):s=LD(t.serverSyncTree_,e,n),iEe(t.eventQueue_,e._path,s)}function Wtt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ltt)}function xF(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Io(n,...e)}function Ktt(t,e,n,s){e&&XT(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function lEe(t,e,n){return AW(t.serverSyncTree_,e,n)||it.EMPTY_NODE}function jW(t,e=t.transactionQueueTree_){if(e||DF(t,e),JT(e)){const n=cEe(t,e);Ie(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Gtt(t,RR(e),n)}else Zbe(e)&&PF(e,n=>{jW(t,n)})}function Gtt(t,e,n){const s=n.map(c=>c.currentWriteId),r=lEe(t,e,s);let i=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];Ie(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Sa(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),u=e;t.server_.put(u.toString(),a,c=>{xF(t,"transaction put response",{path:u.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(xy(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();DF(t,MW(t.transactionQueueTree_,e)),jW(t,t.transactionQueueTree_),ud(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)XT(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ka("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}NF(t,e)}},o)}function NF(t,e){const n=uEe(t,e),s=RR(n),r=cEe(t,n);return Qtt(t,r,s),s}function Qtt(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],u=Sa(n,a.path);let c=!1,h;if(Ie(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,h=a.abortReason,r=r.concat(xy(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Mtt)c=!0,h="maxretry",r=r.concat(xy(t.serverSyncTree_,a.currentWriteId,!0));else{const d=lEe(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){FW("transaction failed: Data returned ",p,a.path);let m=Vi(p);typeof p=="object"&&p!=null&&up(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,k=UW(t),P=Xbe(m,d,k);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=aEe(t),i.splice(i.indexOf(w),1),r=r.concat(Wbe(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(xy(t.serverSyncTree_,w,!0))}else c=!0,h="nodata",r=r.concat(xy(t.serverSyncTree_,a.currentWriteId,!0))}ud(t.eventQueue_,n,r),r=[],c&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}DF(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)XT(s[o]);jW(t,t.transactionQueueTree_)}function uEe(t,e){let n,s=t.transactionQueueTree_;for(n=Bt(e);n!==null&&JT(s)===void 0;)s=MW(s,n),e=ps(e),n=Bt(e);return s}function cEe(t,e){const n=[];return hEe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function hEe(t,e,n){const s=JT(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);PF(e,r=>{hEe(t,r,n)})}function DF(t,e){const n=JT(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Jbe(e,n.length>0?n:void 0)}PF(e,s=>{DF(t,s)})}function dEe(t,e){const n=RR(uEe(t,e)),s=MW(t.transactionQueueTree_,e);return Itt(s,r=>{_6(t,r)}),_6(t,s),eEe(s,r=>{_6(t,r)}),n}function _6(t,e){const n=JT(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ie(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ie(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(xy(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Jbe(e,void 0):n.length=i+1,ud(t.eventQueue_,RR(e),r);for(let o=0;o<s.length;o++)XT(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ytt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function Xtt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ka(`Invalid query segment '${n}' in query '${t}'`)}return e}const use=function(t,e){const n=Jtt(t),s=n.namespace;n.domain==="firebase.com"&&Uf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Uf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||lZe();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new cbe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new is(n.pathString)}},Jtt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=Ytt(t.substring(h,d)));const p=Xtt(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ztt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+li(this.snapshot.exportVal())}}class ent{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fEe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BW{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Xt(this._path)?null:vbe(this._path)}get ref(){return new cp(this._repo,this._path)}get _queryIdentifier(){const e=Gne(this._queryParams),n=fW(e);return n==="{}"?"default":n}get _queryObject(){return Gne(this._queryParams)}isEqual(e){if(e=Wn(e),!(e instanceof BW))return!1;const n=this._repo===e._repo,s=_W(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+HZe(this._path)}}class cp extends BW{constructor(e,n){super(e,n,new bW,!1)}get parent(){const e=bbe(this._path);return e===null?null:new cp(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ik{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new is(e),s=aj(this.ref,e);return new Ik(this._node.getChild(n),s,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new Ik(s,aj(this.ref,n),nr)))}hasChild(e){const n=new is(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pEe(t,e){return t=Wn(t),t._checkNotDeleted("ref"),e!==void 0?aj(t._root,e):t._root}function aj(t,e){return t=Wn(t),Bt(t._path)===null?xtt("child","path",e):sEe("child","path",e),new cp(t._repo,ci(t._path,e))}function gEe(t){return rEe("remove",t._path),$W(t,null)}function $W(t,e){t=Wn(t),rEe("set",t._path),Ptt("set",e,t._path);const n=new G2;return Btt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function mEe(t){t=Wn(t);const e=new fEe(()=>{}),n=new OF(e);return jtt(t._repo,t,n).then(s=>new Ik(s,new cp(t._repo,t._path),t._queryParams.getIndex()))}class OF{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new Ztt("value",this,new Ik(e.snapshotNode,new cp(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ent(this,e,n):null}matches(e){return e instanceof OF?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function tnt(t,e,n,s,r){const i=new fEe(n,void 0),o=new OF(i);return ztt(t._repo,t,o),()=>Htt(t._repo,t,o)}function _Ee(t,e,n,s){return tnt(t,"value",e)}stt(cp);ltt(cp);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const nnt="FIREBASE_DATABASE_EMULATOR_HOST",lj={};let snt=!1;function rnt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=bd(i);t.repoInfo_=new cbe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function int(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Uf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Io("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=use(i,r),a=o.repoInfo,u;typeof process<"u"&&Pne&&(u=Pne[nnt]),u?(i=`http://${u}?ns=${a.namespace}`,o=use(i,r),a=o.repoInfo):o.repoInfo.secure;const c=new vZe(t.name,t.options,e);Ntt("Invalid Firebase Database URL",o),Xt(o.path)||Uf("Database URL must point to the root of a Firebase Database (not including a child path).");const h=ant(a,t,c,new yZe(t,n));return new lnt(h,t)}function ont(t,e){const n=lj[e];(!n||n[t.key]!==t)&&Uf(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Wtt(t),delete n[t.key]}function ant(t,e,n,s){let r=lj[e.name];r||(r={},lj[e.name]=r);let i=r[t.toURLString()];return i&&Uf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Ftt(t,snt,n,s),r[t.toURLString()]=i,i}class lnt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Vtt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cp(this._repo,Sn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ont(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Uf("Cannot call "+e+" on a deleted database.")}}function zW(t=Z2(),e){const n=pR(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=JH("database");s&&unt(n,...s)}return n}function unt(t,e,n,s={}){t=Wn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&dm(s,i.repoInfo_.emulatorOptions))return;Uf("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Uf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new cx(cx.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:ZH(s.mockUserToken,t.app.options.projectId);o=new cx(a)}bd(e)&&(Q2(e),Y2("Database",!0)),rnt(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cnt(t){nZe(a_),fm(new Df("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return int(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),Vl(xne,Nne,t),Vl(xne,Nne,"esm2020")}yf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};yf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cnt();var Q_={};const ei={apiKey:Q_.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Q_.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Q_.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Q_.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Q_.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Q_.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Q_.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:ei.apiKey?"설정됨":"설정 안됨",authDomain:ei.authDomain?"설정됨":"설정 안됨",projectId:ei.projectId?"설정됨":"설정 안됨",storageBucket:ei.storageBucket?"설정됨":"설정 안됨",messagingSenderId:ei.messagingSenderId?"설정됨":"설정 안됨",appId:ei.appId?"설정됨":"설정 안됨",databaseURL:ei.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:ei.apiKey?`${ei.apiKey.substring(0,10)}...`:"없음",authDomain:ei.authDomain,projectId:ei.projectId,databaseURL:ei.databaseURL?"설정됨":"없음"});(!ei.apiKey||!ei.authDomain||!ei.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let Ds,Ys,Ny,Sk,kk;ei.apiKey&&ei.authDomain&&ei.projectId?(Ds=_ye(ei),Ys=I7(Ds),Ny=new Ju,Sk=pwe(Ds),kk=JJe(Ds),zW(Ds)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Ys=null,Ny=null,Sk=null,kk=null);const hnt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Ys},get db(){return Sk},get firebaseApp(){return Ds},get googleProvider(){return Ny},get storage(){return kk}},Symbol.toStringTag,{value:"Module"}));function HW(){return Wa(q_e)}const ys=id(null),Jc=id(!0),X1=id(null);let Rw=null,cse=!1;function WW(){const t=HW(),e=Ds?pwe(Ds):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),Ds?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async u=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const c=3;let h=0;for(;h<c;)try{console.log("🔍 사용자 정보 확인 중:",u.email,`(시도 ${h+1}/${c})`);const d=Z7(e,"users",u.uid),p=await bD(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await ED(d,{lastLoginAt:b0()},{merge:!0}),{...u,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",u.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(u.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:u.email,adminEmails:w,isAdminEmail:k});const P={uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL,role:k?"admin":"student",createdAt:b0(),lastLoginAt:b0()};console.log("💾 새 사용자 정보 저장 중:",P),await ED(d,P),console.log("✅ 새 사용자 등록 완료:",u.email);const O=await bD(d);if(O.exists())console.log("✅ 사용자 등록 확인 완료:",O.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...u,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${c}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!Ds,db:!!e,auth:!!Ys,userUid:u.uid,userEmail:u.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<c)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...u,role:"student"}},s=async()=>{if(!Jc.value){Jc.value=!0,X1.value=null;try{if(!Ys||!Ny)throw new Error("Firebase is not configured.");const u=await T7(Ys,Ny);console.log("✅ Google 로그인 팝업 성공:",u.user.email);try{if(Ds&&e)ys.value=await n(u.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",ys.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),ys.value=null,Ys&&await wy(Ys),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),Jc.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!ys.value,userRole:ys.value?.role,userEmail:ys.value?.email})}catch(c){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",c),ys.value=null,Ys&&await wy(Ys),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),Jc.value=!1;return}Jc.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(u){console.error("❌ Google 로그인 팝업 실패:",u),X1.value=u.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),Jc.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Ys),!Ys){console.log("❌ useAuth: auth 객체가 없음");return}try{Rw&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Rw(),Rw=null),console.log("🔍 useAuth: Firebase signOut 실행"),await wy(Ys),console.log("✅ useAuth: Firebase signOut 성공"),ys.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(u){console.error("❌ useAuth: 로그아웃 실패:",u),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!cse){if(cse=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!Ds,auth:!!Ys,db:!!e}),!Ys){console.log("⚠️ Firebase Auth가 초기화되지 않음"),Jc.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Rw=y7(Ys,async u=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",u?u.email:"없음"),u)if(console.log("✅ 인증된 사용자 감지:",{uid:u.uid,email:u.email,displayName:u.displayName,emailVerified:u.emailVerified}),Ds&&e)try{ys.value=await n(u),console.log("✅ 사용자 역할 설정 완료:",ys.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!ys.value,userRole:ys.value?.role,userEmail:ys.value?.email})}catch(c){console.error("❌ 사용자 역할 가져오기 실패:",c),console.error("❌ 오류 코드:",c.code),console.error("❌ 오류 메시지:",c.message),ys.value=null,Ys&&await wy(Ys),X1.value=c.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),Jc.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),ys.value=null,Ys&&await wy(Ys),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),ys.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");Jc.value=!1})}};hR(()=>{Rw&&Rw()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:ys.value,isAuthenticated:!!ys.value,userRole:ys.value?.role,firebaseApp:!!Ds,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!Ds),console.log("  - Firebase Auth:",!!Ys),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!Ny),Ds&&console.log("  - Firebase Config:",{apiKey:Ds.options.apiKey?"설정됨":"설정 안됨",authDomain:Ds.options.authDomain?"설정됨":"설정 안됨",projectId:Ds.options.projectId?"설정됨":"설정 안됨",storageBucket:Ds.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!Ds,auth:!!Ys,db:!!e,googleProvider:!!Ny});return{user:Ke(()=>ys.value),loading:Ke(()=>Jc.value),error:Ke(()=>X1.value),isAuthenticated:Ke(()=>!!ys.value),displayName:Ke(()=>ys.value?.displayName||"사용자"),email:Ke(()=>ys.value?.email||""),photoURL:Ke(()=>ys.value?.photoURL||""),isFirebaseConfigured:Ke(()=>!!Ds),userRole:Ke(()=>ys.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const dnt={id:"app"},fnt=jT({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=WW(),o=QH(),a=YH();return uR(()=>{e()}),Jy([n,s,r],([u,c,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${u}, userRole=${c}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),u?c==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):c==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(u,c)=>{const h=xH("router-view");return q2(),LH("div",dnt,[Xi(h)])}}}),pnt=t=>t,gnt=pnt,mnt=[{path:"/",component:()=>Mi(()=>Is(()=>Cn(()=>import("./MainLayout-Bwj2wsFm-Cz6tEJ5A-BqhNFaGb.js"),__vite__mapDeps([22,23,24,25,26,27,28,29,30,31,32,33])),er([22,23,24,25,26,27,28,29,30,31,32,33])),pa([22,23,24,25,26,27,28,29,30,31,32,33,34,35])),children:[{path:"",component:()=>Mi(()=>Is(()=>Cn(()=>import("./IndexPage-CFs49cf4-DCFzd5a3-BgfGDant.js"),__vite__mapDeps([34,23,24,25,32,35,30,31,36,33])),er([34,23,24,25,32,35,30,31,36,33])),pa([36,23,24,25,32,37,30,31,38,34,39]))},{path:"survey-results",component:()=>Mi(()=>Is(()=>Cn(()=>import("./SurveyResults-DvN0U2_L-LlonMCsx-BnTA3nZB.js"),__vite__mapDeps([37,28,25,23,24,27,38,35,39])),er([37,28,25,23,24,27,38,35,39])),pa([40,28,25,23,24,27,41,37,42,43]))}]},{path:"/logout",component:()=>Mi(()=>Is(()=>Cn(()=>import("./LogoutPage-CtCownZv-BTcpQEl3-n4ns1Z9p.js"),__vite__mapDeps([40,24,25,32,35,26])),er([40,24,25,32,35,26])),pa([44,24,25,32,37,26,45]))},{path:"/poll-result",component:()=>Mi(()=>Is(()=>Cn(()=>import("./PollResultPage-BsZ27FdJ-BqTU4Xdx-BVDVEe2h.js"),__vite__mapDeps([41,28,25,35,39])),er([41,28,25,35,39])),pa([46,28,25,37,42,43,47]))},{path:"/study/:courseId",component:()=>Mi(()=>Is(()=>Cn(()=>import("./StudentView-EHbgIK-q-CI38o4Vo-NXpdNqUJ.js"),__vite__mapDeps([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),er([42,23,24,25,27,29,26,30,31,32,28,36,35,38,39])),pa([48,23,24,25,27,29,26,30,31,32,28,33,38,37,41,42,43,49])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",u=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:u,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:u,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>Mi(()=>Is(()=>Cn(()=>import("./ErrorNotFound-C3eQr692-UoAM-uVv-BT5vL26p.js"),[]),[]),[])}],y6=gnt(function(){return Z7e({scrollBehavior:()=>({left:0,top:0}),routes:mnt,history:A7e("/")})});async function _nt(t,e){const n=t(fnt);n.use(XHe,e);const s=ow(typeof y6=="function"?await y6({}):y6);return{app:n,router:s}}const uj={xs:18,sm:24,md:32,lg:38,xl:46},PR={size:String};function xR(t,e=uj){return Ke(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function KW(t,e){return t!==void 0&&t()||e}function yEe(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function Dy(t,e){return t!==void 0?e.concat(t()):e}function GW(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function vEe(t,e,n,s,r,i){e.key=s+r;const o=_t(t,e,n);return r===!0?O2(o,i()):o}const hse="0 0 24 24",v6=t=>t,w6=t=>`ionicons ${t}`,wEe={"mdi-":t=>`mdi ${t}`,"icon-":v6,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":w6,"ion-ios":w6,"ion-logo":w6,"iconfont ":v6,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":v6},bEe={o_:"-outlined",r_:"-round",s_:"-sharp"},EEe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},ynt=new RegExp("^("+Object.keys(wEe).join("|")+")"),vnt=new RegExp("^("+Object.keys(bEe).join("|")+")"),dse=new RegExp("^("+Object.keys(EEe).join("|")+")"),wnt=/^[Mm]\s?[-+]?\.?\d/,bnt=/^img:/,Ent=/^svguse:/,Tnt=/^ion-/,Cnt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,KE=aw({name:"QIcon",props:{...PR,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=lp(),s=xR(t),r=Ke(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=Ke(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(wnt.test(a)===!0){const[h,d=hse]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return _t("path",{style:w,d:m,transform:k})})}}if(bnt.test(a)===!0)return{img:!0,src:a.substring(4)};if(Ent.test(a)===!0){const[h,d=hse]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let u=" ";const c=a.match(ynt);if(c!==null)o=wEe[c[1]](a);else if(Cnt.test(a)===!0)o=a;else if(Tnt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(dse.test(a)===!0){o="notranslate material-symbols";const h=a.match(dse);h!==null&&(a=a.substring(6),o+=EEe[h[1]]),u=a}else{o="notranslate material-icons";const h=a.match(vnt);h!==null&&(a=a.substring(2),o+=bEe[h[1]]),u=a}return{cls:o,content:u}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?_t(t.tag,o,KW(e.default)):i.value.img===!0?_t(t.tag,o,Dy(e.default,[_t("img",{src:i.value.src})])):i.value.svg===!0?_t(t.tag,o,Dy(e.default,[_t("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?_t(t.tag,o,Dy(e.default,[_t("svg",{viewBox:i.value.viewBox},[_t("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),_t(t.tag,o,Dy(e.default,[i.value.content])))}}}),QW=aw({name:"QAvatar",props:{...PR,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=xR(t),s=Ke(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=Ke(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[_t(KE,{name:t.icon})]:void 0;return _t("div",{class:s.value,style:n.value},[_t("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},GW(e.default,i))])}}}),YW={size:{type:[String,Number],default:"1em"},color:String};function XW(t){return{cSize:Ke(()=>t.size in uj?`${uj[t.size]}px`:t.size),classes:Ke(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const LF=aw({name:"QSpinner",props:{...YW,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=XW(t);return()=>_t("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[_t("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function JW(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function TEe(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=_f(t);if(e)return e.$el||e}function CEe(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function Int(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function fse(t,e,n,s){n.modifiers.stop===!0&&z2(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),u=jH(t),{left:c,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${u.left-c-w}px`,O=`${(p-m)/2}px`,M=i?O:`${u.top-h-w}px`;a.className="q-ripple__inner",JW(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function pse(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const ZW=qH({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&fse(r,t,s,r.qKeyEvent===!0)},keystart:Int(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&rk(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&fse(r,t,s,!0)},300)};pse(s,e),t.__qripple=s,BH(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&pse(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),$H(e,"main"),delete t._qripple)}}),IEe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Snt=Object.keys(IEe),e8={align:{type:String,validator:t=>Snt.includes(t)}};function t8(t){return Ke(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${IEe[e]}`})}function SEe(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function n8(t){return t.appContext.config.globalProperties.$router!==void 0}function kEe(t){return t.isUnmounted===!0||t.isDeactivated===!0}function gse(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function mse(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function knt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function _se(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Ant(t,e){return Array.isArray(t)===!0?_se(t,e):Array.isArray(e)===!0?_se(e,t):t===e}function Rnt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(Ant(t[n],e[n])===!1)return!1;return!0}const AEe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},REe={...AEe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function s8({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=lp(),{props:s,proxy:r,emit:i}=n,o=n8(n),a=Ke(()=>s.disable!==!0&&s.href!==void 0),u=Ke(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),c=Ke(()=>u.value===!0?M(s.to):null),h=Ke(()=>c.value!==null),d=Ke(()=>a.value===!0||h.value===!0),p=Ke(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=Ke(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:c.value.href,target:s.target}:{}),w=Ke(()=>{if(h.value===!1)return-1;const{matched:H}=c.value,{length:J}=H,I=H[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(mse.bind(null,I));if(y!==-1)return y;const T=gse(H[J-2]);return J>1&&gse(I)===T&&v[v.length-1].path!==T?v.findIndex(mse.bind(null,H[J-2])):y}),k=Ke(()=>h.value===!0&&w.value!==-1&&knt(r.$route.params,c.value.params)),P=Ke(()=>k.value===!0&&w.value===r.$route.matched.length-1&&Rnt(r.$route.params,c.value.params)),O=Ke(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const J=I=>V(H,I);i("click",H,J),H.defaultPrevented!==!0&&J()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:c,linkIsActive:k,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const yse={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Pnt={xs:8,sm:10,md:14,lg:20,xl:24},xnt=["button","submit","reset"],Nnt=/[^\s]\/[^\s]/,Dnt=["flat","outline","push","unelevated"];function Ont(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const Lnt={...PR,...AEe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...Dnt.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...e8.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},Mnt={...Lnt,round:Boolean};function Fnt(t){const e=xR(t,Pnt),n=t8(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=s8({fallbackTag:"button"}),u=Ke(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in yse?yse[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),c=Ke(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=Ke(()=>t.disable!==!0&&t.loading!==!0),d=Ke(()=>h.value===!0?t.tabindex||0:-1),p=Ke(()=>Ont(t,"standard")),m=Ke(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):xnt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&Nnt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=Ke(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${c.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=Ke(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:u,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:Tl}=Nf;let Pw=null,xw=null,Nw=null;const r8=aw({name:"QBtn",props:{...Mnt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=lp(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:u,linkTag:c,navigateOnClick:h,isActionable:d}=Fnt(t),p=id(null),m=id(null);let w=null,k,P=null;const O=Ke(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=Ke(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=Ke(()=>({center:t.round})),q=Ke(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=Ke(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:Bp}}),J=Ke(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",Bp,!0),document.removeEventListener("keyup",ae,Tl),p.value?.removeEventListener("blur",ae,Tl)};document.addEventListener("keydown",Bp,!0),document.addEventListener("keyup",ae,Tl),p.value.addEventListener("blur",ae,Tl)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),rk(K,[13,32])===!0&&xw!==p.value&&(xw!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),xw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,Tl)),Bp(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&(Pw!==p.value&&(Pw!==null&&E(),Pw=p.value,w=K.target,w.addEventListener("touchcancel",S,Tl),w.addEventListener("touchend",S,Tl)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function T(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Nw!==p.value&&(Nw!==null&&E(),Nw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,Tl)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(xw===p.value&&rk(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&sk(ne),K.cancelBubble===!0&&z2(ne),p.value.dispatchEvent(ne),Bp(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&(Pw===p.value||Nw===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Pw===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,Tl),w.removeEventListener("touchend",S,Tl)),Pw=w=null),Nw===p.value&&(document.removeEventListener("mouseup",S,Tl),Nw=null),xw===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,Tl),xw=null),p.value?.classList.remove("q-btn--active")}function b(K){Bp(K),K.qSkipRipple=!0}return cR(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(_t(KE,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&K.push(_t("span",{class:"block"},[t.label])),K=Dy(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(_t(KE,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[_t("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(_t("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[_t("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(_t("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(_t(UH,{name:"q-transition--fade"},()=>t.loading===!0?[_t("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[_t(LF)])]:null)),O2(_t(c.value,J.value,ne),[[ZW,M.value,void 0,V.value]])}}});let Vnt=1,Unt=document.body;function i8(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${Vnt++}`:t,JN.globalNodes!==void 0){const s=JN.globalNodes.class;s!==void 0&&(n.className=s)}return Unt.appendChild(n),n}function PEe(t){t.remove()}let qnt=0;const hx={},dx={},$u={},xEe={},jnt=/^\s*$/,NEe=[],Bnt=[void 0,null,!0,!1,""],o8=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],$nt=["top-left","top-right","bottom-left","bottom-right"],EI={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function DEe(t,e,n){if(!t)return jC("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,hx),Sv(t)===!1&&(r.type&&Object.assign(r,EI[r.type]),t={message:t}),Object.assign(r,EI[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=LF),r.spinner=ow(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:vse(r.message)||vse(r.caption)},r.position){if(o8.includes(r.position)===!1)return jC("wrong position",t)}else r.position="bottom";if(Bnt.includes(r.timeout)===!0)r.timeout=5e3;else{const u=Number(r.timeout);if(isNaN(u)||u<0)return jC("wrong timeout",t);r.timeout=Number.isFinite(u)?u:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(hx.actions)===!0?hx.actions:[]).concat(Array.isArray(EI[t.type]?.actions)===!0?EI[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:u,noDismiss:c,...h})=>({flat:!0,...h,onClick:typeof u=="function"?()=>{u(),c!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(u=>`${u.label}*${u.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const u=$u[r.position].value.indexOf(n.notif);$u[r.position].value[u]=r}else{const u=dx[r.meta.group];if(u===void 0){if(r.meta.uid=qnt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)$u[r.position].value.splice(Math.floor($u[r.position].value.length/2),0,r);else{const c=r.position.indexOf("top")!==-1?"unshift":"push";$u[r.position].value[c](r)}r.group!==void 0&&(dx[r.meta.group]=r)}else{if(u.meta.timer&&(clearTimeout(u.meta.timer),u.meta.timer=void 0),r.badgePosition!==void 0){if($nt.includes(r.badgePosition)===!1)return jC("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=u.meta.uid,r.meta.badge=u.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const c=$u[r.position].value.indexOf(u);$u[r.position].value[c]=dx[r.meta.group]=r}}const a=()=>{znt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return u=>{u!==void 0?jC("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return u=>{if(s!==void 0)if(u===void 0)s.dismiss();else{const c=Object.assign({},s.config,u,{group:!1,position:r.position});DEe(c,e,s)}}}function znt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=$u[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete dx[t.meta.group];const n=NEe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}$u[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function vse(t){return t!=null&&jnt.test(t)!==!0}function jC(t,e){return console.error(`Notify: ${t}`,e),!1}function Hnt(){return aw({name:"QNotifications",devtools:{hide:!0},setup(){return()=>_t("div",{class:"q-notifications"},o8.map(t=>_t(bHe,{key:t,class:xEe[t],tag:"div",name:`q-notification--${t}`},()=>$u[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(_t(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(_t(KE,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(_t(QW,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>_t("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[_t("div",a),_t("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(_t("div",o,i))}const r=[_t("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(_t("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(_t("div",{class:n.actionsClass},e.actions.map(i=>_t(r8,i)))),n.badge>1&&r.push(_t("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),_t("div",{ref:i=>{NEe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[_t("div",{class:n.wrapperClass},r)])}))))}})}const Wnt={setDefaults(t){Sv(t)===!0&&Object.assign(hx,t)},registerType(t,e){Sv(e)===!0&&(EI[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>DEe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){o8.forEach(s=>{$u[s]=id([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;xEe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=i8("q-notify");GHe(Hnt(),e).mount(n)}}},Knt={config:{},plugins:{Notify:Wnt}},Gnt="/";async function Qnt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const u=r(a);u!==null&&(window.location.href=u)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:Gnt})}catch(u){if(u&&u.url){i(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}_nt(x_e,Knt).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([Mi(()=>Is(()=>Cn(()=>import("./pinia-F5TpqEXP-CcuIgscM-CCJFe5VR.js"),__vite__mapDeps([43,31])),er([43,31])),pa([50,31]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");Qnt(t,r)})});const Ynt=Object.freeze(Object.defineProperty({__proto__:null,$:gg,A:Tv,B:Z$,C:J$,D:c2,E:kT,F:Y$,G:$d,H:r5,I:AT,J:aM,K:ew,L:MA,M:WL,N:CT,O:h2,get P(){return bs},Q:u2,R:ju,S:Zz,T:Jz,U:FA,V:a2,W:sp,X:yd,Y:p2,Z:qc,_:Mi,a:oM,get a$(){return xE},a0:eH,a1:tw,a2:mE,a3:yl,a4:UA,a5:Xg,a6:Zh,a7:qL,a8:FL,a9:VL,aA:sH,aB:Wy,aC:aH,aD:o5,aE:g2,aF:m2,aG:tg,aH:AM,aI:_M,aJ:gM,aK:bM,aL:TM,aM:vM,aN:kM,aO:xS,aP:mM,aQ:wM,aR:HA,aS:RM,aT:CM,aU:EM,aV:Qu,aW:td,aX:Rl,aY:Gu,aZ:Ku,a_:$A,aa:cg,ab:JL,ac:iH,ad:Sb,ae:nM,af:DA,ag:jL,ah:LA,ai:_E,aj:e5,ak:tM,al:b2,am:sM,an:u5,ao:l5,ap:Jg,aq:UT,ar:qT,as:en,at:PM,au:tH,av:YL,aw:eM,ax:s5,ay:ZL,az:t5,b:t_,b$:KE,b0:HM,b1:qS,b2:az,b3:jS,get b4(){return NE},b5:bz,b6:_z,b7:oz,b8:Nb,b9:vz,bA:o_,bB:gme,bC:_i,bD:Cg,bE:_n,bF:Jy,bG:D2,bH:Ome,bI:ow,bJ:Ke,bK:mH,bL:mme,bM:Wa,bN:n_e,bO:aw,bP:lp,bQ:_t,bR:KW,bS:z_e,bT:j_e,bU:B_e,bV:TEe,bW:JW,bX:PR,bY:xR,bZ:vEe,b_:ZW,ba:yz,bb:wz,bc:lz,bd:E2,be:v2,bf:w2,bg:$$,bh:gE,bi:C2,bj:n5,bk:Jh,bl:oH,bm:uH,bn:i5,bo:_2,bp:rH,bq:f2,br:N$,bs:e_,bt:W$,bu:Pr,bv:gf,bw:NL,bx:D$,by:j$,bz:id,c:d2,c$:jH,c0:GW,c1:Bp,c2:jT,c3:LH,c4:j2,c5:Xi,c6:q2,c7:r8,c8:z2,c9:Fl,get cA(){return Sk},cB:Z7,cC:Cwe,cD:b0,cE:Wwe,cF:Hwe,cG:Kwe,cH:ED,cI:bD,cJ:Swe,cK:Iwe,cL:REe,cM:s8,cN:rk,cO:yEe,cP:WW,cQ:$W,cR:mEe,cS:oR,cT:aR,cU:_f,cV:gEe,cW:O2,cX:qH,cY:$H,cZ:M_e,c_:BH,ca:BT,cb:sk,cc:uR,cd:YH,ce:MH,cf:IH,cg:y_e,ch:gH,ci:FH,cj:QH,ck:HW,cl:xf,cm:cR,cn:Iv,co:Nf,cp:Vb,cq:hR,cr:Dy,get cs(){return Ds},ct:zW,cu:_Ee,cv:pEe,cw:HH,get cx(){return kk},cy:Gwe,cz:zwe,d:a5,d0:O_e,d1:zH,d2:AH,d3:kH,d4:kEe,d5:$_e,d6:Sv,d7:I7,d8:nl,d9:Jme,dA:tF,dB:wh,dC:bh,dD:Ju,dE:Mf,dF:Eh,dG:_7,dH:v7,dI:C7,dJ:nF,dK:p7,dL:l7,dM:oD,dN:b7,dO:f7,dP:y7,dQ:m7,dR:s7,dS:c7,dT:T7,dU:wy,dV:YW,dW:XW,dX:l5e,dY:hnt,da:QW,db:P_e,dc:UH,dd:x2,de:k_e,df:LF,dg:xH,dh:RH,di:CEe,dj:d0,dk:PH,dl:F2,dm:n8,dn:WH,dp:K_e,dq:W_e,dr:N_e,ds:nk,dt:SEe,du:$me,dv:i8,dw:PEe,dx:L_e,dy:e8,dz:t8,e:nH,f:QL,g:Na,h:xA,i:HL,j:LL,k:T2,l:kh,m:KL,n:BL,o:He,p:st,q:xL,r:iR,s:H$,t:IT,u:OA,v:ST,w:Va,x:y2,y:lH,z:ji},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function a8(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ns={},Wb=[],Uh=()=>{},Xnt=()=>!1,MF=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),l8=t=>t.startsWith("onUpdate:"),Ti=Object.assign,u8=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Jnt=Object.prototype.hasOwnProperty,Un=(t,e)=>Jnt.call(t,e),pt=Array.isArray,Kb=t=>FF(t)==="[object Map]",OEe=t=>FF(t)==="[object Set]",Rt=t=>typeof t=="function",ur=t=>typeof t=="string",c_=t=>typeof t=="symbol",xs=t=>t!==null&&typeof t=="object",LEe=t=>(xs(t)||Rt(t))&&Rt(t.then)&&Rt(t.catch),MEe=Object.prototype.toString,FF=t=>MEe.call(t),Znt=t=>FF(t).slice(8,-1),FEe=t=>FF(t)==="[object Object]",c8=t=>ur(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,A0=a8(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),VF=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},est=/-(\w)/g,Kl=VF(t=>t.replace(est,(e,n)=>n?n.toUpperCase():"")),tst=/\B([A-Z])/g,hw=VF(t=>t.replace(tst,"-$1").toLowerCase()),UF=VF(t=>t.charAt(0).toUpperCase()+t.slice(1)),b6=VF(t=>t?`on${UF(t)}`:""),Ng=(t,e)=>!Object.is(t,e),E6=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},cj=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},nst=t=>{const e=parseFloat(t);return isNaN(e)?t:e},sst=t=>{const e=ur(t)?Number(t):NaN;return isNaN(e)?t:e};let wse;const qF=()=>wse||(wse=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jF(t){if(pt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ur(s)?ast(s):jF(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(ur(t)||xs(t))return t}const rst=/;(?![^(]*\))/g,ist=/:([^]+)/,ost=/\/\*[^]*?\*\//g;function ast(t){const e={};return t.replace(ost,"").split(rst).forEach(n=>{if(n){const s=n.split(ist);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function BF(t){let e="";if(ur(t))e=t;else if(pt(t))for(let n=0;n<t.length;n++){const s=BF(t[n]);s&&(e+=s+" ")}else if(xs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const lst="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ust=a8(lst);function VEe(t){return!!t||t===""}const UEe=t=>!!(t&&t.__v_isRef===!0),qEe=t=>ur(t)?t:t==null?"":pt(t)||xs(t)&&(t.toString===MEe||!Rt(t.toString))?UEe(t)?qEe(t.value):JSON.stringify(t,jEe,2):String(t),jEe=(t,e)=>UEe(e)?jEe(t,e.value):Kb(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[T6(s,i)+" =>"]=r,n),{})}:OEe(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>T6(n))}:c_(e)?T6(e):xs(e)&&!pt(e)&&!FEe(e)?String(e):e,T6=(t,e="")=>{var n;return c_(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let po;class BEe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=po,!e&&po&&(this.index=(po.scopes||(po.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=po;try{return po=this,e()}finally{po=n}}}on(){++this._on===1&&(this.prevScope=po,po=this)}off(){this._on>0&&--this._on===0&&(po=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function cst(t){return new BEe(t)}function $Ee(){return po}function hst(t,e=!1){po&&po.cleanups.push(t)}let hs;const C6=new WeakSet;class zEe{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,po&&po.active&&po.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,C6.has(this)&&(C6.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||WEe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,bse(this),KEe(this);const e=hs,n=Rc;hs=this,Rc=!0;try{return this.fn()}finally{GEe(this),hs=e,Rc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)f8(e);this.deps=this.depsTail=void 0,bse(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?C6.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hj(this)&&this.run()}get dirty(){return hj(this)}}let HEe=0,R0,P0;function WEe(t,e=!1){if(t.flags|=8,e){t.next=P0,P0=t;return}t.next=R0,R0=t}function h8(){HEe++}function d8(){if(--HEe>0)return;if(P0){let e=P0;for(P0=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;R0;){let e=R0;for(R0=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function KEe(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function GEe(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),f8(s),dst(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function hj(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(QEe(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function QEe(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ak)||(t.globalVersion=Ak,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!hj(t))))return;t.flags|=2;const e=t.dep,n=hs,s=Rc;hs=t,Rc=!0;try{KEe(t);const r=t.fn(t._value);(e.version===0||Ng(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{hs=n,Rc=s,GEe(t),t.flags&=-3}}function f8(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)f8(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function dst(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Rc=!0;const YEe=[];function qf(){YEe.push(Rc),Rc=!1}function jf(){const t=YEe.pop();Rc=t===void 0?!0:t}function bse(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=hs;hs=void 0;try{e()}finally{hs=n}}}let Ak=0;class fst{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class p8{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!hs||!Rc||hs===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==hs)n=this.activeLink=new fst(hs,this),hs.deps?(n.prevDep=hs.depsTail,hs.depsTail.nextDep=n,hs.depsTail=n):hs.deps=hs.depsTail=n,XEe(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=hs.depsTail,n.nextDep=void 0,hs.depsTail.nextDep=n,hs.depsTail=n,hs.deps===n&&(hs.deps=s)}return n}trigger(e){this.version++,Ak++,this.notify(e)}notify(e){h8();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{d8()}}}function XEe(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)XEe(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const MD=new WeakMap,nv=Symbol(""),dj=Symbol(""),Rk=Symbol("");function So(t,e,n){if(Rc&&hs){let s=MD.get(t);s||MD.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new p8),r.map=s,r.key=n),r.track()}}function Gd(t,e,n,s,r,i){const o=MD.get(t);if(!o){Ak++;return}const a=u=>{u&&u.trigger()};if(h8(),e==="clear")o.forEach(a);else{const u=pt(t),c=u&&c8(n);if(u&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===Rk||!c_(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Rk)),e){case"add":u?c&&a(o.get("length")):(a(o.get(nv)),Kb(t)&&a(o.get(dj)));break;case"delete":u||(a(o.get(nv)),Kb(t)&&a(o.get(dj)));break;case"set":Kb(t)&&a(o.get(nv));break}}d8()}function pst(t,e){const n=MD.get(t);return n&&n.get(e)}function Dw(t){const e=En(t);return e===t?e:(So(e,"iterate",Rk),Ul(t)?e:e.map(Wi))}function $F(t){return So(t=En(t),"iterate",Rk),t}const gst={__proto__:null,[Symbol.iterator](){return I6(this,Symbol.iterator,Wi)},concat(...t){return Dw(this).concat(...t.map(e=>pt(e)?Dw(e):e))},entries(){return I6(this,"entries",t=>(t[1]=Wi(t[1]),t))},every(t,e){return xd(this,"every",t,e,void 0,arguments)},filter(t,e){return xd(this,"filter",t,e,n=>n.map(Wi),arguments)},find(t,e){return xd(this,"find",t,e,Wi,arguments)},findIndex(t,e){return xd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xd(this,"findLast",t,e,Wi,arguments)},findLastIndex(t,e){return xd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xd(this,"forEach",t,e,void 0,arguments)},includes(...t){return S6(this,"includes",t)},indexOf(...t){return S6(this,"indexOf",t)},join(t){return Dw(this).join(t)},lastIndexOf(...t){return S6(this,"lastIndexOf",t)},map(t,e){return xd(this,"map",t,e,void 0,arguments)},pop(){return BC(this,"pop")},push(...t){return BC(this,"push",t)},reduce(t,...e){return Ese(this,"reduce",t,e)},reduceRight(t,...e){return Ese(this,"reduceRight",t,e)},shift(){return BC(this,"shift")},some(t,e){return xd(this,"some",t,e,void 0,arguments)},splice(...t){return BC(this,"splice",t)},toReversed(){return Dw(this).toReversed()},toSorted(t){return Dw(this).toSorted(t)},toSpliced(...t){return Dw(this).toSpliced(...t)},unshift(...t){return BC(this,"unshift",t)},values(){return I6(this,"values",Wi)}};function I6(t,e,n){const s=$F(t),r=s[e]();return s!==t&&!Ul(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const mst=Array.prototype;function xd(t,e,n,s,r,i){const o=$F(t),a=o!==t&&!Ul(t),u=o[e];if(u!==mst[e]){const d=u.apply(t,i);return a?Wi(d):d}let c=n;o!==t&&(a?c=function(d,p){return n.call(this,Wi(d),p,t)}:n.length>2&&(c=function(d,p){return n.call(this,d,p,t)}));const h=u.call(o,c,s);return a&&r?r(h):h}function Ese(t,e,n,s){const r=$F(t);let i=n;return r!==t&&(Ul(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,Wi(a),u,t)}),r[e](i,...s)}function S6(t,e,n){const s=En(t);So(s,"iterate",Rk);const r=s[e](...n);return(r===-1||r===!1)&&y8(n[0])?(n[0]=En(n[0]),s[e](...n)):r}function BC(t,e,n=[]){qf(),h8();const s=En(t)[e].apply(t,n);return d8(),jf(),s}const _st=a8("__proto__,__v_isRef,__isVue"),JEe=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(c_));function yst(t){c_(t)||(t=String(t));const e=En(this);return So(e,"has",t),e.hasOwnProperty(t)}class ZEe{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Ast:sTe:i?nTe:tTe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=pt(e);if(!r){let u;if(o&&(u=gst[n]))return u;if(n==="hasOwnProperty")return yst}const a=Reflect.get(e,n,$i(e)?e:s);return(c_(n)?JEe.has(n):_st(n))||(r||So(e,"get",n),i)?a:$i(a)?o&&c8(n)?a:a.value:xs(a)?r?rTe(a):dw(a):a}}class eTe extends ZEe{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=Tm(i);if(!Ul(s)&&!Tm(s)&&(i=En(i),s=En(s)),!pt(e)&&$i(i)&&!$i(s))return u?!1:(i.value=s,!0)}const o=pt(e)&&c8(n)?Number(n)<e.length:Un(e,n),a=Reflect.set(e,n,s,$i(e)?e:r);return e===En(r)&&(o?Ng(s,i)&&Gd(e,"set",n,s):Gd(e,"add",n,s)),a}deleteProperty(e,n){const s=Un(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Gd(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!c_(n)||!JEe.has(n))&&So(e,"has",n),s}ownKeys(e){return So(e,"iterate",pt(e)?"length":nv),Reflect.ownKeys(e)}}class vst extends ZEe{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const wst=new eTe,bst=new vst,Est=new eTe(!0),fj=t=>t,J1=t=>Reflect.getPrototypeOf(t);function Tst(t,e,n){return function(...s){const r=this.__v_raw,i=En(r),o=Kb(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),h=n?fj:e?FD:Wi;return!e&&So(i,"iterate",u?dj:nv),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function Z1(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Cst(t,e){const n={get(s){const r=this.__v_raw,i=En(r),o=En(s);t||(Ng(s,o)&&So(i,"get",s),So(i,"get",o));const{has:a}=J1(i),u=e?fj:t?FD:Wi;if(a.call(i,s))return u(r.get(s));if(a.call(i,o))return u(r.get(o));r!==i&&r.get(s)},get size(){const s=this.__v_raw;return!t&&So(En(s),"iterate",nv),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,i=En(r),o=En(s);return t||(Ng(s,o)&&So(i,"has",s),So(i,"has",o)),s===o?r.has(s):r.has(s)||r.has(o)},forEach(s,r){const i=this,o=i.__v_raw,a=En(o),u=e?fj:t?FD:Wi;return!t&&So(a,"iterate",nv),o.forEach((c,h)=>s.call(r,u(c),u(h),i))}};return Ti(n,t?{add:Z1("add"),set:Z1("set"),delete:Z1("delete"),clear:Z1("clear")}:{add(s){!e&&!Ul(s)&&!Tm(s)&&(s=En(s));const r=En(this);return J1(r).has.call(r,s)||(r.add(s),Gd(r,"add",s,s)),this},set(s,r){!e&&!Ul(r)&&!Tm(r)&&(r=En(r));const i=En(this),{has:o,get:a}=J1(i);let u=o.call(i,s);u||(s=En(s),u=o.call(i,s));const c=a.call(i,s);return i.set(s,r),u?Ng(r,c)&&Gd(i,"set",s,r):Gd(i,"add",s,r),this},delete(s){const r=En(this),{has:i,get:o}=J1(r);let a=i.call(r,s);a||(s=En(s),a=i.call(r,s)),o&&o.call(r,s);const u=r.delete(s);return a&&Gd(r,"delete",s,void 0),u},clear(){const s=En(this),r=s.size!==0,i=s.clear();return r&&Gd(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Tst(s,t,e)}),n}function g8(t,e){const n=Cst(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Un(n,r)&&r in s?n:s,r,i)}const Ist={get:g8(!1,!1)},Sst={get:g8(!1,!0)},kst={get:g8(!0,!1)},tTe=new WeakMap,nTe=new WeakMap,sTe=new WeakMap,Ast=new WeakMap;function Rst(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pst(t){return t.__v_skip||!Object.isExtensible(t)?0:Rst(Znt(t))}function dw(t){return Tm(t)?t:_8(t,!1,wst,Ist,tTe)}function m8(t){return _8(t,!1,Est,Sst,nTe)}function rTe(t){return _8(t,!0,bst,kst,sTe)}function _8(t,e,n,s,r){if(!xs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Pst(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function sv(t){return Tm(t)?sv(t.__v_raw):!!(t&&t.__v_isReactive)}function Tm(t){return!!(t&&t.__v_isReadonly)}function Ul(t){return!!(t&&t.__v_isShallow)}function y8(t){return t?!!t.__v_raw:!1}function En(t){const e=t&&t.__v_raw;return e?En(e):t}function ZT(t){return!Un(t,"__v_skip")&&Object.isExtensible(t)&&cj(t,"__v_skip",!0),t}const Wi=t=>xs(t)?dw(t):t,FD=t=>xs(t)?rTe(t):t;function $i(t){return t?t.__v_isRef===!0:!1}function Bf(t){return iTe(t,!1)}function xst(t){return iTe(t,!0)}function iTe(t,e){return $i(t)?t:new Nst(t,e)}class Nst{constructor(e,n){this.dep=new p8,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:En(e),this._value=n?e:Wi(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ul(e)||Tm(e);e=s?e:En(e),Ng(e,n)&&(this._rawValue=e,this._value=s?e:Wi(e),this.dep.trigger())}}function Dg(t){return $i(t)?t.value:t}const Dst={get:(t,e,n)=>e==="__v_raw"?t:Dg(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return $i(r)&&!$i(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function oTe(t){return sv(t)?t:new Proxy(t,Dst)}function Ost(t){const e=pt(t)?new Array(t.length):{};for(const n in t)e[n]=Mst(t,n);return e}class Lst{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return pst(En(this._object),this._key)}}function Mst(t,e,n){const s=t[e];return $i(s)?s:new Lst(t,e,n)}class Fst{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new p8(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ak-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&hs!==this)return WEe(this,!0),!0}get value(){const e=this.dep.track();return QEe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vst(t,e,n=!1){let s,r;return Rt(t)?s=t:(s=t.get,r=t.set),new Fst(s,r,n)}const eP={},VD=new WeakMap;let hy;function Ust(t,e=!1,n=hy){if(n){let s=VD.get(n);s||VD.set(n,s=[]),s.push(t)}}function qst(t,e,n=ns){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:u}=n,c=q=>r?q:Ul(q)||r===!1||r===0?Qd(q,1):Qd(q);let h,d,p,m,w=!1,k=!1;if($i(t)?(d=()=>t.value,w=Ul(t)):sv(t)?(d=()=>c(t),w=!0):pt(t)?(k=!0,w=t.some(q=>sv(q)||Ul(q)),d=()=>t.map(q=>{if($i(q))return q.value;if(sv(q))return c(q);if(Rt(q))return u?u(q,2):q()})):Rt(t)?e?d=u?()=>u(t,2):t:d=()=>{if(p){qf();try{p()}finally{jf()}}const q=hy;hy=h;try{return u?u(t,3,[m]):t(m)}finally{hy=q}}:d=Uh,e&&r){const q=d,H=r===!0?1/0:r;d=()=>Qd(q(),H)}const P=$Ee(),O=()=>{h.stop(),P&&P.active&&u8(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),O()}}let M=k?new Array(t.length).fill(eP):eP;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((J,I)=>Ng(J,M[I])):Ng(H,M))){p&&p();const J=hy;hy=h;try{const I=[H,M===eP?void 0:k&&M[0]===eP?[]:M,m];M=H,u?u(e,3,I):e(...I)}finally{hy=J}}}else h.run()};return a&&a(V),h=new zEe(d),h.scheduler=o?()=>o(V,!1):V,m=q=>Ust(q,!1,h),p=h.onStop=()=>{const q=VD.get(h);if(q){if(u)u(q,4);else for(const H of q)H();VD.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function Qd(t,e=1/0,n){if(e<=0||!xs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,$i(t))Qd(t.value,e,n);else if(pt(t))for(let s=0;s<t.length;s++)Qd(t[s],e,n);else if(OEe(t)||Kb(t))t.forEach(s=>{Qd(s,e,n)});else if(FEe(t)){for(const s in t)Qd(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Qd(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function NR(t,e,n,s){try{return s?t(...s):t()}catch(r){zF(r,e,n)}}function Hc(t,e,n,s){if(Rt(t)){const r=NR(t,e,n,s);return r&&LEe(r)&&r.catch(i=>{zF(i,e,n)}),r}if(pt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Hc(t[i],e,n,s));return r}}function zF(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ns;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,u,c)===!1)return}a=a.parent}if(i){qf(),NR(i,null,10,[t,u,c]),jf();return}}jst(t,n,r,s,o)}function jst(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const _a=[];let ch=-1;const Gb=[];let Hp=null,ib=0;const aTe=Promise.resolve();let UD=null;function v8(t){const e=UD||aTe;return t?e.then(this?t.bind(this):t):e}function Bst(t){let e=ch+1,n=_a.length;for(;e<n;){const s=e+n>>>1,r=_a[s],i=Pk(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function w8(t){if(!(t.flags&1)){const e=Pk(t),n=_a[_a.length-1];!n||!(t.flags&2)&&e>=Pk(n)?_a.push(t):_a.splice(Bst(e),0,t),t.flags|=1,lTe()}}function lTe(){UD||(UD=aTe.then(cTe))}function $st(t){pt(t)?Gb.push(...t):Hp&&t.id===-1?Hp.splice(ib+1,0,t):t.flags&1||(Gb.push(t),t.flags|=1),lTe()}function Tse(t,e,n=ch+1){for(;n<_a.length;n++){const s=_a[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;_a.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function uTe(t){if(Gb.length){const e=[...new Set(Gb)].sort((n,s)=>Pk(n)-Pk(s));if(Gb.length=0,Hp){Hp.push(...e);return}for(Hp=e,ib=0;ib<Hp.length;ib++){const n=Hp[ib];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hp=null,ib=0}}const Pk=t=>t.id==null?t.flags&2?-1:1/0:t.id;function cTe(t){try{for(ch=0;ch<_a.length;ch++){const e=_a[ch];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),NR(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ch<_a.length;ch++){const e=_a[ch];e&&(e.flags&=-2)}ch=-1,_a.length=0,uTe(),UD=null,(_a.length||Gb.length)&&cTe()}}let dl=null,hTe=null;function qD(t){const e=dl;return dl=t,hTe=t&&t.type.__scopeId||null,e}function dTe(t,e=dl,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Fse(-1);const i=qD(e);let o;try{o=t(...r)}finally{qD(i),s._d&&Fse(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function b8(t,e){if(dl===null)return t;const n=JF(dl),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,u=ns]=e[r];i&&(Rt(i)&&(i={mounted:i,updated:i}),i.deep&&Qd(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function Y_(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let u=a.dir[s];u&&(qf(),Hc(u,n,8,[t.el,a,t,e]),jf())}}const fTe=Symbol("_vte"),pTe=t=>t.__isTeleport,x0=t=>t&&(t.disabled||t.disabled===""),Cse=t=>t&&(t.defer||t.defer===""),Ise=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Sse=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,pj=(t,e)=>{const n=t&&t.to;return ur(n)?e?e(n):null:n},gTe={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,u,c){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=c,O=x0(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),J=e.anchor=k("");m(H,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,u))},v=()=>{const y=e.target=pj(e.props,w),T=mTe(y,e,k,m);y&&(o!=="svg"&&Ise(y)?o="svg":o!=="mathml"&&Sse(y)&&(o="mathml"),O||(I(y,T),fx(e,!1)))};O&&(I(n,J),fx(e,!0)),Cse(e.props)?(e.el.__isMounted=!1,da(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Cse(e.props)&&t.el.__isMounted===!1){da(()=>{gTe.process(t,e,n,s,r,i,o,a,u,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=x0(t.props),y=v?n:J,T=v?H:I;if(o==="svg"||Ise(J)?o="svg":(o==="mathml"||Sse(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),S8(t,e,!0)):u||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):tP(e,n,H,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=pj(e.props,w);S&&tP(e,S,null,c,0)}else v&&tP(e,J,I,c,1);fx(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:c,targetAnchor:h,target:d,props:p}=t;if(d&&(r(c),r(h)),i&&r(u),o&16){const m=i||!x0(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:tP,hydrate:zst};function tP(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||x0(h))&&u&16)for(let p=0;p<c.length;p++)r(c[p],e,n,2);d&&s(a,e,n)}function zst(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:c,createText:h}},d){const p=e.target=pj(e.props,u);if(p){const m=x0(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||mTe(p,e,h,c),d(w&&o(w),e,p,n,s,r,i)}fx(e,m)}return e.anchor&&o(e.anchor)}const Hst=gTe;function fx(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function mTe(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[fTe]=i,t&&(s(r,t),s(i,t)),i}const Wp=Symbol("_leaveCb"),nP=Symbol("_enterCb");function _Te(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return KF(()=>{t.isMounted=!0}),GF(()=>{t.isUnmounting=!0}),t}const Cl=[Function,Array],yTe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Cl,onEnter:Cl,onAfterEnter:Cl,onEnterCancelled:Cl,onBeforeLeave:Cl,onLeave:Cl,onAfterLeave:Cl,onLeaveCancelled:Cl,onBeforeAppear:Cl,onAppear:Cl,onAfterAppear:Cl,onAppearCancelled:Cl},vTe=t=>{const e=t.subTree;return e.component?vTe(e.component):e},Wst={name:"BaseTransition",props:yTe,setup(t,{slots:e}){const n=h_(),s=_Te();return()=>{const r=e.default&&E8(e.default(),!0);if(!r||!r.length)return;const i=wTe(r),o=En(t),{mode:a}=o;if(s.isLeaving)return k6(i);const u=kse(i);if(!u)return k6(i);let c=xk(u,o,s,n,d=>c=d);u.type!==ba&&Ov(u,c);let h=n.subTree&&kse(n.subTree);if(h&&h.type!==ba&&!by(u,h)&&vTe(n).type!==ba){let d=xk(h,o,s,n);if(Ov(h,d),a==="out-in"&&u.type!==ba)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},k6(i);a==="in-out"&&u.type!==ba?d.delayLeave=(p,m,w)=>{const k=bTe(s,h);k[String(h.key)]=h,p[Wp]=()=>{m(),p[Wp]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function wTe(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ba){e=n;break}}return e}const Kst=Wst;function bTe(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function xk(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=bTe(n,t),J=(y,T)=>{y&&Hc(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),pt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=u;if(!n.isMounted)if(i)T=P||u;else return;y[Wp]&&y[Wp](!0);const S=H[q];S&&by(t,S)&&S.el[Wp]&&S.el[Wp](),J(T,[y])},enter(y){let T=c,S=h,E=d;if(!n.isMounted)if(i)T=O||c,S=M||h,E=V||d;else return;let b=!1;const K=y[nP]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[nP]=void 0)};T?I(T,[y,K]):K()},leave(y,T){const S=String(t.key);if(y[nP]&&y[nP](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Wp]=K=>{E||(E=!0,T(),K?J(k,[y]):J(w,[y]),y[Wp]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const T=xk(y,e,n,s,r);return r&&r(T),T}};return v}function k6(t){if(HF(t))return t=Cm(t),t.children=null,t}function kse(t){if(!HF(t))return pTe(t.type)&&t.children?wTe(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Rt(n.default))return n.default()}}function Ov(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ov(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function E8(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Al?(o.patchFlag&128&&r++,s=s.concat(E8(o.children,e,a))):(e||o.type!==ba)&&s.push(a!=null?Cm(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function DR(t,e){return Rt(t)?Ti({name:t.name},e,{setup:t}):t}function ETe(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function N0(t,e,n,s,r=!1){if(pt(t)){t.forEach((w,k)=>N0(w,e&&(pt(e)?e[k]:e),n,s,r));return}if(D0(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&N0(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?JF(s.component):s.el,o=r?null:i,{i:a,r:u}=t,c=e&&e.r,h=a.refs===ns?a.refs={}:a.refs,d=a.setupState,p=En(d),m=d===ns?()=>!1:w=>Un(p,w);if(c!=null&&c!==u&&(ur(c)?(h[c]=null,m(c)&&(d[c]=null)):$i(c)&&(c.value=null)),Rt(u))NR(u,a,12,[o,h]);else{const w=ur(u),k=$i(u);if(w||k){const P=()=>{if(t.f){const O=w?m(u)?d[u]:h[u]:u.value;r?pt(O)&&u8(O,i):pt(O)?O.includes(i)||O.push(i):w?(h[u]=[i],m(u)&&(d[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else w?(h[u]=o,m(u)&&(d[u]=o)):k&&(u.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,da(P,n)):P()}}}qF().requestIdleCallback;qF().cancelIdleCallback;const D0=t=>!!t.type.__asyncLoader,HF=t=>t.type.__isKeepAlive;function TTe(t,e){ITe(t,"a",e)}function CTe(t,e){ITe(t,"da",e)}function ITe(t,e,n=Oo){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(WF(e,s,n),n){let r=n.parent;for(;r&&r.parent;)HF(r.parent.vnode)&&Gst(s,e,n,r),r=r.parent}}function Gst(t,e,n,s){const r=WF(e,t,s,!0);QF(()=>{u8(s[e],r)},n)}function WF(t,e,n=Oo,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{qf();const a=OR(n),u=Hc(e,n,t,o);return a(),jf(),u});return s?r.unshift(i):r.push(i),i}}const hp=t=>(e,n=Oo)=>{(!Dk||t==="sp")&&WF(t,(...s)=>e(...s),n)},STe=hp("bm"),KF=hp("m"),kTe=hp("bu"),T8=hp("u"),GF=hp("bum"),QF=hp("um"),Qst=hp("sp"),Yst=hp("rtg"),Xst=hp("rtc");function Jst(t,e=Oo){WF("ec",t,e)}const Zst="components";function ATe(t,e){return trt(Zst,t,!0,e)||t}const ert=Symbol.for("v-ndc");function trt(t,e,n=!0,s=!1){const r=dl||Oo;if(r){const i=r.type;{const a=zrt(i,!1);if(a&&(a===e||a===Kl(e)||a===UF(Kl(e))))return i}const o=Ase(r[t]||i[t],e)||Ase(r.appContext[t],e);return!o&&s?i:o}}function Ase(t,e){return t&&(t[e]||t[Kl(e)]||t[UF(Kl(e))])}function nrt(t,e,n,s){let r;const i=n,o=pt(t);if(o||ur(t)){const a=o&&sv(t);let u=!1,c=!1;a&&(u=!Ul(t),c=Tm(t),t=$F(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(u?c?FD(Wi(t[h])):Wi(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(xs(t))if(t[Symbol.iterator])r=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const h=a[u];r[u]=e(t[h],h,u,i)}}else r=[];return r}const gj=t=>t?YTe(t)?JF(t):gj(t.parent):null,O0=Ti(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>gj(t.parent),$root:t=>gj(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>PTe(t),$forceUpdate:t=>t.f||(t.f=()=>{w8(t.update)}),$nextTick:t=>t.n||(t.n=v8.bind(t.proxy)),$watch:t=>Crt.bind(t)}),A6=(t,e)=>t!==ns&&!t.__isScriptSetup&&Un(t,e),srt={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(A6(s,e))return o[e]=1,s[e];if(r!==ns&&Un(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Un(c,e))return o[e]=3,i[e];if(n!==ns&&Un(n,e))return o[e]=4,n[e];mj&&(o[e]=0)}}const h=O0[e];let d,p;if(h)return e==="$attrs"&&So(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ns&&Un(n,e))return o[e]=4,n[e];if(p=u.config.globalProperties,Un(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return A6(r,e)?(r[e]=n,!0):s!==ns&&Un(s,e)?(s[e]=n,!0):Un(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ns&&Un(t,o)||A6(e,o)||(a=i[0])&&Un(a,o)||Un(s,o)||Un(O0,o)||Un(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Un(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Rse(t){return pt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let mj=!0;function rrt(t){const e=PTe(t),n=t.proxy,s=t.ctx;mj=!1,e.beforeCreate&&Pse(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(c&&irt(c,s,null),o)for(const ae in o){const oe=o[ae];Rt(oe)&&(s[ae]=oe.bind(n))}if(r){const ae=r.call(n,n);xs(ae)&&(t.data=dw(ae))}if(mj=!0,i)for(const ae in i){const oe=i[ae],ve=Rt(oe)?oe.bind(n,n):Rt(oe.get)?oe.get.bind(n,n):Uh,Lt=!Rt(oe)&&Rt(oe.set)?oe.set.bind(n):Uh,nt=Qe({get:ve,set:Lt});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>nt.value,set:mt=>nt.value=mt})}if(a)for(const ae in a)RTe(a[ae],s,n,ae);if(u){const ae=Rt(u)?u.call(n):u;Reflect.ownKeys(ae).forEach(oe=>{L0(oe,ae[oe])})}h&&Pse(h,t,"c");function ne(ae,oe){pt(oe)?oe.forEach(ve=>ae(ve.bind(n))):oe&&ae(oe.bind(n))}if(ne(STe,d),ne(KF,p),ne(kTe,m),ne(T8,w),ne(TTe,k),ne(CTe,P),ne(Jst,v),ne(Xst,J),ne(Yst,I),ne(GF,M),ne(QF,q),ne(Qst,y),pt(T))if(T.length){const ae=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(ae,oe,{get:()=>n[oe],set:ve=>n[oe]=ve,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===Uh&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&ETe(t)}function irt(t,e,n=Uh){pt(t)&&(t=_j(t));for(const s in t){const r=t[s];let i;xs(r)?"default"in r?i=vl(r.from||s,r.default,!0):i=vl(r.from||s):i=vl(r),$i(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Pse(t,e,n){Hc(pt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function RTe(t,e,n,s){let r=s.includes(".")?BTe(n,s):()=>n[s];if(ur(t)){const i=e[t];Rt(i)&&Qb(r,i)}else if(Rt(t))Qb(r,t.bind(n));else if(xs(t))if(pt(t))t.forEach(i=>RTe(i,e,n,s));else{const i=Rt(t.handler)?t.handler.bind(n):e[t.handler];Rt(i)&&Qb(r,i,t)}}function PTe(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>jD(u,c,o,!0)),jD(u,e,o)),xs(e)&&i.set(e,u),u}function jD(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&jD(t,i,n,!0),r&&r.forEach(o=>jD(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=ort[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const ort={data:xse,props:Nse,emits:Nse,methods:TI,computed:TI,beforeCreate:la,created:la,beforeMount:la,mounted:la,beforeUpdate:la,updated:la,beforeDestroy:la,beforeUnmount:la,destroyed:la,unmounted:la,activated:la,deactivated:la,errorCaptured:la,serverPrefetch:la,components:TI,directives:TI,watch:lrt,provide:xse,inject:art};function xse(t,e){return e?t?function(){return Ti(Rt(t)?t.call(this,this):t,Rt(e)?e.call(this,this):e)}:e:t}function art(t,e){return TI(_j(t),_j(e))}function _j(t){if(pt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function la(t,e){return t?[...new Set([].concat(t,e))]:e}function TI(t,e){return t?Ti(Object.create(null),t,e):e}function Nse(t,e){return t?pt(t)&&pt(e)?[...new Set([...t,...e])]:Ti(Object.create(null),Rse(t),Rse(e??{})):e}function lrt(t,e){if(!t)return e;if(!e)return t;const n=Ti(Object.create(null),t);for(const s in e)n[s]=la(t[s],e[s]);return n}function xTe(){return{app:null,config:{isNativeTag:Xnt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let urt=0;function crt(t,e){return function(n,s=null){Rt(n)||(n=Ti({},n)),s!=null&&!xs(s)&&(s=null);const r=xTe(),i=new WeakSet,o=[];let a=!1;const u=r.app={_uid:urt++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Wrt,get config(){return r.config},set config(c){},use(c,...h){return i.has(c)||(c&&Rt(c.install)?(i.add(c),c.install(u,...h)):Rt(c)&&(i.add(c),c(u,...h))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,h){return h?(r.components[c]=h,u):r.components[c]},directive(c,h){return h?(r.directives[c]=h,u):r.directives[c]},mount(c,h,d){if(!a){const p=u._ceVNode||Mo(n,s);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),t(p,c,d),a=!0,u._container=c,c.__vue_app__=u,JF(p.component)}},onUnmount(c){o.push(c)},unmount(){a&&(Hc(o,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return r.provides[c]=h,u},runWithContext(c){const h=rv;rv=u;try{return c()}finally{rv=h}}};return u}}let rv=null;function L0(t,e){if(Oo){let n=Oo.provides;const s=Oo.parent&&Oo.parent.provides;s===n&&(n=Oo.provides=Object.create(s)),n[t]=e}}function vl(t,e,n=!1){const s=h_();if(s||rv){let r=rv?rv._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Rt(e)?e.call(s&&s.proxy):e}}function hrt(){return!!(h_()||rv)}const NTe={},DTe=()=>Object.create(NTe),OTe=t=>Object.getPrototypeOf(t)===NTe;function drt(t,e,n,s=!1){const r={},i=DTe();t.propsDefaults=Object.create(null),LTe(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:m8(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function frt(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=En(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(YF(t.emitsOptions,p))continue;const m=e[p];if(u)if(Un(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const w=Kl(p);r[w]=yj(u,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{LTe(t,e,r,i)&&(c=!0);let h;for(const d in a)(!e||!Un(e,d)&&((h=hw(d))===d||!Un(e,h)))&&(u?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=yj(u,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!Un(e,d))&&(delete i[d],c=!0)}c&&Gd(t.attrs,"set","")}function LTe(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(A0(u))continue;const c=e[u];let h;r&&Un(r,h=Kl(u))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:YF(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=En(n),c=a||ns;for(let h=0;h<i.length;h++){const d=i[h];n[d]=yj(r,u,d,c[d],t,!Un(c,d))}}return o}function yj(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Un(o,"default");if(a&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Rt(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=OR(r);s=c[n]=u.call(null,e),h()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===hw(n))&&(s=!0))}return s}const prt=new WeakMap;function MTe(t,e,n=!1){const s=n?prt:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let u=!1;if(!Rt(t)){const h=d=>{u=!0;const[p,m]=MTe(d,e,!0);Ti(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return xs(t)&&s.set(t,Wb),Wb;if(pt(i))for(let h=0;h<i.length;h++){const d=Kl(i[h]);Dse(d)&&(o[d]=ns)}else if(i)for(const h in i){const d=Kl(h);if(Dse(d)){const p=i[h],m=o[d]=pt(p)||Rt(p)?{type:p}:Ti({},p),w=m.type;let k=!1,P=!0;if(pt(w))for(let O=0;O<w.length;++O){const M=w[O],V=Rt(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=Rt(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||Un(m,"default"))&&a.push(d)}}const c=[o,a];return xs(t)&&s.set(t,c),c}function Dse(t){return t[0]!=="$"&&!A0(t)}const C8=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",I8=t=>pt(t)?t.map(yh):[yh(t)],grt=(t,e,n)=>{if(e._n)return e;const s=dTe((...r)=>I8(e(...r)),n);return s._c=!1,s},FTe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(C8(r))continue;const i=t[r];if(Rt(i))e[r]=grt(r,i,s);else if(i!=null){const o=I8(i);e[r]=()=>o}}},VTe=(t,e)=>{const n=I8(e);t.slots.default=()=>n},UTe=(t,e,n)=>{for(const s in e)(n||!C8(s))&&(t[s]=e[s])},mrt=(t,e,n)=>{const s=t.slots=DTe();if(t.vnode.shapeFlag&32){const r=e.__;r&&cj(s,"__",r,!0);const i=e._;i?(UTe(s,e,n),n&&cj(s,"_",i,!0)):FTe(e,s)}else e&&VTe(t,e)},_rt=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ns;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:UTe(r,e,n):(i=!e.$stable,FTe(e,r)),o=e}else e&&(VTe(t,e),o={default:1});if(i)for(const a in r)!C8(a)&&o[a]==null&&delete r[a]},da=xrt;function yrt(t){return vrt(t)}function vrt(t,e){const n=qF();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Uh,insertStaticContent:w}=t,k=(A,C,R,N=null,L=null,U=null,j=void 0,W=null,$=!!C.dynamicChildren)=>{if(A===C)return;A&&!by(A,C)&&(N=F(A),Te(A,L,U,!0),A=null),C.patchFlag===-2&&($=!1,C.dynamicChildren=null);const{type:B,ref:Q,shapeFlag:X}=C;switch(B){case XF:P(A,C,R,N);break;case ba:O(A,C,R,N);break;case P6:A==null&&M(C,R,N,j);break;case Al:E(A,C,R,N,L,U,j,W,$);break;default:X&1?H(A,C,R,N,L,U,j,W,$):X&6?b(A,C,R,N,L,U,j,W,$):(X&64||X&128)&&B.process(A,C,R,N,L,U,j,W,$,ee)}Q!=null&&L?N0(Q,A&&A.ref,U,C||A,!C):Q==null&&A&&A.ref!=null&&N0(A.ref,null,U,A,!0)},P=(A,C,R,N)=>{if(A==null)s(C.el=a(C.children),R,N);else{const L=C.el=A.el;C.children!==A.children&&c(L,C.children)}},O=(A,C,R,N)=>{A==null?s(C.el=u(C.children||""),R,N):C.el=A.el},M=(A,C,R,N)=>{[A.el,A.anchor]=w(A.children,C,R,N,A.el,A.anchor)},V=({el:A,anchor:C},R,N)=>{let L;for(;A&&A!==C;)L=p(A),s(A,R,N),A=L;s(C,R,N)},q=({el:A,anchor:C})=>{let R;for(;A&&A!==C;)R=p(A),r(A),A=R;r(C)},H=(A,C,R,N,L,U,j,W,$)=>{C.type==="svg"?j="svg":C.type==="math"&&(j="mathml"),A==null?J(C,R,N,L,U,j,W,$):y(A,C,L,U,j,W,$)},J=(A,C,R,N,L,U,j,W)=>{let $,B;const{props:Q,shapeFlag:X,transition:Z,dirs:te}=A;if($=A.el=o(A.type,U,Q&&Q.is,Q),X&8?h($,A.children):X&16&&v(A.children,$,null,N,L,R6(A,U),j,W),te&&Y_(A,null,N,"created"),I($,A,A.scopeId,j,N),Q){for(const re in Q)re!=="value"&&!A0(re)&&i($,re,null,Q[re],U,N);"value"in Q&&i($,"value",null,Q.value,U),(B=Q.onVnodeBeforeMount)&&Zc(B,N,A)}te&&Y_(A,null,N,"beforeMount");const ie=wrt(L,Z);ie&&Z.beforeEnter($),s($,C,R),((B=Q&&Q.onVnodeMounted)||ie||te)&&da(()=>{B&&Zc(B,N,A),ie&&Z.enter($),te&&Y_(A,null,N,"mounted")},L)},I=(A,C,R,N,L)=>{if(R&&m(A,R),N)for(let U=0;U<N.length;U++)m(A,N[U]);if(L){let U=L.subTree;if(C===U||zTe(U.type)&&(U.ssContent===C||U.ssFallback===C)){const j=L.vnode;I(A,j,j.scopeId,j.slotScopeIds,L.parent)}}},v=(A,C,R,N,L,U,j,W,$=0)=>{for(let B=$;B<A.length;B++){const Q=A[B]=W?Kp(A[B]):yh(A[B]);k(null,Q,C,R,N,L,U,j,W)}},y=(A,C,R,N,L,U,j)=>{const W=C.el=A.el;let{patchFlag:$,dynamicChildren:B,dirs:Q}=C;$|=A.patchFlag&16;const X=A.props||ns,Z=C.props||ns;let te;if(R&&X_(R,!1),(te=Z.onVnodeBeforeUpdate)&&Zc(te,R,C,A),Q&&Y_(C,A,R,"beforeUpdate"),R&&X_(R,!0),(X.innerHTML&&Z.innerHTML==null||X.textContent&&Z.textContent==null)&&h(W,""),B?T(A.dynamicChildren,B,W,R,N,R6(C,L),U):j||ve(A,C,W,null,R,N,R6(C,L),U,!1),$>0){if($&16)S(W,X,Z,R,L);else if($&2&&X.class!==Z.class&&i(W,"class",null,Z.class,L),$&4&&i(W,"style",X.style,Z.style,L),$&8){const ie=C.dynamicProps;for(let re=0;re<ie.length;re++){const se=ie[re],be=X[se],Ae=Z[se];(Ae!==be||se==="value")&&i(W,se,be,Ae,L,R)}}$&1&&A.children!==C.children&&h(W,C.children)}else!j&&B==null&&S(W,X,Z,R,L);((te=Z.onVnodeUpdated)||Q)&&da(()=>{te&&Zc(te,R,C,A),Q&&Y_(C,A,R,"updated")},N)},T=(A,C,R,N,L,U,j)=>{for(let W=0;W<C.length;W++){const $=A[W],B=C[W],Q=$.el&&($.type===Al||!by($,B)||$.shapeFlag&198)?d($.el):R;k($,B,Q,null,N,L,U,j,!0)}},S=(A,C,R,N,L)=>{if(C!==R){if(C!==ns)for(const U in C)!A0(U)&&!(U in R)&&i(A,U,C[U],null,L,N);for(const U in R){if(A0(U))continue;const j=R[U],W=C[U];j!==W&&U!=="value"&&i(A,U,W,j,L,N)}"value"in R&&i(A,"value",C.value,R.value,L)}},E=(A,C,R,N,L,U,j,W,$)=>{const B=C.el=A?A.el:a(""),Q=C.anchor=A?A.anchor:a("");let{patchFlag:X,dynamicChildren:Z,slotScopeIds:te}=C;te&&(W=W?W.concat(te):te),A==null?(s(B,R,N),s(Q,R,N),v(C.children||[],R,Q,L,U,j,W,$)):X>0&&X&64&&Z&&A.dynamicChildren?(T(A.dynamicChildren,Z,R,L,U,j,W),(C.key!=null||L&&C===L.subTree)&&S8(A,C,!0)):ve(A,C,R,Q,L,U,j,W,$)},b=(A,C,R,N,L,U,j,W,$)=>{C.slotScopeIds=W,A==null?C.shapeFlag&512?L.ctx.activate(C,R,N,j,$):K(C,R,N,L,U,j,$):ne(A,C,$)},K=(A,C,R,N,L,U,j)=>{const W=A.component=Urt(A,N,L);if(HF(A)&&(W.ctx.renderer=ee),qrt(W,!1,j),W.asyncDep){if(L&&L.registerDep(W,ae,j),!A.el){const $=W.subTree=Mo(ba);O(null,$,C,R),A.placeholder=$.el}}else ae(W,A,C,R,L,U,j)},ne=(A,C,R)=>{const N=C.component=A.component;if(Rrt(A,C,R))if(N.asyncDep&&!N.asyncResolved){oe(N,C,R);return}else N.next=C,N.update();else C.el=A.el,N.vnode=C},ae=(A,C,R,N,L,U,j)=>{const W=()=>{if(A.isMounted){let{next:X,bu:Z,u:te,parent:ie,vnode:re}=A;{const tt=qTe(A);if(tt){X&&(X.el=re.el,oe(A,X,j)),tt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let se=X,be;X_(A,!1),X?(X.el=re.el,oe(A,X,j)):X=re,Z&&E6(Z),(be=X.props&&X.props.onVnodeBeforeUpdate)&&Zc(be,ie,X,re),X_(A,!0);const Ae=Lse(A),Ue=A.subTree;A.subTree=Ae,k(Ue,Ae,d(Ue.el),F(Ue),A,L,U),X.el=Ae.el,se===null&&Prt(A,Ae.el),te&&da(te,L),(be=X.props&&X.props.onVnodeUpdated)&&da(()=>Zc(be,ie,X,re),L)}else{let X;const{el:Z,props:te}=C,{bm:ie,m:re,parent:se,root:be,type:Ae}=A,Ue=D0(C);X_(A,!1),ie&&E6(ie),!Ue&&(X=te&&te.onVnodeBeforeMount)&&Zc(X,se,C),X_(A,!0);{be.ce&&be.ce._def.shadowRoot!==!1&&be.ce._injectChildStyle(Ae);const tt=A.subTree=Lse(A);k(null,tt,R,N,A,L,U),C.el=tt.el}if(re&&da(re,L),!Ue&&(X=te&&te.onVnodeMounted)){const tt=C;da(()=>Zc(X,se,tt),L)}(C.shapeFlag&256||se&&D0(se.vnode)&&se.vnode.shapeFlag&256)&&A.a&&da(A.a,L),A.isMounted=!0,C=R=N=null}};A.scope.on();const $=A.effect=new zEe(W);A.scope.off();const B=A.update=$.run.bind($),Q=A.job=$.runIfDirty.bind($);Q.i=A,Q.id=A.uid,$.scheduler=()=>w8(Q),X_(A,!0),B()},oe=(A,C,R)=>{C.component=A;const N=A.vnode.props;A.vnode=C,A.next=null,frt(A,C.props,N,R),_rt(A,C.children,R),qf(),Tse(A),jf()},ve=(A,C,R,N,L,U,j,W,$=!1)=>{const B=A&&A.children,Q=A?A.shapeFlag:0,X=C.children,{patchFlag:Z,shapeFlag:te}=C;if(Z>0){if(Z&128){nt(B,X,R,N,L,U,j,W,$);return}else if(Z&256){Lt(B,X,R,N,L,U,j,W,$);return}}te&8?(Q&16&&Ve(B,L,U),X!==B&&h(R,X)):Q&16?te&16?nt(B,X,R,N,L,U,j,W,$):Ve(B,L,U,!0):(Q&8&&h(R,""),te&16&&v(X,R,N,L,U,j,W,$))},Lt=(A,C,R,N,L,U,j,W,$)=>{A=A||Wb,C=C||Wb;const B=A.length,Q=C.length,X=Math.min(B,Q);let Z;for(Z=0;Z<X;Z++){const te=C[Z]=$?Kp(C[Z]):yh(C[Z]);k(A[Z],te,R,null,L,U,j,W,$)}B>Q?Ve(A,L,U,!0,!1,X):v(C,R,N,L,U,j,W,$,X)},nt=(A,C,R,N,L,U,j,W,$)=>{let B=0;const Q=C.length;let X=A.length-1,Z=Q-1;for(;B<=X&&B<=Z;){const te=A[B],ie=C[B]=$?Kp(C[B]):yh(C[B]);if(by(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;B++}for(;B<=X&&B<=Z;){const te=A[X],ie=C[Z]=$?Kp(C[Z]):yh(C[Z]);if(by(te,ie))k(te,ie,R,null,L,U,j,W,$);else break;X--,Z--}if(B>X){if(B<=Z){const te=Z+1,ie=te<Q?C[te].el:N;for(;B<=Z;)k(null,C[B]=$?Kp(C[B]):yh(C[B]),R,ie,L,U,j,W,$),B++}}else if(B>Z)for(;B<=X;)Te(A[B],L,U,!0),B++;else{const te=B,ie=B,re=new Map;for(B=ie;B<=Z;B++){const ze=C[B]=$?Kp(C[B]):yh(C[B]);ze.key!=null&&re.set(ze.key,B)}let se,be=0;const Ae=Z-ie+1;let Ue=!1,tt=0;const Ye=new Array(Ae);for(B=0;B<Ae;B++)Ye[B]=0;for(B=te;B<=X;B++){const ze=A[B];if(be>=Ae){Te(ze,L,U,!0);continue}let Me;if(ze.key!=null)Me=re.get(ze.key);else for(se=ie;se<=Z;se++)if(Ye[se-ie]===0&&by(ze,C[se])){Me=se;break}Me===void 0?Te(ze,L,U,!0):(Ye[Me-ie]=B+1,Me>=tt?tt=Me:Ue=!0,k(ze,C[Me],R,null,L,U,j,W,$),be++)}const ls=Ue?brt(Ye):Wb;for(se=ls.length-1,B=Ae-1;B>=0;B--){const ze=ie+B,Me=C[ze],Qn=C[ze+1],Fr=ze+1<Q?Qn.el||Qn.placeholder:N;Ye[B]===0?k(null,Me,R,Fr,L,U,j,W,$):Ue&&(se<0||B!==ls[se]?mt(Me,R,Fr,2):se--)}}},mt=(A,C,R,N,L=null)=>{const{el:U,type:j,transition:W,children:$,shapeFlag:B}=A;if(B&6){mt(A.component.subTree,C,R,N);return}if(B&128){A.suspense.move(C,R,N);return}if(B&64){j.move(A,C,R,ee);return}if(j===Al){s(U,C,R);for(let Q=0;Q<$.length;Q++)mt($[Q],C,R,N);s(A.anchor,C,R);return}if(j===P6){V(A,C,R);return}if(N!==2&&B&1&&W)if(N===0)W.beforeEnter(U),s(U,C,R),da(()=>W.enter(U),L);else{const{leave:Q,delayLeave:X,afterLeave:Z}=W,te=()=>{A.ctx.isUnmounted?r(U):s(U,C,R)},ie=()=>{Q(U,()=>{te(),Z&&Z()})};X?X(U,te,ie):ie()}else s(U,C,R)},Te=(A,C,R,N=!1,L=!1)=>{const{type:U,props:j,ref:W,children:$,dynamicChildren:B,shapeFlag:Q,patchFlag:X,dirs:Z,cacheIndex:te}=A;if(X===-2&&(L=!1),W!=null&&(qf(),N0(W,null,R,A,!0),jf()),te!=null&&(C.renderCache[te]=void 0),Q&256){C.ctx.deactivate(A);return}const ie=Q&1&&Z,re=!D0(A);let se;if(re&&(se=j&&j.onVnodeBeforeUnmount)&&Zc(se,C,A),Q&6)Mt(A.component,R,N);else{if(Q&128){A.suspense.unmount(R,N);return}ie&&Y_(A,null,C,"beforeUnmount"),Q&64?A.type.remove(A,C,R,ee,N):B&&!B.hasOnce&&(U!==Al||X>0&&X&64)?Ve(B,C,R,!1,!0):(U===Al&&X&384||!L&&Q&16)&&Ve($,C,R),N&&we(A)}(re&&(se=j&&j.onVnodeUnmounted)||ie)&&da(()=>{se&&Zc(se,C,A),ie&&Y_(A,null,C,"unmounted")},R)},we=A=>{const{type:C,el:R,anchor:N,transition:L}=A;if(C===Al){fn(R,N);return}if(C===P6){q(A);return}const U=()=>{r(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(A.shapeFlag&1&&L&&!L.persisted){const{leave:j,delayLeave:W}=L,$=()=>j(R,U);W?W(A.el,U,$):$()}else U()},fn=(A,C)=>{let R;for(;A!==C;)R=p(A),r(A),A=R;r(C)},Mt=(A,C,R)=>{const{bum:N,scope:L,job:U,subTree:j,um:W,m:$,a:B,parent:Q,slots:{__:X}}=A;Ose($),Ose(B),N&&E6(N),Q&&pt(X)&&X.forEach(Z=>{Q.renderCache[Z]=void 0}),L.stop(),U&&(U.flags|=8,Te(j,A,C,R)),W&&da(W,C),da(()=>{A.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Ve=(A,C,R,N=!1,L=!1,U=0)=>{for(let j=U;j<A.length;j++)Te(A[j],C,R,N,L)},F=A=>{if(A.shapeFlag&6)return F(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const C=p(A.anchor||A.el),R=C&&C[fTe];return R?p(R):C};let Y=!1;const G=(A,C,R)=>{A==null?C._vnode&&Te(C._vnode,null,null,!0):k(C._vnode||null,A,C,null,null,null,R),C._vnode=A,Y||(Y=!0,Tse(),uTe(),Y=!1)},ee={p:k,um:Te,m:mt,r:we,mt:K,mc:v,pc:ve,pbc:T,n:F,o:t};return{render:G,hydrate:void 0,createApp:crt(G)}}function R6({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function X_({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function wrt(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function S8(t,e,n=!1){const s=t.children,r=e.children;if(pt(s)&&pt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Kp(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&S8(o,a)),a.type===XF&&(a.el=o.el),a.type===ba&&!a.el&&(a.el=o.el)}}function brt(t){const e=t.slice(),n=[0];let s,r,i,o,a;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function qTe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qTe(e)}function Ose(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ert=Symbol.for("v-scx"),Trt=()=>vl(Ert);function Qb(t,e,n){return jTe(t,e,n)}function jTe(t,e,n=ns){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ti({},n),u=e&&s||!e&&i!=="post";let c;if(Dk){if(i==="sync"){const m=Trt();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=Uh,m.resume=Uh,m.pause=Uh,m}}const h=Oo;a.call=(m,w,k)=>Hc(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{da(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():w8(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=qst(t,e,a);return Dk&&(c?c.push(p):u&&p()),p}function Crt(t,e,n){const s=this.proxy,r=ur(t)?t.includes(".")?BTe(s,t):()=>s[t]:t.bind(s,s);let i;Rt(e)?i=e:(i=e.handler,n=e);const o=OR(this),a=jTe(r,i.bind(s),n);return o(),a}function BTe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Irt=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Kl(e)}Modifiers`]||t[`${hw(e)}Modifiers`];function Srt(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ns;let r=n;const i=e.startsWith("update:"),o=i&&Irt(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>ur(h)?h.trim():h)),o.number&&(r=n.map(nst)));let a,u=s[a=b6(e)]||s[a=b6(Kl(e))];!u&&i&&(u=s[a=b6(hw(e))]),u&&Hc(u,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Hc(c,t,6,r)}}function $Te(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Rt(t)){const u=c=>{const h=$Te(c,e,!0);h&&(a=!0,Ti(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(xs(t)&&s.set(t,null),null):(pt(i)?i.forEach(u=>o[u]=null):Ti(o,i),xs(t)&&s.set(t,o),o)}function YF(t,e){return!t||!MF(e)?!1:(e=e.slice(2).replace(/Once$/,""),Un(t,e[0].toLowerCase()+e.slice(1))||Un(t,hw(e))||Un(t,e))}function Lse(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=qD(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,H=q;O=yh(c.call(H,q,h,d,m,p,w)),M=a}else{const q=e;O=yh(q.length>1?q(d,{attrs:a,slots:o,emit:u}):q(d,null)),M=e.props?a:krt(a)}}catch(q){M0.length=0,zF(q,t,1),O=Mo(ba)}let V=O;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(l8)&&(M=Art(M,i)),V=Cm(V,M,!1,!0))}return n.dirs&&(V=Cm(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Ov(V,n.transition),O=V,qD(P),O}const krt=t=>{let e;for(const n in t)(n==="class"||n==="style"||MF(n))&&((e||(e={}))[n]=t[n]);return e},Art=(t,e)=>{const n={};for(const s in t)(!l8(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Rrt(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?Mse(s,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!YF(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Mse(s,o,c):!0:!!o;return!1}function Mse(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!YF(n,i))return!0}return!1}function Prt({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const zTe=t=>t.__isSuspense;function xrt(t,e){e&&e.pendingBranch?pt(t)?e.effects.push(...t):e.effects.push(t):$st(t)}const Al=Symbol.for("v-fgt"),XF=Symbol.for("v-txt"),ba=Symbol.for("v-cmt"),P6=Symbol.for("v-stc"),M0=[];let fl=null;function k8(t=!1){M0.push(fl=t?null:[])}function Nrt(){M0.pop(),fl=M0[M0.length-1]||null}let Nk=1;function Fse(t,e=!1){Nk+=t,t<0&&fl&&e&&(fl.hasOnce=!0)}function HTe(t){return t.dynamicChildren=Nk>0?fl||Wb:null,Nrt(),Nk>0&&fl&&fl.push(t),t}function WTe(t,e,n,s,r,i){return HTe(A8(t,e,n,s,r,i,!0))}function KTe(t,e,n,s,r){return HTe(Mo(t,e,n,s,r,!0))}function BD(t){return t?t.__v_isVNode===!0:!1}function by(t,e){return t.type===e.type&&t.key===e.key}const GTe=({key:t})=>t??null,px=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ur(t)||$i(t)||Rt(t)?{i:dl,r:t,k:e,f:!!n}:t:null);function A8(t,e=null,n=null,s=0,r=null,i=t===Al?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&GTe(e),ref:e&&px(e),scopeId:hTe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:dl};return a?(R8(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=ur(n)?8:16),Nk>0&&!o&&fl&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&fl.push(u),u}const Mo=Drt;function Drt(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===ert)&&(t=ba),BD(t)){const a=Cm(t,e,!0);return n&&R8(a,n),Nk>0&&!i&&fl&&(a.shapeFlag&6?fl[fl.indexOf(t)]=a:fl.push(a)),a.patchFlag=-2,a}if(Hrt(t)&&(t=t.__vccOpts),e){e=Ort(e);let{class:a,style:u}=e;a&&!ur(a)&&(e.class=BF(a)),xs(u)&&(y8(u)&&!pt(u)&&(u=Ti({},u)),e.style=jF(u))}const o=ur(t)?1:zTe(t)?128:pTe(t)?64:xs(t)?4:Rt(t)?2:0;return A8(t,e,n,s,r,o,i,!0)}function Ort(t){return t?y8(t)||OTe(t)?Ti({},t):t:null}function Cm(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?Mrt(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&GTe(c),ref:e&&e.ref?n&&i?pt(i)?i.concat(px(e)):[i,px(e)]:px(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Al?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Cm(t.ssContent),ssFallback:t.ssFallback&&Cm(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&Ov(h,u.clone(h)),h}function QTe(t=" ",e=0){return Mo(XF,null,t,e)}function Lrt(t="",e=!1){return e?(k8(),KTe(ba,null,t)):Mo(ba,null,t)}function yh(t){return t==null||typeof t=="boolean"?Mo(ba):pt(t)?Mo(Al,null,t.slice()):BD(t)?Kp(t):Mo(XF,null,String(t))}function Kp(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Cm(t)}function R8(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(pt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),R8(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!OTe(e)?e._ctx=dl:r===3&&dl&&(dl.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Rt(e)?(e={default:e,_ctx:dl},n=32):(e=String(e),s&64?(n=16,e=[QTe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Mrt(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=BF([e.class,s.class]));else if(r==="style")e.style=jF([e.style,s.style]);else if(MF(r)){const i=e[r],o=s[r];o&&i!==o&&!(pt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Zc(t,e,n,s=null){Hc(t,e,7,[n,s])}const Frt=xTe();let Vrt=0;function Urt(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Frt,i={uid:Vrt++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new BEe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:MTe(s,r),emitsOptions:$Te(s,r),emit:null,emitted:null,propsDefaults:ns,inheritAttrs:s.inheritAttrs,ctx:ns,data:ns,props:ns,attrs:ns,slots:ns,refs:ns,setupState:ns,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Srt.bind(null,i),t.ce&&t.ce(i),i}let Oo=null;const h_=()=>Oo||dl;let $D,vj;{const t=qF(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};$D=e("__VUE_INSTANCE_SETTERS__",n=>Oo=n),vj=e("__VUE_SSR_SETTERS__",n=>Dk=n)}const OR=t=>{const e=Oo;return $D(t),t.scope.on(),()=>{t.scope.off(),$D(e)}},Vse=()=>{Oo&&Oo.scope.off(),$D(null)};function YTe(t){return t.vnode.shapeFlag&4}let Dk=!1;function qrt(t,e=!1,n=!1){e&&vj(e);const{props:s,children:r}=t.vnode,i=YTe(t);drt(t,s,i,e),mrt(t,r,n||e);const o=i?jrt(t,e):void 0;return e&&vj(!1),o}function jrt(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,srt);const{setup:s}=n;if(s){qf();const r=t.setupContext=s.length>1?$rt(t):null,i=OR(t),o=NR(s,t,0,[t.props,r]),a=LEe(o);if(jf(),i(),(a||t.sp)&&!D0(t)&&ETe(t),a){if(o.then(Vse,Vse),e)return o.then(u=>{Use(t,u)}).catch(u=>{zF(u,t,0)});t.asyncDep=o}else Use(t,o)}else XTe(t)}function Use(t,e,n){Rt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:xs(e)&&(t.setupState=oTe(e)),XTe(t)}function XTe(t,e,n){const s=t.type;t.render||(t.render=s.render||Uh);{const r=OR(t);qf();try{rrt(t)}finally{jf(),r()}}}const Brt={get(t,e){return So(t,"get",""),t[e]}};function $rt(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Brt),slots:t.slots,emit:t.emit,expose:e}}function JF(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(oTe(ZT(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in O0)return O0[n](t)},has(e,n){return n in e||n in O0}})):t.proxy}function zrt(t,e=!0){return Rt(t)?t.displayName||t.name:t.name||e&&t.__name}function Hrt(t){return Rt(t)&&"__vccOpts"in t}const Qe=(t,e)=>Vst(t,e,Dk);function vt(t,e,n){const s=arguments.length;return s===2?xs(e)&&!pt(e)?BD(e)?Mo(t,null,[e]):Mo(t,e):Mo(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&BD(n)&&(n=[n]),Mo(t,e,n))}const Wrt="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wj;const qse=typeof window<"u"&&window.trustedTypes;if(qse)try{wj=qse.createPolicy("vue",{createHTML:t=>t})}catch{}const JTe=wj?t=>wj.createHTML(t):t=>t,Krt="http://www.w3.org/2000/svg",Grt="http://www.w3.org/1998/Math/MathML",jd=typeof document<"u"?document:null,jse=jd&&jd.createElement("template"),Qrt={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?jd.createElementNS(Krt,t):e==="mathml"?jd.createElementNS(Grt,t):n?jd.createElement(t,{is:n}):jd.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>jd.createTextNode(t),createComment:t=>jd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>jd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{jse.innerHTML=JTe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=jse.content;if(s==="svg"||s==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Tp="transition",$C="animation",GE=Symbol("_vtc"),ZTe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},eCe=Ti({},yTe,ZTe),Yrt=t=>(t.displayName="Transition",t.props=eCe,t),tCe=Yrt((t,{slots:e})=>vt(Kst,nCe(t),e)),J_=(t,e=[])=>{pt(t)?t.forEach(n=>n(...e)):t&&t(...e)},Bse=t=>t?pt(t)?t.some(e=>e.length>1):t.length>1:!1;function nCe(t){const e={};for(const E in t)E in ZTe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=Xrt(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,xp(E,b?h:a),xp(E,b?c:o),K&&K()},T=(E,b)=>{E._isLeaving=!1,xp(E,d),xp(E,m),xp(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,ae=()=>y(b,E,K);J_(ne,[b,ae]),$se(()=>{xp(b,E?u:i),ih(b,E?h:a),Bse(ne)||zse(b,s,k,ae)})};return Ti(e,{onBeforeEnter(E){J_(O,[E]),ih(E,i),ih(E,o)},onBeforeAppear(E){J_(J,[E]),ih(E,u),ih(E,c)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>T(E,b);ih(E,d),E._enterCancelled?(ih(E,p),bj()):(bj(),ih(E,p)),$se(()=>{E._isLeaving&&(xp(E,d),ih(E,m),Bse(q)||zse(E,s,P,K))}),J_(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),J_(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),J_(v,[E])},onLeaveCancelled(E){T(E),J_(H,[E])}})}function Xrt(t){if(t==null)return null;if(xs(t))return[x6(t.enter),x6(t.leave)];{const e=x6(t);return[e,e]}}function x6(t){return sst(t)}function ih(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[GE]||(t[GE]=new Set)).add(e)}function xp(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[GE];n&&(n.delete(e),n.size||(t[GE]=void 0))}function $se(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Jrt=0;function zse(t,e,n,s){const r=t._endId=++Jrt,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=sCe(t,e);if(!o)return s();const c=o+"end";let h=0;const d=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++h>=u&&d()};setTimeout(()=>{h<u&&d()},a+1),t.addEventListener(c,p)}function sCe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${Tp}Delay`),i=s(`${Tp}Duration`),o=Hse(r,i),a=s(`${$C}Delay`),u=s(`${$C}Duration`),c=Hse(a,u);let h=null,d=0,p=0;e===Tp?o>0&&(h=Tp,d=o,p=i.length):e===$C?c>0&&(h=$C,d=c,p=u.length):(d=Math.max(o,c),h=d>0?o>c?Tp:$C:null,p=h?h===Tp?i.length:u.length:0);const m=h===Tp&&/\b(transform|all)(,|$)/.test(s(`${Tp}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function Hse(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Wse(n)+Wse(t[s])))}function Wse(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function bj(){return document.body.offsetHeight}function Zrt(t,e,n){const s=t[GE];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const zD=Symbol("_vod"),rCe=Symbol("_vsh"),eit={beforeMount(t,{value:e},{transition:n}){t[zD]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):zC(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),zC(t,!0),s.enter(t)):s.leave(t,()=>{zC(t,!1)}):zC(t,e))},beforeUnmount(t,{value:e}){zC(t,e)}};function zC(t,e){t.style.display=e?t[zD]:"none",t[rCe]=!e}const tit=Symbol(""),nit=/(^|;)\s*display\s*:/;function sit(t,e,n){const s=t.style,r=ur(n);let i=!1;if(n&&!r){if(e)if(ur(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&gx(s,a,"")}else for(const o in e)n[o]==null&&gx(s,o,"");for(const o in n)o==="display"&&(i=!0),gx(s,o,n[o])}else if(r){if(e!==n){const o=s[tit];o&&(n+=";"+o),s.cssText=n,i=nit.test(n)}}else e&&t.removeAttribute("style");zD in t&&(t[zD]=i?s.display:"",t[rCe]&&(s.display="none"))}const Kse=/\s*!important$/;function gx(t,e,n){if(pt(n))n.forEach(s=>gx(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=rit(t,e);Kse.test(n)?t.setProperty(hw(s),n.replace(Kse,""),"important"):t[s]=n}}const Gse=["Webkit","Moz","ms"],N6={};function rit(t,e){const n=N6[e];if(n)return n;let s=Kl(e);if(s!=="filter"&&s in t)return N6[e]=s;s=UF(s);for(let r=0;r<Gse.length;r++){const i=Gse[r]+s;if(i in t)return N6[e]=i}return e}const Qse="http://www.w3.org/1999/xlink";function Yse(t,e,n,s,r,i=ust(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Qse,e.slice(6,e.length)):t.setAttributeNS(Qse,e,n):n==null||i&&!VEe(n)?t.removeAttribute(e):t.setAttribute(e,i?"":c_(n)?String(n):n)}function Xse(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?JTe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=VEe(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function iit(t,e,n,s){t.addEventListener(e,n,s)}function oit(t,e,n,s){t.removeEventListener(e,n,s)}const Jse=Symbol("_vei");function ait(t,e,n,s,r=null){const i=t[Jse]||(t[Jse]={}),o=i[e];if(s&&o)o.value=s;else{const[a,u]=lit(e);if(s){const c=i[e]=hit(s,r);iit(t,a,c,u)}else o&&(oit(t,a,o,u),i[e]=void 0)}}const Zse=/(?:Once|Passive|Capture)$/;function lit(t){let e;if(Zse.test(t)){e={};let n;for(;n=t.match(Zse);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hw(t.slice(2)),e]}let D6=0;const uit=Promise.resolve(),cit=()=>D6||(uit.then(()=>D6=0),D6=Date.now());function hit(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Hc(dit(s,n.value),e,5,[s])};return n.value=t,n.attached=cit(),n}function dit(t,e){if(pt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const ere=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,fit=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Zrt(t,s,o):e==="style"?sit(t,n,s):MF(e)?l8(e)||ait(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pit(t,e,s,o))?(Xse(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Yse(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ur(s))?Xse(t,Kl(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Yse(t,e,s,o))};function pit(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&ere(e)&&Rt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ere(e)&&ur(n)?!1:e in t}const iCe=new WeakMap,oCe=new WeakMap,HD=Symbol("_moveCb"),tre=Symbol("_enterCb"),git=t=>(delete t.props.mode,t),mit=git({name:"TransitionGroup",props:Ti({},eCe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=h_(),s=_Te();let r,i;return T8(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!bit(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(yit),r.forEach(vit);const a=r.filter(wit);bj(),a.forEach(u=>{const c=u.el,h=c.style;ih(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=c[HD]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",d),c[HD]=null,xp(c,o))};c.addEventListener("transitionend",d)}),r=[]}),()=>{const o=En(t),a=nCe(o);let u=o.tag||Al;if(r=[],i)for(let c=0;c<i.length;c++){const h=i[c];h.el&&h.el instanceof Element&&(r.push(h),Ov(h,xk(h,a,s,n)),iCe.set(h,h.el.getBoundingClientRect()))}i=e.default?E8(e.default()):[];for(let c=0;c<i.length;c++){const h=i[c];h.key!=null&&Ov(h,xk(h,a,s,n))}return Mo(u,null,i)}}}),_it=mit;function yit(t){const e=t.el;e[HD]&&e[HD](),e[tre]&&e[tre]()}function vit(t){oCe.set(t,t.el.getBoundingClientRect())}function wit(t){const e=iCe.get(t),n=oCe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function bit(t,e,n){const s=t.cloneNode(),r=t[GE];r&&r.forEach(a=>{a.split(/\s+/).forEach(u=>u&&s.classList.remove(u))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=sCe(s);return i.removeChild(s),o}const Eit=["ctrl","shift","alt","meta"],Tit={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Eit.some(n=>t[`${n}Key`]&&!e.includes(n))},Cit=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Tit[e[o]];if(a&&a(r,e))return}return t(r,...i)})},Iit=Ti({patchProp:fit},Qrt);let nre;function Sit(){return nre||(nre=yrt(Iit))}const aCe=(...t)=>{const e=Sit().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=Ait(s);if(!r)return;const i=e._component;!Rt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,kit(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function kit(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ait(t){return ur(t)?document.querySelector(t):t}function LR(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function Rit(t,e){for(const n in e)LR(t,n,e[n]);return t}const Im=Bf(!1);let Ej;function Pit(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function xit(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const lCe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function Nit(t){const e=t.toLowerCase(),n=xit(e),s=Pit(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),Im.value===!0&&(Ej={is:{...r}}),lCe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const sre=navigator.userAgent||navigator.vendor||window.opera,Dit={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Pc={userAgent:sre,is:Nit(sre),has:{touch:lCe},within:{iframe:window.self!==window.top}},WD={install(t){const{$q:e}=t;Im.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Pc),Im.value=!1}),e.platform=dw(this)):e.platform=this}};{let t;LR(Pc.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(WD,Pc),Im.value===!0&&(Object.assign(WD,Ej,Dit),Ej=null)}function eC(t){return ZT(DR(t))}function uCe(t){return ZT(t)}const ZF=(t,e)=>{const n=dw(t);for(const s in t)LR(e,s,()=>n[s],r=>{n[s]=r});return e},Sm={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Sm,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function QE(){}function Oit(t){return t.button===0}function cCe(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function Lit(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function P8(t){t.stopPropagation()}function KD(t){t.cancelable!==!1&&t.preventDefault()}function dy(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function Mit(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",KD,Sm.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",KD,Sm.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function hCe(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],Sm[r[3]])})}function dCe(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],Sm[s[3]])}),t[n]=void 0)}function fCe(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const O6=["sm","md","lg","xl"],{passive:rre}=Sm,Fit=ZF({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:QE,setDebounce:QE,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Pc.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,u={},c=16;this.setSizes=d=>{O6.forEach(p=>{d[p]!==void 0&&(u[p]=d[p])})},this.setDebounce=d=>{c=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&O6.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{O6.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,rre),a=p>0?fCe(this.__update,p):this.__update,s.addEventListener("resize",a,rre)},this.setDebounce(c),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Im.value===!0?e.push(h):h()}}),uo=ZF({isActive:!1,mode:!1},{__media:void 0,set(t){uo.mode=t,t==="auto"?(uo.__media===void 0&&(uo.__media=window.matchMedia("(prefers-color-scheme: dark)"),uo.__updateMedia=()=>{uo.set("auto")},uo.__media.addListener(uo.__updateMedia)),t=uo.__media.matches):uo.__media!==void 0&&(uo.__media.removeListener(uo.__updateMedia),uo.__media=void 0),uo.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){uo.set(uo.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function Vit(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let pCe=!1;function Uit(t){pCe=t.isComposing===!0}function gCe(t){return pCe===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function GD(t,e){return gCe(t)===!0?!1:[].concat(e).includes(t.keyCode)}function mCe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function qit({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=mCe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function jit(){const{is:t}=Pc,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=mCe(t);r!==void 0&&n.add(`platform-${r}`)}}Pc.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Pc.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function Bit(t){for(const e in t)Vit(e,t[e])}const $it={install(t){if(this.__installed!==!0){if(Im.value===!0)jit();else{const{$q:e}=t;e.config.brand!==void 0&&Bit(e.config.brand);const n=qit(Pc,e.config);document.body.classList.add.apply(document.body.classList,n)}Pc.is.ios===!0&&document.body.addEventListener("touchstart",QE),window.addEventListener("keydown",Uit,!0)}}},_Ce=()=>!0;function zit(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function Hit(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function Wit(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return _Ce;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(zit).map(Hit)),()=>e.includes(window.location.hash)}const yCe={__history:[],add:QE,remove:QE,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Pc.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=_Ce),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=Wit(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},ire={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function ore(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Gp=ZF({__qLang:{}},{getLocale:ore,set(t=ire,e){const n={...t,rtl:t.rtl===!0,getLocale:ore};{if(n.set=Gp.set,Gp.__langConfig===void 0||Gp.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Gp.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Gp.__qLang,Gp.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||ire))}}),Kit={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},QD=ZF({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=QD.set,Object.assign(QD.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,LR(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||Kit))}}),vCe="_q_",Git="_q_l_",Qit="_q_pc_",Yit="_q_fo_";function Xit(){}const YD={};let wCe=!1;function Jit(){wCe=!0}function mx(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(mx(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(mx(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(mx(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function YE(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function Zit(t){return Object.prototype.toString.call(t)==="[object Date]"}function eot(t){return typeof t=="number"&&isFinite(t)}const are=[WD,$it,uo,Fit,yCe,Gp,QD];function tot(t,e){const n=aCe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function lre(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function not(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(vCe,n.$q),lre(n,are),e.components!==void 0&&Object.values(e.components).forEach(s=>{YE(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{YE(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&lre(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&are.includes(s)===!1)),Im.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const sot=function(t,e={}){const n={version:"2.18.2"};wCe===!1?(e.config!==void 0&&Object.assign(YD,e.config),n.config={...YD},Jit()):n.config=e.config||{},not(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},rot={name:"Quasar",version:"2.18.2",install:sot,lang:Gp,iconSet:QD};/*!
* vue-router v4.5.1
* (c) 2025 Eduardo San Martin Morote
* @license MIT
*/const ob=typeof document<"u";function bCe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function iot(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&bCe(t.default)}const Ln=Object.assign;function L6(t,e){const n={};for(const s in e){const r=e[s];n[s]=Wc(r)?r.map(t):t(r)}return n}const F0=()=>{},Wc=Array.isArray,ECe=/#/g,oot=/&/g,aot=/\//g,lot=/=/g,uot=/\?/g,TCe=/\+/g,cot=/%5B/g,hot=/%5D/g,CCe=/%5E/g,dot=/%60/g,ICe=/%7B/g,fot=/%7C/g,SCe=/%7D/g,pot=/%20/g;function x8(t){return encodeURI(""+t).replace(fot,"|").replace(cot,"[").replace(hot,"]")}function got(t){return x8(t).replace(ICe,"{").replace(SCe,"}").replace(CCe,"^")}function Tj(t){return x8(t).replace(TCe,"%2B").replace(pot,"+").replace(ECe,"%23").replace(oot,"%26").replace(dot,"`").replace(ICe,"{").replace(SCe,"}").replace(CCe,"^")}function mot(t){return Tj(t).replace(lot,"%3D")}function _ot(t){return x8(t).replace(ECe,"%23").replace(uot,"%3F")}function yot(t){return t==null?"":_ot(t).replace(aot,"%2F")}function Ok(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const vot=/\/$/,wot=t=>t.replace(vot,"");function M6(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Cot(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Ok(o)}}function bot(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ure(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Eot(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&XE(e.matched[s],n.matched[r])&&kCe(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function XE(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function kCe(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Tot(t[n],e[n]))return!1;return!0}function Tot(t,e){return Wc(t)?cre(t,e):Wc(e)?cre(e,t):t===e}function cre(t,e){return Wc(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Cot(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Cp={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lk;(function(t){t.pop="pop",t.push="push"})(Lk||(Lk={}));var V0;(function(t){t.back="back",t.forward="forward",t.unknown=""})(V0||(V0={}));function Iot(t){if(!t)if(ob){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),wot(t)}const Sot=/^[^#]+#/;function kot(t,e){return t.replace(Sot,"#")+e}function Aot(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const eV=()=>({left:window.scrollX,top:window.scrollY});function Rot(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=Aot(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function hre(t,e){return(history.state?history.state.position-e:-1)+t}const Cj=new Map;function Pot(t,e){Cj.set(t,e)}function xot(t){const e=Cj.get(t);return Cj.delete(t),e}let Not=()=>location.protocol+"//"+location.host;function ACe(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),ure(a,"")}return ure(n,t)+s+r}function Dot(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=ACe(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:Lk.pop,direction:P?P>0?V0.forward:V0.back:V0.unknown})})};function u(){o=n.value}function c(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Ln({},p.state,{scroll:eV()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:d}}function dre(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?eV():null}}function Oot(t){const{history:e,location:n}=window,s={value:ACe(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+u:Not()+t+u;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(u,c){const h=Ln({},e.state,dre(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,h,!0),s.value=u}function a(u,c){const h=Ln({},r.value,e.state,{forward:u,scroll:eV()});i(h.current,h,!0);const d=Ln({},dre(s.value,u,null),{position:h.position+1},c);i(u,d,!1),s.value=u}return{location:s,state:r,push:a,replace:o}}function Lot(t){t=Iot(t);const e=Oot(t),n=Dot(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Ln({location:"",base:t,go:s,createHref:kot.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Mot(t){return typeof t=="string"||t&&typeof t=="object"}function RCe(t){return typeof t=="string"||typeof t=="symbol"}const PCe=Symbol("");var fre;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(fre||(fre={}));function JE(t,e){return Ln(new Error,{type:t,[PCe]:!0},e)}function Nd(t,e){return t instanceof Error&&PCe in t&&(e==null||!!(t.type&e))}const pre="[^/]+?",Fot={sensitive:!1,strict:!1,start:!0,end:!0},Vot=/[.+*?^${}()[\]/\\]/g;function Uot(t,e){const n=Ln({},Fot,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const p=c[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(Vot,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:O}=p;i.push({name:w,repeatable:k,optional:P});const M=O||pre;if(M!==pre){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&c.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function u(c){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,O=w in c?c[w]:"";if(Wc(O)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Wc(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:u}}function qot(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function xCe(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=qot(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(gre(s))return 1;if(gre(r))return-1}return r.length-s.length}function gre(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const jot={type:0,value:""},Bot=/[a-zA-Z0-9_]/;function $ot(t){if(!t)return[[]];if(t==="/")return[[jot]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,u,c="",h="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&d(),o()):u===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:u==="("?n=2:Bot.test(u)?p():(d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function zot(t,e,n){const s=Uot($ot(t.path),n),r=Ln(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Hot(t,e){const n=[],s=new Map;e=vre({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=_re(d);k.aliasOf=m&&m.record;const P=vre(e,d),O=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)O.push(_re(Ln({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of O){const{path:H}=q;if(p&&H[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=zot(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!yre(M)&&o(d.name)),NCe(M)&&u(M),k.children){const J=k.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:F0}function o(d){if(RCe(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function u(d){const p=Got(d,n);n.splice(p,0,d),d.record.name&&!yre(d)&&s.set(d.record.name,d)}function c(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw JE(1,{location:d});P=m.record.name,w=Ln(mre(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&mre(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw JE(1,{location:d,currentLocation:p});P=m.record.name,w=Ln({},p.params,d.params),k=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:O,meta:Kot(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function mre(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function _re(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Wot(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Wot(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function yre(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Kot(t){return t.reduce((e,n)=>Ln(e,n.meta),{})}function vre(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function Got(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;xCe(t,e[i])<0?s=i:n=i+1}const r=Qot(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function Qot(t){let e=t;for(;e=e.parent;)if(NCe(e)&&xCe(t,e)===0)return e}function NCe({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Yot(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(TCe," "),i=r.indexOf("="),o=Ok(i<0?r:r.slice(0,i)),a=i<0?null:Ok(r.slice(i+1));if(o in e){let u=e[o];Wc(u)||(u=e[o]=[u]),u.push(a)}else e[o]=a}return e}function wre(t){let e="";for(let n in t){const s=t[n];if(n=mot(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Wc(s)?s.map(r=>r&&Tj(r)):[s&&Tj(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function Xot(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Wc(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const Jot=Symbol(""),bre=Symbol(""),tV=Symbol(""),N8=Symbol(""),Ij=Symbol("");function HC(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Qp(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,u)=>{const c=p=>{p===!1?u(JE(4,{from:n,to:e})):p instanceof Error?u(p):Mot(p)?u(JE(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,c));let d=Promise.resolve(h);t.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function F6(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(bCe(u)){const c=(u.__vccOpts||u)[e];c&&i.push(Qp(c,n,s,o,a,r))}else{let c=u();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=iot(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Qp(p,n,s,o,a,r)()}))}}return i}function Ere(t){const e=vl(tV),n=vl(N8),s=Qe(()=>{const u=Dg(t.to);return e.resolve(u)}),r=Qe(()=>{const{matched:u}=s.value,{length:c}=u,h=u[c-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(XE.bind(null,h));if(p>-1)return p;const m=Tre(u[c-2]);return c>1&&Tre(h)===m&&d[d.length-1].path!==m?d.findIndex(XE.bind(null,u[c-2])):p}),i=Qe(()=>r.value>-1&&sat(n.params,s.value.params)),o=Qe(()=>r.value>-1&&r.value===n.matched.length-1&&kCe(n.params,s.value.params));function a(u={}){if(nat(u)){const c=e[Dg(t.replace)?"replace":"push"](Dg(t.to)).catch(F0);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Qe(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function Zot(t){return t.length===1?t[0]:t}const eat=DR({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ere,setup(t,{slots:e}){const n=dw(Ere(t)),{options:s}=vl(tV),r=Qe(()=>({[Cre(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Cre(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Zot(e.default(n));return t.custom?i:vt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),tat=eat;function nat(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function sat(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Wc(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Tre(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Cre=(t,e,n)=>t??e??n,rat=DR({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=vl(Ij),r=Qe(()=>t.route||s.value),i=vl(bre,0),o=Qe(()=>{let c=Dg(i);const{matched:h}=r.value;let d;for(;(d=h[c])&&!d.components;)c++;return c}),a=Qe(()=>r.value.matched[o.value]);L0(bre,Qe(()=>o.value+1)),L0(Jot,a),L0(Ij,r);const u=Bf();return Qb(()=>[u.value,a.value,t.name],([c,h,d],[p,m,w])=>{h&&(h.instances[d]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!XE(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(c))},{flush:"post"}),()=>{const c=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return Ire(n.default,{Component:p,route:c});const m=d.props[h],w=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=vt(p,Ln({},w,e,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(d.instances[h]=null)},ref:u}));return Ire(n.default,{Component:k,route:c})||k}}});function Ire(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const iat=rat;function oat(t){const e=Hot(t.routes,t),n=t.parseQuery||Yot,s=t.stringifyQuery||wre,r=t.history,i=HC(),o=HC(),a=HC(),u=xst(Cp);let c=Cp;ob&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=L6.bind(null,F=>""+F),d=L6.bind(null,yot),p=L6.bind(null,Ok);function m(F,Y){let G,ee;return RCe(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Y){if(Y=Ln({},Y||u.value),typeof F=="string"){const N=M6(n,F,Y.path),L=e.resolve({path:N.path},Y),U=r.createHref(N.fullPath);return Ln(N,L,{params:p(L.params),hash:Ok(N.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Ln({},F,{path:M6(n,F.path,Y.path).path});else{const N=Ln({},F.params);for(const L in N)N[L]==null&&delete N[L];G=Ln({},F,{params:d(N)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const C=bot(s,Ln({},F,{hash:got(A),path:ee.path})),R=r.createHref(C);return Ln({fullPath:C,hash:A,query:s===wre?Xot(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?M6(n,F,u.value.path):Ln({},F)}function V(F,Y){if(c!==F)return JE(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Ln(M(F),{replace:!0}))}function J(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Ln({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=c=O(F),ee=u.value,A=F.state,C=F.force,R=F.replace===!0,N=J(G);if(N)return I(Ln(M(N),{state:typeof N=="object"?Ln({},A,N.state):A,force:C,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!C&&Eot(s,ee,G)&&(U=JE(16,{to:L,from:ee}),mt(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Nd(j)?Nd(j,2)?j:nt(j):ve(j,L,ee)).then(j=>{if(j){if(Nd(j,2))return I(Ln({replace:R},M(j.to),{state:typeof j.to=="object"?Ln({},A,j.to.state):A,force:C}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=fn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function T(F,Y){let G;const[ee,A,C]=aat(F,Y);G=F6(ee.reverse(),"beforeRouteLeave",F,Y);for(const N of ee)N.leaveGuards.forEach(L=>{G.push(Qp(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),Ve(G).then(()=>{G=[];for(const N of i.list())G.push(Qp(N,F,Y));return G.push(R),Ve(G)}).then(()=>{G=F6(A,"beforeRouteUpdate",F,Y);for(const N of A)N.updateGuards.forEach(L=>{G.push(Qp(L,F,Y))});return G.push(R),Ve(G)}).then(()=>{G=[];for(const N of C)if(N.beforeEnter)if(Wc(N.beforeEnter))for(const L of N.beforeEnter)G.push(Qp(L,F,Y));else G.push(Qp(N.beforeEnter,F,Y));return G.push(R),Ve(G)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),G=F6(C,"beforeRouteEnter",F,Y,y),G.push(R),Ve(G))).then(()=>{G=[];for(const N of o.list())G.push(Qp(N,F,Y));return G.push(R),Ve(G)}).catch(N=>Nd(N,8)?N:Promise.reject(N))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const C=V(F,Y);if(C)return C;const R=Y===Cp,N=ob?history.state:{};G&&(ee||R?r.replace(F.fullPath,Ln({scroll:R&&N&&N.scroll},A)):r.push(F.fullPath,A)),u.value=F,mt(F,Y,G,R),nt()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Mt.listening)return;const ee=O(F),A=J(ee);if(A){I(Ln(A,{replace:!0,force:!0}),ee).catch(F0);return}c=ee;const C=u.value;ob&&Pot(hre(C.fullPath,G.delta),eV()),T(ee,C).catch(R=>Nd(R,12)?R:Nd(R,2)?(I(Ln(M(R.to),{force:!0}),ee).then(N=>{Nd(N,20)&&!G.delta&&G.type===Lk.pop&&r.go(-1,!1)}).catch(F0),Promise.reject()):(G.delta&&r.go(-G.delta,!1),ve(R,ee,C))).then(R=>{R=R||E(ee,C,!1),R&&(G.delta&&!Nd(R,8)?r.go(-G.delta,!1):G.type===Lk.pop&&Nd(R,20)&&r.go(-1,!1)),S(ee,C,R)}).catch(F0)}))}let ne=HC(),ae=HC(),oe;function ve(F,Y,G){nt(F);const ee=ae.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Lt(){return oe&&u.value!==Cp?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function nt(F){return oe||(oe=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function mt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!ob||!A)return Promise.resolve();const C=!G&&xot(hre(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return v8().then(()=>A(F,Y,C)).then(R=>R&&Rot(R)).catch(R=>ve(R,F,Y))}const Te=F=>r.go(F);let we;const fn=new Set,Mt={currentRoute:u,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:O,options:t,push:q,replace:H,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Lt,install(F){const Y=this;F.component("RouterLink",tat),F.component("RouterView",iat),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Dg(u)}),ob&&!we&&u.value===Cp&&(we=!0,q(r.location).catch(A=>{}));const G={};for(const A in Cp)Object.defineProperty(G,A,{get:()=>u.value[A],enumerable:!0});F.provide(tV,Y),F.provide(N8,m8(G)),F.provide(Ij,u);const ee=F.unmount;fn.add(F),F.unmount=function(){fn.delete(F),fn.size<1&&(c=Cp,b&&b(),b=null,u.value=Cp,we=!1,oe=!1),ee()}}};function Ve(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Mt}function aat(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>XE(c,a))?s.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>XE(c,u))||r.push(u))}return[n,s,r]}function DCe(){return vl(tV)}function OCe(t){return vl(N8)}const lat=()=>{};var Sre={};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const LCe={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Se=function(t,e){if(!t)throw tC(e)},tC=function(t){return new Error("Firebase Database ("+LCe.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const MCe=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},uat=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},D8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(MCe(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uat(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const a=r<t.length?n[t.charAt(r)]:64;++r;const u=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||a==null||u==null)throw new cat;const c=i<<2|o>>4;if(s.push(c),a!==64){const h=o<<4&240|a>>2;if(s.push(h),u!==64){const d=a<<6&192|u;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cat extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FCe=function(t){const e=MCe(t);return D8.encodeByteArray(e,!0)},XD=function(t){return FCe(t).replace(/\./g,"")},JD=function(t){try{return D8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hat(t){return VCe(void 0,t)}function VCe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!dat(n)||(t[n]=VCe(t[n],e[n]));return t}function dat(t){return t!=="__proto__"}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fat(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pat=()=>fat().__FIREBASE_DEFAULTS__,gat=()=>{if(typeof process>"u"||typeof Sre>"u")return;const t=Sre.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mat=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JD(t[1]);return e&&JSON.parse(e)},nV=()=>{try{return lat()||pat()||gat()||mat()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UCe=t=>nV()?.emulatorHosts?.[t],O8=t=>{const e=UCe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},qCe=()=>nV()?.config,jCe=t=>nV()?.[`_${t}`];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Td(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rV(t){return(await fetch(t,{credentials:"include"})).ok}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L8(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[XD(JSON.stringify(n)),XD(JSON.stringify(o)),""].join(".")}const U0={};function _at(){const t={prod:[],emulator:[]};for(const e of Object.keys(U0))U0[e]?t.emulator.push(e):t.prod.push(e);return t}function yat(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kre=!1;function iV(t,e){if(typeof window>"u"||typeof document>"u"||!Td(window.location.host)||U0[t]===e||U0[t]||kre)return;U0[t]=e;function n(d){return`__firebase__banner__${d}`}const s="__firebase__banner",r=_at().prod.length>0;function i(){const d=document.getElementById(s);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{kre=!0,i()},d}function c(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=yat(s),p=n("text"),m=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),k=document.getElementById(w)||document.createElement("a"),P=n("preprendIcon"),O=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const M=d.element;o(M),c(k,w);const V=u();a(O,P),M.append(O,m,k,V),document.body.appendChild(M)}r?(m.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qo())}function vat(){const t=nV()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wat(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bat(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BCe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Eat(){const t=qo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Tat(){return LCe.NODE_ADMIN===!0}function Cat(){return!vat()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Iat(){try{return typeof indexedDB=="object"}catch{return!1}}function Sat(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kat="FirebaseError";class Cd extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=kat,Object.setPrototypeOf(this,Cd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,MR.prototype.create)}}class MR{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Aat(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Cd(r,a,s)}}function Aat(t,e){return t.replace(Rat,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Rat=/\{\$([^}]+)}/g;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mk(t){return JSON.parse(t)}function hi(t){return JSON.stringify(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const $Ce=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=Mk(JD(i[0])||""),n=Mk(JD(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},Pat=function(t){const e=$Ce(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},xat=function(t){const e=$Ce(t).claims;return typeof e=="object"&&e.admin===!0};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ZE(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Sj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ZD(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function km(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Are(i)&&Are(o)){if(!km(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Are(t){return t!==null&&typeof t=="object"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nC(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nat{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+c+u+h+s[d]&4294967295;u=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function Dat(t,e){const n=new Oat(t,e);return n.subscribe.bind(n)}class Oat{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Lat(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=V6),r.error===void 0&&(r.error=V6),r.complete===void 0&&(r.complete=V6);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lat(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function V6(){}function F8(t,e){return`${t} failed: ${e} argument `}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mat=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,Se(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},oV=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Kn(t){return t&&t._delegate?t._delegate:t}class $f{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fy="[DEFAULT]";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fat{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new sV;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uat(e))try{this.getOrInitializeService({instanceIdentifier:fy})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=fy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fy){return this.instances.has(e)}getOptions(e=fy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Vat(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=fy){return this.component?this.component.multipleInstances?e:fy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Vat(t){return t===fy?void 0:t}function Uat(t){return t.instantiationMode==="EAGER"}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qat{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Fat(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const jat={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},Bat=Gt.INFO,$at={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},zat=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=$at[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class aV{constructor(e){this.name=e,this._logLevel=Bat,this._logHandler=zat,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jat[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const Hat=(t,e)=>e.some(n=>t instanceof n);let Rre,Pre;function Wat(){return Rre||(Rre=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kat(){return Pre||(Pre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zCe=new WeakMap,kj=new WeakMap,HCe=new WeakMap,U6=new WeakMap,V8=new WeakMap;function Gat(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Og(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zCe.set(n,t)}).catch(()=>{}),V8.set(e,t),e}function Qat(t){if(kj.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});kj.set(t,e)}let Aj={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kj.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HCe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Og(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yat(t){Aj=t(Aj)}function Xat(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(q6(this),e,...n);return HCe.set(s,e.sort?e.sort():[e]),Og(s)}:Kat().includes(t)?function(...e){return t.apply(q6(this),e),Og(zCe.get(this))}:function(...e){return Og(t.apply(q6(this),e))}}function Jat(t){return typeof t=="function"?Xat(t):(t instanceof IDBTransaction&&Qat(t),Hat(t,Wat())?new Proxy(t,Aj):t)}function Og(t){if(t instanceof IDBRequest)return Gat(t);if(U6.has(t))return U6.get(t);const e=Jat(t);return e!==t&&(U6.set(t,e),V8.set(e,t)),e}const q6=t=>V8.get(t);function Zat(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Og(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Og(o.result),u.oldVersion,u.newVersion,Og(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const elt=["get","getKey","getAll","getAllKeys","count"],tlt=["put","add","delete","clear"],j6=new Map;function xre(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(j6.get(e))return j6.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=tlt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||elt.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&u.done]))[0]};return j6.set(e,i),i}Yat(t=>({...t,get:(e,n,s)=>xre(e,n)||t.get(e,n,s),has:(e,n)=>!!xre(e,n)||t.has(e,n)}));/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nlt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(slt(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function slt(t){return t.getComponent()?.type==="VERSION"}const Rj="@firebase/app",Nre="0.14.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const zf=new aV("@firebase/app"),rlt="@firebase/app-compat",ilt="@firebase/analytics-compat",olt="@firebase/analytics",alt="@firebase/app-check-compat",llt="@firebase/app-check",ult="@firebase/auth",clt="@firebase/auth-compat",hlt="@firebase/database",dlt="@firebase/data-connect",flt="@firebase/database-compat",plt="@firebase/functions",glt="@firebase/functions-compat",mlt="@firebase/installations",_lt="@firebase/installations-compat",ylt="@firebase/messaging",vlt="@firebase/messaging-compat",wlt="@firebase/performance",blt="@firebase/performance-compat",Elt="@firebase/remote-config",Tlt="@firebase/remote-config-compat",Clt="@firebase/storage",Ilt="@firebase/storage-compat",Slt="@firebase/firestore",klt="@firebase/ai",Alt="@firebase/firestore-compat",Rlt="firebase",Plt="12.0.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Pj="[DEFAULT]",xlt={[Rj]:"fire-core",[rlt]:"fire-core-compat",[olt]:"fire-analytics",[ilt]:"fire-analytics-compat",[llt]:"fire-app-check",[alt]:"fire-app-check-compat",[ult]:"fire-auth",[clt]:"fire-auth-compat",[hlt]:"fire-rtdb",[dlt]:"fire-data-connect",[flt]:"fire-rtdb-compat",[plt]:"fire-fn",[glt]:"fire-fn-compat",[mlt]:"fire-iid",[_lt]:"fire-iid-compat",[ylt]:"fire-fcm",[vlt]:"fire-fcm-compat",[wlt]:"fire-perf",[blt]:"fire-perf-compat",[Elt]:"fire-rc",[Tlt]:"fire-rc-compat",[Clt]:"fire-gcs",[Ilt]:"fire-gcs-compat",[Slt]:"fire-fst",[Alt]:"fire-fst-compat",[klt]:"fire-vertex","fire-js":"fire-js",[Rlt]:"fire-js-all"};/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eO=new Map,Nlt=new Map,xj=new Map;function Dre(t,e){try{t.container.addComponent(e)}catch(n){zf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Am(t){const e=t.name;if(xj.has(e))return zf.debug(`There were multiple attempts to register component ${e}.`),!1;xj.set(e,t);for(const n of eO.values())Dre(n,t);for(const n of Nlt.values())Dre(n,t);return!0}function FR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function il(t){return t==null?!1:t.settings!==void 0}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Dlt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lg=new MR("app","Firebase",Dlt);/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Olt{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $f("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lg.create("app-deleted",{appName:this._name})}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const d_=Plt;function WCe(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Pj,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Lg.create("bad-app-name",{appName:String(r)});if(n||(n=qCe()),!n)throw Lg.create("no-options");const i=eO.get(r);if(i){if(km(n,i.options)&&km(s,i.config))return i;throw Lg.create("duplicate-app",{appName:r})}const o=new qat(r);for(const u of xj.values())o.addComponent(u);const a=new Olt(n,s,o);return eO.set(r,a),a}function lV(t=Pj){const e=eO.get(t);if(!e&&t===Pj&&qCe())return WCe();if(!e)throw Lg.create("no-app",{appName:t});return e}function ql(t,e,n){let s=xlt[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zf.warn(o.join(" "));return}Am(new $f(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Llt="firebase-heartbeat-database",Mlt=1,Fk="firebase-heartbeat-store";let B6=null;function KCe(){return B6||(B6=Zat(Llt,Mlt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fk)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lg.create("idb-open",{originalErrorMessage:t.message})})),B6}async function Flt(t){try{const e=(await KCe()).transaction(Fk),n=await e.objectStore(Fk).get(GCe(t));return await e.done,n}catch(e){if(e instanceof Cd)zf.warn(e.message);else{const n=Lg.create("idb-get",{originalErrorMessage:e?.message});zf.warn(n.message)}}}async function Ore(t,e){try{const n=(await KCe()).transaction(Fk,"readwrite");await n.objectStore(Fk).put(e,GCe(t)),await n.done}catch(n){if(n instanceof Cd)zf.warn(n.message);else{const s=Lg.create("idb-set",{originalErrorMessage:n?.message});zf.warn(s.message)}}}function GCe(t){return`${t.name}!${t.options.appId}`}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vlt=1024,Ult=30;class qlt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Blt(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=Lre();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(s=>s.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats.length>Ult){const s=$lt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){zf.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Lre(),{heartbeatsToSend:n,unsentEntries:s}=jlt(this._heartbeatsCache.heartbeats),r=XD(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return zf.warn(e),""}}}function Lre(){return new Date().toISOString().substring(0,10)}function jlt(t,e=Vlt){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Mre(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Mre(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Blt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Iat()?Sat().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Flt(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ore(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Ore(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Mre(t){return XD(JSON.stringify({version:2,heartbeats:t})).length}function $lt(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zlt(t){Am(new $f("platform-logger",e=>new nlt(e),"PRIVATE")),Am(new $f("heartbeat",e=>new qlt(e),"PRIVATE")),ql(Rj,Nre,t),ql(Rj,Nre,"esm2020"),ql("fire-js","")}zlt("");function QCe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YCe=QCe,XCe=new MR("auth","Firebase",QCe());/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tO=new aV("@firebase/auth");function Hlt(t,...e){tO.logLevel<=Gt.WARN&&tO.warn(`Auth (${d_}): ${t}`,...e)}function _x(t,...e){tO.logLevel<=Gt.ERROR&&tO.error(`Auth (${d_}): ${t}`,...e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cd(t,...e){throw q8(t,...e)}function xc(t,...e){return q8(t,...e)}function U8(t,e,n){const s={...YCe(),[e]:n};return new MR("auth","Firebase",s).create(e,{appName:t.name})}function iv(t){return U8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wlt(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&cd(t,"argument-error"),U8(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function q8(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return XCe.create(t,...e)}function Et(t,e,...n){if(!t)throw q8(e,...n)}function uf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _x(e),new Error(e)}function Hf(t,e){t||uf(e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nj(){return typeof self<"u"&&self.location?.href||""}function Klt(){return Fre()==="http:"||Fre()==="https:"}function Fre(){return typeof self<"u"&&self.location?.protocol||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Glt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Klt()||bat()||"connection"in navigator)?navigator.onLine:!0}function Qlt(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class VR{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hf(n>e,"Short delay should be less than long delay!"),this.isMobile=M8()||BCe()}get(){return Glt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function j8(t,e){Hf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JCe{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;uf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;uf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;uf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ylt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Xlt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jlt=new VR(3e4,6e4);function B8(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function sC(t,e,n,s,r={}){return ZCe(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=nC({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return wat()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Td(t.emulatorConfig.host)&&(c.credentials="include"),JCe.fetch()(await eIe(t,t.config.apiHost,n,a),c)})}async function ZCe(t,e,n){t._canInitEmulator=!1;const s={...Ylt,...e};try{const r=new eut(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sP(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sP(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sP(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sP(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw U8(t,h,c);cd(t,h)}}catch(r){if(r instanceof Cd)throw r;cd(t,"network-request-failed",{message:String(r)})}}async function Zlt(t,e,n,s,r={}){const i=await sC(t,e,n,s,r);return"mfaPendingCredential"in i&&cd(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eIe(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?j8(t.config,r):`${t.config.apiScheme}://${r}`;return Xlt.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class eut{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(xc(this.auth,"network-request-failed")),Jlt.get())})}}function sP(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=xc(t,e,s);return r.customData._tokenResponse=n,r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function tut(t,e){return sC(t,"POST","/v1/accounts:delete",e)}async function nO(t,e){return sC(t,"POST","/v1/accounts:lookup",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function q0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tIe(t,e=!1){const n=Kn(t),s=await n.getIdToken(e),r=$8(s);Et(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:q0($6(r.auth_time)),issuedAtTime:q0($6(r.iat)),expirationTime:q0($6(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function $6(t){return Number(t)*1e3}function $8(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return _x("JWT malformed, contained fewer than 3 sections"),null;try{const r=JD(n);return r?JSON.parse(r):(_x("Failed to decode base64 JWT payload"),null)}catch(r){return _x("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Vre(t){const e=$8(t);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Vk(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Cd&&nut(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function nut({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sut{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dj{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=q0(this.lastLoginAt),this.creationTime=q0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function sO(t){const e=t.auth,n=await t.getIdToken(),s=await Vk(t,nO(e,{idToken:n}));Et(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?sIe(r.providerUserInfo):[],o=rut(t.providerData,i),a=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!o?.length,c=a?u:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Dj(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function nIe(t){const e=Kn(t);await sO(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rut(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function sIe(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function iut(t,e){const n=await ZCe(t,{},async()=>{const s=nC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await eIe(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:s};return t.emulatorConfig&&Td(t.emulatorConfig.host)&&(u.credentials="include"),JCe.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function out(t,e){return sC(t,"POST","/v2/accounts:revokeToken",B8(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vre(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const n=Vre(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await iut(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Yb;return s&&(Et(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Et(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Et(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yb,this.toJSON())}_performRefresh(){return uf("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ip(t,e){Et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cc{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new sut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Dj(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Vk(this,this.stsTokenManager.getToken(this.auth,e));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tIe(this,e)}reload(){return nIe(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await sO(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(il(this.auth.app))return Promise.reject(iv(this.auth));const e=await this.getIdToken();return await Vk(this,tut(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;Et(d&&k,e,"internal-error");const P=Yb.fromJSON(this.name,k);Et(typeof d=="string",e,"internal-error"),Ip(s,e.name),Ip(r,e.name),Et(typeof p=="boolean",e,"internal-error"),Et(typeof m=="boolean",e,"internal-error"),Ip(i,e.name),Ip(o,e.name),Ip(a,e.name),Ip(u,e.name),Ip(c,e.name),Ip(h,e.name);const O=new cc({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new Yb;r.updateFromServerResponse(n);const i=new cc({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await sO(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Et(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?sIe(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new Yb;a.updateFromIdToken(s);const u=new cc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Dj(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ure=new Map;function cf(t){Hf(t instanceof Function,"Expected a class definition");let e=Ure.get(t);return e?(Hf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ure.set(t,e),e)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rIe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rIe.type="NONE";const Oj=rIe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yx(t,e,n){return`firebase:${t}:${e}:${n}`}class Xb{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=yx(this.userKey,r.apiKey,i),this.fullPersistenceKey=yx("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nO(this.auth,{idToken:e}).catch(()=>{});return n?cc._fromGetAccountInfoResponse(this.auth,n,e):null}return cc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Xb(cf(Oj),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||cf(Oj);const o=yx(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await nO(e,{idToken:h}).catch(()=>{});if(!p)break;d=await cc._fromGetAccountInfoResponse(e,p,h)}else d=cc._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Xb(i,e,s):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xb(i,e,s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qre(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lIe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iIe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cIe(e))return"Blackberry";if(hIe(e))return"Webos";if(oIe(e))return"Safari";if((e.includes("chrome/")||aIe(e))&&!e.includes("edge/"))return"Chrome";if(uIe(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function iIe(t=qo()){return/firefox\//i.test(t)}function oIe(t=qo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aIe(t=qo()){return/crios\//i.test(t)}function lIe(t=qo()){return/iemobile/i.test(t)}function uIe(t=qo()){return/android/i.test(t)}function cIe(t=qo()){return/blackberry/i.test(t)}function hIe(t=qo()){return/webos/i.test(t)}function z8(t=qo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aut(t=qo()){return z8(t)&&!!window.navigator?.standalone}function lut(){return Eat()&&document.documentMode===10}function dIe(t=qo()){return z8(t)||uIe(t)||hIe(t)||cIe(t)||/windows phone/i.test(t)||lIe(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fIe(t,e=[]){let n;switch(t){case"Browser":n=qre(qo());break;case"Worker":n=`${qre(qo())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${d_}/${s}`}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class uut{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function cut(t,e={}){return sC(t,"GET","/v2/passwordPolicy",B8(t,e))}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hut=6;class dut{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hut,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fut{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jre(this),this.idTokenSubscription=new jre(this),this.beforeStateQueue=new uut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XCe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cf(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xb.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nO(this,{idToken:e}),s=await cc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(il(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sO(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qlt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(il(this.app))return Promise.reject(iv(this));const n=e?Kn(e):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return il(this.app)?Promise.reject(iv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return il(this.app)?Promise.reject(iv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cut(this),n=new dut(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new MR("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await out(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cf(e)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await Xb.create(this,[cf(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fIe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(il(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Hlt(`Error while retrieving App Check token: ${e.error}`),e?.token}}function uV(t){return Kn(t)}class jre{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dat(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let H8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function put(t){H8=t}function gut(t){return H8.loadJS(t)}function mut(){return H8.gapiScript}function _ut(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pIe(t,e){const n=FR(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(km(r,e??{}))return s;cd(s,"already-initialized")}return n.initialize({options:e})}function yut(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(cf);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function gIe(t,e,n){const s=uV(t);Et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=mIe(e),{host:o,port:a}=vut(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(km(c,s.config.emulator)&&km(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Td(o)?(rV(`${i}//${o}${u}`),iV("Auth",!0)):wut()}function mIe(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vut(t){const e=mIe(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Bre(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Bre(o)}}}function Bre(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wut(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W8{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return uf("not implemented")}_getIdTokenResponse(e){return uf("not implemented")}_linkToIdToken(e,n){return uf("not implemented")}_getReauthenticationResolver(e){return uf("not implemented")}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Jb(t,e){return Zlt(t,"POST","/v1/accounts:signInWithIdp",B8(t,e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const but="http://localhost";class Rm extends W8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Rm(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Jb(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Jb(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jb(e,n)}buildRequest(){const e={requestUri:but,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nC(n)}return e}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class K8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class UR extends K8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yd extends UR{constructor(){super("facebook.com")}static credential(e){return Rm._fromParams({providerId:Yd.PROVIDER_ID,signInMethod:Yd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yd.credentialFromTaggedObject(e)}static credentialFromError(e){return Yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yd.credential(e.oauthAccessToken)}catch{return null}}}Yd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yd.PROVIDER_ID="facebook.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Th extends UR{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rm._fromParams({providerId:Th.PROVIDER_ID,signInMethod:Th.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Th.credentialFromTaggedObject(e)}static credentialFromError(e){return Th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Th.credential(n,s)}catch{return null}}}Th.GOOGLE_SIGN_IN_METHOD="google.com";Th.PROVIDER_ID="google.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xd extends UR{constructor(){super("github.com")}static credential(e){return Rm._fromParams({providerId:Xd.PROVIDER_ID,signInMethod:Xd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xd.credentialFromTaggedObject(e)}static credentialFromError(e){return Xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xd.credential(e.oauthAccessToken)}catch{return null}}}Xd.GITHUB_SIGN_IN_METHOD="github.com";Xd.PROVIDER_ID="github.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jd extends UR{constructor(){super("twitter.com")}static credential(e,n){return Rm._fromParams({providerId:Jd.PROVIDER_ID,signInMethod:Jd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jd.credentialFromTaggedObject(e)}static credentialFromError(e){return Jd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Jd.credential(n,s)}catch{return null}}}Jd.TWITTER_SIGN_IN_METHOD="twitter.com";Jd.PROVIDER_ID="twitter.com";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eT{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await cc._fromIdTokenResponse(e,s,r),o=$re(s);return new eT({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=$re(s);return new eT({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function $re(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rO extends Cd{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,rO.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new rO(e,n,s,r)}}function _Ie(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?rO._fromErrorAndOperation(t,r,e,s):r})}async function Eut(t,e,n=!1){const s=await Vk(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eT._forOperation(t,"link",s)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Tut(t,e,n=!1){const{auth:s}=t;if(il(s.app))return Promise.reject(iv(s));const r="reauthenticate";try{const i=await Vk(t,_Ie(s,r,e,t),n);Et(i.idToken,s,"internal-error");const o=$8(i.idToken);Et(o,s,"internal-error");const{sub:a}=o;return Et(t.uid===a,s,"user-mismatch"),eT._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&cd(s,"user-mismatch"),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Cut(t,e,n=!1){if(il(t.app))return Promise.reject(iv(t));const s="signIn",r=await _Ie(t,s,e),i=await eT._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function yIe(t,e,n,s){return Kn(t).onIdTokenChanged(e,n,s)}function vIe(t,e,n){return Kn(t).beforeAuthStateChanged(e,n)}function wIe(t,e,n,s){return Kn(t).onAuthStateChanged(e,n,s)}function ab(t){return Kn(t).signOut()}const iO="__sak";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bIe{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iO,"1"),this.storage.removeItem(iO),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Iut=1e3,Sut=10;class EIe extends bIe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dIe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);lut()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Sut):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Iut)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EIe.type="LOCAL";const TIe=EIe;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class CIe extends bIe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CIe.type="SESSION";const G8=CIe;/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kut(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cV{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new cV(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await kut(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cV.receivers=[];/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Q8(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Aut{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Q8("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qh(){return window}function Rut(t){qh().location.href=t}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IIe(){return typeof qh().WorkerGlobalScope<"u"&&typeof qh().importScripts=="function"}async function Put(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xut(){return navigator?.serviceWorker?.controller||null}function Nut(){return IIe()?self:null}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const SIe="firebaseLocalStorageDb",Dut=1,oO="firebaseLocalStorage",kIe="fbase_key";class qR{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hV(t,e){return t.transaction([oO],e?"readwrite":"readonly").objectStore(oO)}function Out(){const t=indexedDB.deleteDatabase(SIe);return new qR(t).toPromise()}function Lj(){const t=indexedDB.open(SIe,Dut);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(oO,{keyPath:kIe})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(oO)?e(s):(s.close(),await Out(),e(await Lj()))})})}async function zre(t,e,n){const s=hV(t,!0).put({[kIe]:e,value:n});return new qR(s).toPromise()}async function Lut(t,e){const n=hV(t,!1).get(e),s=await new qR(n).toPromise();return s===void 0?null:s.value}function Hre(t,e){const n=hV(t,!0).delete(e);return new qR(n).toPromise()}const Mut=800,Fut=3;class AIe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lj(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>Fut)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IIe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cV._getInstance(Nut()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Put(),!this.activeServiceWorker)return;this.sender=new Aut(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xut()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lj();return await zre(e,iO,"1"),await Hre(e,iO),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>zre(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Lut(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hre(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=hV(r,!1).getAll();return new qR(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Mut)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AIe.type="LOCAL";const RIe=AIe;new VR(3e4,6e4);/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PIe(t,e){return e?cf(e):(Et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Y8 extends W8{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jb(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jb(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jb(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vut(t){return Cut(t.auth,new Y8(t),t.bypassAuthState)}function Uut(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),Tut(n,new Y8(t),t.bypassAuthState)}async function qut(t){const{auth:e,user:n}=t;return Et(n,e,"internal-error"),Eut(n,new Y8(t),t.bypassAuthState)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class xIe{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vut;case"linkViaPopup":case"linkViaRedirect":return qut;case"reauthViaPopup":case"reauthViaRedirect":return Uut;default:cd(this.auth,"internal-error")}}resolve(e){Hf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const jut=new VR(2e3,1e4);async function NIe(t,e,n){if(il(t.app))return Promise.reject(xc(t,"operation-not-supported-in-this-environment"));const s=uV(t);Wlt(t,e,K8);const r=PIe(s,n);return new Oy(s,"signInViaPopup",e,r).executeNotNull()}class Oy extends xIe{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Oy.currentPopupAction&&Oy.currentPopupAction.cancel(),Oy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Hf(this.filter.length===1,"Popup operations only handle one event");const e=Q8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oy.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jut.get())};e()}}Oy.currentPopupAction=null;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const But="pendingRedirect",vx=new Map;class $ut extends xIe{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vx.get(this.auth._key());if(!e){try{const n=await zut(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(n){e=()=>Promise.reject(n)}vx.set(this.auth._key(),e)}return this.bypassAuthState||vx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zut(t,e){const n=Kut(e),s=Wut(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function Hut(t,e){vx.set(t._key(),e)}function Wut(t){return cf(t._redirectPersistence)}function Kut(t){return yx(But,t.config.apiKey,t.name)}async function Gut(t,e,n=!1){if(il(t.app))return Promise.reject(iv(t));const s=uV(t),r=PIe(s,e),i=await new $ut(s,r,n).execute();return i&&!n&&(delete i.user._redirectEventId,await s._persistUserIfCurrent(i.user),await s._setRedirectUser(null,e)),i}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Qut=600*1e3;class Yut{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xut(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!DIe(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(xc(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qut&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wre(e))}saveEventToCache(e){this.cachedEventUids.add(Wre(e)),this.lastProcessedEventTime=Date.now()}}function Wre(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DIe({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Xut(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DIe(t);default:return!1}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function Jut(t,e={}){return sC(t,"GET","/v1/projects",e)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Zut=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ect=/^https?/;async function tct(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jut(t);for(const n of e)try{if(nct(n))return}catch{}cd(t,"unauthorized-domain")}function nct(t){const e=Nj(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===s}if(!ect.test(n))return!1;if(Zut.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sct=new VR(3e4,6e4);function Kre(){const t=qh().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rct(t){return new Promise((e,n)=>{function s(){Kre(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kre(),n(xc(t,"network-request-failed"))},timeout:sct.get()})}if(qh().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qh().gapi?.load)s();else{const r=_ut("iframefcb");return qh()[r]=()=>{gapi.load?s():n(xc(t,"network-request-failed"))},gut(`${mut()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw wx=null,e})}let wx=null;function ict(t){return wx=wx||rct(t),wx}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const oct=new VR(5e3,15e3),act="__/auth/iframe",lct="emulator/auth/iframe",uct={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cct=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hct(t){const e=t.config;Et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?j8(e,lct):`https://${t.config.authDomain}/${act}`,s={apiKey:e.apiKey,appName:t.name,v:d_},r=cct.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${nC(s).slice(1)}`}async function dct(t){const e=await ict(t),n=qh().gapi;return Et(n,t,"internal-error"),e.open({where:document.body,url:hct(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uct,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=xc(t,"network-request-failed"),a=qh().setTimeout(()=>{i(o)},oct.get());function u(){qh().clearTimeout(a),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fct={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pct=500,gct=600,mct="_blank",_ct="http://localhost";class Gre{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yct(t,e,n,s=pct,r=gct){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const u={...fct,width:s.toString(),height:r.toString(),top:i,left:o},c=qo().toLowerCase();n&&(a=aIe(c)?mct:n),iIe(c)&&(e=e||_ct,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(aut(c)&&a!=="_self")return vct(e||"",a),new Gre(null);const d=window.open(e||"",a,h);Et(d,t,"popup-blocked");try{d.focus()}catch{}return new Gre(d)}function vct(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wct="__/auth/handler",bct="emulator/auth/handler",Ect=encodeURIComponent("fac");async function Qre(t,e,n,s,r,i){Et(t.config.authDomain,t,"auth-domain-config-required"),Et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:d_,eventId:r};if(e instanceof K8){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Sj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof UR){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${Ect}=${encodeURIComponent(u)}`:"";return`${Tct(t)}?${nC(a).slice(1)}${c}`}function Tct({config:t}){return t.emulator?j8(t,bct):`https://${t.authDomain}/${wct}`}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const z6="webStorageSupport";class Cct{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G8,this._completeRedirectFn=Gut,this._overrideRedirectResult=Hut}async _openPopup(e,n,s,r){Hf(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Qre(e,n,s,Nj(),r);return yct(e,i,Q8())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Qre(e,n,s,Nj(),r);return Rut(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Hf(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await dct(e),s=new Yut(e);return n.register("authEvent",r=>(Et(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z6,{type:z6},s=>{const r=s?.[0]?.[z6];r!==void 0&&n(!!r),cd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tct(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dIe()||oIe()||z8()}}const OIe=Cct;var Yre="@firebase/auth",Xre="1.11.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ict{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sct(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kct(t){Am(new $f("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Et(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fIe(t)},c=new fut(s,r,i,u);return yut(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Am(new $f("auth-internal",e=>{const n=uV(e.getProvider("auth").getImmediate());return(s=>new Ict(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ql(Yre,Xre,Sct(t)),ql(Yre,Xre,"esm2020")}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Act=300,Rct=jCe("authIdTokenMaxAge")||Act;let Jre=null;const Pct=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Rct)return;const r=n?.token;Jre!==r&&(Jre=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function LIe(t=lV()){const e=FR(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pIe(t,{popupRedirectResolver:OIe,persistence:[RIe,TIe,G8]}),s=jCe("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Pct(i.toString());vIe(n,o,()=>o(n.currentUser)),yIe(n,a=>o(a))}}const r=UCe("auth");return r&&gIe(n,`http://${r}`),n}function xct(){return document.getElementsByTagName("head")?.[0]??document}put({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=xc("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",xct().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kct("Browser");var Zre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mg,MIe;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function u(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(c(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=c(Math.pow(v,E)),T=T.j(E).add(c(b))):(T=T.j(y),T=T.add(c(b)))}return T}var d=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=c(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=O(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*K,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*K,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=H(y),T=H(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=c(y),b=E.j(v);k(b)||0<b.l(I);)y-=T,E=c(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,MIe=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Mg=o}).apply(typeof Zre<"u"?Zre:typeof self<"u"?self:typeof window<"u"?window:{});var rP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FIe,CI,VIe,bx,Mj,UIe,qIe,jIe;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof rP=="object"&&rP];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(l,f){if(f)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var x=l[_];if(!(x in g))break e;g=g[x]}l=l[l.length-1],_=g[l],f=f(_),f!=_&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var g=0,_=!1,x={next:function(){if(!_&&g<l.length){var D=g++;return{value:f(D,l[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(l){return l||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,x,D){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return f.prototype[x].apply(_,z)}}function k(l){const f=l.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=l[_];return g}return[]}function P(l,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const x=l.length||0,D=_.length||0;l.length=x+D;for(let z=0;z<D;z++)l[x+z]=_[z]}else l.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function q(l){return q[" "](l),l}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(l,f,g){for(const _ in l)f.call(g,l[_],_,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function v(l){const f={};for(const g in l)f[g]=l[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(g in _)l[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function S(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function E(l){a.setTimeout(()=>{throw l},0)}function b(){var l=Lt;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,l=>l.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,Lt=new K,nt=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(mt)}};var mt=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){E(g)}var f=ne;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ve=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Mt(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(H){e:{try{q(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mt.aa.h.call(this)}}w(Mt,we);var Ve={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(l,f,g,_,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=x,this.key=++Y,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function A(l){this.src=l,this.g={},this.h=0}A.prototype.add=function(l,f,g,_,x){var D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);var z=R(l,f,_,x);return-1<z?(f=l[z],g||(f.fa=!1)):(f=new G(f,this.src,D,!!_,x),f.fa=g,l.push(f)),f};function C(l,f){var g=f.type;if(g in l.g){var _=l.g[g],x=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=x)&&Array.prototype.splice.call(_,x,1),D&&(ee(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function R(l,f,g,_){for(var x=0;x<l.length;++x){var D=l[x];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return x}return-1}var N="closure_lm_"+(1e6*Math.random()|0),L={};function U(l,f,g,_,x){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(l,f[D],g,_,x);return null}return g=ie(g),l&&l[F]?l.K(f,g,c(_)?!!_.capture:!1,x):j(l,f,g,!1,_,x)}function j(l,f,g,_,x,D){if(!f)throw Error("Invalid event type");var z=c(x)?!!x.capture:!!x,de=Z(l);if(de||(l[N]=de=new A(l)),g=de.add(f,g,_,z,D),g.proxy)return g;if(_=W(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)fn||(x=z),x===void 0&&(x=!1),l.addEventListener(f.toString(),_,x);else if(l.attachEvent)l.attachEvent(Q(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function l(g){return f.call(l.src,l.listener,g)}const f=X;return l}function $(l,f,g,_,x){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(l,f[D],g,_,x);else _=c(_)?!!_.capture:!!_,g=ie(g),l&&l[F]?(l=l.i,f=String(f).toString(),f in l.g&&(D=l.g[f],g=R(D,g,_,x),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete l.g[f],l.h--)))):l&&(l=Z(l))&&(f=l.g[f.toString()],l=-1,f&&(l=R(f,g,_,x)),(g=-1<l?f[l]:null)&&B(g))}function B(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[F])C(f.i,l);else{var g=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(g,_,l.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,l),g.h==0&&(g.src=null,f[N]=null)):ee(l)}}}function Q(l){return l in L?L[l]:L[l]="on"+l}function X(l,f){if(l.da)l=!0;else{f=new Mt(f,this);var g=l.listener,_=l.ha||l.src;l.fa&&B(l),l=g.call(_,f)}return l}function Z(l){return l=l[N],l instanceof A?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(l){return typeof l=="function"?l:(l[te]||(l[te]=function(f){return l.handleEvent(f)}),l[te])}function re(){Te.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,Te),re.prototype[F]=!0,re.prototype.removeEventListener=function(l,f,g,_){$(this,l,f,g,_)};function se(l,f){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var x=f;f=new we(_,l),T(f,x)}if(x=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];x=be(z,_,!0,f)&&x}if(z=f.g=l,x=be(z,_,!0,f)&&x,x=be(z,_,!1,f)&&x,g)for(D=0;D<g.length;D++)z=f.g=g[D],x=be(z,_,!1,f)&&x}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],_=0;_<g.length;_++)ee(g[_]);delete l.g[f],l.h--}}this.F=null},re.prototype.K=function(l,f,g,_){return this.i.add(String(l),f,!1,g,_)},re.prototype.L=function(l,f,g,_){return this.i.add(String(l),f,!0,g,_)};function be(l,f,g,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var de=z.listener,Re=z.ha||z.src;z.fa&&C(l.i,z),x=de.call(Re,_)!==!1&&x}}return x&&!_.defaultPrevented}function Ae(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Ue(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class tt extends Te{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(l){Te.call(this),this.h=l,this.g={}}w(Ye,Te);var ls=[];function ze(l){J(l.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},l),l.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),ze(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=a.JSON.stringify,Qn=a.JSON.parse,Fr=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function Ql(l){return l.h||(l.h=l.i())}function Yl(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bo(){we.call(this,"d")}w(Bo,we);function $o(){we.call(this,"c")}w($o,we);var Rn={},Xl=null;function Vr(){return Xl=Xl||new re}Rn.La="serverreachability";function Jl(l){we.call(this,Rn.La,l)}w(Jl,we);function Ls(l){const f=Vr();se(f,new Jl(f))}Rn.STAT_EVENT="statevent";function Zl(l,f){we.call(this,Rn.STAT_EVENT,l),this.stat=f}w(Zl,we);function Le(l){const f=Vr();se(f,new Zl(f,l))}Rn.Ma="timingevent";function eu(l,f){we.call(this,Rn.Ma,l),this.size=f}w(eu,we);function Ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function v_(l,f,g,_,x,D){l.info(function(){if(l.g)if(D)for(var z="",de=D.split("&"),Re=0;Re<de.length;Re++){var le=de[Re].split("=");if(1<le.length){var Oe=le[0];le=le[1];var Fe=Oe.split("_");z=2<=Fe.length&&Fe[1]=="type"?z+(Oe+"="+le+"&"):z+(Oe+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+f+`
`+g+`
`+z})}function w_(l,f,g,_,x,D,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+f+`
`+g+`
`+D+" "+z})}function Yn(l,f,g,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+E_(l,g)+(_?" "+_:"")})}function b_(l,f){l.info(function(){return"TIMEOUT: "+f})}Fs.prototype.info=function(){};function E_(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<x.length;z++)x[z]=""}}}}return Me(g)}catch{return f}}var Ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zo;function qr(){}w(qr,Ii),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},zo=new qr;function pn(l,f,g,_){this.j=l,this.i=f,this.l=g,this.R=_||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var su={},Ho={};function Wo(l,f,g){l.L=1,l.v=zr(Ut(f)),l.m=g,l.P=!0,ru(l,null)}function ru(l,f){l.F=Date.now(),jr(l),l.A=Ut(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),yu(g.i,"t",_),l.C=0,g=l.j.J,l.h=new nu,l.g=Mu(l.j,g?f:null,!l.m),0<l.O&&(l.M=new tt(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,_=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(ls[0]=x.toString()),x=ls);for(var D=0;D<x.length;D++){var z=U(g,x[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ls(),v_(l.i,l.u,l.A,l.l,l.R,l.m)}pn.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},pn.prototype.Y=function(l){try{if(l==this.g)e:{const Fe=qt(this.g);var f=this.g.Ba();const Zn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Fe!=4||f==7||(f==8||0>=Zn?Ls(3):Ls(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(iu(this)){var _=Iu(this.g);l="";var x=_.length,D=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Vs(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(D&&f==x-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,w_(this.i,this.u,this.A,this.l,this.R,Fe,g),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Re=this.g;if((de=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(de)){var le=de;break t}}le=null}if(g=le)Yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,g);else{this.o=!1,this.s=3,Le(12),Pn(this),Vs(this);break e}}if(this.P){g=!0;let yt;for(;!this.J&&this.C<z.length;)if(yt=T_(this,z),yt==Ho){Fe==4&&(this.s=4,Le(14),g=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==su){this.s=4,Le(15),Yn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Yn(this.i,this.l,yt,null),Go(this,yt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||z.length!=0||this.h.h||(this.s=1,Le(16),g=!1),this.o=this.o&&g,!g)Yn(this.i,this.l,z,"[Invalid Chunked Response]"),Pn(this),Vs(this);else if(0<z.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ea(Oe),Oe.M=!0,Le(11))}}else Yn(this.i,this.l,z,null),Go(this,z);Fe==4&&Pn(this),this.o&&!this.J&&(Fe==4?Nu(this.j,this):(this.o=!1,jr(this)))}else q_(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Pn(this),Vs(this)}}}catch{}finally{}};function iu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function T_(l,f){var g=l.C,_=f.indexOf(`
`,g);return _==-1?Ho:(g=Number(f.substring(g,_)),isNaN(g)?su:(_+=1,_+g>f.length?Ho:(f=f.slice(_,_+g),l.C=_+g,f)))}pn.prototype.cancel=function(){this.J=!0,Pn(this)};function jr(l){l.S=Date.now()+l.I,ou(l,l.I)}function ou(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ms(p(l.ba,l),f)}function Ko(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(b_(this.i,this.A),this.L!=2&&(Ls(),Le(17)),Pn(this),this.s=2,Vs(this)):ou(this,this.S-l)};function Vs(l){l.j.G==0||l.J||Nu(l.j,l)}function Pn(l){Ko(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ze(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Go(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Qo(g.h,l))){if(!l.K&&Qo(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Yr(g),Gr(g);else break e;Zo(g),Le(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ms(p(g.Za,g),6e3));if(1>=uu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Nn(g,11)}else if((l.K||g.g==l)&&Yr(g),!M(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let le=x[f];if(g.T=le[0],le=le[1],g.G==2)if(le[0]=="c"){g.K=le[1],g.ia=le[2];const Oe=le[3];Oe!=null&&(g.la=Oe,g.j.info("VER="+g.la));const Fe=le[4];Fe!=null&&(g.Aa=Fe,g.j.info("SVER="+g.Aa));const Zn=le[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(_=1.5*Zn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yt=l.g;if(yt){const Jr=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var D=_.h;D.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Yo(D,D.h),D.h=null))}if(_.D){const ta=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(_.ya=ta,fe(_.I,_.D,ta))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=l;if(_.qa=Lu(_,_.J?_.ia:null,_.W),z.K){cu(_.h,z);var de=z,Re=_.L;Re&&(de.I=Re),de.B&&(Ko(de),jr(de)),_.g=z}else Pu(_);0<g.i.length&&Qr(g)}else le[0]!="stop"&&le[0]!="close"||Nn(g,7);else g.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Nn(g,7):Jo(g):le[0]!="noop"&&g.l&&g.l.ta(le),g.v=0)}}Ls(4)}catch{}}var C_=class{constructor(l,f){this.g=l,this.map=f}};function au(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lu(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function uu(l){return l.h?1:l.g?l.g.size:0}function Qo(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Yo(l,f){l.g?l.g.add(f):l.h=f}function cu(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}au.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hu(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return k(l.i)}function I_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,_=0;_<g;_++)f.push(l[_]);return f}f=[],g=0;for(_ in l)f[g++]=l[_];return f}function S_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const _ in l)f[g++]=_;return f}}}function du(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=S_(l),_=I_(l),x=_.length,D=0;D<x;D++)f.call(void 0,_[D],g&&g[D],l)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k_(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),x=null;if(0<=_){var D=l[g].substring(0,_);x=l[g].substring(_+1)}else D=l[g];f(D,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function xn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof xn){this.h=l.h,Br(this,l.j),this.o=l.o,this.g=l.g,$r(this,l.s),this.l=l.l;var f=l.i,g=new js;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),pu(this,g),this.m=l.m}else l&&(f=String(l).match(fu))?(this.h=!1,Br(this,f[1]||"",!0),this.o=Us(f[2]||""),this.g=Us(f[3]||"",!0),$r(this,f[4]),this.l=Us(f[5]||"",!0),pu(this,f[6]||"",!0),this.m=Us(f[7]||"")):(this.h=!1,this.i=new js(null,this.h))}xn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qs(f,gu,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qs(f,gu,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(qs(g,g.charAt(0)=="/"?P_:R_,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",qs(g,N_)),l.join("")};function Ut(l){return new xn(l)}function Br(l,f,g){l.j=g?Us(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function $r(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function pu(l,f,g){f instanceof js?(l.i=f,D_(l.i,l.h)):(g||(f=qs(f,x_)),l.i=new js(f,l.h))}function fe(l,f,g){l.i.set(f,g)}function zr(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Us(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,A_),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function A_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gu=/[#\/\?@]/g,R_=/[#\?:]/g,P_=/[#\?]/g,x_=/[#\?@]/g,N_=/#/g;function js(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function gn(l){l.g||(l.g=new Map,l.h=0,l.i&&k_(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=js.prototype,t.add=function(l,f){gn(this),this.i=null,l=Xn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function mu(l,f){gn(l),f=Xn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function _u(l,f){return gn(l),f=Xn(l,f),l.g.has(f)}t.forEach=function(l,f){gn(this),this.g.forEach(function(g,_){g.forEach(function(x){l.call(f,x,_,this)},this)},this)},t.na=function(){gn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const x=l[_];for(let D=0;D<x.length;D++)g.push(f[_])}return g},t.V=function(l){gn(this);let f=[];if(typeof l=="string")_u(this,l)&&(f=f.concat(this.g.get(Xn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return gn(this),this.i=null,l=Xn(this,l),_u(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function yu(l,f,g){mu(l,f),0<g.length&&(l.i=null,l.g.set(Xn(l,f),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var x=D;z[_]!==""&&(x+="="+encodeURIComponent(String(z[_]))),l.push(x)}}return this.i=l.join("&")};function Xn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function D_(l,f){f&&!l.j&&(gn(l),l.i=null,l.g.forEach(function(g,_){var x=_.toLowerCase();_!=x&&(mu(this,_),yu(this,x,g))},l)),l.j=f}function O_(l,f){const g=new Fs;if(a.Image){const _=new Image;_.onload=m(mn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(mn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(mn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(mn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function L_(l,f){const g=new Fs,_=new AbortController,x=setTimeout(()=>{_.abort(),mn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(D=>{clearTimeout(x),D.ok?mn(g,"TestPingServer: ok",!0,f):mn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),mn(g,"TestPingServer: error",!1,f)})}function mn(l,f,g,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(g)}catch{}}function M_(){this.g=new Fr}function F_(l,f,g){const _=g||"";try{du(l,function(x,D){let z=x;c(x)&&(z=Me(x)),f.push(_+D+"="+encodeURIComponent(z))})}catch(x){throw f.push(_+"type="+encodeURIComponent("_badmap")),x}}function Hr(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Hr,Ii),Hr.prototype.g=function(){return new Wr(this.l,this.j)},Hr.prototype.i=function(l){return function(){return l}}({});function Wr(l,f){re.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wr,re),t=Wr.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,$s(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Bs(this):$s(this),this.readyState==3&&vu(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bs(this))},t.Qa=function(l){this.g&&(this.response=l,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$s(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function $s(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wu(l){let f="";return J(l,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Xo(l,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=wu(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):fe(l,f,g))}function Ee(l){re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ee,re);var V_=/^https?$/i,U_=["POST","PUT"];t=Ee.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zo.g(),this.v=this.o?Ql(this.o):Ql(zo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(D){bu(this,D);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)g.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U_,f,void 0))||_||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(l),this.u=!1}catch(D){bu(this,D)}};function bu(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Eu(l),Kr(l)}function Eu(l){l.A||(l.A=!0,se(l,"complete"),se(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,se(this,"complete"),se(this,"abort"),Kr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(l){if(l.h&&typeof o<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)Ae(l.Ea,0,l);else if(se(l,"readystatechange"),qt(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var x=String(l.D).match(fu)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!V_.test(x?x.toLowerCase():"")}g=_}if(g)se(l,"complete"),se(l,"success");else{l.m=6;try{var D=2<qt(l)?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.Z()+"]",Eu(l)}}finally{Kr(l)}}}}function Kr(l,f){if(l.g){Cu(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||se(l,"ready");try{g.onreadystatechange=_}catch{}}}function Cu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Qn(f)}};function Iu(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function q_(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(M(l[_]))continue;var g=S(l[_]);const x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[x]||[];f[x]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Su(l){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,l),this.cb=zs("retryDelaySeedMs",1e4,l),this.Wa=zs("forwardChannelMaxRetries",2,l),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new au(l&&l.concurrentRequestLimit),this.Da=new M_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,_){Le(0),this.W=l,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Lu(this,null,this.W),Qr(this)};function Jo(l){if(ku(l),l.G==3){var f=l.U++,g=Ut(l.I);if(fe(g,"SID",l.K),fe(g,"RID",f),fe(g,"TYPE","terminate"),Hs(l,g),f=new pn(l,l.j,f),f.L=2,f.v=zr(Ut(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Mu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),jr(f)}Ou(l)}function Gr(l){l.g&&(ea(l),l.g.cancel(),l.g=null)}function ku(l){Gr(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yr(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qr(l){if(!lu(l.h)&&!l.s){l.s=!0;var f=l.Ga;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.B=0}}function j_(l,f){return uu(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ms(p(l.Ga,l,f),Du(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new pn(this,this.j,l);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(x.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ru(this,x,f),g=Ut(this.I),fe(g,"RID",l),fe(g,"CVER",22),this.D&&fe(g,"X-HTTP-Session-Id",this.D),Hs(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(wu(D)))+"&"+f:this.m&&Xo(g,this.m,D)),Yo(this.h,x),this.Ua&&fe(g,"TYPE","init"),this.P?(fe(g,"$req",f),fe(g,"SID","null"),x.T=!0,Wo(x,g,null)):Wo(x,g,f),this.G=2}}else this.G==3&&(l?Au(this,l):this.i.length==0||lu(this.h)||Au(this))};function Au(l,f){var g;f?g=f.l:g=l.U++;const _=Ut(l.I);fe(_,"SID",l.K),fe(_,"RID",g),fe(_,"AID",l.T),Hs(l,_),l.m&&l.o&&Xo(_,l.m,l.o),g=new pn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ru(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Yo(l.h,g),Wo(g,_,f)}function Hs(l,f){l.H&&J(l.H,function(g,_){fe(f,_,g)}),l.l&&du({},function(g,_){fe(f,_,g)})}function Ru(l,f,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var x=l.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=x[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let de=!0;for(let Re=0;Re<g;Re++){let le=x[Re].g;const Oe=x[Re].map;if(le-=D,0>le)D=Math.max(0,x[Re].g-100),de=!1;else try{F_(Oe,z,"req"+le+"_")}catch{_&&_(Oe)}}if(de){_=z.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,_}function Pu(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.v=0}}function Zo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ms(p(l.Fa,l),Du(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ms(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Gr(this),xu(this))};function ea(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function xu(l){l.g=new pn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ut(l.qa);fe(f,"RID","rpc"),fe(f,"SID",l.K),fe(f,"AID",l.T),fe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(f,"TO",l.ja),fe(f,"TYPE","xmlhttp"),Hs(l,f),l.m&&l.o&&Xo(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=zr(Ut(f)),g.m=null,g.P=!0,ru(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Gr(this),Zo(this),Le(19))};function Yr(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Nu(l,f){var g=null;if(l.g==f){Yr(l),ea(l),l.g=null;var _=2}else if(Qo(l.h,f))g=f.D,cu(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;_=Vr(),se(_,new eu(_,g)),Qr(l)}else Pu(l);else if(x=f.s,x==3||x==0&&0<f.X||!(_==1&&j_(l,f)||_==2&&Zo(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:Nn(l,5);break;case 4:Nn(l,10);break;case 3:Nn(l,6);break;default:Nn(l,2)}}}function Du(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Nn(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),_=l.Xa;const x=!_;_=new xn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Br(_,"https"),zr(_),x?O_(_.toString(),g):L_(_.toString(),g)}else Le(2);l.G=0,l.l&&l.l.sa(f),Ou(l),ku(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ou(l){if(l.G=0,l.ka=[],l.l){const f=hu(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Lu(l,f,g){var _=g instanceof xn?Ut(g):new xn(g);if(_.g!="")f&&(_.g=f+"."+_.g),$r(_,_.s);else{var x=a.location;_=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var D=new xn(null);_&&Br(D,_),f&&(D.g=f),x&&$r(D,x),g&&(D.l=g),_=D}return g=l.D,f=l.ya,g&&f&&fe(_,g,f),fe(_,"VER",l.la),Hs(l,_),_}function Mu(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ee(new Hr({eb:g})):new Ee(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}t=Fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(l,f){return new We(l,f)};function We(l,f){re.call(this),this.g=new Su(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!M(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Jn(this)}w(We,re),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Jo(this.g)},We.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Me(l),l=g);f.i.push(new C_(f.Ya++,l)),f.G==3&&Qr(f)},We.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,We.aa.N.call(this)};function Vu(l){Bo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(Vu,Bo);function Uu(){$o.call(this),this.status=1}w(Uu,$o);function Jn(l){this.g=l}w(Jn,Fu),Jn.prototype.ua=function(){se(this.g,"a")},Jn.prototype.ta=function(l){se(this.g,new Vu(l))},Jn.prototype.sa=function(l){se(this.g,new Uu)},Jn.prototype.ra=function(){se(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,jIe=function(){return new Xr},qIe=function(){return Vr()},UIe=Rn,Mj={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,bx=Ur,tu.COMPLETE="complete",VIe=tu,Yl.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",re.prototype.listen=re.prototype.K,CI=Yl,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,FIe=Ee}).apply(typeof rP<"u"?rP:typeof self<"u"?self:typeof window<"u"?window:{});const eie="@firebase/firestore",tie="4.9.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yo.UNAUTHENTICATED=new yo(null),yo.GOOGLE_CREDENTIALS=new yo("google-credentials-uid"),yo.FIRST_PARTY=new yo("first-party-uid"),yo.MOCK_USER=new yo("mock-user");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let rC="12.0.0";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lv=new aV("@firebase/firestore");function lb(){return Lv.logLevel}function Ne(t,...e){if(Lv.logLevel<=Gt.DEBUG){const n=e.map(X8);Lv.debug(`Firestore (${rC}): ${t}`,...n)}}function Wf(t,...e){if(Lv.logLevel<=Gt.ERROR){const n=e.map(X8);Lv.error(`Firestore (${rC}): ${t}`,...n)}}function tT(t,...e){if(Lv.logLevel<=Gt.WARN){const n=e.map(X8);Lv.warn(`Firestore (${rC}): ${t}`,...n)}}function X8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(t)}catch{return t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ct(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,BIe(t,s,n)}function BIe(t,e,n){let s=`FIRESTORE (${rC}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Wf(s),new Error(s)}function $n(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||BIe(e,r,s)}function Dt(t,e){return t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Cd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fg{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $Ie{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nct{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yo.UNAUTHENTICATED))}shutdown(){}}class Dct{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Oct{constructor(e){this.t=e,this.currentUser=yo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$n(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new Fg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fg,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fg)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($n(typeof s.accessToken=="string",31837,{l:s}),new $Ie(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $n(e===null||typeof e=="string",2055,{h:e}),new yo(e)}}class Lct{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Mct{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Lct(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nie{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fct{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,il(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$n(this.o===void 0,3512);const s=i=>{i.error!=null&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nie(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($n(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nie(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Vct(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J8{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=Vct(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function sn(t,e){return t<e?-1:t>e?1:0}function Fj(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return H6(r)===H6(i)?sn(r,i):H6(r)?1:-1}return sn(t.length,e.length)}const Uct=55296,qct=57343;function H6(t){const e=t.charCodeAt(0);return e>=Uct&&e<=qct}function nT(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const sie="__name__";class ph{constructor(e,n,s){n===void 0?n=0:n>e.length&&ct(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ct(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ph.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ph?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=ph.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return sn(e.length,n.length)}static compareSegments(e,n){const s=ph.isNumericId(e),r=ph.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?ph.extractNumericId(e).compare(ph.extractNumericId(n)):Fj(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mg.fromString(e.substring(4,e.length-2))}}class Ks extends ph{construct(e,n,s){return new Ks(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Be(me.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Ks(n)}static emptyPath(){return new Ks([])}}const jct=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qi extends ph{construct(e,n,s){return new Qi(e,n,s)}static isValidIdentifier(e){return jct.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sie}static keyField(){return new Qi([sie])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Be(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Be(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Be(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Be(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qi(n)}static emptyPath(){return new Qi([])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(Ks.fromString(e))}static fromName(e){return new Ze(Ks.fromString(e).popFirst(5))}static empty(){return new Ze(Ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ks.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ks.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new Ks(e.slice()))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Bct(t,e,n){if(!n)throw new Be(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $ct(t,e,n,s){if(e===!0&&s===!0)throw new Be(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rie(t){if(!Ze.isDocumentKey(t))throw new Be(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zIe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Z8(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ct(12329,{type:typeof t})}function Nc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Z8(t);throw new Be(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Sr(t,e){const n={typeString:t};return e&&(n.value=e),n}function jR(t,e){if(!zIe(t))throw new Be(me.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Be(me.INVALID_ARGUMENT,n);return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const iie=-62135596800,oie=1e6;class ks{static now(){return ks.fromMillis(Date.now())}static fromDate(e){return ks.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*oie);return new ks(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iie)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oie}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ks._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jR(e,ks._jsonSchema))return new ks(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iie;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ks._jsonSchemaVersion="firestore/timestamp/1.0",ks._jsonSchema={type:Sr("string",ks._jsonSchemaVersion),seconds:Sr("number"),nanoseconds:Sr("number")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Vt=class Ex{static fromTimestamp(e){return new Ex(e)}static min(){return new Ex(new ks(0,0))}static max(){return new Ex(new ks(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Uk=-1;function zct(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Vt.fromTimestamp(s===1e9?new ks(n+1,0):new ks(n,s));return new Pm(r,Ze.empty(),e)}function Hct(t){return new Pm(t.readTime,t.key,Uk)}class Pm{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Pm(Vt.min(),Ze.empty(),Uk)}static max(){return new Pm(Vt.max(),Ze.empty(),Uk)}}function Wct(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ze.comparator(t.documentKey,e.documentKey),n!==0?n:sn(t.largestBatchId,e.largestBatchId))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Kct="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gct{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/async function iC(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==Kct)throw t;Ne("LocalStore","Unexpectedly lost primary lease")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,s)=>{n(e)})}static reject(e){return new ce((n,s)=>{s(e)})}static waitFor(e){return new ce((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=ce.resolve(!1);for(const s of e)n=n.next(r=>r?ce.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new ce((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new ce((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Qct(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oC(t){return t.name==="IndexedDbTransactionError"}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dV{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dV.ce=-1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const eK=-1;function fV(t){return t==null}function aO(t){return t===0&&1/t==-1/0}function Yct(t){return typeof t=="number"&&Number.isInteger(t)&&!aO(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const HIe="";function Xct(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=aie(e)),e=Jct(t.get(n),e);return aie(e)}function Jct(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case HIe:n+="";break;default:n+=i}}return n}function aie(t){return t+HIe+""}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lie(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function f_(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WIe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let Dr=class Vj{constructor(e,n){this.comparator=e,this.root=n||Vg.EMPTY}insert(e,n){return new Vj(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vg.BLACK,null,null))}remove(e){return new Vj(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vg.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iP(this.root,e,this.comparator,!1)}getReverseIterator(){return new iP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iP(this.root,e,this.comparator,!0)}},iP=class{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Vg=class Fd{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Fd.RED,this.left=r??Fd.EMPTY,this.right=i??Fd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Fd(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Fd.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ct(27949);return e+(this.isRed()?0:1)}};Vg.EMPTY=null,Vg.RED=!0,Vg.BLACK=!1;Vg.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(t,e,n,s,r){return this}insert(t,e,n){return new Vg(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vi{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uie(this.data.getIterator())}getIteratorFrom(e){return new uie(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vi(this.comparator);return n.data=e,n}}class uie{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pl{constructor(e){this.fields=e,e.sort(Qi.comparator)}static empty(){return new pl([])}unionWith(e){let n=new vi(Qi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new pl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nT(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class KIe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class to{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new KIe("Invalid base64 string: "+r):r}}(e);return new to(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new to(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}to.EMPTY_BYTE_STRING=new to("");const Zct=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xm(t){if($n(!!t,39018),typeof t=="string"){let e=0;const n=Zct.exec(t);if($n(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_r(t.seconds),nanos:_r(t.nanos)}}function _r(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nm(t){return typeof t=="string"?to.fromBase64String(t):to.fromUint8Array(t)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GIe="server_timestamp",QIe="__type__",YIe="__previous_value__",XIe="__local_write_time__";function tK(t){return(t?.mapValue?.fields||{})[QIe]?.stringValue===GIe}function pV(t){const e=t.mapValue.fields[YIe];return tK(e)?pV(e):e}function qk(t){const e=xm(t.mapValue.fields[XIe].timestampValue);return new ks(e.seconds,e.nanos)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class eht{constructor(e,n,s,r,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const lO="(default)";class jk{constructor(e,n){this.projectId=e,this.database=n||lO}static empty(){return new jk("","")}get isDefaultDatabase(){return this.database===lO}isEqual(e){return e instanceof jk&&e.projectId===this.projectId&&e.database===this.database}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const JIe="__type__",tht="__max__",oP={mapValue:{}},ZIe="__vector__",uO="value";function Dm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tK(t)?4:sht(t)?9007199254740991:nht(t)?10:11:ct(28295,{value:t})}function hd(t,e){if(t===e)return!0;const n=Dm(t);if(n!==Dm(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qk(t).isEqual(qk(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=xm(s.timestampValue),o=xm(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Nm(s.bytesValue).isEqual(Nm(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return _r(s.geoPointValue.latitude)===_r(r.geoPointValue.latitude)&&_r(s.geoPointValue.longitude)===_r(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return _r(s.integerValue)===_r(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=_r(s.doubleValue),o=_r(r.doubleValue);return i===o?aO(i)===aO(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return nT(t.arrayValue.values||[],e.arrayValue.values||[],hd);case 10:case 11:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(lie(i)!==lie(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!hd(i[a],o[a])))return!1;return!0}(t,e);default:return ct(52216,{left:t})}}function Bk(t,e){return(t.values||[]).find(n=>hd(n,e))!==void 0}function sT(t,e){if(t===e)return 0;const n=Dm(t),s=Dm(e);if(n!==s)return sn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return sn(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=_r(r.integerValue||r.doubleValue),a=_r(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return cie(t.timestampValue,e.timestampValue);case 4:return cie(qk(t),qk(e));case 5:return Fj(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Nm(r),a=Nm(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=sn(o[u],a[u]);if(c!==0)return c}return sn(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=sn(_r(r.latitude),_r(i.latitude));return o!==0?o:sn(_r(r.longitude),_r(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hie(t.arrayValue,e.arrayValue);case 10:return function(r,i){const o=r.fields||{},a=i.fields||{},u=o[uO]?.arrayValue,c=a[uO]?.arrayValue,h=sn(u?.values?.length||0,c?.values?.length||0);return h!==0?h:hie(u,c)}(t.mapValue,e.mapValue);case 11:return function(r,i){if(r===oP.mapValue&&i===oP.mapValue)return 0;if(r===oP.mapValue)return 1;if(i===oP.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),u=i.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const d=Fj(a[h],c[h]);if(d!==0)return d;const p=sT(o[a[h]],u[c[h]]);if(p!==0)return p}return sn(a.length,c.length)}(t.mapValue,e.mapValue);default:throw ct(23264,{he:n})}}function cie(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return sn(t,e);const n=xm(t),s=xm(e),r=sn(n.seconds,s.seconds);return r!==0?r:sn(n.nanos,s.nanos)}function hie(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=sT(n[r],s[r]);if(i)return i}return sn(n.length,s.length)}function rT(t){return Uj(t)}function Uj(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const n=xm(e);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(e){return Nm(e).toBase64()}(t.bytesValue):"referenceValue"in t?function(e){return Ze.fromName(e).toString()}(t.referenceValue):"geoPointValue"in t?function(e){return`geo(${e.latitude},${e.longitude})`}(t.geoPointValue):"arrayValue"in t?function(e){let n="[",s=!0;for(const r of e.values||[])s?s=!1:n+=",",n+=Uj(r);return n+"]"}(t.arrayValue):"mapValue"in t?function(e){const n=Object.keys(e.fields||{}).sort();let s="{",r=!0;for(const i of n)r?r=!1:s+=",",s+=`${i}:${Uj(e.fields[i])}`;return s+"}"}(t.mapValue):ct(61005,{value:t})}function Tx(t){switch(Dm(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pV(t);return e?16+Tx(e):16;case 5:return 2*t.stringValue.length;case 6:return Nm(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+Tx(r),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return f_(n.fields,(r,i)=>{s+=r.length+Tx(i)}),s}(t.mapValue);default:throw ct(13486,{value:t})}}function qj(t){return!!t&&"integerValue"in t}function nK(t){return!!t&&"arrayValue"in t}function die(t){return!!t&&"nullValue"in t}function fie(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cx(t){return!!t&&"mapValue"in t}function nht(t){return(t?.mapValue?.fields||{})[JIe]?.stringValue===ZIe}function j0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return f_(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=j0(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=j0(t.arrayValue.values[n]);return e}return{...t}}function sht(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tht}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qa{constructor(e){this.value=e}static empty(){return new qa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Cx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=j0(n)}setAll(e){let n=Qi.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=j0(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Cx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hd(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Cx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){f_(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new qa(j0(this.value))}}function e0e(t){const e=[];return f_(t.fields,(n,s)=>{const r=new Qi([n]);if(Cx(s)){const i=e0e(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new pl(e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ko{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ko(e,0,Vt.min(),Vt.min(),Vt.min(),qa.empty(),0)}static newFoundDocument(e,n,s,r){return new ko(e,1,n,Vt.min(),s,r,0)}static newNoDocument(e,n){return new ko(e,2,n,Vt.min(),Vt.min(),qa.empty(),0)}static newUnknownDocument(e,n){return new ko(e,3,n,Vt.min(),Vt.min(),qa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ko&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ko(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cO{constructor(e,n){this.position=e,this.inclusive=n}}function pie(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Ze.comparator(Ze.fromName(o.referenceValue),n.key):s=sT(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function gie(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hd(t.position[n],e.position[n]))return!1;return!0}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class hO{constructor(e,n="asc"){this.field=e,this.dir=n}}function rht(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t0e{}class di extends t0e{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new oht(e,n,s):n==="array-contains"?new uht(e,s):n==="in"?new cht(e,s):n==="not-in"?new hht(e,s):n==="array-contains-any"?new dht(e,s):new di(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new aht(e,s):new lht(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sT(n,this.value)):n!==null&&Dm(this.value)===Dm(n)&&this.matchesComparison(sT(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dd extends t0e{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dd(e,n)}matches(e){return n0e(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n0e(t){return t.op==="and"}function s0e(t){return iht(t)&&n0e(t)}function iht(t){for(const e of t.filters)if(e instanceof dd)return!1;return!0}function jj(t){if(t instanceof di)return t.field.canonicalString()+t.op.toString()+rT(t.value);if(s0e(t))return t.filters.map(e=>jj(e)).join(",");{const e=t.filters.map(n=>jj(n)).join(",");return`${t.op}(${e})`}}function r0e(t,e){return t instanceof di?function(n,s){return s instanceof di&&n.op===s.op&&n.field.isEqual(s.field)&&hd(n.value,s.value)}(t,e):t instanceof dd?function(n,s){return s instanceof dd&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,i,o)=>r&&r0e(i,s.filters[o]),!0):!1}(t,e):void ct(19439)}function i0e(t){return t instanceof di?function(e){return`${e.field.canonicalString()} ${e.op} ${rT(e.value)}`}(t):t instanceof dd?function(e){return e.op.toString()+" {"+e.getFilters().map(i0e).join(" ,")+"}"}(t):"Filter"}class oht extends di{constructor(e,n,s){super(e,n,s),this.key=Ze.fromName(s.referenceValue)}matches(e){const n=Ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class aht extends di{constructor(e,n){super(e,"in",n),this.keys=o0e("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lht extends di{constructor(e,n){super(e,"not-in",n),this.keys=o0e("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o0e(t,e){return(e.arrayValue?.values||[]).map(n=>Ze.fromName(n.referenceValue))}class uht extends di{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nK(n)&&Bk(n.arrayValue,this.value)}}class cht extends di{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bk(this.value.arrayValue,n)}}class hht extends di{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bk(this.value.arrayValue,n)}}class dht extends di{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nK(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Bk(this.value.arrayValue,s))}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fht{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function mie(t,e=null,n=[],s=[],r=null,i=null,o=null){return new fht(t,e,n,s,r,i,o)}function sK(t){const e=Dt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>jj(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),fV(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>rT(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>rT(s)).join(",")),e.Te=n}return e.Te}function rK(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rht(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!r0e(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gie(t.startAt,e.startAt)&&gie(t.endAt,e.endAt)}function Bj(t){return Ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gV{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pht(t,e,n,s,r,i,o,a){return new gV(t,e,n,s,r,i,o,a)}function mV(t){return new gV(t)}function _ie(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ght(t){return t.collectionGroup!==null}function B0(t){const e=Dt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let i=new vi(Qi.comparator);return r.filters.forEach(o=>{o.getFlattenedFilters().forEach(a=>{a.isInequality()&&(i=i.add(a.field))})}),i})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new hO(r,s))}),n.has(Qi.keyField().canonicalString())||e.Ie.push(new hO(Qi.keyField(),s))}return e.Ie}function jh(t){const e=Dt(t);return e.Ee||(e.Ee=mht(e,B0(t))),e.Ee}function mht(t,e){if(t.limitType==="F")return mie(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new hO(r.field,i)});const n=t.endAt?new cO(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new cO(t.startAt.position,t.startAt.inclusive):null;return mie(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function $j(t,e,n){return new gV(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _V(t,e){return rK(jh(t),jh(e))&&t.limitType===e.limitType}function a0e(t){return`${sK(jh(t))}|lt:${t.limitType}`}function ub(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>i0e(s)).join(", ")}]`),fV(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>rT(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>rT(s)).join(",")),`Target(${n})`}(jh(t))}; limitType=${t.limitType})`}function yV(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Ze.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of B0(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=pie(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,B0(n),s)||n.endAt&&!function(r,i,o){const a=pie(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,B0(n),s))}(t,e)}function _ht(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function l0e(t){return(e,n)=>{let s=!1;for(const r of B0(t)){const i=yht(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function yht(t,e,n){const s=t.field.isKeyField()?Ze.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),u=o.data.field(r);return a!==null&&u!==null?sT(a,u):ct(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ct(19790,{direction:t.dir})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fw{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){f_(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return WIe(this.inner)}size(){return this.innerSize}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vht=new Dr(Ze.comparator);function Kf(){return vht}const u0e=new Dr(Ze.comparator);function II(...t){let e=u0e;for(const n of t)e=e.insert(n.key,n);return e}function c0e(t){let e=u0e;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ly(){return $0()}function h0e(){return $0()}function $0(){return new fw(t=>t.toString(),(t,e)=>t.isEqual(e))}const wht=new Dr(Ze.comparator),bht=new vi(Ze.comparator);function cn(...t){let e=bht;for(const n of t)e=e.add(n);return e}const Eht=new vi(sn);function Tht(){return Eht}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iK(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aO(e)?"-0":e}}function d0e(t){return{integerValue:""+t}}function Cht(t,e){return Yct(e)?d0e(e):iK(t,e)}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vV{constructor(){this._=void 0}}function Iht(t,e,n){return t instanceof $k?function(s,r){const i={fields:{[QIe]:{stringValue:GIe},[XIe]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&tK(r)&&(r=pV(r)),r&&(i.fields[YIe]=r),{mapValue:i}}(n,e):t instanceof zk?p0e(t,e):t instanceof Hk?g0e(t,e):function(s,r){const i=f0e(s,r),o=yie(i)+yie(s.Ae);return qj(i)&&qj(s.Ae)?d0e(o):iK(s.serializer,o)}(t,e)}function Sht(t,e,n){return t instanceof zk?p0e(t,e):t instanceof Hk?g0e(t,e):n}function f0e(t,e){return t instanceof dO?function(n){return qj(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class $k extends vV{}class zk extends vV{constructor(e){super(),this.elements=e}}function p0e(t,e){const n=m0e(e);for(const s of t.elements)n.some(r=>hd(r,s))||n.push(s);return{arrayValue:{values:n}}}class Hk extends vV{constructor(e){super(),this.elements=e}}function g0e(t,e){let n=m0e(e);for(const s of t.elements)n=n.filter(r=>!hd(r,s));return{arrayValue:{values:n}}}class dO extends vV{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yie(t){return _r(t.integerValue||t.doubleValue)}function m0e(t){return nK(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kht{constructor(e,n){this.field=e,this.transform=n}}function Aht(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof zk&&s instanceof zk||n instanceof Hk&&s instanceof Hk?nT(n.elements,s.elements,hd):n instanceof dO&&s instanceof dO?hd(n.Ae,s.Ae):n instanceof $k&&s instanceof $k}(t.transform,e.transform)}class Rht{constructor(e,n){this.version=e,this.transformResults=n}}class Dc{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dc}static exists(e){return new Dc(void 0,e)}static updateTime(e){return new Dc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ix(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wV{}function _0e(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oK(t.key,Dc.none()):new BR(t.key,t.data,Dc.none());{const n=t.data,s=qa.empty();let r=new vi(Qi.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new p_(t.key,s,new pl(r.toArray()),Dc.none())}}function Pht(t,e,n){t instanceof BR?function(s,r,i){const o=s.value.clone(),a=wie(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof p_?function(s,r,i){if(!Ix(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=wie(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(y0e(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function z0(t,e,n,s){return t instanceof BR?function(r,i,o,a){if(!Ix(r.precondition,i))return o;const u=r.value.clone(),c=bie(r.fieldTransforms,a,i);return u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof p_?function(r,i,o,a){if(!Ix(r.precondition,i))return o;const u=bie(r.fieldTransforms,a,i),c=i.data;return c.setAll(y0e(r)),c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,i,o){return Ix(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function xht(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=f0e(s.transform,r||null);i!=null&&(n===null&&(n=qa.empty()),n.set(s.field,i))}return n||null}function vie(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&nT(n,s,(r,i)=>Aht(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class BR extends wV{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class p_ extends wV{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function y0e(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function wie(t,e,n){const s=new Map;$n(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Sht(o,a,n[r]))}return s}function bie(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Iht(i,o,e))}return s}class oK extends wV{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nht extends wV{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dht{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Pht(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=z0(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=z0(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=h0e();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const u=_0e(o,a);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Vt.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),cn())}isEqual(e){return this.batchId===e.batchId&&nT(this.mutations,e.mutations,(n,s)=>vie(n,s))&&nT(this.baseMutations,e.baseMutations,(n,s)=>vie(n,s))}}class aK{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){$n(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return wht}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new aK(e,n,s,r)}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oht{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Lht{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var br,wn;function Mht(t){switch(t){case me.OK:return ct(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return ct(15467,{code:t})}}function v0e(t){if(t===void 0)return Wf("GRPC error has no .code"),me.UNKNOWN;switch(t){case br.OK:return me.OK;case br.CANCELLED:return me.CANCELLED;case br.UNKNOWN:return me.UNKNOWN;case br.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case br.INTERNAL:return me.INTERNAL;case br.UNAVAILABLE:return me.UNAVAILABLE;case br.UNAUTHENTICATED:return me.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case br.NOT_FOUND:return me.NOT_FOUND;case br.ALREADY_EXISTS:return me.ALREADY_EXISTS;case br.PERMISSION_DENIED:return me.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case br.ABORTED:return me.ABORTED;case br.OUT_OF_RANGE:return me.OUT_OF_RANGE;case br.UNIMPLEMENTED:return me.UNIMPLEMENTED;case br.DATA_LOSS:return me.DATA_LOSS;default:return ct(39323,{code:t})}}(wn=br||(br={}))[wn.OK=0]="OK",wn[wn.CANCELLED=1]="CANCELLED",wn[wn.UNKNOWN=2]="UNKNOWN",wn[wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wn[wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wn[wn.NOT_FOUND=5]="NOT_FOUND",wn[wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",wn[wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",wn[wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",wn[wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wn[wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wn[wn.ABORTED=10]="ABORTED",wn[wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",wn[wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",wn[wn.INTERNAL=13]="INTERNAL",wn[wn.UNAVAILABLE=14]="UNAVAILABLE",wn[wn.DATA_LOSS=15]="DATA_LOSS";/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Fht(){return new TextEncoder}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Vht=new Mg([4294967295,4294967295],0);function Eie(t){const e=Fht().encode(t),n=new MIe;return n.update(e),new Uint8Array(n.digest())}function Tie(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Mg([n,s],0),new Mg([r,i],0)]}class lK{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new SI(`Invalid padding: ${n}`);if(s<0)throw new SI(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new SI(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new SI(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mg.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Mg.fromNumber(s)));return r.compare(Vht)===1&&(r=new Mg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Eie(e),[s,r]=Tie(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lK(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Eie(e),[s,r]=Tie(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class SI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bV{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,$R.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bV(Vt.min(),r,new Dr(sn),Kf(),cn())}}class $R{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $R(s,n,cn(),cn(),cn())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Sx{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class w0e{constructor(e,n){this.targetId=e,this.Ce=n}}class b0e{constructor(e,n,s=to.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Cie{constructor(){this.ve=0,this.Fe=Iie(),this.Me=to.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cn(),n=cn(),s=cn();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ct(38017,{changeType:i})}}),new $R(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Iie()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$n(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Uht{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kf(),this.Je=aP(),this.He=aP(),this.Ye=new Dr(sn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ct(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Bj(i))if(s===0){const o=new Ze(i.path);this.et(n,o,ko.newNoDocument(o,Vt.min()))}else $n(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Nm(s).toUint8Array()}catch(u){if(u instanceof KIe)return tT("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new lK(o,r,i)}catch(u){return tT(u instanceof SI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&Bj(a.target)){const u=new Ze(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ko.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=cn();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new bV(e,n,this.Ye,this.je,s);return this.je=Kf(),this.Je=aP(),this.He=aP(),this.Ye=new Dr(sn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cie,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vi(sn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vi(sn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cie),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function aP(){return new Dr(Ze.comparator)}function Iie(){return new Dr(Ze.comparator)}const qht={asc:"ASCENDING",desc:"DESCENDING"},jht={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bht={and:"AND",or:"OR"};class $ht{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zj(t,e){return t.useProto3Json||fV(e)?e:{value:e}}function fO(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E0e(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zht(t,e){return fO(t,e.toTimestamp())}function Bh(t){return $n(!!t,49232),Vt.fromTimestamp(function(e){const n=xm(e);return new ks(n.seconds,n.nanos)}(t))}function uK(t,e){return Hj(t,e).canonicalString()}function Hj(t,e){const n=function(s){return new Ks(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T0e(t){const e=Ks.fromString(t);return $n(A0e(e),10190,{key:e.toString()}),e}function Wj(t,e){return uK(t.databaseId,e.path)}function W6(t,e){const n=T0e(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ze(I0e(n))}function C0e(t,e){return uK(t.databaseId,e)}function Hht(t){const e=T0e(t);return e.length===4?Ks.emptyPath():I0e(e)}function Kj(t){return new Ks(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I0e(t){return $n(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Sie(t,e,n){return{name:Wj(t,e),fields:n.value.mapValue.fields}}function Wht(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ct(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,c){return u.useProto3Json?($n(c===void 0||typeof c=="string",58123),to.fromBase64String(c||"")):($n(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),to.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?me.UNKNOWN:v0e(u.code);return new Be(c,u.message||"")}(o);n=new b0e(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=W6(t,s.document.name),i=Bh(s.document.updateTime),o=s.document.createTime?Bh(s.document.createTime):Vt.min(),a=new qa({mapValue:{fields:s.document.fields}}),u=ko.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Sx(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=W6(t,s.document),i=s.readTime?Bh(s.readTime):Vt.min(),o=ko.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Sx([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=W6(t,s.document),i=s.removedTargetIds||[];n=new Sx([],i,r,null)}else{if(!("filter"in e))return ct(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new Lht(r,i),a=s.targetId;n=new w0e(a,o)}}return n}function Kht(t,e){let n;if(e instanceof BR)n={update:Sie(t,e.key,e.value)};else if(e instanceof oK)n={delete:Wj(t,e.key)};else if(e instanceof p_)n={update:Sie(t,e.key,e.data),updateMask:ndt(e.fieldMask)};else{if(!(e instanceof Nht))return ct(16599,{Vt:e.type});n={verify:Wj(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof $k)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zk)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Hk)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dO)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw ct(20930,{transform:i.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:zht(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ct(27497)}(t,e.precondition)),n}function Ght(t,e){return t&&t.length>0?($n(e!==void 0,14353),t.map(n=>function(s,r){let i=s.updateTime?Bh(s.updateTime):Bh(r);return i.isEqual(Vt.min())&&(i=Bh(r)),new Rht(i,s.transformResults||[])}(n,e))):[]}function Qht(t,e){return{documents:[C0e(t,e.path)]}}function Yht(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=C0e(t,r);const i=function(u){if(u.length!==0)return k0e(dd.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:cb(h.field),direction:Zht(h.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zj(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function Xht(t){let e=Hht(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){$n(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(h){const d=S0e(h);return d instanceof dd&&s0e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new hO(hb(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,fV(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(h){const d=!!h.before,p=h.values||[];return new cO(p,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,p=h.values||[];return new cO(p,d)}(n.endAt)),pht(e,r,o,i,a,"F",u,c)}function Jht(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S0e(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=hb(e.unaryFilter.field);return di.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=hb(e.unaryFilter.field);return di.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hb(e.unaryFilter.field);return di.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hb(e.unaryFilter.field);return di.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}}(t):t.fieldFilter!==void 0?function(e){return di.create(hb(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return dd.create(e.compositeFilter.filters.map(n=>S0e(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ct(1026)}}(e.compositeFilter.op))}(t):ct(30097,{filter:t})}function Zht(t){return qht[t]}function edt(t){return jht[t]}function tdt(t){return Bht[t]}function cb(t){return{fieldPath:t.canonicalString()}}function hb(t){return Qi.fromServerFormat(t.fieldPath)}function k0e(t){return t instanceof di?function(e){if(e.op==="=="){if(fie(e.value))return{unaryFilter:{field:cb(e.field),op:"IS_NAN"}};if(die(e.value))return{unaryFilter:{field:cb(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(fie(e.value))return{unaryFilter:{field:cb(e.field),op:"IS_NOT_NAN"}};if(die(e.value))return{unaryFilter:{field:cb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cb(e.field),op:edt(e.op),value:e.value}}}(t):t instanceof dd?function(e){const n=e.getFilters().map(s=>k0e(s));return n.length===1?n[0]:{compositeFilter:{op:tdt(e.op),filters:n}}}(t):ct(54877,{filter:t})}function ndt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function A0e(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dg{constructor(e,n,s,r,i=Vt.min(),o=Vt.min(),a=to.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new dg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sdt{constructor(e){this.yt=e}}function rdt(t){const e=Xht({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$j(e,e.limit,"L"):e}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class idt{constructor(){this.Cn=new odt}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(Pm.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(Pm.min())}updateCollectionGroup(e,n,s){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class odt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new vi(Ks.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new vi(Ks.comparator)).toArray()}}/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const kie={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R0e=41943040;class Ma{static withCacheSize(e){return new Ma(e,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/Ma.DEFAULT_COLLECTION_PERCENTILE=10,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ma.DEFAULT=new Ma(R0e,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ma.DISABLED=new Ma(-1,0,0);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iT{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new iT(0)}static cr(){return new iT(-1)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Aie="LruGarbageCollector",adt=1048576;function Rie([t,e],[n,s]){const r=sn(t,n);return r===0?sn(e,s):r}class ldt{constructor(e){this.Ir=e,this.buffer=new vi(Rie),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Rie(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class udt{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ne(Aie,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oC(n)?Ne(Aie,"Ignoring IndexedDB error during garbage collection: ",n):await iC(n)}await this.Vr(3e5)})}}class cdt{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(dV.ce);const s=new ldt(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(kie)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kie):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(c=Date.now(),lb()<=Gt.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function hdt(t,e){return new cdt(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ddt{constructor(){this.changes=new fw(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ko.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ce.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fdt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class pdt{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&z0(s.mutation,r,pl.empty(),ks.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,cn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=cn()){const r=Ly();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=II();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Ly();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,cn()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Kf();const o=$0(),a=function(){return $0()}();return n.forEach((u,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof p_)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),z0(h.mutation,c,h.mutation.getFieldMask(),ks.now())):o.set(c.key,pl.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new fdt(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const s=$0();let r=new Dr((o,a)=>o-a),i=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=s.get(u)||pl.empty();h=a.applyToLocalView(c,h),s.set(u,h);const d=(r.get(a.batchId)||cn()).add(u);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=h0e();h.forEach(p=>{if(!i.has(p)){const m=_0e(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return ce.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(i){return Ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ght(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):ce.resolve(Ly());let a=Uk,u=i;return o.next(c=>ce.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?ce.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,cn())).next(h=>({batchId:a,changes:c0e(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ze(n)).next(s=>{let r=II();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=II();return this.indexManager.getCollectionParents(e,i).next(a=>ce.forEach(a,u=>{const c=function(h,d){return new gV(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ko.newInvalidDocument(h)))});let a=II();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&z0(h.mutation,c,pl.empty(),ks.now()),yV(n,c)&&(a=a.insert(u,c))}),a})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class gdt{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Bh(s.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:rdt(s.bundledQuery),readTime:Bh(s.readTime)}}(n)),ce.resolve()}}/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mdt{constructor(){this.overlays=new Dr(Ze.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ly();return ce.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),ce.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),ce.resolve()}getOverlaysForCollection(e,n,s){const r=Ly(),i=n.length+1,o=new Ze(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Dr((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=Ly(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ly(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return ce.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new Oht(n,s));let i=this.qr.get(n);i===void 0&&(i=cn(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class _dt{constructor(){this.sessionToken=to.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cK{constructor(){this.Qr=new vi(xi.$r),this.Ur=new vi(xi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new xi(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new xi(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new Ze(new Ks([])),s=new xi(n,e),r=new xi(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ze(new Ks([])),s=new xi(n,e),r=new xi(n,e+1);let i=cn();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new xi(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class xi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ze.comparator(e.key,n.key)||sn(e.Yr,n.Yr)}static Kr(e,n){return sn(e.Yr,n.Yr)||Ze.comparator(e.key,n.key)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ydt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vi(xi.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dht(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new xi(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?eK:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new xi(n,0),r=new xi(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new vi(sn);return n.forEach(r=>{const i=new xi(r,0),o=new xi(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),ce.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Ze.isDocumentKey(i)||(i=i.child(""));const o=new xi(new Ze(i),0);let a=new vi(sn);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(u.Yr)),!0)},o),ce.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){$n(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ce.forEach(n.mutations,r=>{const i=new xi(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new xi(n,0),r=this.Zr.firstAfterOrEqual(s);return ce.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vdt{constructor(e){this.ri=e,this.docs=function(){return new Dr(Ze.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ce.resolve(s?s.document.mutableCopy():ko.newInvalidDocument(n))}getEntries(e,n){let s=Kf();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():ko.newInvalidDocument(r))}),ce.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Kf();const o=n.path,a=new Ze(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Wct(Hct(h),s)<=0||(r.has(h.key)||yV(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ct(9500)}ii(e,n){return ce.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new wdt(this)}getSize(e){return ce.resolve(this.size)}}class wdt extends ddt{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bdt{constructor(e){this.persistence=e,this.si=new fw(n=>sK(n),rK),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.oi=0,this._i=new cK,this.targetCount=0,this.ai=iT.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new iT(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ce.waitFor(i).next(()=>r)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return ce.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),ce.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),ce.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return ce.resolve(s)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class P0e{constructor(e,n){this.ui={},this.overlays={},this.ci=new dV(0),this.li=!1,this.li=!0,this.hi=new _dt,this.referenceDelegate=e(this),this.Pi=new bdt(this),this.indexManager=new idt,this.remoteDocumentCache=function(s){return new vdt(s)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new sdt(n),this.Ii=new gdt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mdt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new ydt(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Ne("MemoryPersistence","Starting transaction:",e);const r=new Edt(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return ce.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class Edt extends Gct{constructor(e){super(),this.currentSequenceNumber=e}}class hK{constructor(e){this.persistence=e,this.Ri=new cK,this.Vi=null}static mi(e){return new hK(e)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),ce.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,s=>{const r=Ze.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Vt.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pO{constructor(e,n){this.persistence=e,this.pi=new fw(s=>Xct(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=hdt(this,n)}static mi(e,n){return new pO(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return ce.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?ce.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Vt.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tx(e.data.value)),n}br(e,n,s){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return ce.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dK{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=cn(),r=cn();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dK(e,n.fromCache,s,r)}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Tdt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cdt{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Cat()?8:Qct(qo())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Tdt;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(lb()<=Gt.DEBUG&&Ne("QueryEngine","SDK will not create cache indexes for query:",ub(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(lb()<=Gt.DEBUG&&Ne("QueryEngine","Query:",ub(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(lb()<=Gt.DEBUG&&Ne("QueryEngine","The SDK decides to create cache indexes for query:",ub(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jh(n))):ce.resolve())}ys(e,n){if(_ie(n))return ce.resolve(null);let s=jh(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=$j(n,null,"F"),s=jh(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=cn(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,$j(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,s,r){return _ie(n)||r.isEqual(Vt.min())?ce.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?ce.resolve(null):(lb()<=Gt.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ub(n)),this.vs(e,o,n,zct(r,Uk)).next(a=>a))})}Ds(e,n){let s=new vi(l0e(e));return n.forEach((r,i)=>{yV(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return lb()<=Gt.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",ub(n)),this.ps.getDocumentsMatchingQuery(e,n,Pm.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const fK="LocalStore",Idt=3e8;class Sdt{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Dr(sn),this.xs=new fw(i=>sK(i),rK),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pdt(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kdt(t,e,n,s){return new Sdt(t,e,n,s)}async function x0e(t,e){const n=Dt(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let u=cn();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function Adt(t,e){const n=Dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const h=u.batch,d=h.keys();let p=ce.resolve();return d.forEach(m=>{p=p.next(()=>c.getEntry(a,m)).next(w=>{const k=u.docVersions.get(m);$n(k!==null,48541),w.version.compareTo(k)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=cn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function N0e(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Rdt(t,e){const n=Dt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(to.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(w,k,P){return w.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Idt?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let u=Kf(),c=cn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(Pdt(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!s.isEqual(Vt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return ce.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=r,i))}function Pdt(t,e,n){let s=cn(),r=cn();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Kf();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(Vt.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):Ne(fK,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:r}})}function xdt(t,e){const n=Dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=eK),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Ndt(t,e){const n=Dt(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,ce.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new dg(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Gj(t,e,n){const s=Dt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!oC(o))throw o;Ne(fK,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Pie(t,e,n){const s=Dt(t);let r=Vt.min(),i=cn();return s.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,c){const h=Dt(a),d=h.xs.get(c);return d!==void 0?ce.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(s,o,jh(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:Vt.min(),n?i:cn())).next(a=>(Ddt(s,_ht(e),a),{documents:a,Qs:i})))}function Ddt(t,e,n){let s=t.Os.get(e)||Vt.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class xie{constructor(){this.activeTargetIds=Tht()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Odt{constructor(){this.Mo=new xie,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xie,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ldt{Oo(e){}shutdown(){}}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Nie="ConnectivityMonitor";class Die{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ne(Nie,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ne(Nie,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let lP=null;function Qj(){return lP===null?lP=function(){return 268435456+Math.round(2147483648*Math.random())}():lP++,"0x"+lP.toString(16)}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const K6="RestConnection",Mdt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fdt{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===lO?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Qj(),a=this.zo(e,n.toUriEncodedString());Ne(K6,`Sending RPC '${e}' ${o}:`,a,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:c}=new URL(a),h=Td(c);return this.Jo(e,a,u,s,h).then(d=>(Ne(K6,`Received RPC '${e}' ${o}: `,d),d),d=>{throw tT(K6,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rC}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=Mdt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vdt{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const io="WebChannelConnection";class Udt extends Fdt{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Qj();return new Promise((a,u)=>{const c=new FIe;c.setWithCredentials(!0),c.listenOnce(VIe.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bx.NO_ERROR:const d=c.getResponseJson();Ne(io,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case bx.TIMEOUT:Ne(io,`RPC '${e}' ${o} timed out`),u(new Be(me.DEADLINE_EXCEEDED,"Request time out"));break;case bx.HTTP_ERROR:const p=c.getStatus();if(Ne(io,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(P){const O=P.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(O)>=0?O:me.UNKNOWN}(w.status);u(new Be(k,w.message))}else u(new Be(me.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Be(me.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Ne(io,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);Ne(io,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}T_(e,n,s){const r=Qj(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jIe(),a=qIe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");Ne(io,`Creating RPC '${e}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);this.I_(d);let p=!1,m=!1;const w=new Vdt({Yo:P=>{m?Ne(io,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(Ne(io,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),Ne(io,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,CI.EventType.OPEN,()=>{m||(Ne(io,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,CI.EventType.CLOSE,()=>{m||(m=!0,Ne(io,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,CI.EventType.ERROR,P=>{m||(m=!0,tT(io,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new Be(me.UNAVAILABLE,"The operation could not be completed")))}),k(d,CI.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];$n(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){Ne(io,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(I){const v=br[I];if(v!==void 0)return v0e(v)}(q),J=V.message;H===void 0&&(H=me.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new Be(H,J)),d.close()}else Ne(io,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),k(a,UIe.STAT_EVENT,P=>{P.stat===Mj.PROXY?Ne(io,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===Mj.NOPROXY&&Ne(io,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function G6(){return typeof document<"u"?document:null}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EV(t){return new $ht(t,!0)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class D0e{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&Ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Oie="PersistentStream";class O0e{constructor(e,n,s,r,i,o,a,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D0e(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(Wf(n.toString()),Wf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new Be(me.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ne(Oie,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ne(Oie,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qdt extends O0e{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Wht(this.serializer,e),s=function(r){if(!("targetChange"in r))return Vt.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?Vt.min():i.readTime?Bh(i.readTime):Vt.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Kj(this.serializer),n.addTarget=function(r,i){let o;const a=i.target;if(o=Bj(a)?{documents:Qht(r,a)}:{query:Yht(r,a).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=E0e(r,i.resumeToken);const u=zj(r,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Vt.min())>0){o.readTime=fO(r,i.snapshotVersion.toTimestamp());const u=zj(r,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=Jht(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Kj(this.serializer),n.removeTarget=e,this.q_(n)}}class jdt extends O0e{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return $n(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$n(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$n(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ght(e.writeResults,e.commitTime),s=Bh(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Kj(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Kht(this.serializer,s))};this.q_(n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Bdt{}class $dt extends Bdt{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Hj(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(me.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Hj(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(me.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zdt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wf(n),this.aa=!1):Ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Mv="RemoteStore";class Hdt{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{pw(this)&&(Ne(Mv,"Restarting streams for network reachability change."),await async function(a){const u=Dt(a);u.Ea.add(4),await zR(u),u.Ra.set("Unknown"),u.Ea.delete(4),await TV(u)}(this))})}),this.Ra=new zdt(s,r)}}async function TV(t){if(pw(t))for(const e of t.da)await e(!0)}async function zR(t){for(const e of t.da)await e(!1)}function L0e(t,e){const n=Dt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_K(n)?mK(n):aC(n).O_()&&gK(n,e))}function pK(t,e){const n=Dt(t),s=aC(n);n.Ia.delete(e),s.O_()&&M0e(n,e),n.Ia.size===0&&(s.O_()?s.L_():pw(n)&&n.Ra.set("Unknown"))}function gK(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Vt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}aC(t).Y_(e)}function M0e(t,e){t.Va.Ue(e),aC(t).Z_(e)}function mK(t){t.Va=new Uht({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),aC(t).start(),t.Ra.ua()}function _K(t){return pw(t)&&!aC(t).x_()&&t.Ia.size>0}function pw(t){return Dt(t).Ea.size===0}function F0e(t){t.Va=void 0}async function Wdt(t){t.Ra.set("Online")}async function Kdt(t){t.Ia.forEach((e,n)=>{gK(t,e)})}async function Gdt(t,e){F0e(t),_K(t)?(t.Ra.ha(e),mK(t)):t.Ra.set("Unknown")}async function Qdt(t,e,n){if(t.Ra.set("Online"),e instanceof b0e&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(s){Ne(Mv,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await gO(t,s)}else if(e instanceof Sx?t.Va.Ze(e):e instanceof w0e?t.Va.st(e):t.Va.tt(e),!n.isEqual(Vt.min()))try{const s=await N0e(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.Va.Tt(i);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Ia.get(u);c&&r.Ia.set(u,c.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,u)=>{const c=r.Ia.get(a);if(!c)return;r.Ia.set(a,c.withResumeToken(to.EMPTY_BYTE_STRING,c.snapshotVersion)),M0e(r,a);const h=new dg(c.target,a,u,c.sequenceNumber);gK(r,h)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){Ne(Mv,"Failed to raise snapshot:",s),await gO(t,s)}}async function gO(t,e,n){if(!oC(e))throw e;t.Ea.add(1),await zR(t),t.Ra.set("Offline"),n||(n=()=>N0e(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ne(Mv,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await TV(t)})}function V0e(t,e){return e().catch(n=>gO(t,n,e))}async function CV(t){const e=Dt(t),n=Om(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eK;for(;Ydt(e);)try{const r=await xdt(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,Xdt(e,r)}catch(r){await gO(e,r)}U0e(e)&&q0e(e)}function Ydt(t){return pw(t)&&t.Ta.length<10}function Xdt(t,e){t.Ta.push(e);const n=Om(t);n.O_()&&n.X_&&n.ea(e.mutations)}function U0e(t){return pw(t)&&!Om(t).x_()&&t.Ta.length>0}function q0e(t){Om(t).start()}async function Jdt(t){Om(t).ra()}async function Zdt(t){const e=Om(t);for(const n of t.Ta)e.ea(n.mutations)}async function eft(t,e,n){const s=t.Ta.shift(),r=aK.from(s,e,n);await V0e(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await CV(t)}async function tft(t,e){e&&Om(t).X_&&await async function(n,s){if(function(r){return Mht(r)&&r!==me.ABORTED}(s.code)){const r=n.Ta.shift();Om(n).B_(),await V0e(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await CV(n)}}(t,e),U0e(t)&&q0e(t)}async function Lie(t,e){const n=Dt(t);n.asyncQueue.verifyOperationInProgress(),Ne(Mv,"RemoteStore received new credentials");const s=pw(n);n.Ea.add(3),await zR(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await TV(n)}async function nft(t,e){const n=Dt(t);e?(n.Ea.delete(2),await TV(n)):e||(n.Ea.add(2),await zR(n),n.Ra.set("Unknown"))}function aC(t){return t.ma||(t.ma=function(e,n,s){const r=Dt(e);return r.sa(),new qdt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Wdt.bind(null,t),t_:Kdt.bind(null,t),r_:Gdt.bind(null,t),H_:Qdt.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_K(t)?mK(t):t.Ra.set("Unknown")):(await t.ma.stop(),F0e(t))})),t.ma}function Om(t){return t.fa||(t.fa=function(e,n,s){const r=Dt(e);return r.sa(),new jdt(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jdt.bind(null,t),r_:tft.bind(null,t),ta:Zdt.bind(null,t),na:eft.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await CV(t)):(await t.fa.stop(),t.Ta.length>0&&(Ne(Mv,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class yK{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Fg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new yK(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vK(t,e){if(Wf("AsyncQueue",`${e}: ${t}`),oC(t))return new Be(me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Zb{static emptySet(e){return new Zb(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ze.comparator(n.key,s.key):(n,s)=>Ze.comparator(n.key,s.key),this.keyedMap=II(),this.sortedSet=new Dr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zb)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Zb;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mie{constructor(){this.ga=new Dr(Ze.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ct(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class oT{constructor(e,n,s,r,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new oT(e,n,Zb.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_V(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class sft{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rft{constructor(){this.queries=Fie(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,n){const s=Dt(e),r=s.queries;s.queries=Fie(),r.forEach((i,o)=>{for(const a of o.Sa)a.onError(n)})})(this,new Be(me.ABORTED,"Firestore shutting down"))}}function Fie(){return new fw(t=>a0e(t),_V)}async function j0e(t,e){const n=Dt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new sft,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=vK(o,`Initialization of query '${ub(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&wK(n)}async function B0e(t,e){const n=Dt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ift(t,e){const n=Dt(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&wK(n)}function oft(t,e,n){const s=Dt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function wK(t){t.Ca.forEach(e=>{e.next()})}var Yj,Vie;(Vie=Yj||(Yj={})).Ma="default",Vie.Cache="cache";class $0e{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new oT(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=oT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yj.Cache}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class z0e{constructor(e){this.key=e}}class H0e{constructor(e){this.key=e}}class aft{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cn(),this.mutatedKeys=cn(),this.eu=l0e(e),this.tu=new Zb(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Mie,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=yV(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(u&&this.eu(m,u)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(p,m){const w=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:k})}};return w(p)-w(m)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new oT(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mie,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cn(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new H0e(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new z0e(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=cn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return oT.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bK="SyncEngine";class lft{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class uft{constructor(e){this.key=e,this.hu=!1}}class cft{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new fw(a=>a0e(a),_V),this.Iu=new Map,this.Eu=new Set,this.du=new Dr(Ze.comparator),this.Au=new Map,this.Ru=new cK,this.Vu={},this.mu=new Map,this.fu=iT.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hft(t,e,n=!0){const s=X0e(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await W0e(s,e,n,!0),r}async function dft(t,e){const n=X0e(t);await W0e(n,e,!0,!1)}async function W0e(t,e,n,s){const r=await Ndt(t.localStore,jh(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await fft(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&L0e(t.remoteStore,r),a}async function fft(t,e,n,s,r){t.pu=(d,p,m)=>async function(w,k,P,O){let M=k.view.ru(P);M.Cs&&(M=await Pie(w.localStore,k.query,!1).then(({documents:J})=>k.view.ru(J,M)));const V=O&&O.targetChanges.get(k.targetId),q=O&&O.targetMismatches.get(k.targetId)!=null,H=k.view.applyChanges(M,w.isPrimaryClient,V,q);return qie(w,k.targetId,H.au),H.snapshot}(t,d,p,m);const i=await Pie(t.localStore,e,!0),o=new aft(e,i.Qs),a=o.ru(i.documents),u=$R.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,u);qie(t,n,c.au);const h=new lft(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function pft(t,e,n){const s=Dt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!_V(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Gj(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&pK(s.remoteStore,r.targetId),Xj(s,r.targetId)}).catch(iC)):(Xj(s,r.targetId),await Gj(s.localStore,r.targetId,!0))}async function gft(t,e){const n=Dt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),pK(n.remoteStore,s.targetId))}async function mft(t,e,n){const s=Tft(t);try{const r=await function(i,o){const a=Dt(i),u=ks.now(),c=o.reduce((p,m)=>p.add(m.key),cn());let h,d;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=Kf(),w=cn();return a.Ns.getEntries(p,c).next(k=>{m=k,m.forEach((P,O)=>{O.isValidDocument()||(w=w.add(P))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,m)).next(k=>{h=k;const P=[];for(const O of o){const M=xht(O,h.get(O.key).overlayedDocument);M!=null&&P.push(new p_(O.key,M,e0e(M.value.mapValue),Dc.exists(!0)))}return a.mutationQueue.addMutationBatch(p,u,P,o)}).next(k=>{d=k;const P=k.applyToLocalDocumentSet(h,w);return a.documentOverlayCache.saveOverlays(p,k.batchId,P)})}).then(()=>({batchId:d.batchId,changes:c0e(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let u=i.Vu[i.currentUser.toKey()];u||(u=new Dr(sn)),u=u.insert(o,a),i.Vu[i.currentUser.toKey()]=u}(s,r.batchId,n),await HR(s,r.changes),await CV(s.remoteStore)}catch(r){const i=vK(r,"Failed to persist write");n.reject(i)}}async function K0e(t,e){const n=Dt(t);try{const s=await Rdt(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&($n(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?$n(o.hu,14607):r.removedDocuments.size>0&&($n(o.hu,42227),o.hu=!1))}),await HR(n,s,e)}catch(s){await iC(s)}}function Uie(t,e,n){const s=Dt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=Dt(i);a.onlineState=o;let u=!1;a.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&wK(a)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _ft(t,e,n){const s=Dt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Dr(Ze.comparator);o=o.insert(i,ko.newNoDocument(i,Vt.min()));const a=cn().add(i),u=new bV(Vt.min(),new Map,new Dr(sn),o,a);await K0e(s,u),s.du=s.du.remove(i),s.Au.delete(e),EK(s)}else await Gj(s.localStore,e,!1).then(()=>Xj(s,e,n)).catch(iC)}async function yft(t,e){const n=Dt(t),s=e.batch.batchId;try{const r=await Adt(n.localStore,e);Q0e(n,s,null),G0e(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await HR(n,r)}catch(r){await iC(r)}}async function vft(t,e,n){const s=Dt(t);try{const r=await function(i,o){const a=Dt(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(h=>($n(h!==null,37113),c=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(s.localStore,e);Q0e(s,e,n),G0e(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await HR(s,r)}catch(r){await iC(r)}}function G0e(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Q0e(t,e,n){const s=Dt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Xj(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||Y0e(t,s)})}function Y0e(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pK(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),EK(t))}function qie(t,e,n){for(const s of n)s instanceof z0e?(t.Ru.addReference(s.key,e),wft(t,s)):s instanceof H0e?(Ne(bK,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||Y0e(t,s.key)):ct(19791,{wu:s})}function wft(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(Ne(bK,"New document in limbo: "+n),t.Eu.add(s),EK(t))}function EK(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ze(Ks.fromString(e)),s=t.fu.next();t.Au.set(s,new uft(n)),t.du=t.du.insert(n,s),L0e(t.remoteStore,new dg(jh(mV(n.path)),s,"TargetPurposeLimboResolution",dV.ce))}}async function HR(t,e,n){const s=Dt(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,u)=>{o.push(s.pu(u,e,n).then(c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(u.targetId)?.current;s.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=dK.As(u.targetId,c);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(a,u){const c=Dt(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ce.forEach(u,d=>ce.forEach(d.Es,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>ce.forEach(d.ds,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!oC(h))throw h;Ne(fK,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.Ms.get(d),m=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(m);c.Ms=c.Ms.insert(d,w)}}}(s.localStore,i))}async function bft(t,e){const n=Dt(t);if(!n.currentUser.isEqual(e)){Ne(bK,"User change. New user:",e.toKey());const s=await x0e(n.localStore,e);n.currentUser=e,function(r,i){r.mu.forEach(o=>{o.forEach(a=>{a.reject(new Be(me.CANCELLED,i))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await HR(n,s.Ls)}}function Eft(t,e){const n=Dt(t),s=n.Au.get(e);if(s&&s.hu)return cn().add(s.key);{let r=cn();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function X0e(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K0e.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eft.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_ft.bind(null,e),e.Pu.H_=ift.bind(null,e.eventManager),e.Pu.yu=oft.bind(null,e.eventManager),e}function Tft(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yft.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vft.bind(null,e),e}class mO{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=EV(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kdt(this.persistence,new Cdt,e.initialUser,this.serializer)}Cu(e){return new P0e(hK.mi,this.serializer)}Du(e){return new Odt}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mO.provider={build:()=>new mO};class Cft extends mO{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){$n(this.persistence.referenceDelegate instanceof pO,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new udt(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ma.withCacheSize(this.cacheSizeBytes):Ma.DEFAULT;return new P0e(s=>pO.mi(s,n),this.serializer)}}class Jj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Uie(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bft.bind(null,this.syncEngine),await nft(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rft}()}createDatastore(e){const n=EV(e.databaseInfo.databaseId),s=function(r){return new Udt(r)}(e.databaseInfo);return function(r,i,o,a){return new $dt(r,i,o,a)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(n,s,r,i,o){return new Hdt(n,s,r,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Uie(this.syncEngine,n,0),function(){return Die.v()?new Die:new Ldt}())}createSyncEngine(e,n){return function(s,r,i,o,a,u,c){const h=new cft(s,r,i,o,a,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(e){const n=Dt(e);Ne(Mv,"RemoteStore shutting down."),n.Ea.add(5),await zR(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jj.provider={build:()=>new Jj};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*//**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class J0e{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Lm="FirestoreClient";class Ift{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=yo.UNAUTHENTICATED,this.clientId=J8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{Ne(Lm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(Ne(Lm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=vK(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Q6(t,e){t.asyncQueue.verifyOperationInProgress(),Ne(Lm,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await x0e(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jie(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Sft(t);Ne(Lm,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Lie(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Lie(e.remoteStore,r)),t._onlineComponents=e}async function Sft(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ne(Lm,"Using user provided OfflineComponentProvider");try{await Q6(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===me.FAILED_PRECONDITION||s.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;tT("Error using user provided cache. Falling back to memory cache: "+n),await Q6(t,new mO)}}else Ne(Lm,"Using default OfflineComponentProvider"),await Q6(t,new Cft(void 0));return t._offlineComponents}async function Z0e(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ne(Lm,"Using user provided OnlineComponentProvider"),await jie(t,t._uninitializedComponentsProvider._online)):(Ne(Lm,"Using default OnlineComponentProvider"),await jie(t,new Jj))),t._onlineComponents}function kft(t){return Z0e(t).then(e=>e.syncEngine)}async function Zj(t){const e=await Z0e(t),n=e.eventManager;return n.onListen=hft.bind(null,e.syncEngine),n.onUnlisten=pft.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dft.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gft.bind(null,e.syncEngine),n}function Aft(t,e,n={}){const s=new Fg;return t.asyncQueue.enqueueAndForget(async()=>function(r,i,o,a,u){const c=new J0e({next:d=>{c.Nu(),i.enqueueAndForget(()=>B0e(r,h));const p=d.docs.has(o);!p&&d.fromCache?u.reject(new Be(me.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&a&&a.source==="server"?u.reject(new Be(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new $0e(mV(o.path),c,{includeMetadataChanges:!0,qa:!0});return j0e(r,h)}(await Zj(t),t.asyncQueue,e,n,s)),s.promise}/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eSe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Bie=new Map;/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tSe="firestore.googleapis.com",$ie=!0;class zie{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Be(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tSe,this.ssl=$ie}else this.host=e.host,this.ssl=e.ssl??$ie;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R0e;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<adt)throw new Be(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$ct("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eSe(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Be(me.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class TK{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zie({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zie(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Nct;switch(n.type){case"firstParty":return new Mct(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Be(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Bie.get(e);n&&(Ne("ComponentProvider","Removing Datastore"),Bie.delete(e),n.terminate())}(this),Promise.resolve()}}function Rft(t,e,n,s={}){t=Nc(t,TK);const r=Td(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(rV(`https://${a}`),iV("Firestore",!0)),i.host!==tSe&&i.host!==a&&tT("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:r,emulatorOptions:s};if(!km(u,o)&&(t._setSettings(u),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=yo.MOCK_USER;else{c=L8(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Be(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yo(d)}t._authCredentials=new Dct(new $Ie(c,h))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class IV{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new IV(this.firestore,e,this._query)}}class kr{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kr(this.firestore,e,this._key)}toJSON(){return{type:kr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(jR(n,kr._jsonSchema))return new kr(e,s||null,new Ze(Ks.fromString(n.referencePath)))}}kr._jsonSchemaVersion="firestore/documentReference/1.0",kr._jsonSchema={type:Sr("string",kr._jsonSchemaVersion),referencePath:Sr("string")};class Wk extends IV{constructor(e,n,s){super(e,n,mV(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kr(this.firestore,null,new Ze(e))}withConverter(e){return new Wk(this.firestore,e,this._path)}}function nSe(t,e,...n){if(t=Kn(t),arguments.length===1&&(e=J8.newId()),Bct("doc","path",e),t instanceof TK){const s=Ks.fromString(e,...n);return rie(s),new kr(t,null,new Ze(s))}{if(!(t instanceof kr||t instanceof Wk))throw new Be(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ks.fromString(e,...n));return rie(s),new kr(t.firestore,t instanceof Wk?t.converter:null,new Ze(s))}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Hie="AsyncQueue";class Wie{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D0e(this,"async_queue_retry"),this._c=()=>{const s=G6();s&&Ne(Hie,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=G6();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=G6();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fg;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oC(e))throw e;Ne(Hie,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,Wf("INTERNAL UNHANDLED ERROR: ",Kie(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=yK.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ct(47125,{Pc:Kie(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Kie(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gie(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Fv extends TK{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Wie,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wie(e),this._firestoreClient=void 0,await e}}}function sSe(t,e){const n=typeof t=="object"?t:lV(),s=typeof t=="string"?t:lO,r=FR(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=O8("firestore");i&&Rft(r,...i)}return r}function CK(t){if(t._terminated)throw new Be(me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Pft(t),t._firestoreClient}function Pft(t){const e=t._freezeSettings(),n=function(s,r,i,o){return new eht(s,r,i,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,eSe(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ift(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}}(t._componentsProvider))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nl(to.fromBase64String(e))}catch(n){throw new Be(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Nl(to.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jR(e,Nl._jsonSchema))return Nl.fromBase64String(e.bytes)}}Nl._jsonSchemaVersion="firestore/bytes/1.0",Nl._jsonSchema={type:Sr("string",Nl._jsonSchemaVersion),bytes:Sr("string")};/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class SV{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class kV{constructor(e){this._methodName=e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class $h{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$h._jsonSchemaVersion}}static fromJSON(e){if(jR(e,$h._jsonSchema))return new $h(e.latitude,e.longitude)}}$h._jsonSchemaVersion="firestore/geoPoint/1.0",$h._jsonSchema={type:Sr("string",$h._jsonSchemaVersion),latitude:Sr("number"),longitude:Sr("number")};/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:zh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jR(e,zh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new zh(e.vectorValues);throw new Be(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zh._jsonSchemaVersion="firestore/vectorValue/1.0",zh._jsonSchema={type:Sr("string",zh._jsonSchemaVersion),vectorValues:Sr("object")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const xft=/^__.*__$/;class Nft{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new p_(e,this.data,this.fieldMask,n,this.fieldTransforms):new BR(e,this.data,n,this.fieldTransforms)}}class rSe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new p_(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iSe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:t})}}class IK{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new IK({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _O(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iSe(this.Ac)&&xft.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dft{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||EV(e)}Cc(e,n,s,r=!1){return new IK({Ac:e,methodName:n,Dc:s,path:Qi.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oSe(t){const e=t._freezeSettings(),n=EV(t._databaseId);return new Dft(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Oft(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);kK("Data must be an object, but it was:",o,s);const a=aSe(s,o);let u,c;if(i.merge)u=new pl(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=eB(e,d,n);if(!o.contains(p))throw new Be(me.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);uSe(h,p)||h.push(p)}u=new pl(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Nft(new qa(a),u,c)}class AV extends kV{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AV}}class SK extends kV{_toFieldTransform(e){return new kht(e.path,new $k)}isEqual(e){return e instanceof SK}}function Lft(t,e,n,s){const r=t.Cc(1,e,n);kK("Data must be an object, but it was:",r,s);const i=[],o=qa.empty();f_(s,(u,c)=>{const h=AK(e,u,n);c=Kn(c);const d=r.yc(h);if(c instanceof AV)i.push(h);else{const p=RV(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new pl(i);return new rSe(o,a,r.fieldTransforms)}function Mft(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[eB(e,s,n)],u=[r];if(i.length%2!=0)throw new Be(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(eB(e,i[p])),u.push(i[p+1]);const c=[],h=qa.empty();for(let p=a.length-1;p>=0;--p)if(!uSe(c,a[p])){const m=a[p];let w=u[p];w=Kn(w);const k=o.yc(m);if(w instanceof AV)c.push(m);else{const P=RV(w,k);P!=null&&(c.push(m),h.set(m,P))}}const d=new pl(c);return new rSe(h,d,o.fieldTransforms)}function RV(t,e){if(lSe(t=Kn(t)))return kK("Unsupported field value:",e,t),aSe(t,e);if(t instanceof kV)return function(n,s){if(!iSe(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=RV(o,s.wc(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Kn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Cht(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ks.fromDate(n);return{timestampValue:fO(s.serializer,r)}}if(n instanceof ks){const r=new ks(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:fO(s.serializer,r)}}if(n instanceof $h)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nl)return{bytesValue:E0e(s.serializer,n._byteString)};if(n instanceof kr){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:uK(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof zh)return function(r,i){return{mapValue:{fields:{[JIe]:{stringValue:ZIe},[uO]:{arrayValue:{values:r.toArray().map(o=>{if(typeof o!="number")throw i.Sc("VectorValues must only contain numeric values.");return iK(i.serializer,o)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${Z8(n)}`)}(t,e)}function aSe(t,e){const n={};return WIe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):f_(t,(s,r)=>{const i=RV(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function lSe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ks||t instanceof $h||t instanceof Nl||t instanceof kr||t instanceof kV||t instanceof zh)}function kK(t,e,n){if(!lSe(n)||!zIe(n)){const s=Z8(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function eB(t,e,n){if((e=Kn(e))instanceof SV)return e._internalPath;if(typeof e=="string")return AK(t,e);throw _O("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fft=new RegExp("[~\\*/\\[\\]]");function AK(t,e,n){if(e.search(Fft)>=0)throw _O(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new SV(...e.split("."))._internalPath}catch{throw _O(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _O(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new Be(me.INVALID_ARGUMENT,a+t+u)}function uSe(t,e){return t.some(n=>n.isEqual(e))}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class cSe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vft(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hSe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vft extends cSe{data(){return super.data()}}function hSe(t,e){return typeof e=="string"?AK(t,e):e instanceof SV?e._internalPath:e._delegate._internalPath}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uft(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qft{convertValue(e,n="none"){switch(Dm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ct(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return f_(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[uO].arrayValue?.values?.map(s=>_r(s.doubleValue));return new zh(n)}convertGeoPoint(e){return new $h(_r(e.latitude),_r(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pV(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(qk(e));default:return null}}convertTimestamp(e){const n=xm(e);return new ks(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ks.fromString(e);$n(A0e(s),9688,{name:e});const r=new jk(s.get(1),s.get(3)),i=new Ze(s.popFirst(5));return r.isEqual(n)||Wf(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jft(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class kI{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ov extends cSe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hSe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ov._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()||(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED")),n}}ov._jsonSchemaVersion="firestore/documentSnapshot/1.0",ov._jsonSchema={type:Sr("string",ov._jsonSchemaVersion),bundleSource:Sr("string","DocumentSnapshot"),bundleName:Sr("string"),bundle:Sr("string")};class kx extends ov{data(e={}){return super.data(e)}}class eE{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new kI(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new kx(this._firestore,this._userDataWriter,s.key,s,new kI(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new kx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new kI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new kx(s._firestore,s._userDataWriter,o.doc.key,o.doc,new kI(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,c=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),c=i.indexOf(o.doc.key)),{type:Bft(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eE._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=J8.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Bft(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:t})}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tB(t){t=Nc(t,kr);const e=Nc(t.firestore,Fv);return Aft(CK(e),t._key).then(n=>fSe(e,t,n))}eE._jsonSchemaVersion="firestore/querySnapshot/1.0",eE._jsonSchema={type:Sr("string",eE._jsonSchemaVersion),bundleSource:Sr("string","QuerySnapshot"),bundleName:Sr("string"),bundle:Sr("string")};class dSe extends qft{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,n)}}function nB(t,e,n){t=Nc(t,kr);const s=Nc(t.firestore,Fv),r=jft(t.converter,e,n);return RK(s,[Oft(oSe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Dc.none())])}function $ft(t,e,n,...s){t=Nc(t,kr);const r=Nc(t.firestore,Fv),i=oSe(r);let o;return o=typeof(e=Kn(e))=="string"||e instanceof SV?Mft(i,"updateDoc",t._key,e,n,s):Lft(i,"updateDoc",t._key,e),RK(r,[o.toMutation(t._key,Dc.exists(!0))])}function zft(t){return RK(Nc(t.firestore,Fv),[new oK(t._key,Dc.none())])}function Hft(t,...e){t=Kn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Gie(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Gie(e[s])){const u=e[s];e[s]=u.next?.bind(u),e[s+1]=u.error?.bind(u),e[s+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof kr)o=Nc(t.firestore,Fv),a=mV(t._key.path),i={next:u=>{e[s]&&e[s](fSe(o,t,u))},error:e[s+1],complete:e[s+2]};else{const u=Nc(t,IV);o=Nc(u.firestore,Fv),a=u._query;const c=new dSe(o);i={next:h=>{e[s]&&e[s](new eE(o,c,u,h))},error:e[s+1],complete:e[s+2]},Uft(t._query)}return function(u,c,h,d){const p=new J0e(d),m=new $0e(c,p,h);return u.asyncQueue.enqueueAndForget(async()=>j0e(await Zj(u),m)),()=>{p.Nu(),u.asyncQueue.enqueueAndForget(async()=>B0e(await Zj(u),m))}}(CK(o),a,r,i)}function RK(t,e){return function(n,s){const r=new Fg;return n.asyncQueue.enqueueAndForget(async()=>mft(await kft(n),s,r)),r.promise}(CK(t),e)}function fSe(t,e,n){const s=n.docs.get(e._key),r=new dSe(t);return new ov(t,r,e._key,s,new kI(n.hasPendingWrites,n.fromCache),e.converter)}function Ax(){return new SK("serverTimestamp")}(function(t,e=!0){(function(n){rC=n})(d_),Am(new $f("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Fv(new Oct(n.getProvider("auth-internal")),new Fct(i,n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Be(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jk(a.options.projectId,u)}(i,s),i);return r={useFetchStreams:e,...r},o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ql(eie,tie,t),ql(eie,tie,"esm2020")})();var Wft="firebase",Kft="12.0.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/ql(Wft,Kft,"app");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const pSe="firebasestorage.googleapis.com",gSe="storageBucket",Gft=120*1e3,Qft=600*1e3;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class fr extends Cd{constructor(e,n,s=0){super(Y6(e),`Firebase Storage: ${n} (${Y6(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Y6(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cr||(cr={}));function Y6(t){return"storage/"+t}function PK(){const t="An unknown error occurred, please check the error payload for server response.";return new fr(cr.UNKNOWN,t)}function Yft(t){return new fr(cr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Xft(t){return new fr(cr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jft(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fr(cr.UNAUTHENTICATED,t)}function Zft(){return new fr(cr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ept(t){return new fr(cr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function tpt(){return new fr(cr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function npt(){return new fr(cr.CANCELED,"User canceled the upload/download.")}function spt(t){return new fr(cr.INVALID_URL,"Invalid URL '"+t+"'.")}function rpt(t){return new fr(cr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ipt(){return new fr(cr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gSe+"' property when initializing the app?")}function opt(){return new fr(cr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function apt(){return new fr(cr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lpt(t){return new fr(cr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sB(t){return new fr(cr.INVALID_ARGUMENT,t)}function mSe(){return new fr(cr.APP_DELETED,"The Firebase app was deleted.")}function upt(t){return new fr(cr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function H0(t,e){return new fr(cr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function WC(t){throw new fr(cr.INTERNAL_ERROR,"Internal error: "+t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ka{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ka.makeFromUrl(e,n)}catch{return new ka(e,"")}if(s.path==="")return s;throw rpt(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function c(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===pSe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${k}/${r}/${P}`,"i"),M=[{regex:a,indices:u,postModify:i},{regex:m,indices:w,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let V=0;V<M.length;V++){const q=M[V],H=q.regex.exec(e);if(H){const J=H[q.indices.bucket];let I=H[q.indices.path];I||(I=""),s=new ka(J,I),q.postModify(s);break}}if(s==null)throw spt(e);return s}}class cpt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hpt(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,u())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(c){p();return}if(P){p(),h.call(null,P,...O);return}if(u()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,d(M)}let w=!1;function k(P){w||(w=!0,p(),!c&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function dpt(t){t(!1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fpt(t){return t!==void 0}function ppt(t){return typeof t=="object"&&!Array.isArray(t)}function xK(t){return typeof t=="string"||t instanceof String}function Qie(t){return NK()&&t instanceof Blob}function NK(){return typeof Blob<"u"}function rB(t,e,n,s){if(s<e)throw sB(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw sB(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WR(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function _Se(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var av;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(av||(av={}));/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gpt(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class mpt{constructor(e,n,s,r,i,o,a,u,c,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new uP(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===av.NO_ERROR,u=i.getStatus();if(!a||gpt(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===av.ABORT;s(!1,new uP(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;s(!0,new uP(c,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());fpt(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=PK();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(r.canceled){const u=this.appDelete_?mSe():npt();o(u)}else{const u=tpt();o(u)}};this.canceled_?n(!1,new uP(!1,null,!0)):this.backoffId_=hpt(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dpt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uP{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function _pt(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ypt(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function vpt(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wpt(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function bpt(t,e,n,s,r,i,o=!0,a=!1){const u=_Se(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return vpt(h,e),_pt(h,n),ypt(h,i),wpt(h,s),new mpt(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ept(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Tpt(...t){const e=Ept();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(NK())return new Blob(t);throw new fr(cr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Cpt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ipt(t){if(typeof atob>"u")throw lpt("base-64");return atob(t)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const hc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class X6{constructor(e,n){this.data=e,this.contentType=n||null}}function ySe(t,e){switch(t){case hc.RAW:return new X6(vSe(e));case hc.BASE64:case hc.BASE64URL:return new X6(wSe(t,e));case hc.DATA_URL:return new X6(kpt(e),Apt(e))}throw PK()}function vSe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=s,i=t.charCodeAt(++n);s=65536|(r&1023)<<10|i&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function Spt(t){let e;try{e=decodeURIComponent(t)}catch{throw H0(hc.DATA_URL,"Malformed data URL.")}return vSe(e)}function wSe(t,e){switch(t){case hc.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw H0(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case hc.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw H0(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ipt(e)}catch(r){throw r.message.includes("polyfill")?r:H0(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class bSe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw H0(hc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=Rpt(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function kpt(t){const e=new bSe(t);return e.base64?wSe(hc.BASE64,e.rest):Spt(e.rest)}function Apt(t){return new bSe(t).contentType}function Rpt(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class rg{constructor(e,n){let s=0,r="";Qie(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Qie(this.data_)){const s=this.data_,r=Cpt(s,e,n);return r===null?null:new rg(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new rg(s,!0)}}static getBlob(...e){if(NK()){const n=e.map(s=>s instanceof rg?s.data_:s);return new rg(Tpt.apply(null,n))}else{const n=e.map(o=>xK(o)?ySe(hc.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new rg(r,!0)}}uploadData(){return this.data_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DK(t){let e;try{e=JSON.parse(t)}catch{return null}return ppt(e)?e:null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ppt(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function xpt(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function ESe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Npt(t,e){return e}class ra{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||Npt}}let cP=null;function Dpt(t){return!xK(t)||t.length<2?t:ESe(t)}function TSe(){if(cP)return cP;const t=[];t.push(new ra("bucket")),t.push(new ra("generation")),t.push(new ra("metageneration")),t.push(new ra("name","fullPath",!0));function e(i,o){return Dpt(o)}const n=new ra("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new ra("size");return r.xform=s,t.push(r),t.push(new ra("timeCreated")),t.push(new ra("updated")),t.push(new ra("md5Hash",null,!0)),t.push(new ra("cacheControl",null,!0)),t.push(new ra("contentDisposition",null,!0)),t.push(new ra("contentEncoding",null,!0)),t.push(new ra("contentLanguage",null,!0)),t.push(new ra("contentType",null,!0)),t.push(new ra("metadata","customMetadata",!0)),cP=t,cP}function Opt(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new ka(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Lpt(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return Opt(s,t),s}function CSe(t,e,n){const s=DK(e);return s===null?null:Lpt(t,s,n)}function Mpt(t,e,n,s){const r=DK(e);if(r===null||!xK(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(a=>{const u=t.bucket,c=t.fullPath,h="/b/"+o(u)+"/o/"+o(c),d=WR(h,n,s),p=_Se({alt:"media",token:a});return d+p})[0]}function Fpt(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Yie="prefixes",Xie="items";function Vpt(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Yie])for(const r of n[Yie]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new ka(e,i));s.prefixes.push(o)}if(n[Xie])for(const r of n[Xie]){const i=t._makeStorageReference(new ka(e,r.name));s.items.push(i)}return s}function Upt(t,e,n){const s=DK(n);return s===null?null:Vpt(t,e,s)}class PV{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OK(t){if(!t)throw PK()}function qpt(t,e){function n(s,r){const i=CSe(t,r,e);return OK(i!==null),i}return n}function jpt(t,e){function n(s,r){const i=Upt(t,e,r);return OK(i!==null),i}return n}function Bpt(t,e){function n(s,r){const i=CSe(t,r,e);return OK(i!==null),Mpt(i,r,t.host,t._protocol)}return n}function LK(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Zft():r=Jft():n.getStatus()===402?r=Xft(t.bucket):n.getStatus()===403?r=ept(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function ISe(t){const e=LK(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=Yft(t.path)),i.serverResponse=r.serverResponse,i}return n}function $pt(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=WR(o,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,h=new PV(a,u,jpt(t,e.bucket),c);return h.urlParams=i,h.errorHandler=LK(e),h}function zpt(t,e,n){const s=e.fullServerUrl(),r=WR(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new PV(r,i,Bpt(t,n),o);return a.errorHandler=ISe(e),a}function Hpt(t,e){const n=e.fullServerUrl(),s=WR(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new PV(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=ISe(e),a}function Wpt(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kpt(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=Wpt(null,e)),s}function Gpt(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=Kpt(e,s,r),h=Fpt(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",m=rg.getBlob(d,s,p);if(m===null)throw opt();const w={name:c.fullPath},k=WR(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new PV(k,P,qpt(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=LK(e),M}class Qpt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=av.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=av.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=av.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw WC("cannot .send() more than once");if(Td(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw WC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw WC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw WC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw WC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Ypt extends Qpt{initXhr(){this.xhr_.responseType="text"}}function xV(){return new Ypt}/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vv{constructor(e,n){this._service=e,n instanceof ka?this._location=n:this._location=ka.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vv(e,n)}get root(){const e=new ka(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ESe(this._location.path)}get storage(){return this._service}get parent(){const e=Ppt(this._location.path);if(e===null)return null;const n=new ka(this._location.bucket,e);return new Vv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw upt(e)}}function Xpt(t,e,n){t._throwIfRoot("uploadBytes");const s=Gpt(t.storage,t._location,TSe(),new rg(e,!0),n);return t.storage.makeRequestWithTokens(s,xV).then(r=>({metadata:r,ref:t}))}function Jpt(t,e,n=hc.RAW,s){t._throwIfRoot("uploadString");const r=ySe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),Xpt(t,r.data,i)}function Zpt(t){const e={prefixes:[],items:[]};return SSe(t,e).then(()=>e)}async function SSe(t,e,n){const s=await egt(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await SSe(t,e,s.nextPageToken)}function egt(t,e){e!=null&&typeof e.maxResults=="number"&&rB("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=$pt(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,xV)}function tgt(t){t._throwIfRoot("getDownloadURL");const e=zpt(t.storage,t._location,TSe());return t.storage.makeRequestWithTokens(e,xV).then(n=>{if(n===null)throw apt();return n})}function ngt(t){t._throwIfRoot("deleteObject");const e=Hpt(t.storage,t._location);return t.storage.makeRequestWithTokens(e,xV)}function sgt(t,e){const n=xpt(t._location.path,e),s=new ka(t._location.bucket,n);return new Vv(t.storage,s)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rgt(t){return/^[A-Za-z]+:\/\//.test(t)}function igt(t,e){return new Vv(t,e)}function kSe(t,e){if(t instanceof MK){const n=t;if(n._bucket==null)throw ipt();const s=new Vv(n,n._bucket);return e!=null?kSe(s,e):s}else return e!==void 0?sgt(t,e):t}function ogt(t,e){if(e&&rgt(e)){if(t instanceof MK)return igt(t,e);throw sB("To use ref(service, url), the first argument must be a Storage instance.")}else return kSe(t,e)}function Jie(t,e){const n=e?.[gSe];return n==null?null:ka.makeFromBucketSpec(n,t)}function agt(t,e,n,s={}){t.host=`${e}:${n}`;const r=Td(e);r&&(rV(`https://${t.host}/b`),iV("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:L8(i,t.app.options.projectId))}class MK{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=pSe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gft,this._maxUploadRetryTime=Qft,this._requests=new Set,r!=null?this._bucket=ka.makeFromBucketSpec(r,this._host):this._bucket=Jie(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ka.makeFromBucketSpec(this._url,e):this._bucket=Jie(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(il(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vv(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new cpt(mSe());{const o=bpt(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const Zie="@firebase/storage",eoe="0.14.0";/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ASe="storage";function lgt(t,e,n,s){return t=Kn(t),Jpt(t,e,n,s)}function ugt(t){return t=Kn(t),Zpt(t)}function cgt(t){return t=Kn(t),tgt(t)}function hgt(t){return t=Kn(t),ngt(t)}function dgt(t,e){return t=Kn(t),ogt(t,e)}function fgt(t=lV(),e){t=Kn(t);const n=FR(t,ASe).getImmediate({identifier:e}),s=O8("storage");return s&&pgt(n,...s),n}function pgt(t,e,n,s={}){agt(t,e,n,s)}function ggt(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new MK(n,s,r,e,d_)}function mgt(){Am(new $f(ASe,ggt,"PUBLIC").setMultipleInstances(!0)),ql(Zie,eoe,""),ql(Zie,eoe,"esm2020")}mgt();var toe={};const noe="@firebase/database",soe="1.1.0";/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let RSe="";function _gt(t){RSe=t}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class ygt{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Mk(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vgt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return dp(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const PSe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ygt(e)}}catch{}return new vgt},My=PSe("localStorage"),wgt=PSe("sessionStorage");/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const tE=new aV("@firebase/database"),bgt=function(){let t=1;return function(){return t++}}(),xSe=function(t){const e=Mat(t),n=new Nat;n.update(e);const s=n.digest();return D8.encodeByteArray(s)},KR=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=KR.apply(null,s):typeof s=="object"?e+=hi(s):e+=s,e+=" "}return e};let W0=null,roe=!0;const Egt=function(t,e){Se(!0,"Can't turn on custom loggers persistently."),tE.logLevel=Gt.VERBOSE,W0=tE.log.bind(tE)},Ao=function(...t){if(roe===!0&&(roe=!1,W0===null&&wgt.get("logging_enabled")===!0&&Egt()),W0){const e=KR.apply(null,t);W0(e)}},GR=function(t){return function(...e){Ao(t,...e)}},iB=function(...t){const e="FIREBASE INTERNAL ERROR: "+KR(...t);tE.error(e)},Gf=function(...t){const e=`FIREBASE FATAL ERROR: ${KR(...t)}`;throw tE.error(e),new Error(e)},Ga=function(...t){const e="FIREBASE WARNING: "+KR(...t);tE.warn(e)},Tgt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ga("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},NSe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Cgt=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},aT="[MIN_NAME]",Uv="[MAX_NAME]",lC=function(t,e){if(t===e)return 0;if(t===aT||e===Uv)return-1;if(e===aT||t===Uv)return 1;{const n=ioe(t),s=ioe(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},Igt=function(t,e){return t===e?0:t<e?-1:1},KC=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+hi(e))},FK=function(t){if(typeof t!="object"||t===null)return hi(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=hi(e[s]),n+=":",n+=FK(t[e[s]]);return n+="}",n},DSe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Ja(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const OSe=function(t){Se(!NSe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,u;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(h.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},Sgt=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kgt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Agt(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const Rgt=new RegExp("^-?(0*)\\d{1,10}$"),Pgt=-2147483648,xgt=2147483647,ioe=function(t){if(Rgt.test(t)){const e=Number(t);if(e>=Pgt&&e<=xgt)return e}return null},uC=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ga("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ngt=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},K0=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Dgt{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,il(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ga(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Ogt{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ao("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ga(e)}}class Rx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Rx.OWNER="owner";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const VK="5",LSe="v",MSe="s",FSe="r",VSe="f",USe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qSe="ls",jSe="p",oB="ac",BSe="websocket",$Se="long_polling";/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zSe{constructor(e,n,s,r,i=!1,o="",a=!1,u=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=My.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&My.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Lgt(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function HSe(t,e,n){Se(typeof e=="string","typeof type must == string"),Se(typeof n=="object","typeof params must == object");let s;if(e===BSe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$Se)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Lgt(t)&&(n.ns=t.namespace);const r=[];return Ja(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mgt{constructor(){this.counters_={}}incrementCounter(e,n=1){dp(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return hat(this.counters_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const J6={},Z6={};function UK(t){const e=t.toString();return J6[e]||(J6[e]=new Mgt),J6[e]}function Fgt(t,e){const n=t.toString();return Z6[n]||(Z6[n]=e()),Z6[n]}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Vgt{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&uC(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const ooe="start",Ugt="close",qgt="pLPCommand",jgt="pRTLPCB",WSe="id",KSe="pw",GSe="ser",Bgt="cb",$gt="seg",zgt="ts",Hgt="d",Wgt="dframe",QSe=1870,YSe=30,Kgt=QSe-YSe,Ggt=25e3,Qgt=3e4;class wb{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=GR(e),this.stats_=UK(n),this.urlFn=u=>(this.appCheckToken&&(u[oB]=this.appCheckToken),HSe(n,$Se,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Vgt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qgt)),Cgt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qK((...i)=>{const[o,a,u,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ooe)this.id=a,this.password=u;else if(o===Ugt)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[ooe]="t",s[GSe]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Bgt]=this.scriptTagHolder.uniqueCallbackIdentifier),s[LSe]=VK,this.transportSessionId&&(s[MSe]=this.transportSessionId),this.lastSessionId&&(s[qSe]=this.lastSessionId),this.applicationId&&(s[jSe]=this.applicationId),this.appCheckToken&&(s[oB]=this.appCheckToken),typeof location<"u"&&location.hostname&&USe.test(location.hostname)&&(s[FSe]=VSe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wb.forceAllow_=!0}static forceDisallow(){wb.forceDisallow_=!0}static isAvailable(){return wb.forceAllow_?!0:!wb.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Sgt()&&!kgt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=hi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=FCe(n),r=DSe(s,Kgt);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[Wgt]="t",s[WSe]=e,s[KSe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=hi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class qK{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bgt(),window[qgt+this.uniqueCallbackIdentifier]=e,window[jgt+this.uniqueCallbackIdentifier]=n,this.myIFrame=qK.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ao("frame writing exception"),a.stack&&Ao(a.stack),Ao(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ao("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WSe]=this.myID,e[KSe]=this.myPW,e[GSe]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+YSe+s.length<=QSe;){const i=this.pendingSegs.shift();s=s+"&"+$gt+r+"="+i.seg+"&"+zgt+r+"="+i.ts+"&"+Hgt+r+"="+i.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(Ggt)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ao("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Ygt=16384,Xgt=45e3;let yO=null;typeof MozWebSocket<"u"?yO=MozWebSocket:typeof WebSocket<"u"&&(yO=WebSocket);class ec{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=GR(this.connId),this.stats_=UK(n),this.connURL=ec.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[LSe]=VK,typeof location<"u"&&location.hostname&&USe.test(location.hostname)&&(o[FSe]=VSe),n&&(o[MSe]=n),s&&(o[qSe]=s),r&&(o[oB]=r),i&&(o[jSe]=i),HSe(e,BSe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,My.set("previous_websocket_failure",!0);try{let s;Tat(),this.mySock=new yO(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){ec.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&yO!==null&&!ec.forceDisallow_}static previouslyFailed(){return My.isInMemoryStorage||My.get("previous_websocket_failure")===!0}markConnectionHealthy(){My.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Mk(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Se(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=hi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=DSe(n,Ygt);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xgt))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ec.responsesRequiredToBeHealthy=2;ec.healthyTimeout=3e4;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kk{static get ALL_TRANSPORTS(){return[wb,ec]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ec&&ec.isAvailable();let s=n&&!ec.previouslyFailed();if(e.webSocketOnly&&(n||Ga("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ec];else{const r=this.transports_=[];for(const i of Kk.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);Kk.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Kk.globalTransportInitialized_=!1;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Jgt=6e4,Zgt=5e3,emt=10*1024,tmt=100*1024,e9="t",aoe="d",nmt="s",loe="r",smt="e",uoe="o",coe="a",hoe="n",doe="p",rmt="h";class imt{constructor(e,n,s,r,i,o,a,u,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=GR("c:"+this.id+":"),this.transportManager_=new Kk(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=K0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tmt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>emt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(e9 in e){const n=e[e9];n===coe?this.upgradeIfSecondaryHealthy_():n===loe?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===uoe&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=KC("t",e),s=KC("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:doe,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:coe,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hoe,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=KC("t",e),s=KC("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=KC(e9,e);if(aoe in e){const s=e[aoe];if(n===rmt){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===hoe){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nmt?this.onConnectionShutdown_(s):n===loe?this.onReset_(s):n===smt?iB("Server Error: "+s):n===uoe?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iB("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),VK!==s&&Ga("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),K0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jgt))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Zgt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:doe,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(My.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class XSe{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class JSe{constructor(e){this.allowedEvents_=e,this.listeners_={},Se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){Se(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class vO extends JSe{static getInstance(){return new vO}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!M8()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const foe=32,poe=768;let os=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function kn(){return new os("")}function $t(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Mm(t){return t.pieces_.length-t.pieceNum_}function gs(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new os(t.pieces_,e)}function ZSe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function omt(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function eke(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function tke(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new os(e,0)}function fi(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof os)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new os(n,0)}function Jt(t){return t.pieceNum_>=t.pieces_.length}function Aa(t,e){const n=$t(t),s=$t(e);if(n===null)return e;if(n===s)return Aa(gs(t),gs(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function jK(t,e){if(Mm(t)!==Mm(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function dc(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Mm(t)>Mm(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class amt{constructor(e,n){this.errorPrefix_=n,this.parts_=eke(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=oV(this.parts_[s]);nke(this)}}function lmt(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=oV(e),nke(t)}function umt(t){const e=t.parts_.pop();t.byteLength_-=oV(e),t.parts_.length>0&&(t.byteLength_-=1)}function nke(t){if(t.byteLength_>poe)throw new Error(t.errorPrefix_+"has a key path longer than "+poe+" bytes ("+t.byteLength_+").");if(t.parts_.length>foe)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+foe+") or object contains a cycle "+py(t))}function py(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class BK extends JSe{static getInstance(){return new BK}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return Se(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const GC=1e3,cmt=300*1e3,goe=30*1e3,hmt=1.3,dmt=3e4,fmt="server_kill",moe=3;class vf extends XSe{constructor(e,n,s,r,i,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=vf.nextPersistentConnectionId_++,this.log_=GR("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=GC,this.maxReconnectDelay_=cmt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");BK.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vO.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(hi(i)),Se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new sV,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:i=>{const o=i.d;i.s==="ok"?n.resolve(o):n.reject(o)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Se(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const u=a.d,c=a.s;vf.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&dp(e,"w")){const s=ZE(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Ga(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||xat(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=goe)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Pat(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+hi(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):iB("Unrecognized action received from server: "+hi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dmt&&(this.reconnectDelay_=GC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hmt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+vf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,s())},c=function(d){Se(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:u,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Ao("getToken() completed but was canceled"):(Ao("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new imt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{Ga(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(fmt)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ga(d),u())}}}interrupt(e){Ao("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ao("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Sj(this.interruptReasons_)&&(this.reconnectDelay_=GC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>FK(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new os(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){Ao("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=moe&&(this.reconnectDelay_=goe,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ao("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=moe&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+RSe.replace(/\./g,"-")]=1,M8()?e["framework.cordova"]=1:BCe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vO.getInstance().currentlyOnline();return Sj(this.interruptReasons_)&&e}}vf.nextPersistentConnectionId_=0;vf.nextConnectionId_=0;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let hn=class ske{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ske(e,n)}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class NV{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new hn(aT,e),r=new hn(aT,n);return this.compare(s,r)!==0}minPost(){return hn.MIN}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let hP;class rke extends NV{static get __EMPTY_NODE(){return hP}static set __EMPTY_NODE(e){hP=e}compare(e,n){return lC(e.name,n.name)}isDefinedOn(e){throw tC("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return hn.MIN}maxPost(){return new hn(Uv,hP)}makePost(e,n){return Se(typeof e=="string","KeyIndex indexValue must always be a string."),new hn(e,hP)}toString(){return".key"}}const nE=new rke;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dP{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Oi{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Oi.RED,this.left=r??$a.EMPTY_NODE,this.right=i??$a.EMPTY_NODE}copy(e,n,s,r,i){return new Oi(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return $a.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return $a.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Oi.RED=!0;Oi.BLACK=!1;class pmt{copy(e,n,s,r,i){return this}insert(e,n,s){return new Oi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class $a{constructor(e,n=$a.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new $a(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oi.BLACK,null,null))}remove(e){return new $a(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oi.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dP(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new dP(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new dP(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new dP(this.root_,null,this.comparator_,!0,e)}}$a.EMPTY_NODE=new pmt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gmt(t,e){return lC(t.name,e.name)}function $K(t,e){return lC(t,e)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let aB;function mmt(t){aB=t}const ike=function(t){return typeof t=="number"?"number:"+OSe(t):"string:"+t},oke=function(t){if(t.isLeafNode()){const e=t.val();Se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&dp(e,".sv"),"Priority must be a string or number.")}else Se(t===aB||t.isEmpty(),"priority of unexpected type.");Se(t===aB||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let _oe;class ki{static set __childrenNodeConstructor(e){_oe=e}static get __childrenNodeConstructor(){return _oe}constructor(e,n=ki.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oke(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ki(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ki.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:$t(e)===".priority"?this.priorityNode_:ki.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ki.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=$t(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(Se(s!==".priority"||Mm(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,ki.__childrenNodeConstructor.EMPTY_NODE.updateChild(gs(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ike(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=OSe(this.value_):e+=this.value_,this.lazyHash_=xSe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ki.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ki.__childrenNodeConstructor?-1:(Se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=ki.VALUE_TYPE_ORDER.indexOf(n),i=ki.VALUE_TYPE_ORDER.indexOf(s);return Se(r>=0,"Unknown leaf type: "+n),Se(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ki.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let ake,lke;function _mt(t){ake=t}function ymt(t){lke=t}class vmt extends NV{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?lC(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(Uv,new ki("[PRIORITY-POST]",lke))}makePost(e,n){const s=ake(e);return new hn(n,new ki("[PRIORITY-POST]",s))}toString(){return".priority"}}const sr=new vmt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const wmt=Math.log(2);class bmt{constructor(e){const n=i=>parseInt(Math.log(i)/wmt,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wO=function(t,e,n,s){t.sort(e);const r=function(u,c){const h=c-u;let d,p;if(h===0)return null;if(h===1)return d=t[u],p=n?n(d):d,new Oi(p,d.node,Oi.BLACK,null,null);{const m=parseInt(h/2,10)+u,w=r(u,m),k=r(m+1,c);return d=t[m],p=n?n(d):d,new Oi(p,d.node,Oi.BLACK,w,k)}},i=function(u){let c=null,h=null,d=t.length;const p=function(w,k){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new Oi(q,V.node,k,null,M))},m=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<u.count;++w){const k=u.nextBitIsOne(),P=Math.pow(2,u.count-(w+1));k?p(P,Oi.BLACK):(p(P,Oi.BLACK),p(P,Oi.RED))}return h},o=new bmt(t.length),a=i(o);return new $a(s||e,a)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let t9;const Ow={};class hf{static get Default(){return Se(Ow&&sr,"ChildrenNode.ts has not been loaded"),t9=t9||new hf({".priority":Ow},{".priority":sr}),t9}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ZE(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof $a?n:null}hasIndex(e){return dp(this.indexSet_,e.toString())}addIndex(e,n){Se(e!==nE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(hn.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=wO(s,e.getCompare()):a=Ow;const u=e.toString(),c={...this.indexSet_};c[u]=e;const h={...this.indexes_};return h[u]=a,new hf(h,c)}addToIndexes(e,n){const s=ZD(this.indexes_,(r,i)=>{const o=ZE(this.indexSet_,i);if(Se(o,"Missing index implementation for "+i),r===Ow)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(hn.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),wO(a,o.getCompare())}else return Ow;else{const a=n.get(e.name);let u=r;return a&&(u=u.remove(new hn(e.name,a))),u.insert(e,e.node)}});return new hf(s,this.indexSet_)}removeFromIndexes(e,n){const s=ZD(this.indexes_,r=>{if(r===Ow)return r;{const i=n.get(e.name);return i?r.remove(new hn(e.name,i)):r}});return new hf(s,this.indexSet_)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let QC;class ot{static get EMPTY_NODE(){return QC||(QC=new ot(new $a($K),null,hf.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&oke(this.priorityNode_),this.children_.isEmpty()&&Se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||QC}updatePriority(e){return this.children_.isEmpty()?this:new ot(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?QC:n}}getChild(e){const n=$t(e);return n===null?this:this.getImmediateChild(n).getChild(gs(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Se(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new hn(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?QC:this.priorityNode_;return new ot(r,o,i)}}updateChild(e,n){const s=$t(e);if(s===null)return n;{Se($t(e)!==".priority"||Mm(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(gs(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(sr,(o,a)=>{n[o]=a.val(e),s++,i&&ot.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ike(this.getPriority().val())+":"),this.forEachChild(sr,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":xSe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new hn(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new hn(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new hn(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,hn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,hn.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===QR?-1:0}withIndex(e){if(e===nE||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ot(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===nE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(sr),r=n.getIterator(sr);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===nE?null:this.indexMap_.get(e.toString())}}ot.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Emt extends ot{constructor(){super(new $a($K),ot.EMPTY_NODE,hf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ot.EMPTY_NODE}isEmpty(){return!1}}const QR=new Emt;Object.defineProperties(hn,{MIN:{value:new hn(aT,ot.EMPTY_NODE)},MAX:{value:new hn(Uv,QR)}});rke.__EMPTY_NODE=ot.EMPTY_NODE;ki.__childrenNodeConstructor=ot;mmt(QR);ymt(QR);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const Tmt=!0;function Ui(t,e=null){if(t===null)return ot.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ki(n,Ui(e))}if(!(t instanceof Array)&&Tmt){const n=[];let s=!1;if(Ja(t,(i,o)=>{if(i.substring(0,1)!=="."){const a=Ui(o);a.isEmpty()||(s=s||!a.getPriority().isEmpty(),n.push(new hn(i,a)))}}),n.length===0)return ot.EMPTY_NODE;const r=wO(n,gmt,i=>i.name,$K);if(s){const i=wO(n,sr.getCompare());return new ot(r,Ui(e),new hf({".priority":i},{".priority":sr}))}else return new ot(r,Ui(e),hf.Default)}else{let n=ot.EMPTY_NODE;return Ja(t,(s,r)=>{if(dp(t,s)&&s.substring(0,1)!=="."){const i=Ui(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(Ui(e))}}_mt(Ui);/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Cmt extends NV{constructor(e){super(),this.indexPath_=e,Se(!Jt(e)&&$t(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?lC(e.name,n.name):i}makePost(e,n){const s=Ui(e),r=ot.EMPTY_NODE.updateChild(this.indexPath_,s);return new hn(n,r)}maxPost(){const e=ot.EMPTY_NODE.updateChild(this.indexPath_,QR);return new hn(Uv,e)}toString(){return eke(this.indexPath_,0).join("/")}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Imt extends NV{compare(e,n){const s=e.node.compareTo(n.node);return s===0?lC(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,n){const s=Ui(e);return new hn(n,s)}toString(){return".value"}}const Smt=new Imt;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uke(t){return{type:"value",snapshotNode:t}}function lT(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Gk(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qk(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function kmt(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class zK{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){Se(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(Gk(n,a)):Se(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(lT(n,s)):o.trackChildChange(Qk(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(sr,(r,i)=>{n.hasChild(r)||s.trackChildChange(Gk(r,i))}),n.isLeafNode()||n.forEachChild(sr,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(Qk(r,i,o))}else s.trackChildChange(lT(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ot.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Yk{constructor(e){this.indexedFilter_=new zK(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yk.getStartPost_(e),this.endPost_=Yk.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new hn(n,s))||(s=ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ot.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ot.EMPTY_NODE);const i=this;return n.forEachChild(sr,(o,a)=>{i.matches(new hn(o,a))||(r=r.updateImmediateChild(o,ot.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Amt{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Yk(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new hn(n,s))||(s=ot.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=ot.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ot.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ot.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;Se(a.numChildren()===this.limit_,"");const u=new hn(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,u);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(Qk(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(Gk(n,d));const w=a.updateImmediateChild(n,ot.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(lT(p.name,p.node)),w.updateImmediateChild(p.name,p.node)):w}}else return s.isEmpty()?e:h&&o(c,u)>=0?(i!=null&&(i.trackChildChange(Gk(c.name,c.node)),i.trackChildChange(lT(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,ot.EMPTY_NODE)):e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class HK{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:aT}hasEnd(){return this.endSet_}getIndexEndValue(){return Se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const e=new HK;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Rmt(t){return t.loadsAllData()?new zK(t.getIndex()):t.hasLimit()?new Amt(t):new Yk(t)}function yoe(t){const e={};if(t.isDefault())return e;let n;if(t.index_===sr?n="$priority":t.index_===Smt?n="$value":t.index_===nE?n="$key":(Se(t.index_ instanceof Cmt,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=hi(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=hi(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+hi(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=hi(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+hi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function voe(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==sr&&(e.i=t.index_.toString()),e}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class bO extends XSe{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=GR("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=bO.getListenId_(e,s),a={};this.listens_[o]=a;const u=yoe(e._queryParams);this.restRequest_(i+".json",u,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,s),ZE(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const s=bO.getListenId_(e,n);delete this.listens_[s]}get(e){const n=yoe(e._queryParams),s=e._path.toString(),r=new sV;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+nC(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Mk(a.responseText)}catch{Ga("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,u)}else a.status!==401&&a.status!==404&&Ga("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Pmt{constructor(){this.rootNode_=ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EO(){return{value:null,children:new Map}}function cke(t,e,n){if(Jt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=$t(e);t.children.has(s)||t.children.set(s,EO());const r=t.children.get(s);e=gs(e),cke(r,e,n)}}function lB(t,e,n){t.value!==null?n(e,t.value):xmt(t,(s,r)=>{const i=new os(e.toString()+"/"+s);lB(r,i,n)})}function xmt(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Nmt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ja(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const woe=10*1e3,Dmt=30*1e3,Omt=300*1e3;class Lmt{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nmt(e);const s=woe+(Dmt-woe)*Math.random();K0(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Ja(e,(r,i)=>{i>0&&dp(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),K0(this.reportStats_.bind(this),Math.floor(Math.random()*2*Omt))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fc||(fc={}));function hke(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function WK(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function KK(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class TO{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=fc.ACK_USER_WRITE,this.source=hke()}operationForChild(e){if(Jt(this.path)){if(this.affectedTree.value!=null)return Se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new os(e));return new TO(kn(),n,this.revert)}}else return Se($t(this.path)===e,"operationForChild called for unrelated child."),new TO(gs(this.path),this.affectedTree,this.revert)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Xk{constructor(e,n){this.source=e,this.path=n,this.type=fc.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new Xk(this.source,kn()):new Xk(this.source,gs(this.path))}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class qv{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=fc.OVERWRITE}operationForChild(e){return Jt(this.path)?new qv(this.source,kn(),this.snap.getImmediateChild(e)):new qv(this.source,gs(this.path),this.snap)}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Jk{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=fc.MERGE}operationForChild(e){if(Jt(this.path)){const n=this.children.subtree(new os(e));return n.isEmpty()?null:n.value?new qv(this.source,kn(),n.value):new Jk(this.source,kn(),n)}else return Se($t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jk(this.source,gs(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Fm{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const n=$t(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Mmt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Fmt(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(kmt(o.childName,o.snapshotNode))}),YC(t,r,"child_removed",e,s,n),YC(t,r,"child_added",e,s,n),YC(t,r,"child_moved",i,s,n),YC(t,r,"child_changed",e,s,n),YC(t,r,"value",e,s,n),r}function YC(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,u)=>Umt(t,a,u)),o.forEach(a=>{const u=Vmt(t,a,i);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Vmt(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Umt(t,e,n){if(e.childName==null||n.childName==null)throw tC("Should only compare child_ events.");const s=new hn(e.childName,e.snapshotNode),r=new hn(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DV(t,e){return{eventCache:t,serverCache:e}}function G0(t,e,n,s){return DV(new Fm(e,n,s),t.serverCache)}function dke(t,e,n,s){return DV(t.eventCache,new Fm(e,n,s))}function CO(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function jv(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let n9;const qmt=()=>(n9||(n9=new $a(Igt)),n9);class Ts{static fromObject(e){let n=new Ts(null);return Ja(e,(s,r)=>{n=n.set(new os(s),r)}),n}constructor(e,n=qmt()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:kn(),value:this.value};if(Jt(e))return null;{const s=$t(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(gs(e),n);return i!=null?{path:fi(new os(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const n=$t(e),s=this.children.get(n);return s!==null?s.subtree(gs(e)):new Ts(null)}}set(e,n){if(Jt(e))return new Ts(n,this.children);{const s=$t(e),r=(this.children.get(s)||new Ts(null)).set(gs(e),n),i=this.children.insert(s,r);return new Ts(this.value,i)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Ts(null):new Ts(null,this.children);{const n=$t(e),s=this.children.get(n);if(s){const r=s.remove(gs(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new Ts(null):new Ts(this.value,i)}else return this}}get(e){if(Jt(e))return this.value;{const n=$t(e),s=this.children.get(n);return s?s.get(gs(e)):null}}setTree(e,n){if(Jt(e))return n;{const s=$t(e),r=(this.children.get(s)||new Ts(null)).setTree(gs(e),n);let i;return r.isEmpty()?i=this.children.remove(s):i=this.children.insert(s,r),new Ts(this.value,i)}}fold(e){return this.fold_(kn(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(fi(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,kn(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Jt(e))return null;{const i=$t(e),o=this.children.get(i);return o?o.findOnPath_(gs(e),fi(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,kn(),n)}foreachOnPath_(e,n,s){if(Jt(e))return this;{this.value&&s(n,this.value);const r=$t(e),i=this.children.get(r);return i?i.foreachOnPath_(gs(e),fi(n,r),s):new Ts(null)}}foreach(e){this.foreach_(kn(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(fi(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Oc{constructor(e){this.writeTree_=e}static empty(){return new Oc(new Ts(null))}}function Q0(t,e,n){if(Jt(e))return new Oc(new Ts(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Aa(r,e);return i=i.updateChild(o,n),new Oc(t.writeTree_.set(r,i))}else{const r=new Ts(n),i=t.writeTree_.setTree(e,r);return new Oc(i)}}}function boe(t,e,n){let s=t;return Ja(n,(r,i)=>{s=Q0(s,fi(e,r),i)}),s}function Eoe(t,e){if(Jt(e))return Oc.empty();{const n=t.writeTree_.setTree(e,new Ts(null));return new Oc(n)}}function uB(t,e){return gw(t,e)!=null}function gw(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Aa(n.path,e)):null}function Toe(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(sr,(s,r)=>{e.push(new hn(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new hn(s,r.value))}),e}function Ug(t,e){if(Jt(e))return t;{const n=gw(t,e);return n!=null?new Oc(new Ts(n)):new Oc(t.writeTree_.subtree(e))}}function cB(t){return t.writeTree_.isEmpty()}function uT(t,e){return fke(kn(),t.writeTree_,e)}function fke(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(Se(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=fke(fi(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(fi(t,".priority"),s)),n}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OV(t,e){return _ke(e,t)}function jmt(t,e,n,s,r){Se(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=Q0(t.visibleWrites,e,n)),t.lastWriteId=s}function Bmt(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function $mt(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Se(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&zmt(a,s.path)?r=!1:dc(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return Hmt(t),!0;if(s.snap)t.visibleWrites=Eoe(t.visibleWrites,s.path);else{const a=s.children;Ja(a,u=>{t.visibleWrites=Eoe(t.visibleWrites,fi(s.path,u))})}return!0}else return!1}function zmt(t,e){if(t.snap)return dc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&dc(fi(t.path,n),e))return!0;return!1}function Hmt(t){t.visibleWrites=pke(t.allWrites,Wmt,kn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Wmt(t){return t.visible}function pke(t,e,n){let s=Oc.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)dc(n,o)?(a=Aa(n,o),s=Q0(s,a,i.snap)):dc(o,n)&&(a=Aa(o,n),s=Q0(s,kn(),i.snap.getChild(a)));else if(i.children){if(dc(n,o))a=Aa(n,o),s=boe(s,a,i.children);else if(dc(o,n))if(a=Aa(o,n),Jt(a))s=boe(s,kn(),i.children);else{const u=ZE(i.children,$t(a));if(u){const c=u.getChild(gs(a));s=Q0(s,kn(),c)}}}else throw tC("WriteRecord should have .snap or .children")}}return s}function gke(t,e,n,s,r){if(!s&&!r){const i=gw(t.visibleWrites,e);if(i!=null)return i;{const o=Ug(t.visibleWrites,e);if(cB(o))return n;if(n==null&&!uB(o,kn()))return null;{const a=n||ot.EMPTY_NODE;return uT(o,a)}}}else{const i=Ug(t.visibleWrites,e);if(!r&&cB(i))return n;if(!r&&n==null&&!uB(i,kn()))return null;{const o=function(c){return(c.visible||r)&&(!s||!~s.indexOf(c.writeId))&&(dc(c.path,e)||dc(e,c.path))},a=pke(t.allWrites,o,e),u=n||ot.EMPTY_NODE;return uT(a,u)}}}function Kmt(t,e,n){let s=ot.EMPTY_NODE;const r=gw(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(sr,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Ug(t.visibleWrites,e);return n.forEachChild(sr,(o,a)=>{const u=uT(Ug(i,new os(o)),a);s=s.updateImmediateChild(o,u)}),Toe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Ug(t.visibleWrites,e);return Toe(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Gmt(t,e,n,s,r){Se(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=fi(e,n);if(uB(t.visibleWrites,i))return null;{const o=Ug(t.visibleWrites,i);return cB(o)?r.getChild(n):uT(o,r.getChild(n))}}function Qmt(t,e,n,s){const r=fi(e,n),i=gw(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Ug(t.visibleWrites,r);return uT(o,s.getNode().getImmediateChild(n))}else return null}function Ymt(t,e){return gw(t.visibleWrites,e)}function Xmt(t,e,n,s,r,i,o){let a;const u=Ug(t.visibleWrites,e),c=gw(u,kn());if(c!=null)a=c;else if(n!=null)a=uT(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function Jmt(){return{visibleWrites:Oc.empty(),allWrites:[],lastWriteId:-1}}function IO(t,e,n,s){return gke(t.writeTree,t.treePath,e,n,s)}function GK(t,e){return Kmt(t.writeTree,t.treePath,e)}function Coe(t,e,n,s){return Gmt(t.writeTree,t.treePath,e,n,s)}function SO(t,e){return Ymt(t.writeTree,fi(t.treePath,e))}function Zmt(t,e,n,s,r,i){return Xmt(t.writeTree,t.treePath,e,n,s,r,i)}function QK(t,e,n){return Qmt(t.writeTree,t.treePath,e,n)}function mke(t,e){return _ke(fi(t.treePath,e),t.writeTree)}function _ke(t,e){return{treePath:t,writeTree:e}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class e_t{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;Se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Se(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,Qk(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,Gk(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,lT(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,Qk(s,e.snapshotNode,r.oldSnap));else throw tC("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class t_t{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const yke=new t_t;class YK{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Fm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QK(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:jv(this.viewCache_),i=Zmt(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n_t(t){return{filter:t}}function s_t(t,e){Se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function r_t(t,e,n,s,r){const i=new e_t;let o,a;if(n.type===fc.OVERWRITE){const c=n;c.source.fromUser?o=hB(t,e,c.path,c.snap,s,r,i):(Se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Jt(c.path),o=kO(t,e,c.path,c.snap,s,r,a,i))}else if(n.type===fc.MERGE){const c=n;c.source.fromUser?o=o_t(t,e,c.path,c.children,s,r,i):(Se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=dB(t,e,c.path,c.children,s,r,a,i))}else if(n.type===fc.ACK_USER_WRITE){const c=n;c.revert?o=u_t(t,e,c.path,s,r,i):o=a_t(t,e,c.path,c.affectedTree,s,r,i)}else if(n.type===fc.LISTEN_COMPLETE)o=l_t(t,e,n.path,s,i);else throw tC("Unknown operation type: "+n.type);const u=i.getChanges();return i_t(e,o,u),{viewCache:o,changes:u}}function i_t(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=CO(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(uke(CO(e)))}}function vke(t,e,n,s,r,i){const o=e.eventCache;if(SO(s,n)!=null)return e;{let a,u;if(Jt(n))if(Se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=jv(e),h=c instanceof ot?c:ot.EMPTY_NODE,d=GK(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=IO(s,jv(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=$t(n);if(c===".priority"){Se(Mm(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=e.serverCache.getNode();const d=Coe(s,n,h,u);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=gs(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const p=Coe(s,n,o.getNode(),u);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=QK(s,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,i):a=o.getNode()}}return G0(e,a,o.isFullyInitialized()||Jt(n),t.filter.filtersNodes())}}function kO(t,e,n,s,r,i,o,a){const u=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Jt(n))c=h.updateFullNode(u.getNode(),s,null);else if(h.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,s);c=h.updateFullNode(u.getNode(),m,null)}else{const m=$t(n);if(!u.isCompleteForPath(n)&&Mm(n)>1)return e;const w=gs(n),k=u.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?c=h.updatePriority(u.getNode(),k):c=h.updateChild(u.getNode(),m,k,w,yke,null)}const d=dke(e,c,u.isFullyInitialized()||Jt(n),h.filtersNodes()),p=new YK(r,d,i);return vke(t,d,n,r,p,a)}function hB(t,e,n,s,r,i,o){const a=e.eventCache;let u,c;const h=new YK(r,e,i);if(Jt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),u=G0(e,c,!0,t.filter.filtersNodes());else{const d=$t(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),u=G0(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=gs(n),m=a.getNode().getImmediateChild(d);let w;if(Jt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?ZSe(p)===".priority"&&k.getChild(tke(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=ot.EMPTY_NODE}if(m.equals(w))u=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);u=G0(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function Ioe(t,e){return t.eventCache.isCompleteForChild(e)}function o_t(t,e,n,s,r,i,o){let a=e;return s.foreach((u,c)=>{const h=fi(n,u);Ioe(e,$t(h))&&(a=hB(t,a,h,c,r,i,o))}),s.foreach((u,c)=>{const h=fi(n,u);Ioe(e,$t(h))||(a=hB(t,a,h,c,r,i,o))}),a}function Soe(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function dB(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Jt(n)?c=s:c=new Ts(null).setTree(n,s);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=Soe(t,m,p);u=kO(t,u,new os(d),w,r,i,o,a)}}),c.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=Soe(t,w,p);u=kO(t,u,new os(d),k,r,i,o,a)}}),u}function a_t(t,e,n,s,r,i,o){if(SO(r,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(Jt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return kO(t,e,n,u.getNode().getChild(n),r,i,a,o);if(Jt(n)){let c=new Ts(null);return u.getNode().forEachChild(nE,(h,d)=>{c=c.set(new os(h),d)}),dB(t,e,n,c,r,i,a,o)}else return e}else{let c=new Ts(null);return s.foreach((h,d)=>{const p=fi(n,h);u.isCompleteForPath(p)&&(c=c.set(h,u.getNode().getChild(p)))}),dB(t,e,n,c,r,i,a,o)}}function l_t(t,e,n,s,r){const i=e.serverCache,o=dke(e,i.getNode(),i.isFullyInitialized()||Jt(n),i.isFiltered());return vke(t,o,n,s,yke,r)}function u_t(t,e,n,s,r,i){let o;if(SO(s,n)!=null)return e;{const a=new YK(s,e,r),u=e.eventCache.getNode();let c;if(Jt(n)||$t(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=IO(s,jv(e));else{const d=e.serverCache.getNode();Se(d instanceof ot,"serverChildren would be complete if leaf node"),h=GK(s,d)}h=h,c=t.filter.updateFullNode(u,h,i)}else{const h=$t(n);let d=QK(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=u.getImmediateChild(h)),d!=null?c=t.filter.updateChild(u,h,d,gs(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(u,h,ot.EMPTY_NODE,gs(n),a,i):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=IO(s,jv(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||SO(s,kn())!=null,G0(e,c,o,t.filter.filtersNodes())}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class c_t{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new zK(s.getIndex()),i=Rmt(s);this.processor_=n_t(i);const o=n.serverCache,a=n.eventCache,u=r.updateFullNode(ot.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(ot.EMPTY_NODE,a.getNode(),null),h=new Fm(u,o.isFullyInitialized(),r.filtersNodes()),d=new Fm(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=DV(d,h),this.eventGenerator_=new Mmt(this.query_)}get query(){return this.query_}}function h_t(t){return t.viewCache_.serverCache.getNode()}function d_t(t){return CO(t.viewCache_)}function f_t(t,e){const n=jv(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Jt(e)&&!n.getImmediateChild($t(e)).isEmpty())?n.getChild(e):null}function koe(t){return t.eventRegistrations_.length===0}function p_t(t,e){t.eventRegistrations_.push(e)}function Aoe(t,e,n){const s=[];if(n){Se(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function Roe(t,e,n,s){e.type===fc.MERGE&&e.source.queryId!==null&&(Se(jv(t.viewCache_),"We should always have a full cache before handling merges"),Se(CO(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=r_t(t.processor_,r,e,n,s);return s_t(t.processor_,i.viewCache),Se(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,wke(t,i.changes,i.viewCache.eventCache.getNode(),null)}function g_t(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(sr,(r,i)=>{s.push(lT(r,i))}),n.isFullyInitialized()&&s.push(uke(n.getNode())),wke(t,s,n.getNode(),e)}function wke(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return Fmt(t.eventGenerator_,e,n,r)}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let AO;class bke{constructor(){this.views=new Map}}function m_t(t){Se(!AO,"__referenceConstructor has already been defined"),AO=t}function __t(){return Se(AO,"Reference.ts has not been loaded"),AO}function y_t(t){return t.views.size===0}function XK(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return Se(i!=null,"SyncTree gave us an op for an invalid query."),Roe(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(Roe(o,e,n,s));return i}}function Eke(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=IO(n,r?s:null),u=!1;a?u=!0:s instanceof ot?(a=GK(n,s),u=!1):(a=ot.EMPTY_NODE,u=!1);const c=DV(new Fm(a,u,!1),new Fm(s,r,!1));return new c_t(e,c)}return o}function v_t(t,e,n,s,r,i){const o=Eke(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),p_t(o,n),g_t(o,n)}function w_t(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Vm(t);if(r==="default")for(const[u,c]of t.views.entries())o=o.concat(Aoe(c,n,s)),koe(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||i.push(c.query));else{const u=t.views.get(r);u&&(o=o.concat(Aoe(u,n,s)),koe(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||i.push(u.query)))}return a&&!Vm(t)&&i.push(new(__t())(e._repo,e._path)),{removed:i,events:o}}function Tke(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function qg(t,e){let n=null;for(const s of t.views.values())n=n||f_t(s,e);return n}function Cke(t,e){if(e._queryParams.loadsAllData())return LV(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Ike(t,e){return Cke(t,e)!=null}function Vm(t){return LV(t)!=null}function LV(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/let RO;function b_t(t){Se(!RO,"__referenceConstructor has already been defined"),RO=t}function E_t(){return Se(RO,"Reference.ts has not been loaded"),RO}let T_t=1;class Poe{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ts(null),this.pendingWriteTree_=Jmt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ske(t,e,n,s,r){return jmt(t.pendingWriteTree_,e,n,s,r),r?XR(t,new qv(hke(),e,n)):[]}function Fy(t,e,n=!1){const s=Bmt(t.pendingWriteTree_,e);if($mt(t.pendingWriteTree_,e)){let r=new Ts(null);return s.snap!=null?r=r.set(kn(),!0):Ja(s.children,i=>{r=r.set(new os(i),!0)}),XR(t,new TO(s.path,r,n))}else return[]}function YR(t,e,n){return XR(t,new qv(WK(),e,n))}function C_t(t,e,n){const s=Ts.fromObject(n);return XR(t,new Jk(WK(),e,s))}function I_t(t,e){return XR(t,new Xk(WK(),e))}function S_t(t,e,n){const s=ZK(t,n);if(s){const r=eG(s),i=r.path,o=r.queryId,a=Aa(i,e),u=new Xk(KK(o),a);return tG(t,i,u)}else return[]}function PO(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Ike(o,e))){const u=w_t(o,e,n,s);y_t(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=u.removed;if(a=u.events,!r){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Vm(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=R_t(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,O=Pke(t,k);t.listenProvider_.startListening(Y0(P),Zk(t,P),O.hashFn,O.onComplete)}}}!d&&c.length>0&&!s&&(h?t.listenProvider_.stopListening(Y0(e),null):c.forEach(p=>{const m=t.queryToTagMap.get(MV(p));t.listenProvider_.stopListening(Y0(p),m)}))}P_t(t,c)}return a}function kke(t,e,n,s){const r=ZK(t,s);if(r!=null){const i=eG(r),o=i.path,a=i.queryId,u=Aa(o,e),c=new qv(KK(a),u,n);return tG(t,o,c)}else return[]}function k_t(t,e,n,s){const r=ZK(t,s);if(r){const i=eG(r),o=i.path,a=i.queryId,u=Aa(o,e),c=Ts.fromObject(n),h=new Jk(KK(a),u,c);return tG(t,o,h)}else return[]}function fB(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=Aa(p,r);i=i||qg(m,w),o=o||Vm(m)});let a=t.syncPointTree_.get(r);a?(o=o||Vm(a),i=i||qg(a,kn())):(a=new bke,t.syncPointTree_=t.syncPointTree_.set(r,a));let u;i!=null?u=!0:(u=!1,i=ot.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((p,m)=>{const w=qg(m,kn());w&&(i=i.updateImmediateChild(p,w))}));const c=Ike(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=MV(e);Se(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=x_t();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=OV(t.pendingWriteTree_,r);let d=v_t(a,e,n,h,i,u);if(!c&&!o&&!s){const p=Cke(a,e);d=d.concat(N_t(t,e,p))}return d}function JK(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(i,o)=>{const a=Aa(i,e),u=qg(o,a);if(u)return u});return gke(s,e,r,n,!0)}function A_t(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=Aa(c,n);s=s||qg(h,d)});let r=t.syncPointTree_.get(n);r?s=s||qg(r,kn()):(r=new bke,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Fm(s,!0,!1):null,a=OV(t.pendingWriteTree_,e._path),u=Eke(r,e,a,i?o.getNode():ot.EMPTY_NODE,i);return d_t(u)}function XR(t,e){return Ake(e,t.syncPointTree_,null,OV(t.pendingWriteTree_,kn()))}function Ake(t,e,n,s){if(Jt(t.path))return Rke(t,e,n,s);{const r=e.get(kn());n==null&&r!=null&&(n=qg(r,kn()));let i=[];const o=$t(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,h=mke(s,o);i=i.concat(Ake(a,u,c,h))}return r&&(i=i.concat(XK(r,t,s,n))),i}}function Rke(t,e,n,s){const r=e.get(kn());n==null&&r!=null&&(n=qg(r,kn()));let i=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=mke(s,o),h=t.operationForChild(o);h&&(i=i.concat(Rke(h,a,u,c)))}),r&&(i=i.concat(XK(r,t,s,n))),i}function Pke(t,e){const n=e.query,s=Zk(t,n);return{hashFn:()=>(h_t(e)||ot.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?S_t(t,n._path,s):I_t(t,n._path);{const i=Agt(r,n);return PO(t,n,null,i)}}}}function Zk(t,e){const n=MV(e);return t.queryToTagMap.get(n)}function MV(t){return t._path.toString()+"$"+t._queryIdentifier}function ZK(t,e){return t.tagToQueryMap.get(e)}function eG(t){const e=t.indexOf("$");return Se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new os(t.substr(0,e))}}function tG(t,e,n){const s=t.syncPointTree_.get(e);Se(s,"Missing sync point for query tag that we're tracking");const r=OV(t.pendingWriteTree_,e);return XK(s,n,r,null)}function R_t(t){return t.fold((e,n,s)=>{if(n&&Vm(n))return[LV(n)];{let r=[];return n&&(r=Tke(n)),Ja(s,(i,o)=>{r=r.concat(o)}),r}})}function Y0(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(E_t())(t._repo,t._path):t}function P_t(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=MV(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function x_t(){return T_t++}function N_t(t,e,n){const s=e._path,r=Zk(t,e),i=Pke(t,n),o=t.listenProvider_.startListening(Y0(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)Se(!Vm(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,h,d)=>{if(!Jt(c)&&h&&Vm(h))return[LV(h).query];{let p=[];return h&&(p=p.concat(Tke(h).map(m=>m.query))),Ja(d,(m,w)=>{p=p.concat(w)}),p}});for(let c=0;c<u.length;++c){const h=u[c];t.listenProvider_.stopListening(Y0(h),Zk(t,h))}}return o}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class nG{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new nG(n)}node(){return this.node_}}class sG{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=fi(this.path_,e);return new sG(this.syncTree_,n)}node(){return JK(this.syncTree_,this.path_)}}const D_t=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},xoe=function(t,e,n){if(!t||typeof t!="object")return t;if(Se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return O_t(t[".sv"],e,n);if(typeof t[".sv"]=="object")return L_t(t[".sv"],e);Se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},O_t=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Se(!1,"Unexpected server value: "+t)}},L_t=function(t,e,n){t.hasOwnProperty("increment")||Se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&Se(!1,"Unexpected increment value: "+s);const r=e.node();if(Se(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const i=r.getValue();return typeof i!="number"?s:i+s},M_t=function(t,e,n,s){return rG(e,new sG(n,t),s)},xke=function(t,e,n){return rG(t,new nG(e),n)};function rG(t,e,n){const s=t.getPriority().val(),r=xoe(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=xoe(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new ki(a,Ui(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new ki(r))),o.forEachChild(sr,(a,u)=>{const c=rG(u,e.getImmediateChild(a),n);c!==u&&(i=i.updateImmediateChild(a,c))}),i}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class iG{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function oG(t,e){let n=e instanceof os?e:new os(e),s=t,r=$t(n);for(;r!==null;){const i=ZE(s.node.children,r)||{children:{},childCount:0};s=new iG(r,s,i),n=gs(n),r=$t(n)}return s}function cC(t){return t.node.value}function Nke(t,e){t.node.value=e,pB(t)}function Dke(t){return t.node.childCount>0}function F_t(t){return cC(t)===void 0&&!Dke(t)}function FV(t,e){Ja(t.node.children,(n,s)=>{e(new iG(n,t,s))})}function Oke(t,e,n,s){n&&e(t),FV(t,r=>{Oke(r,e,!0)})}function V_t(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function JR(t){return new os(t.parent===null?t.name:JR(t.parent)+"/"+t.name)}function pB(t){t.parent!==null&&U_t(t.parent,t.name,t)}function U_t(t,e,n){const s=F_t(n),r=dp(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,pB(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,pB(t))}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const q_t=/[\[\].#$\/\u0000-\u001F\u007F]/,j_t=/[\[\].#$\u0000-\u001F\u007F]/,s9=10*1024*1024,Lke=function(t){return typeof t=="string"&&t.length!==0&&!q_t.test(t)},Mke=function(t){return typeof t=="string"&&t.length!==0&&!j_t.test(t)},B_t=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Mke(t)},$_t=function(t,e,n,s){aG(F8(t,"value"),e,n)},aG=function(t,e,n){const s=n instanceof os?new amt(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+py(s));if(typeof e=="function")throw new Error(t+"contains a function "+py(s)+" with contents = "+e.toString());if(NSe(e))throw new Error(t+"contains "+e.toString()+" "+py(s));if(typeof e=="string"&&e.length>s9/3&&oV(e)>s9)throw new Error(t+"contains a string greater than "+s9+" utf8 bytes "+py(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Ja(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Lke(o)))throw new Error(t+" contains an invalid key ("+o+") "+py(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lmt(s,o),aG(t,a,s),umt(s)}),r&&i)throw new Error(t+' contains ".value" child '+py(s)+" in addition to actual children.")}},Fke=function(t,e,n,s){if(!Mke(n))throw new Error(F8(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z_t=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fke(t,e,n)},Vke=function(t,e){if($t(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},H_t=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Lke(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!B_t(n))throw new Error(F8(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class W_t{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lG(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!jK(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function Uke(t,e,n){lG(t,n),qke(t,s=>jK(s,e))}function fd(t,e,n){lG(t,n),qke(t,s=>dc(s,e)||dc(e,s))}function qke(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(K_t(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function K_t(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();W0&&Ao("event: "+n.toString()),uC(s)}}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const G_t="repo_interrupt",Q_t=25;class Y_t{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new W_t,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=EO(),this.transactionQueueTree_=new iG,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X_t(t,e,n){if(t.stats_=UK(t.repoInfo_),t.forceRestClient_||Ngt())t.server_=new bO(t.repoInfo_,(s,r,i,o)=>{Noe(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Doe(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hi(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new vf(t.repoInfo_,e,(s,r,i,o)=>{Noe(t,s,r,i,o)},s=>{Doe(t,s)},s=>{Z_t(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=Fgt(t.repoInfo_,()=>new Lmt(t.stats_,t.server_)),t.infoData_=new Pmt,t.infoSyncTree_=new Poe({startListening:(s,r,i,o)=>{let a=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(a=YR(t.infoSyncTree_,s._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),cG(t,"connected",!1),t.serverSyncTree_=new Poe({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,u)=>{const c=o(a,u);fd(t.eventQueue_,s._path,c)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function J_t(t){const e=t.infoData_.getNode(new os(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function uG(t){return D_t({timestamp:J_t(t)})}function Noe(t,e,n,s,r){t.dataUpdateCount++;const i=new os(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const u=ZD(n,c=>Ui(c));o=k_t(t.serverSyncTree_,i,u,r)}else{const u=Ui(n);o=kke(t.serverSyncTree_,i,u,r)}else if(s){const u=ZD(n,c=>Ui(c));o=C_t(t.serverSyncTree_,i,u)}else{const u=Ui(n);o=YR(t.serverSyncTree_,i,u)}let a=i;o.length>0&&(a=UV(t,i)),fd(t.eventQueue_,a,o)}function Doe(t,e){cG(t,"connected",e),e===!1&&nyt(t)}function Z_t(t,e){Ja(e,(n,s)=>{cG(t,n,s)})}function cG(t,e,n){const s=new os("/.info/"+e),r=Ui(n);t.infoData_.updateSnapshot(s,r);const i=YR(t.infoSyncTree_,s,r);fd(t.eventQueue_,s,i)}function jke(t){return t.nextWriteId_++}function eyt(t,e,n){const s=A_t(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=Ui(r).withIndex(e._queryParams.getIndex());fB(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=YR(t.serverSyncTree_,e._path,i);else{const a=Zk(t.serverSyncTree_,e);o=kke(t.serverSyncTree_,e._path,i,a)}return fd(t.eventQueue_,e._path,o),PO(t.serverSyncTree_,e,n,null,!0),i},r=>(VV(t,"get for query "+hi(e)+" failed: "+r),Promise.reject(new Error(r))))}function tyt(t,e,n,s,r){VV(t,"set",{path:e.toString(),value:n,priority:s});const i=uG(t),o=Ui(n,s),a=JK(t.serverSyncTree_,e),u=xke(o,a,i),c=jke(t),h=Ske(t.serverSyncTree_,e,u,c,!0);lG(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||Ga("set at "+e+" failed: "+p);const k=Fy(t.serverSyncTree_,c,!w);fd(t.eventQueue_,e,k),oyt(t,r,p,m)});const d=Wke(t,e);UV(t,d),fd(t.eventQueue_,d,[])}function nyt(t){VV(t,"onDisconnectEvents");const e=uG(t),n=EO();lB(t.onDisconnect_,kn(),(r,i)=>{const o=M_t(r,i,t.serverSyncTree_,e);cke(n,r,o)});let s=[];lB(n,kn(),(r,i)=>{s=s.concat(YR(t.serverSyncTree_,r,i));const o=Wke(t,r);UV(t,o)}),t.onDisconnect_=EO(),fd(t.eventQueue_,kn(),s)}function syt(t,e,n){let s;$t(e._path)===".info"?s=fB(t.infoSyncTree_,e,n):s=fB(t.serverSyncTree_,e,n),Uke(t.eventQueue_,e._path,s)}function ryt(t,e,n){let s;$t(e._path)===".info"?s=PO(t.infoSyncTree_,e,n):s=PO(t.serverSyncTree_,e,n),Uke(t.eventQueue_,e._path,s)}function iyt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(G_t)}function VV(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ao(n,...e)}function oyt(t,e,n,s){e&&uC(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function Bke(t,e,n){return JK(t.serverSyncTree_,e,n)||ot.EMPTY_NODE}function hG(t,e=t.transactionQueueTree_){if(e||qV(t,e),cC(e)){const n=zke(t,e);Se(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&ayt(t,JR(e),n)}else Dke(e)&&FV(e,n=>{hG(t,n)})}function ayt(t,e,n){const s=n.map(c=>c.currentWriteId),r=Bke(t,e,s);let i=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];Se(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Aa(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),u=e;t.server_.put(u.toString(),a,c=>{VV(t,"transaction put response",{path:u.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(Fy(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();qV(t,oG(t.transactionQueueTree_,e)),hG(t,t.transactionQueueTree_),fd(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)uC(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ga("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}UV(t,e)}},o)}function UV(t,e){const n=$ke(t,e),s=JR(n),r=zke(t,n);return lyt(t,r,s),s}function lyt(t,e,n){if(e.length===0)return;const s=[];let r=[];const i=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const a=e[o],u=Aa(n,a.path);let c=!1,h;if(Se(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)c=!0,h=a.abortReason,r=r.concat(Fy(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=Q_t)c=!0,h="maxretry",r=r.concat(Fy(t.serverSyncTree_,a.currentWriteId,!0));else{const d=Bke(t,a.path,i);a.currentInputSnapshot=d;const p=e[o].update(d.val());if(p!==void 0){aG("transaction failed: Data returned ",p,a.path);let m=Ui(p);typeof p=="object"&&p!=null&&dp(p,".priority")||(m=m.updatePriority(d.getPriority()));const w=a.currentWriteId,k=uG(t),P=xke(m,d,k);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=P,a.currentWriteId=jke(t),i.splice(i.indexOf(w),1),r=r.concat(Ske(t.serverSyncTree_,a.path,P,a.currentWriteId,a.applyLocally)),r=r.concat(Fy(t.serverSyncTree_,w,!0))}else c=!0,h="nodata",r=r.concat(Fy(t.serverSyncTree_,a.currentWriteId,!0))}fd(t.eventQueue_,n,r),r=[],c&&(e[o].status=2,function(d){setTimeout(d,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(h==="nodata"?s.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):s.push(()=>e[o].onComplete(new Error(h),!1,null))))}qV(t,t.transactionQueueTree_);for(let o=0;o<s.length;o++)uC(s[o]);hG(t,t.transactionQueueTree_)}function $ke(t,e){let n,s=t.transactionQueueTree_;for(n=$t(e);n!==null&&cC(s)===void 0;)s=oG(s,n),e=gs(e),n=$t(e);return s}function zke(t,e){const n=[];return Hke(t,e,n),n.sort((s,r)=>s.order-r.order),n}function Hke(t,e,n){const s=cC(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);FV(e,r=>{Hke(t,r,n)})}function qV(t,e){const n=cC(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,Nke(e,n.length>0?n:void 0)}FV(e,s=>{qV(t,s)})}function Wke(t,e){const n=JR($ke(t,e)),s=oG(t.transactionQueueTree_,e);return V_t(s,r=>{r9(t,r)}),r9(t,s),Oke(s,r=>{r9(t,r)}),n}function r9(t,e){const n=cC(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Se(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Se(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Fy(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?Nke(e,void 0):n.length=i+1,fd(t.eventQueue_,JR(e),r);for(let o=0;o<s.length;o++)uC(s[o])}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uyt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function cyt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ga(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ooe=function(t,e){const n=hyt(t),s=n.namespace;n.domain==="firebase.com"&&Gf(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Gf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Tgt();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new zSe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new os(n.pathString)}},hyt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=uyt(t.substring(h,d)));const p=cyt(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dyt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hi(this.snapshot.exportVal())}}class fyt{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class Kke{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Se(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/class dG{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Jt(this._path)?null:ZSe(this._path)}get ref(){return new fp(this._repo,this._path)}get _queryIdentifier(){const e=voe(this._queryParams),n=FK(e);return n==="{}"?"default":n}get _queryObject(){return voe(this._queryParams)}isEqual(e){if(e=Kn(e),!(e instanceof dG))return!1;const n=this._repo===e._repo,s=jK(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+omt(this._path)}}class fp extends dG{constructor(e,n){super(e,n,new HK,!1)}get parent(){const e=tke(this._path);return e===null?null:new fp(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class eA{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new os(e),s=gB(this.ref,e);return new eA(this._node.getChild(n),s,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>e(new eA(s,gB(this.ref,n),sr)))}hasChild(e){const n=new os(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pyt(t,e){return t=Kn(t),t._checkNotDeleted("ref"),e!==void 0?gB(t._root,e):t._root}function gB(t,e){return t=Kn(t),$t(t._path)===null?z_t("child","path",e):Fke("child","path",e),new fp(t._repo,fi(t._path,e))}function gyt(t){return Vke("remove",t._path),Gke(t,null)}function Gke(t,e){t=Kn(t),Vke("set",t._path),$_t("set",e,t._path);const n=new sV;return tyt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function myt(t){t=Kn(t);const e=new Kke(()=>{}),n=new jV(e);return eyt(t._repo,t,n).then(s=>new eA(s,new fp(t._repo,t._path),t._queryParams.getIndex()))}class jV{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new dyt("value",this,new eA(e.snapshotNode,new fp(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new fyt(this,e,n):null}matches(e){return e instanceof jV?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function _yt(t,e,n,s,r){const i=new Kke(n,void 0),o=new jV(i);return syt(t._repo,t,o),()=>ryt(t._repo,t,o)}function yyt(t,e,n,s){return _yt(t,"value",e)}m_t(fp);b_t(fp);/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const vyt="FIREBASE_DATABASE_EMULATOR_HOST",mB={};let wyt=!1;function byt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=Td(i);t.repoInfo_=new zSe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function Eyt(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||Gf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ao("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Ooe(i,r),a=o.repoInfo,u;typeof process<"u"&&toe&&(u=toe[vyt]),u?(i=`http://${u}?ns=${a.namespace}`,o=Ooe(i,r),a=o.repoInfo):o.repoInfo.secure;const c=new Ogt(t.name,t.options,e);H_t("Invalid Firebase Database URL",o),Jt(o.path)||Gf("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Cyt(a,t,c,new Dgt(t,n));return new Iyt(h,t)}function Tyt(t,e){const n=mB[e];(!n||n[t.key]!==t)&&Gf(`Database ${e}(${t.repoInfo_}) has already been deleted.`),iyt(t),delete n[t.key]}function Cyt(t,e,n,s){let r=mB[e.name];r||(r={},mB[e.name]=r);let i=r[t.toURLString()];return i&&Gf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Y_t(t,wyt,n,s),r[t.toURLString()]=i,i}class Iyt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X_t(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fp(this._repo,kn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tyt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gf("Cannot call "+e+" on a deleted database.")}}function Qke(t=lV(),e){const n=FR(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=O8("database");s&&Syt(n,...s)}return n}function Syt(t,e,n,s={}){t=Kn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&km(s,i.repoInfo_.emulatorOptions))return;Gf("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&Gf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rx(Rx.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:L8(s.mockUserToken,t.app.options.projectId);o=new Rx(a)}Td(e)&&(rV(e),iV("Database",!0)),byt(i,r,s,o)}/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kyt(t){_gt(d_),Am(new $f("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Eyt(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),ql(noe,soe,t),ql(noe,soe,"esm2020")}vf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};vf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kyt();var Z_={};const ti={apiKey:Z_.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:Z_.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:Z_.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:Z_.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:Z_.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:Z_.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:Z_.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:ti.apiKey?"설정됨":"설정 안됨",authDomain:ti.authDomain?"설정됨":"설정 안됨",projectId:ti.projectId?"설정됨":"설정 안됨",storageBucket:ti.storageBucket?"설정됨":"설정 안됨",messagingSenderId:ti.messagingSenderId?"설정됨":"설정 안됨",appId:ti.appId?"설정됨":"설정 안됨",databaseURL:ti.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:ti.apiKey?`${ti.apiKey.substring(0,10)}...`:"없음",authDomain:ti.authDomain,projectId:ti.projectId,databaseURL:ti.databaseURL?"설정됨":"없음"});(!ti.apiKey||!ti.authDomain||!ti.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let Ws,Xs,Vy,xO,NO;ti.apiKey&&ti.authDomain&&ti.projectId?(Ws=WCe(ti),Xs=LIe(Ws),Vy=new Th,xO=sSe(Ws),NO=fgt(Ws),Qke(Ws)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Xs=null,Vy=null,xO=null,NO=null);const Ayt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Xs},get db(){return xO},get firebaseApp(){return Ws},get googleProvider(){return Vy},get storage(){return NO}},Symbol.toStringTag,{value:"Module"}));function Yke(){return vl(vCe)}const vs=Bf(null),eh=Bf(!0),fP=Bf(null);let Lw=null,Loe=!1;function Xke(){const t=Yke(),e=Ws?sSe(Ws):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),Ws?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async u=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const c=3;let h=0;for(;h<c;)try{console.log("🔍 사용자 정보 확인 중:",u.email,`(시도 ${h+1}/${c})`);const d=nSe(e,"users",u.uid),p=await tB(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await nB(d,{lastLoginAt:Ax()},{merge:!0}),{...u,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",u.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(u.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:u.email,adminEmails:w,isAdminEmail:k});const P={uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL,role:k?"admin":"student",createdAt:Ax(),lastLoginAt:Ax()};console.log("💾 새 사용자 정보 저장 중:",P),await nB(d,P),console.log("✅ 새 사용자 등록 완료:",u.email);const O=await tB(d);if(O.exists())console.log("✅ 사용자 등록 확인 완료:",O.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...u,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${c}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!Ws,db:!!e,auth:!!Xs,userUid:u.uid,userEmail:u.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<c)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...u,role:"student"}},s=async()=>{if(!eh.value){eh.value=!0,fP.value=null;try{if(!Xs||!Vy)throw new Error("Firebase is not configured.");const u=await NIe(Xs,Vy);console.log("✅ Google 로그인 팝업 성공:",u.user.email);try{if(Ws&&e)vs.value=await n(u.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",vs.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),vs.value=null,Xs&&await ab(Xs),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),eh.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!vs.value,userRole:vs.value?.role,userEmail:vs.value?.email})}catch(c){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",c),vs.value=null,Xs&&await ab(Xs),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),eh.value=!1;return}eh.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(u){console.error("❌ Google 로그인 팝업 실패:",u),fP.value=u.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),eh.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Xs),!Xs){console.log("❌ useAuth: auth 객체가 없음");return}try{Lw&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Lw(),Lw=null),console.log("🔍 useAuth: Firebase signOut 실행"),await ab(Xs),console.log("✅ useAuth: Firebase signOut 성공"),vs.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(u){console.error("❌ useAuth: 로그아웃 실패:",u),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!Loe){if(Loe=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!Ws,auth:!!Xs,db:!!e}),!Xs){console.log("⚠️ Firebase Auth가 초기화되지 않음"),eh.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Lw=wIe(Xs,async u=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",u?u.email:"없음"),u)if(console.log("✅ 인증된 사용자 감지:",{uid:u.uid,email:u.email,displayName:u.displayName,emailVerified:u.emailVerified}),Ws&&e)try{vs.value=await n(u),console.log("✅ 사용자 역할 설정 완료:",vs.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!vs.value,userRole:vs.value?.role,userEmail:vs.value?.email})}catch(c){console.error("❌ 사용자 역할 가져오기 실패:",c),console.error("❌ 오류 코드:",c.code),console.error("❌ 오류 메시지:",c.message),vs.value=null,Xs&&await ab(Xs),fP.value=c.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),eh.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),vs.value=null,Xs&&await ab(Xs),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),vs.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");eh.value=!1})}};QF(()=>{Lw&&Lw()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:vs.value,isAuthenticated:!!vs.value,userRole:vs.value?.role,firebaseApp:!!Ws,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!Ws),console.log("  - Firebase Auth:",!!Xs),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!Vy),Ws&&console.log("  - Firebase Config:",{apiKey:Ws.options.apiKey?"설정됨":"설정 안됨",authDomain:Ws.options.authDomain?"설정됨":"설정 안됨",projectId:Ws.options.projectId?"설정됨":"설정 안됨",storageBucket:Ws.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!Ws,auth:!!Xs,db:!!e,googleProvider:!!Vy});return{user:Qe(()=>vs.value),loading:Qe(()=>eh.value),error:Qe(()=>fP.value),isAuthenticated:Qe(()=>!!vs.value),displayName:Qe(()=>vs.value?.displayName||"사용자"),email:Qe(()=>vs.value?.email||""),photoURL:Qe(()=>vs.value?.photoURL||""),isFirebaseConfigured:Qe(()=>!!Ws),userRole:Qe(()=>vs.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const Ryt={id:"app"},Pyt=DR({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=Xke(),o=DCe(),a=OCe();return KF(()=>{e()}),Qb([n,s,r],([u,c,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${u}, userRole=${c}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),u?c==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):c==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(u,c)=>{const h=ATe("router-view");return k8(),WTe("div",Ryt,[Mo(h)])}}}),xyt=t=>t,Nyt=xyt,Dyt=[{path:"/",component:()=>Is(()=>Cn(()=>import("./MainLayout-DWpWAzPm-DxBUie-I.js"),__vite__mapDeps([44,45,46,47,48,49,50,51,52,53,54,55])),er([44,45,46,47,48,49,50,51,52,53,54,55,56,57])),children:[{path:"",component:()=>Is(()=>Cn(()=>import("./IndexPage-DdKp2QWP-D1s0LB9j.js"),__vite__mapDeps([56,45,46,47,54,57,52,53,58,55])),er([58,45,46,47,54,59,52,53,60,56,61]))},{path:"survey-results",component:()=>Is(()=>Cn(()=>import("./SurveyResults-Dr3yr6i_-DyDTVqvG.js"),__vite__mapDeps([59,50,47,45,46,49,60,57,61])),er([62,50,47,45,46,49,63,59,64,65]))}]},{path:"/logout",component:()=>Is(()=>Cn(()=>import("./LogoutPage-4UfyfpuW-DSspP6jT.js"),__vite__mapDeps([62,46,47,54,57,48])),er([66,46,47,54,59,48,67]))},{path:"/poll-result",component:()=>Is(()=>Cn(()=>import("./PollResultPage-C5no3dXq-D30XDp5c.js"),__vite__mapDeps([63,50,47,57,61])),er([68,50,47,59,64,65,69]))},{path:"/study/:courseId",component:()=>Is(()=>Cn(()=>import("./StudentView-Yd_YbX30-DTQa4fZ0.js"),__vite__mapDeps([64,45,46,47,49,51,48,52,53,54,50,58,57,60,61])),er([70,45,46,47,49,51,48,52,53,54,50,55,60,59,63,64,65,71])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",u=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:u,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:u,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>Is(()=>Cn(()=>import("./ErrorNotFound-BDIBmV6S-BmzAQ02S.js"),[]),[])}],i9=Nyt(function(){return oat({scrollBehavior:()=>({left:0,top:0}),routes:Dyt,history:Lot("/")})});async function Oyt(t,e){const n=t(Pyt);n.use(rot,e);const s=ZT(typeof i9=="function"?await i9({}):i9);return{app:n,router:s}}const _B={xs:18,sm:24,md:32,lg:38,xl:46},BV={size:String};function $V(t,e=_B){return Qe(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function Jke(t,e){return t!==void 0&&t()||e}function Lyt(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function bb(t,e){return t!==void 0?e.concat(t()):e}function Zke(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function Myt(t,e,n,s,r,i){e.key=s+r;const o=vt(t,e,n);return r===!0?b8(o,i()):o}const Moe="0 0 24 24",o9=t=>t,a9=t=>`ionicons ${t}`,eAe={"mdi-":t=>`mdi ${t}`,"icon-":o9,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":a9,"ion-ios":a9,"ion-logo":a9,"iconfont ":o9,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":o9},tAe={o_:"-outlined",r_:"-round",s_:"-sharp"},nAe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Fyt=new RegExp("^("+Object.keys(eAe).join("|")+")"),Vyt=new RegExp("^("+Object.keys(tAe).join("|")+")"),Foe=new RegExp("^("+Object.keys(nAe).join("|")+")"),Uyt=/^[Mm]\s?[-+]?\.?\d/,qyt=/^img:/,jyt=/^svguse:/,Byt=/^ion-/,$yt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,tA=eC({name:"QIcon",props:{...BV,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=h_(),s=$V(t),r=Qe(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=Qe(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(Uyt.test(a)===!0){const[h,d=Moe]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return vt("path",{style:w,d:m,transform:k})})}}if(qyt.test(a)===!0)return{img:!0,src:a.substring(4)};if(jyt.test(a)===!0){const[h,d=Moe]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let u=" ";const c=a.match(Fyt);if(c!==null)o=eAe[c[1]](a);else if($yt.test(a)===!0)o=a;else if(Byt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(Foe.test(a)===!0){o="notranslate material-symbols";const h=a.match(Foe);h!==null&&(a=a.substring(6),o+=nAe[h[1]]),u=a}else{o="notranslate material-icons";const h=a.match(Vyt);h!==null&&(a=a.substring(2),o+=tAe[h[1]]),u=a}return{cls:o,content:u}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?vt(t.tag,o,Jke(e.default)):i.value.img===!0?vt(t.tag,o,bb(e.default,[vt("img",{src:i.value.src})])):i.value.svg===!0?vt(t.tag,o,bb(e.default,[vt("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?vt(t.tag,o,bb(e.default,[vt("svg",{viewBox:i.value.viewBox},[vt("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),vt(t.tag,o,bb(e.default,[i.value.content])))}}}),sAe=eC({name:"QAvatar",props:{...BV,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=$V(t),s=Qe(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=Qe(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[vt(tA,{name:t.icon})]:void 0;return vt("div",{class:s.value,style:n.value},[vt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},Zke(e.default,i))])}}}),rAe={size:{type:[String,Number],default:"1em"},color:String};function iAe(t){return{cSize:Qe(()=>t.size in _B?`${_B[t.size]}px`:t.size),classes:Qe(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const fG=eC({name:"QSpinner",props:{...rAe,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=iAe(t);return()=>vt("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[vt("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function oAe(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function zyt(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Dg(t);if(e)return e.$el||e}function Hyt(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function Wyt(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function Voe(t,e,n,s){n.modifiers.stop===!0&&P8(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),u=cCe(t),{left:c,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${u.left-c-w}px`,O=`${(p-m)/2}px`,M=i?O:`${u.top-h-w}px`;a.className="q-ripple__inner",oAe(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function Uoe(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const aAe=uCe({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&Voe(r,t,s,r.qKeyEvent===!0)},keystart:Wyt(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&GD(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&Voe(r,t,s,!0)},300)};Uoe(s,e),t.__qripple=s,hCe(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&Uoe(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),dCe(e,"main"),delete t._qripple)}}),lAe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Kyt=Object.keys(lAe),uAe={align:{type:String,validator:t=>Kyt.includes(t)}};function cAe(t){return Qe(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${lAe[e]}`})}function Gyt(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function hAe(t){return t.appContext.config.globalProperties.$router!==void 0}function Qyt(t){return t.isUnmounted===!0||t.isDeactivated===!0}function qoe(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function joe(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yyt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Boe(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Xyt(t,e){return Array.isArray(t)===!0?Boe(t,e):Array.isArray(e)===!0?Boe(e,t):t===e}function Jyt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(Xyt(t[n],e[n])===!1)return!1;return!0}const dAe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},Zyt={...dAe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function fAe({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=h_(),{props:s,proxy:r,emit:i}=n,o=hAe(n),a=Qe(()=>s.disable!==!0&&s.href!==void 0),u=Qe(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),c=Qe(()=>u.value===!0?M(s.to):null),h=Qe(()=>c.value!==null),d=Qe(()=>a.value===!0||h.value===!0),p=Qe(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=Qe(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:c.value.href,target:s.target}:{}),w=Qe(()=>{if(h.value===!1)return-1;const{matched:H}=c.value,{length:J}=H,I=H[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(joe.bind(null,I));if(y!==-1)return y;const T=qoe(H[J-2]);return J>1&&qoe(I)===T&&v[v.length-1].path!==T?v.findIndex(joe.bind(null,H[J-2])):y}),k=Qe(()=>h.value===!0&&w.value!==-1&&Yyt(r.$route.params,c.value.params)),P=Qe(()=>k.value===!0&&w.value===r.$route.matched.length-1&&Jyt(r.$route.params,c.value.params)),O=Qe(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const J=I=>V(H,I);i("click",H,J),H.defaultPrevented!==!0&&J()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:c,linkIsActive:k,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const $oe={none:0,xs:4,sm:8,md:16,lg:24,xl:32},evt={xs:8,sm:10,md:14,lg:20,xl:24},tvt=["button","submit","reset"],nvt=/[^\s]\/[^\s]/,svt=["flat","outline","push","unelevated"];function rvt(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const ivt={...BV,...dAe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...svt.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...uAe.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},ovt={...ivt,round:Boolean};function avt(t){const e=$V(t,evt),n=cAe(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=fAe({fallbackTag:"button"}),u=Qe(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in $oe?$oe[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),c=Qe(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=Qe(()=>t.disable!==!0&&t.loading!==!0),d=Qe(()=>h.value===!0?t.tabindex||0:-1),p=Qe(()=>rvt(t,"standard")),m=Qe(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):tvt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&nvt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=Qe(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${c.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=Qe(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:u,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:Il}=Sm;let Mw=null,Fw=null,Vw=null;const pAe=eC({name:"QBtn",props:{...ovt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=h_(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:u,linkTag:c,navigateOnClick:h,isActionable:d}=avt(t),p=Bf(null),m=Bf(null);let w=null,k,P=null;const O=Qe(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=Qe(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=Qe(()=>({center:t.round})),q=Qe(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=Qe(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:dy}}),J=Qe(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",dy,!0),document.removeEventListener("keyup",ae,Il),p.value?.removeEventListener("blur",ae,Il)};document.addEventListener("keydown",dy,!0),document.addEventListener("keyup",ae,Il),p.value.addEventListener("blur",ae,Il)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),GD(K,[13,32])===!0&&Fw!==p.value&&(Fw!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),Fw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,Il)),dy(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&(Mw!==p.value&&(Mw!==null&&E(),Mw=p.value,w=K.target,w.addEventListener("touchcancel",S,Il),w.addEventListener("touchend",S,Il)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function T(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Vw!==p.value&&(Vw!==null&&E(),Vw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,Il)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(Fw===p.value&&GD(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&KD(ne),K.cancelBubble===!0&&P8(ne),p.value.dispatchEvent(ne),dy(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&(Mw===p.value||Vw===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Mw===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,Il),w.removeEventListener("touchend",S,Il)),Mw=w=null),Vw===p.value&&(document.removeEventListener("mouseup",S,Il),Vw=null),Fw===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,Il),Fw=null),p.value?.classList.remove("q-btn--active")}function b(K){dy(K),K.qSkipRipple=!0}return GF(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(vt(tA,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&K.push(vt("span",{class:"block"},[t.label])),K=bb(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(vt(tA,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[vt("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(vt("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[vt("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(vt("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(vt(tCe,{name:"q-transition--fade"},()=>t.loading===!0?[vt("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[vt(fG)])]:null)),b8(vt(c.value,J.value,ne),[[aAe,M.value,void 0,V.value]])}}});let lvt=1,uvt=document.body;function gAe(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${lvt++}`:t,YD.globalNodes!==void 0){const s=YD.globalNodes.class;s!==void 0&&(n.className=s)}return uvt.appendChild(n),n}function cvt(t){t.remove()}let hvt=0;const Px={},xx={},zu={},mAe={},dvt=/^\s*$/,_Ae=[],fvt=[void 0,null,!0,!1,""],pG=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],pvt=["top-left","top-right","bottom-left","bottom-right"],AI={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function yAe(t,e,n){if(!t)return XC("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,Px),YE(t)===!1&&(r.type&&Object.assign(r,AI[r.type]),t={message:t}),Object.assign(r,AI[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=fG),r.spinner=ZT(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:zoe(r.message)||zoe(r.caption)},r.position){if(pG.includes(r.position)===!1)return XC("wrong position",t)}else r.position="bottom";if(fvt.includes(r.timeout)===!0)r.timeout=5e3;else{const u=Number(r.timeout);if(isNaN(u)||u<0)return XC("wrong timeout",t);r.timeout=Number.isFinite(u)?u:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Px.actions)===!0?Px.actions:[]).concat(Array.isArray(AI[t.type]?.actions)===!0?AI[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:u,noDismiss:c,...h})=>({flat:!0,...h,onClick:typeof u=="function"?()=>{u(),c!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(u=>`${u.label}*${u.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const u=zu[r.position].value.indexOf(n.notif);zu[r.position].value[u]=r}else{const u=xx[r.meta.group];if(u===void 0){if(r.meta.uid=hvt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)zu[r.position].value.splice(Math.floor(zu[r.position].value.length/2),0,r);else{const c=r.position.indexOf("top")!==-1?"unshift":"push";zu[r.position].value[c](r)}r.group!==void 0&&(xx[r.meta.group]=r)}else{if(u.meta.timer&&(clearTimeout(u.meta.timer),u.meta.timer=void 0),r.badgePosition!==void 0){if(pvt.includes(r.badgePosition)===!1)return XC("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=u.meta.uid,r.meta.badge=u.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const c=zu[r.position].value.indexOf(u);zu[r.position].value[c]=xx[r.meta.group]=r}}const a=()=>{gvt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return u=>{u!==void 0?XC("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return u=>{if(s!==void 0)if(u===void 0)s.dismiss();else{const c=Object.assign({},s.config,u,{group:!1,position:r.position});yAe(c,e,s)}}}function gvt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=zu[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete xx[t.meta.group];const n=_Ae[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}zu[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function zoe(t){return t!=null&&dvt.test(t)!==!0}function XC(t,e){return console.error(`Notify: ${t}`,e),!1}function mvt(){return eC({name:"QNotifications",devtools:{hide:!0},setup(){return()=>vt("div",{class:"q-notifications"},pG.map(t=>vt(_it,{key:t,class:mAe[t],tag:"div",name:`q-notification--${t}`},()=>zu[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(vt(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(vt(tA,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(vt(sAe,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>vt("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[vt("div",a),vt("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(vt("div",o,i))}const r=[vt("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(vt("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(vt("div",{class:n.actionsClass},e.actions.map(i=>vt(pAe,i)))),n.badge>1&&r.push(vt("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),vt("div",{ref:i=>{_Ae[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[vt("div",{class:n.wrapperClass},r)])}))))}})}const _vt={setDefaults(t){YE(t)===!0&&Object.assign(Px,t)},registerType(t,e){YE(e)===!0&&(AI[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>yAe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){pG.forEach(s=>{zu[s]=Bf([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;mAe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=gAe("q-notify");tot(mvt(),e).mount(n)}}},yvt={config:{},plugins:{Notify:_vt}},vvt="/";async function wvt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const u=r(a);u!==null&&(window.location.href=u)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:vvt})}catch(u){if(u&&u.url){i(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}Oyt(aCe,yvt).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([Is(()=>Cn(()=>import("./pinia-BFGcd6GC-l0KS0nH_.js"),__vite__mapDeps([65,53])),er([72,53]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");wvt(t,r)})});const rOt=Object.freeze(Object.defineProperty({__proto__:null,$:Jz,A:HL,B:t_,C:J$,D:ew,E:QL,F:Y$,G:LL,H:gg,I:p2,J:$d,K:AT,L:aM,M:ST,N:c2,O:st,P:CT,Q:T2,R:Z$,get S(){return bs},T:FA,U:u2,V:kT,W:ju,X:r5,Y:Mi,Z:Zz,_:Is,a:MA,a$:$A,a0:a2,a1:eH,a2:tw,a3:mE,a4:yl,a5:UA,a6:e5,a7:b2,a8:sM,a9:qL,aA:ZL,aB:t5,aC:Wy,aD:aH,aE:o5,aF:g2,aG:m2,aH:tg,aI:AM,aJ:_M,aK:gM,aL:bM,aM:TM,aN:vM,aO:kM,aP:xS,aQ:mM,aR:wM,aS:HA,aT:RM,aU:CM,aV:EM,aW:Qu,aX:td,aY:Rl,aZ:Gu,a_:Ku,aa:DA,ab:u5,ac:l5,ad:Zh,ae:FL,af:VL,ag:cg,ah:Sb,ai:nM,aj:jL,ak:LA,al:_E,am:Jg,an:tM,ao:JL,ap:Xg,aq:iH,ar:PM,as:tH,at:UT,au:qT,av:en,aw:YL,ax:sH,ay:eM,az:s5,b:He,b$:r8,get b0(){return xE},b1:HM,b2:qS,b3:az,b4:jS,get b5(){return NE},b6:bz,b7:_z,b8:oz,b9:Nb,bA:jT,bB:HW,bC:QH,bD:WW,bE:id,bF:Ke,bG:o_,bH:Jy,bI:uR,bJ:cR,bK:xH,bL:MH,bM:q2,bN:IH,bO:aw,bP:_t,bQ:KW,bR:lp,bS:Wa,bT:z_e,bU:yEe,bV:UH,bW:x2,bX:REe,bY:Xi,bZ:y_e,b_:LH,ba:vz,bb:yz,bc:wz,bd:lz,be:E2,bf:v2,bg:w2,bh:$$,bi:gE,bj:C2,bk:Jh,bl:oH,bm:n5,bn:uH,bo:i5,bp:f2,bq:rH,br:_2,bs:N$,bt:e_,bu:W$,bv:Pr,bw:gf,bx:NL,by:D$,bz:j$,c:ji,c$:$_e,c0:_f,c1:FH,c2:gH,c3:j2,c4:LF,c5:nl,c6:Jme,c7:aR,c8:O2,c9:P_e,cA:CEe,cB:d0,cC:HH,cD:D2,cE:PH,cF:F2,cG:rk,cH:N_e,cI:zH,cJ:n8,cK:WH,cL:K_e,cM:W_e,cN:Sv,cO:PR,cP:xR,cQ:_n,cR:I7,cS:_Ee,cT:qH,cU:$H,cV:M_e,cW:BH,cX:O_e,cY:vEe,cZ:Vb,c_:kEe,ca:ZW,cb:KE,cc:k_e,cd:QW,ce:Bp,cf:j_e,cg:hR,ch:YH,ci:oR,get cj(){return Ds},ck:zW,cl:gEe,cm:pEe,cn:$W,co:mEe,cp:BT,cq:sk,cr:Fl,cs:z2,ct:Iv,cu:Nf,cv:RH,cw:kH,cx:AH,cy:Dy,cz:jH,d:kh,d$:$i,d0:YW,d1:XW,d2:wy,d3:T7,d4:c7,d5:s7,d6:m7,d7:y7,d8:f7,d9:b7,dA:Kwe,dB:Swe,dC:s8,dD:e8,dE:t8,dF:$me,dG:nk,dH:i8,dI:L_e,dJ:xf,dK:SEe,dL:PEe,dM:B_e,dN:JW,dO:TEe,dP:GW,dQ:gme,dR:ow,dS:n_e,dT:_i,dU:Cg,dV:mH,dW:mme,dX:Ome,dY:Bf,dZ:dw,d_:cst,da:oD,db:l7,dc:p7,dd:nF,de:C7,df:v7,dg:_7,dh:Eh,di:Mf,dj:Ju,dk:bh,dl:wh,dm:tF,get dn(){return Sk},dp:Z7,dq:bD,dr:Iwe,ds:ED,get dt(){return kk},du:Gwe,dv:zwe,dw:Cwe,dx:b0,dy:Wwe,dz:Hwe,e:KL,e$:$ft,e0:sv,e1:En,e2:Qb,e3:v8,e4:Ost,e5:ZT,e6:Qe,e7:$Ee,e8:hst,e9:vl,eA:KD,eB:KF,eC:OCe,eD:KTe,eE:dTe,eF:Lrt,eG:qEe,eH:QTe,eI:DCe,eJ:Yke,eK:Im,eL:GF,eM:QE,eN:Sm,eO:L0,eP:QF,eQ:bb,get eR(){return Ws},eS:Qke,eT:yyt,eU:pyt,eV:gCe,get eW(){return NO},eX:dgt,eY:lgt,get eZ(){return xO},e_:nSe,ea:hrt,eb:eC,ec:h_,ed:vt,ee:Jke,ef:Xit,eg:Git,eh:Qit,ei:zyt,ej:oAe,ek:BV,el:$V,em:Myt,en:aAe,eo:tA,ep:Zke,eq:dy,er:DR,es:WTe,et:A8,eu:Mo,ev:k8,ew:pAe,ex:P8,ey:Pc,ez:LR,f:xL,f$:Th,f0:Ax,f1:cgt,f2:ugt,f3:hgt,f4:nB,f5:tB,f6:Hft,f7:zft,f8:Zyt,f9:fAe,fA:Cit,fB:tCe,fC:m8,fD:eit,fE:fG,fF:ATe,fG:STe,fH:Hyt,fI:mx,fJ:kTe,fK:T8,fL:hAe,fM:yCe,fN:eot,fO:Zit,fP:Rit,fQ:WD,fR:Gyt,fS:Hst,fT:gAe,fU:cvt,fV:Lit,fW:uAe,fX:cAe,fY:W8,fZ:Yd,f_:Xd,fa:GD,fb:Lyt,fc:Xke,fd:Gke,fe:myt,ff:jF,fg:BF,fh:Dg,fi:gyt,fj:b8,fk:uCe,fl:dCe,fm:Mit,fn:hCe,fo:cCe,fp:Oit,fq:fCe,fr:CTe,fs:TTe,ft:Qyt,fu:Yit,fv:YE,fw:LIe,fx:Al,fy:nrt,fz:sAe,g:oM,g0:Rm,g1:Jd,g2:vIe,g3:TIe,g4:OIe,g5:G8,g6:gIe,g7:tIe,g8:Oj,g9:RIe,ga:pIe,gb:wIe,gc:yIe,gd:YCe,ge:nIe,gf:NIe,gg:ab,gh:rAe,gi:iAe,gj:Ynt,gk:Ayt,h:Va,i:H$,j:qc,k:WL,l:iR,m:IT,n:OA,o:y2,p:Tv,q:yd,r:Na,s:sp,t:a5,u:BL,v:nH,w:d2,x:h2,y:lH,z:xA},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function gG(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ss={},sE=[],Hh=()=>{},bvt=()=>!1,zV=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mG=t=>t.startsWith("onUpdate:"),Ci=Object.assign,_G=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Evt=Object.prototype.hasOwnProperty,qn=(t,e)=>Evt.call(t,e),gt=Array.isArray,rE=t=>HV(t)==="[object Map]",vAe=t=>HV(t)==="[object Set]",Pt=t=>typeof t=="function",hr=t=>typeof t=="string",g_=t=>typeof t=="symbol",Ns=t=>t!==null&&typeof t=="object",wAe=t=>(Ns(t)||Pt(t))&&Pt(t.then)&&Pt(t.catch),bAe=Object.prototype.toString,HV=t=>bAe.call(t),Tvt=t=>HV(t).slice(8,-1),EAe=t=>HV(t)==="[object Object]",yG=t=>hr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,X0=gG(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),WV=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Cvt=/-(\w)/g,Gl=WV(t=>t.replace(Cvt,(e,n)=>n?n.toUpperCase():"")),Ivt=/\B([A-Z])/g,mw=WV(t=>t.replace(Ivt,"-$1").toLowerCase()),KV=WV(t=>t.charAt(0).toUpperCase()+t.slice(1)),l9=WV(t=>t?`on${KV(t)}`:""),jg=(t,e)=>!Object.is(t,e),u9=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},yB=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Svt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},kvt=t=>{const e=hr(t)?Number(t):NaN;return isNaN(e)?t:e};let Hoe;const GV=()=>Hoe||(Hoe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vG(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=hr(s)?xvt(s):vG(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(hr(t)||Ns(t))return t}const Avt=/;(?![^(]*\))/g,Rvt=/:([^]+)/,Pvt=/\/\*[^]*?\*\//g;function xvt(t){const e={};return t.replace(Pvt,"").split(Avt).forEach(n=>{if(n){const s=n.split(Rvt);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function wG(t){let e="";if(hr(t))e=t;else if(gt(t))for(let n=0;n<t.length;n++){const s=wG(t[n]);s&&(e+=s+" ")}else if(Ns(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Nvt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dvt=gG(Nvt);function TAe(t){return!!t||t===""}const CAe=t=>!!(t&&t.__v_isRef===!0),Ovt=t=>hr(t)?t:t==null?"":gt(t)||Ns(t)&&(t.toString===bAe||!Pt(t.toString))?CAe(t)?Ovt(t.value):JSON.stringify(t,IAe,2):String(t),IAe=(t,e)=>CAe(e)?IAe(t,e.value):rE(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[c9(s,i)+" =>"]=r,n),{})}:vAe(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>c9(n))}:g_(e)?c9(e):Ns(e)&&!gt(e)&&!EAe(e)?String(e):e,c9=(t,e="")=>{var n;return g_(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let go;class SAe{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=go,!e&&go&&(this.index=(go.scopes||(go.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=go;try{return go=this,e()}finally{go=n}}}on(){++this._on===1&&(this.prevScope=go,go=this)}off(){this._on>0&&--this._on===0&&(go=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function iOt(t){return new SAe(t)}function Lvt(){return go}function oOt(t,e=!1){go&&go.cleanups.push(t)}let ds;const h9=new WeakSet;class kAe{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,go&&go.active&&go.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,h9.has(this)&&(h9.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||RAe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Woe(this),PAe(this);const e=ds,n=Lc;ds=this,Lc=!0;try{return this.fn()}finally{xAe(this),ds=e,Lc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)TG(e);this.deps=this.depsTail=void 0,Woe(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?h9.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){vB(this)&&this.run()}get dirty(){return vB(this)}}let AAe=0,J0,Z0;function RAe(t,e=!1){if(t.flags|=8,e){t.next=Z0,Z0=t;return}t.next=J0,J0=t}function bG(){AAe++}function EG(){if(--AAe>0)return;if(Z0){let e=Z0;for(Z0=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;J0;){let e=J0;for(J0=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function PAe(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function xAe(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),TG(s),Mvt(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function vB(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(NAe(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function NAe(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===nA)||(t.globalVersion=nA,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!vB(t))))return;t.flags|=2;const e=t.dep,n=ds,s=Lc;ds=t,Lc=!0;try{PAe(t);const r=t.fn(t._value);(e.version===0||jg(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ds=n,Lc=s,xAe(t),t.flags&=-3}}function TG(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)TG(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mvt(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Lc=!0;const DAe=[];function Qf(){DAe.push(Lc),Lc=!1}function Yf(){const t=DAe.pop();Lc=t===void 0?!0:t}function Woe(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ds;ds=void 0;try{e()}finally{ds=n}}}let nA=0;class Fvt{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class CG{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ds||!Lc||ds===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ds)n=this.activeLink=new Fvt(ds,this),ds.deps?(n.prevDep=ds.depsTail,ds.depsTail.nextDep=n,ds.depsTail=n):ds.deps=ds.depsTail=n,OAe(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ds.depsTail,n.nextDep=void 0,ds.depsTail.nextDep=n,ds.depsTail=n,ds.deps===n&&(ds.deps=s)}return n}trigger(e){this.version++,nA++,this.notify(e)}notify(e){bG();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{EG()}}}function OAe(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)OAe(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const DO=new WeakMap,lv=Symbol(""),wB=Symbol(""),sA=Symbol("");function Ro(t,e,n){if(Lc&&ds){let s=DO.get(t);s||DO.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new CG),r.map=s,r.key=n),r.track()}}function Zd(t,e,n,s,r,i){const o=DO.get(t);if(!o){nA++;return}const a=u=>{u&&u.trigger()};if(bG(),e==="clear")o.forEach(a);else{const u=gt(t),c=u&&yG(n);if(u&&n==="length"){const h=Number(s);o.forEach((d,p)=>{(p==="length"||p===sA||!g_(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(sA)),e){case"add":u?c&&a(o.get("length")):(a(o.get(lv)),rE(t)&&a(o.get(wB)));break;case"delete":u||(a(o.get(lv)),rE(t)&&a(o.get(wB)));break;case"set":rE(t)&&a(o.get(lv));break}}EG()}function Vvt(t,e){const n=DO.get(t);return n&&n.get(e)}function Uw(t){const e=Tn(t);return e===t?e:(Ro(e,"iterate",sA),jl(t)?e:e.map(Ki))}function QV(t){return Ro(t=Tn(t),"iterate",sA),t}const Uvt={__proto__:null,[Symbol.iterator](){return d9(this,Symbol.iterator,Ki)},concat(...t){return Uw(this).concat(...t.map(e=>gt(e)?Uw(e):e))},entries(){return d9(this,"entries",t=>(t[1]=Ki(t[1]),t))},every(t,e){return Dd(this,"every",t,e,void 0,arguments)},filter(t,e){return Dd(this,"filter",t,e,n=>n.map(Ki),arguments)},find(t,e){return Dd(this,"find",t,e,Ki,arguments)},findIndex(t,e){return Dd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Dd(this,"findLast",t,e,Ki,arguments)},findLastIndex(t,e){return Dd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Dd(this,"forEach",t,e,void 0,arguments)},includes(...t){return f9(this,"includes",t)},indexOf(...t){return f9(this,"indexOf",t)},join(t){return Uw(this).join(t)},lastIndexOf(...t){return f9(this,"lastIndexOf",t)},map(t,e){return Dd(this,"map",t,e,void 0,arguments)},pop(){return JC(this,"pop")},push(...t){return JC(this,"push",t)},reduce(t,...e){return Koe(this,"reduce",t,e)},reduceRight(t,...e){return Koe(this,"reduceRight",t,e)},shift(){return JC(this,"shift")},some(t,e){return Dd(this,"some",t,e,void 0,arguments)},splice(...t){return JC(this,"splice",t)},toReversed(){return Uw(this).toReversed()},toSorted(t){return Uw(this).toSorted(t)},toSpliced(...t){return Uw(this).toSpliced(...t)},unshift(...t){return JC(this,"unshift",t)},values(){return d9(this,"values",Ki)}};function d9(t,e,n){const s=QV(t),r=s[e]();return s!==t&&!jl(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const qvt=Array.prototype;function Dd(t,e,n,s,r,i){const o=QV(t),a=o!==t&&!jl(t),u=o[e];if(u!==qvt[e]){const d=u.apply(t,i);return a?Ki(d):d}let c=n;o!==t&&(a?c=function(d,p){return n.call(this,Ki(d),p,t)}:n.length>2&&(c=function(d,p){return n.call(this,d,p,t)}));const h=u.call(o,c,s);return a&&r?r(h):h}function Koe(t,e,n,s){const r=QV(t);let i=n;return r!==t&&(jl(t)?n.length>3&&(i=function(o,a,u){return n.call(this,o,a,u,t)}):i=function(o,a,u){return n.call(this,o,Ki(a),u,t)}),r[e](i,...s)}function f9(t,e,n){const s=Tn(t);Ro(s,"iterate",sA);const r=s[e](...n);return(r===-1||r===!1)&&kG(n[0])?(n[0]=Tn(n[0]),s[e](...n)):r}function JC(t,e,n=[]){Qf(),bG();const s=Tn(t)[e].apply(t,n);return EG(),Yf(),s}const jvt=gG("__proto__,__v_isRef,__isVue"),LAe=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(g_));function Bvt(t){g_(t)||(t=String(t));const e=Tn(this);return Ro(e,"has",t),e.hasOwnProperty(t)}class MAe{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Jvt:qAe:i?UAe:VAe).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=gt(e);if(!r){let u;if(o&&(u=Uvt[n]))return u;if(n==="hasOwnProperty")return Bvt}const a=Reflect.get(e,n,Ji(e)?e:s);return(g_(n)?LAe.has(n):jvt(n))||(r||Ro(e,"get",n),i)?a:Ji(a)?o&&yG(n)?a:a.value:Ns(a)?r?BAe(a):hC(a):a}}class FAe extends MAe{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const u=Um(i);if(!jl(s)&&!Um(s)&&(i=Tn(i),s=Tn(s)),!gt(e)&&Ji(i)&&!Ji(s))return u?!1:(i.value=s,!0)}const o=gt(e)&&yG(n)?Number(n)<e.length:qn(e,n),a=Reflect.set(e,n,s,Ji(e)?e:r);return e===Tn(r)&&(o?jg(s,i)&&Zd(e,"set",n,s):Zd(e,"add",n,s)),a}deleteProperty(e,n){const s=qn(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Zd(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!g_(n)||!LAe.has(n))&&Ro(e,"has",n),s}ownKeys(e){return Ro(e,"iterate",gt(e)?"length":lv),Reflect.ownKeys(e)}}class $vt extends MAe{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const zvt=new FAe,Hvt=new $vt,Wvt=new FAe(!0);const bB=t=>t,pP=t=>Reflect.getPrototypeOf(t);function Kvt(t,e,n){return function(...s){const r=this.__v_raw,i=Tn(r),o=rE(i),a=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=r[t](...s),h=n?bB:e?OO:Ki;return!e&&Ro(i,"iterate",u?wB:lv),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function gP(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Gvt(t,e){const n={get(r){const i=this.__v_raw,o=Tn(i),a=Tn(r);t||(jg(r,a)&&Ro(o,"get",r),Ro(o,"get",a));const{has:u}=pP(o),c=e?bB:t?OO:Ki;if(u.call(o,r))return c(i.get(r));if(u.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ro(Tn(r),"iterate",lv),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Tn(i),a=Tn(r);return t||(jg(r,a)&&Ro(o,"has",r),Ro(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,u=Tn(a),c=e?bB:t?OO:Ki;return!t&&Ro(u,"iterate",lv),a.forEach((h,d)=>r.call(i,c(h),c(d),o))}};return Ci(n,t?{add:gP("add"),set:gP("set"),delete:gP("delete"),clear:gP("clear")}:{add(r){!e&&!jl(r)&&!Um(r)&&(r=Tn(r));const i=Tn(this);return pP(i).has.call(i,r)||(i.add(r),Zd(i,"add",r,r)),this},set(r,i){!e&&!jl(i)&&!Um(i)&&(i=Tn(i));const o=Tn(this),{has:a,get:u}=pP(o);let c=a.call(o,r);c||(r=Tn(r),c=a.call(o,r));const h=u.call(o,r);return o.set(r,i),c?jg(i,h)&&Zd(o,"set",r,i):Zd(o,"add",r,i),this},delete(r){const i=Tn(this),{has:o,get:a}=pP(i);let u=o.call(i,r);u||(r=Tn(r),u=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return u&&Zd(i,"delete",r,void 0),c},clear(){const r=Tn(this),i=r.size!==0,o=r.clear();return i&&Zd(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Kvt(r,t,e)}),n}function IG(t,e){const n=Gvt(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(qn(n,r)&&r in s?n:s,r,i)}const Qvt={get:IG(!1,!1)},Yvt={get:IG(!1,!0)},Xvt={get:IG(!0,!1)};const VAe=new WeakMap,UAe=new WeakMap,qAe=new WeakMap,Jvt=new WeakMap;function Zvt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ewt(t){return t.__v_skip||!Object.isExtensible(t)?0:Zvt(Tvt(t))}function hC(t){return Um(t)?t:SG(t,!1,zvt,Qvt,VAe)}function jAe(t){return SG(t,!1,Wvt,Yvt,UAe)}function BAe(t){return SG(t,!0,Hvt,Xvt,qAe)}function SG(t,e,n,s,r){if(!Ns(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=ewt(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function iE(t){return Um(t)?iE(t.__v_raw):!!(t&&t.__v_isReactive)}function Um(t){return!!(t&&t.__v_isReadonly)}function jl(t){return!!(t&&t.__v_isShallow)}function kG(t){return t?!!t.__v_raw:!1}function Tn(t){const e=t&&t.__v_raw;return e?Tn(e):t}function ZR(t){return!qn(t,"__v_skip")&&Object.isExtensible(t)&&yB(t,"__v_skip",!0),t}const Ki=t=>Ns(t)?hC(t):t,OO=t=>Ns(t)?BAe(t):t;function Ji(t){return t?t.__v_isRef===!0:!1}function qm(t){return $Ae(t,!1)}function twt(t){return $Ae(t,!0)}function $Ae(t,e){return Ji(t)?t:new nwt(t,e)}class nwt{constructor(e,n){this.dep=new CG,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Tn(e),this._value=n?e:Ki(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||jl(e)||Um(e);e=s?e:Tn(e),jg(e,n)&&(this._rawValue=e,this._value=s?e:Ki(e),this.dep.trigger())}}function uv(t){return Ji(t)?t.value:t}const swt={get:(t,e,n)=>e==="__v_raw"?t:uv(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Ji(r)&&!Ji(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function zAe(t){return iE(t)?t:new Proxy(t,swt)}function aOt(t){const e=gt(t)?new Array(t.length):{};for(const n in t)e[n]=iwt(t,n);return e}class rwt{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Vvt(Tn(this._object),this._key)}}function iwt(t,e,n){const s=t[e];return Ji(s)?s:new rwt(t,e,n)}class owt{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new CG(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=nA-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ds!==this)return RAe(this,!0),!0}get value(){const e=this.dep.track();return NAe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function awt(t,e,n=!1){let s,r;return Pt(t)?s=t:(s=t.get,r=t.set),new owt(s,r,n)}const mP={},LO=new WeakMap;let gy;function lwt(t,e=!1,n=gy){if(n){let s=LO.get(n);s||LO.set(n,s=[]),s.push(t)}}function uwt(t,e,n=ss){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:u}=n,c=q=>r?q:jl(q)||r===!1||r===0?ef(q,1):ef(q);let h,d,p,m,w=!1,k=!1;if(Ji(t)?(d=()=>t.value,w=jl(t)):iE(t)?(d=()=>c(t),w=!0):gt(t)?(k=!0,w=t.some(q=>iE(q)||jl(q)),d=()=>t.map(q=>{if(Ji(q))return q.value;if(iE(q))return c(q);if(Pt(q))return u?u(q,2):q()})):Pt(t)?e?d=u?()=>u(t,2):t:d=()=>{if(p){Qf();try{p()}finally{Yf()}}const q=gy;gy=h;try{return u?u(t,3,[m]):t(m)}finally{gy=q}}:d=Hh,e&&r){const q=d,H=r===!0?1/0:r;d=()=>ef(q(),H)}const P=Lvt(),O=()=>{h.stop(),P&&P.active&&_G(P.effects,h)};if(i&&e){const q=e;e=(...H)=>{q(...H),O()}}let M=k?new Array(t.length).fill(mP):mP;const V=q=>{if(!(!(h.flags&1)||!h.dirty&&!q))if(e){const H=h.run();if(r||w||(k?H.some((J,I)=>jg(J,M[I])):jg(H,M))){p&&p();const J=gy;gy=h;try{const I=[H,M===mP?void 0:k&&M[0]===mP?[]:M,m];M=H,u?u(e,3,I):e(...I)}finally{gy=J}}}else h.run()};return a&&a(V),h=new kAe(d),h.scheduler=o?()=>o(V,!1):V,m=q=>lwt(q,!1,h),p=h.onStop=()=>{const q=LO.get(h);if(q){if(u)u(q,4);else for(const H of q)H();LO.delete(h)}},e?s?V(!0):M=h.run():o?o(V.bind(null,!0),!0):h.run(),O.pause=h.pause.bind(h),O.resume=h.resume.bind(h),O.stop=O,O}function ef(t,e=1/0,n){if(e<=0||!Ns(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ji(t))ef(t.value,e,n);else if(gt(t))for(let s=0;s<t.length;s++)ef(t[s],e,n);else if(vAe(t)||rE(t))t.forEach(s=>{ef(s,e,n)});else if(EAe(t)){for(const s in t)ef(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&ef(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function e1(t,e,n,s){try{return s?t(...s):t()}catch(r){YV(r,e,n)}}function Kc(t,e,n,s){if(Pt(t)){const r=e1(t,e,n,s);return r&&wAe(r)&&r.catch(i=>{YV(i,e,n)}),r}if(gt(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Kc(t[i],e,n,s));return r}}function YV(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ss;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,u,c)===!1)return}a=a.parent}if(i){Qf(),e1(i,null,10,[t,u,c]),Yf();return}}cwt(t,n,r,s,o)}function cwt(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const ya=[];let hh=-1;const oE=[];let Yp=null,db=0;const HAe=Promise.resolve();let MO=null;function WAe(t){const e=MO||HAe;return t?e.then(this?t.bind(this):t):e}function hwt(t){let e=hh+1,n=ya.length;for(;e<n;){const s=e+n>>>1,r=ya[s],i=rA(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function AG(t){if(!(t.flags&1)){const e=rA(t),n=ya[ya.length-1];!n||!(t.flags&2)&&e>=rA(n)?ya.push(t):ya.splice(hwt(e),0,t),t.flags|=1,KAe()}}function KAe(){MO||(MO=HAe.then(QAe))}function dwt(t){gt(t)?oE.push(...t):Yp&&t.id===-1?Yp.splice(db+1,0,t):t.flags&1||(oE.push(t),t.flags|=1),KAe()}function Goe(t,e,n=hh+1){for(;n<ya.length;n++){const s=ya[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;ya.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function GAe(t){if(oE.length){const e=[...new Set(oE)].sort((n,s)=>rA(n)-rA(s));if(oE.length=0,Yp){Yp.push(...e);return}for(Yp=e,db=0;db<Yp.length;db++){const n=Yp[db];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Yp=null,db=0}}const rA=t=>t.id==null?t.flags&2?-1:1/0:t.id;function QAe(t){try{for(hh=0;hh<ya.length;hh++){const e=ya[hh];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),e1(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;hh<ya.length;hh++){const e=ya[hh];e&&(e.flags&=-2)}hh=-1,ya.length=0,GAe(),MO=null,(ya.length||oE.length)&&QAe()}}let gl=null,YAe=null;function FO(t){const e=gl;return gl=t,YAe=t&&t.type.__scopeId||null,e}function fwt(t,e=gl,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&lae(-1);const i=FO(e);let o;try{o=t(...r)}finally{FO(i),s._d&&lae(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function XAe(t,e){if(gl===null)return t;const n=n4(gl),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,u=ss]=e[r];i&&(Pt(i)&&(i={mounted:i,updated:i}),i.deep&&ef(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return t}function ey(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let u=a.dir[s];u&&(Qf(),Kc(u,n,8,[t.el,a,t,e]),Yf())}}const JAe=Symbol("_vte"),ZAe=t=>t.__isTeleport,eS=t=>t&&(t.disabled||t.disabled===""),Qoe=t=>t&&(t.defer||t.defer===""),Yoe=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Xoe=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,EB=(t,e)=>{const n=t&&t.to;return hr(n)?e?e(n):null:n},eRe={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,u,c){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:w,createText:k,createComment:P}}=c,O=eS(e.props);let{shapeFlag:M,children:V,dynamicChildren:q}=e;if(t==null){const H=e.el=k(""),J=e.anchor=k("");m(H,n,s),m(J,n,s);const I=(y,T)=>{M&16&&(r&&r.isCE&&(r.ce._teleportTarget=y),h(V,y,T,r,i,o,a,u))},v=()=>{const y=e.target=EB(e.props,w),T=tRe(y,e,k,m);y&&(o!=="svg"&&Yoe(y)?o="svg":o!=="mathml"&&Xoe(y)&&(o="mathml"),O||(I(y,T),Nx(e,!1)))};O&&(I(n,J),Nx(e,!0)),Qoe(e.props)?(e.el.__isMounted=!1,fa(()=>{v(),delete e.el.__isMounted},i)):v()}else{if(Qoe(e.props)&&t.el.__isMounted===!1){fa(()=>{eRe.process(t,e,n,s,r,i,o,a,u,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const H=e.anchor=t.anchor,J=e.target=t.target,I=e.targetAnchor=t.targetAnchor,v=eS(t.props),y=v?n:J,T=v?H:I;if(o==="svg"||Yoe(J)?o="svg":(o==="mathml"||Xoe(J))&&(o="mathml"),q?(p(t.dynamicChildren,q,y,r,i,o,a),LG(t,e,!0)):u||d(t,e,y,T,r,i,o,a,!1),O)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):_P(e,n,H,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const S=e.target=EB(e.props,w);S&&_P(e,S,null,c,0)}else v&&_P(e,J,I,c,1);Nx(e,O)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:u,targetStart:c,targetAnchor:h,target:d,props:p}=t;if(d&&(r(c),r(h)),i&&r(u),o&16){const m=i||!eS(p);for(let w=0;w<a.length;w++){const k=a[w];s(k,e,n,m,!!k.dynamicChildren)}}},move:_P,hydrate:pwt};function _P(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:h}=t,d=i===2;if(d&&s(o,e,n),(!d||eS(h))&&u&16)for(let p=0;p<c.length;p++)r(c[p],e,n,2);d&&s(a,e,n)}function pwt(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:c,createText:h}},d){const p=e.target=EB(e.props,u);if(p){const m=eS(e.props),w=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=d(o(t),e,a(t),n,s,r,i),e.targetStart=w,e.targetAnchor=w&&o(w);else{e.anchor=o(t);let k=w;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||tRe(p,e,h,c),d(w&&o(w),e,p,n,s,r,i)}Nx(e,m)}return e.anchor&&o(e.anchor)}const lOt=eRe;function Nx(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function tRe(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[JAe]=i,t&&(s(r,t),s(i,t)),i}const Xp=Symbol("_leaveCb"),yP=Symbol("_enterCb");function nRe(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return PG(()=>{t.isMounted=!0}),xG(()=>{t.isUnmounting=!0}),t}const Sl=[Function,Array],sRe={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sl,onEnter:Sl,onAfterEnter:Sl,onEnterCancelled:Sl,onBeforeLeave:Sl,onLeave:Sl,onAfterLeave:Sl,onLeaveCancelled:Sl,onBeforeAppear:Sl,onAppear:Sl,onAfterAppear:Sl,onAppearCancelled:Sl},rRe=t=>{const e=t.subTree;return e.component?rRe(e.component):e},gwt={name:"BaseTransition",props:sRe,setup(t,{slots:e}){const n=_w(),s=nRe();return()=>{const r=e.default&&RG(e.default(),!0);if(!r||!r.length)return;const i=iRe(r),o=Tn(t),{mode:a}=o;if(s.isLeaving)return p9(i);const u=Joe(i);if(!u)return p9(i);let c=iA(u,o,s,n,d=>c=d);u.type!==Ea&&Bv(u,c);let h=n.subTree&&Joe(n.subTree);if(h&&h.type!==Ea&&!Ey(u,h)&&rRe(n).type!==Ea){let d=iA(h,o,s,n);if(Bv(h,d),a==="out-in"&&u.type!==Ea)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},p9(i);a==="in-out"&&u.type!==Ea?d.delayLeave=(p,m,w)=>{const k=oRe(s,h);k[String(h.key)]=h,p[Xp]=()=>{m(),p[Xp]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{w(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function iRe(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ea){e=n;break}}return e}const mwt=gwt;function oRe(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function iA(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:P,onAppear:O,onAfterAppear:M,onAppearCancelled:V}=e,q=String(t.key),H=oRe(n,t),J=(y,T)=>{y&&Kc(y,s,9,T)},I=(y,T)=>{const S=T[1];J(y,T),gt(y)?y.every(E=>E.length<=1)&&S():y.length<=1&&S()},v={mode:o,persisted:a,beforeEnter(y){let T=u;if(!n.isMounted)if(i)T=P||u;else return;y[Xp]&&y[Xp](!0);const S=H[q];S&&Ey(t,S)&&S.el[Xp]&&S.el[Xp](),J(T,[y])},enter(y){let T=c,S=h,E=d;if(!n.isMounted)if(i)T=O||c,S=M||h,E=V||d;else return;let b=!1;const K=y[yP]=ne=>{b||(b=!0,ne?J(E,[y]):J(S,[y]),v.delayedLeave&&v.delayedLeave(),y[yP]=void 0)};T?I(T,[y,K]):K()},leave(y,T){const S=String(t.key);if(y[yP]&&y[yP](!0),n.isUnmounting)return T();J(p,[y]);let E=!1;const b=y[Xp]=K=>{E||(E=!0,T(),K?J(k,[y]):J(w,[y]),y[Xp]=void 0,H[S]===t&&delete H[S])};H[S]=t,m?I(m,[y,b]):b()},clone(y){const T=iA(y,e,n,s,r);return r&&r(T),T}};return v}function p9(t){if(JV(t))return t=jm(t),t.children=null,t}function Joe(t){if(!JV(t))return ZAe(t.type)&&t.children?iRe(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Pt(n.default))return n.default()}}function Bv(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bv(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function RG(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Wu?(o.patchFlag&128&&r++,s=s.concat(RG(o.children,e,a))):(e||o.type!==Ea)&&s.push(a!=null?jm(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function XV(t,e){return Pt(t)?Ci({name:t.name},e,{setup:t}):t}function aRe(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function tS(t,e,n,s,r=!1){if(gt(t)){t.forEach((w,k)=>tS(w,e&&(gt(e)?e[k]:e),n,s,r));return}if(nS(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&tS(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?n4(s.component):s.el,o=r?null:i,{i:a,r:u}=t,c=e&&e.r,h=a.refs===ss?a.refs={}:a.refs,d=a.setupState,p=Tn(d),m=d===ss?()=>!1:w=>qn(p,w);if(c!=null&&c!==u&&(hr(c)?(h[c]=null,m(c)&&(d[c]=null)):Ji(c)&&(c.value=null)),Pt(u))e1(u,a,12,[o,h]);else{const w=hr(u),k=Ji(u);if(w||k){const P=()=>{if(t.f){const O=w?m(u)?d[u]:h[u]:u.value;r?gt(O)&&_G(O,i):gt(O)?O.includes(i)||O.push(i):w?(h[u]=[i],m(u)&&(d[u]=h[u])):(u.value=[i],t.k&&(h[t.k]=u.value))}else w?(h[u]=o,m(u)&&(d[u]=o)):k&&(u.value=o,t.k&&(h[t.k]=o))};o?(P.id=-1,fa(P,n)):P()}}}GV().requestIdleCallback;GV().cancelIdleCallback;const nS=t=>!!t.type.__asyncLoader,JV=t=>t.type.__isKeepAlive;function _wt(t,e){lRe(t,"a",e)}function ywt(t,e){lRe(t,"da",e)}function lRe(t,e,n=Lo){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ZV(e,s,n),n){let r=n.parent;for(;r&&r.parent;)JV(r.parent.vnode)&&vwt(s,e,n,r),r=r.parent}}function vwt(t,e,n,s){const r=ZV(e,t,s,!0);NG(()=>{_G(s[e],r)},n)}function ZV(t,e,n=Lo,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Qf();const a=t1(n),u=Kc(e,n,t,o);return a(),Yf(),u});return s?r.unshift(i):r.push(i),i}}const pp=t=>(e,n=Lo)=>{(!aA||t==="sp")&&ZV(t,(...s)=>e(...s),n)},wwt=pp("bm"),PG=pp("m"),bwt=pp("bu"),uRe=pp("u"),xG=pp("bum"),NG=pp("um"),Ewt=pp("sp"),Twt=pp("rtg"),Cwt=pp("rtc");function Iwt(t,e=Lo){ZV("ec",t,e)}const Swt="components";function kwt(t,e){return Rwt(Swt,t,!0,e)||t}const Awt=Symbol.for("v-ndc");function Rwt(t,e,n=!0,s=!1){const r=gl||Lo;if(r){const i=r.type;{const a=ybt(i,!1);if(a&&(a===e||a===Gl(e)||a===KV(Gl(e))))return i}const o=Zoe(r[t]||i[t],e)||Zoe(r.appContext[t],e);return!o&&s?i:o}}function Zoe(t,e){return t&&(t[e]||t[Gl(e)]||t[KV(Gl(e))])}function uOt(t,e,n,s){let r;const i=n,o=gt(t);if(o||hr(t)){const a=o&&iE(t);let u=!1,c=!1;a&&(u=!jl(t),c=Um(t),t=QV(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(u?c?OO(Ki(t[h])):Ki(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(Ns(t))if(t[Symbol.iterator])r=Array.from(t,(a,u)=>e(a,u,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const h=a[u];r[u]=e(t[h],h,u,i)}}else r=[];return r}const TB=t=>t?PRe(t)?n4(t):TB(t.parent):null,sS=Ci(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>TB(t.parent),$root:t=>TB(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>hRe(t),$forceUpdate:t=>t.f||(t.f=()=>{AG(t.update)}),$nextTick:t=>t.n||(t.n=WAe.bind(t.proxy)),$watch:t=>Ywt.bind(t)}),g9=(t,e)=>t!==ss&&!t.__isScriptSetup&&qn(t,e),Pwt={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(g9(s,e))return o[e]=1,s[e];if(r!==ss&&qn(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&qn(c,e))return o[e]=3,i[e];if(n!==ss&&qn(n,e))return o[e]=4,n[e];CB&&(o[e]=0)}}const h=sS[e];let d,p;if(h)return e==="$attrs"&&Ro(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ss&&qn(n,e))return o[e]=4,n[e];if(p=u.config.globalProperties,qn(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return g9(r,e)?(r[e]=n,!0):s!==ss&&qn(s,e)?(s[e]=n,!0):qn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==ss&&qn(t,o)||g9(e,o)||(a=i[0])&&qn(a,o)||qn(s,o)||qn(sS,o)||qn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:qn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eae(t){return gt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let CB=!0;function xwt(t){const e=hRe(t),n=t.proxy,s=t.ctx;CB=!1,e.beforeCreate&&tae(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:u,inject:c,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:w,activated:k,deactivated:P,beforeDestroy:O,beforeUnmount:M,destroyed:V,unmounted:q,render:H,renderTracked:J,renderTriggered:I,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:S,components:E,directives:b,filters:K}=e;if(c&&Nwt(c,s,null),o)for(const oe in o){const ve=o[oe];Pt(ve)&&(s[oe]=ve.bind(n))}if(r){const oe=r.call(n,n);Ns(oe)&&(t.data=hC(oe))}if(CB=!0,i)for(const oe in i){const ve=i[oe],Lt=Pt(ve)?ve.bind(n,n):Pt(ve.get)?ve.get.bind(n,n):Hh,nt=!Pt(ve)&&Pt(ve.set)?ve.set.bind(n):Hh,mt=Ge({get:Lt,set:nt});Object.defineProperty(s,oe,{enumerable:!0,configurable:!0,get:()=>mt.value,set:Te=>mt.value=Te})}if(a)for(const oe in a)cRe(a[oe],s,n,oe);if(u){const oe=Pt(u)?u.call(n):u;Reflect.ownKeys(oe).forEach(ve=>{Dx(ve,oe[ve])})}h&&tae(h,t,"c");function ae(oe,ve){gt(ve)?ve.forEach(Lt=>oe(Lt.bind(n))):ve&&oe(ve.bind(n))}if(ae(wwt,d),ae(PG,p),ae(bwt,m),ae(uRe,w),ae(_wt,k),ae(ywt,P),ae(Iwt,v),ae(Cwt,J),ae(Twt,I),ae(xG,M),ae(NG,q),ae(Ewt,y),gt(T))if(T.length){const oe=t.exposed||(t.exposed={});T.forEach(ve=>{Object.defineProperty(oe,ve,{get:()=>n[ve],set:Lt=>n[ve]=Lt,enumerable:!0})})}else t.exposed||(t.exposed={});H&&t.render===Hh&&(t.render=H),S!=null&&(t.inheritAttrs=S),E&&(t.components=E),b&&(t.directives=b),y&&aRe(t)}function Nwt(t,e,n=Hh){gt(t)&&(t=IB(t));for(const s in t){const r=t[s];let i;Ns(r)?"default"in r?i=Bl(r.from||s,r.default,!0):i=Bl(r.from||s):i=Bl(r),Ji(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function tae(t,e,n){Kc(gt(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function cRe(t,e,n,s){let r=s.includes(".")?TRe(n,s):()=>n[s];if(hr(t)){const i=e[t];Pt(i)&&rS(r,i)}else if(Pt(t))rS(r,t.bind(n));else if(Ns(t))if(gt(t))t.forEach(i=>cRe(i,e,n,s));else{const i=Pt(t.handler)?t.handler.bind(n):e[t.handler];Pt(i)&&rS(r,i,t)}}function hRe(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let u;return a?u=a:!r.length&&!n&&!s?u=e:(u={},r.length&&r.forEach(c=>VO(u,c,o,!0)),VO(u,e,o)),Ns(e)&&i.set(e,u),u}function VO(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&VO(t,i,n,!0),r&&r.forEach(o=>VO(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Dwt[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Dwt={data:nae,props:sae,emits:sae,methods:RI,computed:RI,beforeCreate:ua,created:ua,beforeMount:ua,mounted:ua,beforeUpdate:ua,updated:ua,beforeDestroy:ua,beforeUnmount:ua,destroyed:ua,unmounted:ua,activated:ua,deactivated:ua,errorCaptured:ua,serverPrefetch:ua,components:RI,directives:RI,watch:Lwt,provide:nae,inject:Owt};function nae(t,e){return e?t?function(){return Ci(Pt(t)?t.call(this,this):t,Pt(e)?e.call(this,this):e)}:e:t}function Owt(t,e){return RI(IB(t),IB(e))}function IB(t){if(gt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ua(t,e){return t?[...new Set([].concat(t,e))]:e}function RI(t,e){return t?Ci(Object.create(null),t,e):e}function sae(t,e){return t?gt(t)&&gt(e)?[...new Set([...t,...e])]:Ci(Object.create(null),eae(t),eae(e??{})):e}function Lwt(t,e){if(!t)return e;if(!e)return t;const n=Ci(Object.create(null),t);for(const s in e)n[s]=ua(t[s],e[s]);return n}function dRe(){return{app:null,config:{isNativeTag:bvt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Mwt=0;function Fwt(t,e){return function(s,r=null){Pt(s)||(s=Ci({},s)),r!=null&&!Ns(r)&&(r=null);const i=dRe(),o=new WeakSet,a=[];let u=!1;const c=i.app={_uid:Mwt++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:wbt,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Pt(h.install)?(o.add(h),h.install(c,...d)):Pt(h)&&(o.add(h),h(c,...d))),c},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),c},component(h,d){return d?(i.components[h]=d,c):i.components[h]},directive(h,d){return d?(i.directives[h]=d,c):i.directives[h]},mount(h,d,p){if(!u){const m=c._ceVNode||Ra(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,h,p),u=!0,c._container=h,h.__vue_app__=c,n4(m.component)}},onUnmount(h){a.push(h)},unmount(){u&&(Kc(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,d){return i.provides[h]=d,c},runWithContext(h){const d=cv;cv=c;try{return h()}finally{cv=d}}};return c}}let cv=null;function Dx(t,e){if(Lo){let n=Lo.provides;const s=Lo.parent&&Lo.parent.provides;s===n&&(n=Lo.provides=Object.create(s)),n[t]=e}}function Bl(t,e,n=!1){const s=_w();if(s||cv){let r=cv?cv._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Pt(e)?e.call(s&&s.proxy):e}}function cOt(){return!!(_w()||cv)}const fRe={},pRe=()=>Object.create(fRe),gRe=t=>Object.getPrototypeOf(t)===fRe;function Vwt(t,e,n,s=!1){const r={},i=pRe();t.propsDefaults=Object.create(null),mRe(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:jAe(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Uwt(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Tn(r),[u]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(e4(t.emitsOptions,p))continue;const m=e[p];if(u)if(qn(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const w=Gl(p);r[w]=SB(u,a,w,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{mRe(t,e,r,i)&&(c=!0);let h;for(const d in a)(!e||!qn(e,d)&&((h=mw(d))===d||!qn(e,h)))&&(u?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=SB(u,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!qn(e,d))&&(delete i[d],c=!0)}c&&Zd(t.attrs,"set","")}function mRe(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let u in e){if(X0(u))continue;const c=e[u];let h;r&&qn(r,h=Gl(u))?!i||!i.includes(h)?n[h]=c:(a||(a={}))[h]=c:e4(t.emitsOptions,u)||(!(u in s)||c!==s[u])&&(s[u]=c,o=!0)}if(i){const u=Tn(n),c=a||ss;for(let h=0;h<i.length;h++){const d=i[h];n[d]=SB(r,u,d,c[d],t,!qn(c,d))}}return o}function SB(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=qn(o,"default");if(a&&s===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Pt(u)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const h=t1(r);s=c[n]=u.call(null,e),h()}}else s=u;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===mw(n))&&(s=!0))}return s}const qwt=new WeakMap;function _Re(t,e,n=!1){const s=n?qwt:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let u=!1;if(!Pt(t)){const h=d=>{u=!0;const[p,m]=_Re(d,e,!0);Ci(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!u)return Ns(t)&&s.set(t,sE),sE;if(gt(i))for(let h=0;h<i.length;h++){const d=Gl(i[h]);rae(d)&&(o[d]=ss)}else if(i)for(const h in i){const d=Gl(h);if(rae(d)){const p=i[h],m=o[d]=gt(p)||Pt(p)?{type:p}:Ci({},p),w=m.type;let k=!1,P=!0;if(gt(w))for(let O=0;O<w.length;++O){const M=w[O],V=Pt(M)&&M.name;if(V==="Boolean"){k=!0;break}else V==="String"&&(P=!1)}else k=Pt(w)&&w.name==="Boolean";m[0]=k,m[1]=P,(k||qn(m,"default"))&&a.push(d)}}const c=[o,a];return Ns(t)&&s.set(t,c),c}function rae(t){return t[0]!=="$"&&!X0(t)}const DG=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",OG=t=>gt(t)?t.map(vh):[vh(t)],jwt=(t,e,n)=>{if(e._n)return e;const s=fwt((...r)=>OG(e(...r)),n);return s._c=!1,s},yRe=(t,e,n)=>{const s=t._ctx;for(const r in t){if(DG(r))continue;const i=t[r];if(Pt(i))e[r]=jwt(r,i,s);else if(i!=null){const o=OG(i);e[r]=()=>o}}},vRe=(t,e)=>{const n=OG(e);t.slots.default=()=>n},wRe=(t,e,n)=>{for(const s in e)(n||!DG(s))&&(t[s]=e[s])},Bwt=(t,e,n)=>{const s=t.slots=pRe();if(t.vnode.shapeFlag&32){const r=e.__;r&&yB(s,"__",r,!0);const i=e._;i?(wRe(s,e,n),n&&yB(s,"_",i,!0)):yRe(e,s)}else e&&vRe(t,e)},$wt=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=ss;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:wRe(r,e,n):(i=!e.$stable,yRe(e,r)),o=e}else e&&(vRe(t,e),o={default:1});if(i)for(const a in r)!DG(a)&&o[a]==null&&delete r[a]},fa=sbt;function zwt(t){return Hwt(t)}function Hwt(t,e){const n=GV();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:u,setText:c,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Hh,insertStaticContent:w}=t,k=(C,R,N,L=null,U=null,j=null,W=void 0,$=null,B=!!R.dynamicChildren)=>{if(C===R)return;C&&!Ey(C,R)&&(L=F(C),Te(C,U,j,!0),C=null),R.patchFlag===-2&&(B=!1,R.dynamicChildren=null);const{type:Q,ref:X,shapeFlag:Z}=R;switch(Q){case t4:P(C,R,N,L);break;case Ea:O(C,R,N,L);break;case _9:C==null&&M(R,N,L,W);break;case Wu:E(C,R,N,L,U,j,W,$,B);break;default:Z&1?H(C,R,N,L,U,j,W,$,B):Z&6?b(C,R,N,L,U,j,W,$,B):(Z&64||Z&128)&&Q.process(C,R,N,L,U,j,W,$,B,ee)}X!=null&&U?tS(X,C&&C.ref,j,R||C,!R):X==null&&C&&C.ref!=null&&tS(C.ref,null,j,C,!0)},P=(C,R,N,L)=>{if(C==null)s(R.el=a(R.children),N,L);else{const U=R.el=C.el;R.children!==C.children&&c(U,R.children)}},O=(C,R,N,L)=>{C==null?s(R.el=u(R.children||""),N,L):R.el=C.el},M=(C,R,N,L)=>{[C.el,C.anchor]=w(C.children,R,N,L,C.el,C.anchor)},V=({el:C,anchor:R},N,L)=>{let U;for(;C&&C!==R;)U=p(C),s(C,N,L),C=U;s(R,N,L)},q=({el:C,anchor:R})=>{let N;for(;C&&C!==R;)N=p(C),r(C),C=N;r(R)},H=(C,R,N,L,U,j,W,$,B)=>{R.type==="svg"?W="svg":R.type==="math"&&(W="mathml"),C==null?J(R,N,L,U,j,W,$,B):y(C,R,U,j,W,$,B)},J=(C,R,N,L,U,j,W,$)=>{let B,Q;const{props:X,shapeFlag:Z,transition:te,dirs:ie}=C;if(B=C.el=o(C.type,j,X&&X.is,X),Z&8?h(B,C.children):Z&16&&v(C.children,B,null,L,U,m9(C,j),W,$),ie&&ey(C,null,L,"created"),I(B,C,C.scopeId,W,L),X){for(const se in X)se!=="value"&&!X0(se)&&i(B,se,null,X[se],j,L);"value"in X&&i(B,"value",null,X.value,j),(Q=X.onVnodeBeforeMount)&&th(Q,L,C)}ie&&ey(C,null,L,"beforeMount");const re=Wwt(U,te);re&&te.beforeEnter(B),s(B,R,N),((Q=X&&X.onVnodeMounted)||re||ie)&&fa(()=>{Q&&th(Q,L,C),re&&te.enter(B),ie&&ey(C,null,L,"mounted")},U)},I=(C,R,N,L,U)=>{if(N&&m(C,N),L)for(let j=0;j<L.length;j++)m(C,L[j]);if(U){let j=U.subTree;if(R===j||IRe(j.type)&&(j.ssContent===R||j.ssFallback===R)){const W=U.vnode;I(C,W,W.scopeId,W.slotScopeIds,U.parent)}}},v=(C,R,N,L,U,j,W,$,B=0)=>{for(let Q=B;Q<C.length;Q++){const X=C[Q]=$?Jp(C[Q]):vh(C[Q]);k(null,X,R,N,L,U,j,W,$)}},y=(C,R,N,L,U,j,W)=>{const $=R.el=C.el;let{patchFlag:B,dynamicChildren:Q,dirs:X}=R;B|=C.patchFlag&16;const Z=C.props||ss,te=R.props||ss;let ie;if(N&&ty(N,!1),(ie=te.onVnodeBeforeUpdate)&&th(ie,N,R,C),X&&ey(R,C,N,"beforeUpdate"),N&&ty(N,!0),(Z.innerHTML&&te.innerHTML==null||Z.textContent&&te.textContent==null)&&h($,""),Q?T(C.dynamicChildren,Q,$,N,L,m9(R,U),j):W||ve(C,R,$,null,N,L,m9(R,U),j,!1),B>0){if(B&16)S($,Z,te,N,U);else if(B&2&&Z.class!==te.class&&i($,"class",null,te.class,U),B&4&&i($,"style",Z.style,te.style,U),B&8){const re=R.dynamicProps;for(let se=0;se<re.length;se++){const be=re[se],Ae=Z[be],Ue=te[be];(Ue!==Ae||be==="value")&&i($,be,Ae,Ue,U,N)}}B&1&&C.children!==R.children&&h($,R.children)}else!W&&Q==null&&S($,Z,te,N,U);((ie=te.onVnodeUpdated)||X)&&fa(()=>{ie&&th(ie,N,R,C),X&&ey(R,C,N,"updated")},L)},T=(C,R,N,L,U,j,W)=>{for(let $=0;$<R.length;$++){const B=C[$],Q=R[$],X=B.el&&(B.type===Wu||!Ey(B,Q)||B.shapeFlag&198)?d(B.el):N;k(B,Q,X,null,L,U,j,W,!0)}},S=(C,R,N,L,U)=>{if(R!==N){if(R!==ss)for(const j in R)!X0(j)&&!(j in N)&&i(C,j,R[j],null,U,L);for(const j in N){if(X0(j))continue;const W=N[j],$=R[j];W!==$&&j!=="value"&&i(C,j,$,W,U,L)}"value"in N&&i(C,"value",R.value,N.value,U)}},E=(C,R,N,L,U,j,W,$,B)=>{const Q=R.el=C?C.el:a(""),X=R.anchor=C?C.anchor:a("");let{patchFlag:Z,dynamicChildren:te,slotScopeIds:ie}=R;ie&&($=$?$.concat(ie):ie),C==null?(s(Q,N,L),s(X,N,L),v(R.children||[],N,X,U,j,W,$,B)):Z>0&&Z&64&&te&&C.dynamicChildren?(T(C.dynamicChildren,te,N,U,j,W,$),(R.key!=null||U&&R===U.subTree)&&LG(C,R,!0)):ve(C,R,N,X,U,j,W,$,B)},b=(C,R,N,L,U,j,W,$,B)=>{R.slotScopeIds=$,C==null?R.shapeFlag&512?U.ctx.activate(R,N,L,W,B):K(R,N,L,U,j,W,B):ne(C,R,B)},K=(C,R,N,L,U,j,W)=>{const $=C.component=fbt(C,L,U);if(JV(C)&&($.ctx.renderer=ee),pbt($,!1,W),$.asyncDep){if(U&&U.registerDep($,ae,W),!C.el){const B=$.subTree=Ra(Ea);O(null,B,R,N),C.placeholder=B.el}}else ae($,C,R,N,U,j,W)},ne=(C,R,N)=>{const L=R.component=C.component;if(tbt(C,R,N))if(L.asyncDep&&!L.asyncResolved){oe(L,R,N);return}else L.next=R,L.update();else R.el=C.el,L.vnode=R},ae=(C,R,N,L,U,j,W)=>{const $=()=>{if(C.isMounted){let{next:Z,bu:te,u:ie,parent:re,vnode:se}=C;{const Ye=bRe(C);if(Ye){Z&&(Z.el=se.el,oe(C,Z,W)),Ye.asyncDep.then(()=>{C.isUnmounted||$()});return}}let be=Z,Ae;ty(C,!1),Z?(Z.el=se.el,oe(C,Z,W)):Z=se,te&&u9(te),(Ae=Z.props&&Z.props.onVnodeBeforeUpdate)&&th(Ae,re,Z,se),ty(C,!0);const Ue=oae(C),tt=C.subTree;C.subTree=Ue,k(tt,Ue,d(tt.el),F(tt),C,U,j),Z.el=Ue.el,be===null&&nbt(C,Ue.el),ie&&fa(ie,U),(Ae=Z.props&&Z.props.onVnodeUpdated)&&fa(()=>th(Ae,re,Z,se),U)}else{let Z;const{el:te,props:ie}=R,{bm:re,m:se,parent:be,root:Ae,type:Ue}=C,tt=nS(R);ty(C,!1),re&&u9(re),!tt&&(Z=ie&&ie.onVnodeBeforeMount)&&th(Z,be,R),ty(C,!0);{Ae.ce&&Ae.ce._def.shadowRoot!==!1&&Ae.ce._injectChildStyle(Ue);const Ye=C.subTree=oae(C);k(null,Ye,N,L,C,U,j),R.el=Ye.el}if(se&&fa(se,U),!tt&&(Z=ie&&ie.onVnodeMounted)){const Ye=R;fa(()=>th(Z,be,Ye),U)}(R.shapeFlag&256||be&&nS(be.vnode)&&be.vnode.shapeFlag&256)&&C.a&&fa(C.a,U),C.isMounted=!0,R=N=L=null}};C.scope.on();const B=C.effect=new kAe($);C.scope.off();const Q=C.update=B.run.bind(B),X=C.job=B.runIfDirty.bind(B);X.i=C,X.id=C.uid,B.scheduler=()=>AG(X),ty(C,!0),Q()},oe=(C,R,N)=>{R.component=C;const L=C.vnode.props;C.vnode=R,C.next=null,Uwt(C,R.props,L,N),$wt(C,R.children,N),Qf(),Goe(C),Yf()},ve=(C,R,N,L,U,j,W,$,B=!1)=>{const Q=C&&C.children,X=C?C.shapeFlag:0,Z=R.children,{patchFlag:te,shapeFlag:ie}=R;if(te>0){if(te&128){nt(Q,Z,N,L,U,j,W,$,B);return}else if(te&256){Lt(Q,Z,N,L,U,j,W,$,B);return}}ie&8?(X&16&&Ve(Q,U,j),Z!==Q&&h(N,Z)):X&16?ie&16?nt(Q,Z,N,L,U,j,W,$,B):Ve(Q,U,j,!0):(X&8&&h(N,""),ie&16&&v(Z,N,L,U,j,W,$,B))},Lt=(C,R,N,L,U,j,W,$,B)=>{C=C||sE,R=R||sE;const Q=C.length,X=R.length,Z=Math.min(Q,X);let te;for(te=0;te<Z;te++){const ie=R[te]=B?Jp(R[te]):vh(R[te]);k(C[te],ie,N,null,U,j,W,$,B)}Q>X?Ve(C,U,j,!0,!1,Z):v(R,N,L,U,j,W,$,B,Z)},nt=(C,R,N,L,U,j,W,$,B)=>{let Q=0;const X=R.length;let Z=C.length-1,te=X-1;for(;Q<=Z&&Q<=te;){const ie=C[Q],re=R[Q]=B?Jp(R[Q]):vh(R[Q]);if(Ey(ie,re))k(ie,re,N,null,U,j,W,$,B);else break;Q++}for(;Q<=Z&&Q<=te;){const ie=C[Z],re=R[te]=B?Jp(R[te]):vh(R[te]);if(Ey(ie,re))k(ie,re,N,null,U,j,W,$,B);else break;Z--,te--}if(Q>Z){if(Q<=te){const ie=te+1,re=ie<X?R[ie].el:L;for(;Q<=te;)k(null,R[Q]=B?Jp(R[Q]):vh(R[Q]),N,re,U,j,W,$,B),Q++}}else if(Q>te)for(;Q<=Z;)Te(C[Q],U,j,!0),Q++;else{const ie=Q,re=Q,se=new Map;for(Q=re;Q<=te;Q++){const Me=R[Q]=B?Jp(R[Q]):vh(R[Q]);Me.key!=null&&se.set(Me.key,Q)}let be,Ae=0;const Ue=te-re+1;let tt=!1,Ye=0;const ls=new Array(Ue);for(Q=0;Q<Ue;Q++)ls[Q]=0;for(Q=ie;Q<=Z;Q++){const Me=C[Q];if(Ae>=Ue){Te(Me,U,j,!0);continue}let Qn;if(Me.key!=null)Qn=se.get(Me.key);else for(be=re;be<=te;be++)if(ls[be-re]===0&&Ey(Me,R[be])){Qn=be;break}Qn===void 0?Te(Me,U,j,!0):(ls[Qn-re]=Q+1,Qn>=Ye?Ye=Qn:tt=!0,k(Me,R[Qn],N,null,U,j,W,$,B),Ae++)}const ze=tt?Kwt(ls):sE;for(be=ze.length-1,Q=Ue-1;Q>=0;Q--){const Me=re+Q,Qn=R[Me],Fr=R[Me+1],Ii=Me+1<X?Fr.el||Fr.placeholder:L;ls[Q]===0?k(null,Qn,N,Ii,U,j,W,$,B):tt&&(be<0||Q!==ze[be]?mt(Qn,N,Ii,2):be--)}}},mt=(C,R,N,L,U=null)=>{const{el:j,type:W,transition:$,children:B,shapeFlag:Q}=C;if(Q&6){mt(C.component.subTree,R,N,L);return}if(Q&128){C.suspense.move(R,N,L);return}if(Q&64){W.move(C,R,N,ee);return}if(W===Wu){s(j,R,N);for(let Z=0;Z<B.length;Z++)mt(B[Z],R,N,L);s(C.anchor,R,N);return}if(W===_9){V(C,R,N);return}if(L!==2&&Q&1&&$)if(L===0)$.beforeEnter(j),s(j,R,N),fa(()=>$.enter(j),U);else{const{leave:Z,delayLeave:te,afterLeave:ie}=$,re=()=>{C.ctx.isUnmounted?r(j):s(j,R,N)},se=()=>{Z(j,()=>{re(),ie&&ie()})};te?te(j,re,se):se()}else s(j,R,N)},Te=(C,R,N,L=!1,U=!1)=>{const{type:j,props:W,ref:$,children:B,dynamicChildren:Q,shapeFlag:X,patchFlag:Z,dirs:te,cacheIndex:ie}=C;if(Z===-2&&(U=!1),$!=null&&(Qf(),tS($,null,N,C,!0),Yf()),ie!=null&&(R.renderCache[ie]=void 0),X&256){R.ctx.deactivate(C);return}const re=X&1&&te,se=!nS(C);let be;if(se&&(be=W&&W.onVnodeBeforeUnmount)&&th(be,R,C),X&6)Mt(C.component,N,L);else{if(X&128){C.suspense.unmount(N,L);return}re&&ey(C,null,R,"beforeUnmount"),X&64?C.type.remove(C,R,N,ee,L):Q&&!Q.hasOnce&&(j!==Wu||Z>0&&Z&64)?Ve(Q,R,N,!1,!0):(j===Wu&&Z&384||!U&&X&16)&&Ve(B,R,N),L&&we(C)}(se&&(be=W&&W.onVnodeUnmounted)||re)&&fa(()=>{be&&th(be,R,C),re&&ey(C,null,R,"unmounted")},N)},we=C=>{const{type:R,el:N,anchor:L,transition:U}=C;if(R===Wu){fn(N,L);return}if(R===_9){q(C);return}const j=()=>{r(N),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(C.shapeFlag&1&&U&&!U.persisted){const{leave:W,delayLeave:$}=U,B=()=>W(N,j);$?$(C.el,j,B):B()}else j()},fn=(C,R)=>{let N;for(;C!==R;)N=p(C),r(C),C=N;r(R)},Mt=(C,R,N)=>{const{bum:L,scope:U,job:j,subTree:W,um:$,m:B,a:Q,parent:X,slots:{__:Z}}=C;iae(B),iae(Q),L&&u9(L),X&&gt(Z)&&Z.forEach(te=>{X.renderCache[te]=void 0}),U.stop(),j&&(j.flags|=8,Te(W,C,R,N)),$&&fa($,R),fa(()=>{C.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Ve=(C,R,N,L=!1,U=!1,j=0)=>{for(let W=j;W<C.length;W++)Te(C[W],R,N,L,U)},F=C=>{if(C.shapeFlag&6)return F(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const R=p(C.anchor||C.el),N=R&&R[JAe];return N?p(N):R};let Y=!1;const G=(C,R,N)=>{C==null?R._vnode&&Te(R._vnode,null,null,!0):k(R._vnode||null,C,R,null,null,null,N),R._vnode=C,Y||(Y=!0,Goe(),GAe(),Y=!1)},ee={p:k,um:Te,m:mt,r:we,mt:K,mc:v,pc:ve,pbc:T,n:F,o:t};return{render:G,hydrate:void 0,createApp:Fwt(G)}}function m9({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ty({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Wwt(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function LG(t,e,n=!1){const s=t.children,r=e.children;if(gt(s)&&gt(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Jp(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&LG(o,a)),a.type===t4&&(a.el=o.el),a.type===Ea&&!a.el&&(a.el=o.el)}}function Kwt(t){const e=t.slice(),n=[0];let s,r,i,o,a;const u=t.length;for(s=0;s<u;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function bRe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:bRe(e)}function iae(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Gwt=Symbol.for("v-scx"),Qwt=()=>Bl(Gwt);function rS(t,e,n){return ERe(t,e,n)}function ERe(t,e,n=ss){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ci({},n),u=e&&s||!e&&i!=="post";let c;if(aA){if(i==="sync"){const m=Qwt();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=Hh,m.resume=Hh,m.pause=Hh,m}}const h=Lo;a.call=(m,w,k)=>Kc(m,h,w,k);let d=!1;i==="post"?a.scheduler=m=>{fa(m,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(m,w)=>{w?m():AG(m)}),a.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const p=uwt(t,e,a);return aA&&(c?c.push(p):u&&p()),p}function Ywt(t,e,n){const s=this.proxy,r=hr(t)?t.includes(".")?TRe(s,t):()=>s[t]:t.bind(s,s);let i;Pt(e)?i=e:(i=e.handler,n=e);const o=t1(this),a=ERe(r,i.bind(s),n);return o(),a}function TRe(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const Xwt=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Gl(e)}Modifiers`]||t[`${mw(e)}Modifiers`];function Jwt(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||ss;let r=n;const i=e.startsWith("update:"),o=i&&Xwt(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>hr(h)?h.trim():h)),o.number&&(r=n.map(Svt)));let a,u=s[a=l9(e)]||s[a=l9(Gl(e))];!u&&i&&(u=s[a=l9(mw(e))]),u&&Kc(u,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Kc(c,t,6,r)}}function CRe(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Pt(t)){const u=c=>{const h=CRe(c,e,!0);h&&(a=!0,Ci(o,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!a?(Ns(t)&&s.set(t,null),null):(gt(i)?i.forEach(u=>o[u]=null):Ci(o,i),Ns(t)&&s.set(t,o),o)}function e4(t,e){return!t||!zV(e)?!1:(e=e.slice(2).replace(/Once$/,""),qn(t,e[0].toLowerCase()+e.slice(1))||qn(t,mw(e))||qn(t,e))}function oae(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:u,render:c,renderCache:h,props:d,data:p,setupState:m,ctx:w,inheritAttrs:k}=t,P=FO(t);let O,M;try{if(n.shapeFlag&4){const q=r||s,H=q;O=vh(c.call(H,q,h,d,m,p,w)),M=a}else{const q=e;O=vh(q.length>1?q(d,{attrs:a,slots:o,emit:u}):q(d,null)),M=e.props?a:Zwt(a)}}catch(q){iS.length=0,YV(q,t,1),O=Ra(Ea)}let V=O;if(M&&k!==!1){const q=Object.keys(M),{shapeFlag:H}=V;q.length&&H&7&&(i&&q.some(mG)&&(M=ebt(M,i)),V=jm(V,M,!1,!0))}return n.dirs&&(V=jm(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Bv(V,n.transition),O=V,FO(P),O}const Zwt=t=>{let e;for(const n in t)(n==="class"||n==="style"||zV(n))&&((e||(e={}))[n]=t[n]);return e},ebt=(t,e)=>{const n={};for(const s in t)(!mG(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function tbt(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return s?aae(s,o,c):!!o;if(u&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==s[p]&&!e4(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?aae(s,o,c):!0:!!o;return!1}function aae(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!e4(n,i))return!0}return!1}function nbt({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const IRe=t=>t.__isSuspense;function sbt(t,e){e&&e.pendingBranch?gt(t)?e.effects.push(...t):e.effects.push(t):dwt(t)}const Wu=Symbol.for("v-fgt"),t4=Symbol.for("v-txt"),Ea=Symbol.for("v-cmt"),_9=Symbol.for("v-stc"),iS=[];let ml=null;function SRe(t=!1){iS.push(ml=t?null:[])}function rbt(){iS.pop(),ml=iS[iS.length-1]||null}let oA=1;function lae(t,e=!1){oA+=t,t<0&&ml&&e&&(ml.hasOnce=!0)}function kRe(t){return t.dynamicChildren=oA>0?ml||sE:null,rbt(),oA>0&&ml&&ml.push(t),t}function ibt(t,e,n,s,r,i){return kRe(RRe(t,e,n,s,r,i,!0))}function obt(t,e,n,s,r){return kRe(Ra(t,e,n,s,r,!0))}function UO(t){return t?t.__v_isVNode===!0:!1}function Ey(t,e){return t.type===e.type&&t.key===e.key}const ARe=({key:t})=>t??null,Ox=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?hr(t)||Ji(t)||Pt(t)?{i:gl,r:t,k:e,f:!!n}:t:null);function RRe(t,e=null,n=null,s=0,r=null,i=t===Wu?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ARe(e),ref:e&&Ox(e),scopeId:YAe,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:gl};return a?(MG(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=hr(n)?8:16),oA>0&&!o&&ml&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ml.push(u),u}const Ra=abt;function abt(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Awt)&&(t=Ea),UO(t)){const a=jm(t,e,!0);return n&&MG(a,n),oA>0&&!i&&ml&&(a.shapeFlag&6?ml[ml.indexOf(t)]=a:ml.push(a)),a.patchFlag=-2,a}if(vbt(t)&&(t=t.__vccOpts),e){e=lbt(e);let{class:a,style:u}=e;a&&!hr(a)&&(e.class=wG(a)),Ns(u)&&(kG(u)&&!gt(u)&&(u=Ci({},u)),e.style=vG(u))}const o=hr(t)?1:IRe(t)?128:ZAe(t)?64:Ns(t)?4:Pt(t)?2:0;return RRe(t,e,n,s,r,o,i,!0)}function lbt(t){return t?kG(t)||gRe(t)?Ci({},t):t:null}function jm(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:u}=t,c=e?cbt(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ARe(c),ref:e&&e.ref?n&&i?gt(i)?i.concat(Ox(e)):[i,Ox(e)]:Ox(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Wu?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&jm(t.ssContent),ssFallback:t.ssFallback&&jm(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&s&&Bv(h,u.clone(h)),h}function ubt(t=" ",e=0){return Ra(t4,null,t,e)}function hOt(t="",e=!1){return e?(SRe(),obt(Ea,null,t)):Ra(Ea,null,t)}function vh(t){return t==null||typeof t=="boolean"?Ra(Ea):gt(t)?Ra(Wu,null,t.slice()):UO(t)?Jp(t):Ra(t4,null,String(t))}function Jp(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:jm(t)}function MG(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(gt(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),MG(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!gRe(e)?e._ctx=gl:r===3&&gl&&(gl.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pt(e)?(e={default:e,_ctx:gl},n=32):(e=String(e),s&64?(n=16,e=[ubt(e)]):n=8);t.children=e,t.shapeFlag|=n}function cbt(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=wG([e.class,s.class]));else if(r==="style")e.style=vG([e.style,s.style]);else if(zV(r)){const i=e[r],o=s[r];o&&i!==o&&!(gt(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function th(t,e,n,s=null){Kc(t,e,7,[n,s])}const hbt=dRe();let dbt=0;function fbt(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||hbt,i={uid:dbt++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new SAe(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_Re(s,r),emitsOptions:CRe(s,r),emit:null,emitted:null,propsDefaults:ss,inheritAttrs:s.inheritAttrs,ctx:ss,data:ss,props:ss,attrs:ss,slots:ss,refs:ss,setupState:ss,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Jwt.bind(null,i),t.ce&&t.ce(i),i}let Lo=null;const _w=()=>Lo||gl;let qO,kB;{const t=GV(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};qO=e("__VUE_INSTANCE_SETTERS__",n=>Lo=n),kB=e("__VUE_SSR_SETTERS__",n=>aA=n)}const t1=t=>{const e=Lo;return qO(t),t.scope.on(),()=>{t.scope.off(),qO(e)}},uae=()=>{Lo&&Lo.scope.off(),qO(null)};function PRe(t){return t.vnode.shapeFlag&4}let aA=!1;function pbt(t,e=!1,n=!1){e&&kB(e);const{props:s,children:r}=t.vnode,i=PRe(t);Vwt(t,s,i,e),Bwt(t,r,n||e);const o=i?gbt(t,e):void 0;return e&&kB(!1),o}function gbt(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Pwt);const{setup:s}=n;if(s){Qf();const r=t.setupContext=s.length>1?_bt(t):null,i=t1(t),o=e1(s,t,0,[t.props,r]),a=wAe(o);if(Yf(),i(),(a||t.sp)&&!nS(t)&&aRe(t),a){if(o.then(uae,uae),e)return o.then(u=>{cae(t,u)}).catch(u=>{YV(u,t,0)});t.asyncDep=o}else cae(t,o)}else xRe(t)}function cae(t,e,n){Pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ns(e)&&(t.setupState=zAe(e)),xRe(t)}function xRe(t,e,n){const s=t.type;t.render||(t.render=s.render||Hh);{const r=t1(t);Qf();try{xwt(t)}finally{Yf(),r()}}}const mbt={get(t,e){return Ro(t,"get",""),t[e]}};function _bt(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,mbt),slots:t.slots,emit:t.emit,expose:e}}function n4(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(zAe(ZR(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sS)return sS[n](t)},has(e,n){return n in e||n in sS}})):t.proxy}function ybt(t,e=!0){return Pt(t)?t.displayName||t.name:t.name||e&&t.__name}function vbt(t){return Pt(t)&&"__vccOpts"in t}const Ge=(t,e)=>awt(t,e,aA);function Ct(t,e,n){const s=arguments.length;return s===2?Ns(e)&&!gt(e)?UO(e)?Ra(t,null,[e]):Ra(t,e):Ra(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&UO(n)&&(n=[n]),Ra(t,e,n))}const wbt="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let AB;const hae=typeof window<"u"&&window.trustedTypes;if(hae)try{AB=hae.createPolicy("vue",{createHTML:t=>t})}catch{}const NRe=AB?t=>AB.createHTML(t):t=>t,bbt="http://www.w3.org/2000/svg",Ebt="http://www.w3.org/1998/Math/MathML",Bd=typeof document<"u"?document:null,dae=Bd&&Bd.createElement("template"),Tbt={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Bd.createElementNS(bbt,t):e==="mathml"?Bd.createElementNS(Ebt,t):n?Bd.createElement(t,{is:n}):Bd.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Bd.createTextNode(t),createComment:t=>Bd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Bd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{dae.innerHTML=NRe(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=dae.content;if(s==="svg"||s==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Sp="transition",ZC="animation",cT=Symbol("_vtc"),DRe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ORe=Ci({},sRe,DRe),Cbt=t=>(t.displayName="Transition",t.props=ORe,t),Ibt=Cbt((t,{slots:e})=>Ct(mwt,LRe(t),e)),ny=(t,e=[])=>{gt(t)?t.forEach(n=>n(...e)):t&&t(...e)},fae=t=>t?gt(t)?t.some(e=>e.length>1):t.length>1:!1;function LRe(t){const e={};for(const E in t)E in DRe||(e[E]=t[E]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,w=Sbt(r),k=w&&w[0],P=w&&w[1],{onBeforeEnter:O,onEnter:M,onEnterCancelled:V,onLeave:q,onLeaveCancelled:H,onBeforeAppear:J=O,onAppear:I=M,onAppearCancelled:v=V}=e,y=(E,b,K,ne)=>{E._enterCancelled=ne,Np(E,b?h:a),Np(E,b?c:o),K&&K()},T=(E,b)=>{E._isLeaving=!1,Np(E,d),Np(E,m),Np(E,p),b&&b()},S=E=>(b,K)=>{const ne=E?I:M,ae=()=>y(b,E,K);ny(ne,[b,ae]),pae(()=>{Np(b,E?u:i),oh(b,E?h:a),fae(ne)||gae(b,s,k,ae)})};return Ci(e,{onBeforeEnter(E){ny(O,[E]),oh(E,i),oh(E,o)},onBeforeAppear(E){ny(J,[E]),oh(E,u),oh(E,c)},onEnter:S(!1),onAppear:S(!0),onLeave(E,b){E._isLeaving=!0;const K=()=>T(E,b);oh(E,d),E._enterCancelled?(oh(E,p),RB()):(RB(),oh(E,p)),pae(()=>{E._isLeaving&&(Np(E,d),oh(E,m),fae(q)||gae(E,s,P,K))}),ny(q,[E,K])},onEnterCancelled(E){y(E,!1,void 0,!0),ny(V,[E])},onAppearCancelled(E){y(E,!0,void 0,!0),ny(v,[E])},onLeaveCancelled(E){T(E),ny(H,[E])}})}function Sbt(t){if(t==null)return null;if(Ns(t))return[y9(t.enter),y9(t.leave)];{const e=y9(t);return[e,e]}}function y9(t){return kvt(t)}function oh(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[cT]||(t[cT]=new Set)).add(e)}function Np(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[cT];n&&(n.delete(e),n.size||(t[cT]=void 0))}function pae(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let kbt=0;function gae(t,e,n,s){const r=t._endId=++kbt,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:u}=MRe(t,e);if(!o)return s();const c=o+"end";let h=0;const d=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++h>=u&&d()};setTimeout(()=>{h<u&&d()},a+1),t.addEventListener(c,p)}function MRe(t,e){const n=window.getComputedStyle(t),s=w=>(n[w]||"").split(", "),r=s(`${Sp}Delay`),i=s(`${Sp}Duration`),o=mae(r,i),a=s(`${ZC}Delay`),u=s(`${ZC}Duration`),c=mae(a,u);let h=null,d=0,p=0;e===Sp?o>0&&(h=Sp,d=o,p=i.length):e===ZC?c>0&&(h=ZC,d=c,p=u.length):(d=Math.max(o,c),h=d>0?o>c?Sp:ZC:null,p=h?h===Sp?i.length:u.length:0);const m=h===Sp&&/\b(transform|all)(,|$)/.test(s(`${Sp}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function mae(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>_ae(n)+_ae(t[s])))}function _ae(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function RB(){return document.body.offsetHeight}function Abt(t,e,n){const s=t[cT];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const jO=Symbol("_vod"),FRe=Symbol("_vsh"),dOt={beforeMount(t,{value:e},{transition:n}){t[jO]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):eI(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),eI(t,!0),s.enter(t)):s.leave(t,()=>{eI(t,!1)}):eI(t,e))},beforeUnmount(t,{value:e}){eI(t,e)}};function eI(t,e){t.style.display=e?t[jO]:"none",t[FRe]=!e}const Rbt=Symbol(""),Pbt=/(^|;)\s*display\s*:/;function xbt(t,e,n){const s=t.style,r=hr(n);let i=!1;if(n&&!r){if(e)if(hr(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Lx(s,a,"")}else for(const o in e)n[o]==null&&Lx(s,o,"");for(const o in n)o==="display"&&(i=!0),Lx(s,o,n[o])}else if(r){if(e!==n){const o=s[Rbt];o&&(n+=";"+o),s.cssText=n,i=Pbt.test(n)}}else e&&t.removeAttribute("style");jO in t&&(t[jO]=i?s.display:"",t[FRe]&&(s.display="none"))}const yae=/\s*!important$/;function Lx(t,e,n){if(gt(n))n.forEach(s=>Lx(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Nbt(t,e);yae.test(n)?t.setProperty(mw(s),n.replace(yae,""),"important"):t[s]=n}}const vae=["Webkit","Moz","ms"],v9={};function Nbt(t,e){const n=v9[e];if(n)return n;let s=Gl(e);if(s!=="filter"&&s in t)return v9[e]=s;s=KV(s);for(let r=0;r<vae.length;r++){const i=vae[r]+s;if(i in t)return v9[e]=i}return e}const wae="http://www.w3.org/1999/xlink";function bae(t,e,n,s,r,i=Dvt(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(wae,e.slice(6,e.length)):t.setAttributeNS(wae,e,n):n==null||i&&!TAe(n)?t.removeAttribute(e):t.setAttribute(e,i?"":g_(n)?String(n):n)}function Eae(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?NRe(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=TAe(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Dbt(t,e,n,s){t.addEventListener(e,n,s)}function Obt(t,e,n,s){t.removeEventListener(e,n,s)}const Tae=Symbol("_vei");function Lbt(t,e,n,s,r=null){const i=t[Tae]||(t[Tae]={}),o=i[e];if(s&&o)o.value=s;else{const[a,u]=Mbt(e);if(s){const c=i[e]=Ubt(s,r);Dbt(t,a,c,u)}else o&&(Obt(t,a,o,u),i[e]=void 0)}}const Cae=/(?:Once|Passive|Capture)$/;function Mbt(t){let e;if(Cae.test(t)){e={};let s;for(;s=t.match(Cae);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):mw(t.slice(2)),e]}let w9=0;const Fbt=Promise.resolve(),Vbt=()=>w9||(Fbt.then(()=>w9=0),w9=Date.now());function Ubt(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Kc(qbt(s,n.value),e,5,[s])};return n.value=t,n.attached=Vbt(),n}function qbt(t,e){if(gt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Iae=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,jbt=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Abt(t,s,o):e==="style"?xbt(t,n,s):zV(e)?mG(e)||Lbt(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Bbt(t,e,s,o))?(Eae(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&bae(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!hr(s))?Eae(t,Gl(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),bae(t,e,s,o))};function Bbt(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Iae(e)&&Pt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Iae(e)&&hr(n)?!1:e in t}const VRe=new WeakMap,URe=new WeakMap,BO=Symbol("_moveCb"),Sae=Symbol("_enterCb"),$bt=t=>(delete t.props.mode,t),zbt=$bt({name:"TransitionGroup",props:Ci({},ORe,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=_w(),s=nRe();let r,i;return uRe(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!Qbt(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(Wbt),r.forEach(Kbt);const a=r.filter(Gbt);RB(),a.forEach(u=>{const c=u.el,h=c.style;oh(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=c[BO]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",d),c[BO]=null,Np(c,o))};c.addEventListener("transitionend",d)}),r=[]}),()=>{const o=Tn(t),a=LRe(o);let u=o.tag||Wu;if(r=[],i)for(let c=0;c<i.length;c++){const h=i[c];h.el&&h.el instanceof Element&&(r.push(h),Bv(h,iA(h,a,s,n)),VRe.set(h,h.el.getBoundingClientRect()))}i=e.default?RG(e.default()):[];for(let c=0;c<i.length;c++){const h=i[c];h.key!=null&&Bv(h,iA(h,a,s,n))}return Ra(u,null,i)}}}),Hbt=zbt;function Wbt(t){const e=t.el;e[BO]&&e[BO](),e[Sae]&&e[Sae]()}function Kbt(t){URe.set(t,t.el.getBoundingClientRect())}function Gbt(t){const e=VRe.get(t),n=URe.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function Qbt(t,e,n){const s=t.cloneNode(),r=t[cT];r&&r.forEach(a=>{a.split(/\s+/).forEach(u=>u&&s.classList.remove(u))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=MRe(s);return i.removeChild(s),o}const Ybt=["ctrl","shift","alt","meta"],Xbt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ybt.some(n=>t[`${n}Key`]&&!e.includes(n))},fOt=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Xbt[e[o]];if(a&&a(r,e))return}return t(r,...i)})},Jbt=Ci({patchProp:jbt},Tbt);let kae;function Zbt(){return kae||(kae=zwt(Jbt))}const qRe=(...t)=>{const e=Zbt().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=tEt(s);if(!r)return;const i=e._component;!Pt(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,eEt(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function eEt(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function tEt(t){return hr(t)?document.querySelector(t):t}function s4(t,e,n,s){return Object.defineProperty(t,e,{get:n,set:s,enumerable:!0}),t}function pOt(t,e){for(const n in e)s4(t,n,e[n]);return t}const $v=qm(!1);let PB;function nEt(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function sEt(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const jRe="ontouchstart"in window||window.navigator.maxTouchPoints>0;function rEt(t){const e=t.toLowerCase(),n=sEt(e),s=nEt(e,n),r={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};s.browser&&(r[s.browser]=!0,r.version=s.version,r.versionNumber=parseInt(s.version,10)),s.platform&&(r[s.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?r.mobile=!0:r.desktop=!0,r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),r.edga||r.edgios||r.edg?(r.edge=!0,s.browser="edge"):r.crios?(r.chrome=!0,s.browser="chrome"):r.fxios&&(r.firefox=!0,s.browser="firefox"),(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r.vivaldi&&(s.browser="vivaldi",r.vivaldi=!0),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.opr&&(s.browser="opera",r.opera=!0),r.safari&&(r.blackberry||r.bb?(s.browser="blackberry",r.blackberry=!0):r.playbook?(s.browser="playbook",r.playbook=!0):r.android?(s.browser="android",r.android=!0):r.kindle?(s.browser="kindle",r.kindle=!0):r.silk&&(s.browser="silk",r.silk=!0)),r.name=s.browser,r.platform=s.platform,e.indexOf("electron")!==-1)r.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)r.bex=!0;else{if(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),$v.value===!0&&(PB={is:{...r}}),jRe===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)){delete r.mac,delete r.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(r,{mobile:!0,ios:!0,platform:o,[o]:!0})}r.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete r.desktop,r.mobile=!0)}return r}const Aae=navigator.userAgent||navigator.vendor||window.opera,iEt={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Wh={userAgent:Aae,is:rEt(Aae),has:{touch:jRe},within:{iframe:window.self!==window.top}},xB={install(t){const{$q:e}=t;$v.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Wh),$v.value=!1}),e.platform=hC(this)):e.platform=this}};{let t;s4(Wh.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(xB,Wh),$v.value===!0&&(Object.assign(xB,PB,iEt),PB=null)}function n1(t){return ZR(XV(t))}function oEt(t){return ZR(t)}const r4=(t,e)=>{const n=hC(t);for(const s in t)s4(e,s,()=>n[s],r=>{n[s]=r});return e},zv={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(zv,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function lA(){}function gOt(t){return t.button===0}function aEt(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function mOt(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function BRe(t){t.stopPropagation()}function NB(t){t.cancelable!==!1&&t.preventDefault()}function qw(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function _Ot(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?s=>{s.__dragPrevented=!0,s.addEventListener("dragstart",NB,zv.notPassiveCapture)}:s=>{delete s.__dragPrevented,s.removeEventListener("dragstart",NB,zv.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function lEt(t,e,n){const s=`__q_${e}_evt`;t[s]=t[s]!==void 0?t[s].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],t[r[2]],zv[r[3]])})}function uEt(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(s=>{s[0].removeEventListener(s[1],t[s[2]],zv[s[3]])}),t[n]=void 0)}function cEt(t,e=250,n){let s=null;function r(){const i=arguments,o=()=>{s=null,t.apply(this,i)};s!==null&&clearTimeout(s),s=setTimeout(o,e)}return r.cancel=()=>{s!==null&&clearTimeout(s)},r}const b9=["sm","md","lg","xl"],{passive:Rae}=zv,hEt=r4({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:lA,setDebounce:lA,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,s=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Wh.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,m]=i();if(m!==this.height&&(this.height=m),p!==this.width)this.width=p;else if(d!==!0)return;let w=this.sizes;this.gt.xs=p>=w.sm,this.gt.sm=p>=w.md,this.gt.md=p>=w.lg,this.gt.lg=p>=w.xl,this.lt.sm=p<w.sm,this.lt.md=p<w.md,this.lt.lg=p<w.lg,this.lt.xl=p<w.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,w=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",w!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${w}`)),this.name=w)};let a,u={},c=16;this.setSizes=d=>{b9.forEach(p=>{d[p]!==void 0&&(u[p]=d[p])})},this.setDebounce=d=>{c=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&b9.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{b9.forEach(m=>{p[m]&&(this.sizes[m]=p[m])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&s.removeEventListener("resize",a,Rae),a=p>0?cEt(this.__update,p):this.__update,s.addEventListener("resize",a,Rae)},this.setDebounce(c),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};$v.value===!0?e.push(h):h()}}),co=r4({isActive:!1,mode:!1},{__media:void 0,set(t){co.mode=t,t==="auto"?(co.__media===void 0&&(co.__media=window.matchMedia("(prefers-color-scheme: dark)"),co.__updateMedia=()=>{co.set("auto")},co.__media.addListener(co.__updateMedia)),t=co.__media.matches):co.__media!==void 0&&(co.__media.removeListener(co.__updateMedia),co.__media=void 0),co.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){co.set(co.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function dEt(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let $Re=!1;function fEt(t){$Re=t.isComposing===!0}function pEt(t){return $Re===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function DB(t,e){return pEt(t)===!0?!1:[].concat(e).includes(t.keyCode)}function zRe(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function gEt({is:t,has:e,within:n},s){const r=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=zRe(t);i!==void 0&&r.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;r.push(i),r.push("native-mobile"),t.ios===!0&&(s[i]===void 0||s[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else t.electron===!0?r.push("electron"):t.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function mEt(){const{is:t}=Wh,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const r=zRe(t);r!==void 0&&n.add(`platform-${r}`)}}Wh.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Wh.within.iframe===!0&&n.add("within-iframe");const s=Array.from(n).join(" ");e!==s&&(document.body.className=s)}function _Et(t){for(const e in t)dEt(e,t[e])}const yEt={install(t){if(this.__installed!==!0){if($v.value===!0)mEt();else{const{$q:e}=t;e.config.brand!==void 0&&_Et(e.config.brand);const n=gEt(Wh,e.config);document.body.classList.add.apply(document.body.classList,n)}Wh.is.ios===!0&&document.body.addEventListener("touchstart",lA),window.addEventListener("keydown",fEt,!0)}}},HRe=()=>!0;function vEt(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function wEt(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function bEt(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return HRe;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(vEt).map(wEt)),()=>e.includes(window.location.hash)}const EEt={__history:[],add:lA,remove:lA,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Wh.is;if(e!==!0&&n!==!0)return;const s=t.config[e===!0?"cordova":"capacitor"];if(s?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=HRe),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const r=bEt(Object.assign({backButtonExit:!0},s)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Pae={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function xae(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Zp=r4({__qLang:{}},{getLocale:xae,set(t=Pae,e){const n={...t,rtl:t.rtl===!0,getLocale:xae};{if(n.set=Zp.set,Zp.__langConfig===void 0||Zp.__langConfig.noHtmlAttrs!==!0){const s=document.documentElement;s.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),s.setAttribute("lang",n.isoName)}Object.assign(Zp.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=Zp.__qLang,Zp.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set"&&r!=="getLocale")}}),this.set(e||Pae))}}),TEt={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},$O=r4({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=$O.set,Object.assign($O.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,s4(t,"iconMapFn",()=>this.iconMapFn,s=>{this.iconMapFn=s}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(s){return Reflect.ownKeys(s).filter(r=>r!=="set")}}),this.set(e||TEt))}}),WRe="_q_",yOt="_q_l_",vOt="_q_pc_",wOt="_q_fo_";function bOt(){}const zO={};let KRe=!1;function CEt(){KRe=!0}function E9(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,s;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(E9(t[s],e[s])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}for(i=t.entries(),s=i.next();s.done!==!0;){if(E9(s.value[1],e.get(s.value[0]))!==!0)return!1;s=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(s=i.next();s.done!==!0;){if(e.has(s.value[0])!==!0)return!1;s=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(t[s]!==e[s])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const r=Object.keys(t).filter(i=>t[i]!==void 0);if(n=r.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(s=n;s--!==0;){const i=r[s];if(E9(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function uA(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function EOt(t){return Object.prototype.toString.call(t)==="[object Date]"}function TOt(t){return typeof t=="number"&&isFinite(t)}const Nae=[xB,yEt,co,hEt,EEt,Zp,$O];function IEt(t,e){const n=qRe(t);n.config.globalProperties=e.config.globalProperties;const{reload:s,...r}=e._context;return Object.assign(n._context,r),n}function Dae(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function SEt(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(WRe,n.$q),Dae(n,Nae),e.components!==void 0&&Object.values(e.components).forEach(s=>{uA(s)===!0&&s.name!==void 0&&t.component(s.name,s)}),e.directives!==void 0&&Object.values(e.directives).forEach(s=>{uA(s)===!0&&s.name!==void 0&&t.directive(s.name,s)}),e.plugins!==void 0&&Dae(n,Object.values(e.plugins).filter(s=>typeof s.install=="function"&&Nae.includes(s)===!1)),$v.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(s=>{s()}),n.$q.onSSRHydrated=()=>{}})}const kEt=function(t,e={}){const n={version:"2.18.2"};KRe===!1?(e.config!==void 0&&Object.assign(zO,e.config),n.config={...zO},CEt()):n.config=e.config||{},SEt(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},AEt={name:"Quasar",version:"2.18.2",install:kEt,lang:Zp,iconSet:$O};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const fb=typeof document<"u";function GRe(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function REt(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&GRe(t.default)}const Mn=Object.assign;function T9(t,e){const n={};for(const s in e){const r=e[s];n[s]=Gc(r)?r.map(t):t(r)}return n}const oS=()=>{},Gc=Array.isArray,QRe=/#/g,PEt=/&/g,xEt=/\//g,NEt=/=/g,DEt=/\?/g,YRe=/\+/g,OEt=/%5B/g,LEt=/%5D/g,XRe=/%5E/g,MEt=/%60/g,JRe=/%7B/g,FEt=/%7C/g,ZRe=/%7D/g,VEt=/%20/g;function FG(t){return encodeURI(""+t).replace(FEt,"|").replace(OEt,"[").replace(LEt,"]")}function UEt(t){return FG(t).replace(JRe,"{").replace(ZRe,"}").replace(XRe,"^")}function OB(t){return FG(t).replace(YRe,"%2B").replace(VEt,"+").replace(QRe,"%23").replace(PEt,"%26").replace(MEt,"`").replace(JRe,"{").replace(ZRe,"}").replace(XRe,"^")}function qEt(t){return OB(t).replace(NEt,"%3D")}function jEt(t){return FG(t).replace(QRe,"%23").replace(DEt,"%3F")}function BEt(t){return t==null?"":jEt(t).replace(xEt,"%2F")}function cA(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const $Et=/\/$/,zEt=t=>t.replace($Et,"");function C9(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(s=e.slice(0,u),i=e.slice(u+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=GEt(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:cA(o)}}function HEt(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Oae(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function WEt(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&hT(e.matched[s],n.matched[r])&&e1e(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function hT(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function e1e(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!KEt(t[n],e[n]))return!1;return!0}function KEt(t,e){return Gc(t)?Lae(t,e):Gc(e)?Lae(e,t):t===e}function Lae(t,e){return Gc(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function GEt(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const kp={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var hA;(function(t){t.pop="pop",t.push="push"})(hA||(hA={}));var aS;(function(t){t.back="back",t.forward="forward",t.unknown=""})(aS||(aS={}));function QEt(t){if(!t)if(fb){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),zEt(t)}const YEt=/^[^#]+#/;function XEt(t,e){return t.replace(YEt,"#")+e}function JEt(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const i4=()=>({left:window.scrollX,top:window.scrollY});function ZEt(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=JEt(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Mae(t,e){return(history.state?history.state.position-e:-1)+t}const LB=new Map;function eTt(t,e){LB.set(t,e)}function tTt(t){const e=LB.get(t);return LB.delete(t),e}let nTt=()=>location.protocol+"//"+location.host;function t1e(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,u=r.slice(a);return u[0]!=="/"&&(u="/"+u),Oae(u,"")}return Oae(n,t)+s+r}function sTt(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=t1e(t,location),w=n.value,k=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===w){o=null;return}P=k?p.position-k.position:0}else s(m);r.forEach(O=>{O(n.value,w,{delta:P,type:hA.pop,direction:P?P>0?aS.forward:aS.back:aS.unknown})})};function u(){o=n.value}function c(p){r.push(p);const m=()=>{const w=r.indexOf(p);w>-1&&r.splice(w,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState(Mn({},p.state,{scroll:i4()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:d}}function Fae(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?i4():null}}function rTt(t){const{history:e,location:n}=window,s={value:t1e(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+u:nTt()+t+u;try{e[h?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(u,c){const h=Mn({},e.state,Fae(r.value.back,u,r.value.forward,!0),c,{position:r.value.position});i(u,h,!0),s.value=u}function a(u,c){const h=Mn({},r.value,e.state,{forward:u,scroll:i4()});i(h.current,h,!0);const d=Mn({},Fae(s.value,u,null),{position:h.position+1},c);i(u,d,!1),s.value=u}return{location:s,state:r,push:a,replace:o}}function iTt(t){t=QEt(t);const e=rTt(t),n=sTt(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Mn({location:"",base:t,go:s,createHref:XEt.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function oTt(t){return typeof t=="string"||t&&typeof t=="object"}function n1e(t){return typeof t=="string"||typeof t=="symbol"}const s1e=Symbol("");var Vae;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vae||(Vae={}));function dT(t,e){return Mn(new Error,{type:t,[s1e]:!0},e)}function Od(t,e){return t instanceof Error&&s1e in t&&(e==null||!!(t.type&e))}const Uae="[^/]+?",aTt={sensitive:!1,strict:!1,start:!0,end:!0},lTt=/[.+*?^${}()[\]/\\]/g;function uTt(t,e){const n=Mn({},aTt,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const p=c[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(r+="/"),r+=p.value.replace(lTt,"\\$&"),m+=40;else if(p.type===1){const{value:w,repeatable:k,optional:P,regexp:O}=p;i.push({name:w,repeatable:k,optional:P});const M=O||Uae;if(M!==Uae){m+=10;try{new RegExp(`(${M})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${w}" (${M}): `+q.message)}}let V=k?`((?:${M})(?:/(?:${M}))*)`:`(${M})`;d||(V=P&&c.length<2?`(?:/${V})`:"/"+V),P&&(V+="?"),r+=V,m+=20,P&&(m+=-8),k&&(m+=-20),M===".*"&&(m+=-50)}h.push(m)}s.push(h)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",w=i[p-1];d[w.name]=m&&w.repeatable?m.split("/"):m}return d}function u(c){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:w,repeatable:k,optional:P}=m,O=w in c?c[w]:"";if(Gc(O)&&!k)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const M=Gc(O)?O.join("/"):O;if(!M)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);h+=M}}return h||"/"}return{re:o,score:s,keys:i,parse:a,stringify:u}}function cTt(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function r1e(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=cTt(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(qae(s))return 1;if(qae(r))return-1}return r.length-s.length}function qae(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const hTt={type:0,value:""},dTt=/[a-zA-Z0-9_]/;function fTt(t){if(!t)return[[]];if(t==="/")return[[hTt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,u,c="",h="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:u==="/"?(c&&d(),o()):u===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:u==="("?n=2:dTt.test(u)?p():(d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:d(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}function pTt(t,e,n){const s=uTt(fTt(t.path),n),r=Mn(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function gTt(t,e){const n=[],s=new Map;e=zae({strict:!1,end:!0,sensitive:!1},e);function r(d){return s.get(d)}function i(d,p,m){const w=!m,k=Bae(d);k.aliasOf=m&&m.record;const P=zae(e,d),O=[k];if("alias"in d){const q=typeof d.alias=="string"?[d.alias]:d.alias;for(const H of q)O.push(Bae(Mn({},k,{components:m?m.record.components:k.components,path:H,aliasOf:m?m.record:k})))}let M,V;for(const q of O){const{path:H}=q;if(p&&H[0]!=="/"){const J=p.record.path,I=J[J.length-1]==="/"?"":"/";q.path=p.record.path+(H&&I+H)}if(M=pTt(q,p,P),m?m.alias.push(M):(V=V||M,V!==M&&V.alias.push(M),w&&d.name&&!$ae(M)&&o(d.name)),i1e(M)&&u(M),k.children){const J=k.children;for(let I=0;I<J.length;I++)i(J[I],M,m&&m.children[I])}m=m||M}return V?()=>{o(V)}:oS}function o(d){if(n1e(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function u(d){const p=yTt(d,n);n.splice(p,0,d),d.record.name&&!$ae(d)&&s.set(d.record.name,d)}function c(d,p){let m,w={},k,P;if("name"in d&&d.name){if(m=s.get(d.name),!m)throw dT(1,{location:d});P=m.record.name,w=Mn(jae(p.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&jae(d.params,m.keys.map(V=>V.name))),k=m.stringify(w)}else if(d.path!=null)k=d.path,m=n.find(V=>V.re.test(k)),m&&(w=m.parse(k),P=m.record.name);else{if(m=p.name?s.get(p.name):n.find(V=>V.re.test(p.path)),!m)throw dT(1,{location:d,currentLocation:p});P=m.record.name,w=Mn({},p.params,d.params),k=m.stringify(w)}const O=[];let M=m;for(;M;)O.unshift(M.record),M=M.parent;return{name:P,path:k,params:w,matched:O,meta:_Tt(O)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:r}}function jae(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function Bae(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:mTt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function mTt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function $ae(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function _Tt(t){return t.reduce((e,n)=>Mn(e,n.meta),{})}function zae(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function yTt(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;r1e(t,e[i])<0?s=i:n=i+1}const r=vTt(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function vTt(t){let e=t;for(;e=e.parent;)if(i1e(e)&&r1e(t,e)===0)return e}function i1e({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function wTt(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(YRe," "),o=i.indexOf("="),a=cA(o<0?i:i.slice(0,o)),u=o<0?null:cA(i.slice(o+1));if(a in e){let c=e[a];Gc(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function Hae(t){let e="";for(let n in t){const s=t[n];if(n=qEt(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Gc(s)?s.map(i=>i&&OB(i)):[s&&OB(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function bTt(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Gc(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const ETt=Symbol(""),Wae=Symbol(""),o4=Symbol(""),VG=Symbol(""),MB=Symbol("");function tI(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function eg(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,u)=>{const c=p=>{p===!1?u(dT(4,{from:n,to:e})):p instanceof Error?u(p):oTt(p)?u(dT(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(s&&s.instances[r],e,n,c));let d=Promise.resolve(h);t.length<3&&(d=d.then(c)),d.catch(p=>u(p))})}function I9(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let u=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(GRe(u)){const h=(u.__vccOpts||u)[e];h&&i.push(eg(h,n,s,o,a,r))}else{let c=u();i.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=REt(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const m=(d.__vccOpts||d)[e];return m&&eg(m,n,s,o,a,r)()}))}}return i}function Kae(t){const e=Bl(o4),n=Bl(VG),s=Ge(()=>{const u=uv(t.to);return e.resolve(u)}),r=Ge(()=>{const{matched:u}=s.value,{length:c}=u,h=u[c-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(hT.bind(null,h));if(p>-1)return p;const m=Gae(u[c-2]);return c>1&&Gae(h)===m&&d[d.length-1].path!==m?d.findIndex(hT.bind(null,u[c-2])):p}),i=Ge(()=>r.value>-1&&kTt(n.params,s.value.params)),o=Ge(()=>r.value>-1&&r.value===n.matched.length-1&&e1e(n.params,s.value.params));function a(u={}){if(STt(u)){const c=e[uv(t.replace)?"replace":"push"](uv(t.to)).catch(oS);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:Ge(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function TTt(t){return t.length===1?t[0]:t}const CTt=XV({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Kae,setup(t,{slots:e}){const n=hC(Kae(t)),{options:s}=Bl(o4),r=Ge(()=>({[Qae(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Qae(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&TTt(e.default(n));return t.custom?i:Ct("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),ITt=CTt;function STt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function kTt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Gc(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Gae(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qae=(t,e,n)=>t??e??n,ATt=XV({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Bl(MB),r=Ge(()=>t.route||s.value),i=Bl(Wae,0),o=Ge(()=>{let c=uv(i);const{matched:h}=r.value;let d;for(;(d=h[c])&&!d.components;)c++;return c}),a=Ge(()=>r.value.matched[o.value]);Dx(Wae,Ge(()=>o.value+1)),Dx(ETt,a),Dx(MB,r);const u=qm();return rS(()=>[u.value,a.value,t.name],([c,h,d],[p,m,w])=>{h&&(h.instances[d]=c,m&&m!==h&&c&&c===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!hT(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(k=>k(c))},{flush:"post"}),()=>{const c=r.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return Yae(n.default,{Component:p,route:c});const m=d.props[h],w=m?m===!0?c.params:typeof m=="function"?m(c):m:null,P=Ct(p,Mn({},w,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(d.instances[h]=null)},ref:u}));return Yae(n.default,{Component:P,route:c})||P}}});function Yae(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RTt=ATt;function PTt(t){const e=gTt(t.routes,t),n=t.parseQuery||wTt,s=t.stringifyQuery||Hae,r=t.history,i=tI(),o=tI(),a=tI(),u=twt(kp);let c=kp;fb&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=T9.bind(null,F=>""+F),d=T9.bind(null,BEt),p=T9.bind(null,cA);function m(F,Y){let G,ee;return n1e(F)?(G=e.getRecordMatcher(F),ee=Y):ee=F,e.addRoute(ee,G)}function w(F){const Y=e.getRecordMatcher(F);Y&&e.removeRoute(Y)}function k(){return e.getRoutes().map(F=>F.record)}function P(F){return!!e.getRecordMatcher(F)}function O(F,Y){if(Y=Mn({},Y||u.value),typeof F=="string"){const N=C9(n,F,Y.path),L=e.resolve({path:N.path},Y),U=r.createHref(N.fullPath);return Mn(N,L,{params:p(L.params),hash:cA(N.hash),redirectedFrom:void 0,href:U})}let G;if(F.path!=null)G=Mn({},F,{path:C9(n,F.path,Y.path).path});else{const N=Mn({},F.params);for(const L in N)N[L]==null&&delete N[L];G=Mn({},F,{params:d(N)}),Y.params=d(Y.params)}const ee=e.resolve(G,Y),A=F.hash||"";ee.params=h(p(ee.params));const C=HEt(s,Mn({},F,{hash:UEt(A),path:ee.path})),R=r.createHref(C);return Mn({fullPath:C,hash:A,query:s===Hae?bTt(F.query):F.query||{}},ee,{redirectedFrom:void 0,href:R})}function M(F){return typeof F=="string"?C9(n,F,u.value.path):Mn({},F)}function V(F,Y){if(c!==F)return dT(8,{from:Y,to:F})}function q(F){return I(F)}function H(F){return q(Mn(M(F),{replace:!0}))}function J(F){const Y=F.matched[F.matched.length-1];if(Y&&Y.redirect){const{redirect:G}=Y;let ee=typeof G=="function"?G(F):G;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=M(ee):{path:ee},ee.params={}),Mn({query:F.query,hash:F.hash,params:ee.path!=null?{}:F.params},ee)}}function I(F,Y){const G=c=O(F),ee=u.value,A=F.state,C=F.force,R=F.replace===!0,N=J(G);if(N)return I(Mn(M(N),{state:typeof N=="object"?Mn({},A,N.state):A,force:C,replace:R}),Y||G);const L=G;L.redirectedFrom=Y;let U;return!C&&WEt(s,ee,G)&&(U=dT(16,{to:L,from:ee}),mt(ee,ee,!0,!1)),(U?Promise.resolve(U):T(L,ee)).catch(j=>Od(j)?Od(j,2)?j:nt(j):ve(j,L,ee)).then(j=>{if(j){if(Od(j,2))return I(Mn({replace:R},M(j.to),{state:typeof j.to=="object"?Mn({},A,j.to.state):A,force:C}),Y||L)}else j=E(L,ee,!0,R,A);return S(L,ee,j),j})}function v(F,Y){const G=V(F,Y);return G?Promise.reject(G):Promise.resolve()}function y(F){const Y=fn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(F):F()}function T(F,Y){let G;const[ee,A,C]=xTt(F,Y);G=I9(ee.reverse(),"beforeRouteLeave",F,Y);for(const N of ee)N.leaveGuards.forEach(L=>{G.push(eg(L,F,Y))});const R=v.bind(null,F,Y);return G.push(R),Ve(G).then(()=>{G=[];for(const N of i.list())G.push(eg(N,F,Y));return G.push(R),Ve(G)}).then(()=>{G=I9(A,"beforeRouteUpdate",F,Y);for(const N of A)N.updateGuards.forEach(L=>{G.push(eg(L,F,Y))});return G.push(R),Ve(G)}).then(()=>{G=[];for(const N of C)if(N.beforeEnter)if(Gc(N.beforeEnter))for(const L of N.beforeEnter)G.push(eg(L,F,Y));else G.push(eg(N.beforeEnter,F,Y));return G.push(R),Ve(G)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),G=I9(C,"beforeRouteEnter",F,Y,y),G.push(R),Ve(G))).then(()=>{G=[];for(const N of o.list())G.push(eg(N,F,Y));return G.push(R),Ve(G)}).catch(N=>Od(N,8)?N:Promise.reject(N))}function S(F,Y,G){a.list().forEach(ee=>y(()=>ee(F,Y,G)))}function E(F,Y,G,ee,A){const C=V(F,Y);if(C)return C;const R=Y===kp,N=fb?history.state:{};G&&(ee||R?r.replace(F.fullPath,Mn({scroll:R&&N&&N.scroll},A)):r.push(F.fullPath,A)),u.value=F,mt(F,Y,G,R),nt()}let b;function K(){b||(b=r.listen((F,Y,G)=>{if(!Mt.listening)return;const ee=O(F),A=J(ee);if(A){I(Mn(A,{replace:!0,force:!0}),ee).catch(oS);return}c=ee;const C=u.value;fb&&eTt(Mae(C.fullPath,G.delta),i4()),T(ee,C).catch(R=>Od(R,12)?R:Od(R,2)?(I(Mn(M(R.to),{force:!0}),ee).then(N=>{Od(N,20)&&!G.delta&&G.type===hA.pop&&r.go(-1,!1)}).catch(oS),Promise.reject()):(G.delta&&r.go(-G.delta,!1),ve(R,ee,C))).then(R=>{R=R||E(ee,C,!1),R&&(G.delta&&!Od(R,8)?r.go(-G.delta,!1):G.type===hA.pop&&Od(R,20)&&r.go(-1,!1)),S(ee,C,R)}).catch(oS)}))}let ne=tI(),ae=tI(),oe;function ve(F,Y,G){nt(F);const ee=ae.list();return ee.length?ee.forEach(A=>A(F,Y,G)):console.error(F),Promise.reject(F)}function Lt(){return oe&&u.value!==kp?Promise.resolve():new Promise((F,Y)=>{ne.add([F,Y])})}function nt(F){return oe||(oe=!F,K(),ne.list().forEach(([Y,G])=>F?G(F):Y()),ne.reset()),F}function mt(F,Y,G,ee){const{scrollBehavior:A}=t;if(!fb||!A)return Promise.resolve();const C=!G&&tTt(Mae(F.fullPath,0))||(ee||!G)&&history.state&&history.state.scroll||null;return WAe().then(()=>A(F,Y,C)).then(R=>R&&ZEt(R)).catch(R=>ve(R,F,Y))}const Te=F=>r.go(F);let we;const fn=new Set,Mt={currentRoute:u,listening:!0,addRoute:m,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:k,resolve:O,options:t,push:q,replace:H,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:Lt,install(F){const Y=this;F.component("RouterLink",ITt),F.component("RouterView",RTt),F.config.globalProperties.$router=Y,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>uv(u)}),fb&&!we&&u.value===kp&&(we=!0,q(r.location).catch(A=>{}));const G={};for(const A in kp)Object.defineProperty(G,A,{get:()=>u.value[A],enumerable:!0});F.provide(o4,Y),F.provide(VG,jAe(G)),F.provide(MB,u);const ee=F.unmount;fn.add(F),F.unmount=function(){fn.delete(F),fn.size<1&&(c=kp,b&&b(),b=null,u.value=kp,we=!1,oe=!1),ee()}}};function Ve(F){return F.reduce((Y,G)=>Y.then(()=>y(G)),Promise.resolve())}return Mt}function xTt(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>hT(c,a))?s.push(a):n.push(a));const u=t.matched[o];u&&(e.matched.find(c=>hT(c,u))||r.push(u))}return[n,s,r]}function NTt(){return Bl(o4)}function DTt(t){return Bl(VG)}const OTt=()=>{};var Xae={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1e={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke=function(t,e){if(!t)throw dC(e)},dC=function(t){return new Error("Firebase Database ("+o1e.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1e=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},LTt=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],u=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},UG={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,u=r+2<t.length,c=u?t[r+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),s.push(n[h],n[d],n[p],n[m])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a1e(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LTt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||c==null||d==null)throw new MTt;const p=i<<2|a>>4;if(s.push(p),c!==64){const m=a<<4&240|c>>2;if(s.push(m),d!==64){const w=c<<6&192|d;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MTt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l1e=function(t){const e=a1e(t);return UG.encodeByteArray(e,!0)},HO=function(t){return l1e(t).replace(/\./g,"")},WO=function(t){try{return UG.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FTt(t){return u1e(void 0,t)}function u1e(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!VTt(n)||(t[n]=u1e(t[n],e[n]));return t}function VTt(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UTt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qTt=()=>UTt().__FIREBASE_DEFAULTS__,jTt=()=>{if(typeof process>"u"||typeof Xae>"u")return;const t=Xae.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BTt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WO(t[1]);return e&&JSON.parse(e)},a4=()=>{try{return OTt()||qTt()||jTt()||BTt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c1e=t=>a4()?.emulatorHosts?.[t],qG=t=>{const e=c1e(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},h1e=()=>a4()?.config,d1e=t=>a4()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function u4(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[HO(JSON.stringify(n)),HO(JSON.stringify(o)),""].join(".")}const lS={};function $Tt(){const t={prod:[],emulator:[]};for(const e of Object.keys(lS))lS[e]?t.emulator.push(e):t.prod.push(e);return t}function zTt(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jae=!1;function c4(t,e){if(typeof window>"u"||typeof document>"u"||!Id(window.location.host)||lS[t]===e||lS[t]||Jae)return;lS[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=$Tt().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Jae=!0,o()},p}function h(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=zTt(s),m=n("text"),w=document.getElementById(m)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),O=n("preprendIcon"),M=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const V=p.element;a(V),h(P,k);const q=c();u(M,O),V.append(M,w,P,q),document.body.appendChild(V)}i?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jo())}function HTt(){const t=a4()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WTt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KTt(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f1e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GTt(){const t=jo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QTt(){return o1e.NODE_ADMIN===!0}function YTt(){return!HTt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XTt(){try{return typeof indexedDB=="object"}catch{return!1}}function JTt(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZTt="FirebaseError";class Sd extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ZTt,Object.setPrototypeOf(this,Sd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s1.prototype.create)}}class s1{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?eCt(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Sd(r,a,s)}}function eCt(t,e){return t.replace(tCt,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const tCt=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){return JSON.parse(t)}function pi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1e=function(t){let e={},n={},s={},r="";try{const i=t.split(".");e=dA(WO(i[0])||""),n=dA(WO(i[1])||""),r=i[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:r}},nCt=function(t){const e=p1e(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sCt=function(t){const e=p1e(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fT(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function FB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function KO(t,e,n){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=e.call(n,t[r],r,t));return s}function Bm(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Zae(i)&&Zae(o)){if(!Bm(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Zae(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rCt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)s[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)s[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=s[d-3]^s[d-8]^s[d-14]^s[d-16];s[d]=(p<<1|p>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,h;for(let d=0;d<80;d++){d<40?d<20?(c=a^i&(o^a),h=1518500249):(c=i^o^a,h=1859775393):d<60?(c=i&o|a&(i|o),h=2400959708):(c=i^o^a,h=3395469782);const p=(r<<5|r>>>27)+c+u+h+s[d]&4294967295;u=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=p}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<n;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function iCt(t,e){const n=new oCt(t,e);return n.subscribe.bind(n)}class oCt{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");aCt(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=S9),r.error===void 0&&(r.error=S9),r.complete===void 0&&(r.complete=S9);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aCt(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function S9(){}function $G(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lCt=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,ke(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},h4=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){return t&&t._delegate?t._delegate:t}class Xf{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uCt{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new l4;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hCt(e))try{this.getOrInitializeService({instanceIdentifier:my})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=my){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=my){return this.instances.has(e)}getOptions(e=my){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cCt(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=my){return this.component?this.component.multipleInstances?e:my:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cCt(t){return t===my?void 0:t}function hCt(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dCt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uCt(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const fCt={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},pCt=Qt.INFO,gCt={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},mCt=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=gCt[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d4{constructor(e){this.name=e,this._logLevel=pCt,this._logHandler=mCt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fCt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const _Ct=(t,e)=>e.some(n=>t instanceof n);let ele,tle;function yCt(){return ele||(ele=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vCt(){return tle||(tle=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g1e=new WeakMap,VB=new WeakMap,m1e=new WeakMap,k9=new WeakMap,zG=new WeakMap;function wCt(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Bg(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&g1e.set(n,t)}).catch(()=>{}),zG.set(e,t),e}function bCt(t){if(VB.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});VB.set(t,e)}let UB={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VB.get(t);if(e==="objectStoreNames")return t.objectStoreNames||m1e.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ECt(t){UB=t(UB)}function TCt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(A9(this),e,...n);return m1e.set(s,e.sort?e.sort():[e]),Bg(s)}:vCt().includes(t)?function(...e){return t.apply(A9(this),e),Bg(g1e.get(this))}:function(...e){return Bg(t.apply(A9(this),e))}}function CCt(t){return typeof t=="function"?TCt(t):(t instanceof IDBTransaction&&bCt(t),_Ct(t,yCt())?new Proxy(t,UB):t)}function Bg(t){if(t instanceof IDBRequest)return wCt(t);if(k9.has(t))return k9.get(t);const e=CCt(t);return e!==t&&(k9.set(t,e),zG.set(e,t)),e}const A9=t=>zG.get(t);function ICt(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Bg(o);return s&&o.addEventListener("upgradeneeded",u=>{s(Bg(o.result),u.oldVersion,u.newVersion,Bg(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SCt=["get","getKey","getAll","getAllKeys","count"],kCt=["put","add","delete","clear"],R9=new Map;function nle(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(R9.get(e))return R9.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=kCt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||SCt.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&u.done]))[0]};return R9.set(e,i),i}ECt(t=>({...t,get:(e,n,s)=>nle(e,n)||t.get(e,n,s),has:(e,n)=>!!nle(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ACt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RCt(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function RCt(t){return t.getComponent()?.type==="VERSION"}const qB="@firebase/app",sle="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new d4("@firebase/app"),PCt="@firebase/app-compat",xCt="@firebase/analytics-compat",NCt="@firebase/analytics",DCt="@firebase/app-check-compat",OCt="@firebase/app-check",LCt="@firebase/auth",MCt="@firebase/auth-compat",FCt="@firebase/database",VCt="@firebase/data-connect",UCt="@firebase/database-compat",qCt="@firebase/functions",jCt="@firebase/functions-compat",BCt="@firebase/installations",$Ct="@firebase/installations-compat",zCt="@firebase/messaging",HCt="@firebase/messaging-compat",WCt="@firebase/performance",KCt="@firebase/performance-compat",GCt="@firebase/remote-config",QCt="@firebase/remote-config-compat",YCt="@firebase/storage",XCt="@firebase/storage-compat",JCt="@firebase/firestore",ZCt="@firebase/ai",eIt="@firebase/firestore-compat",tIt="firebase",nIt="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="[DEFAULT]",sIt={[qB]:"fire-core",[PCt]:"fire-core-compat",[NCt]:"fire-analytics",[xCt]:"fire-analytics-compat",[OCt]:"fire-app-check",[DCt]:"fire-app-check-compat",[LCt]:"fire-auth",[MCt]:"fire-auth-compat",[FCt]:"fire-rtdb",[VCt]:"fire-data-connect",[UCt]:"fire-rtdb-compat",[qCt]:"fire-fn",[jCt]:"fire-fn-compat",[BCt]:"fire-iid",[$Ct]:"fire-iid-compat",[zCt]:"fire-fcm",[HCt]:"fire-fcm-compat",[WCt]:"fire-perf",[KCt]:"fire-perf-compat",[GCt]:"fire-rc",[QCt]:"fire-rc-compat",[YCt]:"fire-gcs",[XCt]:"fire-gcs-compat",[JCt]:"fire-fst",[eIt]:"fire-fst-compat",[ZCt]:"fire-vertex","fire-js":"fire-js",[tIt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Map,rIt=new Map,BB=new Map;function rle(t,e){try{t.container.addComponent(e)}catch(n){Jf.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $m(t){const e=t.name;if(BB.has(e))return Jf.debug(`There were multiple attempts to register component ${e}.`),!1;BB.set(e,t);for(const n of GO.values())rle(n,t);for(const n of rIt.values())rle(n,t);return!0}function r1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ol(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iIt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$g=new s1("app","Firebase",iIt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oIt{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $g.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=nIt;function _1e(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:jB,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw $g.create("bad-app-name",{appName:String(r)});if(n||(n=h1e()),!n)throw $g.create("no-options");const i=GO.get(r);if(i){if(Bm(n,i.options)&&Bm(s,i.config))return i;throw $g.create("duplicate-app",{appName:r})}const o=new dCt(r);for(const u of BB.values())o.addComponent(u);const a=new oIt(n,s,o);return GO.set(r,a),a}function f4(t=jB){const e=GO.get(t);if(!e&&t===jB&&h1e())return _1e();if(!e)throw $g.create("no-app",{appName:t});return e}function $l(t,e,n){let s=sIt[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jf.warn(o.join(" "));return}$m(new Xf(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aIt="firebase-heartbeat-database",lIt=1,fA="firebase-heartbeat-store";let P9=null;function y1e(){return P9||(P9=ICt(aIt,lIt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fA)}catch(n){console.warn(n)}}}}).catch(t=>{throw $g.create("idb-open",{originalErrorMessage:t.message})})),P9}async function uIt(t){try{const n=(await y1e()).transaction(fA),s=await n.objectStore(fA).get(v1e(t));return await n.done,s}catch(e){if(e instanceof Sd)Jf.warn(e.message);else{const n=$g.create("idb-get",{originalErrorMessage:e?.message});Jf.warn(n.message)}}}async function ile(t,e){try{const s=(await y1e()).transaction(fA,"readwrite");await s.objectStore(fA).put(e,v1e(t)),await s.done}catch(n){if(n instanceof Sd)Jf.warn(n.message);else{const s=$g.create("idb-set",{originalErrorMessage:n?.message});Jf.warn(s.message)}}}function v1e(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cIt=1024,hIt=30;class dIt{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pIt(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ole();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>hIt){const r=gIt(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jf.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ole(),{heartbeatsToSend:n,unsentEntries:s}=fIt(this._heartbeatsCache.heartbeats),r=HO(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Jf.warn(e),""}}}function ole(){return new Date().toISOString().substring(0,10)}function fIt(t,e=cIt){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ale(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ale(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class pIt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XTt()?JTt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uIt(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ile(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ile(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ale(t){return HO(JSON.stringify({version:2,heartbeats:t})).length}function gIt(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mIt(t){$m(new Xf("platform-logger",e=>new ACt(e),"PRIVATE")),$m(new Xf("heartbeat",e=>new dIt(e),"PRIVATE")),$l(qB,sle,t),$l(qB,sle,"esm2020"),$l("fire-js","")}mIt("");function w1e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _It=w1e,b1e=new s1("auth","Firebase",w1e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new d4("@firebase/auth");function yIt(t,...e){QO.logLevel<=Qt.WARN&&QO.warn(`Auth (${m_}): ${t}`,...e)}function Mx(t,...e){QO.logLevel<=Qt.ERROR&&QO.error(`Auth (${m_}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t,...e){throw WG(t,...e)}function Mc(t,...e){return WG(t,...e)}function HG(t,e,n){const s={..._It(),[e]:n};return new s1("auth","Firebase",s).create(e,{appName:t.name})}function hv(t){return HG(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vIt(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&pd(t,"argument-error"),HG(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WG(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return b1e.create(t,...e)}function Tt(t,e,...n){if(!t)throw WG(e,...n)}function df(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mx(e),new Error(e)}function Zf(t,e){t||df(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(){return typeof self<"u"&&self.location?.href||""}function wIt(){return lle()==="http:"||lle()==="https:"}function lle(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bIt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wIt()||KTt()||"connection"in navigator)?navigator.onLine:!0}function EIt(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zf(n>e,"Short delay should be less than long delay!"),this.isMobile=BG()||f1e()}get(){return bIt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KG(t,e){Zf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1e{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;df("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;df("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;df("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TIt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CIt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],IIt=new i1(3e4,6e4);function GG(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function pC(t,e,n,s,r={}){return T1e(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=fC({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...i};return WTt()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Id(t.emulatorConfig.host)&&(c.credentials="include"),E1e.fetch()(await C1e(t,t.config.apiHost,n,a),c)})}async function T1e(t,e,n){t._canInitEmulator=!1;const s={...TIt,...e};try{const r=new kIt(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vP(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw vP(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw vP(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw vP(t,"user-disabled",o);const h=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw HG(t,h,c);pd(t,h)}}catch(r){if(r instanceof Sd)throw r;pd(t,"network-request-failed",{message:String(r)})}}async function SIt(t,e,n,s,r={}){const i=await pC(t,e,n,s,r);return"mfaPendingCredential"in i&&pd(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function C1e(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?KG(t.config,r):`${t.config.apiScheme}://${r}`;return CIt.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class kIt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Mc(this.auth,"network-request-failed")),IIt.get())})}}function vP(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Mc(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AIt(t,e){return pC(t,"POST","/v1/accounts:delete",e)}async function YO(t,e){return pC(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RIt(t,e=!1){const n=Gn(t),s=await n.getIdToken(e),r=QG(s);Tt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:uS(x9(r.auth_time)),issuedAtTime:uS(x9(r.iat)),expirationTime:uS(x9(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function x9(t){return Number(t)*1e3}function QG(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Mx("JWT malformed, contained fewer than 3 sections"),null;try{const r=WO(n);return r?JSON.parse(r):(Mx("Failed to decode base64 JWT payload"),null)}catch(r){return Mx("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ule(t){const e=QG(t);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Sd&&PIt(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function PIt({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xIt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uS(this.lastLoginAt),this.creationTime=uS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t){const e=t.auth,n=await t.getIdToken(),s=await pA(t,YO(e,{idToken:n}));Tt(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?I1e(r.providerUserInfo):[],o=DIt(t.providerData,i),a=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!o?.length,c=a?u:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new zB(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function NIt(t){const e=Gn(t);await XO(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DIt(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function I1e(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OIt(t,e){const n=await T1e(t,{},async()=>{const s=fC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await C1e(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:s};return t.emulatorConfig&&Id(t.emulatorConfig.host)&&(u.credentials="include"),E1e.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LIt(t,e){return pC(t,"POST","/v2/accounts:revokeToken",GG(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ule(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const n=ule(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await OIt(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new aE;return s&&(Tt(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Tt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Tt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aE,this.toJSON())}_performRefresh(){return df("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t,e){Tt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pc{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new xIt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new zB(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await pA(this,this.stsTokenManager.getToken(this.auth,e));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RIt(this,e)}reload(){return NIt(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await XO(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ol(this.auth.app))return Promise.reject(hv(this.auth));const e=await this.getIdToken();return await pA(this,AIt(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:m,providerData:w,stsTokenManager:k}=n;Tt(d&&k,e,"internal-error");const P=aE.fromJSON(this.name,k);Tt(typeof d=="string",e,"internal-error"),Ap(s,e.name),Ap(r,e.name),Tt(typeof p=="boolean",e,"internal-error"),Tt(typeof m=="boolean",e,"internal-error"),Ap(i,e.name),Ap(o,e.name),Ap(a,e.name),Ap(u,e.name),Ap(c,e.name),Ap(h,e.name);const O=new pc({uid:d,auth:e,email:r,emailVerified:p,displayName:s,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(O.providerData=w.map(M=>({...M}))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,s=!1){const r=new aE;r.updateFromServerResponse(n);const i=new pc({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await XO(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Tt(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?I1e(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,a=new aE;a.updateFromIdToken(s);const u=new pc({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new zB(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cle=new Map;function ff(t){Zf(t instanceof Function,"Expected a class definition");let e=cle.get(t);return e?(Zf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cle.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}S1e.type="NONE";const hle=S1e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){return`firebase:${t}:${e}:${n}`}class lE{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Fx(this.userKey,r.apiKey,i),this.fullPersistenceKey=Fx("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await YO(this.auth,{idToken:e}).catch(()=>{});return n?pc._fromGetAccountInfoResponse(this.auth,n,e):null}return pc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new lE(ff(hle),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||ff(hle);const o=Fx(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let d;if(typeof h=="string"){const p=await YO(e,{idToken:h}).catch(()=>{});if(!p)break;d=await pc._fromGetAccountInfoResponse(e,p,h)}else d=pc._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const u=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new lE(i,e,s):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new lE(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dle(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P1e(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k1e(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N1e(e))return"Blackberry";if(D1e(e))return"Webos";if(A1e(e))return"Safari";if((e.includes("chrome/")||R1e(e))&&!e.includes("edge/"))return"Chrome";if(x1e(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function k1e(t=jo()){return/firefox\//i.test(t)}function A1e(t=jo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R1e(t=jo()){return/crios\//i.test(t)}function P1e(t=jo()){return/iemobile/i.test(t)}function x1e(t=jo()){return/android/i.test(t)}function N1e(t=jo()){return/blackberry/i.test(t)}function D1e(t=jo()){return/webos/i.test(t)}function YG(t=jo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MIt(t=jo()){return YG(t)&&!!window.navigator?.standalone}function FIt(){return GTt()&&document.documentMode===10}function O1e(t=jo()){return YG(t)||x1e(t)||D1e(t)||N1e(t)||/windows phone/i.test(t)||P1e(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1e(t,e=[]){let n;switch(t){case"Browser":n=dle(jo());break;case"Worker":n=`${dle(jo())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${m_}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VIt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UIt(t,e={}){return pC(t,"GET","/v2/passwordPolicy",GG(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qIt=6;class jIt{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qIt,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BIt{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fle(this),this.idTokenSubscription=new fle(this),this.beforeStateQueue=new VIt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b1e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ff(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await lE.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await YO(this,{idToken:e}),s=await pc._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ol(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(s=a.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await XO(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EIt()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ol(this.app))return Promise.reject(hv(this));const n=e?Gn(e):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ol(this.app)?Promise.reject(hv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ol(this.app)?Promise.reject(hv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ff(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UIt(this),n=new jIt(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s1("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await LIt(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ff(e)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await lE.create(this,[ff(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L1e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ol(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yIt(`Error while retrieving App Check token: ${e.error}`),e?.token}}function p4(t){return Gn(t)}class fle{constructor(e){this.auth=e,this.observer=null,this.addObserver=iCt(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XG={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $It(t){XG=t}function zIt(t){return XG.loadJS(t)}function HIt(){return XG.gapiScript}function WIt(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KIt(t,e){const n=r1(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Bm(i,e??{}))return r;pd(r,"already-initialized")}return n.initialize({options:e})}function GIt(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ff);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function QIt(t,e,n){const s=p4(t);Tt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=M1e(e),{host:o,port:a}=YIt(e),u=a===null?"":`:${a}`,c={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(Bm(c,s.config.emulator)&&Bm(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,Id(o)?(u4(`${i}//${o}${u}`),c4("Auth",!0)):XIt()}function M1e(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YIt(t){const e=M1e(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:ple(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:ple(o)}}}function ple(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XIt(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1e{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return df("not implemented")}_getIdTokenResponse(e){return df("not implemented")}_linkToIdToken(e,n){return df("not implemented")}_getReauthenticationResolver(e){return df("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(t,e){return SIt(t,"POST","/v1/accounts:signInWithIdp",GG(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JIt="http://localhost";class Hv extends F1e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Hv(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return uE(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,uE(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uE(e,n)}buildRequest(){const e={requestUri:JIt,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fC(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1 extends JG{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends o1{constructor(){super("facebook.com")}static credential(e){return Hv._fromParams({providerId:ig.PROVIDER_ID,signInMethod:ig.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ig.credentialFromTaggedObject(e)}static credentialFromError(e){return ig.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ig.credential(e.oauthAccessToken)}catch{return null}}}ig.FACEBOOK_SIGN_IN_METHOD="facebook.com";ig.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends o1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hv._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return tf.credential(n,s)}catch{return null}}}tf.GOOGLE_SIGN_IN_METHOD="google.com";tf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends o1{constructor(){super("github.com")}static credential(e){return Hv._fromParams({providerId:og.PROVIDER_ID,signInMethod:og.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return og.credentialFromTaggedObject(e)}static credentialFromError(e){return og.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return og.credential(e.oauthAccessToken)}catch{return null}}}og.GITHUB_SIGN_IN_METHOD="github.com";og.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends o1{constructor(){super("twitter.com")}static credential(e,n){return Hv._fromParams({providerId:ag.PROVIDER_ID,signInMethod:ag.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ag.credentialFromTaggedObject(e)}static credentialFromError(e){return ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ag.credential(n,s)}catch{return null}}}ag.TWITTER_SIGN_IN_METHOD="twitter.com";ag.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await pc._fromIdTokenResponse(e,s,r),o=gle(s);return new pT({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=gle(s);return new pT({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function gle(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO extends Sd{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,JO.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new JO(e,n,s,r)}}function V1e(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?JO._fromErrorAndOperation(t,i,e,s):i})}async function ZIt(t,e,n=!1){const s=await pA(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pT._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0t(t,e,n=!1){const{auth:s}=t;if(ol(s.app))return Promise.reject(hv(s));const r="reauthenticate";try{const i=await pA(t,V1e(s,r,e,t),n);Tt(i.idToken,s,"internal-error");const o=QG(i.idToken);Tt(o,s,"internal-error");const{sub:a}=o;return Tt(t.uid===a,s,"user-mismatch"),pT._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&pd(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t0t(t,e,n=!1){if(ol(t.app))return Promise.reject(hv(t));const s="signIn",r=await V1e(t,s,e),i=await pT._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}function n0t(t,e,n,s){return Gn(t).onIdTokenChanged(e,n,s)}function s0t(t,e,n){return Gn(t).beforeAuthStateChanged(e,n)}function r0t(t,e,n,s){return Gn(t).onAuthStateChanged(e,n,s)}function nI(t){return Gn(t).signOut()}const ZO="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1e{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ZO,"1"),this.storage.removeItem(ZO),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0t=1e3,o0t=10;class q1e extends U1e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O1e(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);FIt()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,o0t):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},i0t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q1e.type="LOCAL";const a0t=q1e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1e extends U1e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j1e.type="SESSION";const B1e=j1e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0t(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new g4(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await l0t(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}g4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZG(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0t{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=ZG("",20);r.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){return window}function c0t(t){Kh().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1e(){return typeof Kh().WorkerGlobalScope<"u"&&typeof Kh().importScripts=="function"}async function h0t(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d0t(){return navigator?.serviceWorker?.controller||null}function f0t(){return $1e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1e="firebaseLocalStorageDb",p0t=1,eL="firebaseLocalStorage",H1e="fbase_key";class a1{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function m4(t,e){return t.transaction([eL],e?"readwrite":"readonly").objectStore(eL)}function g0t(){const t=indexedDB.deleteDatabase(z1e);return new a1(t).toPromise()}function HB(){const t=indexedDB.open(z1e,p0t);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(eL,{keyPath:H1e})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(eL)?e(s):(s.close(),await g0t(),e(await HB()))})})}async function mle(t,e,n){const s=m4(t,!0).put({[H1e]:e,value:n});return new a1(s).toPromise()}async function m0t(t,e){const n=m4(t,!1).get(e),s=await new a1(n).toPromise();return s===void 0?null:s.value}function _le(t,e){const n=m4(t,!0).delete(e);return new a1(n).toPromise()}const _0t=800,y0t=3;class W1e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await HB(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>y0t)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $1e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=g4._getInstance(f0t()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await h0t(),!this.activeServiceWorker)return;this.sender=new u0t(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d0t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await HB();return await mle(e,ZO,"1"),await _le(e,ZO),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>mle(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>m0t(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_le(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=m4(r,!1).getAll();return new a1(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_0t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W1e.type="LOCAL";const v0t=W1e;new i1(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1e(t,e){return e?ff(e):(Tt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ extends F1e{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uE(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w0t(t){return t0t(t.auth,new eQ(t),t.bypassAuthState)}function b0t(t){const{auth:e,user:n}=t;return Tt(n,e,"internal-error"),e0t(n,new eQ(t),t.bypassAuthState)}async function E0t(t){const{auth:e,user:n}=t;return Tt(n,e,"internal-error"),ZIt(n,new eQ(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1e{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w0t;case"linkViaPopup":case"linkViaRedirect":return E0t;case"reauthViaPopup":case"reauthViaRedirect":return b0t;default:pd(this.auth,"internal-error")}}resolve(e){Zf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0t=new i1(2e3,1e4);async function C0t(t,e,n){if(ol(t.app))return Promise.reject(Mc(t,"operation-not-supported-in-this-environment"));const s=p4(t);vIt(t,e,JG);const r=K1e(s,n);return new Uy(s,"signInViaPopup",e,r).executeNotNull()}class Uy extends G1e{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Uy.currentPopupAction&&Uy.currentPopupAction.cancel(),Uy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){Zf(this.filter.length===1,"Popup operations only handle one event");const e=ZG();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Mc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uy.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T0t.get())};e()}}Uy.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0t="pendingRedirect",Vx=new Map;class S0t extends G1e{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Vx.get(this.auth._key());if(!e){try{const s=await k0t(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Vx.set(this.auth._key(),e)}return this.bypassAuthState||Vx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k0t(t,e){const n=P0t(e),s=R0t(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function A0t(t,e){Vx.set(t._key(),e)}function R0t(t){return ff(t._redirectPersistence)}function P0t(t){return Fx(I0t,t.config.apiKey,t.name)}async function x0t(t,e,n=!1){if(ol(t.app))return Promise.reject(hv(t));const s=p4(t),r=K1e(s,e),o=await new S0t(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0t=600*1e3;class D0t{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O0t(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Q1e(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Mc(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N0t&&this.cachedEventUids.clear(),this.cachedEventUids.has(yle(e))}saveEventToCache(e){this.cachedEventUids.add(yle(e)),this.lastProcessedEventTime=Date.now()}}function yle(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Q1e({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function O0t(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q1e(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0t(t,e={}){return pC(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F0t=/^https?/;async function V0t(t){if(t.config.emulator)return;const{authorizedDomains:e}=await L0t(t);for(const n of e)try{if(U0t(n))return}catch{}pd(t,"unauthorized-domain")}function U0t(t){const e=$B(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!F0t.test(n))return!1;if(M0t.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0t=new i1(3e4,6e4);function vle(){const t=Kh().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j0t(t){return new Promise((e,n)=>{function s(){vle(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vle(),n(Mc(t,"network-request-failed"))},timeout:q0t.get()})}if(Kh().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Kh().gapi?.load)s();else{const r=WIt("iframefcb");return Kh()[r]=()=>{gapi.load?s():n(Mc(t,"network-request-failed"))},zIt(`${HIt()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw Ux=null,e})}let Ux=null;function B0t(t){return Ux=Ux||j0t(t),Ux}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0t=new i1(5e3,15e3),z0t="__/auth/iframe",H0t="emulator/auth/iframe",W0t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K0t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G0t(t){const e=t.config;Tt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?KG(e,H0t):`https://${t.config.authDomain}/${z0t}`,s={apiKey:e.apiKey,appName:t.name,v:m_},r=K0t.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${fC(s).slice(1)}`}async function Q0t(t){const e=await B0t(t),n=Kh().gapi;return Tt(n,t,"internal-error"),e.open({where:document.body,url:G0t(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W0t,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Mc(t,"network-request-failed"),a=Kh().setTimeout(()=>{i(o)},$0t.get());function u(){Kh().clearTimeout(a),r(s)}s.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X0t=500,J0t=600,Z0t="_blank",eSt="http://localhost";class wle{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tSt(t,e,n,s=X0t,r=J0t){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const u={...Y0t,width:s.toString(),height:r.toString(),top:i,left:o},c=jo().toLowerCase();n&&(a=R1e(c)?Z0t:n),k1e(c)&&(e=e||eSt,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(MIt(c)&&a!=="_self")return nSt(e||"",a),new wle(null);const d=window.open(e||"",a,h);Tt(d,t,"popup-blocked");try{d.focus()}catch{}return new wle(d)}function nSt(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sSt="__/auth/handler",rSt="emulator/auth/handler",iSt=encodeURIComponent("fac");async function ble(t,e,n,s,r,i){Tt(t.config.authDomain,t,"auth-domain-config-required"),Tt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:m_,eventId:r};if(e instanceof JG){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof o1){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${iSt}=${encodeURIComponent(u)}`:"";return`${oSt(t)}?${fC(a).slice(1)}${c}`}function oSt({config:t}){return t.emulator?KG(t,rSt):`https://${t.authDomain}/${sSt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="webStorageSupport";class aSt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B1e,this._completeRedirectFn=x0t,this._overrideRedirectResult=A0t}async _openPopup(e,n,s,r){Zf(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await ble(e,n,s,$B(),r);return tSt(e,i,ZG())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await ble(e,n,s,$B(),r);return c0t(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Zf(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Q0t(e),s=new D0t(e);return n.register("authEvent",r=>(Tt(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(N9,{type:N9},r=>{const i=r?.[0]?.[N9];i!==void 0&&n(!!i),pd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V0t(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O1e()||A1e()||YG()}}const lSt=aSt;var Ele="@firebase/auth",Tle="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uSt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cSt(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hSt(t){$m(new Xf("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Tt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L1e(t)},c=new BIt(s,r,i,u);return GIt(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),$m(new Xf("auth-internal",e=>{const n=p4(e.getProvider("auth").getImmediate());return(s=>new uSt(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$l(Ele,Tle,cSt(t)),$l(Ele,Tle,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dSt=300,fSt=d1e("authIdTokenMaxAge")||dSt;let Cle=null;const pSt=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>fSt)return;const r=n?.token;Cle!==r&&(Cle=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function gSt(t=f4()){const e=r1(t,"auth");if(e.isInitialized())return e.getImmediate();const n=KIt(t,{popupRedirectResolver:lSt,persistence:[v0t,a0t,B1e]}),s=d1e("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=pSt(i.toString());s0t(n,o,()=>o(n.currentUser)),n0t(n,a=>o(a))}}const r=c1e("auth");return r&&QIt(n,`http://${r}`),n}function mSt(){return document.getElementsByTagName("head")?.[0]??document}$It({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Mc("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",mSt().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hSt("Browser");var Ile=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zg,Y1e;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,S,E){for(var b=Array(arguments.length-2),K=2;K<arguments.length;K++)b[K-2]=arguments[K];return v.prototype[S].apply(T,b)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(S=0;16>S;++S)T[S]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],S=I.g[2];var E=I.g[3],b=v+(E^y&(S^E))+T[0]+3614090360&4294967295;v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[1]+3905402710&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[2]+606105819&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[3]+3250441966&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[4]+4118548399&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[5]+1200080426&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[6]+2821735955&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[7]+4249261313&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[8]+1770035416&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[9]+2336552879&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[10]+4294925233&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[11]+2304563134&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(E^y&(S^E))+T[12]+1804603682&4294967295,v=y+(b<<7&4294967295|b>>>25),b=E+(S^v&(y^S))+T[13]+4254626195&4294967295,E=v+(b<<12&4294967295|b>>>20),b=S+(y^E&(v^y))+T[14]+2792965006&4294967295,S=E+(b<<17&4294967295|b>>>15),b=y+(v^S&(E^v))+T[15]+1236535329&4294967295,y=S+(b<<22&4294967295|b>>>10),b=v+(S^E&(y^S))+T[1]+4129170786&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[6]+3225465664&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[11]+643717713&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[0]+3921069994&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[5]+3593408605&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[10]+38016083&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[15]+3634488961&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[4]+3889429448&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[9]+568446438&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[14]+3275163606&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[3]+4107603335&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[8]+1163531501&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(S^E&(y^S))+T[13]+2850285829&4294967295,v=y+(b<<5&4294967295|b>>>27),b=E+(y^S&(v^y))+T[2]+4243563512&4294967295,E=v+(b<<9&4294967295|b>>>23),b=S+(v^y&(E^v))+T[7]+1735328473&4294967295,S=E+(b<<14&4294967295|b>>>18),b=y+(E^v&(S^E))+T[12]+2368359562&4294967295,y=S+(b<<20&4294967295|b>>>12),b=v+(y^S^E)+T[5]+4294588738&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[8]+2272392833&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[11]+1839030562&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[14]+4259657740&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[1]+2763975236&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[4]+1272893353&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[7]+4139469664&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[10]+3200236656&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[13]+681279174&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[0]+3936430074&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[3]+3572445317&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[6]+76029189&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(y^S^E)+T[9]+3654602809&4294967295,v=y+(b<<4&4294967295|b>>>28),b=E+(v^y^S)+T[12]+3873151461&4294967295,E=v+(b<<11&4294967295|b>>>21),b=S+(E^v^y)+T[15]+530742520&4294967295,S=E+(b<<16&4294967295|b>>>16),b=y+(S^E^v)+T[2]+3299628645&4294967295,y=S+(b<<23&4294967295|b>>>9),b=v+(S^(y|~E))+T[0]+4096336452&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[7]+1126891415&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[14]+2878612391&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[5]+4237533241&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[12]+1700485571&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[3]+2399980690&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[10]+4293915773&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[1]+2240044497&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[8]+1873313359&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[15]+4264355552&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[6]+2734768916&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[13]+1309151649&4294967295,y=S+(b<<21&4294967295|b>>>11),b=v+(S^(y|~E))+T[4]+4149444226&4294967295,v=y+(b<<6&4294967295|b>>>26),b=E+(y^(v|~S))+T[11]+3174756917&4294967295,E=v+(b<<10&4294967295|b>>>22),b=S+(v^(E|~y))+T[2]+718787259&4294967295,S=E+(b<<15&4294967295|b>>>17),b=y+(E^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+E&4294967295}s.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,T=this.B,S=this.h,E=0;E<v;){if(S==0)for(;E<=y;)r(this,I,E),E+=this.blockSize;if(typeof I=="string"){for(;E<v;)if(T[S++]=I.charCodeAt(E++),S==this.blockSize){r(this,T),S=0;break}}else for(;E<v;)if(T[S++]=I[E++],S==this.blockSize){r(this,T),S=0;break}}this.h=S,this.o+=v},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)I[y++]=this.g[v]>>>T&255;return I};function i(I,v){var y=a;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],T=!0,S=I.length-1;0<=S;S--){var E=I[S]|0;T&&E==v||(y[S]=E,T=!1)}this.g=y}var a={};function u(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return P(c(-I));for(var v=[],y=1,T=0;I>=y;T++)v[T]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),T=d,S=0;S<I.length;S+=8){var E=Math.min(8,I.length-S),b=parseInt(I.substring(S,S+E),v);8>E?(E=c(Math.pow(v,E)),T=T.j(E).add(c(b))):(T=T.j(y),T=T.add(c(b)))}return T}var d=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var v=c(Math.pow(I,6)),y=this,T="";;){var S=q(y,v).g;y=O(y,S.j(v));var E=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=S,w(y))return E+T;for(;6>E.length;)E="0"+E;T=E+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=O(this,I),k(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,y=[],T=0;T<v;T++)y[T]=~I.g[T];return new o(y,~I.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0,S=0;S<=v;S++){var E=T+(this.i(S)&65535)+(I.i(S)&65535),b=(E>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=b>>>16,E&=65535,b&=65535,y[S]=b<<16|E}return new o(y,y[y.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return d;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var E=this.i(T)>>>16,b=this.i(T)&65535,K=I.i(S)>>>16,ne=I.i(S)&65535;y[2*T+2*S]+=b*ne,M(y,2*T+2*S),y[2*T+2*S+1]+=E*ne,M(y,2*T+2*S+1),y[2*T+2*S+1]+=b*K,M(y,2*T+2*S+1),y[2*T+2*S+2]+=E*K,M(y,2*T+2*S+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function M(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function V(I,v){this.g=I,this.h=v}function q(I,v){if(w(v))throw Error("division by zero");if(w(I))return new V(d,d);if(k(I))return v=q(P(I),v),new V(P(v.g),P(v.h));if(k(v))return v=q(I,P(v)),new V(P(v.g),v.h);if(30<I.g.length){if(k(I)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(I);)y=H(y),T=H(T);var S=J(y,1),E=J(T,1);for(T=J(T,2),y=J(y,2);!w(T);){var b=E.add(T);0>=b.l(I)&&(S=S.add(y),E=b),T=J(T,1),y=J(y,1)}return v=O(I,S.j(v)),new V(S,v)}for(S=d;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),E=c(y),b=E.j(v);k(b)||0<b.l(I);)y-=T,E=c(y),b=E.j(v);w(E)&&(E=p),S=S.add(E),I=O(I,b)}return new V(S,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&I.i(T);return new o(y,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|I.i(T);return new o(y,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^I.i(T);return new o(y,this.h^I.h)};function H(I){for(var v=I.g.length+1,y=[],T=0;T<v;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(y,I.h)}function J(I,v){var y=v>>5;v%=32;for(var T=I.g.length-y,S=[],E=0;E<T;E++)S[E]=0<v?I.i(E+y)>>>v|I.i(E+y+1)<<32-v:I.i(E+y);return new o(S,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Y1e=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,zg=o}).apply(typeof Ile<"u"?Ile:typeof self<"u"?self:typeof window<"u"?window:{});var wP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X1e,PI,J1e,qx,WB,Z1e,ePe,tPe;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wP=="object"&&wP];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function r(l,f){if(f)e:{var g=s;l=l.split(".");for(var _=0;_<l.length-1;_++){var x=l[_];if(!(x in g))break e;g=g[x]}l=l[l.length-1],_=g[l],f=f(_),f!=_&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var g=0,_=!1,x={next:function(){if(!_&&g<l.length){var D=g++;return{value:f(D,l[D]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(l){return l||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),l.apply(f,x)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,x,D){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return f.prototype[x].apply(_,z)}}function k(l){const f=l.length;if(0<f){const g=Array(f);for(let _=0;_<f;_++)g[_]=l[_];return g}return[]}function P(l,f){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const x=l.length||0,D=_.length||0;l.length=x+D;for(let z=0;z<D;z++)l[x+z]=_[z]}else l.push(_)}}class O{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function M(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function q(l){return q[" "](l),l}q[" "]=function(){};var H=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function J(l,f,g){for(const _ in l)f.call(g,l[_],_,l)}function I(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function v(l){const f={};for(const g in l)f[g]=l[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(g in _)l[g]=_[g];for(let D=0;D<y.length;D++)g=y[D],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function S(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function E(l){a.setTimeout(()=>{throw l},0)}function b(){var l=Lt;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class K{constructor(){this.h=this.g=null}add(f,g){const _=ne.get();_.set(f,g),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new O(()=>new ae,l=>l.reset());class ae{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,Lt=new K,nt=()=>{const l=a.Promise.resolve(void 0);oe=()=>{l.then(mt)}};var mt=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){E(g)}var f=ne;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}ve=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var fn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Mt(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(H){e:{try{q(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mt.aa.h.call(this)}}w(Mt,we);var Ve={2:"touch",3:"pen",4:"mouse"};Mt.prototype.h=function(){Mt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),Y=0;function G(l,f,g,_,x){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!_,this.ha=x,this.key=++Y,this.da=this.fa=!1}function ee(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function A(l){this.src=l,this.g={},this.h=0}A.prototype.add=function(l,f,g,_,x){var D=l.toString();l=this.g[D],l||(l=this.g[D]=[],this.h++);var z=R(l,f,_,x);return-1<z?(f=l[z],g||(f.fa=!1)):(f=new G(f,this.src,D,!!_,x),f.fa=g,l.push(f)),f};function C(l,f){var g=f.type;if(g in l.g){var _=l.g[g],x=Array.prototype.indexOf.call(_,f,void 0),D;(D=0<=x)&&Array.prototype.splice.call(_,x,1),D&&(ee(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function R(l,f,g,_){for(var x=0;x<l.length;++x){var D=l[x];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==_)return x}return-1}var N="closure_lm_"+(1e6*Math.random()|0),L={};function U(l,f,g,_,x){if(Array.isArray(f)){for(var D=0;D<f.length;D++)U(l,f[D],g,_,x);return null}return g=ie(g),l&&l[F]?l.K(f,g,c(_)?!!_.capture:!1,x):j(l,f,g,!1,_,x)}function j(l,f,g,_,x,D){if(!f)throw Error("Invalid event type");var z=c(x)?!!x.capture:!!x,de=Z(l);if(de||(l[N]=de=new A(l)),g=de.add(f,g,_,z,D),g.proxy)return g;if(_=W(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)fn||(x=z),x===void 0&&(x=!1),l.addEventListener(f.toString(),_,x);else if(l.attachEvent)l.attachEvent(Q(f.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function W(){function l(g){return f.call(l.src,l.listener,g)}const f=X;return l}function $(l,f,g,_,x){if(Array.isArray(f))for(var D=0;D<f.length;D++)$(l,f[D],g,_,x);else _=c(_)?!!_.capture:!!_,g=ie(g),l&&l[F]?(l=l.i,f=String(f).toString(),f in l.g&&(D=l.g[f],g=R(D,g,_,x),-1<g&&(ee(D[g]),Array.prototype.splice.call(D,g,1),D.length==0&&(delete l.g[f],l.h--)))):l&&(l=Z(l))&&(f=l.g[f.toString()],l=-1,f&&(l=R(f,g,_,x)),(g=-1<l?f[l]:null)&&B(g))}function B(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[F])C(f.i,l);else{var g=l.type,_=l.proxy;f.removeEventListener?f.removeEventListener(g,_,l.capture):f.detachEvent?f.detachEvent(Q(g),_):f.addListener&&f.removeListener&&f.removeListener(_),(g=Z(f))?(C(g,l),g.h==0&&(g.src=null,f[N]=null)):ee(l)}}}function Q(l){return l in L?L[l]:L[l]="on"+l}function X(l,f){if(l.da)l=!0;else{f=new Mt(f,this);var g=l.listener,_=l.ha||l.src;l.fa&&B(l),l=g.call(_,f)}return l}function Z(l){return l=l[N],l instanceof A?l:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ie(l){return typeof l=="function"?l:(l[te]||(l[te]=function(f){return l.handleEvent(f)}),l[te])}function re(){Te.call(this),this.i=new A(this),this.M=this,this.F=null}w(re,Te),re.prototype[F]=!0,re.prototype.removeEventListener=function(l,f,g,_){$(this,l,f,g,_)};function se(l,f){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var x=f;f=new we(_,l),T(f,x)}if(x=!0,g)for(var D=g.length-1;0<=D;D--){var z=f.g=g[D];x=be(z,_,!0,f)&&x}if(z=f.g=l,x=be(z,_,!0,f)&&x,x=be(z,_,!1,f)&&x,g)for(D=0;D<g.length;D++)z=f.g=g[D],x=be(z,_,!1,f)&&x}re.prototype.N=function(){if(re.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],_=0;_<g.length;_++)ee(g[_]);delete l.g[f],l.h--}}this.F=null},re.prototype.K=function(l,f,g,_){return this.i.add(String(l),f,!1,g,_)},re.prototype.L=function(l,f,g,_){return this.i.add(String(l),f,!0,g,_)};function be(l,f,g,_){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,D=0;D<f.length;++D){var z=f[D];if(z&&!z.da&&z.capture==g){var de=z.listener,Re=z.ha||z.src;z.fa&&C(l.i,z),x=de.call(Re,_)!==!1&&x}}return x&&!_.defaultPrevented}function Ae(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Ue(l){l.g=Ae(()=>{l.g=null,l.i&&(l.i=!1,Ue(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class tt extends Te{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(l){Te.call(this),this.h=l,this.g={}}w(Ye,Te);var ls=[];function ze(l){J(l.g,function(f,g){this.g.hasOwnProperty(g)&&B(f)},l),l.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),ze(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=a.JSON.stringify,Qn=a.JSON.parse,Fr=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Ii(){}Ii.prototype.h=null;function Ql(l){return l.h||(l.h=l.i())}function Yl(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bo(){we.call(this,"d")}w(Bo,we);function $o(){we.call(this,"c")}w($o,we);var Rn={},Xl=null;function Vr(){return Xl=Xl||new re}Rn.La="serverreachability";function Jl(l){we.call(this,Rn.La,l)}w(Jl,we);function Ls(l){const f=Vr();se(f,new Jl(f))}Rn.STAT_EVENT="statevent";function Zl(l,f){we.call(this,Rn.STAT_EVENT,l),this.stat=f}w(Zl,we);function Le(l){const f=Vr();se(f,new Zl(f,l))}Rn.Ma="timingevent";function eu(l,f){we.call(this,Rn.Ma,l),this.size=f}w(eu,we);function Ms(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Fs(){this.g=!0}Fs.prototype.xa=function(){this.g=!1};function v_(l,f,g,_,x,D){l.info(function(){if(l.g)if(D)for(var z="",de=D.split("&"),Re=0;Re<de.length;Re++){var le=de[Re].split("=");if(1<le.length){var Oe=le[0];le=le[1];var Fe=Oe.split("_");z=2<=Fe.length&&Fe[1]=="type"?z+(Oe+"="+le+"&"):z+(Oe+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+f+`
`+g+`
`+z})}function w_(l,f,g,_,x,D,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+f+`
`+g+`
`+D+" "+z})}function Yn(l,f,g,_){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+E_(l,g)+(_?" "+_:"")})}function b_(l,f){l.info(function(){return"TIMEOUT: "+f})}Fs.prototype.info=function(){};function E_(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var D=x[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<x.length;z++)x[z]=""}}}}return Me(g)}catch{return f}}var Ur={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zo;function qr(){}w(qr,Ii),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},zo=new qr;function pn(l,f,g,_){this.j=l,this.i=f,this.l=g,this.R=_||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nu}function nu(){this.i=null,this.g="",this.h=!1}var su={},Ho={};function Wo(l,f,g){l.L=1,l.v=zr(Ut(f)),l.m=g,l.P=!0,ru(l,null)}function ru(l,f){l.F=Date.now(),jr(l),l.A=Ut(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),yu(g.i,"t",_),l.C=0,g=l.j.J,l.h=new nu,l.g=Mu(l.j,g?f:null,!l.m),0<l.O&&(l.M=new tt(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,_=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(ls[0]=x.toString()),x=ls);for(var D=0;D<x.length;D++){var z=U(g,x[D],_||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ls(),v_(l.i,l.u,l.A,l.l,l.R,l.m)}pn.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},pn.prototype.Y=function(l){try{if(l==this.g)e:{const Fe=qt(this.g);var f=this.g.Ba();const Zn=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Fe!=4||f==7||(f==8||0>=Zn?Ls(3):Ls(2)),Ko(this);var g=this.g.Z();this.X=g;t:if(iu(this)){var _=Iu(this.g);l="";var x=_.length,D=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Vs(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,l+=this.h.i.decode(_[f],{stream:!(D&&f==x-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,w_(this.i,this.u,this.A,this.l,this.R,Fe,g),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Re=this.g;if((de=Re.g?Re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(de)){var le=de;break t}}le=null}if(g=le)Yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Go(this,g);else{this.o=!1,this.s=3,Le(12),Pn(this),Vs(this);break e}}if(this.P){g=!0;let yt;for(;!this.J&&this.C<z.length;)if(yt=T_(this,z),yt==Ho){Fe==4&&(this.s=4,Le(14),g=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==su){this.s=4,Le(15),Yn(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Yn(this.i,this.l,yt,null),Go(this,yt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||z.length!=0||this.h.h||(this.s=1,Le(16),g=!1),this.o=this.o&&g,!g)Yn(this.i,this.l,z,"[Invalid Chunked Response]"),Pn(this),Vs(this);else if(0<z.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ea(Oe),Oe.M=!0,Le(11))}}else Yn(this.i,this.l,z,null),Go(this,z);Fe==4&&Pn(this),this.o&&!this.J&&(Fe==4?Nu(this.j,this):(this.o=!1,jr(this)))}else q_(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Pn(this),Vs(this)}}}catch{}finally{}};function iu(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function T_(l,f){var g=l.C,_=f.indexOf(`
`,g);return _==-1?Ho:(g=Number(f.substring(g,_)),isNaN(g)?su:(_+=1,_+g>f.length?Ho:(f=f.slice(_,_+g),l.C=_+g,f)))}pn.prototype.cancel=function(){this.J=!0,Pn(this)};function jr(l){l.S=Date.now()+l.I,ou(l,l.I)}function ou(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ms(p(l.ba,l),f)}function Ko(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(b_(this.i,this.A),this.L!=2&&(Ls(),Le(17)),Pn(this),this.s=2,Vs(this)):ou(this,this.S-l)};function Vs(l){l.j.G==0||l.J||Nu(l.j,l)}function Pn(l){Ko(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,ze(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Go(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Qo(g.h,l))){if(!l.K&&Qo(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Yr(g),Gr(g);else break e;Zo(g),Le(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=Ms(p(g.Za,g),6e3));if(1>=uu(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Nn(g,11)}else if((l.K||g.g==l)&&Yr(g),!M(f))for(x=g.Da.g.parse(f),f=0;f<x.length;f++){let le=x[f];if(g.T=le[0],le=le[1],g.G==2)if(le[0]=="c"){g.K=le[1],g.ia=le[2];const Oe=le[3];Oe!=null&&(g.la=Oe,g.j.info("VER="+g.la));const Fe=le[4];Fe!=null&&(g.Aa=Fe,g.j.info("SVER="+g.Aa));const Zn=le[5];Zn!=null&&typeof Zn=="number"&&0<Zn&&(_=1.5*Zn,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const yt=l.g;if(yt){const Jr=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jr){var D=_.h;D.g||Jr.indexOf("spdy")==-1&&Jr.indexOf("quic")==-1&&Jr.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Yo(D,D.h),D.h=null))}if(_.D){const ta=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(_.ya=ta,fe(_.I,_.D,ta))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=l;if(_.qa=Lu(_,_.J?_.ia:null,_.W),z.K){cu(_.h,z);var de=z,Re=_.L;Re&&(de.I=Re),de.B&&(Ko(de),jr(de)),_.g=z}else Pu(_);0<g.i.length&&Qr(g)}else le[0]!="stop"&&le[0]!="close"||Nn(g,7);else g.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Nn(g,7):Jo(g):le[0]!="noop"&&g.l&&g.l.ta(le),g.v=0)}}Ls(4)}catch{}}var C_=class{constructor(l,f){this.g=l,this.map=f}};function au(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lu(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function uu(l){return l.h?1:l.g?l.g.size:0}function Qo(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Yo(l,f){l.g?l.g.add(f):l.h=f}function cu(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}au.prototype.cancel=function(){if(this.i=hu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hu(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return k(l.i)}function I_(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,_=0;_<g;_++)f.push(l[_]);return f}f=[],g=0;for(_ in l)f[g++]=l[_];return f}function S_(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const _ in l)f[g++]=_;return f}}}function du(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=S_(l),_=I_(l),x=_.length,D=0;D<x;D++)f.call(void 0,_[D],g&&g[D],l)}var fu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k_(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),x=null;if(0<=_){var D=l[g].substring(0,_);x=l[g].substring(_+1)}else D=l[g];f(D,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function xn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof xn){this.h=l.h,Br(this,l.j),this.o=l.o,this.g=l.g,$r(this,l.s),this.l=l.l;var f=l.i,g=new js;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),pu(this,g),this.m=l.m}else l&&(f=String(l).match(fu))?(this.h=!1,Br(this,f[1]||"",!0),this.o=Us(f[2]||""),this.g=Us(f[3]||"",!0),$r(this,f[4]),this.l=Us(f[5]||"",!0),pu(this,f[6]||"",!0),this.m=Us(f[7]||"")):(this.h=!1,this.i=new js(null,this.h))}xn.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qs(f,gu,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qs(f,gu,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(qs(g,g.charAt(0)=="/"?P_:R_,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",qs(g,N_)),l.join("")};function Ut(l){return new xn(l)}function Br(l,f,g){l.j=g?Us(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function $r(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function pu(l,f,g){f instanceof js?(l.i=f,D_(l.i,l.h)):(g||(f=qs(f,x_)),l.i=new js(f,l.h))}function fe(l,f,g){l.i.set(f,g)}function zr(l){return fe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Us(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,A_),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function A_(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gu=/[#\/\?@]/g,R_=/[#\?:]/g,P_=/[#\?]/g,x_=/[#\?@]/g,N_=/#/g;function js(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function gn(l){l.g||(l.g=new Map,l.h=0,l.i&&k_(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=js.prototype,t.add=function(l,f){gn(this),this.i=null,l=Xn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function mu(l,f){gn(l),f=Xn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function _u(l,f){return gn(l),f=Xn(l,f),l.g.has(f)}t.forEach=function(l,f){gn(this),this.g.forEach(function(g,_){g.forEach(function(x){l.call(f,x,_,this)},this)},this)},t.na=function(){gn(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let _=0;_<f.length;_++){const x=l[_];for(let D=0;D<x.length;D++)g.push(f[_])}return g},t.V=function(l){gn(this);let f=[];if(typeof l=="string")_u(this,l)&&(f=f.concat(this.g.get(Xn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return gn(this),this.i=null,l=Xn(this,l),_u(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function yu(l,f,g){mu(l,f),0<g.length&&(l.i=null,l.g.set(Xn(l,f),k(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var _=f[g];const D=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var x=D;z[_]!==""&&(x+="="+encodeURIComponent(String(z[_]))),l.push(x)}}return this.i=l.join("&")};function Xn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function D_(l,f){f&&!l.j&&(gn(l),l.i=null,l.g.forEach(function(g,_){var x=_.toLowerCase();_!=x&&(mu(this,_),yu(this,x,g))},l)),l.j=f}function O_(l,f){const g=new Fs;if(a.Image){const _=new Image;_.onload=m(mn,g,"TestLoadImage: loaded",!0,f,_),_.onerror=m(mn,g,"TestLoadImage: error",!1,f,_),_.onabort=m(mn,g,"TestLoadImage: abort",!1,f,_),_.ontimeout=m(mn,g,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else f(!1)}function L_(l,f){const g=new Fs,_=new AbortController,x=setTimeout(()=>{_.abort(),mn(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:_.signal}).then(D=>{clearTimeout(x),D.ok?mn(g,"TestPingServer: ok",!0,f):mn(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),mn(g,"TestPingServer: error",!1,f)})}function mn(l,f,g,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(g)}catch{}}function M_(){this.g=new Fr}function F_(l,f,g){const _=g||"";try{du(l,function(x,D){let z=x;c(x)&&(z=Me(x)),f.push(_+D+"="+encodeURIComponent(z))})}catch(x){throw f.push(_+"type="+encodeURIComponent("_badmap")),x}}function Hr(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Hr,Ii),Hr.prototype.g=function(){return new Wr(this.l,this.j)},Hr.prototype.i=function(l){return function(){return l}}({});function Wr(l,f){re.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wr,re),t=Wr.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,$s(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Bs(this):$s(this),this.readyState==3&&vu(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bs(this))},t.Qa=function(l){this.g&&(this.response=l,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$s(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function $s(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function wu(l){let f="";return J(l,function(g,_){f+=_,f+=":",f+=g,f+=`\r
`}),f}function Xo(l,f,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=wu(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):fe(l,f,g))}function Ee(l){re.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ee,re);var V_=/^https?$/i,U_=["POST","PUT"];t=Ee.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zo.g(),this.v=this.o?Ql(this.o):Ql(zo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(D){bu(this,D);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)g.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const D of _.keys())g.set(D,_.get(D));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U_,f,void 0))||_||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cu(this),this.u=!0,this.g.send(l),this.u=!1}catch(D){bu(this,D)}};function bu(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Eu(l),Kr(l)}function Eu(l){l.A||(l.A=!0,se(l,"complete"),se(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,se(this,"complete"),se(this,"abort"),Kr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kr(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(l){if(l.h&&typeof o<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)Ae(l.Ea,0,l);else if(se(l,"readystatechange"),qt(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var _;if(_=z===0){var x=String(l.D).match(fu)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!V_.test(x?x.toLowerCase():"")}g=_}if(g)se(l,"complete"),se(l,"success");else{l.m=6;try{var D=2<qt(l)?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.Z()+"]",Eu(l)}}finally{Kr(l)}}}}function Kr(l,f){if(l.g){Cu(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||se(l,"ready");try{g.onreadystatechange=_}catch{}}}function Cu(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Qn(f)}};function Iu(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function q_(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(M(l[_]))continue;var g=S(l[_]);const x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[x]||[];f[x]=D,D.push(g)}I(f,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Su(l){this.Aa=0,this.i=[],this.j=new Fs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,l),this.cb=zs("retryDelaySeedMs",1e4,l),this.Wa=zs("forwardChannelMaxRetries",2,l),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new au(l&&l.concurrentRequestLimit),this.Da=new M_,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,_){Le(0),this.W=l,this.H=f||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Lu(this,null,this.W),Qr(this)};function Jo(l){if(ku(l),l.G==3){var f=l.U++,g=Ut(l.I);if(fe(g,"SID",l.K),fe(g,"RID",f),fe(g,"TYPE","terminate"),Hs(l,g),f=new pn(l,l.j,f),f.L=2,f.v=zr(Ut(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Mu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),jr(f)}Ou(l)}function Gr(l){l.g&&(ea(l),l.g.cancel(),l.g=null)}function ku(l){Gr(l),l.u&&(a.clearTimeout(l.u),l.u=null),Yr(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Qr(l){if(!lu(l.h)&&!l.s){l.s=!0;var f=l.Ga;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.B=0}}function j_(l,f){return uu(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ms(p(l.Ga,l,f),Du(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const x=new pn(this,this.j,l);let D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(x.H=D,D=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ru(this,x,f),g=Ut(this.I),fe(g,"RID",l),fe(g,"CVER",22),this.D&&fe(g,"X-HTTP-Session-Id",this.D),Hs(this,g),D&&(this.O?f="headers="+encodeURIComponent(String(wu(D)))+"&"+f:this.m&&Xo(g,this.m,D)),Yo(this.h,x),this.Ua&&fe(g,"TYPE","init"),this.P?(fe(g,"$req",f),fe(g,"SID","null"),x.T=!0,Wo(x,g,null)):Wo(x,g,f),this.G=2}}else this.G==3&&(l?Au(this,l):this.i.length==0||lu(this.h)||Au(this))};function Au(l,f){var g;f?g=f.l:g=l.U++;const _=Ut(l.I);fe(_,"SID",l.K),fe(_,"RID",g),fe(_,"AID",l.T),Hs(l,_),l.m&&l.o&&Xo(_,l.m,l.o),g=new pn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Ru(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Yo(l.h,g),Wo(g,_,f)}function Hs(l,f){l.H&&J(l.H,function(g,_){fe(f,_,g)}),l.l&&du({},function(g,_){fe(f,_,g)})}function Ru(l,f,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var x=l.i;let D=-1;for(;;){const z=["count="+g];D==-1?0<g?(D=x[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let de=!0;for(let Re=0;Re<g;Re++){let le=x[Re].g;const Oe=x[Re].map;if(le-=D,0>le)D=Math.max(0,x[Re].g-100),de=!1;else try{F_(Oe,z,"req"+le+"_")}catch{_&&_(Oe)}}if(de){_=z.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,_}function Pu(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;oe||nt(),ve||(oe(),ve=!0),Lt.add(f,l),l.v=0}}function Zo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ms(p(l.Fa,l),Du(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ms(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Gr(this),xu(this))};function ea(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function xu(l){l.g=new pn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ut(l.qa);fe(f,"RID","rpc"),fe(f,"SID",l.K),fe(f,"AID",l.T),fe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&fe(f,"TO",l.ja),fe(f,"TYPE","xmlhttp"),Hs(l,f),l.m&&l.o&&Xo(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=zr(Ut(f)),g.m=null,g.P=!0,ru(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Gr(this),Zo(this),Le(19))};function Yr(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Nu(l,f){var g=null;if(l.g==f){Yr(l),ea(l),l.g=null;var _=2}else if(Qo(l.h,f))g=f.D,cu(l.h,f),_=1;else return;if(l.G!=0){if(f.o)if(_==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var x=l.B;_=Vr(),se(_,new eu(_,g)),Qr(l)}else Pu(l);else if(x=f.s,x==3||x==0&&0<f.X||!(_==1&&j_(l,f)||_==2&&Zo(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),x){case 1:Nn(l,5);break;case 4:Nn(l,10);break;case 3:Nn(l,6);break;default:Nn(l,2)}}}function Du(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function Nn(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),_=l.Xa;const x=!_;_=new xn(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Br(_,"https"),zr(_),x?O_(_.toString(),g):L_(_.toString(),g)}else Le(2);l.G=0,l.l&&l.l.sa(f),Ou(l),ku(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ou(l){if(l.G=0,l.ka=[],l.l){const f=hu(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Lu(l,f,g){var _=g instanceof xn?Ut(g):new xn(g);if(_.g!="")f&&(_.g=f+"."+_.g),$r(_,_.s);else{var x=a.location;_=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var D=new xn(null);_&&Br(D,_),f&&(D.g=f),x&&$r(D,x),g&&(D.l=g),_=D}return g=l.D,f=l.ya,g&&f&&fe(_,g,f),fe(_,"VER",l.la),Hs(l,_),_}function Mu(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ee(new Hr({eb:g})):new Ee(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}t=Fu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xr(){}Xr.prototype.g=function(l,f){return new We(l,f)};function We(l,f){re.call(this),this.g=new Su(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!M(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!M(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Jn(this)}w(We,re),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Jo(this.g)},We.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Me(l),l=g);f.i.push(new C_(f.Ya++,l)),f.G==3&&Qr(f)},We.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,We.aa.N.call(this)};function Vu(l){Bo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(Vu,Bo);function Uu(){$o.call(this),this.status=1}w(Uu,$o);function Jn(l){this.g=l}w(Jn,Fu),Jn.prototype.ua=function(){se(this.g,"a")},Jn.prototype.ta=function(l){se(this.g,new Vu(l))},Jn.prototype.sa=function(l){se(this.g,new Uu)},Jn.prototype.ra=function(){se(this.g,"b")},Xr.prototype.createWebChannel=Xr.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,tPe=function(){return new Xr},ePe=function(){return Vr()},Z1e=Rn,WB={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,qx=Ur,tu.COMPLETE="complete",J1e=tu,Yl.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",re.prototype.listen=re.prototype.K,PI=Yl,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,X1e=Ee}).apply(typeof wP<"u"?wP:typeof self<"u"?self:typeof window<"u"?window:{});const Sle="@firebase/firestore",kle="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vo.UNAUTHENTICATED=new vo(null),vo.GOOGLE_CREDENTIALS=new vo("google-credentials-uid"),vo.FIRST_PARTY=new vo("first-party-uid"),vo.MOCK_USER=new vo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gC="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new d4("@firebase/firestore");function pb(){return Wv.logLevel}function De(t,...e){if(Wv.logLevel<=Qt.DEBUG){const n=e.map(tQ);Wv.debug(`Firestore (${gC}): ${t}`,...n)}}function ep(t,...e){if(Wv.logLevel<=Qt.ERROR){const n=e.map(tQ);Wv.error(`Firestore (${gC}): ${t}`,...n)}}function gT(t,...e){if(Wv.logLevel<=Qt.WARN){const n=e.map(tQ);Wv.warn(`Firestore (${gC}): ${t}`,...n)}}function tQ(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,nPe(t,s,n)}function nPe(t,e,n){let s=`FIRESTORE (${gC}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ep(s),new Error(s)}function zn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||nPe(e,r,s)}function Ot(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends Sd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sPe{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _St{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vo.UNAUTHENTICATED))}shutdown(){}}class ySt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vSt{constructor(e){this.t=e,this.currentUser=vo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zn(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new Hg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hg,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},a=u=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hg)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(zn(typeof s.accessToken=="string",31837,{l:s}),new sPe(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zn(e===null||typeof e=="string",2055,{h:e}),new vo(e)}}class wSt{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=vo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bSt{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new wSt(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ale{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ESt{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ol(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zn(this.o===void 0,3512);const s=i=>{i.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,De("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ale(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(zn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ale(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TSt(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=TSt(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function rn(t,e){return t<e?-1:t>e?1:0}function KB(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return D9(r)===D9(i)?rn(r,i):D9(r)?1:-1}return rn(t.length,e.length)}const CSt=55296,ISt=57343;function D9(t){const e=t.charCodeAt(0);return e>=CSt&&e<=ISt}function mT(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rle="__name__";class gh{constructor(e,n,s){n===void 0?n=0:n>e.length&&ht(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ht(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return gh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=gh.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return rn(e.length,n.length)}static compareSegments(e,n){const s=gh.isNumericId(e),r=gh.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?gh.extractNumericId(e).compare(gh.extractNumericId(n)):KB(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zg.fromString(e.substring(4,e.length-2))}}class Gs extends gh{construct(e,n,s){return new Gs(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new $e(_e.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new Gs(n)}static emptyPath(){return new Gs([])}}const SSt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends gh{construct(e,n,s){return new Yi(e,n,s)}static isValidIdentifier(e){return SSt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rle}static keyField(){return new Yi([Rle])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new $e(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new $e(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $e(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new $e(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(n)}static emptyPath(){return new Yi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(Gs.fromString(e))}static fromName(e){return new et(Gs.fromString(e).popFirst(5))}static empty(){return new et(Gs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gs.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gs.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new Gs(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kSt(t,e,n){if(!n)throw new $e(_e.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ASt(t,e,n,s){if(e===!0&&s===!0)throw new $e(_e.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ple(t){if(!et.isDocumentKey(t))throw new $e(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rPe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sQ(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ht(12329,{type:typeof t})}function Fc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $e(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sQ(t);throw new $e(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){const n={typeString:t};return e&&(n.value=e),n}function l1(t,e){if(!rPe(t))throw new $e(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new $e(_e.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xle=-62135596800,Nle=1e6;class As{static now(){return As.fromMillis(Date.now())}static fromDate(e){return As.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Nle);return new As(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $e(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xle)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nle}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:As._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(l1(e,As._jsonSchema))return new As(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xle;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}As._jsonSchemaVersion="firestore/timestamp/1.0",As._jsonSchema={type:Ar("string",As._jsonSchemaVersion),seconds:Ar("number"),nanoseconds:Ar("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(e){return new St(e)}static min(){return new St(new As(0,0))}static max(){return new St(new As(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=-1;function RSt(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=St.fromTimestamp(s===1e9?new As(n+1,0):new As(n,s));return new zm(r,et.empty(),e)}function PSt(t){return new zm(t.readTime,t.key,gA)}class zm{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new zm(St.min(),et.empty(),gA)}static max(){return new zm(St.max(),et.empty(),gA)}}function xSt(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(t.documentKey,e.documentKey),n!==0?n:rn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NSt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DSt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(t){if(t.code!==_e.FAILED_PRECONDITION||t.message!==NSt)throw t;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,s)=>{n(e)})}static reject(e){return new he((n,s)=>{s(e)})}static waitFor(e){return new he((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},u=>s(u))}),o=!0,i===r&&n()})}static or(e){let n=he.resolve(!1);for(const s of e)n=n.next(r=>r?he.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new he((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&s(o)},h=>r(h))}})}static doWhile(e,n){return new he((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function OSt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _C(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_4.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ=-1;function y4(t){return t==null}function tL(t){return t===0&&1/t==-1/0}function LSt(t){return typeof t=="number"&&Number.isInteger(t)&&!tL(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iPe="";function MSt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Dle(e)),e=FSt(t.get(n),e);return Dle(e)}function FSt(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case iPe:n+="";break;default:n+=i}}return n}function Dle(t){return t+iPe+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ole(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function __(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oPe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Or=class GB{constructor(e,n){this.comparator=e,this.root=n||Wg.EMPTY}insert(e,n){return new GB(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wg.BLACK,null,null))}remove(e){return new GB(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wg.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bP(this.root,e,this.comparator,!1)}getReverseIterator(){return new bP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bP(this.root,e,this.comparator,!0)}},bP=class{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wg=class Vd{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Vd.RED,this.left=r??Vd.EMPTY,this.right=i??Vd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Vd(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Vd.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ht(27949);return e+(this.isRed()?0:1)}};Wg.EMPTY=null,Wg.RED=!0,Wg.BLACK=!1;Wg.EMPTY=new class{constructor(){this.size=0}get key(){throw ht(57766)}get value(){throw ht(16141)}get color(){throw ht(16727)}get left(){throw ht(29726)}get right(){throw ht(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Wg(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lle(this.data.getIterator())}getIteratorFrom(e){return new Lle(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof wi)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wi(this.comparator);return n.data=e,n}}class Lle{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.fields=e,e.sort(Yi.comparator)}static empty(){return new _l([])}unionWith(e){let n=new wi(Yi.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new _l(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mT(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aPe("Invalid base64 string: "+i):i}}(e);return new no(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new no(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}no.EMPTY_BYTE_STRING=new no("");const VSt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hm(t){if(zn(!!t,39018),typeof t=="string"){let e=0;const n=VSt.exec(t);if(zn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yr(t.seconds),nanos:yr(t.nanos)}}function yr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wm(t){return typeof t=="string"?no.fromBase64String(t):no.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lPe="server_timestamp",uPe="__type__",cPe="__previous_value__",hPe="__local_write_time__";function iQ(t){return(t?.mapValue?.fields||{})[uPe]?.stringValue===lPe}function v4(t){const e=t.mapValue.fields[cPe];return iQ(e)?v4(e):e}function mA(t){const e=Hm(t.mapValue.fields[hPe].timestampValue);return new As(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class USt{constructor(e,n,s,r,i,o,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const nL="(default)";class _A{constructor(e,n){this.projectId=e,this.database=n||nL}static empty(){return new _A("","")}get isDefaultDatabase(){return this.database===nL}isEqual(e){return e instanceof _A&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dPe="__type__",qSt="__max__",EP={mapValue:{}},fPe="__vector__",sL="value";function Km(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iQ(t)?4:BSt(t)?9007199254740991:jSt(t)?10:11:ht(28295,{value:t})}function gd(t,e){if(t===e)return!0;const n=Km(t);if(n!==Km(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mA(t).isEqual(mA(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Hm(r.timestampValue),a=Hm(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Wm(r.bytesValue).isEqual(Wm(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return yr(r.geoPointValue.latitude)===yr(i.geoPointValue.latitude)&&yr(r.geoPointValue.longitude)===yr(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return yr(r.integerValue)===yr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=yr(r.doubleValue),a=yr(i.doubleValue);return o===a?tL(o)===tL(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return mT(t.arrayValue.values||[],e.arrayValue.values||[],gd);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(Ole(o)!==Ole(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gd(o[u],a[u])))return!1;return!0}(t,e);default:return ht(52216,{left:t})}}function yA(t,e){return(t.values||[]).find(n=>gd(n,e))!==void 0}function _T(t,e){if(t===e)return 0;const n=Km(t),s=Km(e);if(n!==s)return rn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=yr(i.integerValue||i.doubleValue),u=yr(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Mle(t.timestampValue,e.timestampValue);case 4:return Mle(mA(t),mA(e));case 5:return KB(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Wm(i),u=Wm(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=rn(a[c],u[c]);if(h!==0)return h}return rn(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=rn(yr(i.latitude),yr(o.latitude));return a!==0?a:rn(yr(i.longitude),yr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fle(t.arrayValue,e.arrayValue);case 10:return function(i,o){const a=i.fields||{},u=o.fields||{},c=a[sL]?.arrayValue,h=u[sL]?.arrayValue,d=rn(c?.values?.length||0,h?.values?.length||0);return d!==0?d:Fle(c,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===EP.mapValue&&o===EP.mapValue)return 0;if(i===EP.mapValue)return 1;if(o===EP.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const p=KB(u[d],h[d]);if(p!==0)return p;const m=_T(a[u[d]],c[h[d]]);if(m!==0)return m}return rn(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ht(23264,{he:n})}}function Mle(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rn(t,e);const n=Hm(t),s=Hm(e),r=rn(n.seconds,s.seconds);return r!==0?r:rn(n.nanos,s.nanos)}function Fle(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=_T(n[r],s[r]);if(i)return i}return rn(n.length,s.length)}function yT(t){return QB(t)}function QB(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Hm(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wm(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return et.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=QB(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${QB(n.fields[o])}`;return r+"}"}(t.mapValue):ht(61005,{value:t})}function jx(t){switch(Km(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=v4(t);return e?16+jx(e):16;case 5:return 2*t.stringValue.length;case 6:return Wm(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+jx(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return __(s.fields,(i,o)=>{r+=i.length+jx(o)}),r}(t.mapValue);default:throw ht(13486,{value:t})}}function YB(t){return!!t&&"integerValue"in t}function oQ(t){return!!t&&"arrayValue"in t}function Vle(t){return!!t&&"nullValue"in t}function Ule(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bx(t){return!!t&&"mapValue"in t}function jSt(t){return(t?.mapValue?.fields||{})[dPe]?.stringValue===fPe}function cS(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return __(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=cS(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cS(t.arrayValue.values[n]);return e}return{...t}}function BSt(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===qSt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.value=e}static empty(){return new ja({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cS(n)}setAll(e){let n=Yi.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=cS(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Bx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gd(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Bx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){__(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new ja(cS(this.value))}}function pPe(t){const e=[];return __(t.fields,(n,s)=>{const r=new Yi([n]);if(Bx(s)){const i=pPe(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new _l(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Po(e,0,St.min(),St.min(),St.min(),ja.empty(),0)}static newFoundDocument(e,n,s,r){return new Po(e,1,n,St.min(),s,r,0)}static newNoDocument(e,n){return new Po(e,2,n,St.min(),St.min(),ja.empty(),0)}static newUnknownDocument(e,n){return new Po(e,3,n,St.min(),St.min(),ja.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ja.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ja.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Po&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Po(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n){this.position=e,this.inclusive=n}}function qle(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=et.comparator(et.fromName(o.referenceValue),n.key):s=_T(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function jle(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gd(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n="asc"){this.field=e,this.dir=n}}function $St(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gPe{}class gi extends gPe{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new HSt(e,n,s):n==="array-contains"?new GSt(e,s):n==="in"?new QSt(e,s):n==="not-in"?new YSt(e,s):n==="array-contains-any"?new XSt(e,s):new gi(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new WSt(e,s):new KSt(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_T(n,this.value)):n!==null&&Km(this.value)===Km(n)&&this.matchesComparison(_T(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class md extends gPe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new md(e,n)}matches(e){return mPe(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mPe(t){return t.op==="and"}function _Pe(t){return zSt(t)&&mPe(t)}function zSt(t){for(const e of t.filters)if(e instanceof md)return!1;return!0}function XB(t){if(t instanceof gi)return t.field.canonicalString()+t.op.toString()+yT(t.value);if(_Pe(t))return t.filters.map(e=>XB(e)).join(",");{const e=t.filters.map(n=>XB(n)).join(",");return`${t.op}(${e})`}}function yPe(t,e){return t instanceof gi?function(s,r){return r instanceof gi&&s.op===r.op&&s.field.isEqual(r.field)&&gd(s.value,r.value)}(t,e):t instanceof md?function(s,r){return r instanceof md&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&yPe(o,r.filters[a]),!0):!1}(t,e):void ht(19439)}function vPe(t){return t instanceof gi?function(n){return`${n.field.canonicalString()} ${n.op} ${yT(n.value)}`}(t):t instanceof md?function(n){return n.op.toString()+" {"+n.getFilters().map(vPe).join(" ,")+"}"}(t):"Filter"}class HSt extends gi{constructor(e,n,s){super(e,n,s),this.key=et.fromName(s.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class WSt extends gi{constructor(e,n){super(e,"in",n),this.keys=wPe("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KSt extends gi{constructor(e,n){super(e,"not-in",n),this.keys=wPe("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wPe(t,e){return(e.arrayValue?.values||[]).map(n=>et.fromName(n.referenceValue))}class GSt extends gi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oQ(n)&&yA(n.arrayValue,this.value)}}class QSt extends gi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yA(this.value.arrayValue,n)}}class YSt extends gi{constructor(e,n){super(e,"not-in",n)}matches(e){if(yA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yA(this.value.arrayValue,n)}}class XSt extends gi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oQ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>yA(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JSt{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Ble(t,e=null,n=[],s=[],r=null,i=null,o=null){return new JSt(t,e,n,s,r,i,o)}function aQ(t){const e=Ot(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>XB(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),y4(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>yT(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>yT(s)).join(",")),e.Te=n}return e.Te}function lQ(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$St(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yPe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jle(t.startAt,e.startAt)&&jle(t.endAt,e.endAt)}function JB(t){return et.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZSt(t,e,n,s,r,i,o,a){return new w4(t,e,n,s,r,i,o,a)}function b4(t){return new w4(t)}function $le(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ekt(t){return t.collectionGroup!==null}function hS(t){const e=Ot(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new wi(Yi.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new iL(i,s))}),n.has(Yi.keyField().canonicalString())||e.Ie.push(new iL(Yi.keyField(),s))}return e.Ie}function Gh(t){const e=Ot(t);return e.Ee||(e.Ee=tkt(e,hS(t))),e.Ee}function tkt(t,e){if(t.limitType==="F")return Ble(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new iL(r.field,i)});const n=t.endAt?new rL(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new rL(t.startAt.position,t.startAt.inclusive):null;return Ble(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ZB(t,e,n){return new w4(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function E4(t,e){return lQ(Gh(t),Gh(e))&&t.limitType===e.limitType}function bPe(t){return`${aQ(Gh(t))}|lt:${t.limitType}`}function gb(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>vPe(r)).join(", ")}]`),y4(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>yT(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>yT(r)).join(",")),`Target(${s})`}(Gh(t))}; limitType=${t.limitType})`}function T4(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):et.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of hS(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,u){const c=qle(o,a,u);return o.inclusive?c<=0:c<0}(s.startAt,hS(s),r)||s.endAt&&!function(o,a,u){const c=qle(o,a,u);return o.inclusive?c>=0:c>0}(s.endAt,hS(s),r))}(t,e)}function nkt(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EPe(t){return(e,n)=>{let s=!1;for(const r of hS(t)){const i=skt(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function skt(t,e,n){const s=t.field.isKeyField()?et.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?_T(u,c):ht(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ht(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){__(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return oPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rkt=new Or(et.comparator);function tp(){return rkt}const TPe=new Or(et.comparator);function xI(...t){let e=TPe;for(const n of t)e=e.insert(n.key,n);return e}function CPe(t){let e=TPe;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function qy(){return dS()}function IPe(){return dS()}function dS(){return new yw(t=>t.toString(),(t,e)=>t.isEqual(e))}const ikt=new Or(et.comparator),okt=new wi(et.comparator);function dn(...t){let e=okt;for(const n of t)e=e.add(n);return e}const akt=new wi(rn);function lkt(){return akt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uQ(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tL(e)?"-0":e}}function SPe(t){return{integerValue:""+t}}function ukt(t,e){return LSt(e)?SPe(e):uQ(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this._=void 0}}function ckt(t,e,n){return t instanceof vA?function(r,i){const o={fields:{[uPe]:{stringValue:lPe},[hPe]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&iQ(i)&&(i=v4(i)),i&&(o.fields[cPe]=i),{mapValue:o}}(n,e):t instanceof wA?APe(t,e):t instanceof bA?RPe(t,e):function(r,i){const o=kPe(r,i),a=zle(o)+zle(r.Ae);return YB(o)&&YB(r.Ae)?SPe(a):uQ(r.serializer,a)}(t,e)}function hkt(t,e,n){return t instanceof wA?APe(t,e):t instanceof bA?RPe(t,e):n}function kPe(t,e){return t instanceof oL?function(s){return YB(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class vA extends C4{}class wA extends C4{constructor(e){super(),this.elements=e}}function APe(t,e){const n=PPe(e);for(const s of t.elements)n.some(r=>gd(r,s))||n.push(s);return{arrayValue:{values:n}}}class bA extends C4{constructor(e){super(),this.elements=e}}function RPe(t,e){let n=PPe(e);for(const s of t.elements)n=n.filter(r=>!gd(r,s));return{arrayValue:{values:n}}}class oL extends C4{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zle(t){return yr(t.integerValue||t.doubleValue)}function PPe(t){return oQ(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dkt{constructor(e,n){this.field=e,this.transform=n}}function fkt(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof wA&&r instanceof wA||s instanceof bA&&r instanceof bA?mT(s.elements,r.elements,gd):s instanceof oL&&r instanceof oL?gd(s.Ae,r.Ae):s instanceof vA&&r instanceof vA}(t.transform,e.transform)}class pkt{constructor(e,n){this.version=e,this.transformResults=n}}class Vc{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vc}static exists(e){return new Vc(void 0,e)}static updateTime(e){return new Vc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $x(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class I4{}function xPe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cQ(t.key,Vc.none()):new u1(t.key,t.data,Vc.none());{const n=t.data,s=ja.empty();let r=new wi(Yi.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new y_(t.key,s,new _l(r.toArray()),Vc.none())}}function gkt(t,e,n){t instanceof u1?function(r,i,o){const a=r.value.clone(),u=Wle(r.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof y_?function(r,i,o){if(!$x(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Wle(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(NPe(r)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fS(t,e,n,s){return t instanceof u1?function(i,o,a,u){if(!$x(i.precondition,o))return a;const c=i.value.clone(),h=Kle(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof y_?function(i,o,a,u){if(!$x(i.precondition,o))return a;const c=Kle(i.fieldTransforms,u,o),h=o.data;return h.setAll(NPe(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,s):function(i,o,a){return $x(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function mkt(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=kPe(s.transform,r||null);i!=null&&(n===null&&(n=ja.empty()),n.set(s.field,i))}return n||null}function Hle(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&mT(s,r,(i,o)=>fkt(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class u1 extends I4{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class y_ extends I4{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function NPe(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Wle(t,e,n){const s=new Map;zn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,hkt(o,a,n[r]))}return s}function Kle(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,ckt(i,o,e))}return s}class cQ extends I4{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _kt extends I4{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ykt{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&gkt(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=fS(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=fS(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=IPe();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const u=xPe(o,a);u!==null&&s.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(St.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dn())}isEqual(e){return this.batchId===e.batchId&&mT(this.mutations,e.mutations,(n,s)=>Hle(n,s))&&mT(this.baseMutations,e.baseMutations,(n,s)=>Hle(n,s))}}class hQ{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){zn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return ikt}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new hQ(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vkt{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wkt{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er,bn;function bkt(t){switch(t){case _e.OK:return ht(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return ht(15467,{code:t})}}function DPe(t){if(t===void 0)return ep("GRPC error has no .code"),_e.UNKNOWN;switch(t){case Er.OK:return _e.OK;case Er.CANCELLED:return _e.CANCELLED;case Er.UNKNOWN:return _e.UNKNOWN;case Er.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Er.INTERNAL:return _e.INTERNAL;case Er.UNAVAILABLE:return _e.UNAVAILABLE;case Er.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Er.NOT_FOUND:return _e.NOT_FOUND;case Er.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Er.ABORTED:return _e.ABORTED;case Er.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Er.DATA_LOSS:return _e.DATA_LOSS;default:return ht(39323,{code:t})}}(bn=Er||(Er={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ekt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tkt=new zg([4294967295,4294967295],0);function Gle(t){const e=Ekt().encode(t),n=new Y1e;return n.update(e),new Uint8Array(n.digest())}function Qle(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zg([n,s],0),new zg([r,i],0)]}class dQ{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new NI(`Invalid padding: ${n}`);if(s<0)throw new NI(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new NI(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new NI(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zg.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(zg.fromNumber(s)));return r.compare(Tkt)===1&&(r=new zg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Gle(e),[s,r]=Qle(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dQ(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Gle(e),[s,r]=Qle(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class NI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,c1.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new S4(St.min(),r,new Or(rn),tp(),dn())}}class c1{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new c1(s,n,dn(),dn(),dn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class OPe{constructor(e,n){this.targetId=e,this.Ce=n}}class LPe{constructor(e,n,s=no.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Yle{constructor(){this.ve=0,this.Fe=Xle(),this.Me=no.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dn(),n=dn(),s=dn();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ht(38017,{changeType:i})}}),new c1(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Xle()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ckt{constructor(e){this.Ge=e,this.ze=new Map,this.je=tp(),this.Je=TP(),this.He=TP(),this.Ye=new Or(rn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ht(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(JB(i))if(s===0){const o=new et(i.path);this.et(n,o,Po.newNoDocument(o,St.min()))}else zn(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Wm(s).toUint8Array()}catch(u){if(u instanceof aPe)return gT("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dQ(o,r,i)}catch(u){return gT(u instanceof NI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&JB(a.target)){const u=new et(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Po.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let s=dn();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const r=new S4(e,n,this.Ye,this.je,s);return this.je=tp(),this.Je=TP(),this.He=TP(),this.Ye=new Or(rn),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yle,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wi(rn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wi(rn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||De("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yle),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function TP(){return new Or(et.comparator)}function Xle(){return new Or(et.comparator)}const Ikt={asc:"ASCENDING",desc:"DESCENDING"},Skt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kkt={and:"AND",or:"OR"};class Akt{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function e$(t,e){return t.useProto3Json||y4(e)?e:{value:e}}function aL(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MPe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Rkt(t,e){return aL(t,e.toTimestamp())}function Qh(t){return zn(!!t,49232),St.fromTimestamp(function(n){const s=Hm(n);return new As(s.seconds,s.nanos)}(t))}function fQ(t,e){return t$(t,e).canonicalString()}function t$(t,e){const n=function(r){return new Gs(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FPe(t){const e=Gs.fromString(t);return zn(BPe(e),10190,{key:e.toString()}),e}function n$(t,e){return fQ(t.databaseId,e.path)}function O9(t,e){const n=FPe(e);if(n.get(1)!==t.databaseId.projectId)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $e(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new et(UPe(n))}function VPe(t,e){return fQ(t.databaseId,e)}function Pkt(t){const e=FPe(t);return e.length===4?Gs.emptyPath():UPe(e)}function s$(t){return new Gs(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UPe(t){return zn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Jle(t,e,n){return{name:n$(t,e),fields:n.value.mapValue.fields}}function xkt(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ht(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(zn(h===void 0||typeof h=="string",58123),no.fromBase64String(h||"")):(zn(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),no.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?_e.UNKNOWN:DPe(c.code);return new $e(h,c.message||"")}(o);n=new LPe(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=O9(t,s.document.name),i=Qh(s.document.updateTime),o=s.document.createTime?Qh(s.document.createTime):St.min(),a=new ja({mapValue:{fields:s.document.fields}}),u=Po.newFoundDocument(r,i,o,a),c=s.targetIds||[],h=s.removedTargetIds||[];n=new zx(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=O9(t,s.document),i=s.readTime?Qh(s.readTime):St.min(),o=Po.newNoDocument(r,i),a=s.removedTargetIds||[];n=new zx([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=O9(t,s.document),i=s.removedTargetIds||[];n=new zx([],i,r,null)}else{if(!("filter"in e))return ht(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new wkt(r,i),a=s.targetId;n=new OPe(a,o)}}return n}function Nkt(t,e){let n;if(e instanceof u1)n={update:Jle(t,e.key,e.value)};else if(e instanceof cQ)n={delete:n$(t,e.key)};else if(e instanceof y_)n={update:Jle(t,e.key,e.data),updateMask:jkt(e.fieldMask)};else{if(!(e instanceof _kt))return ht(16599,{Vt:e.type});n={verify:n$(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof vA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oL)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ht(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Rkt(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ht(27497)}(t,e.precondition)),n}function Dkt(t,e){return t&&t.length>0?(zn(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?Qh(r.updateTime):Qh(i);return o.isEqual(St.min())&&(o=Qh(i)),new pkt(o,r.transformResults||[])}(n,e))):[]}function Okt(t,e){return{documents:[VPe(t,e.path)]}}function Lkt(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=VPe(t,r);const i=function(c){if(c.length!==0)return jPe(md.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:mb(p.field),direction:Vkt(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=e$(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function Mkt(t){let e=Pkt(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){zn(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=qPe(d);return p instanceof md&&_Pe(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(w){return new iL(_b(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,y4(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(d){const p=!!d.before,m=d.values||[];return new rL(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new rL(m,p)}(n.endAt)),ZSt(e,r,o,i,a,"F",u,c)}function Fkt(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qPe(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=_b(n.unaryFilter.field);return gi.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=_b(n.unaryFilter.field);return gi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_b(n.unaryFilter.field);return gi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=_b(n.unaryFilter.field);return gi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ht(61313);default:return ht(60726)}}(t):t.fieldFilter!==void 0?function(n){return gi.create(_b(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ht(58110);default:return ht(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return md.create(n.compositeFilter.filters.map(s=>qPe(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ht(1026)}}(n.compositeFilter.op))}(t):ht(30097,{filter:t})}function Vkt(t){return Ikt[t]}function Ukt(t){return Skt[t]}function qkt(t){return kkt[t]}function mb(t){return{fieldPath:t.canonicalString()}}function _b(t){return Yi.fromServerFormat(t.fieldPath)}function jPe(t){return t instanceof gi?function(n){if(n.op==="=="){if(Ule(n.value))return{unaryFilter:{field:mb(n.field),op:"IS_NAN"}};if(Vle(n.value))return{unaryFilter:{field:mb(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ule(n.value))return{unaryFilter:{field:mb(n.field),op:"IS_NOT_NAN"}};if(Vle(n.value))return{unaryFilter:{field:mb(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mb(n.field),op:Ukt(n.op),value:n.value}}}(t):t instanceof md?function(n){const s=n.getFilters().map(r=>jPe(r));return s.length===1?s[0]:{compositeFilter:{op:qkt(n.op),filters:s}}}(t):ht(54877,{filter:t})}function jkt(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BPe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,s,r,i=St.min(),o=St.min(),a=no.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new fg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bkt{constructor(e){this.yt=e}}function $kt(t){const e=Mkt({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ZB(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zkt{constructor(){this.Cn=new Hkt}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(zm.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(zm.min())}updateCollectionGroup(e,n,s){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class Hkt{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new wi(Gs.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new wi(Gs.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$Pe=41943040;class Fa{static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa($Pe,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vT(0)}static cr(){return new vT(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eue="LruGarbageCollector",Wkt=1048576;function tue([t,e],[n,s]){const r=rn(t,n);return r===0?rn(e,s):r}class Kkt{constructor(e){this.Ir=e,this.buffer=new wi(tue),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();tue(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Gkt{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){De(eue,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_C(n)?De(eue,"Ignoring IndexedDB error during garbage collection: ",n):await mC(n)}await this.Vr(3e5)})}}class Qkt{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return he.resolve(_4.ce);const s=new Kkt(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(De("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Zle)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zle):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(s=d,a=Date.now(),this.removeTargets(e,s,n))).next(d=>(i=d,u=Date.now(),this.removeOrphanedDocuments(e,s))).next(d=>(c=Date.now(),pb()<=Qt.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d})))}}function Ykt(t,e){return new Qkt(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xkt{constructor(){this.changes=new yw(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Po.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?he.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jkt{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zkt{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&fS(s.mutation,r,_l.empty(),As.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,dn()).next(()=>s))}getLocalViewOfDocuments(e,n,s=dn()){const r=qy();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=xI();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=qy();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,dn()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=tp();const o=dS(),a=function(){return dS()}();return n.forEach((u,c)=>{const h=s.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof y_)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),fS(h.mutation,c,h.mutation.getFieldMask(),As.now())):o.set(c.key,_l.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>a.set(c,new Jkt(h,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const s=dS();let r=new Or((o,a)=>o-a),i=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=s.get(u)||_l.empty();h=a.applyToLocalView(c,h),s.set(u,h);const d=(r.get(a.batchId)||dn()).add(u);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=IPe();h.forEach(p=>{if(!i.has(p)){const m=xPe(n.get(p),s.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return he.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return et.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ekt(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):he.resolve(qy());let a=gA,u=i;return o.next(c=>he.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?he.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,dn())).next(h=>({batchId:a,changes:CPe(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next(s=>{let r=xI();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=xI();return this.indexManager.getCollectionParents(e,i).next(a=>he.forEach(a,u=>{const c=function(d,p){return new w4(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Po.newInvalidDocument(h)))});let a=xI();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&fS(h.mutation,c,_l.empty(),As.now()),T4(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eAt{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return he.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qh(r.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:$kt(r.bundledQuery),readTime:Qh(r.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tAt{constructor(){this.overlays=new Or(et.comparator),this.qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const s=qy();return he.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),he.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),he.resolve()}getOverlaysForCollection(e,n,s){const r=qy(),i=n.length+1,o=new et(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return he.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Or((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let h=i.get(c.largestBatchId);h===null&&(h=qy(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=qy(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return he.resolve(a)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new vkt(n,s));let i=this.qr.get(n);i===void 0&&(i=dn(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nAt{constructor(){this.sessionToken=no.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(){this.Qr=new wi(Ni.$r),this.Ur=new wi(Ni.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Ni(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Ni(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new et(new Gs([])),s=new Ni(n,e),r=new Ni(n,e+1),i=[];return this.Ur.forEachInRange([s,r],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new et(new Gs([])),s=new Ni(n,e),r=new Ni(n,e+1);let i=dn();return this.Ur.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ni(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ni{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return et.comparator(e.key,n.key)||rn(e.Yr,n.Yr)}static Kr(e,n){return rn(e.Yr,n.Yr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sAt{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wi(Ni.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ykt(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Ni(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return he.resolve(o)}lookupMutationBatch(e,n){return he.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return he.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?rQ:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ni(n,0),r=new Ni(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],o=>{const a=this.Xr(o.Yr);i.push(a)}),he.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new wi(rn);return n.forEach(r=>{const i=new Ni(r,0),o=new Ni(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{s=s.add(a.Yr)})}),he.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;et.isDocumentKey(i)||(i=i.child(""));const o=new Ni(new et(i),0);let a=new wi(rn);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(u.Yr)),!0)},o),he.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){zn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return he.forEach(n.mutations,r=>{const i=new Ni(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Ni(n,0),r=this.Zr.firstAfterOrEqual(s);return he.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rAt{constructor(e){this.ri=e,this.docs=function(){return new Or(et.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return he.resolve(s?s.document.mutableCopy():Po.newInvalidDocument(n))}getEntries(e,n){let s=tp();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Po.newInvalidDocument(r))}),he.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=tp();const o=n.path,a=new et(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||xSt(PSt(h),s)<=0||(r.has(h.key)||T4(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return he.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ht(9500)}ii(e,n){return he.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new iAt(this)}getSize(e){return he.resolve(this.size)}}class iAt extends Xkt{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),he.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oAt{constructor(e){this.persistence=e,this.si=new yw(n=>aQ(n),lQ),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.oi=0,this._i=new pQ,this.targetCount=0,this.ai=vT.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),he.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vT(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Pr(n),he.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),he.waitFor(i).next(()=>r)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return he.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),he.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),he.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return he.resolve(s)}containsKey(e,n){return he.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zPe{constructor(e,n){this.ui={},this.overlays={},this.ci=new _4(0),this.li=!1,this.li=!0,this.hi=new nAt,this.referenceDelegate=e(this),this.Pi=new oAt(this),this.indexManager=new zkt,this.remoteDocumentCache=function(r){return new rAt(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Bkt(n),this.Ii=new eAt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tAt,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new sAt(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){De("MemoryPersistence","Starting transaction:",e);const r=new aAt(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return he.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class aAt extends DSt{constructor(e){super(),this.currentSequenceNumber=e}}class gQ{constructor(e){this.persistence=e,this.Ri=new pQ,this.Vi=null}static mi(e){return new gQ(e)}get fi(){if(this.Vi)return this.Vi;throw ht(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),he.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,s=>{const r=et.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,St.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return he.or([()=>he.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lL{constructor(e,n){this.persistence=e,this.pi=new yw(s=>MSt(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Ykt(this,n)}static mi(e,n){return new lL(e,n)}Ei(){}di(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return he.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?he.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,o=>this.br(e,o,n).next(a=>{a||(s++,i.removeEntry(o,St.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),he.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jx(e.data.value)),n}br(e,n,s){return he.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return he.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=dn(),r=dn();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new mQ(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lAt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uAt{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return YTt()?8:OSt(jo())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new lAt;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(pb()<=Qt.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",gb(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(pb()<=Qt.DEBUG&&De("QueryEngine","Query:",gb(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(pb()<=Qt.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",gb(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gh(n))):he.resolve())}ys(e,n){if($le(n))return he.resolve(null);let s=Gh(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ZB(n,null,"F"),s=Gh(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=dn(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,ZB(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,s,r){return $le(n)||r.isEqual(St.min())?he.resolve(null):this.ps.getDocuments(e,s).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?he.resolve(null):(pb()<=Qt.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gb(n)),this.vs(e,o,n,RSt(r,gA)).next(a=>a))})}Ds(e,n){let s=new wi(EPe(e));return n.forEach((r,i)=>{T4(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return pb()<=Qt.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",gb(n)),this.ps.getDocumentsMatchingQuery(e,n,zm.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q="LocalStore",cAt=3e8;class hAt{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Or(rn),this.xs=new yw(i=>aQ(i),lQ),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zkt(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function dAt(t,e,n,s){return new hAt(t,e,n,s)}async function HPe(t,e){const n=Ot(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let u=dn();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(s,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function fAt(t,e){const n=Ot(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,p=d.keys();let m=he.resolve();return p.forEach(w=>{m=m.next(()=>h.getEntry(u,w)).next(k=>{const P=c.docVersions.get(w);zn(P!==null,48541),k.version.compareTo(P)<0&&(d.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),h.addEntry(k)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let u=dn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function WPe(t){const e=Ot(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function pAt(t,e){const n=Ot(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(no.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,s)),r=r.insert(d,m),function(k,P,O){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=cAt?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(p,m,h)&&a.push(n.Pi.updateTargetData(i,m))});let u=tp(),c=dn();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(gAt(i,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!s.isEqual(St.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(h)}return he.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.Ms=r,i))}function gAt(t,e,n){let s=dn(),r=dn();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=tp();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),u.isNoDocument()&&u.version.isEqual(St.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):De(_Q,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:r}})}function mAt(t,e){const n=Ot(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=rQ),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _At(t,e){const n=Ot(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,he.resolve(r)):n.Pi.allocateTargetId(s).next(o=>(r=new fg(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function r$(t,e,n){const s=Ot(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!_C(o))throw o;De(_Q,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function nue(t,e,n){const s=Ot(t);let r=St.min(),i=dn();return s.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=Ot(u),p=d.xs.get(h);return p!==void 0?he.resolve(d.Ms.get(p)):d.Pi.getTargetData(c,h)}(s,o,Gh(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:St.min(),n?i:dn())).next(a=>(yAt(s,nkt(e),a),{documents:a,Qs:i})))}function yAt(t,e,n){let s=t.Os.get(e)||St.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}class sue{constructor(){this.activeTargetIds=lkt()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vAt{constructor(){this.Mo=new sue,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sue,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wAt{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rue="ConnectivityMonitor";class iue{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){De(rue,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){De(rue,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CP=null;function i$(){return CP===null?CP=function(){return 268435456+Math.round(2147483648*Math.random())}():CP++,"0x"+CP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9="RestConnection",bAt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EAt{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===nL?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=i$(),a=this.zo(e,n.toUriEncodedString());De(L9,`Sending RPC '${e}' ${o}:`,a,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:c}=new URL(a),h=Id(c);return this.Jo(e,a,u,s,h).then(d=>(De(L9,`Received RPC '${e}' ${o}: `,d),d),d=>{throw gT(L9,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gC}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=bAt[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TAt{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="WebChannelConnection";class CAt extends EAt{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=i$();return new Promise((a,u)=>{const c=new X1e;c.setWithCredentials(!0),c.listenOnce(J1e.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qx.NO_ERROR:const d=c.getResponseJson();De(oo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case qx.TIMEOUT:De(oo,`RPC '${e}' ${o} timed out`),u(new $e(_e.DEADLINE_EXCEEDED,"Request time out"));break;case qx.HTTP_ERROR:const p=c.getStatus();if(De(oo,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m?.error;if(w&&w.status&&w.message){const k=function(O){const M=O.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(M)>=0?M:_e.UNKNOWN}(w.status);u(new $e(k,w.message))}else u(new $e(_e.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new $e(_e.UNAVAILABLE,"Connection failed."));break;default:ht(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{De(oo,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(r);De(oo,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",h,s,15)})}T_(e,n,s){const r=i$(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tPe(),a=ePe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const h=i.join("");De(oo,`Creating RPC '${e}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);this.I_(d);let p=!1,m=!1;const w=new TAt({Yo:P=>{m?De(oo,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(p||(De(oo,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),De(oo,`RPC '${e}' stream ${r} sending:`,P),d.send(P))},Zo:()=>d.close()}),k=(P,O,M)=>{P.listen(O,V=>{try{M(V)}catch(q){setTimeout(()=>{throw q},0)}})};return k(d,PI.EventType.OPEN,()=>{m||(De(oo,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),k(d,PI.EventType.CLOSE,()=>{m||(m=!0,De(oo,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),k(d,PI.EventType.ERROR,P=>{m||(m=!0,gT(oo,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new $e(_e.UNAVAILABLE,"The operation could not be completed")))}),k(d,PI.EventType.MESSAGE,P=>{if(!m){const O=P.data[0];zn(!!O,16349);const M=O,V=M?.error||M[0]?.error;if(V){De(oo,`RPC '${e}' stream ${r} received error:`,V);const q=V.status;let H=function(v){const y=Er[v];if(y!==void 0)return DPe(y)}(q),J=V.message;H===void 0&&(H=_e.INTERNAL,J="Unknown error status: "+q+" with message "+V.message),m=!0,w.a_(new $e(H,J)),d.close()}else De(oo,`RPC '${e}' stream ${r} received:`,O),w.u_(O)}}),k(a,Z1e.STAT_EVENT,P=>{P.stat===WB.PROXY?De(oo,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===WB.NOPROXY&&De(oo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function M9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){return new Akt(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPe{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&De("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oue="PersistentStream";class GPe{constructor(e,n,s,r,i,o,a,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KPe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(ep(n.toString()),ep("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new $e(_e.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return De(oue,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(De(oue,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IAt extends GPe{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xkt(this.serializer,e),s=function(i){if(!("targetChange"in i))return St.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?St.min():o.readTime?Qh(o.readTime):St.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=s$(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=JB(u)?{documents:Okt(i,u)}:{query:Lkt(i,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MPe(i,o.resumeToken);const c=e$(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(St.min())>0){a.readTime=aL(i,o.snapshotVersion.toTimestamp());const c=e$(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const s=Fkt(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=s$(this.serializer),n.removeTarget=e,this.q_(n)}}class SAt extends GPe{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Dkt(e.writeResults,e.commitTime),s=Qh(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=s$(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Nkt(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kAt{}class AAt extends kAt{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,t$(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $e(_e.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,t$(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $e(_e.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class RAt{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ep(n),this.aa=!1):De("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="RemoteStore";class PAt{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{s.enqueueAndForget(async()=>{vw(this)&&(De(Kv,"Restarting streams for network reachability change."),await async function(u){const c=Ot(u);c.Ea.add(4),await h1(c),c.Ra.set("Unknown"),c.Ea.delete(4),await A4(c)}(this))})}),this.Ra=new RAt(s,r)}}async function A4(t){if(vw(t))for(const e of t.da)await e(!0)}async function h1(t){for(const e of t.da)await e(!1)}function QPe(t,e){const n=Ot(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bQ(n)?wQ(n):yC(n).O_()&&vQ(n,e))}function yQ(t,e){const n=Ot(t),s=yC(n);n.Ia.delete(e),s.O_()&&YPe(n,e),n.Ia.size===0&&(s.O_()?s.L_():vw(n)&&n.Ra.set("Unknown"))}function vQ(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yC(t).Y_(e)}function YPe(t,e){t.Va.Ue(e),yC(t).Z_(e)}function wQ(t){t.Va=new Ckt({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),yC(t).start(),t.Ra.ua()}function bQ(t){return vw(t)&&!yC(t).x_()&&t.Ia.size>0}function vw(t){return Ot(t).Ea.size===0}function XPe(t){t.Va=void 0}async function xAt(t){t.Ra.set("Online")}async function NAt(t){t.Ia.forEach((e,n)=>{vQ(t,e)})}async function DAt(t,e){XPe(t),bQ(t)?(t.Ra.ha(e),wQ(t)):t.Ra.set("Unknown")}async function OAt(t,e,n){if(t.Ra.set("Online"),e instanceof LPe&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Ia.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Ia.delete(a),r.Va.removeTarget(a))}(t,e)}catch(s){De(Kv,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await uL(t,s)}else if(e instanceof zx?t.Va.Ze(e):e instanceof OPe?t.Va.st(e):t.Va.tt(e),!n.isEqual(St.min()))try{const s=await WPe(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(c);h&&i.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(no.EMPTY_BYTE_STRING,h.snapshotVersion)),YPe(i,u);const d=new fg(h.target,u,c,h.sequenceNumber);vQ(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){De(Kv,"Failed to raise snapshot:",s),await uL(t,s)}}async function uL(t,e,n){if(!_C(e))throw e;t.Ea.add(1),await h1(t),t.Ra.set("Offline"),n||(n=()=>WPe(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{De(Kv,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await A4(t)})}function JPe(t,e){return e().catch(n=>uL(t,n,e))}async function R4(t){const e=Ot(t),n=Gm(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rQ;for(;LAt(e);)try{const r=await mAt(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,MAt(e,r)}catch(r){await uL(e,r)}ZPe(e)&&exe(e)}function LAt(t){return vw(t)&&t.Ta.length<10}function MAt(t,e){t.Ta.push(e);const n=Gm(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ZPe(t){return vw(t)&&!Gm(t).x_()&&t.Ta.length>0}function exe(t){Gm(t).start()}async function FAt(t){Gm(t).ra()}async function VAt(t){const e=Gm(t);for(const n of t.Ta)e.ea(n.mutations)}async function UAt(t,e,n){const s=t.Ta.shift(),r=hQ.from(s,e,n);await JPe(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await R4(t)}async function qAt(t,e){e&&Gm(t).X_&&await async function(s,r){if(function(o){return bkt(o)&&o!==_e.ABORTED}(r.code)){const i=s.Ta.shift();Gm(s).B_(),await JPe(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await R4(s)}}(t,e),ZPe(t)&&exe(t)}async function aue(t,e){const n=Ot(t);n.asyncQueue.verifyOperationInProgress(),De(Kv,"RemoteStore received new credentials");const s=vw(n);n.Ea.add(3),await h1(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await A4(n)}async function jAt(t,e){const n=Ot(t);e?(n.Ea.delete(2),await A4(n)):e||(n.Ea.add(2),await h1(n),n.Ra.set("Unknown"))}function yC(t){return t.ma||(t.ma=function(n,s,r){const i=Ot(n);return i.sa(),new IAt(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:xAt.bind(null,t),t_:NAt.bind(null,t),r_:DAt.bind(null,t),H_:OAt.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bQ(t)?wQ(t):t.Ra.set("Unknown")):(await t.ma.stop(),XPe(t))})),t.ma}function Gm(t){return t.fa||(t.fa=function(n,s,r){const i=Ot(n);return i.sa(),new SAt(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:FAt.bind(null,t),r_:qAt.bind(null,t),ta:VAt.bind(null,t),na:UAt.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await R4(t)):(await t.fa.stop(),t.Ta.length>0&&(De(Kv,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQ{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Hg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new EQ(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TQ(t,e){if(ep("AsyncQueue",`${e}: ${t}`),_C(t))return new $e(_e.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{static emptySet(e){return new cE(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||et.comparator(n.key,s.key):(n,s)=>et.comparator(n.key,s.key),this.keyedMap=xI(),this.sortedSet=new Or(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cE)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new cE;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lue{constructor(){this.ga=new Or(et.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ht(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class wT{constructor(e,n,s,r,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wT(e,n,cE.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&E4(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BAt{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $At{constructor(){this.queries=uue(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=Ot(n),i=r.queries;r.queries=uue(),i.forEach((o,a)=>{for(const u of a.Sa)u.onError(s)})})(this,new $e(_e.ABORTED,"Firestore shutting down"))}}function uue(){return new yw(t=>bPe(t),E4)}async function txe(t,e){const n=Ot(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new BAt,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=TQ(o,`Initialization of query '${gb(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&CQ(n)}async function nxe(t,e){const n=Ot(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function zAt(t,e){const n=Ot(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(r)&&(s=!0);o.wa=r}}s&&CQ(n)}function HAt(t,e,n){const s=Ot(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function CQ(t){t.Ca.forEach(e=>{e.next()})}var o$,cue;(cue=o$||(o$={})).Ma="default",cue.Cache="cache";class sxe{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new wT(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==o$.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rxe{constructor(e){this.key=e}}class ixe{constructor(e){this.key=e}}class WAt{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dn(),this.mutatedKeys=dn(),this.eu=EPe(e),this.tu=new cE(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new lue,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=T4(this.query,d)?d:null,w=!!p&&this.mutatedKeys.has(p.key),k=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?w!==k&&(s.track({type:3,doc:m}),P=!0):this.su(p,m)||(s.track({type:2,doc:m}),P=!0,(u&&this.eu(m,u)>0||c&&this.eu(m,c)<0)&&(a=!0)):!p&&m?(s.track({type:0,doc:m}),P=!0):p&&!m&&(s.track({type:1,doc:p}),P=!0,(u||c)&&(a=!0)),P&&(m?(o=o.add(m),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(m,w){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht(20277,{Rt:P})}};return k(m)-k(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(s),r=r??!1;const a=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new wT(this.query,e.tu,i,o,e.mutatedKeys,u===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lue,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dn(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new ixe(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new rxe(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=dn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wT.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const IQ="SyncEngine";class KAt{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class GAt{constructor(e){this.key=e,this.hu=!1}}class QAt{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new yw(a=>bPe(a),E4),this.Iu=new Map,this.Eu=new Set,this.du=new Or(et.comparator),this.Au=new Map,this.Ru=new pQ,this.Vu={},this.mu=new Map,this.fu=vT.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YAt(t,e,n=!0){const s=hxe(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await oxe(s,e,n,!0),r}async function XAt(t,e){const n=hxe(t);await oxe(n,e,!0,!1)}async function oxe(t,e,n,s){const r=await _At(t.localStore,Gh(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await JAt(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&QPe(t.remoteStore,r),a}async function JAt(t,e,n,s,r){t.pu=(d,p,m)=>async function(k,P,O,M){let V=P.view.ru(O);V.Cs&&(V=await nue(k.localStore,P.query,!1).then(({documents:I})=>P.view.ru(I,V)));const q=M&&M.targetChanges.get(P.targetId),H=M&&M.targetMismatches.get(P.targetId)!=null,J=P.view.applyChanges(V,k.isPrimaryClient,q,H);return due(k,P.targetId,J.au),J.snapshot}(t,d,p,m);const i=await nue(t.localStore,e,!0),o=new WAt(e,i.Qs),a=o.ru(i.documents),u=c1.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,u);due(t,n,c.au);const h=new KAt(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function ZAt(t,e,n){const s=Ot(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(o=>!E4(o,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await r$(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&yQ(s.remoteStore,r.targetId),a$(s,r.targetId)}).catch(mC)):(a$(s,r.targetId),await r$(s.localStore,r.targetId,!0))}async function eRt(t,e){const n=Ot(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),yQ(n.remoteStore,s.targetId))}async function tRt(t,e,n){const s=lRt(t);try{const r=await function(o,a){const u=Ot(o),c=As.now(),h=a.reduce((m,w)=>m.add(w.key),dn());let d,p;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=tp(),k=dn();return u.Ns.getEntries(m,h).next(P=>{w=P,w.forEach((O,M)=>{M.isValidDocument()||(k=k.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,w)).next(P=>{d=P;const O=[];for(const M of a){const V=mkt(M,d.get(M.key).overlayedDocument);V!=null&&O.push(new y_(M.key,V,pPe(V.value.mapValue),Vc.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,O,a)}).next(P=>{p=P;const O=P.applyToLocalDocumentSet(d,k);return u.documentOverlayCache.saveOverlays(m,P.batchId,O)})}).then(()=>({batchId:p.batchId,changes:CPe(d)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Or(rn)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(s,r.batchId,n),await d1(s,r.changes),await R4(s.remoteStore)}catch(r){const i=TQ(r,"Failed to persist write");n.reject(i)}}async function axe(t,e){const n=Ot(t);try{const s=await pAt(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Au.get(i);o&&(zn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?zn(o.hu,14607):r.removedDocuments.size>0&&(zn(o.hu,42227),o.hu=!1))}),await d1(n,s,e)}catch(s){await mC(s)}}function hue(t,e,n){const s=Ot(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const u=Ot(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const p of d.Sa)p.va(a)&&(c=!0)}),c&&CQ(u)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function nRt(t,e,n){const s=Ot(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Or(et.comparator);o=o.insert(i,Po.newNoDocument(i,St.min()));const a=dn().add(i),u=new S4(St.min(),new Map,new Or(rn),o,a);await axe(s,u),s.du=s.du.remove(i),s.Au.delete(e),SQ(s)}else await r$(s.localStore,e,!1).then(()=>a$(s,e,n)).catch(mC)}async function sRt(t,e){const n=Ot(t),s=e.batch.batchId;try{const r=await fAt(n.localStore,e);uxe(n,s,null),lxe(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await d1(n,r)}catch(r){await mC(r)}}async function rRt(t,e,n){const s=Ot(t);try{const r=await function(o,a){const u=Ot(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(zn(d!==null,37113),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(s.localStore,e);uxe(s,e,n),lxe(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await d1(s,r)}catch(r){await mC(r)}}function lxe(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function uxe(t,e,n){const s=Ot(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function a$(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||cxe(t,s)})}function cxe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(yQ(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),SQ(t))}function due(t,e,n){for(const s of n)s instanceof rxe?(t.Ru.addReference(s.key,e),iRt(t,s)):s instanceof ixe?(De(IQ,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||cxe(t,s.key)):ht(19791,{wu:s})}function iRt(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(De(IQ,"New document in limbo: "+n),t.Eu.add(s),SQ(t))}function SQ(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new et(Gs.fromString(e)),s=t.fu.next();t.Au.set(s,new GAt(n)),t.du=t.du.insert(n,s),QPe(t.remoteStore,new fg(Gh(b4(n.path)),s,"TargetPurposeLimboResolution",_4.ce))}}async function d1(t,e,n){const s=Ot(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach((a,u)=>{o.push(s.pu(u,e,n).then(c=>{if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:n?.targetChanges.get(u.targetId)?.current;s.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=mQ.As(u.targetId,c);i.push(h)}}))}),await Promise.all(o),s.Pu.H_(r),await async function(u,c){const h=Ot(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>he.forEach(c,p=>he.forEach(p.Es,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>he.forEach(p.ds,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!_C(d))throw d;De(_Q,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.Ms.get(p),w=m.snapshotVersion,k=m.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,k)}}}(s.localStore,i))}async function oRt(t,e){const n=Ot(t);if(!n.currentUser.isEqual(e)){De(IQ,"User change. New user:",e.toKey());const s=await HPe(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(u=>{u.reject(new $e(_e.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await d1(n,s.Ls)}}function aRt(t,e){const n=Ot(t),s=n.Au.get(e);if(s&&s.hu)return dn().add(s.key);{let r=dn();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const a=n.Tu.get(o);r=r.unionWith(a.view.nu)}return r}}function hxe(t){const e=Ot(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=axe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aRt.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nRt.bind(null,e),e.Pu.H_=zAt.bind(null,e.eventManager),e.Pu.yu=HAt.bind(null,e.eventManager),e}function lRt(t){const e=Ot(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sRt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rRt.bind(null,e),e}class cL{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=k4(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dAt(this.persistence,new uAt,e.initialUser,this.serializer)}Cu(e){return new zPe(gQ.mi,this.serializer)}Du(e){return new vAt}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cL.provider={build:()=>new cL};class uRt extends cL{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zn(this.persistence.referenceDelegate instanceof lL,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Gkt(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fa.withCacheSize(this.cacheSizeBytes):Fa.DEFAULT;return new zPe(s=>lL.mi(s,n),this.serializer)}}class l${async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>hue(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oRt.bind(null,this.syncEngine),await jAt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $At}()}createDatastore(e){const n=k4(e.databaseInfo.databaseId),s=function(i){return new CAt(i)}(e.databaseInfo);return function(i,o,a,u){return new AAt(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new PAt(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hue(this.syncEngine,n,0),function(){return iue.v()?new iue:new wAt}())}createSyncEngine(e,n){return function(r,i,o,a,u,c,h){const d=new QAt(r,i,o,a,u,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=Ot(n);De(Kv,"RemoteStore shutting down."),s.Ea.add(5),await h1(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}l$.provider={build:()=>new l$};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ep("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="FirestoreClient";class cRt{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=vo.UNAUTHENTICATED,this.clientId=nQ.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{De(Qm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(De(Qm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=TQ(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function F9(t,e){t.asyncQueue.verifyOperationInProgress(),De(Qm,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await HPe(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fue(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hRt(t);De(Qm,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>aue(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>aue(e.remoteStore,r)),t._onlineComponents=e}async function hRt(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){De(Qm,"Using user provided OfflineComponentProvider");try{await F9(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===_e.FAILED_PRECONDITION||r.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;gT("Error using user provided cache. Falling back to memory cache: "+n),await F9(t,new cL)}}else De(Qm,"Using default OfflineComponentProvider"),await F9(t,new uRt(void 0));return t._offlineComponents}async function fxe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(De(Qm,"Using user provided OnlineComponentProvider"),await fue(t,t._uninitializedComponentsProvider._online)):(De(Qm,"Using default OnlineComponentProvider"),await fue(t,new l$))),t._onlineComponents}function dRt(t){return fxe(t).then(e=>e.syncEngine)}async function u$(t){const e=await fxe(t),n=e.eventManager;return n.onListen=YAt.bind(null,e.syncEngine),n.onUnlisten=ZAt.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XAt.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eRt.bind(null,e.syncEngine),n}function fRt(t,e,n={}){const s=new Hg;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new dxe({next:p=>{h.Nu(),o.enqueueAndForget(()=>nxe(i,d));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new $e(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&u&&u.source==="server"?c.reject(new $e(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new sxe(b4(a.path),h,{includeMetadataChanges:!0,qa:!0});return txe(i,d)}(await u$(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pxe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pue=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gxe="firestore.googleapis.com",gue=!0;class mue{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $e(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gxe,this.ssl=gue}else this.host=e.host,this.ssl=e.ssl??gue;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$Pe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wkt)throw new $e(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ASt("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pxe(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $e(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kQ{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mue({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mue(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _St;switch(s.type){case"firstParty":return new bSt(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new $e(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=pue.get(n);s&&(De("ComponentProvider","Removing Datastore"),pue.delete(n),s.terminate())}(this),Promise.resolve()}}function pRt(t,e,n,s={}){t=Fc(t,kQ);const r=Id(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;r&&(u4(`https://${a}`),c4("Firestore",!0)),i.host!==gxe&&i.host!==a&&gT("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:a,ssl:r,emulatorOptions:s};if(!Bm(u,o)&&(t._setSettings(u),s.mockUserToken)){let c,h;if(typeof s.mockUserToken=="string")c=s.mockUserToken,h=vo.MOCK_USER;else{c=jG(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new $e(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new vo(d)}t._authCredentials=new ySt(new sPe(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new P4(this.firestore,e,this._query)}}class Rr{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new EA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rr(this.firestore,e,this._key)}toJSON(){return{type:Rr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(l1(n,Rr._jsonSchema))return new Rr(e,s||null,new et(Gs.fromString(n.referencePath)))}}Rr._jsonSchemaVersion="firestore/documentReference/1.0",Rr._jsonSchema={type:Ar("string",Rr._jsonSchemaVersion),referencePath:Ar("string")};class EA extends P4{constructor(e,n,s){super(e,n,b4(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rr(this.firestore,null,new et(e))}withConverter(e){return new EA(this.firestore,e,this._path)}}function gRt(t,e,...n){if(t=Gn(t),arguments.length===1&&(e=nQ.newId()),kSt("doc","path",e),t instanceof kQ){const s=Gs.fromString(e,...n);return Ple(s),new Rr(t,null,new et(s))}{if(!(t instanceof Rr||t instanceof EA))throw new $e(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Gs.fromString(e,...n));return Ple(s),new Rr(t.firestore,t instanceof EA?t.converter:null,new et(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ue="AsyncQueue";class yue{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KPe(this,"async_queue_retry"),this._c=()=>{const s=M9();s&&De(_ue,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=M9();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=M9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Hg;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_C(e))throw e;De(_ue,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,ep("INTERNAL UNHANDLED ERROR: ",vue(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=EQ.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&ht(47125,{Pc:vue(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vue(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wue(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Gv extends kQ{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new yue,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yue(e),this._firestoreClient=void 0,await e}}}function mxe(t,e){const n=typeof t=="object"?t:f4(),s=typeof t=="string"?t:nL,r=r1(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=qG("firestore");i&&pRt(r,...i)}return r}function AQ(t){if(t._terminated)throw new $e(_e.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mRt(t),t._firestoreClient}function mRt(t){const e=t._freezeSettings(),n=function(r,i,o,a){return new USt(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,pxe(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new cRt(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dl(no.fromBase64String(e))}catch(n){throw new $e(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dl(no.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(l1(e,Dl._jsonSchema))return Dl.fromBase64String(e.bytes)}}Dl._jsonSchemaVersion="firestore/bytes/1.0",Dl._jsonSchema={type:Ar("string",Dl._jsonSchemaVersion),bytes:Ar("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $e(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $e(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $e(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yh._jsonSchemaVersion}}static fromJSON(e){if(l1(e,Yh._jsonSchema))return new Yh(e.latitude,e.longitude)}}Yh._jsonSchemaVersion="firestore/geoPoint/1.0",Yh._jsonSchema={type:Ar("string",Yh._jsonSchemaVersion),latitude:Ar("number"),longitude:Ar("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(l1(e,Xh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Xh(e.vectorValues);throw new $e(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xh._jsonSchemaVersion="firestore/vectorValue/1.0",Xh._jsonSchema={type:Ar("string",Xh._jsonSchemaVersion),vectorValues:Ar("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Rt=/^__.*__$/;class yRt{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new y_(e,this.data,this.fieldMask,n,this.fieldTransforms):new u1(e,this.data,n,this.fieldTransforms)}}class _xe{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new y_(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yxe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht(40011,{Ac:t})}}class RQ{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new RQ({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hL(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yxe(this.Ac)&&_Rt.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vRt{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||k4(e)}Cc(e,n,s,r=!1){return new RQ({Ac:e,methodName:n,Dc:s,path:Yi.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vxe(t){const e=t._freezeSettings(),n=k4(t._databaseId);return new vRt(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wRt(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);xQ("Data must be an object, but it was:",o,s);const a=wxe(s,o);let u,c;if(i.merge)u=new _l(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=c$(e,d,n);if(!o.contains(p))throw new $e(_e.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Exe(h,p)||h.push(p)}u=new _l(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new yRt(new ja(a),u,c)}class D4 extends N4{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof D4}}class PQ extends N4{_toFieldTransform(e){return new dkt(e.path,new vA)}isEqual(e){return e instanceof PQ}}function bRt(t,e,n,s){const r=t.Cc(1,e,n);xQ("Data must be an object, but it was:",r,s);const i=[],o=ja.empty();__(s,(u,c)=>{const h=NQ(e,u,n);c=Gn(c);const d=r.yc(h);if(c instanceof D4)i.push(h);else{const p=O4(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new _l(i);return new _xe(o,a,r.fieldTransforms)}function ERt(t,e,n,s,r,i){const o=t.Cc(1,e,n),a=[c$(e,s,n)],u=[r];if(i.length%2!=0)throw new $e(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(c$(e,i[p])),u.push(i[p+1]);const c=[],h=ja.empty();for(let p=a.length-1;p>=0;--p)if(!Exe(c,a[p])){const m=a[p];let w=u[p];w=Gn(w);const k=o.yc(m);if(w instanceof D4)c.push(m);else{const P=O4(w,k);P!=null&&(c.push(m),h.set(m,P))}}const d=new _l(c);return new _xe(h,d,o.fieldTransforms)}function O4(t,e){if(bxe(t=Gn(t)))return xQ("Unsupported field value:",e,t),wxe(t,e);if(t instanceof N4)return function(s,r){if(!yxe(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let u=O4(a,r.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Gn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ukt(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=As.fromDate(s);return{timestampValue:aL(r.serializer,i)}}if(s instanceof As){const i=new As(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:aL(r.serializer,i)}}if(s instanceof Yh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Dl)return{bytesValue:MPe(r.serializer,s._byteString)};if(s instanceof Rr){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fQ(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Xh)return function(o,a){return{mapValue:{fields:{[dPe]:{stringValue:fPe},[sL]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return uQ(a.serializer,c)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${sQ(s)}`)}(t,e)}function wxe(t,e){const n={};return oPe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):__(t,(s,r)=>{const i=O4(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function bxe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof As||t instanceof Yh||t instanceof Dl||t instanceof Rr||t instanceof N4||t instanceof Xh)}function xQ(t,e,n){if(!bxe(n)||!rPe(n)){const s=sQ(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function c$(t,e,n){if((e=Gn(e))instanceof x4)return e._internalPath;if(typeof e=="string")return NQ(t,e);throw hL("Field path arguments must be of type string or ",t,!1,void 0,n)}const TRt=new RegExp("[~\\*/\\[\\]]");function NQ(t,e,n){if(e.search(TRt)>=0)throw hL(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new x4(...e.split("."))._internalPath}catch{throw hL(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hL(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${s}`),o&&(u+=` in document ${r}`),u+=")"),new $e(_e.INVALID_ARGUMENT,a+t+u)}function Exe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CRt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cxe("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CRt extends Txe{data(){return super.data()}}function Cxe(t,e){return typeof e=="string"?NQ(t,e):e instanceof x4?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IRt(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $e(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SRt{convertValue(e,n="none"){switch(Km(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ht(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return __(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){const n=e.fields?.[sL].arrayValue?.values?.map(s=>yr(s.doubleValue));return new Xh(n)}convertGeoPoint(e){return new Yh(yr(e.latitude),yr(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=v4(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(mA(e));default:return null}}convertTimestamp(e){const n=Hm(e);return new As(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Gs.fromString(e);zn(BPe(s),9688,{name:e});const r=new _A(s.get(1),s.get(3)),i=new et(s.popFirst(5));return r.isEqual(n)||ep(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kRt(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class DI{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dv extends Txe{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Cxe("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dv._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}dv._jsonSchemaVersion="firestore/documentSnapshot/1.0",dv._jsonSchema={type:Ar("string",dv._jsonSchemaVersion),bundleSource:Ar("string","DocumentSnapshot"),bundleName:Ar("string"),bundle:Ar("string")};class Hx extends dv{data(e={}){return super.data(e)}}class hE{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new DI(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Hx(this._firestore,this._userDataWriter,s.key,s,new DI(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $e(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const u=new Hx(r._firestore,r._userDataWriter,a.doc.key,a.doc,new DI(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Hx(r._firestore,r._userDataWriter,a.doc.key,a.doc,new DI(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:ARt(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=hE._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nQ.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ARt(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bue(t){t=Fc(t,Rr);const e=Fc(t.firestore,Gv);return fRt(AQ(e),t._key).then(n=>Sxe(e,t,n))}hE._jsonSchemaVersion="firestore/querySnapshot/1.0",hE._jsonSchema={type:Ar("string",hE._jsonSchemaVersion),bundleSource:Ar("string","QuerySnapshot"),bundleName:Ar("string"),bundle:Ar("string")};class Ixe extends SRt{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rr(this.firestore,null,n)}}function Eue(t,e,n){t=Fc(t,Rr);const s=Fc(t.firestore,Gv),r=kRt(t.converter,e,n);return DQ(s,[wRt(vxe(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Vc.none())])}function SOt(t,e,n,...s){t=Fc(t,Rr);const r=Fc(t.firestore,Gv),i=vxe(r);let o;return o=typeof(e=Gn(e))=="string"||e instanceof x4?ERt(i,"updateDoc",t._key,e,n,s):bRt(i,"updateDoc",t._key,e),DQ(r,[o.toMutation(t._key,Vc.exists(!0))])}function kOt(t){return DQ(Fc(t.firestore,Gv),[new cQ(t._key,Vc.none())])}function AOt(t,...e){t=Gn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wue(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(wue(e[s])){const u=e[s];e[s]=u.next?.bind(u),e[s+1]=u.error?.bind(u),e[s+2]=u.complete?.bind(u)}let i,o,a;if(t instanceof Rr)o=Fc(t.firestore,Gv),a=b4(t._key.path),i={next:u=>{e[s]&&e[s](Sxe(o,t,u))},error:e[s+1],complete:e[s+2]};else{const u=Fc(t,P4);o=Fc(u.firestore,Gv),a=u._query;const c=new Ixe(o);i={next:h=>{e[s]&&e[s](new hE(o,c,u,h))},error:e[s+1],complete:e[s+2]},IRt(t._query)}return function(c,h,d,p){const m=new dxe(p),w=new sxe(h,m,d);return c.asyncQueue.enqueueAndForget(async()=>txe(await u$(c),w)),()=>{m.Nu(),c.asyncQueue.enqueueAndForget(async()=>nxe(await u$(c),w))}}(AQ(o),a,r,i)}function DQ(t,e){return function(s,r){const i=new Hg;return s.asyncQueue.enqueueAndForget(async()=>tRt(await dRt(s),r,i)),i.promise}(AQ(t),e)}function Sxe(t,e,n){const s=n.docs.get(e._key),r=new Ixe(t);return new dv(t,r,e._key,s,new DI(n.hasPendingWrites,n.fromCache),e.converter)}function V9(){return new PQ("serverTimestamp")}(function(e,n=!0){(function(r){gC=r})(m_),$m(new Xf("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Gv(new vSt(s.getProvider("auth-internal")),new ESt(o,s.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $e(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _A(c.options.projectId,h)}(o,r),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$l(Sle,kle,e),$l(Sle,kle,"esm2020")})();var RRt="firebase",PRt="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$l(RRt,PRt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kxe="firebasestorage.googleapis.com",Axe="storageBucket",xRt=120*1e3,NRt=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Sd{constructor(e,n,s=0){super(U9(e),`Firebase Storage: ${n} (${U9(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return U9(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dr||(dr={}));function U9(t){return"storage/"+t}function OQ(){const t="An unknown error occurred, please check the error payload for server response.";return new pr(dr.UNKNOWN,t)}function DRt(t){return new pr(dr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ORt(t){return new pr(dr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LRt(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pr(dr.UNAUTHENTICATED,t)}function MRt(){return new pr(dr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FRt(t){return new pr(dr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VRt(){return new pr(dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function URt(){return new pr(dr.CANCELED,"User canceled the upload/download.")}function qRt(t){return new pr(dr.INVALID_URL,"Invalid URL '"+t+"'.")}function jRt(t){return new pr(dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function BRt(){return new pr(dr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Axe+"' property when initializing the app?")}function $Rt(){return new pr(dr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zRt(){return new pr(dr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HRt(t){return new pr(dr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function h$(t){return new pr(dr.INVALID_ARGUMENT,t)}function Rxe(){return new pr(dr.APP_DELETED,"The Firebase app was deleted.")}function WRt(t){return new pr(dr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pS(t,e){return new pr(dr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function sI(t){throw new pr(dr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Pa.makeFromUrl(e,n)}catch{return new Pa(e,"")}if(s.path==="")return s;throw jRt(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function c(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${r}/o${p}`,"i"),w={bucket:1,path:3},k=n===kxe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",O=new RegExp(`^https?://${k}/${r}/${P}`,"i"),V=[{regex:a,indices:u,postModify:i},{regex:m,indices:w,postModify:c},{regex:O,indices:{bucket:1,path:2},postModify:c}];for(let q=0;q<V.length;q++){const H=V[q],J=H.regex.exec(e);if(J){const I=J[H.indices.bucket];let v=J[H.indices.path];v||(v=""),s=new Pa(I,v),H.postModify(s);break}}if(s==null)throw qRt(e);return s}}class KRt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GRt(t,e,n){let s=1,r=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){r=setTimeout(()=>{r=null,t(m,u())},P)}function p(){i&&clearTimeout(i)}function m(P,...O){if(c){p();return}if(P){p(),h.call(null,P,...O);return}if(u()||o){p(),h.call(null,P,...O);return}s<64&&(s*=2);let V;a===1?(a=2,V=0):V=(s+Math.random())*1e3,d(V)}let w=!1;function k(P){w||(w=!0,p(),!c&&(r!==null?(P||(a=2),clearTimeout(r),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function QRt(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YRt(t){return t!==void 0}function XRt(t){return typeof t=="object"&&!Array.isArray(t)}function LQ(t){return typeof t=="string"||t instanceof String}function Tue(t){return MQ()&&t instanceof Blob}function MQ(){return typeof Blob<"u"}function d$(t,e,n,s){if(s<e)throw h$(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw h$(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function Pxe(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var fv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(fv||(fv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JRt(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZRt{constructor(e,n,s,r,i,o,a,u,c,h,d,p=!0,m=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,k)=>{this.resolve_=w,this.reject_=k,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new IP(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===fv.NO_ERROR,u=i.getStatus();if(!a||JRt(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===fv.ABORT;s(!1,new IP(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;s(!0,new IP(c,i))})},n=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());YRt(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=OQ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(r.canceled){const u=this.appDelete_?Rxe():URt();o(u)}else{const u=VRt();o(u)}};this.canceled_?n(!1,new IP(!1,null,!0)):this.backoffId_=GRt(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QRt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class IP{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function e1t(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function t1t(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function n1t(t,e){e&&(t["X-Firebase-GMPID"]=e)}function s1t(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r1t(t,e,n,s,r,i,o=!0,a=!1){const u=Pxe(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return n1t(h,e),e1t(h,n),t1t(h,i),s1t(h,s),new ZRt(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function o1t(...t){const e=i1t();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(MQ())return new Blob(t);throw new pr(dr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function a1t(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1t(t){if(typeof atob>"u")throw HRt("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class q9{constructor(e,n){this.data=e,this.contentType=n||null}}function xxe(t,e){switch(t){case gc.RAW:return new q9(Nxe(e));case gc.BASE64:case gc.BASE64URL:return new q9(Dxe(t,e));case gc.DATA_URL:return new q9(c1t(e),h1t(e))}throw OQ()}function Nxe(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=t.charCodeAt(++n);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function u1t(t){let e;try{e=decodeURIComponent(t)}catch{throw pS(gc.DATA_URL,"Malformed data URL.")}return Nxe(e)}function Dxe(t,e){switch(t){case gc.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw pS(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case gc.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw pS(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=l1t(e)}catch(r){throw r.message.includes("polyfill")?r:pS(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class Oxe{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pS(gc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=d1t(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function c1t(t){const e=new Oxe(t);return e.base64?Dxe(gc.BASE64,e.rest):u1t(e.rest)}function h1t(t){return new Oxe(t).contentType}function d1t(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){let s=0,r="";Tue(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(Tue(this.data_)){const s=this.data_,r=a1t(s,e,n);return r===null?null:new lg(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new lg(s,!0)}}static getBlob(...e){if(MQ()){const n=e.map(s=>s instanceof lg?s.data_:s);return new lg(o1t.apply(null,n))}else{const n=e.map(o=>LQ(o)?xxe(gc.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new lg(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FQ(t){let e;try{e=JSON.parse(t)}catch{return null}return XRt(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1t(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function p1t(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Lxe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1t(t,e){return e}class ia{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||g1t}}let SP=null;function m1t(t){return!LQ(t)||t.length<2?t:Lxe(t)}function Mxe(){if(SP)return SP;const t=[];t.push(new ia("bucket")),t.push(new ia("generation")),t.push(new ia("metageneration")),t.push(new ia("name","fullPath",!0));function e(i,o){return m1t(o)}const n=new ia("name");n.xform=e,t.push(n);function s(i,o){return o!==void 0?Number(o):o}const r=new ia("size");return r.xform=s,t.push(r),t.push(new ia("timeCreated")),t.push(new ia("updated")),t.push(new ia("md5Hash",null,!0)),t.push(new ia("cacheControl",null,!0)),t.push(new ia("contentDisposition",null,!0)),t.push(new ia("contentEncoding",null,!0)),t.push(new ia("contentLanguage",null,!0)),t.push(new ia("contentType",null,!0)),t.push(new ia("metadata","customMetadata",!0)),SP=t,SP}function _1t(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new Pa(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function y1t(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const o=n[i];s[o.local]=o.xform(s,e[o.server])}return _1t(s,t),s}function Fxe(t,e,n){const s=FQ(e);return s===null?null:y1t(t,s,n)}function v1t(t,e,n,s){const r=FQ(e);if(r===null||!LQ(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),m=f1(p,n,s),w=Pxe({alt:"media",token:c});return m+w})[0]}function w1t(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cue="prefixes",Iue="items";function b1t(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Cue])for(const r of n[Cue]){const i=r.replace(/\/$/,""),o=t._makeStorageReference(new Pa(e,i));s.prefixes.push(o)}if(n[Iue])for(const r of n[Iue]){const i=t._makeStorageReference(new Pa(e,r.name));s.items.push(i)}return s}function E1t(t,e,n){const s=FQ(n);return s===null?null:b1t(t,e,s)}class L4{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VQ(t){if(!t)throw OQ()}function T1t(t,e){function n(s,r){const i=Fxe(t,r,e);return VQ(i!==null),i}return n}function C1t(t,e){function n(s,r){const i=E1t(t,e,r);return VQ(i!==null),i}return n}function I1t(t,e){function n(s,r){const i=Fxe(t,r,e);return VQ(i!==null),v1t(i,r,t.host,t._protocol)}return n}function UQ(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=MRt():r=LRt():n.getStatus()===402?r=ORt(t.bucket):n.getStatus()===403?r=FRt(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function Vxe(t){const e=UQ(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=DRt(t.path)),i.serverResponse=r.serverResponse,i}return n}function S1t(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=f1(o,t.host,t._protocol),u="GET",c=t.maxOperationRetryTime,h=new L4(a,u,C1t(t,e.bucket),c);return h.urlParams=i,h.errorHandler=UQ(e),h}function k1t(t,e,n){const s=e.fullServerUrl(),r=f1(s,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new L4(r,i,I1t(t,n),o);return a.errorHandler=Vxe(e),a}function A1t(t,e){const n=e.fullServerUrl(),s=f1(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new L4(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=Vxe(e),a}function R1t(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function P1t(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=R1t(null,e)),s}function x1t(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let q=0;q<2;q++)V=V+Math.random().toString().slice(2);return V}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=P1t(e,s,r),h=w1t(c,n),d="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+u+"--",m=lg.getBlob(d,s,p);if(m===null)throw $Rt();const w={name:c.fullPath},k=f1(i,t.host,t._protocol),P="POST",O=t.maxUploadRetryTime,M=new L4(k,P,T1t(t,n),O);return M.urlParams=w,M.headers=o,M.body=m.uploadData(),M.errorHandler=UQ(e),M}class N1t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=fv.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=fv.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=fv.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw sI("cannot .send() more than once");if(Id(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class D1t extends N1t{initXhr(){this.xhr_.responseType="text"}}function M4(){return new D1t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){this._service=e,n instanceof Pa?this._location=n:this._location=Pa.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qv(e,n)}get root(){const e=new Pa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lxe(this._location.path)}get storage(){return this._service}get parent(){const e=f1t(this._location.path);if(e===null)return null;const n=new Pa(this._location.bucket,e);return new Qv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw WRt(e)}}function O1t(t,e,n){t._throwIfRoot("uploadBytes");const s=x1t(t.storage,t._location,Mxe(),new lg(e,!0),n);return t.storage.makeRequestWithTokens(s,M4).then(r=>({metadata:r,ref:t}))}function L1t(t,e,n=gc.RAW,s){t._throwIfRoot("uploadString");const r=xxe(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),O1t(t,r.data,i)}function M1t(t){const e={prefixes:[],items:[]};return Uxe(t,e).then(()=>e)}async function Uxe(t,e,n){const r=await F1t(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await Uxe(t,e,r.nextPageToken)}function F1t(t,e){e!=null&&typeof e.maxResults=="number"&&d$("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=S1t(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,M4)}function V1t(t){t._throwIfRoot("getDownloadURL");const e=k1t(t.storage,t._location,Mxe());return t.storage.makeRequestWithTokens(e,M4).then(n=>{if(n===null)throw zRt();return n})}function U1t(t){t._throwIfRoot("deleteObject");const e=A1t(t.storage,t._location);return t.storage.makeRequestWithTokens(e,M4)}function q1t(t,e){const n=p1t(t._location.path,e),s=new Pa(t._location.bucket,n);return new Qv(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1t(t){return/^[A-Za-z]+:\/\//.test(t)}function B1t(t,e){return new Qv(t,e)}function qxe(t,e){if(t instanceof qQ){const n=t;if(n._bucket==null)throw BRt();const s=new Qv(n,n._bucket);return e!=null?qxe(s,e):s}else return e!==void 0?q1t(t,e):t}function $1t(t,e){if(e&&j1t(e)){if(t instanceof qQ)return B1t(t,e);throw h$("To use ref(service, url), the first argument must be a Storage instance.")}else return qxe(t,e)}function Sue(t,e){const n=e?.[Axe];return n==null?null:Pa.makeFromBucketSpec(n,t)}function z1t(t,e,n,s={}){t.host=`${e}:${n}`;const r=Id(e);r&&(u4(`https://${t.host}/b`),c4("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:jG(i,t.app.options.projectId))}class qQ{constructor(e,n,s,r,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=kxe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xRt,this._maxUploadRetryTime=NRt,this._requests=new Set,r!=null?this._bucket=Pa.makeFromBucketSpec(r,this._host):this._bucket=Sue(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pa.makeFromBucketSpec(this._url,e):this._bucket=Sue(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d$("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d$("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ol(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qv(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new KRt(Rxe());{const o=r1t(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const kue="@firebase/storage",Aue="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jxe="storage";function ROt(t,e,n,s){return t=Gn(t),L1t(t,e,n,s)}function POt(t){return t=Gn(t),M1t(t)}function xOt(t){return t=Gn(t),V1t(t)}function NOt(t){return t=Gn(t),U1t(t)}function DOt(t,e){return t=Gn(t),$1t(t,e)}function H1t(t=f4(),e){t=Gn(t);const s=r1(t,jxe).getImmediate({identifier:e}),r=qG("storage");return r&&W1t(s,...r),s}function W1t(t,e,n,s={}){z1t(t,e,n,s)}function K1t(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new qQ(n,s,r,e,m_)}function G1t(){$m(new Xf(jxe,K1t,"PUBLIC").setMultipleInstances(!0)),$l(kue,Aue,""),$l(kue,Aue,"esm2020")}G1t();var Rue={};const Pue="@firebase/database",xue="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bxe="";function Q1t(t){Bxe=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1t{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dA(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1t{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gp(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $xe=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y1t(e)}}catch{}return new X1t},jy=$xe("localStorage"),J1t=$xe("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new d4("@firebase/database"),Z1t=function(){let t=1;return function(){return t++}}(),zxe=function(t){const e=lCt(t),n=new rCt;n.update(e);const s=n.digest();return UG.encodeByteArray(s)},p1=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=p1.apply(null,s):typeof s=="object"?e+=pi(s):e+=s,e+=" "}return e};let gS=null,Nue=!0;const ePt=function(t,e){ke(!0,"Can't turn on custom loggers persistently."),dE.logLevel=Qt.VERBOSE,gS=dE.log.bind(dE)},xo=function(...t){if(Nue===!0&&(Nue=!1,gS===null&&J1t.get("logging_enabled")===!0&&ePt()),gS){const e=p1.apply(null,t);gS(e)}},g1=function(t){return function(...e){xo(t,...e)}},f$=function(...t){const e="FIREBASE INTERNAL ERROR: "+p1(...t);dE.error(e)},np=function(...t){const e=`FIREBASE FATAL ERROR: ${p1(...t)}`;throw dE.error(e),new Error(e)},Qa=function(...t){const e="FIREBASE WARNING: "+p1(...t);dE.warn(e)},tPt=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Hxe=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},nPt=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},bT="[MIN_NAME]",Yv="[MAX_NAME]",vC=function(t,e){if(t===e)return 0;if(t===bT||e===Yv)return-1;if(e===bT||t===Yv)return 1;{const n=Due(t),s=Due(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},sPt=function(t,e){return t===e?0:t<e?-1:1},rI=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pi(e))},jQ=function(t){if(typeof t!="object"||t===null)return pi(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=pi(e[s]),n+=":",n+=jQ(t[e[s]]);return n+="}",n},Wxe=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let r=0;r<n;r+=e)r+e>n?s.push(t.substring(r,n)):s.push(t.substring(r,r+e));return s};function Za(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Kxe=function(t){ke(!Hxe(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let r,i,o,a,u;t===0?(i=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),i=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(u=n;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)c.push(i%2?1:0),i=Math.floor(i/2);c.push(r?1:0),c.reverse();const h=c.join("");let d="";for(u=0;u<64;u+=8){let p=parseInt(h.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},rPt=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},iPt=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function oPt(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const aPt=new RegExp("^-?(0*)\\d{1,10}$"),lPt=-2147483648,uPt=2147483647,Due=function(t){if(aPt.test(t)){const e=Number(t);if(e>=lPt&&e<=uPt)return e}return null},wC=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Qa("Exception was thrown by user callback.",n),e},Math.floor(0))}},cPt=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},mS=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hPt{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,ol(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Qa(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dPt{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(xo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qa(e)}}class Wx{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Wx.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ="5",Gxe="v",Qxe="s",Yxe="r",Xxe="f",Jxe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zxe="ls",eNe="p",p$="ac",tNe="websocket",nNe="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sNe{constructor(e,n,s,r,i=!1,o="",a=!1,u=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jy.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jy.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function fPt(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rNe(t,e,n){ke(typeof e=="string","typeof type must == string"),ke(typeof n=="object","typeof params must == object");let s;if(e===tNe)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===nNe)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);fPt(t)&&(n.ns=t.namespace);const r=[];return Za(n,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPt{constructor(){this.counters_={}}incrementCounter(e,n=1){gp(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return FTt(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={},B9={};function $Q(t){const e=t.toString();return j9[e]||(j9[e]=new pPt),j9[e]}function gPt(t,e){const n=t.toString();return B9[n]||(B9[n]=e()),B9[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPt{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&wC(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oue="start",_Pt="close",yPt="pLPCommand",vPt="pRTLPCB",iNe="id",oNe="pw",aNe="ser",wPt="cb",bPt="seg",EPt="ts",TPt="d",CPt="dframe",lNe=1870,uNe=30,IPt=lNe-uNe,SPt=25e3,kPt=3e4;class Eb{constructor(e,n,s,r,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=g1(e),this.stats_=$Q(n),this.urlFn=u=>(this.appCheckToken&&(u[p$]=this.appCheckToken),rNe(n,nNe,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new mPt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kPt)),nPt(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zQ((...i)=>{const[o,a,u,c,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Oue)this.id=a,this.password=u;else if(o===_Pt)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Oue]="t",s[aNe]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[wPt]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Gxe]=BQ,this.transportSessionId&&(s[Qxe]=this.transportSessionId),this.lastSessionId&&(s[Zxe]=this.lastSessionId),this.applicationId&&(s[eNe]=this.applicationId),this.appCheckToken&&(s[p$]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jxe.test(location.hostname)&&(s[Yxe]=Xxe);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Eb.forceAllow_=!0}static forceDisallow(){Eb.forceDisallow_=!0}static isAvailable(){return Eb.forceAllow_?!0:!Eb.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rPt()&&!iPt()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=l1e(n),r=Wxe(s,IPt);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[CPt]="t",s[iNe]=e,s[oNe]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class zQ{constructor(e,n,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Z1t(),window[yPt+this.uniqueCallbackIdentifier]=e,window[vPt+this.uniqueCallbackIdentifier]=n,this.myIFrame=zQ.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){xo("frame writing exception"),a.stack&&xo(a.stack),xo(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xo("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[iNe]=this.myID,e[oNe]=this.myPW,e[aNe]=this.currentSerial;let n=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uNe+s.length<=lNe;){const o=this.pendingSegs.shift();s=s+"&"+bPt+r+"="+o.seg+"&"+EPt+r+"="+o.ts+"&"+TPt+r+"="+o.d,r++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(s,Math.floor(SPt)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{xo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const APt=16384,RPt=45e3;let dL=null;typeof MozWebSocket<"u"?dL=MozWebSocket:typeof WebSocket<"u"&&(dL=WebSocket);class tc{constructor(e,n,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=g1(this.connId),this.stats_=$Q(n),this.connURL=tc.connectionURL_(n,o,a,r,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,r,i){const o={};return o[Gxe]=BQ,typeof location<"u"&&location.hostname&&Jxe.test(location.hostname)&&(o[Yxe]=Xxe),n&&(o[Qxe]=n),s&&(o[Zxe]=s),r&&(o[p$]=r),i&&(o[eNe]=i),rNe(e,tNe,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jy.set("previous_websocket_failure",!0);try{let s;QTt(),this.mySock=new dL(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){tc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&dL!==null&&!tc.forceDisallow_}static previouslyFailed(){return jy.isInMemoryStorage||jy.get("previous_websocket_failure")===!0}markConnectionHealthy(){jy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=dA(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ke(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=pi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Wxe(n,APt);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(RPt))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tc.responsesRequiredToBeHealthy=2;tc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{static get ALL_TRANSPORTS(){return[Eb,tc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=tc&&tc.isAvailable();let s=n&&!tc.previouslyFailed();if(e.webSocketOnly&&(n||Qa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[tc];else{const r=this.transports_=[];for(const i of TA.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);TA.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TA.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PPt=6e4,xPt=5e3,NPt=10*1024,DPt=100*1024,$9="t",Lue="d",OPt="s",Mue="r",LPt="e",Fue="o",Vue="a",Uue="n",que="p",MPt="h";class FPt{constructor(e,n,s,r,i,o,a,u,c,h){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=g1("c:"+this.id+":"),this.transportManager_=new TA(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=mS(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DPt?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>NPt?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($9 in e){const n=e[$9];n===Vue?this.upgradeIfSecondaryHealthy_():n===Mue?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fue&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=rI("t",e),s=rI("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:que,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vue,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Uue,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=rI("t",e),s=rI("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=rI($9,e);if(Lue in e){const s=e[Lue];if(n===MPt){const r={...s};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Uue){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===OPt?this.onConnectionShutdown_(s):n===Mue?this.onReset_(s):n===LPt?f$("Server Error: "+s):n===Fue?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f$("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),BQ!==s&&Qa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),mS(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(PPt))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mS(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xPt))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:que,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cNe{put(e,n,s,r){}merge(e,n,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hNe{constructor(e){this.allowedEvents_=e,this.listeners_={},ke(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const r=this.getInitialEvent(e);r&&n.apply(s,r)}off(e,n,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===n&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){ke(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL extends hNe{static getInstance(){return new fL}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!BG()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ke(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jue=32,Bue=768;class as{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function An(){return new as("")}function zt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ym(t){return t.pieces_.length-t.pieceNum_}function ms(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new as(t.pieces_,e)}function dNe(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function VPt(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function fNe(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pNe(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new as(e,0)}function mi(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof as)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&n.push(s[r])}return new as(n,0)}function Zt(t){return t.pieceNum_>=t.pieces_.length}function xa(t,e){const n=zt(t),s=zt(e);if(n===null)return e;if(n===s)return xa(ms(t),ms(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function HQ(t,e){if(Ym(t)!==Ym(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function mc(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Ym(t)>Ym(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class UPt{constructor(e,n){this.errorPrefix_=n,this.parts_=fNe(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=h4(this.parts_[s]);gNe(this)}}function qPt(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=h4(e),gNe(t)}function jPt(t){const e=t.parts_.pop();t.byteLength_-=h4(e),t.parts_.length>0&&(t.byteLength_-=1)}function gNe(t){if(t.byteLength_>Bue)throw new Error(t.errorPrefix_+"has a key path longer than "+Bue+" bytes ("+t.byteLength_+").");if(t.parts_.length>jue)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jue+") or object contains a cycle "+_y(t))}function _y(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ extends hNe{static getInstance(){return new WQ}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ke(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=1e3,BPt=300*1e3,$ue=30*1e3,$Pt=1.3,zPt=3e4,HPt="server_kill",zue=3;class wf extends cNe{constructor(e,n,s,r,i,o,a,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=wf.nextPersistentConnectionId_++,this.log_=g1("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=iI,this.maxReconnectDelay_=BPt,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");WQ.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fL.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const r=++this.requestNumber_,i={r,a:e,b:n};this.log_(pi(i)),ke(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const n=new l4,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ke(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const u=a.d,c=a.s;wf.warnOnListenWarnings_(u,n),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(c,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gp(e,"w")){const s=fT(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Qa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||sCt(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$ue)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=nCt(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),ke(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,n)}sendUnlisten_(e,n,s,r){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,r){const i={p:n,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,s,r){this.putInternal("p",e,n,s,r)}merge(e,n,s,r){this.putInternal("m",e,n,s,r)}putInternal(e,n,s,r,i){this.initConnection_();const o={p:n,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pi(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):f$("Unrecognized action received from server: "+pi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ke(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=iI,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=iI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zPt&&(this.reconnectDelay_=iI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$Pt)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+wf.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,s())},c=function(d){ke(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:u,sendRequest:c};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?xo("getToken() completed but was canceled"):(xo("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new FPt(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,m=>{Qa(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(HPt)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Qa(d),u())}}}interrupt(e){xo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],FB(this.interruptReasons_)&&(this.reconnectDelay_=iI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(i=>jQ(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const s=new as(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(n),i.delete(n),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,n){xo("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zue&&(this.reconnectDelay_=$ue,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){xo("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zue&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Bxe.replace(/\./g,"-")]=1,BG()?e["framework.cordova"]=1:f1e()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fL.getInstance().currentlyOnline();return FB(this.interruptReasons_)&&e}}wf.nextPersistentConnectionId_=0;wf.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ht(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Ht(bT,e),r=new Ht(bT,n);return this.compare(s,r)!==0}minPost(){return Ht.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kP;class mNe extends F4{static get __EMPTY_NODE(){return kP}static set __EMPTY_NODE(e){kP=e}compare(e,n){return vC(e.name,n.name)}isDefinedOn(e){throw dC("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ht.MIN}maxPost(){return new Ht(Yv,kP)}makePost(e,n){return ke(typeof e=="string","KeyIndex indexValue must always be a string."),new Ht(e,kP)}toString(){return".key"}}const fE=new mNe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Li{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Li.RED,this.left=r??za.EMPTY_NODE,this.right=i??za.EMPTY_NODE}copy(e,n,s,r,i){return new Li(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return za.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,r;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return za.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Li.RED=!0;Li.BLACK=!1;class WPt{copy(e,n,s,r,i){return this}insert(e,n,s){return new Li(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class za{constructor(e,n=za.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new za(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Li.BLACK,null,null))}remove(e){return new za(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Li.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,r=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new AP(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new AP(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new AP(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new AP(this.root_,null,this.comparator_,!0,e)}}za.EMPTY_NODE=new WPt;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KPt(t,e){return vC(t.name,e.name)}function KQ(t,e){return vC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g$;function GPt(t){g$=t}const _Ne=function(t){return typeof t=="number"?"number:"+Kxe(t):"string:"+t},yNe=function(t){if(t.isLeafNode()){const e=t.val();ke(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gp(e,".sv"),"Priority must be a string or number.")}else ke(t===g$||t.isEmpty(),"priority of unexpected type.");ke(t===g$||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hue;class Ai{static set __childrenNodeConstructor(e){Hue=e}static get __childrenNodeConstructor(){return Hue}constructor(e,n=Ai.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ke(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yNe(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ai(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ai.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Zt(e)?this:zt(e)===".priority"?this.priorityNode_:Ai.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ai.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=zt(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(ke(s!==".priority"||Ym(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ai.__childrenNodeConstructor.EMPTY_NODE.updateChild(ms(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_Ne(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Kxe(this.value_):e+=this.value_,this.lazyHash_=zxe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ai.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ai.__childrenNodeConstructor?-1:(ke(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,r=Ai.VALUE_TYPE_ORDER.indexOf(n),i=Ai.VALUE_TYPE_ORDER.indexOf(s);return ke(r>=0,"Unknown leaf type: "+n),ke(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ai.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vNe,wNe;function QPt(t){vNe=t}function YPt(t){wNe=t}class XPt extends F4{compare(e,n){const s=e.node.getPriority(),r=n.node.getPriority(),i=s.compareTo(r);return i===0?vC(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ht.MIN}maxPost(){return new Ht(Yv,new Ai("[PRIORITY-POST]",wNe))}makePost(e,n){const s=vNe(e);return new Ht(n,new Ai("[PRIORITY-POST]",s))}toString(){return".priority"}}const rr=new XPt;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPt=Math.log(2);class ZPt{constructor(e){const n=i=>parseInt(Math.log(i)/JPt,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pL=function(t,e,n,s){t.sort(e);const r=function(u,c){const h=c-u;let d,p;if(h===0)return null;if(h===1)return d=t[u],p=n?n(d):d,new Li(p,d.node,Li.BLACK,null,null);{const m=parseInt(h/2,10)+u,w=r(u,m),k=r(m+1,c);return d=t[m],p=n?n(d):d,new Li(p,d.node,Li.BLACK,w,k)}},i=function(u){let c=null,h=null,d=t.length;const p=function(w,k){const P=d-w,O=d;d-=w;const M=r(P+1,O),V=t[P],q=n?n(V):V;m(new Li(q,V.node,k,null,M))},m=function(w){c?(c.left=w,c=w):(h=w,c=w)};for(let w=0;w<u.count;++w){const k=u.nextBitIsOne(),P=Math.pow(2,u.count-(w+1));k?p(P,Li.BLACK):(p(P,Li.BLACK),p(P,Li.RED))}return h},o=new ZPt(t.length),a=i(o);return new za(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z9;const jw={};class pf{static get Default(){return ke(jw&&rr,"ChildrenNode.ts has not been loaded"),z9=z9||new pf({".priority":jw},{".priority":rr}),z9}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=fT(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof za?n:null}hasIndex(e){return gp(this.indexSet_,e.toString())}addIndex(e,n){ke(e!==fE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=n.getIterator(Ht.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=pL(s,e.getCompare()):a=jw;const u=e.toString(),c={...this.indexSet_};c[u]=e;const h={...this.indexes_};return h[u]=a,new pf(h,c)}addToIndexes(e,n){const s=KO(this.indexes_,(r,i)=>{const o=fT(this.indexSet_,i);if(ke(o,"Missing index implementation for "+i),r===jw)if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(Ht.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),pL(a,o.getCompare())}else return jw;else{const a=n.get(e.name);let u=r;return a&&(u=u.remove(new Ht(e.name,a))),u.insert(e,e.node)}});return new pf(s,this.indexSet_)}removeFromIndexes(e,n){const s=KO(this.indexes_,r=>{if(r===jw)return r;{const i=n.get(e.name);return i?r.remove(new Ht(e.name,i)):r}});return new pf(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oI;class at{static get EMPTY_NODE(){return oI||(oI=new at(new za(KQ),null,pf.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&yNe(this.priorityNode_),this.children_.isEmpty()&&ke(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||oI}updatePriority(e){return this.children_.isEmpty()?this:new at(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?oI:n}}getChild(e){const n=zt(e);return n===null?this:this.getImmediateChild(n).getChild(ms(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ke(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Ht(e,n);let r,i;n.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?oI:this.priorityNode_;return new at(r,o,i)}}updateChild(e,n){const s=zt(e);if(s===null)return n;{ke(zt(e)!==".priority"||Ym(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(ms(e),n);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,r=0,i=!0;if(this.forEachChild(rr,(o,a)=>{n[o]=a.val(e),s++,i&&at.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+_Ne(this.getPriority().val())+":"),this.forEachChild(rr,(n,s)=>{const r=s.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":zxe(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Ht(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ht(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ht(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ht.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ht.Wrap);let i=r.peek();for(;i!=null&&n.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===m1?-1:0}withIndex(e){if(e===fE||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new at(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(rr),r=n.getIterator(rr);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fE?null:this.indexMap_.get(e.toString())}}at.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ext extends at{constructor(){super(new za(KQ),at.EMPTY_NODE,pf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}}const m1=new ext;Object.defineProperties(Ht,{MIN:{value:new Ht(bT,at.EMPTY_NODE)},MAX:{value:new Ht(Yv,m1)}});mNe.__EMPTY_NODE=at.EMPTY_NODE;Ai.__childrenNodeConstructor=at;GPt(m1);YPt(m1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const txt=!0;function qi(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ke(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ai(n,qi(e))}if(!(t instanceof Array)&&txt){const n=[];let s=!1;if(Za(t,(o,a)=>{if(o.substring(0,1)!=="."){const u=qi(a);u.isEmpty()||(s=s||!u.getPriority().isEmpty(),n.push(new Ht(o,u)))}}),n.length===0)return at.EMPTY_NODE;const i=pL(n,KPt,o=>o.name,KQ);if(s){const o=pL(n,rr.getCompare());return new at(i,qi(e),new pf({".priority":o},{".priority":rr}))}else return new at(i,qi(e),pf.Default)}else{let n=at.EMPTY_NODE;return Za(t,(s,r)=>{if(gp(t,s)&&s.substring(0,1)!=="."){const i=qi(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(s,i))}}),n.updatePriority(qi(e))}}QPt(qi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nxt extends F4{constructor(e){super(),this.indexPath_=e,ke(!Zt(e)&&zt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),r=this.extractChild(n.node),i=s.compareTo(r);return i===0?vC(e.name,n.name):i}makePost(e,n){const s=qi(e),r=at.EMPTY_NODE.updateChild(this.indexPath_,s);return new Ht(n,r)}maxPost(){const e=at.EMPTY_NODE.updateChild(this.indexPath_,m1);return new Ht(Yv,e)}toString(){return fNe(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxt extends F4{compare(e,n){const s=e.node.compareTo(n.node);return s===0?vC(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ht.MIN}maxPost(){return Ht.MAX}makePost(e,n){const s=qi(e);return new Ht(n,s)}toString(){return".value"}}const rxt=new sxt;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bNe(t){return{type:"value",snapshotNode:t}}function ET(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function CA(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function IA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function ixt(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.index_=e}updateChild(e,n,s,r,i,o){ke(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(r).equals(s.getChild(r))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(CA(n,a)):ke(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ET(n,s)):o.trackChildChange(IA(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(rr,(r,i)=>{n.hasChild(r)||s.trackChildChange(CA(r,i))}),n.isLeafNode()||n.forEachChild(rr,(r,i)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(i)||s.trackChildChange(IA(r,i,o))}else s.trackChildChange(ET(r,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?at.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.indexedFilter_=new GQ(e.getIndex()),this.index_=e.getIndex(),this.startPost_=SA.getStartPost_(e),this.endPost_=SA.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,r,i,o){return this.matches(new Ht(n,s))||(s=at.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,r,i,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=at.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(at.EMPTY_NODE);const i=this;return n.forEachChild(rr,(o,a)=>{i.matches(new Ht(o,a))||(r=r.updateImmediateChild(o,at.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxt{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new SA(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,r,i,o){return this.rangedFilter_.matches(new Ht(n,s))||(s=at.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,r,i,o):this.fullLimitUpdateChild_(e,n,s,i,o)}updateFullNode(e,n,s){let r;if(n.isLeafNode()||n.isEmpty())r=at.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=at.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(at.EMPTY_NODE);let i;this.reverse_?i=r.getReverseIterator(this.index_):i=r.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,at.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,r,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(p,m)=>d(m,p)}else o=this.index_.getCompare();const a=e;ke(a.numChildren()===this.limit_,"");const u=new Ht(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(n)){const d=a.getImmediateChild(n);let p=r.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===n||a.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);const m=p==null?1:o(p,u);if(h&&!s.isEmpty()&&m>=0)return i?.trackChildChange(IA(n,s,d)),a.updateImmediateChild(n,s);{i?.trackChildChange(CA(n,d));const k=a.updateImmediateChild(n,at.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(i?.trackChildChange(ET(p.name,p.node)),k.updateImmediateChild(p.name,p.node)):k}}else return s.isEmpty()?e:h&&o(c,u)>=0?(i!=null&&(i.trackChildChange(CA(c.name,c.node)),i.trackChildChange(ET(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,at.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ke(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ke(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bT}hasEnd(){return this.endSet_}getIndexEndValue(){return ke(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ke(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yv}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ke(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rr}copy(){const e=new QQ;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function axt(t){return t.loadsAllData()?new GQ(t.getIndex()):t.hasLimit()?new oxt(t):new SA(t)}function Wue(t){const e={};if(t.isDefault())return e;let n;if(t.index_===rr?n="$priority":t.index_===rxt?n="$value":t.index_===fE?n="$key":(ke(t.index_ instanceof nxt,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pi(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=pi(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+pi(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=pi(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+pi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Kue(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL extends cNe{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ke(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=g1("p:rest:"),this.listens_={}}listen(e,n,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=gL.getListenId_(e,s),a={};this.listens_[o]=a;const u=Wue(e._queryParams);this.restRequest_(i+".json",u,(c,h)=>{let d=h;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(i,d,!1,s),fT(this.listens_,o)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",r(p,null)}})}unlisten(e,n){const s=gL.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Wue(e._queryParams),s=e._path.toString(),r=new l4;return this.restRequest_(s+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(n.auth=r.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fC(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=dA(a.responseText)}catch{Qa("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,u)}else a.status!==401&&a.status!==404&&Qa("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxt{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){return{value:null,children:new Map}}function ENe(t,e,n){if(Zt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=zt(e);t.children.has(s)||t.children.set(s,mL());const r=t.children.get(s);e=ms(e),ENe(r,e,n)}}function m$(t,e,n){t.value!==null?n(e,t.value):uxt(t,(s,r)=>{const i=new as(e.toString()+"/"+s);m$(r,i,n)})}function uxt(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Za(this.last_,(s,r)=>{n[s]=n[s]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gue=10*1e3,hxt=30*1e3,dxt=300*1e3;class fxt{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cxt(e);const s=Gue+(hxt-Gue)*Math.random();mS(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Za(e,(r,i)=>{i>0&&gp(this.statsToReport_,r)&&(n[r]=i,s=!0)}),s&&this.server_.reportStats(n),mS(this.reportStats_.bind(this),Math.floor(Math.random()*2*dxt))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _c;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_c||(_c={}));function TNe(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function YQ(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function XQ(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=_c.ACK_USER_WRITE,this.source=TNe()}operationForChild(e){if(Zt(this.path)){if(this.affectedTree.value!=null)return ke(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new as(e));return new _L(An(),n,this.revert)}}else return ke(zt(this.path)===e,"operationForChild called for unrelated child."),new _L(ms(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.source=e,this.path=n,this.type=_c.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new kA(this.source,An()):new kA(this.source,ms(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=_c.OVERWRITE}operationForChild(e){return Zt(this.path)?new Xv(this.source,An(),this.snap.getImmediateChild(e)):new Xv(this.source,ms(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=_c.MERGE}operationForChild(e){if(Zt(this.path)){const n=this.children.subtree(new as(e));return n.isEmpty()?null:n.value?new Xv(this.source,An(),n.value):new AA(this.source,An(),n)}else return ke(zt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new AA(this.source,ms(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const n=zt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxt{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gxt(t,e,n,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(ixt(o.childName,o.snapshotNode))}),aI(t,r,"child_removed",e,s,n),aI(t,r,"child_added",e,s,n),aI(t,r,"child_moved",i,s,n),aI(t,r,"child_changed",e,s,n),aI(t,r,"value",e,s,n),r}function aI(t,e,n,s,r,i){const o=s.filter(a=>a.type===n);o.sort((a,u)=>_xt(t,a,u)),o.forEach(a=>{const u=mxt(t,a,i);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function mxt(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function _xt(t,e,n){if(e.childName==null||n.childName==null)throw dC("Should only compare child_ events.");const s=new Ht(e.childName,e.snapshotNode),r=new Ht(n.childName,n.snapshotNode);return t.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t,e){return{eventCache:t,serverCache:e}}function _S(t,e,n,s){return V4(new Xm(e,n,s),t.serverCache)}function CNe(t,e,n,s){return V4(t.eventCache,new Xm(e,n,s))}function yL(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Jv(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H9;const yxt=()=>(H9||(H9=new za(sPt)),H9);class Cs{static fromObject(e){let n=new Cs(null);return Za(e,(s,r)=>{n=n.set(new as(s),r)}),n}constructor(e,n=yxt()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:An(),value:this.value};if(Zt(e))return null;{const s=zt(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(ms(e),n);return i!=null?{path:mi(new as(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const n=zt(e),s=this.children.get(n);return s!==null?s.subtree(ms(e)):new Cs(null)}}set(e,n){if(Zt(e))return new Cs(n,this.children);{const s=zt(e),i=(this.children.get(s)||new Cs(null)).set(ms(e),n),o=this.children.insert(s,i);return new Cs(this.value,o)}}remove(e){if(Zt(e))return this.children.isEmpty()?new Cs(null):new Cs(null,this.children);{const n=zt(e),s=this.children.get(n);if(s){const r=s.remove(ms(e));let i;return r.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,r),this.value===null&&i.isEmpty()?new Cs(null):new Cs(this.value,i)}else return this}}get(e){if(Zt(e))return this.value;{const n=zt(e),s=this.children.get(n);return s?s.get(ms(e)):null}}setTree(e,n){if(Zt(e))return n;{const s=zt(e),i=(this.children.get(s)||new Cs(null)).setTree(ms(e),n);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new Cs(this.value,o)}}fold(e){return this.fold_(An(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(mi(e,r),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,An(),n)}findOnPath_(e,n,s){const r=this.value?s(n,this.value):!1;if(r)return r;if(Zt(e))return null;{const i=zt(e),o=this.children.get(i);return o?o.findOnPath_(ms(e),mi(n,i),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,An(),n)}foreachOnPath_(e,n,s){if(Zt(e))return this;{this.value&&s(n,this.value);const r=zt(e),i=this.children.get(r);return i?i.foreachOnPath_(ms(e),mi(n,r),s):new Cs(null)}}foreach(e){this.foreach_(An(),e)}foreach_(e,n){this.children.inorderTraversal((s,r)=>{r.foreach_(mi(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.writeTree_=e}static empty(){return new Uc(new Cs(null))}}function yS(t,e,n){if(Zt(e))return new Uc(new Cs(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=xa(r,e);return i=i.updateChild(o,n),new Uc(t.writeTree_.set(r,i))}else{const r=new Cs(n),i=t.writeTree_.setTree(e,r);return new Uc(i)}}}function Que(t,e,n){let s=t;return Za(n,(r,i)=>{s=yS(s,mi(e,r),i)}),s}function Yue(t,e){if(Zt(e))return Uc.empty();{const n=t.writeTree_.setTree(e,new Cs(null));return new Uc(n)}}function _$(t,e){return ww(t,e)!=null}function ww(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xa(n.path,e)):null}function Xue(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(rr,(s,r)=>{e.push(new Ht(s,r))}):t.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Ht(s,r.value))}),e}function Kg(t,e){if(Zt(e))return t;{const n=ww(t,e);return n!=null?new Uc(new Cs(n)):new Uc(t.writeTree_.subtree(e))}}function y$(t){return t.writeTree_.isEmpty()}function TT(t,e){return INe(An(),t.writeTree_,e)}function INe(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(ke(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):n=INe(mi(t,r),i,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(mi(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e){return RNe(e,t)}function vxt(t,e,n,s,r){ke(s>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:r}),r&&(t.visibleWrites=yS(t.visibleWrites,e,n)),t.lastWriteId=s}function wxt(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function bxt(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ke(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let r=s.visible,i=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Ext(a,s.path)?r=!1:mc(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return Txt(t),!0;if(s.snap)t.visibleWrites=Yue(t.visibleWrites,s.path);else{const a=s.children;Za(a,u=>{t.visibleWrites=Yue(t.visibleWrites,mi(s.path,u))})}return!0}else return!1}function Ext(t,e){if(t.snap)return mc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&mc(mi(t.path,n),e))return!0;return!1}function Txt(t){t.visibleWrites=SNe(t.allWrites,Cxt,An()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Cxt(t){return t.visible}function SNe(t,e,n){let s=Uc.empty();for(let r=0;r<t.length;++r){const i=t[r];if(e(i)){const o=i.path;let a;if(i.snap)mc(n,o)?(a=xa(n,o),s=yS(s,a,i.snap)):mc(o,n)&&(a=xa(o,n),s=yS(s,An(),i.snap.getChild(a)));else if(i.children){if(mc(n,o))a=xa(n,o),s=Que(s,a,i.children);else if(mc(o,n))if(a=xa(o,n),Zt(a))s=Que(s,An(),i.children);else{const u=fT(i.children,zt(a));if(u){const c=u.getChild(ms(a));s=yS(s,An(),c)}}}else throw dC("WriteRecord should have .snap or .children")}}return s}function kNe(t,e,n,s,r){if(!s&&!r){const i=ww(t.visibleWrites,e);if(i!=null)return i;{const o=Kg(t.visibleWrites,e);if(y$(o))return n;if(n==null&&!_$(o,An()))return null;{const a=n||at.EMPTY_NODE;return TT(o,a)}}}else{const i=Kg(t.visibleWrites,e);if(!r&&y$(i))return n;if(!r&&n==null&&!_$(i,An()))return null;{const o=function(c){return(c.visible||r)&&(!s||!~s.indexOf(c.writeId))&&(mc(c.path,e)||mc(e,c.path))},a=SNe(t.allWrites,o,e),u=n||at.EMPTY_NODE;return TT(a,u)}}}function Ixt(t,e,n){let s=at.EMPTY_NODE;const r=ww(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(rr,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(n){const i=Kg(t.visibleWrites,e);return n.forEachChild(rr,(o,a)=>{const u=TT(Kg(i,new as(o)),a);s=s.updateImmediateChild(o,u)}),Xue(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=Kg(t.visibleWrites,e);return Xue(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function Sxt(t,e,n,s,r){ke(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=mi(e,n);if(_$(t.visibleWrites,i))return null;{const o=Kg(t.visibleWrites,i);return y$(o)?r.getChild(n):TT(o,r.getChild(n))}}function kxt(t,e,n,s){const r=mi(e,n),i=ww(t.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(n)){const o=Kg(t.visibleWrites,r);return TT(o,s.getNode().getImmediateChild(n))}else return null}function Axt(t,e){return ww(t.visibleWrites,e)}function Rxt(t,e,n,s,r,i,o){let a;const u=Kg(t.visibleWrites,e),c=ww(u,An());if(c!=null)a=c;else if(n!=null)a=TT(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let m=p.getNext();for(;m&&h.length<r;)d(m,s)!==0&&h.push(m),m=p.getNext();return h}else return[]}function Pxt(){return{visibleWrites:Uc.empty(),allWrites:[],lastWriteId:-1}}function vL(t,e,n,s){return kNe(t.writeTree,t.treePath,e,n,s)}function JQ(t,e){return Ixt(t.writeTree,t.treePath,e)}function Jue(t,e,n,s){return Sxt(t.writeTree,t.treePath,e,n,s)}function wL(t,e){return Axt(t.writeTree,mi(t.treePath,e))}function xxt(t,e,n,s,r,i){return Rxt(t.writeTree,t.treePath,e,n,s,r,i)}function ZQ(t,e,n){return kxt(t.writeTree,t.treePath,e,n)}function ANe(t,e){return RNe(mi(t.treePath,e),t.writeTree)}function RNe(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxt{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;ke(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ke(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(s,IA(s,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(s,CA(s,r.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(s,ET(s,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(s,IA(s,e.snapshotNode,r.oldSnap));else throw dC("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dxt{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const PNe=new Dxt;class eY{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Xm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZQ(this.writes_,e,s)}}getChildAfterChild(e,n,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jv(this.viewCache_),i=xxt(this.writes_,r,n,1,s,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oxt(t){return{filter:t}}function Lxt(t,e){ke(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ke(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Mxt(t,e,n,s,r){const i=new Nxt;let o,a;if(n.type===_c.OVERWRITE){const c=n;c.source.fromUser?o=v$(t,e,c.path,c.snap,s,r,i):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Zt(c.path),o=bL(t,e,c.path,c.snap,s,r,a,i))}else if(n.type===_c.MERGE){const c=n;c.source.fromUser?o=Vxt(t,e,c.path,c.children,s,r,i):(ke(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=w$(t,e,c.path,c.children,s,r,a,i))}else if(n.type===_c.ACK_USER_WRITE){const c=n;c.revert?o=jxt(t,e,c.path,s,r,i):o=Uxt(t,e,c.path,c.affectedTree,s,r,i)}else if(n.type===_c.LISTEN_COMPLETE)o=qxt(t,e,n.path,s,i);else throw dC("Unknown operation type: "+n.type);const u=i.getChanges();return Fxt(e,o,u),{viewCache:o,changes:u}}function Fxt(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=yL(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&n.push(bNe(yL(e)))}}function xNe(t,e,n,s,r,i){const o=e.eventCache;if(wL(s,n)!=null)return e;{let a,u;if(Zt(n))if(ke(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Jv(e),h=c instanceof at?c:at.EMPTY_NODE,d=JQ(s,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const c=vL(s,Jv(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const c=zt(n);if(c===".priority"){ke(Ym(n)===1,"Can't have a priority with additional path components");const h=o.getNode();u=e.serverCache.getNode();const d=Jue(s,n,h,u);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=ms(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const p=Jue(s,n,o.getNode(),u);p!=null?d=o.getNode().getImmediateChild(c).updateChild(h,p):d=o.getNode().getImmediateChild(c)}else d=ZQ(s,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,h,r,i):a=o.getNode()}}return _S(e,a,o.isFullyInitialized()||Zt(n),t.filter.filtersNodes())}}function bL(t,e,n,s,r,i,o,a){const u=e.serverCache;let c;const h=o?t.filter:t.filter.getIndexedFilter();if(Zt(n))c=h.updateFullNode(u.getNode(),s,null);else if(h.filtersNodes()&&!u.isFiltered()){const m=u.getNode().updateChild(n,s);c=h.updateFullNode(u.getNode(),m,null)}else{const m=zt(n);if(!u.isCompleteForPath(n)&&Ym(n)>1)return e;const w=ms(n),P=u.getNode().getImmediateChild(m).updateChild(w,s);m===".priority"?c=h.updatePriority(u.getNode(),P):c=h.updateChild(u.getNode(),m,P,w,PNe,null)}const d=CNe(e,c,u.isFullyInitialized()||Zt(n),h.filtersNodes()),p=new eY(r,d,i);return xNe(t,d,n,r,p,a)}function v$(t,e,n,s,r,i,o){const a=e.eventCache;let u,c;const h=new eY(r,e,i);if(Zt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),u=_S(e,c,!0,t.filter.filtersNodes());else{const d=zt(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),u=_S(e,c,a.isFullyInitialized(),a.isFiltered());else{const p=ms(n),m=a.getNode().getImmediateChild(d);let w;if(Zt(p))w=s;else{const k=h.getCompleteChild(d);k!=null?dNe(p)===".priority"&&k.getChild(pNe(p)).isEmpty()?w=k:w=k.updateChild(p,s):w=at.EMPTY_NODE}if(m.equals(w))u=e;else{const k=t.filter.updateChild(a.getNode(),d,w,p,h,o);u=_S(e,k,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function Zue(t,e){return t.eventCache.isCompleteForChild(e)}function Vxt(t,e,n,s,r,i,o){let a=e;return s.foreach((u,c)=>{const h=mi(n,u);Zue(e,zt(h))&&(a=v$(t,a,h,c,r,i,o))}),s.foreach((u,c)=>{const h=mi(n,u);Zue(e,zt(h))||(a=v$(t,a,h,c,r,i,o))}),a}function ece(t,e,n){return n.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function w$(t,e,n,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,c;Zt(n)?c=s:c=new Cs(null).setTree(n,s);const h=e.serverCache.getNode();return c.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),w=ece(t,m,p);u=bL(t,u,new as(d),w,r,i,o,a)}}),c.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const w=e.serverCache.getNode().getImmediateChild(d),k=ece(t,w,p);u=bL(t,u,new as(d),k,r,i,o,a)}}),u}function Uxt(t,e,n,s,r,i,o){if(wL(r,n)!=null)return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(s.value!=null){if(Zt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return bL(t,e,n,u.getNode().getChild(n),r,i,a,o);if(Zt(n)){let c=new Cs(null);return u.getNode().forEachChild(fE,(h,d)=>{c=c.set(new as(h),d)}),w$(t,e,n,c,r,i,a,o)}else return e}else{let c=new Cs(null);return s.foreach((h,d)=>{const p=mi(n,h);u.isCompleteForPath(p)&&(c=c.set(h,u.getNode().getChild(p)))}),w$(t,e,n,c,r,i,a,o)}}function qxt(t,e,n,s,r){const i=e.serverCache,o=CNe(e,i.getNode(),i.isFullyInitialized()||Zt(n),i.isFiltered());return xNe(t,o,n,s,PNe,r)}function jxt(t,e,n,s,r,i){let o;if(wL(s,n)!=null)return e;{const a=new eY(s,e,r),u=e.eventCache.getNode();let c;if(Zt(n)||zt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=vL(s,Jv(e));else{const d=e.serverCache.getNode();ke(d instanceof at,"serverChildren would be complete if leaf node"),h=JQ(s,d)}h=h,c=t.filter.updateFullNode(u,h,i)}else{const h=zt(n);let d=ZQ(s,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=u.getImmediateChild(h)),d!=null?c=t.filter.updateChild(u,h,d,ms(n),a,i):e.eventCache.getNode().hasChild(h)?c=t.filter.updateChild(u,h,at.EMPTY_NODE,ms(n),a,i):c=u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=vL(s,Jv(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,i)))}return o=e.serverCache.isFullyInitialized()||wL(s,An())!=null,_S(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxt{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,r=new GQ(s.getIndex()),i=axt(s);this.processor_=Oxt(i);const o=n.serverCache,a=n.eventCache,u=r.updateFullNode(at.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(at.EMPTY_NODE,a.getNode(),null),h=new Xm(u,o.isFullyInitialized(),r.filtersNodes()),d=new Xm(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=V4(d,h),this.eventGenerator_=new pxt(this.query_)}get query(){return this.query_}}function $xt(t){return t.viewCache_.serverCache.getNode()}function zxt(t){return yL(t.viewCache_)}function Hxt(t,e){const n=Jv(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Zt(e)&&!n.getImmediateChild(zt(e)).isEmpty())?n.getChild(e):null}function tce(t){return t.eventRegistrations_.length===0}function Wxt(t,e){t.eventRegistrations_.push(e)}function nce(t,e,n){const s=[];if(n){ke(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,r);o&&s.push(o)})}if(e){let r=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return s}function sce(t,e,n,s){e.type===_c.MERGE&&e.source.queryId!==null&&(ke(Jv(t.viewCache_),"We should always have a full cache before handling merges"),ke(yL(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,i=Mxt(t.processor_,r,e,n,s);return Lxt(t.processor_,i.viewCache),ke(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,NNe(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Kxt(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rr,(i,o)=>{s.push(ET(i,o))}),n.isFullyInitialized()&&s.push(bNe(n.getNode())),NNe(t,s,n.getNode(),e)}function NNe(t,e,n,s){const r=s?[s]:t.eventRegistrations_;return gxt(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EL;class DNe{constructor(){this.views=new Map}}function Gxt(t){ke(!EL,"__referenceConstructor has already been defined"),EL=t}function Qxt(){return ke(EL,"Reference.ts has not been loaded"),EL}function Yxt(t){return t.views.size===0}function tY(t,e,n,s){const r=e.source.queryId;if(r!==null){const i=t.views.get(r);return ke(i!=null,"SyncTree gave us an op for an invalid query."),sce(i,e,n,s)}else{let i=[];for(const o of t.views.values())i=i.concat(sce(o,e,n,s));return i}}function ONe(t,e,n,s,r){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=vL(n,r?s:null),u=!1;a?u=!0:s instanceof at?(a=JQ(n,s),u=!1):(a=at.EMPTY_NODE,u=!1);const c=V4(new Xm(a,u,!1),new Xm(s,r,!1));return new Bxt(e,c)}return o}function Xxt(t,e,n,s,r,i){const o=ONe(t,e,s,r,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Wxt(o,n),Kxt(o,n)}function Jxt(t,e,n,s){const r=e._queryIdentifier,i=[];let o=[];const a=Jm(t);if(r==="default")for(const[u,c]of t.views.entries())o=o.concat(nce(c,n,s)),tce(c)&&(t.views.delete(u),c.query._queryParams.loadsAllData()||i.push(c.query));else{const u=t.views.get(r);u&&(o=o.concat(nce(u,n,s)),tce(u)&&(t.views.delete(r),u.query._queryParams.loadsAllData()||i.push(u.query)))}return a&&!Jm(t)&&i.push(new(Qxt())(e._repo,e._path)),{removed:i,events:o}}function LNe(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Gg(t,e){let n=null;for(const s of t.views.values())n=n||Hxt(s,e);return n}function MNe(t,e){if(e._queryParams.loadsAllData())return q4(t);{const s=e._queryIdentifier;return t.views.get(s)}}function FNe(t,e){return MNe(t,e)!=null}function Jm(t){return q4(t)!=null}function q4(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TL;function Zxt(t){ke(!TL,"__referenceConstructor has already been defined"),TL=t}function eNt(){return ke(TL,"Reference.ts has not been loaded"),TL}let tNt=1;class rce{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cs(null),this.pendingWriteTree_=Pxt(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VNe(t,e,n,s,r){return vxt(t.pendingWriteTree_,e,n,s,r),r?y1(t,new Xv(TNe(),e,n)):[]}function By(t,e,n=!1){const s=wxt(t.pendingWriteTree_,e);if(bxt(t.pendingWriteTree_,e)){let i=new Cs(null);return s.snap!=null?i=i.set(An(),!0):Za(s.children,o=>{i=i.set(new as(o),!0)}),y1(t,new _L(s.path,i,n))}else return[]}function _1(t,e,n){return y1(t,new Xv(YQ(),e,n))}function nNt(t,e,n){const s=Cs.fromObject(n);return y1(t,new AA(YQ(),e,s))}function sNt(t,e){return y1(t,new kA(YQ(),e))}function rNt(t,e,n){const s=sY(t,n);if(s){const r=rY(s),i=r.path,o=r.queryId,a=xa(i,e),u=new kA(XQ(o),a);return iY(t,i,u)}else return[]}function CL(t,e,n,s,r=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||FNe(o,e))){const u=Jxt(o,e,n,s);Yxt(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const c=u.removed;if(a=u.events,!r){const h=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(p,m)=>Jm(m));if(h&&!d){const p=t.syncPointTree_.subtree(i);if(!p.isEmpty()){const m=aNt(p);for(let w=0;w<m.length;++w){const k=m[w],P=k.query,O=BNe(t,k);t.listenProvider_.startListening(vS(P),RA(t,P),O.hashFn,O.onComplete)}}}!d&&c.length>0&&!s&&(h?t.listenProvider_.stopListening(vS(e),null):c.forEach(p=>{const m=t.queryToTagMap.get(j4(p));t.listenProvider_.stopListening(vS(p),m)}))}lNt(t,c)}return a}function UNe(t,e,n,s){const r=sY(t,s);if(r!=null){const i=rY(r),o=i.path,a=i.queryId,u=xa(o,e),c=new Xv(XQ(a),u,n);return iY(t,o,c)}else return[]}function iNt(t,e,n,s){const r=sY(t,s);if(r){const i=rY(r),o=i.path,a=i.queryId,u=xa(o,e),c=Cs.fromObject(n),h=new AA(XQ(a),u,c);return iY(t,o,h)}else return[]}function b$(t,e,n,s=!1){const r=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(p,m)=>{const w=xa(p,r);i=i||Gg(m,w),o=o||Jm(m)});let a=t.syncPointTree_.get(r);a?(o=o||Jm(a),i=i||Gg(a,An())):(a=new DNe,t.syncPointTree_=t.syncPointTree_.set(r,a));let u;i!=null?u=!0:(u=!1,i=at.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((m,w)=>{const k=Gg(w,An());k&&(i=i.updateImmediateChild(m,k))}));const c=FNe(a,e);if(!c&&!e._queryParams.loadsAllData()){const p=j4(e);ke(!t.queryToTagMap.has(p),"View does not exist, but we have a tag");const m=uNt();t.queryToTagMap.set(p,m),t.tagToQueryMap.set(m,p)}const h=U4(t.pendingWriteTree_,r);let d=Xxt(a,e,n,h,i,u);if(!c&&!o&&!s){const p=MNe(a,e);d=d.concat(cNt(t,e,p))}return d}function nY(t,e,n){const r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const u=xa(o,e),c=Gg(a,u);if(c)return c});return kNe(r,e,i,n,!0)}function oNt(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,h)=>{const d=xa(c,n);s=s||Gg(h,d)});let r=t.syncPointTree_.get(n);r?s=s||Gg(r,An()):(r=new DNe,t.syncPointTree_=t.syncPointTree_.set(n,r));const i=s!=null,o=i?new Xm(s,!0,!1):null,a=U4(t.pendingWriteTree_,e._path),u=ONe(r,e,a,i?o.getNode():at.EMPTY_NODE,i);return zxt(u)}function y1(t,e){return qNe(e,t.syncPointTree_,null,U4(t.pendingWriteTree_,An()))}function qNe(t,e,n,s){if(Zt(t.path))return jNe(t,e,n,s);{const r=e.get(An());n==null&&r!=null&&(n=Gg(r,An()));let i=[];const o=zt(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,h=ANe(s,o);i=i.concat(qNe(a,u,c,h))}return r&&(i=i.concat(tY(r,t,s,n))),i}}function jNe(t,e,n,s){const r=e.get(An());n==null&&r!=null&&(n=Gg(r,An()));let i=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=ANe(s,o),h=t.operationForChild(o);h&&(i=i.concat(jNe(h,a,u,c)))}),r&&(i=i.concat(tY(r,t,s,n))),i}function BNe(t,e){const n=e.query,s=RA(t,n);return{hashFn:()=>($xt(e)||at.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return s?rNt(t,n._path,s):sNt(t,n._path);{const i=oPt(r,n);return CL(t,n,null,i)}}}}function RA(t,e){const n=j4(e);return t.queryToTagMap.get(n)}function j4(t){return t._path.toString()+"$"+t._queryIdentifier}function sY(t,e){return t.tagToQueryMap.get(e)}function rY(t){const e=t.indexOf("$");return ke(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new as(t.substr(0,e))}}function iY(t,e,n){const s=t.syncPointTree_.get(e);ke(s,"Missing sync point for query tag that we're tracking");const r=U4(t.pendingWriteTree_,e);return tY(s,n,r,null)}function aNt(t){return t.fold((e,n,s)=>{if(n&&Jm(n))return[q4(n)];{let r=[];return n&&(r=LNe(n)),Za(s,(i,o)=>{r=r.concat(o)}),r}})}function vS(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(eNt())(t._repo,t._path):t}function lNt(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const r=j4(s),i=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i)}}}function uNt(){return tNt++}function cNt(t,e,n){const s=e._path,r=RA(t,e),i=BNe(t,n),o=t.listenProvider_.startListening(vS(e),r,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(s);if(r)ke(!Jm(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((c,h,d)=>{if(!Zt(c)&&h&&Jm(h))return[q4(h).query];{let p=[];return h&&(p=p.concat(LNe(h).map(m=>m.query))),Za(d,(m,w)=>{p=p.concat(w)}),p}});for(let c=0;c<u.length;++c){const h=u[c];t.listenProvider_.stopListening(vS(h),RA(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new oY(n)}node(){return this.node_}}class aY{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=mi(this.path_,e);return new aY(this.syncTree_,n)}node(){return nY(this.syncTree_,this.path_)}}const hNt=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},ice=function(t,e,n){if(!t||typeof t!="object")return t;if(ke(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dNt(t[".sv"],e,n);if(typeof t[".sv"]=="object")return fNt(t[".sv"],e);ke(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dNt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ke(!1,"Unexpected server value: "+t)}},fNt=function(t,e,n){t.hasOwnProperty("increment")||ke(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&ke(!1,"Unexpected increment value: "+s);const r=e.node();if(ke(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const o=r.getValue();return typeof o!="number"?s:o+s},pNt=function(t,e,n,s){return lY(e,new aY(n,t),s)},$Ne=function(t,e,n){return lY(t,new oY(e),n)};function lY(t,e,n){const s=t.getPriority().val(),r=ice(s,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=ice(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Ai(a,qi(r)):t}else{const o=t;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new Ai(r))),o.forEachChild(rr,(a,u)=>{const c=lY(u,e.getImmediateChild(a),n);c!==u&&(i=i.updateImmediateChild(a,c))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function cY(t,e){let n=e instanceof as?e:new as(e),s=t,r=zt(n);for(;r!==null;){const i=fT(s.node.children,r)||{children:{},childCount:0};s=new uY(r,s,i),n=ms(n),r=zt(n)}return s}function bC(t){return t.node.value}function zNe(t,e){t.node.value=e,E$(t)}function HNe(t){return t.node.childCount>0}function gNt(t){return bC(t)===void 0&&!HNe(t)}function B4(t,e){Za(t.node.children,(n,s)=>{e(new uY(n,t,s))})}function WNe(t,e,n,s){n&&e(t),B4(t,r=>{WNe(r,e,!0)})}function mNt(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function v1(t){return new as(t.parent===null?t.name:v1(t.parent)+"/"+t.name)}function E$(t){t.parent!==null&&_Nt(t.parent,t.name,t)}function _Nt(t,e,n){const s=gNt(n),r=gp(t.node.children,e);s&&r?(delete t.node.children[e],t.node.childCount--,E$(t)):!s&&!r&&(t.node.children[e]=n.node,t.node.childCount++,E$(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yNt=/[\[\].#$\/\u0000-\u001F\u007F]/,vNt=/[\[\].#$\u0000-\u001F\u007F]/,W9=10*1024*1024,KNe=function(t){return typeof t=="string"&&t.length!==0&&!yNt.test(t)},GNe=function(t){return typeof t=="string"&&t.length!==0&&!vNt.test(t)},wNt=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),GNe(t)},bNt=function(t,e,n,s){hY($G(t,"value"),e,n)},hY=function(t,e,n){const s=n instanceof as?new UPt(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+_y(s));if(typeof e=="function")throw new Error(t+"contains a function "+_y(s)+" with contents = "+e.toString());if(Hxe(e))throw new Error(t+"contains "+e.toString()+" "+_y(s));if(typeof e=="string"&&e.length>W9/3&&h4(e)>W9)throw new Error(t+"contains a string greater than "+W9+" utf8 bytes "+_y(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Za(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!KNe(o)))throw new Error(t+" contains an invalid key ("+o+") "+_y(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);qPt(s,o),hY(t,a,s),jPt(s)}),r&&i)throw new Error(t+' contains ".value" child '+_y(s)+" in addition to actual children.")}},QNe=function(t,e,n,s){if(!GNe(n))throw new Error($G(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ENt=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QNe(t,e,n)},YNe=function(t,e){if(zt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},TNt=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!KNe(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!wNt(n))throw new Error($G(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CNt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function dY(t,e){let n=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();n!==null&&!HQ(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(r)}n&&t.eventLists_.push(n)}function XNe(t,e,n){dY(t,n),JNe(t,s=>HQ(s,e))}function _d(t,e,n){dY(t,n),JNe(t,s=>mc(s,e)||mc(e,s))}function JNe(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const r=t.eventLists_[s];if(r){const i=r.path;e(i)?(INt(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function INt(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();gS&&xo("event: "+n.toString()),wC(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SNt="repo_interrupt",kNt=25;class ANt{constructor(e,n,s,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CNt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mL(),this.transactionQueueTree_=new uY,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RNt(t,e,n){if(t.stats_=$Q(t.repoInfo_),t.forceRestClient_||cPt())t.server_=new gL(t.repoInfo_,(s,r,i,o)=>{oce(t,s,r,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ace(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pi(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new wf(t.repoInfo_,e,(s,r,i,o)=>{oce(t,s,r,i,o)},s=>{ace(t,s)},s=>{xNt(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=gPt(t.repoInfo_,()=>new fxt(t.stats_,t.server_)),t.infoData_=new lxt,t.infoSyncTree_=new rce({startListening:(s,r,i,o)=>{let a=[];const u=t.infoData_.getNode(s._path);return u.isEmpty()||(a=_1(t.infoSyncTree_,s._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pY(t,"connected",!1),t.serverSyncTree_=new rce({startListening:(s,r,i,o)=>(t.server_.listen(s,i,r,(a,u)=>{const c=o(a,u);_d(t.eventQueue_,s._path,c)}),[]),stopListening:(s,r)=>{t.server_.unlisten(s,r)}})}function PNt(t){const n=t.infoData_.getNode(new as(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function fY(t){return hNt({timestamp:PNt(t)})}function oce(t,e,n,s,r){t.dataUpdateCount++;const i=new as(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(s){const u=KO(n,c=>qi(c));o=iNt(t.serverSyncTree_,i,u,r)}else{const u=qi(n);o=UNe(t.serverSyncTree_,i,u,r)}else if(s){const u=KO(n,c=>qi(c));o=nNt(t.serverSyncTree_,i,u)}else{const u=qi(n);o=_1(t.serverSyncTree_,i,u)}let a=i;o.length>0&&(a=z4(t,i)),_d(t.eventQueue_,a,o)}function ace(t,e){pY(t,"connected",e),e===!1&&ONt(t)}function xNt(t,e){Za(e,(n,s)=>{pY(t,n,s)})}function pY(t,e,n){const s=new as("/.info/"+e),r=qi(n);t.infoData_.updateSnapshot(s,r);const i=_1(t.infoSyncTree_,s,r);_d(t.eventQueue_,s,i)}function ZNe(t){return t.nextWriteId_++}function NNt(t,e,n){const s=oNt(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(r=>{const i=qi(r).withIndex(e._queryParams.getIndex());b$(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=_1(t.serverSyncTree_,e._path,i);else{const a=RA(t.serverSyncTree_,e);o=UNe(t.serverSyncTree_,e._path,i,a)}return _d(t.eventQueue_,e._path,o),CL(t.serverSyncTree_,e,n,null,!0),i},r=>($4(t,"get for query "+pi(e)+" failed: "+r),Promise.reject(new Error(r))))}function DNt(t,e,n,s,r){$4(t,"set",{path:e.toString(),value:n,priority:s});const i=fY(t),o=qi(n,s),a=nY(t.serverSyncTree_,e),u=$Ne(o,a,i),c=ZNe(t),h=VNe(t.serverSyncTree_,e,u,c,!0);dY(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(p,m)=>{const w=p==="ok";w||Qa("set at "+e+" failed: "+p);const k=By(t.serverSyncTree_,c,!w);_d(t.eventQueue_,e,k),VNt(t,r,p,m)});const d=rDe(t,e);z4(t,d),_d(t.eventQueue_,d,[])}function ONt(t){$4(t,"onDisconnectEvents");const e=fY(t),n=mL();m$(t.onDisconnect_,An(),(r,i)=>{const o=pNt(r,i,t.serverSyncTree_,e);ENe(n,r,o)});let s=[];m$(n,An(),(r,i)=>{s=s.concat(_1(t.serverSyncTree_,r,i));const o=rDe(t,r);z4(t,o)}),t.onDisconnect_=mL(),_d(t.eventQueue_,An(),s)}function LNt(t,e,n){let s;zt(e._path)===".info"?s=b$(t.infoSyncTree_,e,n):s=b$(t.serverSyncTree_,e,n),XNe(t.eventQueue_,e._path,s)}function MNt(t,e,n){let s;zt(e._path)===".info"?s=CL(t.infoSyncTree_,e,n):s=CL(t.serverSyncTree_,e,n),XNe(t.eventQueue_,e._path,s)}function FNt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(SNt)}function $4(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),xo(n,...e)}function VNt(t,e,n,s){e&&wC(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function eDe(t,e,n){return nY(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function gY(t,e=t.transactionQueueTree_){if(e||H4(t,e),bC(e)){const n=nDe(t,e);ke(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&UNt(t,v1(e),n)}else HNe(e)&&B4(e,n=>{gY(t,n)})}function UNt(t,e,n){const s=n.map(c=>c.currentWriteId),r=eDe(t,e,s);let i=r;const o=r.hash();for(let c=0;c<n.length;c++){const h=n[c];ke(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=xa(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),u=e;t.server_.put(u.toString(),a,c=>{$4(t,"transaction put response",{path:u.toString(),status:c});let h=[];if(c==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(By(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();H4(t,cY(t.transactionQueueTree_,e)),gY(t,t.transactionQueueTree_),_d(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)wC(d[p])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Qa("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}z4(t,e)}},o)}function z4(t,e){const n=tDe(t,e),s=v1(n),r=nDe(t,n);return qNt(t,r,s),s}function qNt(t,e,n){if(e.length===0)return;const s=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=xa(n,u.path);let h=!1,d;if(ke(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,d=u.abortReason,r=r.concat(By(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=kNt)h=!0,d="maxretry",r=r.concat(By(t.serverSyncTree_,u.currentWriteId,!0));else{const p=eDe(t,u.path,o);u.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){hY("transaction failed: Data returned ",m,u.path);let w=qi(m);typeof m=="object"&&m!=null&&gp(m,".priority")||(w=w.updatePriority(p.getPriority()));const P=u.currentWriteId,O=fY(t),M=$Ne(w,p,O);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=M,u.currentWriteId=ZNe(t),o.splice(o.indexOf(P),1),r=r.concat(VNe(t.serverSyncTree_,u.path,M,u.currentWriteId,u.applyLocally)),r=r.concat(By(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",r=r.concat(By(t.serverSyncTree_,u.currentWriteId,!0))}_d(t.eventQueue_,n,r),r=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(d),!1,null))))}H4(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)wC(s[a]);gY(t,t.transactionQueueTree_)}function tDe(t,e){let n,s=t.transactionQueueTree_;for(n=zt(e);n!==null&&bC(s)===void 0;)s=cY(s,n),e=ms(e),n=zt(e);return s}function nDe(t,e){const n=[];return sDe(t,e,n),n.sort((s,r)=>s.order-r.order),n}function sDe(t,e,n){const s=bC(e);if(s)for(let r=0;r<s.length;r++)n.push(s[r]);B4(e,r=>{sDe(t,r,n)})}function H4(t,e){const n=bC(e);if(n){let s=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[s]=n[r],s++);n.length=s,zNe(e,n.length>0?n:void 0)}B4(e,s=>{H4(t,s)})}function rDe(t,e){const n=v1(tDe(t,e)),s=cY(t.transactionQueueTree_,e);return mNt(s,r=>{K9(t,r)}),K9(t,s),WNe(s,r=>{K9(t,r)}),n}function K9(t,e){const n=bC(e);if(n){const s=[];let r=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ke(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ke(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(By(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?zNe(e,void 0):n.length=i+1,_d(t.eventQueue_,v1(e),r);for(let o=0;o<s.length;o++)wC(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jNt(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let r=n[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function BNt(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Qa(`Invalid query segment '${n}' in query '${t}'`)}return e}const lce=function(t,e){const n=$Nt(t),s=n.namespace;n.domain==="firebase.com"&&np(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&np("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||tPt();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new sNe(n.host,n.secure,s,r,e,"",s!==n.subdomain),path:new as(n.pathString)}},$Nt=function(t){let e="",n="",s="",r="",i="",o=!0,a="https",u=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(r=jNt(t.substring(h,d)));const p=BNt(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(c+1),10)):c=e.length;const m=e.slice(0,c);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=s}"ns"in p&&(i=p.ns)}return{host:e,port:u,domain:n,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNt{constructor(e,n,s,r){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pi(this.snapshot.exportVal())}}class HNt{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iDe{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ke(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(e,n,s,r){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=r}get key(){return Zt(this._path)?null:dNe(this._path)}get ref(){return new mp(this._repo,this._path)}get _queryIdentifier(){const e=Kue(this._queryParams),n=jQ(e);return n==="{}"?"default":n}get _queryObject(){return Kue(this._queryParams)}isEqual(e){if(e=Gn(e),!(e instanceof mY))return!1;const n=this._repo===e._repo,s=HQ(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+VPt(this._path)}}class mp extends mY{constructor(e,n){super(e,n,new QQ,!1)}get parent(){const e=pNe(this._path);return e===null?null:new mp(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class PA{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new as(e),s=T$(this.ref,e);return new PA(this._node.getChild(n),s,rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,r)=>e(new PA(r,T$(this.ref,s),rr)))}hasChild(e){const n=new as(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function OOt(t,e){return t=Gn(t),t._checkNotDeleted("ref"),e!==void 0?T$(t._root,e):t._root}function T$(t,e){return t=Gn(t),zt(t._path)===null?ENt("child","path",e):QNe("child","path",e),new mp(t._repo,mi(t._path,e))}function LOt(t){return YNe("remove",t._path),WNt(t,null)}function WNt(t,e){t=Gn(t),YNe("set",t._path),bNt("set",e,t._path);const n=new l4;return DNt(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function MOt(t){t=Gn(t);const e=new iDe(()=>{}),n=new W4(e);return NNt(t._repo,t,n).then(s=>new PA(s,new mp(t._repo,t._path),t._queryParams.getIndex()))}class W4{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new zNt("value",this,new PA(e.snapshotNode,new mp(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new HNt(this,e,n):null}matches(e){return e instanceof W4?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function KNt(t,e,n,s,r){const i=new iDe(n,void 0),o=new W4(i);return LNt(t._repo,t,o),()=>MNt(t._repo,t,o)}function FOt(t,e,n,s){return KNt(t,"value",e)}Gxt(mp);Zxt(mp);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GNt="FIREBASE_DATABASE_EMULATOR_HOST",C$={};let QNt=!1;function YNt(t,e,n,s){const r=e.lastIndexOf(":"),i=e.substring(0,r),o=Id(i);t.repoInfo_=new sNe(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function XNt(t,e,n,s,r){let i=s||t.options.databaseURL;i===void 0&&(t.options.projectId||np("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xo("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=lce(i,r),a=o.repoInfo,u;typeof process<"u"&&Rue&&(u=Rue[GNt]),u?(i=`http://${u}?ns=${a.namespace}`,o=lce(i,r),a=o.repoInfo):o.repoInfo.secure;const c=new dPt(t.name,t.options,e);TNt("Invalid Firebase Database URL",o),Zt(o.path)||np("Database URL must point to the root of a Firebase Database (not including a child path).");const h=ZNt(a,t,c,new hPt(t,n));return new eDt(h,t)}function JNt(t,e){const n=C$[e];(!n||n[t.key]!==t)&&np(`Database ${e}(${t.repoInfo_}) has already been deleted.`),FNt(t),delete n[t.key]}function ZNt(t,e,n,s){let r=C$[e.name];r||(r={},C$[e.name]=r);let i=r[t.toURLString()];return i&&np("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ANt(t,QNt,n,s),r[t.toURLString()]=i,i}class eDt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(RNt(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mp(this._repo,An())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JNt(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&np("Cannot call "+e+" on a deleted database.")}}function tDt(t=f4(),e){const n=r1(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=qG("database");s&&nDt(n,...s)}return n}function nDt(t,e,n,s={}){t=Gn(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Bm(s,i.repoInfo_.emulatorOptions))return;np("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)s.mockUserToken&&np('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Wx(Wx.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:jG(s.mockUserToken,t.app.options.projectId);o=new Wx(a)}Id(e)&&(u4(e),c4("Database",!0)),YNt(i,r,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sDt(t){Q1t(m_),$m(new Xf("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return XNt(s,r,i,n)},"PUBLIC").setMultipleInstances(!0)),$l(Pue,xue,t),$l(Pue,xue,"esm2020")}wf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};wf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};sDt();var sy={};const ni={apiKey:sy.FIREBASE_API_KEY||"AIzaSyC2RcDl7MRYRKMkX2szBsF67a9jHub0VV4",authDomain:sy.FIREBASE_AUTH_DOMAIN||"slide-view-91a09.firebaseapp.com",projectId:sy.FIREBASE_PROJECT_ID||"slide-view-91a09",storageBucket:sy.FIREBASE_STORAGE_BUCKET||"slide-view-91a09.appspot.com",messagingSenderId:sy.FIREBASE_MESSAGING_SENDER_ID||"951171862827",appId:sy.FIREBASE_APP_ID||"1:951171862827:web:14701b2a5f1cba5b96756e",databaseURL:sy.FIREBASE_DATABASE_URL||"https://slide-view-91a09-default-rtdb.asia-southeast1.firebasedatabase.app/"};console.log("🔐 Firebase 설정 확인:",{apiKey:ni.apiKey?"설정됨":"설정 안됨",authDomain:ni.authDomain?"설정됨":"설정 안됨",projectId:ni.projectId?"설정됨":"설정 안됨",storageBucket:ni.storageBucket?"설정됨":"설정 안됨",messagingSenderId:ni.messagingSenderId?"설정됨":"설정 안됨",appId:ni.appId?"설정됨":"설정 안됨",databaseURL:ni.databaseURL?"설정됨":"없음"});console.log("🔐 Firebase 설정 값 확인:",{apiKey:ni.apiKey?`${ni.apiKey.substring(0,10)}...`:"없음",authDomain:ni.authDomain,projectId:ni.projectId,databaseURL:ni.databaseURL?"설정됨":"없음"});(!ni.apiKey||!ni.authDomain||!ni.projectId)&&console.warn("⚠️ Firebase 설정이 완전하지 않습니다. 환경 변수를 확인해주세요.");let Zs,Js,$y,I$,S$;ni.apiKey&&ni.authDomain&&ni.projectId?(Zs=_1e(ni),Js=gSt(Zs),$y=new tf,I$=mxe(Zs),S$=H1t(Zs),tDt(Zs)):(console.warn("⚠️ Firebase가 초기화되지 않았습니다. 일부 기능(인증, 투표 등)이 작동하지 않을 수 있습니다."),Js=null,$y=null,I$=null,S$=null);const VOt=Object.freeze(Object.defineProperty({__proto__:null,get auth(){return Js},get db(){return I$},get firebaseApp(){return Zs},get googleProvider(){return $y},get storage(){return S$}},Symbol.toStringTag,{value:"Module"}));function rDt(){return Bl(WRe)}const ws=qm(null),nh=qm(!0),RP=qm(null);let Bw=null,uce=!1;function iDt(){const t=rDt(),e=Zs?mxe(Zs):null;e?console.log("✅ Firestore 초기화 완료"):console.error("❌ Firestore가 초기화되지 않았습니다."),Zs?console.log("✅ Firebase 설정 완료"):console.warn("⚠️ Firebase가 설정되지 않았습니다. 일부 기능이 제한될 수 있습니다.");const n=async u=>{if(!e)throw console.log("⚠️ Firestore가 초기화되지 않았습니다."),new Error("Firestore is not initialized.");const c=3;let h=0;for(;h<c;)try{console.log("🔍 사용자 정보 확인 중:",u.email,`(시도 ${h+1}/${c})`);const d=gRt(e,"users",u.uid),p=await bue(d);if(p.exists()){const m=p.data();return console.log("✅ 기존 사용자 발견:",m),await Eue(d,{lastLoginAt:V9()},{merge:!0}),{...u,role:m.role||"student"}}else{console.log("🆕 새 사용자 등록 시작:",u.email);const m=!1,w=["place.coach@gmail.com","jplee@milestonz.com"],k=w.includes(u.email||"");console.log("🔍 관리자 이메일 확인:",{userEmail:u.email,adminEmails:w,isAdminEmail:k});const P={uid:u.uid,email:u.email,displayName:u.displayName,photoURL:u.photoURL,role:k?"admin":"student",createdAt:V9(),lastLoginAt:V9()};console.log("💾 새 사용자 정보 저장 중:",P),await Eue(d,P),console.log("✅ 새 사용자 등록 완료:",u.email);const O=await bue(d);if(O.exists())console.log("✅ 사용자 등록 확인 완료:",O.data());else throw console.error("❌ 사용자 등록 확인 실패: 문서가 존재하지 않음"),new Error("사용자 등록이 완료되지 않았습니다.");return{...u,role:k?"admin":"student"}}}catch(d){if(h++,console.error(`❌ Firestore 접근 오류 (시도 ${h}/${c}):`,d),console.error("❌ 오류 코드:",d.code),console.error("❌ 오류 메시지:",d.message),d.code==="permission-denied")throw console.error("❌ Firestore 권한 오류. 사용자 등록이 불가능합니다."),console.error("❌ 오류 상세 정보:",{code:d.code,message:d.message,firebaseApp:!!Zs,db:!!e,auth:!!Js,userUid:u.uid,userEmail:u.email}),new Error("Firebase 프로젝트 설정을 확인해주세요. Firestore가 활성화되어 있고 Security Rules가 올바르게 설정되어 있는지 확인하세요.");if(h<c)console.log(`⏳ ${h*1e3}ms 후 재시도...`),await new Promise(p=>setTimeout(p,h*1e3));else throw console.error("❌ 모든 재시도 실패. 사용자 등록이 불가능합니다."),new Error("사용자 정보를 저장할 수 없습니다. 잠시 후 다시 시도해주세요.")}return{...u,role:"student"}},s=async()=>{if(!nh.value){nh.value=!0,RP.value=null;try{if(!Js||!$y)throw new Error("Firebase is not configured.");const u=await C0t(Js,$y);console.log("✅ Google 로그인 팝업 성공:",u.user.email);try{if(Zs&&e)ws.value=await n(u.user),console.log("✅ 로그인 후 사용자 역할 설정 완료:",ws.value.role);else{console.log("⚠️ Firebase가 초기화되지 않아 인증을 완료할 수 없습니다."),ws.value=null,Js&&await nI(Js),t.notify({type:"warning",message:"Firebase 설정을 확인해주세요. 로그인할 수 없습니다.",timeout:5e3}),nh.value=!1;return}console.log("✅ 로그인 후 인증 상태 업데이트 완료:",{isAuthenticated:!!ws.value,userRole:ws.value?.role,userEmail:ws.value?.email})}catch(c){console.error("❌ 로그인 후 사용자 역할 가져오기 실패:",c),ws.value=null,Js&&await nI(Js),t.notify({type:"warning",message:"Firebase 설정 또는 권한 오류로 로그인할 수 없습니다.",timeout:5e3}),nh.value=!1;return}nh.value=!1,t.notify({type:"positive",message:"로그인에 성공했습니다!",timeout:2e3})}catch(u){console.error("❌ Google 로그인 팝업 실패:",u),RP.value=u.message,t.notify({type:"negative",message:"로그인을 시작할 수 없습니다."}),nh.value=!1}}},r=async()=>{if(console.log("🔍 useAuth: logout 함수 호출됨"),console.log("🔍 useAuth: auth 객체 확인:",!!Js),!Js){console.log("❌ useAuth: auth 객체가 없음");return}try{Bw&&(console.log("🔍 useAuth: Firestore 리스너 정리"),Bw(),Bw=null),console.log("🔍 useAuth: Firebase signOut 실행"),await nI(Js),console.log("✅ useAuth: Firebase signOut 성공"),ws.value=null,console.log("✅ useAuth: 사용자 상태 초기화 완료"),console.log("✅ 로그아웃 성공")}catch(u){console.error("❌ useAuth: 로그아웃 실패:",u),t.notify({type:"negative",message:"로그아웃 중 오류가 발생했습니다."})}},i=()=>{if(!uce){if(uce=!0,console.log("🔐 Firebase 초기화 상태 확인:",{firebaseApp:!!Zs,auth:!!Js,db:!!e}),!Js){console.log("⚠️ Firebase Auth가 초기화되지 않음"),nh.value=!1;return}console.log("🔐 Firebase Auth 초기화 시작"),Bw=r0t(Js,async u=>{if(console.log("🔄 onAuthStateChanged 실행. 사용자:",u?u.email:"없음"),u)if(console.log("✅ 인증된 사용자 감지:",{uid:u.uid,email:u.email,displayName:u.displayName,emailVerified:u.emailVerified}),Zs&&e)try{ws.value=await n(u),console.log("✅ 사용자 역할 설정 완료:",ws.value.role),console.log("✅ 인증 상태 업데이트 완료:",{isAuthenticated:!!ws.value,userRole:ws.value?.role,userEmail:ws.value?.email})}catch(c){console.error("❌ 사용자 역할 가져오기 실패:",c),console.error("❌ 오류 코드:",c.code),console.error("❌ 오류 메시지:",c.message),ws.value=null,Js&&await nI(Js),RP.value=c.message,t.notify({type:"warning",message:"사용자 등록/권한 확인 실패로 로그인할 수 없습니다. 관리자에게 문의하세요.",timeout:5e3}),nh.value=!1;return}else console.log("⚠️ Firebase가 초기화되지 않아 사용자 역할을 가져올 수 없습니다."),ws.value=null,Js&&await nI(Js),t.notify({type:"warning",message:"Firebase 설정이 필요합니다. 로그인할 수 없습니다.",timeout:5e3});else console.log("ℹ️ 인증되지 않은 사용자"),ws.value=null,console.log("✅ 인증 해제 상태 업데이트 완료");nh.value=!1})}};NG(()=>{Bw&&Bw()});const o=()=>{console.log("🔍 현재 사용자 정보:",{user:ws.value,isAuthenticated:!!ws.value,userRole:ws.value?.role,firebaseApp:!!Zs,firestore:!!e})},a=()=>(console.log("🔧 Firebase 설정 상태 확인:"),console.log("  - Firebase App:",!!Zs),console.log("  - Firebase Auth:",!!Js),console.log("  - Firestore DB:",!!e),console.log("  - Google Provider:",!!$y),Zs&&console.log("  - Firebase Config:",{apiKey:Zs.options.apiKey?"설정됨":"설정 안됨",authDomain:Zs.options.authDomain?"설정됨":"설정 안됨",projectId:Zs.options.projectId?"설정됨":"설정 안됨",storageBucket:Zs.options.storageBucket?"설정됨":"설정 안됨"}),{firebaseApp:!!Zs,auth:!!Js,db:!!e,googleProvider:!!$y});return{user:Ge(()=>ws.value),loading:Ge(()=>nh.value),error:Ge(()=>RP.value),isAuthenticated:Ge(()=>!!ws.value),displayName:Ge(()=>ws.value?.displayName||"사용자"),email:Ge(()=>ws.value?.email||""),photoURL:Ge(()=>ws.value?.photoURL||""),isFirebaseConfigured:Ge(()=>!!Zs),userRole:Ge(()=>ws.value?.role||"unknown"),signInWithGoogle:s,logout:r,initAuth:i,debugUserInfo:o,checkFirebaseConfig:a}}const oDt={id:"app"},aDt=XV({__name:"App",setup(t){const{initAuth:e,isAuthenticated:n,userRole:s,loading:r,debugUserInfo:i}=iDt(),o=NTt(),a=DTt();return PG(()=>{e()}),rS([n,s,r],([u,c,h])=>{h||(console.log(`인증 상태 감시: isAuthenticated=${u}, userRole=${c}, loading=${h}`),console.log(`현재 경로: ${a.path}`),i(),u?c==="admin"?(console.log("관리자로 확인됨. 현재 경로 유지."),(a.path==="/login"||a.path.startsWith("/study")&&a.name!=="StudentView")&&o.push("/")):c==="student"&&(a.path.startsWith("/study")||(console.log("학생으로 확인됨. 학생 페이지로 이동합니다."),o.push("/study/default"))):a.path.startsWith("/study")?console.log("미인증 사용자가 학생 페이지 접근. 로그인 페이지로 이동합니다."):console.log("미인증 사용자. 현재 경로 유지."))}),(u,c)=>{const h=kwt("router-view");return SRe(),ibt("div",oDt,[Ra(h)])}}}),lDt=t=>t,uDt=lDt,cDt=[{path:"/",component:()=>Cn(()=>import("./MainLayout-CDS1Q2ag.js"),__vite__mapDeps([66,67,68,69,70,71,72,73,74,75,76,77,78,79])),children:[{path:"",component:()=>Cn(()=>import("./IndexPage-BBOp0ox0.js"),__vite__mapDeps([80,67,68,69,76,81,74,75,82,78,83]))},{path:"survey-results",component:()=>Cn(()=>import("./SurveyResults-CG0MlidS.js"),__vite__mapDeps([84,72,69,67,68,71,85,81,86,87]))}]},{path:"/logout",component:()=>Cn(()=>import("./LogoutPage-Ds-LyEnk.js"),__vite__mapDeps([88,68,69,76,81,70,89]))},{path:"/poll-result",component:()=>Cn(()=>import("./PollResultPage-D9Rdlzlq.js"),__vite__mapDeps([90,72,69,81,86,87,91]))},{path:"/study/:courseId",component:()=>Cn(()=>import("./StudentView-BxnDG6Z3.js"),__vite__mapDeps([92,67,68,69,71,73,70,74,75,76,72,77,82,81,85,86,87,93])),beforeEnter:(t,e,n)=>{const s=localStorage.getItem("isGuestMode")==="true",r=localStorage.getItem("guestUserId"),i=s&&r,o=!0,a=localStorage.getItem("enableStudentMode")==="true",u=o;console.log("🔍 라우터 가드 디버깅:",{isGuestMode:s,guestUserId:r,isGuestAuthenticated:i,envStudentMode:o,localStudentMode:a,isStudentModeEnabled:u,courseId:t.params.courseId,localStorage:{isGuestMode:localStorage.getItem("isGuestMode"),guestUserId:localStorage.getItem("guestUserId"),enableStudentMode:localStorage.getItem("enableStudentMode")}});{console.log("✅ 학생 페이지 접근 허용:",{isGuestAuthenticated:i,isStudentModeEnabled:u,courseId:t.params.courseId}),n();return}}},{path:"/:catchAll(.*)*",component:()=>Cn(()=>import("./ErrorNotFound-Y0LrvkS8.js"),[])}],G9=uDt(function(){return PTt({scrollBehavior:()=>({left:0,top:0}),routes:cDt,history:iTt("/")})});async function hDt(t,e){const n=t(aDt);n.use(AEt,e);const s=ZR(typeof G9=="function"?await G9({}):G9);return{app:n,router:s}}const k$={xs:18,sm:24,md:32,lg:38,xl:46},_Y={size:String};function yY(t,e=k$){return Ge(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function dDt(t,e){return t!==void 0&&t()||e}function UOt(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function OI(t,e){return t!==void 0?e.concat(t()):e}function fDt(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function qOt(t,e,n,s,r,i){e.key=s+r;const o=Ct(t,e,n);return r===!0?XAe(o,i()):o}const cce="0 0 24 24",Q9=t=>t,Y9=t=>`ionicons ${t}`,oDe={"mdi-":t=>`mdi ${t}`,"icon-":Q9,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":Y9,"ion-ios":Y9,"ion-logo":Y9,"iconfont ":Q9,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":Q9},aDe={o_:"-outlined",r_:"-round",s_:"-sharp"},lDe={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},pDt=new RegExp("^("+Object.keys(oDe).join("|")+")"),gDt=new RegExp("^("+Object.keys(aDe).join("|")+")"),hce=new RegExp("^("+Object.keys(lDe).join("|")+")"),mDt=/^[Mm]\s?[-+]?\.?\d/,_Dt=/^img:/,yDt=/^svguse:/,vDt=/^ion-/,wDt=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,IL=n1({name:"QIcon",props:{..._Y,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=_w(),s=yY(t),r=Ge(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=Ge(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(mDt.test(a)===!0){const[h,d=cce]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[m,w,k]=p.split("@@");return Ct("path",{style:w,d:m,transform:k})})}}if(_Dt.test(a)===!0)return{img:!0,src:a.substring(4)};if(yDt.test(a)===!0){const[h,d=cce]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let u=" ";const c=a.match(pDt);if(c!==null)o=oDe[c[1]](a);else if(wDt.test(a)===!0)o=a;else if(vDt.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(hce.test(a)===!0){o="notranslate material-symbols";const h=a.match(hce);h!==null&&(a=a.substring(6),o+=lDe[h[1]]),u=a}else{o="notranslate material-icons";const h=a.match(gDt);h!==null&&(a=a.substring(2),o+=aDe[h[1]]),u=a}return{cls:o,content:u}});return()=>{const o={class:r.value,style:s.value,"aria-hidden":"true"};return i.value.none===!0?Ct(t.tag,o,dDt(e.default)):i.value.img===!0?Ct(t.tag,o,OI(e.default,[Ct("img",{src:i.value.src})])):i.value.svg===!0?Ct(t.tag,o,OI(e.default,[Ct("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?Ct(t.tag,o,OI(e.default,[Ct("svg",{viewBox:i.value.viewBox},[Ct("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),Ct(t.tag,o,OI(e.default,[i.value.content])))}}}),bDt=n1({name:"QAvatar",props:{..._Y,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=yY(t),s=Ge(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),r=Ge(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[Ct(IL,{name:t.icon})]:void 0;return Ct("div",{class:s.value,style:n.value},[Ct("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},fDt(e.default,i))])}}}),EDt={size:{type:[String,Number],default:"1em"},color:String};function TDt(t){return{cSize:Ge(()=>t.size in k$?`${k$[t.size]}px`:t.size),classes:Ge(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const uDe=n1({name:"QSpinner",props:{...EDt,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=TDt(t);return()=>Ct("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[Ct("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function CDt(t,e){const n=t.style;for(const s in e)n[s]=e[s]}function jOt(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=uv(t);if(e)return e.$el||e}function BOt(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function IDt(t,e=250){let n=!1,s;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),s=t.apply(this,arguments)),s}}function dce(t,e,n,s){n.modifiers.stop===!0&&BRe(t);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||s===!0;const o=document.createElement("span"),a=document.createElement("span"),u=aEt(t),{left:c,top:h,width:d,height:p}=e.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),w=m/2,k=`${(d-m)/2}px`,P=i?k:`${u.left-c-w}px`,O=`${(p-m)/2}px`,M=i?O:`${u.top-h-w}px`;a.className="q-ripple__inner",CDt(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${P},${M},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${r?" text-"+r:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const V=()=>{o.remove(),clearTimeout(q)};n.abort.push(V);let q=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${k},${O},0) scale3d(1,1,1)`,a.style.opacity=.2,q=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,q=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(V),1)},275)},250)},50)}function fce(t,{modifiers:e,value:n,arg:s}){const r=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||s,keyCodes:[].concat(r.keyCodes||13)}}const SDt=oEt({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const s={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(r){s.enabled===!0&&r.qSkipRipple!==!0&&r.type===(s.modifiers.early===!0?"pointerdown":"click")&&dce(r,t,s,r.qKeyEvent===!0)},keystart:IDt(r=>{s.enabled===!0&&r.qSkipRipple!==!0&&DB(r,s.modifiers.keyCodes)===!0&&r.type===`key${s.modifiers.early===!0?"down":"up"}`&&dce(r,t,s,!0)},300)};fce(s,e),t.__qripple=s,lEt(s,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&fce(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),uEt(e,"main"),delete t._qripple)}}),cDe={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},kDt=Object.keys(cDe),ADt={align:{type:String,validator:t=>kDt.includes(t)}};function RDt(t){return Ge(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${cDe[e]}`})}function $Ot(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function PDt(t){return t.appContext.config.globalProperties.$router!==void 0}function zOt(t){return t.isUnmounted===!0||t.isDeactivated===!0}function pce(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function gce(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function xDt(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(Array.isArray(r)===!1||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function mce(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function NDt(t,e){return Array.isArray(t)===!0?mce(t,e):Array.isArray(e)===!0?mce(e,t):t===e}function DDt(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(NDt(t[n],e[n])===!1)return!1;return!0}const hDe={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},HOt={...hDe,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function ODt({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=_w(),{props:s,proxy:r,emit:i}=n,o=PDt(n),a=Ge(()=>s.disable!==!0&&s.href!==void 0),u=Ge(e===!0?()=>o===!0&&s.disable!==!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!=="":()=>o===!0&&a.value!==!0&&s.to!==void 0&&s.to!==null&&s.to!==""),c=Ge(()=>u.value===!0?M(s.to):null),h=Ge(()=>c.value!==null),d=Ge(()=>a.value===!0||h.value===!0),p=Ge(()=>s.type==="a"||d.value===!0?"a":s.tag||t||"div"),m=Ge(()=>a.value===!0?{href:s.href,target:s.target}:h.value===!0?{href:c.value.href,target:s.target}:{}),w=Ge(()=>{if(h.value===!1)return-1;const{matched:H}=c.value,{length:J}=H,I=H[J-1];if(I===void 0)return-1;const v=r.$route.matched;if(v.length===0)return-1;const y=v.findIndex(gce.bind(null,I));if(y!==-1)return y;const T=pce(H[J-2]);return J>1&&pce(I)===T&&v[v.length-1].path!==T?v.findIndex(gce.bind(null,H[J-2])):y}),k=Ge(()=>h.value===!0&&w.value!==-1&&xDt(r.$route.params,c.value.params)),P=Ge(()=>k.value===!0&&w.value===r.$route.matched.length-1&&DDt(r.$route.params,c.value.params)),O=Ge(()=>h.value===!0?P.value===!0?` ${s.exactActiveClass} ${s.activeClass}`:s.exact===!0?"":k.value===!0?` ${s.activeClass}`:"":"");function M(H){try{return r.$router.resolve(H)}catch{}return null}function V(H,{returnRouterError:J,to:I=s.to,replace:v=s.replace}={}){if(s.disable===!0)return H.preventDefault(),Promise.resolve(!1);if(H.metaKey||H.altKey||H.ctrlKey||H.shiftKey||H.button!==void 0&&H.button!==0||s.target==="_blank")return Promise.resolve(!1);H.preventDefault();const y=r.$router[v===!0?"replace":"push"](I);return J===!0?y:y.then(()=>{}).catch(()=>{})}function q(H){if(h.value===!0){const J=I=>V(H,I);i("click",H,J),H.defaultPrevented!==!0&&J()}else i("click",H)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:c,linkIsActive:k,linkIsExactActive:P,linkClass:O,linkAttrs:m,getLink:M,navigateToRouterLink:V,navigateOnClick:q}}const _ce={none:0,xs:4,sm:8,md:16,lg:24,xl:32},LDt={xs:8,sm:10,md:14,lg:20,xl:24},MDt=["button","submit","reset"],FDt=/[^\s]\/[^\s]/,VDt=["flat","outline","push","unelevated"];function UDt(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const qDt={..._Y,...hDe,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...VDt.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...ADt.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},jDt={...qDt,round:Boolean};function BDt(t){const e=yY(t,LDt),n=RDt(t),{hasRouterLink:s,hasLink:r,linkTag:i,linkAttrs:o,navigateOnClick:a}=ODt({fallbackTag:"button"}),u=Ge(()=>{const P=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},P,{padding:t.padding.split(/\s+/).map(O=>O in _ce?_ce[O]+"px":O).join(" "),minWidth:"0",minHeight:"0"}):P}),c=Ge(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=Ge(()=>t.disable!==!0&&t.loading!==!0),d=Ge(()=>h.value===!0?t.tabindex||0:-1),p=Ge(()=>UDt(t,"standard")),m=Ge(()=>{const P={tabindex:d.value};return r.value===!0?Object.assign(P,o.value):MDt.includes(t.type)===!0&&(P.type=t.type),i.value==="a"?(t.disable===!0?P["aria-disabled"]="true":P.href===void 0&&(P.role="button"),s.value!==!0&&FDt.test(t.type)===!0&&(P.type=t.type)):t.disable===!0&&(P.disabled="",P["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(P,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),P}),w=Ge(()=>{let P;t.color!==void 0?t.flat===!0||t.outline===!0?P=`text-${t.textColor||t.color}`:P=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(P=`text-${t.textColor}`);const O=t.round===!0?"round":`rectangle${c.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${O}`+(P!==void 0?" "+P:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),k=Ge(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:w,style:u,innerClasses:k,attributes:m,hasLink:r,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:kl}=zv;let $w=null,zw=null,Hw=null;const $Dt=n1({name:"QBtn",props:{...jDt,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:s}=_w(),{classes:r,style:i,innerClasses:o,attributes:a,hasLink:u,linkTag:c,navigateOnClick:h,isActionable:d}=BDt(t),p=qm(null),m=qm(null);let w=null,k,P=null;const O=Ge(()=>t.label!==void 0&&t.label!==null&&t.label!==""),M=Ge(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),V=Ge(()=>({center:t.round})),q=Ge(()=>{const K=Math.max(0,Math.min(100,t.percentage));return K>0?{transition:"transform 0.6s",transform:`translateX(${K-100}%)`}:{}}),H=Ge(()=>{if(t.loading===!0)return{onMousedown:b,onTouchstart:b,onClick:b,onKeydown:b,onKeyup:b};if(d.value===!0){const K={onClick:I,onKeydown:v,onMousedown:T};if(s.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";K[`onTouchstart${ne}`]=y}return K}return{onClick:qw}}),J=Ge(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value,...a.value,...H.value}));function I(K){if(p.value!==null){if(K!==void 0){if(K.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){K.qAvoidFocus!==!0&&p.value.focus();const ae=()=>{document.removeEventListener("keydown",qw,!0),document.removeEventListener("keyup",ae,kl),p.value?.removeEventListener("blur",ae,kl)};document.addEventListener("keydown",qw,!0),document.addEventListener("keyup",ae,kl),p.value.addEventListener("blur",ae,kl)}}h(K)}}function v(K){p.value!==null&&(n("keydown",K),DB(K,[13,32])===!0&&zw!==p.value&&(zw!==null&&E(),K.defaultPrevented!==!0&&(K.qAvoidFocus!==!0&&p.value.focus(),zw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",S,!0),p.value.addEventListener("blur",S,kl)),qw(K)))}function y(K){p.value!==null&&(n("touchstart",K),K.defaultPrevented!==!0&&($w!==p.value&&($w!==null&&E(),$w=p.value,w=K.target,w.addEventListener("touchcancel",S,kl),w.addEventListener("touchend",S,kl)),k=!0,P!==null&&clearTimeout(P),P=setTimeout(()=>{P=null,k=!1},200)))}function T(K){p.value!==null&&(K.qSkipRipple=k===!0,n("mousedown",K),K.defaultPrevented!==!0&&Hw!==p.value&&(Hw!==null&&E(),Hw=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",S,kl)))}function S(K){if(p.value!==null&&!(K?.type==="blur"&&document.activeElement===p.value)){if(K?.type==="keyup"){if(zw===p.value&&DB(K,[13,32])===!0){const ne=new MouseEvent("click",K);ne.qKeyEvent=!0,K.defaultPrevented===!0&&NB(ne),K.cancelBubble===!0&&BRe(ne),p.value.dispatchEvent(ne),qw(K),K.qKeyEvent=!0}n("keyup",K)}E()}}function E(K){const ne=m.value;K!==!0&&($w===p.value||Hw===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),$w===p.value&&(w!==null&&(w.removeEventListener("touchcancel",S,kl),w.removeEventListener("touchend",S,kl)),$w=w=null),Hw===p.value&&(document.removeEventListener("mouseup",S,kl),Hw=null),zw===p.value&&(document.removeEventListener("keyup",S,!0),p.value?.removeEventListener("blur",S,kl),zw=null),p.value?.classList.remove("q-btn--active")}function b(K){qw(K),K.qSkipRipple=!0}return xG(()=>{E(!0)}),Object.assign(s,{click:K=>{d.value===!0&&I(K)}}),()=>{let K=[];t.icon!==void 0&&K.push(Ct(IL,{name:t.icon,left:t.stack!==!0&&O.value===!0,role:"img"})),O.value===!0&&K.push(Ct("span",{class:"block"},[t.label])),K=OI(e.default,K),t.iconRight!==void 0&&t.round===!1&&K.push(Ct(IL,{name:t.iconRight,right:t.stack!==!0&&O.value===!0,role:"img"}));const ne=[Ct("span",{class:"q-focus-helper",ref:m})];return t.loading===!0&&t.percentage!==void 0&&ne.push(Ct("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[Ct("span",{class:"q-btn__progress-indicator fit block",style:q.value})])),ne.push(Ct("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},K)),t.loading!==null&&ne.push(Ct(Ibt,{name:"q-transition--fade"},()=>t.loading===!0?[Ct("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[Ct(uDe)])]:null)),XAe(Ct(c.value,J.value,ne),[[SDt,M.value,void 0,V.value]])}}});let zDt=1,HDt=document.body;function WDt(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${zDt++}`:t,zO.globalNodes!==void 0){const s=zO.globalNodes.class;s!==void 0&&(n.className=s)}return HDt.appendChild(n),n}function WOt(t){t.remove()}let KDt=0;const Kx={},Gx={},Hu={},dDe={},GDt=/^\s*$/,fDe=[],QDt=[void 0,null,!0,!1,""],vY=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],YDt=["top-left","top-right","bottom-left","bottom-right"],LI={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function pDe(t,e,n){if(!t)return lI("parameter required");let s;const r={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(r,Kx),uA(t)===!1&&(r.type&&Object.assign(r,LI[r.type]),t={message:t}),Object.assign(r,LI[t.type||r.type],t),typeof r.icon=="function"&&(r.icon=r.icon(e)),r.spinner?(r.spinner===!0&&(r.spinner=uDe),r.spinner=ZR(r.spinner)):r.spinner=!1,r.meta={hasMedia:!!(r.spinner!==!1||r.icon||r.avatar),hasText:yce(r.message)||yce(r.caption)},r.position){if(vY.includes(r.position)===!1)return lI("wrong position",t)}else r.position="bottom";if(QDt.includes(r.timeout)===!0)r.timeout=5e3;else{const u=Number(r.timeout);if(isNaN(u)||u<0)return lI("wrong timeout",t);r.timeout=Number.isFinite(u)?u:0}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Kx.actions)===!0?Kx.actions:[]).concat(Array.isArray(LI[t.type]?.actions)===!0?LI[t.type].actions:[]),{closeBtn:o}=r;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),r.actions=i.map(({handler:u,noDismiss:c,...h})=>({flat:!0,...h,onClick:typeof u=="function"?()=>{u(),c!==!0&&a()}:()=>{a()}})),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...r.attrs}}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(u=>`${u.label}*${u.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),r.meta.uid=n.notif.meta.uid;const u=Hu[r.position].value.indexOf(n.notif);Hu[r.position].value[u]=r}else{const u=Gx[r.meta.group];if(u===void 0){if(r.meta.uid=KDt++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Hu[r.position].value.splice(Math.floor(Hu[r.position].value.length/2),0,r);else{const c=r.position.indexOf("top")!==-1?"unshift":"push";Hu[r.position].value[c](r)}r.group!==void 0&&(Gx[r.meta.group]=r)}else{if(u.meta.timer&&(clearTimeout(u.meta.timer),u.meta.timer=void 0),r.badgePosition!==void 0){if(YDt.includes(r.badgePosition)===!1)return lI("wrong badgePosition",t)}else r.badgePosition=`top-${r.position.indexOf("left")!==-1?"right":"left"}`;r.meta.uid=u.meta.uid,r.meta.badge=u.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const c=Hu[r.position].value.indexOf(u);Hu[r.position].value[c]=Gx[r.meta.group]=r}}const a=()=>{XDt(r),s=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{r.meta.timer=void 0,a()},r.timeout+1e3)),r.group!==void 0)return u=>{u!==void 0?lI("trying to update a grouped one which is forbidden",t):a()};if(s={dismiss:a,config:t,notif:r},n!==void 0){Object.assign(n,s);return}return u=>{if(s!==void 0)if(u===void 0)s.dismiss();else{const c=Object.assign({},s.config,u,{group:!1,position:r.position});pDe(c,e,s)}}}function XDt(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Hu[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete Gx[t.meta.group];const n=fDe[""+t.meta.uid];if(n){const{width:s,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=s,n.style.height=r}Hu[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function yce(t){return t!=null&&GDt.test(t)!==!0}function lI(t,e){return console.error(`Notify: ${t}`,e),!1}function JDt(){return n1({name:"QNotifications",devtools:{hide:!0},setup(){return()=>Ct("div",{class:"q-notifications"},vY.map(t=>Ct(Hbt,{key:t,class:dDe[t],tag:"div",name:`q-notification--${t}`},()=>Hu[t].value.map(e=>{const n=e.meta,s=[];if(n.hasMedia===!0&&(e.spinner!==!1?s.push(Ct(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?s.push(Ct(IL,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&s.push(Ct(bDt,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>Ct("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[Ct("div",a),Ct("div",{class:"q-notification__caption"},[e.caption])]:a}s.push(Ct("div",o,i))}const r=[Ct("div",{class:n.contentClass},s)];return e.progress===!0&&r.push(Ct("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&r.push(Ct("div",{class:n.actionsClass},e.actions.map(i=>Ct($Dt,i)))),n.badge>1&&r.push(Ct("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),Ct("div",{ref:i=>{fDe[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[Ct("div",{class:n.wrapperClass},r)])}))))}})}const ZDt={setDefaults(t){uA(t)===!0&&Object.assign(Kx,t)},registerType(t,e){uA(e)===!0&&(LI[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>pDe(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){vY.forEach(s=>{Hu[s]=qm([]);const r=["left","center","right"].includes(s)===!0?"center":s.indexOf("top")!==-1?"top":"bottom",i=s.indexOf("left")!==-1?"start":s.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(s)?`items-${s==="left"?"start":"end"} justify-center`:s==="center"?"flex-center":`items-${i}`;dDe[s]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${o}`});const n=WDt("q-notify");IEt(JDt(),e).mount(n)}}},eOt={config:{},plugins:{Notify:ZDt}},tOt="/";async function nOt({app:t,router:e},n){let s=!1;const r=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(s=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const u=r(a);u!==null&&(window.location.href=u)},o=window.location.href.replace(window.location.origin,"");for(let a=0;s===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:tOt})}catch(u){if(u&&u.url){i(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}hDt(qRe,eOt).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",s=>s.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})]:["all",s=>s.map(r=>r.default)];return Promise[e]([Cn(()=>import("./pinia-Cp8Yfd-4.js"),__vite__mapDeps([94,75]))]).then(s=>{const r=n(s).filter(i=>typeof i=="function");nOt(t,r)})});export{kT as $,AT as A,ST as B,c2 as C,aM as D,CT as E,Y$ as F,MA as G,ju as H,h2 as I,Na as J,lH as K,kh as L,nH as M,He as N,Mi as O,$d as P,FA as Q,oM as R,d2 as S,u2 as T,qc as U,bs as V,J$ as W,Is as X,Cn as Y,Zz as Z,H$ as _,WL as a,Ku as a$,Jz as a0,a2 as a1,eH as a2,tw as a3,mE as a4,yl as a5,UA as a6,e5 as a7,b2 as a8,sM as a9,s5 as aA,ZL as aB,t5 as aC,Wy as aD,aH as aE,o5 as aF,g2 as aG,m2 as aH,tg as aI,AM as aJ,_M as aK,gM as aL,bM as aM,TM as aN,vM as aO,kM as aP,xS as aQ,mM as aR,wM as aS,HA as aT,RM as aU,CM as aV,EM as aW,Qu as aX,td as aY,Rl as aZ,Gu as a_,qL as aa,DA as ab,u5 as ac,l5 as ad,Zh as ae,FL as af,VL as ag,cg as ah,Sb as ai,nM as aj,jL as ak,LA as al,_E as am,Jg as an,tM as ao,JL as ap,Xg as aq,iH as ar,PM as as,tH as at,UT as au,qT as av,en as aw,YL as ax,sH as ay,eM as az,ji as b,aR as b$,$A as b0,xE as b1,HM as b2,qS as b3,az as b4,jS as b5,NE as b6,bz as b7,_z as b8,oz as b9,j$ as bA,jT as bB,HW as bC,QH as bD,WW as bE,id as bF,Ke as bG,o_ as bH,Jy as bI,uR as bJ,cR as bK,xH as bL,MH as bM,q2 as bN,IH as bO,Xi as bP,y_e as bQ,aw as bR,LH as bS,r8 as bT,_f as bU,FH as bV,gH as bW,j2 as bX,LF as bY,nl as bZ,Jme as b_,Nb as ba,vz as bb,yz as bc,wz as bd,lz as be,E2 as bf,v2 as bg,w2 as bh,$$ as bi,gE as bj,C2 as bk,Jh as bl,oH as bm,n5 as bn,uH as bo,i5 as bp,f2 as bq,rH as br,_2 as bs,N$ as bt,e_ as bu,W$ as bv,Pr as bw,gf as bx,NL as by,D$ as bz,T2 as c,kEe as c$,O2 as c0,P_e as c1,ZW as c2,KE as c3,lp as c4,Wa as c5,z_e as c6,j_e as c7,yEe as c8,_t as c9,W_e as cA,Nf as cB,kH as cC,AH as cD,Dy as cE,d0 as cF,HH as cG,PH as cH,F2 as cI,rk as cJ,Sv as cK,zH as cL,jH as cM,Iv as cN,CEe as cO,I7 as cP,_Ee as cQ,PR as cR,xR as cS,_n as cT,qH as cU,vEe as cV,$H as cW,M_e as cX,BH as cY,O_e as cZ,Vb as c_,KW as ca,REe as cb,x2 as cc,k_e as cd,UH as ce,QW as cf,Bp as cg,hR as ch,YH as ci,oR as cj,Ds as ck,zW as cl,gEe as cm,pEe as cn,$W as co,mEe as cp,BT as cq,sk as cr,Fl as cs,z2 as ct,N_e as cu,n8 as cv,WH as cw,RH as cx,D2 as cy,K_e as cz,xL as d,DCe as d$,$_e as d0,YW as d1,XW as d2,wy as d3,T7 as d4,c7 as d5,s7 as d6,m7 as d7,y7 as d8,f7 as d9,Hwe as dA,Kwe as dB,Swe as dC,s8 as dD,e8 as dE,t8 as dF,$me as dG,nk as dH,i8 as dI,xf as dJ,SEe as dK,L_e as dL,PEe as dM,B_e as dN,GW as dO,TEe as dP,JW as dQ,gme as dR,ow as dS,n_e as dT,_i as dU,Cg as dV,mH as dW,mme as dX,Ome as dY,DR as dZ,Yke as d_,b7 as da,oD as db,l7 as dc,p7 as dd,nF as de,C7 as df,v7 as dg,_7 as dh,Eh as di,Mf as dj,Ju as dk,bh as dl,wh as dm,tF as dn,Sk as dp,Z7 as dq,bD as dr,Iwe as ds,ED as dt,kk as du,Gwe as dv,zwe as dw,Cwe as dx,b0 as dy,Wwe as dz,iR as e,gCe as e$,Xke as e0,Bf as e1,Qe as e2,dw as e3,Qb as e4,KF as e5,GF as e6,ATe as e7,KTe as e8,k8 as e9,tA as eA,eit as eB,sAe as eC,dy as eD,Git as eE,QF as eF,OCe as eG,jF as eH,Ws as eI,Qke as eJ,gyt as eK,pyt as eL,Gke as eM,myt as eN,LR as eO,KD as eP,Pc as eQ,P8 as eR,QE as eS,Sm as eT,STe as eU,TTe as eV,CTe as eW,bb as eX,cCe as eY,Hyt as eZ,mx as e_,dTe as ea,eC as eb,vt as ec,Jke as ed,h_ as ee,vl as ef,Xit as eg,Lyt as eh,tCe as ei,m8 as ej,Zyt as ek,Mo as el,Lrt as em,WTe as en,pAe as eo,Dg as ep,QTe as eq,qEe as er,A8 as es,fG as et,Al as eu,nrt as ev,BF as ew,b8 as ex,Cit as ey,aAe as ez,t_ as f,uAe as f$,v8 as f0,kTe as f1,T8 as f2,GD as f3,Rit as f4,fCe as f5,hAe as f6,yCe as f7,eot as f8,Zit as f9,tIe as fA,gIe as fB,G8 as fC,OIe as fD,TIe as fE,vIe as fF,Jd as fG,Rm as fH,Th as fI,Xd as fJ,Yd as fK,W8 as fL,xO as fM,nSe as fN,tB as fO,zft as fP,nB as fQ,NO as fR,dgt as fS,lgt as fT,$ft as fU,Ax as fV,cgt as fW,ugt as fX,hgt as fY,Hft as fZ,fAe as f_,YE as fa,BV as fb,$V as fc,En as fd,LIe as fe,yyt as ff,uCe as fg,dCe as fh,Mit as fi,hCe as fj,Oit as fk,Myt as fl,L0 as fm,Qyt as fn,Yit as fo,rAe as fp,iAe as fq,ab as fr,NIe as fs,nIe as ft,YCe as fu,yIe as fv,wIe as fw,pIe as fx,RIe as fy,Oj as fz,sp as g,obt as g$,cAe as g0,Hst as g1,WD as g2,gAe as g3,Lit as g4,Im as g5,Gyt as g6,cvt as g7,Qit as g8,oAe as g9,_w as gA,Ct as gB,dDt as gC,bOt as gD,yOt as gE,vOt as gF,jOt as gG,CDt as gH,_Y as gI,yY as gJ,qOt as gK,SDt as gL,IL as gM,fDt as gN,qw as gO,XV as gP,ibt as gQ,RRe as gR,Ra as gS,SRe as gT,$Dt as gU,BRe as gV,Wh as gW,s4 as gX,NB as gY,PG as gZ,DTt as g_,zyt as ga,Zke as gb,cst as gc,ZT as gd,hrt as ge,$i as gf,sv as gg,$Ee as gh,hst as gi,Ost as gj,qm as gk,hC as gl,iOt as gm,Ji as gn,iE as go,Tn as gp,rS as gq,WAe as gr,aOt as gs,ZR as gt,Ge as gu,Lvt as gv,oOt as gw,Bl as gx,cOt as gy,n1 as gz,Va as h,dOt as h$,fwt as h0,hOt as h1,Ovt as h2,ubt as h3,NTt as h4,rDt as h5,$v as h6,xG as h7,lA as h8,zv as h9,iDt as hA,WNt as hB,MOt as hC,vG as hD,wG as hE,uv as hF,LOt as hG,XAe as hH,oEt as hI,uEt as hJ,_Ot as hK,lEt as hL,aEt as hM,gOt as hN,cEt as hO,ywt as hP,_wt as hQ,zOt as hR,wOt as hS,uA as hT,gSt as hU,Wu as hV,uOt as hW,bDt as hX,fOt as hY,Ibt as hZ,jAe as h_,Dx as ha,NG as hb,OI as hc,Zs as hd,tDt as he,FOt as hf,OOt as hg,pEt as hh,S$ as hi,DOt as hj,ROt as hk,I$ as hl,gRt as hm,SOt as hn,V9 as ho,xOt as hp,POt as hq,NOt as hr,Eue as hs,bue as ht,AOt as hu,kOt as hv,HOt as hw,ODt as hx,DB as hy,UOt as hz,IT as i,uDe as i0,kwt as i1,wwt as i2,BOt as i3,E9 as i4,bwt as i5,uRe as i6,PDt as i7,EEt as i8,TOt as i9,KIt as iA,r0t as iB,n0t as iC,_It as iD,NIt as iE,C0t as iF,nI as iG,EDt as iH,TDt as iI,rOt as iJ,VOt as iK,EOt as ia,pOt as ib,xB as ic,$Ot as id,lOt as ie,WDt as ig,WOt as ih,mOt as ii,ADt as ij,RDt as ik,F1e as il,ig as im,og as io,tf as ip,Hv as iq,ag as ir,s0t as is,a0t as it,lSt as iu,B1e as iv,QIt as iw,RIt as ix,hle as iy,v0t as iz,OA as j,Z$ as k,Tv as l,KL as m,yd as n,a5 as o,HL as p,ew as q,LL as r,r5 as s,st as t,BL as u,gg as v,xA as w,y2 as x,QL as y,p2 as z};
